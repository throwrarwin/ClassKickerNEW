/******/!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};e[i].call(r.exports,r,r.exports,t);r.loaded=!0;return r.exports}// webpackBootstrap
/******/
var n={};t.m=e;t.c=n;t.p="";return t(0)}([function(e,t,n){"use strict";var i=n(1)["default"],r=n(3)["default"],s=n(5),o=i(s);n(11);n(13);var a=n(16),c=n(41),l=n(42),u=n(43),d=n(44),h=n(45),f=n(46),g=n(47),p=r(g),m=n(285),v=r(m),_=n(363),y=r(_),k=n(364),b=r(k),S=n(366),w=r(S),C=n(368),E=r(C),T=n(369),I=r(T),A=n(370),x=r(A),O=n(371),P=r(O),R=n(373),D=r(R),M=n(374),N=r(M),L=n(375),F=r(L),U=n(376),$=r(U),q=n(379),H=r(q),j=n(380),B=r(j),W=n(381),V=r(W),z=n(382),G=r(z),Q=n(383),K=r(Q),Y=n(384),X=r(Y),J=n(385),Z=r(J),ee=n(388),te=r(ee),ne=n(389),ie=r(ne),re=n(391),se=r(re),oe=n(392),ae=r(oe),ce=n(393),le=r(ce),ue=n(394),de=r(ue),he=n(395),fe=r(he),ge=n(396),pe=r(ge),me=n(292),ve=r(me),_e=n(397),ye=r(_e),ke=n(398),be=r(ke),Se=n(18),we=r(Se),Ce=n(403),Ee=r(Ce),Te=n(405),Ie=r(Te),Ae=n(412),xe=r(Ae),Oe=n(416),Pe=r(Oe),Re=n(156),De=r(Re),Me=n(419),Ne=r(Me),Le=n(291),Fe=r(Le),Ue=n(421),$e=r(Ue),qe=n(430),He=r(qe),je=n(431),Be=r(je),We=n(446),Ve=r(We),ze=n(452),Ge=r(ze),Qe=n(453),Ke=r(Qe),Ye=n(460),Xe=r(Ye),Je=n(301),Ze=r(Je),et=n(461),tt=r(et),nt=n(470),it=r(nt),rt=n(471),st=r(rt),ot=n(472),at=r(ot),ct=n(473),lt=r(ct),ut=n(475),dt=r(ut),ht=n(477),ft=r(ht),gt=n(480),pt=r(gt),mt=n(484),vt=r(mt),_t=n(486),yt=r(_t),kt=n(489),bt=r(kt),St=n(490),wt=r(St),Ct=n(491),Et=r(Ct),Tt=n(493),It=r(Tt),At=n(458),xt=r(At),Ot=n(494),Pt=r(Ot),Rt=n(500),Dt=r(Rt),Mt=n(502),Nt=r(Mt),Lt=n(503),Ft=r(Lt),Ut=n(504),$t=r(Ut),qt=n(506),Ht=r(qt),jt=n(507),Bt=r(jt),Wt=n(510),Vt=r(Wt),zt=n(511),Gt=r(zt),Qt=n(513),Kt=r(Qt),Yt=n(514),Xt=r(Yt),Jt=n(519),Zt=r(Jt),en=n(523),tn=r(en),nn=n(524),rn=r(nn),sn=n(525),on=r(sn),an=n(534),cn=r(an),ln=n(537),un=r(ln),dn=n(518),hn=r(dn),fn=n(538),gn=r(fn),pn=n(602),mn=r(pn),vn=n(603),_n=r(vn),yn=n(605),kn=r(yn),bn=n(606),Sn=r(bn),wn=n(607),Cn=r(wn),En=n(608),Tn=r(En),In=n(609),An=r(In),xn=n(610),On=r(xn),Pn=n(611),Rn=r(Pn),Dn=n(612),Mn=r(Dn),Nn=n(613),Ln=r(Nn),Fn=n(614),Un=r(Fn),$n=n(623),qn=r($n),Hn=n(632),jn=r(Hn),Bn=n(615),Wn=r(Bn),Vn=n(637),zn=r(Vn),Gn=n(498),Qn=r(Gn),Kn=n(639),Yn=r(Kn),Xn=n(641),Jn=r(Xn),Zn=n(642),ei=r(Zn),ti=n(643),ni=r(ti),ii=n(647),ri=r(ii),si=n(648),oi=r(si),ai=n(625),ci=r(ai),li=n(662),ui=r(li),di=n(663),hi=r(di),fi=n(666),gi=r(fi),pi=n(667),mi=r(pi),vi=n(670),_i=r(vi),yi=n(671),ki=r(yi),bi=n(675),Si=r(bi),wi=n(677),Ci=r(wi),Ei=n(678),Ti=r(Ei),Ii=n(679),Ai=r(Ii),xi=n(680),Oi=r(xi),Pi=n(681),Ri=r(Pi),Di=n(682),Mi=r(Di),Ni=n(683),Li=r(Ni),Fi=n(684),Ui=r(Fi),$i=n(685),qi=r($i),Hi=n(686),ji=r(Hi),Bi=n(687),Wi=r(Bi),Vi=n(688),zi=r(Vi),Gi=n(689),Qi=r(Gi),Ki=n(690),Yi=r(Ki),Xi=n(691),Ji=r(Xi),Zi=n(692),er=r(Zi),tr=n(696),nr=r(tr),ir=n(698),rr=r(ir),sr=n(701),or=r(sr),ar=n(702),cr=r(ar),lr=n(704),ur=r(lr),dr=n(705),hr=r(dr),fr=n(706),gr=r(fr),pr=n(707),mr=r(pr),vr=n(708),_r=r(vr);angular.module("classkickApp",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","cfp.hotkeys","angular-clipboard","luegg.directives","ng-showdown","ui.sortable"]).run(u.polyfill).constant("moment",moment).constant("firebase",o).config(a.config).config(c.routerConfig).config(d.themeConfig).config(["hotkeysProvider",function(e){e.includeCheatSheet=!1}]).directive("assignmentSheet",p["default"]).directive("assignmentToolbar",v["default"]).directive("assignmentToolbarItem",B["default"]).directive("ckAutofocus",y["default"]).directive("assignmentQuestion",b["default"]).directive("savingIndicator",w["default"]).directive("fileInput",E["default"]).directive("ngReady",I["default"]).directive("imageCropper",x["default"]).directive("gradeInput",P["default"]).directive("compile",D["default"]).directive("helpRequestIndicator",N["default"]).directive("helpInbox",F["default"]).directive("audioCapture",$["default"]).directive("clone",H["default"]).directive("ngEnter",V["default"]).directive("ckSelect",G["default"]).directive("ckIndicatorCircle",K["default"]).directive("ckDraggable",X["default"]).directive("assignmentThumbnail",Z["default"]).component("helpCenter",te["default"]).component("chatMessage",ie["default"]).component("toolbarColorMenu",se["default"]).component("ckSwitch",ae["default"]).component("feedbackIndicator",le["default"]).component("articleAutocomplete",de["default"]).component("selectPurchasePeriod",fe["default"]).filter("orderObjectBy",pe["default"]).service("gapi",function(){return gapi}).service("Stripe",function(){return Stripe}).service("FirebaseService",be["default"]).service("AuthService",ve["default"]).service("BootstrapService",ye["default"]).service("StaticService",we["default"]).service("StaticContentService",Ee["default"]).service("HttpService",Ze["default"]).service("AssignmentService",Ie["default"]).service("AssignmentTrackingService",xe["default"]).service("FocusManagerService",Pe["default"]).service("ToolbarService",De["default"]).service("HelpRequestService",Ne["default"]).service("RosterService",$e["default"]).service("GoogleFormService",He["default"]).service("NotificationService",Be["default"]).service("StorageService",Ve["default"]).service("UserService",Ge["default"]).service("CacheService",Ke["default"]).service("ClassCodeService",Xe["default"]).service("AssignmentWorkService",tt["default"]).service("BreadcrumbService",it["default"]).service("MediaService",st["default"]).service("ImageEditService",at["default"]).service("MessageService",lt["default"]).service("StickerService",dt["default"]).service("ExportService",ft["default"]).service("ContractService",pt["default"]).service("StudentCacheService",vt["default"]).service("InviteCodeService",yt["default"]).service("CsvService",bt["default"]).service("ManipulativeElementService",wt["default"]).service("SubscriptionService",Et["default"]).service("StripeService",It["default"]).service("ABTestService",xt["default"]).service("StudentAssignmentService",Pt["default"]).service("GoogleClientService",Dt["default"]).service("GoogleClassroomService",Nt["default"]).service("DelightedService",Ft["default"]).service("GradeExportService",Ht["default"]).service("CleverService",Bt["default"]).service("AnswerExportService",Vt["default"]).service("SlideBackgroundService",Gt["default"]).service("FeedbackService",Xt["default"]).service("OrganizationService",Zt["default"]).service("IPStackService",tn["default"]).service("GooglePlacesService",rn["default"]).service("OrderService",on["default"]).service("HelpArticleService",cn["default"]).service("PlatformHeaderService",un["default"]).service("NotificationShardKeyFactory",hn["default"]).service("DatadogRumService",gn["default"]).service("GoogleAnalyticsService",Kt["default"]).service("LogRocketService",$t["default"]).service("MixpanelService",Fe["default"]).service("DomObservabilityService",mn["default"]).controller("RootController",_n["default"]).controller("LoginController",kn["default"]).controller("AccountLoginController",Sn["default"]).controller("ForgotPasswordController",Cn["default"]).controller("SignupChoiceController",Tn["default"]).controller("SignupController",An["default"]).controller("SignupNameController",On["default"]).controller("ErrorController",Rn["default"]).controller("PasswordResetController",Mn["default"]).controller("AccountController",Ln["default"]).controller("NavController",Un["default"]).controller("AssignmentsListController",qn["default"]).controller("RostersListController",jn["default"]).controller("UserProfileController",Wn["default"]).controller("AssignmentEditController",zn["default"]).controller("AssignmentExportDialogController",Qn["default"]).controller("PublicAssignmentController",Yn["default"]).controller("PublicAssignmentQuestionController",Jn["default"]).controller("AssignmentEditQuestionController",ei["default"]).controller("SessionWatchController",ni["default"]).controller("SessionWorkController",ri["default"]).controller("RosterEditController",oi["default"]).controller("ShareDialogController",ci["default"]).controller("AssignmentTeacherFeedbackController",ui["default"]).controller("UserNotificationsListController",hi["default"]).controller("AdminController",gi["default"]).controller("ContractUsersListController",mi["default"]).controller("MetricListController",_i["default"]).controller("StudentAssignmentsListController",ki["default"]).controller("ContractUserEditController",Si["default"]).controller("PaymentController",Ci["default"]).controller("PaymentSuccessController",Ti["default"]).controller("PublicAssignmentsListController",Ai["default"]).controller("LoadingController",Oi["default"]).controller("AccountHomeController",Ri["default"]).controller("AnonStudentAssignmentWorkController",Mi["default"]).controller("AnonStudentAssignmentOverviewController",Li["default"]).controller("AnonStudentAssignmentFeedbackController",Ui["default"]).controller("StudentAccountAssignmentWorkController",qi["default"]).controller("StudentAccountAssignmentOverviewController",ji["default"]).controller("StudentAccountAssignmentFeedbackController",Wi["default"]).controller("SignupSchoolController",zi["default"]).controller("SessionQuestionController",Qi["default"]).controller("AccountCleverController",Yi["default"]).controller("AssignmentLibraryController",Ji["default"]).controller("SessionController",er["default"]).controller("OrderController",nr["default"]).controller("OrderDetailController",rr["default"]).controller("SubmitOrderController",or["default"]).controller("AssignmentRostersController",cr["default"]).controller("HelpController",ur["default"]).controller("HelpCategoryController",hr["default"]).controller("HelpArticleController",gr["default"]).controller("HelpSectionController",mr["default"]).controller("HelpCoachesController",_r["default"]).run(l.runBlock);(0,h.Environment)();(0,f.Constants)()},function(e,t,n){e.exports=n(2)},function(e,t){"use strict";t.__esModule=!0;t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t["default"]=e;return t}},function(e,t,n){e.exports=n(4)},function(e,t){"use strict";t.__esModule=!0;t["default"]=function(e){return e&&e.__esModule?e:{"default":e}}},function(e,t,n){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}var r=n(6),s=i(r),o="firebase",a="7.24.0";/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
s["default"].registerVersion(o,a,"app");e.exports=s["default"]},function(e,t,n){"use strict";/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function i(e){function t(e){delete f[e]}function n(e){e=e||A;if(!u.contains(f,e))throw g.create("no-app",{appName:e});return f[e]}function i(t,n){void 0===n&&(n={});if("object"!=typeof n||null===n){var i=n;n={name:i}}var r=n;void 0===r.name&&(r.name=A);var s=r.name;if("string"!=typeof s||!s)throw g.create("bad-app-name",{appName:String(s)});if(u.contains(f,s))throw g.create("duplicate-app",{appName:s});var o=new e(t,r,m);f[s]=o;return o}function r(){return Object.keys(f).map(function(e){return f[e]})}function s(t){var i,r,s=t.name;if(p.has(s)){O.debug("There were multiple attempts to register component "+s+".");return"PUBLIC"===t.type?m[s]:null}p.set(s,t);if("PUBLIC"===t.type){var o=function(e){void 0===e&&(e=n());if("function"!=typeof e[s])throw g.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==t.serviceProps&&u.deepExtend(o,t.serviceProps);m[s]=o;e.prototype[s]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this._getService.bind(this,s);return i.apply(this,t.multipleInstances?e:[])}}try{for(var a=l.__values(Object.keys(f)),c=a.next();!c.done;c=a.next()){var d=c.value;f[d]._addComponent(t)}}catch(h){i={error:h}}finally{try{c&&!c.done&&(r=a["return"])&&r.call(a)}finally{if(i)throw i.error}}return"PUBLIC"===t.type?m[s]:null}function o(e,t,n){var i,r=null!==(i=x[e])&&void 0!==i?i:e;n&&(r+="-"+n);var o=r.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+r+'" with version "'+t+'":'];o&&c.push('library name "'+r+'" contains illegal characters (whitespace or "/")');o&&a&&c.push("and");a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")');O.warn(c.join(" "))}else s(new d.Component(r+"-version",function(){return{library:r,version:t}},"VERSION"))}function a(e,t){if(null!==e&&"function"!=typeof e)throw g.create("invalid-log-argument",{appName:name});h.setUserLogHandler(e,t)}function c(e,t){if("serverAuth"===t)return null;var n=t;return n}var f={},p=new Map,m={__esModule:!0,initializeApp:i,app:n,registerVersion:o,setLogLevel:h.setLogLevel,onLog:a,apps:null,SDK_VERSION:R,INTERNAL:{registerComponent:s,removeApp:t,components:p,useAsService:c}};m["default"]=m;Object.defineProperty(m,"apps",{get:r});n.App=e;return m}/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function r(){function e(e){u.deepExtend(t,e)}var t=i(P);t.INTERNAL=l.__assign(l.__assign({},t.INTERNAL),{createFirebaseNamespace:r,extendNamespace:e,createSubscribe:u.createSubscribe,ErrorFactory:u.ErrorFactory,deepExtend:u.deepExtend});return t}function s(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function o(e,t){e.INTERNAL.registerComponent(new d.Component("platform-logger",function(e){return new M(e)},"PRIVATE"));e.registerVersion(p,m,t);e.registerVersion("fire-js","")}Object.defineProperty(t,"__esModule",{value:!0});var a,c,l=n(7),u=n(8),d=n(9),h=n(10),f=(a={},a["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",a["bad-app-name"]="Illegal App name: '{$appName}",a["duplicate-app"]="Firebase App named '{$appName}' already exists",a["app-deleted"]="Firebase App named '{$appName}' already deleted",a["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",a["invalid-log-argument"]="First argument to `onLog` must be null or a function.",a),g=new u.ErrorFactory("app","Firebase",f),p="@firebase/app",m="0.6.11",v="@firebase/analytics",_="@firebase/auth",y="@firebase/database",k="@firebase/functions",b="@firebase/installations",S="@firebase/messaging",w="@firebase/performance",C="@firebase/remote-config",E="@firebase/storage",T="@firebase/firestore",I="firebase-wrapper",A="[DEFAULT]",x=(c={},c[p]="fire-core",c[v]="fire-analytics",c[_]="fire-auth",c[y]="fire-rtdb",c[k]="fire-fn",c[b]="fire-iid",c[S]="fire-fcm",c[w]="fire-perf",c[C]="fire-rc",c[E]="fire-gcs",c[T]="fire-fst",c["fire-js"]="fire-js",c[I]="fire-js-all",c),O=new h.Logger("@firebase/app"),P=function(){function e(e,t,n){var i,r,s=this;this.firebase_=n;this.isDeleted_=!1;this.name_=t.name;this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1;this.options_=u.deepCopy(e);this.container=new d.ComponentContainer(t.name);this._addComponent(new d.Component("app",function(){return s},"PUBLIC"));try{for(var o=l.__values(this.firebase_.INTERNAL.components.values()),a=o.next();!a.done;a=o.next()){var c=a.value;this._addComponent(c)}}catch(h){i={error:h}}finally{try{a&&!a.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}}Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){this.checkDestroyed_();return this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_();this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"name",{get:function(){this.checkDestroyed_();return this.name_},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"options",{get:function(){this.checkDestroyed_();return this.options_},enumerable:!1,configurable:!0});e.prototype["delete"]=function(){var e=this;return new Promise(function(t){e.checkDestroyed_();t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);return Promise.all(e.container.getProviders().map(function(e){return e["delete"]()}))}).then(function(){e.isDeleted_=!0})};e.prototype._getService=function(e,t){void 0===t&&(t=A);this.checkDestroyed_();return this.container.getProvider(e).getImmediate({identifier:t})};e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=A);this.container.getProvider(e).clearInstance(t)};e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){O.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}};e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)};e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw g.create("app-deleted",{appName:this.name_})};return e}();P.prototype.name&&P.prototype.options||P.prototype["delete"]||console.log("dc");var R="7.20.0",D=r(),M=function(){function e(e){this.container=e}e.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(e){if(s(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null}).filter(function(e){return e}).join(" ")};return e}();/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
if(u.isBrowser()&&void 0!==self.firebase){O.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var N=self.firebase.SDK_VERSION;N&&N.indexOf("LITE")>=0&&O.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var L=D.initializeApp;D.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.isNode()&&O.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      ');return L.apply(void 0,e)};var F=D;o(F);t["default"]=F;t.firebase=F},function(e,t,n){var i,r;(function(n){/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
var s,o,a,c,l,u,d,h,f,g,p,m,v,_,y,k,b,S,w,C,E,T,I;!function(s){function o(e,t){e!==a&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0);return function(n,i){return e[n]=t?t(n,i):i}}var a="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:{};!(i=[t],r=function(e){s(o(a,o(e)))}.apply(t,i),void 0!==r&&(e.exports=r))}(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};s=function(e,n){function i(){this.constructor=e}t(e,n);e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)};o=Object.assign||function(e){for(var t,n=1,i=arguments.length;i>n;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};c=function(e,t,n,i){var r,s=arguments.length,o=3>s?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(3>s?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};l=function(e,t){return function(n,i){t(n,i,e)}};u=function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0};d=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):r(e.value).then(o,a)}c((i=i.apply(e,t||[])).next())})};h=function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,s&&(o=2&n[0]?s["return"]:n[0]?s["throw"]||((o=s["return"])&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;(s=0,o)&&(n=[2&n[0],o.value]);switch(n[0]){case 0:case 1:o=n;break;case 4:c.label++;return{value:n[1],done:!1};case 5:c.label++;s=n[1];n=[0];continue;case 7:n=c.ops.pop();c.trys.pop();continue;default:if(!(o=c.trys,o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){c.label=n[1];break}if(6===n[0]&&c.label<o[1]){c.label=o[1];o=n;break}if(o&&c.label<o[2]){c.label=o[2];c.ops.push(n);break}o[2]&&c.ops.pop();c.trys.pop();continue}n=t.call(e,c)}catch(i){n=[6,i];s=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,s,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};I=function(e,t,n,i){void 0===i&&(i=n);e[i]=t[n]};f=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])};g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){e&&i>=e.length&&(e=void 0);return{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-->0)&&!(i=s.next()).done;)o.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s["return"])&&n.call(s)}finally{if(r)throw r.error}}return o};m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e};v=function(){for(var e=0,t=0,n=arguments.length;n>t;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;n>t;t++)for(var s=arguments[t],o=0,a=s.length;a>o;o++,r++)i[r]=s[o];return i};_=function(e){return this instanceof _?(this.v=e,this):new _(e)};y=function(e,t,n){function i(e){u[e]&&(l[e]=function(t){return new Promise(function(n,i){d.push([e,t,n,i])>1||r(e,t)})})}function r(e,t){try{s(u[e](t))}catch(n){c(d[0][3],n)}}function s(e){e.value instanceof _?Promise.resolve(e.value.v).then(o,a):c(d[0][2],e)}function o(e){r("next",e)}function a(e){r("throw",e)}function c(e,t){(e(t),d.shift(),d.length)&&r(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=n.apply(e,t||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l};k=function(e){function t(t,r){n[t]=e[t]?function(n){return(i=!i)?{value:_(e[t](n)),done:"return"===t}:r?r(n):n}:r}var n,i;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n};b=function(e){function t(t){i[t]=e[t]&&function(i){return new Promise(function(r,s){i=e[t](i),n(r,s,i.done,i.value)})}}function n(e,t,n,i){Promise.resolve(i).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof g?g(e):e[Symbol.iterator](),i={},t("next"),t("throw"),t("return"),i[Symbol.asyncIterator]=function(){return this},i)};S=function(e,t){Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t;return e};w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t["default"]=e;return t};C=function(e){return e&&e.__esModule?e:{"default":e}};E=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};T=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");t.set(e,n);return n};e("__extends",s);e("__assign",o);e("__rest",a);e("__decorate",c);e("__param",l);e("__metadata",u);e("__awaiter",d);e("__generator",h);e("__exportStar",f);e("__createBinding",I);e("__values",g);e("__read",p);e("__spread",m);e("__spreadArrays",v);e("__await",_);e("__asyncGenerator",y);e("__asyncDelegator",k);e("__asyncValues",b);e("__makeTemplateObject",S);e("__importStar",w);e("__importDefault",C);e("__classPrivateFieldGet",E);e("__classPrivateFieldSet",T)})}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function i(e){return r(void 0,e)}function r(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var i in t)t.hasOwnProperty(i)&&(e[i]=r(e[i],t[i]));return e}/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function s(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function o(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(s())}function a(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function c(){return"object"==typeof self&&self.self===self}function l(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function u(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return s().indexOf("Electron/")>=0}function h(){var e=s();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function f(){return s().indexOf("MSAppHost/")>=0}function g(){return U.NODE_CLIENT===!0||U.NODE_ADMIN===!0}function p(){return!a()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m(){return"indexedDB"in self&&null!=indexedDB}function v(){return new Promise(function(e,t){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=window.indexedDB.open(i);r.onsuccess=function(){r.result.close();n||window.indexedDB.deleteDatabase(i);e(!0)};r.onupgradeneeded=function(){n=!1};r.onerror=function(){var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(s){t(s)}})}function _(){return navigator&&navigator.cookieEnabled?!0:!1}function y(e,t){return e.replace(Y,function(e,n){var i=t[n];return null!=i?String(i):"<"+n+"?>"})}/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function k(e){return JSON.parse(e)}function b(e){return JSON.stringify(e)}/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function C(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function E(e,t,n){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function T(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},i=0,r=Object.entries(e);i<r.length;i++){var s=r[i],o=s[0],a=s[1];n(o,a)}return t.length?"&"+t.join("&"):""}function I(e){var t={},n=e.replace(/^\?/,"").split("&");n.forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}});return t}function A(e,t){var n=new ie(e,t);return n.subscribe.bind(n)}function x(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then(function(){e.apply(void 0,n)})["catch"](function(e){t&&t(e)})}}function O(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,i=t;n<i.length;n++){var r=i[n];if(r in e&&"function"==typeof e[r])return!0}return!1}function P(){}function R(e,t,n){var i="";switch(t){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var r=e+" failed: ";r+=i+" argument ";return r}function D(e,t,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(R(e,t,i)+"must be a valid firebase namespace.")}function M(e,t,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(R(e,t,i)+"must be a valid function.")}function N(e,t,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(R(e,t,i)+"must be a valid context object.")}function L(e,t,n){void 0===t&&(t=ae);void 0===n&&(n=ce);var i=t*Math.pow(n,e),r=Math.round(ue*i*(Math.random()-.5)*2);return Math.min(le,i+r)}Object.defineProperty(t,"__esModule",{value:!0});var F=n(7),U={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$=function(e,t){if(!e)throw q(t)},q=function(e){return new Error("Firebase Database ("+U.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},H=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(128>r)t[n++]=r;else if(2048>r){t[n++]=r>>6|192;t[n++]=63&r|128}else if(55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))){r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i));t[n++]=r>>18|240;t[n++]=r>>12&63|128;t[n++]=r>>6&63|128;t[n++]=63&r|128}else{t[n++]=r>>12|224;t[n++]=r>>6&63|128;t[n++]=63&r|128}}return t},j=function(e){for(var t=[],n=0,i=0;n<e.length;){var r=e[n++];if(128>r)t[i++]=String.fromCharCode(r);else if(r>191&&224>r){var s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&365>r){var s=e[n++],o=e[n++],a=e[n++],c=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;t[i++]=String.fromCharCode(55296+(c>>10));t[i++]=String.fromCharCode(56320+(1023&c))}else{var s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")},B={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<e.length;r+=3){var s=e[r],o=r+1<e.length,a=o?e[r+1]:0,c=r+2<e.length,l=c?e[r+2]:0,u=s>>2,d=(3&s)<<4|a>>4,h=(15&a)<<2|l>>6,f=63&l;if(!c){f=64;o||(h=64)}i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(H(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):j(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<e.length;){var s=n[e.charAt(r++)],o=r<e.length,a=o?n[e.charAt(r)]:0;++r;var c=r<e.length,l=c?n[e.charAt(r)]:64;++r;var u=r<e.length,d=u?n[e.charAt(r)]:64;++r;if(null==s||null==a||null==l||null==d)throw Error();var h=s<<2|a>>4;i.push(h);if(64!==l){var f=a<<4&240|l>>2;i.push(f);if(64!==d){var g=l<<6&192|d;i.push(g)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={};this.charToByteMap_={};this.byteToCharMapWebSafe_={};this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++){this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e);this.charToByteMap_[this.byteToCharMap_[e]]=e;this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e);this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e;if(e>=this.ENCODED_VALS_BASE.length){this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e;this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e}}}}},W=function(e){var t=H(e);return B.encodeByteArray(t,!0)},V=function(e){try{return B.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},z=function(){function e(){var e=this;this.reject=function(){};this.resolve=function(){};this.promise=new Promise(function(t,n){e.resolve=t;e.reject=n})}e.prototype.wrapCallback=function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i);if("function"==typeof e){t.promise["catch"](function(){});1===e.length?e(n):e(n,i)}}};return e}(),G="FirebaseError",Q=function(e){function t(n,i){var r=e.call(this,i)||this;r.code=n;r.name=G;Object.setPrototypeOf(r,t.prototype);Error.captureStackTrace&&Error.captureStackTrace(r,K.prototype.create);return r}F.__extends(t,e);return t}(Error),K=function(){function e(e,t,n){this.service=e;this.serviceName=t;this.errors=n}e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=t[0]||{},r=this.service+"/"+e,s=this.errors[e],o=s?y(s,i):"Error",a=this.serviceName+": "+o+" ("+r+").",c=new Q(r,a),l=0,u=Object.keys(i);l<u.length;l++){var d=u[l];if("_"!==d.slice(-1)){d in c&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.');c[d]=i[d]}}return c};return e}(),Y=/\{\$([^}]+)}/g,X=function(e){var t={},n={},i={},r="";try{var s=e.split(".");t=k(V(s[0])||"");n=k(V(s[1])||"");r=s[2];i=n.d||{};delete n.d}catch(o){}return{header:t,claims:n,data:i,signature:r}},J=function(e){var t=X(e).claims,n=Math.floor((new Date).getTime()/1e3),i=0,r=0;if("object"==typeof t){t.hasOwnProperty("nbf")?i=t.nbf:t.hasOwnProperty("iat")&&(i=t.iat);r=t.hasOwnProperty("exp")?t.exp:i+86400}return!!n&&!!i&&!!r&&n>=i&&r>=n},Z=function(e){var t=X(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},ee=function(e){var t=X(e),n=t.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},te=function(e){var t=X(e).claims;return"object"==typeof t&&t.admin===!0},ne=function(){function e(){this.chain_=[];this.buf_=[];this.W_=[];this.pad_=[];this.inbuf_=0;this.total_=0;this.blockSize=64;this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.chain_[4]=3285377520;this.inbuf_=0;this.total_=0};e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var i=0;16>i;i++){n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3);t+=4}else for(var i=0;16>i;i++){n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];t+=4}for(var i=16;80>i;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}for(var s,o,a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4],i=0;80>i;i++){if(40>i)if(20>i){s=u^c&(l^u);o=1518500249}else{s=c^l^u;o=1859775393}else if(60>i){s=c&l|u&(c|l);o=2400959708}else{s=c^l^u;o=3395469782}var r=(a<<5|a>>>27)+s+d+o+n[i]&4294967295;d=u;u=l;l=4294967295&(c<<30|c>>>2);c=a;a=r}this.chain_[0]=this.chain_[0]+a&4294967295;this.chain_[1]=this.chain_[1]+c&4294967295;this.chain_[2]=this.chain_[2]+l&4294967295;this.chain_[3]=this.chain_[3]+u&4294967295;this.chain_[4]=this.chain_[4]+d&4294967295};e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=0,r=this.buf_,s=this.inbuf_;t>i;){if(0===s)for(;n>=i;){this.compress_(e,i);i+=this.blockSize}if("string"==typeof e)for(;t>i;){r[s]=e.charCodeAt(i);++s;++i;if(s===this.blockSize){this.compress_(r);s=0;break}}else for(;t>i;){r[s]=e[i];++s;++i;if(s===this.blockSize){this.compress_(r);s=0;break}}}this.inbuf_=s;this.total_+=t}};e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--){this.buf_[n]=255&t;t/=256}this.compress_(this.buf_);for(var i=0,n=0;5>n;n++)for(var r=24;r>=0;r-=8){e[i]=this.chain_[n]>>r&255;++i}return e};return e}(),ie=function(){function e(e,t){var n=this;this.observers=[];this.unsubscribes=[];this.observerCount=0;this.task=Promise.resolve();this.finalized=!1;this.onNoObservers=t;this.task.then(function(){e(n)})["catch"](function(e){n.error(e)})}e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})};e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)});this.close(e)};e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()});this.close()};e.prototype.subscribe=function(e,t,n){var i,r=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=O(e,["next","error","complete"])?e:{next:e,error:t,complete:n};void 0===i.next&&(i.next=P);void 0===i.error&&(i.error=P);void 0===i.complete&&(i.complete=P);var s=this.unsubscribeOne.bind(this,this.observers.length);this.finalized&&this.task.then(function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(e){}});this.observers.push(i);return s};e.prototype.unsubscribeOne=function(e){if(void 0!==this.observers&&void 0!==this.observers[e]){delete this.observers[e];this.observerCount-=1;0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this)}};e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)};e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})};e.prototype.close=function(e){var t=this;if(!this.finalized){this.finalized=!0;void 0!==e&&(this.finalError=e);this.task.then(function(){t.observers=void 0;t.onNoObservers=void 0})}};return e}(),re=function(e,t,n,i){var r;t>i?r="at least "+t:i>n&&(r=0===n?"none":"no more than "+n);if(r){var s=e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".";throw new Error(s)}},se=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(r>=55296&&56319>=r){var s=r-55296;i++;$(i<e.length,"Surrogate pair missing trail surrogate.");var o=e.charCodeAt(i)-56320;r=65536+(s<<10)+o}if(128>r)t[n++]=r;else if(2048>r){t[n++]=r>>6|192;t[n++]=63&r|128}else if(65536>r){t[n++]=r>>12|224;t[n++]=r>>6&63|128;t[n++]=63&r|128}else{t[n++]=r>>18|240;t[n++]=r>>12&63|128;t[n++]=r>>6&63|128;t[n++]=63&r|128}}return t},oe=function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(128>i)t++;else if(2048>i)t+=2;else if(i>=55296&&56319>=i){t+=4;n++}else t+=3}return t},ae=1e3,ce=2,le=144e5,ue=.5;t.CONSTANTS=U;t.Deferred=z;t.ErrorFactory=K;t.FirebaseError=Q;t.MAX_VALUE_MILLIS=le;t.RANDOM_FACTOR=ue;t.Sha1=ne;t.areCookiesEnabled=_;t.assert=$;t.assertionError=q;t.async=x;t.base64=B;t.base64Decode=V;t.base64Encode=W;t.calculateBackoffMillis=L;t.contains=S;t.createSubscribe=A;t.decode=X;t.deepCopy=i;t.deepExtend=r;t.errorPrefix=R;t.getUA=s;t.isAdmin=te;t.isBrowser=c;t.isBrowserExtension=l;t.isElectron=d;t.isEmpty=C;t.isIE=h;t.isIndexedDBAvailable=m;t.isMobileCordova=o;t.isNode=a;t.isNodeSdk=g;t.isReactNative=u;t.isSafari=p;t.isUWP=f;t.isValidFormat=ee;t.isValidTimestamp=J;t.issuedAtTime=Z;t.jsonEval=k;t.map=E;t.querystring=T;t.querystringDecode=I;t.safeGet=w;t.stringLength=oe;t.stringToByteArray=se;t.stringify=b;t.validateArgCount=re;t.validateCallback=M;t.validateContextObject=N;t.validateIndexedDBOpenable=v;t.validateNamespace=D}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e){return e===c?void 0:e}function r(e){return"EAGER"===e.instantiationMode}Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),o=n(8),a=function(){function e(e,t,n){this.name=e;this.instanceFactory=t;this.type=n;this.multipleInstances=!1;this.serviceProps={};this.instantiationMode="LAZY"}e.prototype.setInstantiationMode=function(e){this.instantiationMode=e;return this};e.prototype.setMultipleInstances=function(e){this.multipleInstances=e;return this};e.prototype.setServiceProps=function(e){this.serviceProps=e;return this};return e}(),c="[DEFAULT]",l=function(){function e(e,t){this.name=e;this.container=t;this.component=null;this.instances=new Map;this.instancesDeferred=new Map}e.prototype.get=function(e){void 0===e&&(e=c);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new o.Deferred;this.instancesDeferred.set(t,n);try{var i=this.getOrInitializeService(t);i&&n.resolve(i)}catch(r){}}return this.instancesDeferred.get(t).promise};e.prototype.getImmediate=function(e){var t=s.__assign({identifier:c,optional:!1},e),n=t.identifier,i=t.optional,r=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(r);if(!o){if(i)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(i)return null;throw a}};e.prototype.getComponent=function(){return this.component};e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");this.component=e;if(r(e))try{this.getOrInitializeService(c)}catch(i){}try{for(var o=s.__values(this.instancesDeferred.entries()),a=o.next();!a.done;a=o.next()){var l=s.__read(a.value,2),u=l[0],d=l[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(h);d.resolve(f)}catch(i){}}}catch(g){t={error:g}}finally{try{a&&!a.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}};e.prototype.clearInstance=function(e){void 0===e&&(e=c);this.instancesDeferred["delete"](e);this.instances["delete"](e)};e.prototype["delete"]=function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:e=Array.from(this.instances.values());return[4,Promise.all(s.__spread(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL["delete"]()}),e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()})))];case 1:t.sent();return[2]}})})};e.prototype.isComponentSet=function(){return null!=this.component};e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);if(!t&&this.component){t=this.component.instanceFactory(this.container,i(e));this.instances.set(e,t)}return t||null};e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:c:e};return e}(),u=function(){function e(e){this.name=e;this.providers=new Map}e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)};e.prototype.addOrOverwriteComponent=function(e){var t=this.getProvider(e.name);t.isComponentSet()&&this.providers["delete"](e.name);this.addComponent(e)};e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new l(e,this);this.providers.set(e,t);return t};e.prototype.getProviders=function(){return Array.from(this.providers.values())};return e}();t.Component=a;t.ComponentContainer=u;t.Provider=l},function(e,t){"use strict";/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
function n(){for(var e=0,t=0,n=arguments.length;n>t;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;n>t;t++)for(var s=arguments[t],o=0,a=s.length;a>o;o++,r++)i[r]=s[o];return i}function i(e){o.forEach(function(t){t.setLogLevel(e)})}function r(e,n){for(var i=function(i){var r=null;n&&n.level&&(r=a[n.level]);null===e?i.userLogHandler=null:i.userLogHandler=function(n,i){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a=s.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");i>=(null!==r&&void 0!==r?r:n.logLevel)&&e({level:t.LogLevel[i].toLowerCase(),message:a,args:s,type:n.name})}},r=0,s=o;r<s.length;r++){var c=s[r];i(c)}}Object.defineProperty(t,"__esModule",{value:!0});/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var s,o=[];!function(e){e[e.DEBUG=0]="DEBUG";e[e.VERBOSE=1]="VERBOSE";e[e.INFO=2]="INFO";e[e.WARN=3]="WARN";e[e.ERROR=4]="ERROR";e[e.SILENT=5]="SILENT"}(t.LogLevel||(t.LogLevel={}));var a={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},c=t.LogLevel.INFO,l=(s={},s[t.LogLevel.DEBUG]="log",s[t.LogLevel.VERBOSE]="log",s[t.LogLevel.INFO]="info",s[t.LogLevel.WARN]="warn",s[t.LogLevel.ERROR]="error",s),u=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(!(t<e.logLevel)){var s=(new Date).toISOString(),o=l[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,n(["["+s+"]  "+e.name+":"],i))}},d=function(){function e(e){this.name=e;this._logLevel=c;this._logHandler=u;this._userLogHandler=null;o.push(this)}Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in t.LogLevel))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0});e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e};Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0});e.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,n([this,t.LogLevel.DEBUG],e));this._logHandler.apply(this,n([this,t.LogLevel.DEBUG],e))};e.prototype.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,n([this,t.LogLevel.VERBOSE],e));this._logHandler.apply(this,n([this,t.LogLevel.VERBOSE],e))};e.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,n([this,t.LogLevel.INFO],e));this._logHandler.apply(this,n([this,t.LogLevel.INFO],e))};e.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,n([this,t.LogLevel.WARN],e));this._logHandler.apply(this,n([this,t.LogLevel.WARN],e))};e.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,n([this,t.LogLevel.ERROR],e));this._logHandler.apply(this,n([this,t.LogLevel.ERROR],e))};return e}();t.Logger=d;t.setLogLevel=i;t.setUserLogHandler=r},function(e,t,n){"use strict";n(12)},function(e,t,n){(function(e){(function(){function t(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var i=t[n];if(i&&i.Math==Math)return i}return globalThis}function i(e,t){if(t){var n=Dl;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];r in n||(n[r]={});n=n[r]}e=e[e.length-1];i=n[e];t=t(i);t!=i&&null!=t&&Rl(n,e,{configurable:!0,writable:!0,value:t})}}function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function s(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function o(){}function a(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function c(e){var t=a(e);return"array"==t||"object"==t&&"number"==typeof e.length}function l(e){return"function"==a(e)}function u(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function d(e){return Object.prototype.hasOwnProperty.call(e,Ul)&&e[Ul]||(e[Ul]=++$l)}function h(e,t,n){return e.call.apply(e.bind,arguments)}function f(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(n,i);return e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function g(e,t,n){g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:f;return g.apply(null,arguments)}function p(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();t.push.apply(t,arguments);return e.apply(this,t)}}function m(e,t){function n(){}n.prototype=t.prototype;e.$a=t.prototype;e.prototype=new n;e.prototype.constructor=e}/*

	 Copyright 2017 Google Inc.

	 Licensed under the Apache License, Version 2.0 (the "License");
	 you may not use this file except in compliance with the License.
	 You may obtain a copy of the License at

	   http://www.apache.org/licenses/LICENSE-2.0

	 Unless required by applicable law or agreed to in writing, software
	 distributed under the License is distributed on an "AS IS" BASIS,
	 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 See the License for the specific language governing permissions and
	 limitations under the License.
	*/
function v(e,t,n){this.code=jl+e;this.message=t||Bl[e]||"";this.a=n||null}function _(e){var t=e&&e.code;return t?new v(t.substring(jl.length),e.message,e.serverResponse):null}function y(e){for(var t in Wl)if(Wl[t].id===e)return e=Wl[t],{firebaseEndpoint:e.Sa,secureTokenEndpoint:e.Ya,identityPlatformEndpoint:e.Va};return null}function k(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function b(e){if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function S(e,t){e=e.split("%s");for(var n="",i=e.length-1,r=0;i>r;r++)n+=e[r]+(r<t.length?t[r]:"%s");b.call(this,n+e[i])}function w(e,t){throw new S("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function C(e,t){this.c=e;this.f=t;this.b=0;this.a=null}function E(e,t){e.f(t);100>e.b&&(e.b++,t.next=e.a,e.a=t)}function T(){this.b=this.a=null}function I(){var e=$u,t=null;e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null);return t}function A(){this.next=this.b=this.a=null}function x(e,t){for(var n="string"==typeof e?e.split(""):e,i=e.length-1;i>=0;--i)i in n&&t.call(void 0,n[i],i,e)}function O(e){e:{for(var t=gr,n=e.length,i="string"==typeof e?e.split(""):e,r=0;n>r;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}function P(e,t){return 0<=Gl(e,t)}function R(e,t){t=Gl(e,t);var n;(n=t>=0)&&Array.prototype.splice.call(e,t,1);return n}function D(e,t){var n=0;x(e,function(i,r){t.call(void 0,i,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&n++})}function M(e){return Array.prototype.concat.apply([],arguments)}function N(e){var t=e.length;if(t>0){for(var n=Array(t),i=0;t>i;i++)n[i]=e[i];return n}return[]}function L(e,t){return-1!=e.indexOf(t)}function F(e,t){return t>e?-1:e>t?1:0}function U(e){return L(zl,e)}function $(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function q(e){for(var t in e)return!1;return!0}function H(e){var t,n={};for(t in e)n[t]=e[t];return n}function j(e,t){for(var n,i,r=1;r<arguments.length;r++){i=arguments[r];for(n in i)e[n]=i[n];for(var s=0;s<cu.length;s++)n=cu[s],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function B(e,t){e:{try{var n=e&&e.ownerDocument,i=n&&(n.defaultView||n.parentWindow);i=i||Nl;if(i.Element&&i.Location){var r=i;break e}}catch(s){}r=null}if(r&&"undefined"!=typeof r[t]&&(!e||!(e instanceof r[t])&&(e instanceof r.Location||e instanceof r.Element))){if(u(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(s){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;w("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function W(e,t){this.a=e===uu&&t||"";this.b=lu}function V(e){if(e instanceof W&&e.constructor===W&&e.b===lu)return e.a;w("expected object of type Const, got '"+e+"'");return"type_error:Const"}function z(e,t){this.a=e===pu&&t||"";this.b=gu}function G(e){if(e instanceof z&&e.constructor===z&&e.b===gu)return e.a;w("expected object of type TrustedResourceUrl, got '"+e+"' of type "+a(e));return"type_error:TrustedResourceUrl"}function Q(e,t){var n=V(e);if(!fu.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);e=n.replace(hu,function(e,i){if(!Object.prototype.hasOwnProperty.call(t,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));e=t[i];return e instanceof W?V(e):encodeURIComponent(String(e))});return new z(pu,e)}function K(e,t){this.a=e===_u&&t||"";this.b=vu}function Y(e){if(e instanceof K&&e.constructor===K&&e.b===vu)return e.a;w("expected object of type SafeUrl, got '"+e+"' of type "+a(e));return"type_error:SafeUrl"}function X(e){if(e instanceof K)return e;e="object"==typeof e&&e.sa?e.ra():String(e);mu.test(e)||(e="about:invalid#zClosurez");return new K(_u,e)}function J(){this.a="";this.b=yu}function Z(e){if(e instanceof J&&e.constructor===J&&e.b===yu)return e.a;w("expected object of type SafeHtml, got '"+e+"' of type "+a(e));return"type_error:SafeHtml"}function ee(e){var t=new J;t.a=e;return t}function te(e){var t=new z(pu,V(du));B(e,"HTMLIFrameElement");e.src=G(t).toString()}function ne(e,t){B(e,"HTMLScriptElement");e.src=G(t);if(null===Fl){t=Nl.document;Fl=(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&Ll.test(t)?t:""}t=Fl;t&&e.setAttribute("nonce",t)}function ie(e,t){for(var n=e.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function re(e){su.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(Zl,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(eu,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(tu,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(nu,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(iu,"&#39;")),-1!=e.indexOf("\x00")&&(e=e.replace(ru,"&#0;")));return e}function se(e){se[" "](e);return e}function oe(e,t){var n=Ru;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function ae(){var e=Nl.document;return e?e.documentMode:void 0}function ce(e){return oe(e,function(){for(var t=0,n=Jl(String(bu)).split("."),i=Jl(String(e)).split("."),r=Math.max(n.length,i.length),s=0;0==t&&r>s;s++){var o=n[s]||"",a=i[s]||"";do{o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""];a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""];if(0==o[0].length&&0==a[0].length)break;t=F(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||F(0==o[2].length,0==a[2].length)||F(o[2],a[2]);o=o[3];a=a[3]}while(0==t)}return t>=0})}function le(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function ue(e,t){$(t,function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra());"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Fu.hasOwnProperty(n)?e.setAttribute(Fu[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}function de(e,t,n){var i=arguments,r=document,s=String(i[0]),o=i[1];if(!Lu&&o&&(o.name||o.type)){s=["<",s];o.name&&s.push(' name="',re(o.name),'"');if(o.type){s.push(' type="',re(o.type),'"');var a={};j(a,o);delete a.type;o=a}s.push(">");s=s.join("")}s=fe(r,s);o&&("string"==typeof o?s.className=o:Array.isArray(o)?s.className=o.join(" "):ue(s,o));2<i.length&&he(r,s,i);return s}function he(e,t,n){function i(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var r=2;r<n.length;r++){var s=n[r];!c(s)||u(s)&&0<s.nodeType?i(s):Ql(ge(s)?N(s):s,i)}}function fe(e,t){t=String(t);"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase());return e.createElement(t)}function ge(e){if(e&&"number"==typeof e.length){if(u(e))return"function"==typeof e.item||"string"==typeof e.item;if(l(e))return"function"==typeof e.item}return!1}function pe(e){Nl.setTimeout(function(){throw e},0)}function me(){var e=Nl.MessageChannel;"undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!U("Presto")&&(e=function(){var e=fe(document,"IFRAME");e.style.display="none";te(e);document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document;e.open();e.write(Z(ku));e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=g(function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()},this);t.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){t.postMessage(n,i)}}});if("undefined"!=typeof e&&!U("Trident")&&!U("MSIE")){var t=new e,n={},i=n;t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.Fb;n.Fb=null;e()}};return function(e){i.next={Fb:e};i=i.next;t.port2.postMessage(0)}}return function(e){Nl.setTimeout(e,0)}}function ve(e,t){Nu||_e();Uu||(Nu(),Uu=!0);$u.add(e,t)}function _e(){if(Nl.Promise&&Nl.Promise.resolve){var e=Nl.Promise.resolve(void 0);Nu=function(){e.then(ye)}}else Nu=function(){var e=ye;!l(Nl.setImmediate)||Nl.Window&&Nl.Window.prototype&&!U("Edge")&&Nl.Window.prototype.setImmediate==Nl.setImmediate?(Mu||(Mu=me()),Mu(e)):Nl.setImmediate(e)}}function ye(){for(var e;e=I();){try{e.a.call(e.b)}catch(t){pe(t)}E(Vl,e)}Uu=!1}function ke(e,t){this.a=qu;this.i=void 0;this.f=this.b=this.c=null;this.g=this.h=!1;if(e!=o)try{var n=this;e.call(t,function(e){Pe(n,Hu,e)},function(e){if(!(e instanceof $e))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Pe(n,ju,e)})}catch(i){Pe(this,ju,i)}}function be(){this.next=this.f=this.b=this.g=this.a=null;this.c=!1}function Se(e,t,n){var i=Bu.get();i.g=e;i.b=t;i.f=n;return i}function we(e){if(e instanceof ke)return e;var t=new ke(o);Pe(t,Hu,e);return t}function Ce(e){return new ke(function(t,n){n(e)})}function Ee(e,t,n){Re(e,t,n,null)||ve(p(t,e))}function Te(e){return new ke(function(t,n){var i=e.length,r=[];if(i)for(var s,o=function(e,n){i--;r[e]=n;0==i&&t(r)},a=function(e){n(e)},c=0;c<e.length;c++)s=e[c],Ee(s,p(o,c),a);else t(r)})}function Ie(e){return new ke(function(t){var n=e.length,i=[];if(n)for(var r,s=function(e,r,s){n--;i[e]=r?{Ob:!0,value:s}:{Ob:!1,reason:s};0==n&&t(i)},o=0;o<e.length;o++)r=e[o],Ee(r,p(s,o,!0),p(s,o,!1));else t(i)})}function Ae(e,t){if(e.a==qu)if(e.c){var n=e.c;if(n.b){for(var i=0,r=null,s=null,o=n.b;o&&(o.c||(i++,o.a==e&&(r=o),!(r&&i>1)));o=o.next)r||(s=o);r&&(n.a==qu&&1==i?Ae(n,t):(s?(i=s,i.next==n.f&&(n.f=i),i.next=i.next.next):Ne(n),Le(n,r,ju,t)))}e.c=null}else Pe(e,ju,t)}function xe(e,t){e.b||e.a!=Hu&&e.a!=ju||Me(e);e.f?e.f.next=t:e.b=t;e.f=t}function Oe(e,t,n,i){var r=Se(null,null,null);r.a=new ke(function(e,s){r.g=t?function(n){try{var r=t.call(i,n);e(r)}catch(o){s(o)}}:e;r.b=n?function(t){try{var r=n.call(i,t);void 0===r&&t instanceof $e?s(t):e(r)}catch(o){s(o)}}:s});r.a.c=e;xe(e,r);return r.a}function Pe(e,t,n){e.a==qu&&(e===n&&(t=ju,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Re(n,e.Zc,e.$c,e)||(e.i=n,e.a=t,e.c=null,Me(e),t!=ju||n instanceof $e||Ue(e,n)))}function Re(e,t,n,i){if(e instanceof ke)return xe(e,Se(t||o,n||null,i)),!0;if(k(e))return e.then(t,n,i),!0;if(u(e))try{var r=e.then;if(l(r))return De(e,r,t,n,i),!0}catch(s){return n.call(i,s),!0}return!1}function De(e,t,n,i,r){function s(e){a||(a=!0,i.call(r,e))}function o(e){a||(a=!0,n.call(r,e))}var a=!1;try{t.call(e,o,s)}catch(c){s(c)}}function Me(e){e.h||(e.h=!0,ve(e.fc,e))}function Ne(e){var t=null;e.b&&(t=e.b,e.b=t.next,t.next=null);e.b||(e.f=null);return t}function Le(e,t,n,i){if(n==ju&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Fe(t,n,i);else try{t.c?t.g.call(t.f):Fe(t,n,i)}catch(r){Wu.call(null,r)}E(Bu,t)}function Fe(e,t,n){t==Hu?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function Ue(e,t){e.g=!0;ve(function(){e.g&&Wu.call(null,t)})}function $e(e){b.call(this,e)}function qe(){0!=Vu&&(zu[d(this)]=this);this.xa=this.xa;this.oa=this.oa}function He(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=Vu)){var t=d(e);if(0!=Vu&&e.oa&&0<e.oa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete zu[t]}}function je(e,t){this.type=e;this.b=this.target=t;this.defaultPrevented=!1}function Be(e,t){je.call(this,e?e.type:"");this.relatedTarget=this.b=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.a=null;if(e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement;this.b=t;if(t=e.relatedTarget){if(Tu){e:{try{se(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t;i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=e.button;this.key=e.key||"";this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;this.shiftKey=e.shiftKey;this.metaKey=e.metaKey;this.pointerId=e.pointerId||0;this.pointerType="string"==typeof e.pointerType?e.pointerType:Xu[e.pointerType]||"";this.a=e;e.defaultPrevented&&this.preventDefault()}}function We(e,t,n,i,r){this.listener=e;this.proxy=null;this.src=t;this.type=n;this.capture=!!i;this.Ua=r;this.key=++Zu;this.va=this.Oa=!1}function Ve(e){e.va=!0;e.listener=null;e.proxy=null;e.src=null;e.Ua=null}function ze(e){this.src=e;this.a={};this.b=0}function Ge(e,t){var n=t.type;n in e.a&&R(e.a[n],t)&&(Ve(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Qe(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.va&&s.listener==t&&s.capture==!!n&&s.Ua==i)return r}return-1}function Ke(e,t,n,i,r){if(i&&i.once)Je(e,t,n,i,r);else if(Array.isArray(t))for(var s=0;s<t.length;s++)Ke(e,t[s],n,i,r);else n=ot(n),e&&e[Ju]?ct(e,t,n,u(i)?!!i.capture:!!i,r):Ye(e,t,n,!1,i,r)}function Ye(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=u(r)?!!r.capture:!!r,a=st(e);a||(e[ed]=a=new ze(e));n=a.add(t,n,i,o,s);if(!n.proxy){i=Xe();n.proxy=i;i.src=e;i.listener=n;if(e.addEventListener)Yu||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(tt(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}nd++}}function Xe(){var e=rt,t=Qu?function(n){return e.call(t.src,t.listener,n)}:function(n){n=e.call(t.src,t.listener,n);return n?void 0:n};return t}function Je(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Je(e,t[s],n,i,r);else n=ot(n),e&&e[Ju]?lt(e,t,n,u(i)?!!i.capture:!!i,r):Ye(e,t,n,!0,i,r)}function Ze(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ze(e,t[s],n,i,r);else i=u(i)?!!i.capture:!!i,n=ot(n),e&&e[Ju]?(e=e.v,t=String(t).toString(),t in e.a&&(s=e.a[t],n=Qe(s,n,i,r),n>-1&&(Ve(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.a[t],e.b--)))):e&&(e=st(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Qe(t,n,i,r)),(n=e>-1?t[e]:null)&&et(n))}function et(e){if("number"!=typeof e&&e&&!e.va){var t=e.src;if(t&&t[Ju])Ge(t.v,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(tt(n),i):t.addListener&&t.removeListener&&t.removeListener(i);nd--;(n=st(t))?(Ge(n,e),0==n.b&&(n.src=null,t[ed]=null)):Ve(e)}}}function tt(e){return e in td?td[e]:td[e]="on"+e}function nt(e,t,n,i){var r=!0;if((e=st(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var s=t[e];s&&s.capture==n&&!s.va&&(s=it(s,i),r=r&&!1!==s)}return r}function it(e,t){var n=e.listener,i=e.Ua||e.src;e.Oa&&et(e);return n.call(i,t)}function rt(e,t){if(e.va)return!0;if(!Qu){if(!t)e:{t=["window","event"];for(var n=Nl,i=0;i<t.length;i++)if(n=n[t[i]],null==n){t=null;break e}t=n}i=t;t=new Be(i,this);n=!0;if(!(0>i.keyCode||void 0!=i.returnValue)){e:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(s){r=!0}(r||void 0==i.returnValue)&&(i.returnValue=!0)}i=[];for(r=t.b;r;r=r.parentNode)i.push(r);e=e.type;for(r=i.length-1;r>=0;r--){t.b=i[r];var o=nt(i[r],e,!0,t);n=n&&o}for(r=0;r<i.length;r++)t.b=i[r],o=nt(i[r],e,!1,t),n=n&&o}return n}return it(e,new Be(t,this))}function st(e){e=e[ed];return e instanceof ze?e:null}function ot(e){if(l(e))return e;e[id]||(e[id]=function(t){return e.handleEvent(t)});return e[id]}function at(){qe.call(this);this.v=new ze(this);this.$b=this;this.fb=null}function ct(e,t,n,i,r){e.v.add(String(t),n,!1,i,r)}function lt(e,t,n,i,r){e.v.add(String(t),n,!0,i,r)}function ut(e,t,n,i){t=e.v.a[String(t)];if(!t)return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.va&&o.capture==n){var a=o.listener,c=o.Ua||o.src;o.Oa&&Ge(e.v,o);r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}function dt(e,t,n){if(l(e))n&&(e=g(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=g(e.handleEvent,e)}return 2147483647<Number(t)?-1:Nl.setTimeout(e,t||0)}function ht(e){var t=null;return new ke(function(n,i){t=dt(function(){n(void 0)},e);-1==t&&i(Error("Failed to schedule timer."))}).s(function(e){Nl.clearTimeout(t);throw e})}function ft(e){if(e.V&&"function"==typeof e.V)return e.V();if("string"==typeof e)return e.split("");if(c(e)){for(var t=[],n=e.length,i=0;n>i;i++)t.push(e[i]);return t}t=[];n=0;for(i in e)t[n++]=e[i];return t}function gt(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.V||"function"!=typeof e.V){if(c(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;e>n;n++)t.push(n);return t}t=[];n=0;for(var i in e)t[n++]=i;return t}}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(c(e)||"string"==typeof e)Ql(e,t,void 0);else for(var n=gt(e),i=ft(e),r=i.length,s=0;r>s;s++)t.call(void 0,i[s],n&&n[s],e)}function mt(e,t){this.b={};this.a=[];this.c=0;var n=arguments.length;if(n>1){if(n%2)throw Error("Uneven number of arguments");for(var i=0;n>i;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof mt)for(n=e.Y(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function vt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var i=e.a[t];_t(e.b,i)&&(e.a[n++]=i);t++}e.a.length=n}if(e.c!=e.a.length){var r={};for(n=t=0;t<e.a.length;)i=e.a[t],_t(r,i)||(e.a[n++]=i,r[i]=1),t++;e.a.length=n}}function _t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(i>=0){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function kt(e,t){this.a=this.l=this.f="";this.g=null;this.h=this.c="";this.i=!1;var n;e instanceof kt?(this.i=void 0!==t?t:e.i,bt(this,e.f),this.l=e.l,this.a=e.a,St(this,e.g),this.c=e.c,wt(this,Ft(e.b)),this.h=e.h):e&&(n=String(e).match(rd))?(this.i=!!t,bt(this,n[1]||"",!0),this.l=At(n[2]||""),this.a=At(n[3]||"",!0),St(this,n[4]),this.c=At(n[5]||"",!0),wt(this,n[6]||"",!0),this.h=At(n[7]||"")):(this.i=!!t,this.b=new Pt(null,this.i))}function bt(e,t,n){e.f=n?At(t,!0):t;e.f&&(e.f=e.f.replace(/:$/,""))}function St(e,t){if(t){t=Number(t);if(isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function wt(e,t,n){t instanceof Pt?(e.b=t,$t(e.b,e.i)):(n||(t=xt(t,cd)),e.b=new Pt(t,e.i))}function Ct(e,t,n){e.b.set(t,n)}function Et(e,t){return e.b.get(t)}function Tt(e){return e instanceof kt?new kt(e):new kt(e,void 0)}function It(e,t,n,i){var r=new kt(null,void 0);e&&bt(r,e);t&&(r.a=t);n&&St(r,n);i&&(r.c=i);return r}function At(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ot),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ot(e){e=e.charCodeAt(0);return"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function Pt(e,t){this.b=this.a=null;this.c=e||null;this.f=!!t}function Rt(e){e.a||(e.a=new mt,e.b=0,e.c&&yt(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Dt(e){var t=gt(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Pt(null,void 0);e=ft(e);for(var i=0;i<t.length;i++){var r=t[i],s=e[i];Array.isArray(s)?Lt(n,r,s):n.add(r,s)}return n}function Mt(e,t){Rt(e);t=Ut(e,t);_t(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,_t(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&vt(e)))}function Nt(e,t){Rt(e);t=Ut(e,t);return _t(e.a.b,t)}function Lt(e,t,n){Mt(e,t);0<n.length&&(e.c=null,e.a.set(Ut(e,t),N(n)),e.b+=n.length)}function Ft(e){var t=new Pt;t.c=e.c;e.a&&(t.a=new mt(e.a),t.b=e.b);return t}function Ut(e,t){t=String(t);e.f&&(t=t.toLowerCase());return t}function $t(e,t){t&&!e.f&&(Rt(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Mt(this,t),Lt(this,n,e))},e));e.f=t}function qt(e){var t=[];jt(new Ht,e,t);return t.join("")}function Ht(){}function jt(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var i=t;t=i.length;n.push("[");for(var r="",s=0;t>s;s++)n.push(r),jt(e,i[s],n),r=",";n.push("]");return}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{");r="";for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s=t[i],"function"!=typeof s&&(n.push(r),Bt(i,n),n.push(":"),jt(e,s,n),r=","));n.push("}");return}t=t.valueOf()}switch(typeof t){case"string":Bt(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}function Bt(e,t){t.push('"',e.replace(dd,function(e){var t=ud[e];t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ud[e]=t);return t}),'"')}function Wt(){var e=un();return wu&&!!Pu&&11==Pu||/Edge\/\d+/.test(e)}function Vt(){return Nl.window&&Nl.window.location.href||self&&self.location&&self.location.href||""}function zt(e,t){t=t||Nl.window;var n="about:blank";e&&(n=Y(X(e)));t.location.href=n}function Gt(e,t){var n,i=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?i.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<Gt(e[n],t[n]).length&&i.push(n):e[n]!==t[n]&&i.push(n):i.push(n);for(n in t)n in e||i.push(n);return i}function Qt(){var e=un();e=cn(e)!=pd?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null;return e&&30>e?!1:!wu||!Pu||Pu>9}function Kt(e){e=(e||un()).toLowerCase();return e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/)?!0:!1}function Yt(e){e=e||Nl.window;try{e.close()}catch(t){}}function Xt(e,t,n){var i=Math.floor(1e9*Math.random()).toString();t=t||500;n=n||600;var r=(window.screen.availHeight-n)/2,s=(window.screen.availWidth-t)/2;t={width:t,height:n,top:r>0?r:0,left:s>0?s:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1};n=un().toLowerCase();i&&(t.target=i,L(n,"crios/")&&(t.target="_blank"));cn(un())==gd&&(e=e||"http://localhost",t.scrollbars=!0);n=e||"";(e=t)||(e={});i=window;t=n instanceof K?n:X("undefined"!=typeof n.href?n.href:String(n));n=e.target||n.target;r=[];for(o in e)switch(o){case"width":case"height":case"top":case"left":r.push(o+"="+e[o]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(o+"="+(e[o]?1:0))}var o=r.join(",");(U("iPhone")&&!U("iPod")&&!U("iPad")||U("iPad")||U("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(o=fe(document,"A"),B(o,"HTMLAnchorElement"),t instanceof K||t instanceof K||(t="object"==typeof t&&t.sa?t.ra():String(t),mu.test(t)||(t="about:invalid#zClosurez"),t=new K(_u,t)),o.href=Y(t),o.setAttribute("target",n),e.noreferrer&&o.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,i,1),o.dispatchEvent(e),o={}):e.noreferrer?(o=i.open("",n,o),e=Y(t),o&&(Eu&&L(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),o.opener=null,e=ee('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+re(e)+'">'),i=o.document))&&(i.write(Z(e)),i.close()):(o=i.open(Y(t),n,o))&&e.noopener&&(o.opener=null);if(o)try{o.focus()}catch(a){}return o}function Jt(e){return new ke(function(t){function n(){ht(2e3).then(function(){if(e&&!e.closed)return n();t();return void 0})}return n()})}function Zt(){var e=null;return new ke(function(t){"complete"==Nl.document.readyState?t():(e=function(){t()},Je(window,"load",e))}).s(function(t){Ze(window,"load",e);throw t})}function en(){return tn(void 0)?Zt().then(function(){return new ke(function(e,t){var n=Nl.document,i=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i);e()},!1)})}):Ce(Error("Cordova must run in an Android or iOS file scheme."))}function tn(e){e=e||un();return!("file:"!==pn()&&"ionic:"!==pn()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function nn(){var e=Nl.window;try{return!(!e||e==e.top)}catch(t){return!1}}function rn(){return"undefined"!=typeof Nl.WorkerGlobalScope&&"function"==typeof Nl.importScripts}function sn(){return Pl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Pl.INTERNAL.hasOwnProperty("node")?"Node":rn()?"Worker":"Browser"}function on(){var e=sn();return"ReactNative"===e||"Node"===e}function an(){for(var e=50,t=[];e>0;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function cn(e){var t=e.toLowerCase();return L(t,"opera/")||L(t,"opr/")||L(t,"opios/")?"Opera":L(t,"iemobile")?"IEMobile":L(t,"msie")||L(t,"trident/")?"IE":L(t,"edge/")?"Edge":L(t,"firefox/")?gd:L(t,"silk/")?"Silk":L(t,"blackberry")?"Blackberry":L(t,"webos")?"Webos":!L(t,"safari/")||L(t,"chrome/")||L(t,"crios/")||L(t,"android")?!L(t,"chrome/")&&!L(t,"crios/")||L(t,"edge/")?L(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":pd:"Safari"}function ln(e,t){t=t||[];var n,i=[],r={};for(n in md)r[md[n]]=!0;for(n=0;n<t.length;n++)"undefined"!=typeof r[t[n]]&&(delete r[t[n]],i.push(t[n]));i.sort();t=i;t.length||(t=["FirebaseCore-web"]);i=sn();"Browser"===i?(r=un(),i=cn(r)):"Worker"===i&&(r=un(),i=cn(r)+"-"+i);return i+"/JsCore/"+e+"/"+t.join(",")}function un(){return Nl.navigator&&Nl.navigator.userAgent||""}function dn(e,t){e=e.split(".");t=t||Nl;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];n!=e.length&&(t=void 0);return t}function hn(){try{var e=Nl.localStorage,t=kn();if(e)return e.setItem(t,"1"),e.removeItem(t),Wt()?!!Nl.indexedDB:!0}catch(n){return rn()&&!!Nl.indexedDB}return!1}function fn(){return(gn()||"chrome-extension:"===pn()||tn())&&!on()&&hn()&&!rn()}function gn(){return"http:"===pn()||"https:"===pn()}function pn(){return Nl.location&&Nl.location.protocol||null}function mn(e){e=e||un();return Kt(e)||cn(e)==gd?!1:!0}function vn(e){return"undefined"==typeof e?null:qt(e)}function _n(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function yn(e){return null!==e?JSON.parse(e):void 0}function kn(e){return e?e:Math.floor(1e9*Math.random()).toString()}function bn(e){e=e||un();return"Safari"==cn(e)||e.toLowerCase().match(/iphone|ipad|ipod/)?!1:!0}function Sn(){var e=Nl.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function wn(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e;this.c=t;e=un();t=sn();this.b=Kt(e)||"ReactNative"===t}function Cn(){var e=Nl.document;return e&&"undefined"!=typeof e.visibilityState?"visible"==e.visibilityState:!0}function En(){var e=Nl.document,t=null;return Cn()||!e?we():new ke(function(n){t=function(){Cn()&&(e.removeEventListener("visibilitychange",t,!1),n())};e.addEventListener("visibilitychange",t,!1)}).s(function(n){e.removeEventListener("visibilitychange",t,!1);throw n})}function Tn(e){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e)}function In(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function An(){return!(!dn("fireauth.oauthhelper",Nl)&&!dn("fireauth.iframe",Nl))}function xn(){var e=Nl.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function On(){var e=Nl.navigator;return e&&e.serviceWorker?we().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):we(null)}function Pn(e){_d[e]||(_d[e]=!0,Tn(e))}function Rn(e,t,n){vd?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Dn(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Rn(e,n,t[n])}function Mn(e){var t={};Dn(t,e);return t}function Nn(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ln(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var i=e[t[n]];if(void 0===i||null===i||""===i)return!1}return!0}function Fn(e){var t=e;if("object"==typeof e&&null!=e){t="length"in e?[]:{};for(var n in e)Rn(t,n,Fn(e[n]))}return t}/*

	 Copyright 2019 Google Inc.

	 Licensed under the Apache License, Version 2.0 (the "License");
	 you may not use this file except in compliance with the License.
	 You may obtain a copy of the License at

	   http://www.apache.org/licenses/LICENSE-2.0

	 Unless required by applicable law or agreed to in writing, software
	 distributed under the License is distributed on an "AS IS" BASIS,
	 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 See the License for the specific language governing permissions and
	 limitations under the License.
	*/
function Un(e){var t=e&&(e[wd]?"phone":null);if(!(t&&e&&e[Sd]))throw new v("internal-error","Internal assert: invalid MultiFactorInfo object");Rn(this,"uid",e[Sd]);Rn(this,"displayName",e[kd]||null);var n=null;e[bd]&&(n=new Date(e[bd]).toUTCString());Rn(this,"enrollmentTime",n);Rn(this,"factorId",t)}function $n(e){try{var t=new qn(e)}catch(n){t=null}return t}function qn(e){Un.call(this,e);Rn(this,"phoneNumber",e[wd])}function Hn(e){var t={},n=e[Id],i=e[xd],r=e[Od];e=$n(e[Ad]);if(!r||r!=Ed&&r!=Td&&!n||r==Td&&!i||r==Cd&&!e)throw Error("Invalid checkActionCode response!");r==Td?(t[Rd]=n||null,t[Md]=n||null,t[Pd]=i):(t[Rd]=i||null,t[Md]=i||null,t[Pd]=n||null);t[Dd]=e||null;Rn(this,Ld,r);Rn(this,Nd,Fn(t))}function jn(e){e=Tt(e);var t=Et(e,Fd)||null,n=Et(e,Ud)||null,i=Et(e,Hd)||null;i=i?Bd[i]||null:null;if(!t||!n||!i)throw new v("argument-error",Fd+", "+Ud+"and "+Hd+" are required in a valid action code URL.");Dn(this,{apiKey:t,operation:i,code:n,continueUrl:Et(e,$d)||null,languageCode:Et(e,qd)||null,tenantId:Et(e,jd)||null})}function Bn(e){try{return new jn(e)}catch(t){return null}}function Wn(e){var t=e[Qd];if("undefined"==typeof t)throw new v("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new v("invalid-continue-uri");this.h=t;this.b=this.a=null;this.g=!1;var n=e[Wd];if(n&&"object"==typeof n){t=n[Xd];var i=n[Kd];n=n[Yd];if("string"==typeof t&&t.length){this.a=t;if("undefined"!=typeof i&&"boolean"!=typeof i)throw new v("argument-error",Kd+" property must be a boolean when specified.");this.g=!!i;if("undefined"!=typeof n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new v("argument-error",Yd+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!=typeof t)throw new v("argument-error",Xd+" property must be a non empty string when specified.");if("undefined"!=typeof i||"undefined"!=typeof n)throw new v("missing-android-pkg-name")}}else if("undefined"!=typeof n)throw new v("argument-error",Wd+" property must be a non null object when specified.");this.f=null;if((t=e[Gd])&&"object"==typeof t){if(t=t[Jd],"string"==typeof t&&t.length)this.f=t;else if("undefined"!=typeof t)throw new v("argument-error",Jd+" property must be a non empty string when specified.")}else if("undefined"!=typeof t)throw new v("argument-error",Gd+" property must be a non null object when specified.");t=e[zd];if("undefined"!=typeof t&&"boolean"!=typeof t)throw new v("argument-error",zd+" property must be a boolean when specified.");this.c=!!t;e=e[Vd];if("undefined"!=typeof e&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new v("argument-error",Vd+" property must be a non empty string when specified.");this.i=e||null}function Vn(e){var t={};t.continueUrl=e.h;t.canHandleCodeInApp=e.c;(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g);t.iOSBundleId=e.f;t.dynamicLinkDomain=e.i;for(var n in t)null===t[n]&&delete t[n];return t}function zn(e){return Yl(e,function(e){e=e.toString(16);return 1<e.length?e:"0"+e}).join("")}function Gn(e){var t="";Qn(e,function(e){t+=String.fromCharCode(e)});return t}function Qn(e,t){function n(t){for(;i<e.length;){var n=e.charAt(i++),r=Zd[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}Kn();for(var i=0;;){var r=n(-1),s=n(0),o=n(64),a=n(64);if(64===a&&-1===r)break;t(r<<2|s>>4);64!=o&&(t(s<<4&240|o>>2),64!=a&&t(o<<6&192|a))}}function Kn(){if(!Zd){Zd={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var i=e.concat(t[n].split("")),r=0;r<i.length;r++){var s=i[r];void 0===Zd[s]&&(Zd[s]=r)}}}function Yn(e){var t=Jn(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.g=e;this.c=t.exp;this.h=t.sub;ql();this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null;this.f=t.firebase&&t.firebase.tenant||null;this.b=!!t.is_anonymous||"anonymous"==this.a}function Xn(e){try{return new Yn(e)}catch(t){return null}}function Jn(e){if(!e)return null;e=e.split(".");if(3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;t>n;n++)e+=".";try{return JSON.parse(Gn(e))}catch(i){}return null}function Zn(e){for(var t in nh)if(nh[t].fa==e)return nh[t];return null}function ei(e){var t={};t["facebook.com"]=ii;t["google.com"]=si;t["github.com"]=ri;t["twitter.com"]=oi;var n=e&&e[rh];try{if(n)return t[n]?new t[n](e):new ni(e);if("undefined"!=typeof e[ih])return new ti(e)}catch(i){}return null}function ti(e){var t=e[rh];if(!t&&e[ih]){var n=Xn(e[ih]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");("anonymous"==t||"custom"==t)&&(t=null);n=!1;"undefined"!=typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0);Rn(this,"providerId",t);Rn(this,"isNewUser",n)}function ni(e){ti.call(this,e);e=yn(e.rawUserInfo||"{}");Rn(this,"profile",Fn(e||{}))}function ii(e){ni.call(this,e);if("facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ri(e){ni.call(this,e);if("github.com"!=this.providerId)throw Error("Invalid provider ID!");Rn(this,"username",this.profile&&this.profile.login||null)}function si(e){ni.call(this,e);if("google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oi(e){ni.call(this,e);if("twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Rn(this,"username",e.screenName||null)}function ai(e){var t=Tt(e),n=Et(t,"link"),i=Et(Tt(n),"link");t=Et(t,"deep_link_id");return Et(Tt(t),"link")||t||i||n||e}function ci(e,t){if(!e&&!t)throw new v("internal-error","Internal assert: no raw session string available");if(e&&t)throw new v("internal-error","Internal assert: unable to determine the session type");this.a=e||null;this.b=t||null;this.type=this.a?sh:oh}function li(){}function ui(e,t){return e.then(function(e){if(e[Ch]){var n=Xn(e[Ch]);if(!n||t!=n.h)throw new v("user-mismatch");return e}throw new v("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==jl+"user-not-found"?new v("user-mismatch"):e})}function di(e,t){if(!t)throw new v("internal-error","failed to construct a credential");this.a=t;Rn(this,"providerId",e);Rn(this,"signInMethod",e)}function hi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function fi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new di(e.providerId,e.pendingToken)}catch(t){}return null}function gi(e,t,n){this.a=null;if(t.idToken||t.accessToken)t.idToken&&Rn(this,"idToken",t.idToken),t.accessToken&&Rn(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Rn(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new v("internal-error","failed to construct a credential");Rn(this,"accessToken",t.oauthToken),Rn(this,"secret",t.oauthTokenSecret)}Rn(this,"providerId",e);Rn(this,"signInMethod",n)}function pi(e){var t={};e.idToken&&(t.id_token=e.idToken);e.accessToken&&(t.access_token=e.accessToken);e.secret&&(t.oauth_token_secret=e.secret);t.providerId=e.providerId;e.nonce&&!e.a&&(t.nonce=e.nonce);t={postBody:Dt(t).toString(),requestUri:"http://localhost"};e.a&&(delete t.postBody,t.pendingToken=e.a);return t}function mi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new gi(e.providerId,t,e.signInMethod)}catch(n){}}return null}function vi(e,t){this.Pc=t||[];Dn(this,{providerId:e,isOAuthProvider:!0});this.Hb={};this.ob=(Zn(e)||{}).Ja||null;this.nb=null}function _i(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new v("argument-error",'SAML provider IDs must be prefixed with "saml."');vi.call(this,e,[])}function yi(e){vi.call(this,e,th);this.a=[]}function ki(){yi.call(this,"facebook.com")}function bi(e){if(!e)throw new v("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;u(e)&&(t=e.accessToken);return(new ki).credential({accessToken:t})}function Si(){yi.call(this,"github.com")}function wi(e){if(!e)throw new v("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;u(e)&&(t=e.accessToken);return(new Si).credential({accessToken:t})}function Ci(){yi.call(this,"google.com");this.Ca("profile")}function Ei(e,t){var n=e;u(e)&&(n=e.idToken,t=e.accessToken);return(new Ci).credential({idToken:n,accessToken:t})}function Ti(){vi.call(this,"twitter.com",eh)}function Ii(e,t){var n=e;u(n)||(n={oauthToken:e,oauthTokenSecret:t});if(!n.oauthToken||!n.oauthTokenSecret)throw new v("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new gi("twitter.com",n,"twitter.com")}function Ai(e,t,n){this.a=e;this.f=t;Rn(this,"providerId","password");Rn(this,"signInMethod",n===Oi.EMAIL_LINK_SIGN_IN_METHOD?Oi.EMAIL_LINK_SIGN_IN_METHOD:Oi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xi(e){return e&&e.email&&e.password?new Ai(e.email,e.password,e.signInMethod):null}function Oi(){Dn(this,{providerId:"password",isOAuthProvider:!1})}function Pi(e,t){t=Ri(t);if(!t)throw new v("argument-error","Invalid email link!");return new Ai(e,t.code,Oi.EMAIL_LINK_SIGN_IN_METHOD)}function Ri(e){e=ai(e);return(e=Bn(e))&&e.operation===Ed?e:null}function Di(e){if(!(e.cb&&e.bb||e.La&&e.ea))throw new v("internal-error");this.a=e;Rn(this,"providerId","phone");this.fa="phone";Rn(this,"signInMethod","phone")}function Mi(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};Ql(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])});return new Di(t)}return null}function Ni(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.cb,code:e.a.bb}}function Li(e){try{this.a=e||Pl.auth()}catch(t){throw new v("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Dn(this,{providerId:"phone",isOAuthProvider:!1})}function Fi(e,t){if(!e)throw new v("missing-verification-id");if(!t)throw new v("missing-verification-code");return new Di({cb:e,bb:t})}function Ui(e){if(e.temporaryProof&&e.phoneNumber)return new Di({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,i=e&&e.oauthTokenSecret,r=e&&e.nonce,s=e&&e.oauthIdToken,o=e&&e.pendingToken;try{switch(t){case"google.com":return Ei(s,n);case"facebook.com":return bi(n);case"github.com":return wi(n);case"twitter.com":return Ii(n,i);default:return n||i||s||o?o?0==t.indexOf("saml.")?new di(t,o):new gi(t,{pendingToken:o,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new yi(t).credential({idToken:s,accessToken:n,rawNonce:r}):null}}catch(a){return null}}function $i(e){if(!e.isOAuthProvider)throw new v("invalid-oauth-provider")}function qi(e,t,n,i,r,s,o){this.c=e;this.b=t||null;this.g=n||null;this.f=i||null;this.i=s||null;this.h=o||null;this.a=r||null;if(!this.g&&!this.a)throw new v("invalid-auth-event");if(this.g&&this.a)throw new v("invalid-auth-event");if(this.g&&!this.f)throw new v("invalid-auth-event")}function Hi(e){e=e||{};return e.type?new qi(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&_(e.error),e.postBody,e.tenantId):null}/*

	 Copyright 2018 Google Inc.

	 Licensed under the Apache License, Version 2.0 (the "License");
	 you may not use this file except in compliance with the License.
	 You may obtain a copy of the License at

	   http://www.apache.org/licenses/LICENSE-2.0

	 Unless required by applicable law or agreed to in writing, software
	 distributed under the License is distributed on an "AS IS" BASIS,
	 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 See the License for the specific language governing permissions and
	 limitations under the License.
	*/
function ji(){this.b=null;this.a=[]}function Bi(e){var t=ah;t.a.push(e);t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},e=dn("universalLinks.subscribe",Nl),"function"==typeof e&&e(null,t.b))}function Wi(e){var t="unauthorized-domain",n=void 0,i=Tt(e);e=i.a;i=i.f;"chrome-extension"==i?n=ie("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==i||"https"==i?n=ie("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment";v.call(this,t,n)}function Vi(e,t,n){v.call(this,e,n);e=t||{};e.Ib&&Rn(this,"email",e.Ib);e.ea&&Rn(this,"phoneNumber",e.ea);e.credential&&Rn(this,"credential",e.credential);e.Yb&&Rn(this,"tenantId",e.Yb)}function zi(e){if(e.code){var t=e.code||"";0==t.indexOf(jl)&&(t=t.substring(jl.length));var n={credential:Ui(e),Yb:e.tenantId};if(e.email)n.Ib=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new v(t,e.message||void 0);return new Vi(t,n,e.message)}return null}function Gi(){}function Qi(e){return e.c||(e.c=e.b())}function Ki(){}function Yi(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var i=t[n];try{return new ActiveXObject(i),e.f=i}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Xi(){}function Ji(){this.a=new XDomainRequest;this.readyState=0;this.onreadystatechange=null;this.responseType=this.responseText=this.response="";this.status=-1;this.statusText="";this.a.onload=g(this.pc,this);this.a.onerror=g(this.Rb,this);this.a.onprogress=g(this.qc,this);this.a.ontimeout=g(this.uc,this)}function Zi(e,t){e.readyState=t;e.onreadystatechange&&e.onreadystatechange()}function er(e,t,n){this.reset(e,t,n,void 0,void 0)}function tr(e){this.f=e;this.b=this.c=this.a=null}function nr(e,t){this.name=e;this.value=t}function ir(e){if(e.c)return e.c;if(e.a)return ir(e.a);w("Root logger has no level set.");return null}function rr(e){ph||(ph=new tr(""),gh[""]=ph,ph.c=hh);var t;if(!(t=gh[e])){t=new tr(e);var n=e.lastIndexOf("."),i=e.substr(n+1);n=rr(e.substr(0,n));n.b||(n.b={});n.b[i]=t;t.a=n;gh[e]=t}return t}function sr(e,t){e&&e.log(fh,t,void 0)}function or(e){this.f=e}function ar(e){at.call(this);this.o=e;this.readyState=mh;this.status=0;this.responseType=this.responseText=this.response=this.statusText="";this.onreadystatechange=null;this.i=new Headers;this.b=null;this.m="GET";this.g="";this.a=!1;this.h=rr("goog.net.FetchXmlHttp");this.l=this.c=this.f=null}function cr(e){e.c.read().then(e.oc.bind(e))["catch"](e.Ta.bind(e))}function lr(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText);e.readyState=4;e.f=null;e.c=null;e.l=null;ur(e)}function ur(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function dr(e){at.call(this);this.headers=new mt;this.O=e||null;this.c=!1;this.A=this.a=null;this.h=this.P=this.l="";this.f=this.N=this.i=this.G=!1;this.g=0;this.o=null;this.m=vh;this.u=this.R=!1}function hr(e,t,n,i,r){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET";e.l=t;e.h="";e.P=n;e.G=!1;e.c=!0;e.a=e.O?e.O.a():ch.a();e.A=Qi(e.O?e.O:ch);e.a.onreadystatechange=g(e.Ub,e);try{sr(e.b,wr(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(s){sr(e.b,wr(e,"Error opening Xhr: "+s.message));pr(e,s);return}t=i||"";var o=new mt(e.headers);r&&pt(r,function(e,t){o.set(t,e)});r=O(o.Y());i=Nl.FormData&&t instanceof Nl.FormData;!P(yh,n)||r||i||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");o.forEach(function(e,t){this.a.setRequestHeader(t,e)},e);e.m&&(e.a.responseType=e.m);"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{yr(e),0<e.g&&(e.u=fr(e.a),sr(e.b,wr(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=g(e.Ma,e)):e.o=dt(e.Ma,e.g,e)),sr(e.b,wr(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(s){sr(e.b,wr(e,"Send error: "+s.message)),pr(e,s)}}function fr(e){return wu&&ce(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}function gr(e){return"content-type"==e.toLowerCase()}function pr(e,t){e.c=!1;e.a&&(e.f=!0,e.a.abort(),e.f=!1);e.h=t;mr(e);_r(e)}function mr(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function vr(e){if(e.c&&"undefined"!=typeof Ml)if(e.A[1]&&4==kr(e)&&2==br(e))sr(e.b,wr(e,"Local request error detected and ignored"));else if(e.i&&4==kr(e))dt(e.Ub,0,e);else if(e.dispatchEvent("readystatechange"),4==kr(e)){sr(e.b,wr(e,"Request complete"));e.c=!1;try{var t=br(e);e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var i;if(!(i=n)){var r;if(r=0===t){var s=String(e.l).match(rd)[1]||null;if(!s&&Nl.self&&Nl.self.location){var o=Nl.self.location.protocol;s=o.substr(0,o.length-1)}r=!_h.test(s?s.toLowerCase():"")}i=r}if(i)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<kr(e)?e.a.statusText:""}catch(c){sr(e.b,"Can not get status: "+c.message),a=""}e.h=a+" ["+br(e)+"]";mr(e)}}finally{_r(e)}}}function _r(e,t){if(e.a){yr(e);var n=e.a,i=e.A[0]?o:null;e.a=null;e.A=null;t||e.dispatchEvent("ready");try{n.onreadystatechange=i}catch(r){(e=e.b)&&e.log(uh,"Problem encountered resetting onreadystatechange: "+r.message,void 0)}}}function yr(e){e.a&&e.u&&(e.a.ontimeout=null);e.o&&(Nl.clearTimeout(e.o),e.o=null)}function kr(e){return e.a?e.a.readyState:0}function br(e){try{return 2<kr(e)?e.a.status:-1}catch(t){return-1}}function Sr(e){try{return e.a?e.a.responseText:""}catch(t){return sr(e.b,"Can not get responseText: "+t.message),""}}function wr(e,t){return t+" ["+e.P+" "+e.l+" "+br(e)+"]"}/*
	 Portions of this code are from MochiKit, received by
	 The Closure Authors under the MIT license. All other code is Copyright
	 2005-2009 The Closure Authors. All Rights Reserved.
	*/
function Cr(e){var t=Lr;this.g=[];this.u=t;this.o=e||null;this.f=this.a=!1;this.c=void 0;this.m=this.A=this.i=!1;this.h=0;this.b=null;this.l=0}function Er(e,t,n){e.a=!0;e.c=n;e.f=!t;Or(e)}function Tr(e){if(e.a){if(!e.m)throw new Pr(e);e.m=!1}}function Ir(e,t){Ar(e,null,t,void 0)}function Ar(e,t,n,i){e.g.push([t,n,i]);e.a&&Or(e)}function xr(e){return Xl(e.g,function(e){return l(e[1])})}function Or(e){if(e.h&&e.a&&xr(e)){var t=e.h,n=kh[t];n&&(Nl.clearTimeout(n.a),delete kh[t]);e.h=0}e.b&&(e.b.l--,delete e.b);t=e.c;for(var i=n=!1;e.g.length&&!e.i;){var r=e.g.shift(),s=r[0],o=r[1];r=r[2];if(s=e.f?o:s)try{var a=s.call(r||e.o,t);void 0!==a&&(e.f=e.f&&(a==t||a instanceof Error),e.c=t=a);(k(t)||"function"==typeof Nl.Promise&&t instanceof Nl.Promise)&&(i=!0,e.i=!0)}catch(c){t=c,e.f=!0,xr(e)||(n=!0)}}e.c=t;i&&(a=g(e.v,e,!0),i=g(e.v,e,!1),t instanceof Cr?(Ar(t,a,i),t.A=!0):t.then(a,i));n&&(t=new Dr(t),kh[t.a]=t,e.h=t.a)}function Pr(){b.call(this)}function Rr(){b.call(this)}function Dr(e){this.a=Nl.setTimeout(g(this.c,this),0);this.b=e}function Mr(e){var t={},n=t.document||document,i=G(e).toString(),r=fe(document,"SCRIPT"),s={Vb:r,Ma:void 0},o=new Cr(s),a=null,c=null!=t.timeout?t.timeout:5e3;c>0&&(a=window.setTimeout(function(){Fr(r,!0);var e=new Ur(Sh,"Timeout reached for loading script "+i);Tr(o);Er(o,!1,e)},c),s.Ma=a);r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Fr(r,t.wd||!1,a),Tr(o),Er(o,!0,null))};r.onerror=function(){Fr(r,!0,a);var e=new Ur(bh,"Error while loading script "+i);Tr(o);Er(o,!1,e)};s=t.attributes||{};j(s,{type:"text/javascript",charset:"UTF-8"});ue(r,s);ne(r,e);Nr(n).appendChild(r);return o}function Nr(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function Lr(){if(this&&this.Vb){var e=this.Vb;e&&"SCRIPT"==e.tagName&&Fr(e,!0,this.Ma)}}function Fr(e,t,n){null!=n&&Nl.clearTimeout(n);e.onload=o;e.onerror=o;e.onreadystatechange=o;t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}function Ur(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t);b.call(this,n);this.code=e}function $r(e){this.f=e}function qr(e,t,n){this.c=e;e=t||{};this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token";this.v=e.secureTokenTimeout||Eh;this.g=H(e.secureTokenHeaders||Th);this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/";this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/";this.m=e.firebaseTimeout||Ih;this.a=H(e.firebaseHeaders||Ah);n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n);n="Node"==sn();n=Nl.XMLHttpRequest||n&&Pl.INTERNAL.node&&Pl.INTERNAL.node.XMLHttpRequest;if(!n&&!rn())throw new v("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0;rn()?this.f=new or(self):on()?this.f=new $r(n):this.f=new Xi;this.b=null}function Hr(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function jr(e,t){t&&(e.l=Br("https://securetoken.googleapis.com/v1/token",t),e.h=Br("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=Br("https://identitytoolkit.googleapis.com/v2/",t))}function Br(e,t){e=Tt(e);t=Tt(t.url);e.c=e.a+e.c;bt(e,t.f);e.a=t.a;St(e,t.g);return e.toString()}function Wr(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Vr(e,t,n,i,r,s,o){Qt()||rn()?e=g(e.u,e):(wh||(wh=new ke(function(e,t){zr(e,t)})),e=g(e.o,e));e(t,n,i,r,s,o)}function zr(e,t){if(((window.gapi||{}).client||{}).request)e();else{Nl[Oh]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};var n=Q(xh,{onload:Oh});Ir(Mr(n),function(){t(Error("CORS_UNSUPPORTED"))})}}function Gr(e,t){return new ke(function(n,i){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Vr(e,e.l+"?key="+encodeURIComponent(e.c),function(e){e?e.error?i(ps(e)):e.access_token&&e.refresh_token?n(e):i(new v("internal-error")):i(new v("network-request-failed"))},"POST",Dt(t).toString(),e.g,e.v.get()):i(new v("internal-error"))})}function Qr(e,t,n,i,r,s,o){var a=Tt(t+n);Ct(a,"key",e.c);o&&Ct(a,"cb",ql().toString());var c="GET"==i;if(c)for(var l in r)r.hasOwnProperty(l)&&Ct(a,l,r[l]);return new ke(function(t,n){Vr(e,a.toString(),function(e){e?e.error?n(ps(e,s||{})):t(e):n(new v("network-request-failed"))},i,c?void 0:qt(_n(r)),e.a,e.m.get())})}function Kr(e){e=e.email;if("string"!=typeof e||!fd.test(e))throw new v("invalid-email")}function Yr(e){"email"in e&&Kr(e)}function Xr(e,t){return fs(e,Nh,{identifier:t,continueUri:gn()?Vt():"http://localhost"}).then(function(e){return e.signinMethods||[]})}function Jr(e){return fs(e,Gh,{}).then(function(e){return e.authorizedDomains||[]})}function Zr(e){if(!e[Ch]){if(e.mfaPendingCredential)throw new v("multi-factor-auth-required",null,H(e));throw new v("internal-error")}}function es(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new v("internal-error")}else{if(!e.sessionInfo)throw new v("missing-verification-id");if(!e.code)throw new v("missing-verification-code")}}function ts(e,t){return fs(e,Yh,t)}function ns(e,t){return fs(e,ef,t).then(function(e){return e.phoneSessionInfo.sessionInfo})}function is(e){if(!e.phoneVerificationInfo)throw new v("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new v("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new v("missing-verification-code")}function rs(e,t){return fs(e,tf,t).then(function(e){return e.phoneResponseInfo.sessionInfo})}function ss(e,t,n){return fs(e,Fh,{idToken:t,deleteProvider:n})}function os(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new v("internal-error")}function as(e,t){t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(e=new Pt(e.postBody),Nt(e,"nonce")&&(t.nonce=e.get("nonce"))));return t}function cs(e){var t=null;e.needConfirmation?(e.code="account-exists-with-different-credential",t=zi(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=zi(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=zi(e)):e.errorMessage&&(t=gs(e.errorMessage));if(t)throw t;Zr(e)}function ls(e,t){t.returnIdpCredential=!0;return fs(e,nf,t)}function us(e,t){t.returnIdpCredential=!0;return fs(e,sf,t)}function ds(e,t){t.returnIdpCredential=!0;t.autoCreate=!1;return fs(e,rf,t)}function hs(e){if(!e.oobCode)throw new v("invalid-action-code")}function fs(e,t,n){if(!Ln(n,t.M))return Ce(new v("internal-error"));var i,r=!!t.Na,s=t.Tb||"POST";return we(n).then(t.B).then(function(){t.U&&(n.returnSecureToken=!0);t.C&&e.b&&"undefined"==typeof n.tenantId&&(n.tenantId=e.b);return r?Qr(e,e.i,t.endpoint,s,n,t.Gb,t.kb||!1):Qr(e,e.h,t.endpoint,s,n,t.Gb,t.kb||!1)}).then(function(e){i=e;return t.Xa?t.Xa(n,i):i}).then(t.F).then(function(){if(!t.Z)return i;if(!(t.Z in i))throw new v("internal-error");return i[t.Z]})}function gs(e){return ps({error:{errors:[{message:e}],code:400,message:e}})}function ps(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new v(i[n]):null)return n;n=e.error&&e.error.message||"";i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"};j(i,t||{});t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0;for(var r in i)if(0===n.indexOf(r))return new v(i[r],t);!t&&e&&(t=vn(e));return new v("internal-error",t)}function ms(e){this.b=e;this.a=null;this.qb=vs(this)}function vs(e){return ks().then(function(){return new ke(function(t,n){dn("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:dn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(i){function r(){clearTimeout(s);t()}e.a=i;e.a.restyle({setHideOnLeave:!1});var s=setTimeout(function(){n(Error("Network Error"))},gf.get());i.ping(r).then(r,function(){n(Error("Network Error"))})})})})}function _s(e,t){return e.qb.then(function(){return new ke(function(n){e.a.send(t.type,t,n,dn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function ys(e,t){e.qb.then(function(){e.a.register("authEvent",t,dn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function ks(){return pf?pf:pf=new ke(function(e,t){function n(){Sn();dn("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Sn();t(Error("Network Error"))},timeout:ff.get()})}if(dn("gapi.iframes.Iframe"))e();else if(dn("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();Nl[i]=function(){dn("gapi.load")?n():t(Error("Network Error"))};i=Q(hf,{onload:i});we(Mr(i)).s(function(){t(Error("Network Error"))})}}).s(function(e){pf=null;throw e})}function bs(e,t,n,i){this.l=e;this.h=t;this.i=n;this.g=i;this.f=null;this.g?(e=Tt(this.g.url),e=It(e.f,e.a,e.g,"/emulator/auth/iframe")):e=It("https",this.l,null,"/__/auth/iframe");this.a=e;Ct(this.a,"apiKey",this.h);Ct(this.a,"appName",this.i);this.b=null;this.c=[]}function Ss(e,t,n,i,r,s){this.u=e;this.o=t;this.c=n;this.v=i;this.m=s;this.i=this.g=this.l=null;this.a=r;this.h=this.f=null}function ws(e){try{return Pl.app(e).auth().Ga()}catch(t){return[]}}function Cs(e,t,n,i,r,s){this.o=e;this.g=t;this.b=n;this.f=s;this.c=i||null;this.i=r||null;this.l=this.u=this.A=null;this.h=[];this.v=this.a=null}function Es(e){var t=Vt();return Jr(e).then(function(e){e:{var n=Tt(t),i=n.f;n=n.a;for(var r=0;r<e.length;r++){var s=e[r],o=n,a=i;0==s.indexOf("chrome-extension://")?o=Tt(s).a==o&&"chrome-extension"==a:"http"!=a&&"https"!=a?o=!1:hd.test(s)?o=o==s:(s=s.split(".").join("\\."),o=new RegExp("^(.+\\."+s+"|"+s+")$","i").test(o));if(o){e=!0;break e}}e=!1}if(!e)throw new Wi(Vt())})}function Ts(e){if(e.v)return e.v;e.v=Zt().then(function(){if(!e.u){var t=e.c,n=e.i,i=ws(e.b),r=new bs(e.o,e.g,e.b,e.f);r.f=t;r.b=n;r.c=N(i||[]);e.u=r.toString()}e.m=new ms(e.u);xs(e)});return e.v}function Is(e){e.l||(e.A=e.c?ln(e.c,ws(e.b)):null,e.l=new qr(e.g,y(e.i),e.A),e.f&&jr(e.l,e.f));return e.l}function As(e,t,n,i,r,s,o,a,c,l,u,d){e=new Ss(e,t,n,i,r,d);e.l=s;e.g=o;e.i=a;e.b=H(c||null);e.f=l;return e.xb(u).toString()}function xs(e){if(!e.m)throw Error("IfcHandler must be initialized!");ys(e.m,function(t){var n={};if(t&&t.authEvent){var i=!1;t=Hi(t.authEvent);for(n=0;n<e.h.length;n++)i=e.h[n](t)||i;n={};n.status=i?"ACK":"ERROR";return we(n)}n.status="ERROR";return we(n)})}function Os(e){var t={type:"webStorageSupport"};return Ts(e).then(function(){return _s(e.m,t)}).then(function(e){if(e&&e.length&&"undefined"!=typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})}function Ps(e){this.a=e||Pl.INTERNAL.reactNative&&Pl.INTERNAL.reactNative.AsyncStorage;if(!this.a)throw new v("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Rs(e){this.b=e;this.a={};this.f=g(this.c,this)}function Ds(){var e=rn()?self:null;Ql(mf,function(n){n.b==e&&(t=n)});if(!t){var t=new Rs(e);mf.push(t)}return t}function Ms(e,t,n){q(e.a)&&e.b.addEventListener("message",e.f);"undefined"==typeof e.a[t]&&(e.a[t]=[]);e.a[t].push(n)}function Ns(e){this.a=e}function Ls(e){this.c=e;this.b=!1;this.a=[]}function Fs(e,t,n,i){var r,s,o,a,c=n||{},l=null;if(e.b)return Ce(Error("connection_unavailable"));var u=i?800:50,d="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ke(function(n,i){d?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),d.port1.start(),o=setTimeout(function(){i(Error("unsupported_event"))},u),s=function(e){e.data.eventId===r&&("ack"===e.data.status?(clearTimeout(o),a=setTimeout(function(){i(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(a),"undefined"!=typeof e.data.response?n(e.data.response):i(Error("unknown_error"))):(clearTimeout(o),clearTimeout(a),i(Error("invalid_response"))))},l={messageChannel:d,onMessage:s},e.a.push(l),d.port1.addEventListener("message",s),e.c.postMessage({eventType:t,eventId:r,data:c},[d.port2])):i(Error("connection_unavailable"))}).then(function(t){Us(e,l);return t}).s(function(t){Us(e,l);throw t})}function Us(e,t){if(t){var n=t.messageChannel,i=t.onMessage;n&&(n.port1.removeEventListener("message",i),n.port1.close());D(e.a,function(e){return e==t})}}function $s(){if(!Bs())throw new v("web-storage-unsupported");this.c={};this.a=[];this.b=0;this.m=Nl.indexedDB;this.type="indexedDB";this.g=this.l=this.f=this.i=null;this.o=!1;this.h=null;var e=this;rn()&&self?(this.l=Ds(),Ms(this.l,"keyChanged",function(t,n){return Qs(e).then(function(t){0<t.length&&Ql(e.a,function(e){e(t)});return{keyProcessed:P(t,n.key)}})}),Ms(this.l,"ping",function(){return we(["keyChanged"])})):On().then(function(t){(e.h=t)&&(e.g=new Ls(new Ns(t)),Fs(e.g,"ping",null,!0).then(function(t){t[0].fulfilled&&P(t[0].value,"keyChanged")&&(e.o=!0)}).s(function(){}))})}function qs(e){return new ke(function(t,n){var i=e.m.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){t()};i.onerror=function(e){n(Error(e.target.error))}})}function Hs(e){return new ke(function(t,n){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))};i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}};i.onsuccess=function(i){i=i.target.result;i.objectStoreNames.contains("firebaseLocalStorage")?t(i):qs(e).then(function(){return Hs(e)}).then(function(e){t(e)}).s(function(e){n(e)})}})}function js(e){e.v||(e.v=Hs(e));return e.v}function Bs(){try{return!!Nl.indexedDB}catch(e){return!1}}function Ws(e){return e.objectStore("firebaseLocalStorage")}function Vs(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function zs(e){return new ke(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()};e.onerror=function(e){n(e.target.error)}})}function Gs(e,t){return e.g&&e.h&&xn()===e.h?Fs(e.g,"keyChanged",{key:t},e.o).then(function(){}).s(function(){}):we()}function Qs(e){return js(e).then(function(e){var t=Ws(Vs(e,!1));return t.getAll?zs(t.getAll()):new ke(function(e,n){var i=[],r=t.openCursor();r.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t["continue"]()):e(i)};r.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},i=[];if(0==e.b){for(i=0;i<t.length;i++)n[t[i].fbase_key]=t[i].value;i=Gt(e.c,n);e.c=n}return i})}function Ks(e){function t(){e.f=setTimeout(function(){e.i=Qs(e).then(function(t){0<t.length&&Ql(e.a,function(e){e(t)})}).then(function(){t()}).s(function(e){"STOP_EVENT"!=e.message&&t()})},800)}Ys(e);t()}function Ys(e){e.i&&e.i.cancel("STOP_EVENT");e.f&&(clearTimeout(e.f),e.f=null)}function Xs(e){var t=this,n=null;this.a=[];this.type="indexedDB";this.c=e;this.b=we().then(function(){if(Bs()){var e=kn(),i="__sak"+e;vf||(vf=new $s);n=vf;return n.set(i,e).then(function(){return n.get(i)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.T(i)}).then(function(){return n}).s(function(){return t.c})}return t.c}).then(function(e){t.type=e.type;e.ca(function(e){Ql(t.a,function(t){t(e)})});return e})}function Js(){this.a={};this.type="inMemory"}function Zs(){if(!to()){if("Node"==sn())throw new v("internal-error","The LocalStorage compatibility library was not found.");throw new v("web-storage-unsupported")}this.a=eo()||Pl.INTERNAL.node.localStorage;this.type="localStorage"}function eo(){try{var e=Nl.localStorage,t=kn();e&&(e.setItem(t,"1"),e.removeItem(t));return e}catch(n){return null}}function to(){var e="Node"==sn();e=eo()||e&&Pl.INTERNAL.node&&Pl.INTERNAL.node.localStorage;if(!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}function no(){this.type="nullStorage"}function io(){if(!so()){if("Node"==sn())throw new v("internal-error","The SessionStorage compatibility library was not found.");throw new v("web-storage-unsupported")}this.a=ro()||Pl.INTERNAL.node.sessionStorage;this.type="sessionStorage"}function ro(){try{var e=Nl.sessionStorage,t=kn();e&&(e.setItem(t,"1"),e.removeItem(t));return e}catch(n){return null}}function so(){var e="Node"==sn();e=ro()||e&&Pl.INTERNAL.node&&Pl.INTERNAL.node.sessionStorage;if(!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}function oo(){var e={};e.Browser=kf;e.Node=bf;e.ReactNative=Sf;e.Worker=wf;this.a=e[sn()]}function ao(e){var t=new v("invalid-persistence-type"),n=new v("unsupported-persistence-type");e:{for(i in Cf)if(Cf[i]==e){var i=!0;break e}i=!1}if(!i||"string"!=typeof e)throw t;switch(sn()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Bs()&&"none"!==e)throw n;break;default:if(!hn()&&"none"!==e)throw n}}function co(){var e=!bn(un())&&nn()?!0:!1,t=mn(),n=hn();this.v=e;this.h=t;this.l=n;this.a={};_f||(_f=new oo);e=_f;try{this.g=!Wt()&&An()||!Nl.indexedDB?new e.a.D:new Xs(rn()?new Js:new e.a.D)}catch(i){this.g=new Js,this.h=!0}try{this.i=new e.a.ab}catch(i){this.i=new Js}this.m=new Js;this.f=g(this.Xb,this);this.b={}}function lo(){yf||(yf=new co);return yf}function uo(e,t){switch(t){case"session":return e.i;case"none":return e.m;default:return e.g}}function ho(e,t){return"firebase:"+e.name+(t?":"+t:"")}function fo(e,t,n){var i=ho(t,n),r=uo(e,t.D);return e.get(t,n).then(function(s){var o=null;try{o=yn(Nl.localStorage.getItem(i))}catch(a){}if(o&&!s)return Nl.localStorage.removeItem(i),e.set(t,o,n);o&&s&&"localStorage"!=r.type&&Nl.localStorage.removeItem(i);return void 0})}function go(e,t,n){n=ho(t,n);"local"==t.D&&(e.b[n]=null);return uo(e,t.D).T(n)}function po(e){mo(e);e.c=setInterval(function(){for(var t in e.a){var n=Nl.localStorage.getItem(t),i=e.b[t];n!=i&&(e.b[t]=n,n=new Be({type:"storage",key:t,target:window,oldValue:i,newValue:n,a:!0}),e.Xb(n))}},1e3)}function mo(e){e.c&&(clearInterval(e.c),e.c=null)}function vo(e){this.a=e;this.b=lo()}function _o(e){return e.b.get(Tf,e.a).then(function(e){return Hi(e)})}function yo(){this.a=lo()}function ko(){this.b=-1}function bo(e,t){this.b=If;this.f=Nl.Uint8Array?new Uint8Array(this.b):Array(this.b);this.g=this.c=0;this.a=[];this.i=e;this.h=t;this.l=Nl.Int32Array?new Int32Array(64):Array(64);void 0===Ef&&(Ef=Nl.Int32Array?new Int32Array(Rf):Rf);this.reset()}function So(e){for(var t=e.f,n=e.l,i=0,r=0;r<t.length;)n[i++]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r=4*i;for(t=16;64>t;t++){r=0|n[t-15];i=0|n[t-2];var s=(0|n[t-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,o=(0|n[t-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[t]=s+o|0}i=0|e.a[0];r=0|e.a[1];var a=0|e.a[2],c=0|e.a[3],l=0|e.a[4],u=0|e.a[5],d=0|e.a[6];s=0|e.a[7];for(t=0;64>t;t++){var h=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&a^r&a)|0;o=l&u^~l&d;s=s+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0;o=o+(0|Ef[t])|0;o=s+(o+(0|n[t])|0)|0;s=d;d=u;u=l;l=c+o|0;c=a;a=r;r=i;i=o+h|0}e.a[0]=e.a[0]+i|0;e.a[1]=e.a[1]+r|0;e.a[2]=e.a[2]+a|0;e.a[3]=e.a[3]+c|0;e.a[4]=e.a[4]+l|0;e.a[5]=e.a[5]+u|0;e.a[6]=e.a[6]+d|0;e.a[7]=e.a[7]+s|0}function wo(e,t,n){void 0===n&&(n=t.length);var i=0,r=e.c;if("string"==typeof t)for(;n>i;)e.f[r++]=t.charCodeAt(i++),r==e.b&&(So(e),r=0);else{if(!c(t))throw Error("message must be string or array");for(;n>i;){var s=t[i++];if(!("number"==typeof s&&s>=0&&255>=s&&s==(0|s)))throw Error("message must be a byte array");e.f[r++]=s;r==e.b&&(So(e),r=0)}}e.c=r;e.g+=n}function Co(){bo.call(this,8,Df)}function Eo(e,t,n,i,r,s){this.m=e;this.i=t;this.l=n;this.v=i||null;this.u=r||null;this.o=s;this.h=t+":"+n;this.A=new yo;this.g=new vo(this.h);this.f=null;this.b=[];this.a=this.c=null}function To(e){return new v("invalid-cordova-configuration",e)}function Io(){for(var e=20,t=[];e>0;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function Ao(e){var t=new Co;wo(t,e);e=[];var n=8*t.g;56>t.c?wo(t,Pf,56-t.c):wo(t,Pf,t.b-(t.c-56));for(var i=63;i>=56;i--)t.f[i]=255&n,n/=256;So(t);for(i=n=0;i<t.i;i++)for(var r=24;r>=0;r-=8)e[n++]=t.a[i]>>r&255;return zn(e)}function xo(e,t,n,i,r){var s=Io(),o=new qi(t,i,null,s,new v("no-auth-event"),null,r),a=dn("BuildInfo.packageName",Nl);if("string"!=typeof a)throw new v("invalid-cordova-configuration");var c=dn("BuildInfo.displayName",Nl),l={};if(un().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=a;else{if(!un().toLowerCase().match(/android/))return Ce(new v("operation-not-supported-in-this-environment"));l.apn=a}c&&(l.appDisplayName=c);s=Ao(s);l.sessionId=s;var u=As(e.m,e.i,e.l,t,n,null,i,e.v,l,e.u,r,e.o);return e.la().then(function(){var t=e.h;return e.A.a.set(Tf,o.w(),t)}).then(function(){var t=dn("cordova.plugins.browsertab.isAvailable",Nl);if("function"!=typeof t)throw new v("invalid-cordova-configuration");var n=null;t(function(t){if(t){n=dn("cordova.plugins.browsertab.openUrl",Nl);if("function"!=typeof n)throw new v("invalid-cordova-configuration");n(u)}else{n=dn("cordova.InAppBrowser.open",Nl);if("function"!=typeof n)throw new v("invalid-cordova-configuration");t=un();e.a=n(u,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function Oo(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(i){}}function Po(e){e.f||(e.f=e.la().then(function(){return new ke(function(t){function n(i){t(i);e.Ra(n);return!1}e.Ea(n);Do(e)})}));return e.f}function Ro(e){var t=null;return _o(e.g).then(function(n){t=n;n=e.g;return go(n.b,Tf,n.a)}).then(function(){return t})}function Do(e){function t(t){i=!0;r&&r.cancel();Ro(e).then(function(i){var r=n;if(i&&t&&t.url){var s=null;r=ai(t.url);-1!=r.indexOf("/__/auth/callback")&&(s=Tt(r),s=yn(Et(s,"firebaseError")||null),s=(s="object"==typeof s?_(s):null)?new qi(i.c,i.b,null,null,s,null,i.S()):new qi(i.c,i.b,r,i.f,null,null,i.S()));r=s||n}Oo(e,r)})}var n=new qi("unknown",null,null,null,new v("no-auth-event")),i=!1,r=ht(500).then(function(){return Ro(e).then(function(){i||Oo(e,n)})}),s=Nl.handleOpenURL;Nl.handleOpenURL=function(e){0==e.toLowerCase().indexOf(dn("BuildInfo.packageName",Nl).toLowerCase()+"://")&&t({url:e});if("function"==typeof s)try{s(e)}catch(n){console.error(n)}};ah||(ah=new ji);Bi(t)}function Mo(e){this.a=e;this.b=lo()}function No(e){return e.b.set(Mf,"pending",e.a)}function Lo(e){return go(e.b,Mf,e.a)}function Fo(e){return e.b.get(Mf,e.a).then(function(e){return"pending"==e})}function Uo(e,t,n,i){this.i={};this.u=0;this.O=e;this.m=t;this.v=n;this.G=i;this.h=[];this.f=!1;this.l=g(this.o,this);this.b=new Yo;this.A=new ra;this.g=new Mo(Qo(this.m,this.v));this.c={};this.c.unknown=this.b;this.c.signInViaRedirect=this.b;this.c.linkViaRedirect=this.b;this.c.reauthViaRedirect=this.b;this.c.signInViaPopup=this.A;this.c.linkViaPopup=this.A;this.c.reauthViaPopup=this.A;this.a=$o(this.O,this.m,this.v,Hl,this.G)}function $o(e,t,n,i,r){var s=Pl.SDK_VERSION||null;return tn()?new Eo(e,t,n,s,i,r):new Cs(e,t,n,s,i,r)}function qo(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.la().s(function(n){e.a==t&&e.reset();throw n})}function Ho(e){e.a.Wb()&&qo(e).s(function(t){var n=new qi("unknown",null,null,null,new v("operation-not-supported-in-this-environment"));Vo(t)&&e.o(n)});e.a.Sb()||Xo(e.b)}function jo(e,t){P(e.h,t)||e.h.push(t);e.f||Fo(e.g).then(function(t){t?Lo(e.g).then(function(){qo(e).s(function(t){var n=new qi("unknown",null,null,null,new v("operation-not-supported-in-this-environment"));Vo(t)&&e.o(n)})}):Ho(e)}).s(function(){Ho(e)})}function Bo(e,t){D(e.h,function(e){return e==t})}function Wo(e,t,n,i,r,s,o){return e.a.Lb(t,n,i,function(){e.f||(e.f=!0,e.a.Ea(e.l))},function(){e.reset()},r,s,o)}function Vo(e){return e&&"auth/cordova-not-ready"==e.code?!0:!1}function zo(e,t,n,i,r){var s;return No(e.g).then(function(){return e.a.Mb(t,n,i,r).s(function(t){if(Vo(t))throw new v("operation-not-supported-in-this-environment");s=t;return Lo(e.g).then(function(){throw s})}).then(function(){return e.a.Zb()?new ke(function(){}):Lo(e.g).then(function(){return e.qa()}).then(function(){}).s(function(){})})})}function Go(e,t,n,i,r){return e.a.Nb(i,function(e){t.ma(n,null,e,r)},Nf.get())}function Qo(e,t,n){e=e+":"+t;n&&(e=e+":"+n.url);return e}function Ko(e,t,n,i){var r=Qo(t,n,i);Ff[r]||(Ff[r]=new Uo(e,t,n,i));return Ff[r]}function Yo(){this.b=null;this.f=[];this.c=[];this.a=null;this.i=this.g=!1}function Xo(e){e.g||(e.g=!0,na(e,!1,null,null))}function Jo(e){e.g&&!e.i&&na(e,!1,null,null)}function Zo(e,t,n){n=n.Fa(t.c,t.b);var i=t.g,r=t.f,s=t.i,o=t.S(),a=!!t.c.match(/Redirect$/);n(i,r,o,s).then(function(t){na(e,a,t,null)}).s(function(t){na(e,a,null,t)})}function ea(e,t){e.b=function(){return Ce(t)};if(e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function ta(e,t){e.b=function(){return we(t)};if(e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function na(e,t,n,i){t?i?ea(e,i):ta(e,n):ta(e,{user:null});e.f=[];e.c=[]}function ia(e){var t=new v("timeout");e.a&&e.a.cancel();e.a=ht(Lf.get()).then(function(){e.b||(e.g=!0,na(e,!0,null,t))})}function ra(){}function sa(e,t){var n=e.b,i=e.c;t.Fa(i,n)(e.g,e.f,e.S(),e.i).then(function(e){t.ma(i,e,null,n)}).s(function(e){t.ma(i,null,e,n)})}function oa(){this.hb=!1;Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(e){this.hb=e},enumerable:!1})}function aa(e,t){this.a=t;Rn(this,"verificationId",e)}function ca(e,t,n,i){return new Li(e).eb(t,n).then(function(e){return new aa(e,i)})}function la(e){var t=Jn(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new v("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Dn(this,{token:e,expirationTime:In(1e3*t.exp),authTime:In(1e3*t.auth_time),issuedAtTime:In(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function ua(e,t,n){var i=t&&t[$f];if(!i)throw new v("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e;this.f=H(t);this.g=n;this.c=new ci(null,i);this.b=[];var r=this;Ql(t[Uf]||[],function(e){(e=$n(e))&&r.b.push(e)});Rn(this,"auth",this.a);Rn(this,"session",this.c);Rn(this,"hints",this.b)}function da(e,t,n,i){v.call(this,"multi-factor-auth-required",i,t);this.b=new ua(e,t,n);Rn(this,"resolver",this.b)}function ha(e,t,n){if(e&&u(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new da(t,e.serverResponse,n,e.message)}catch(i){}return null}function fa(){}function ga(e,t,n,i){return n.Ha().then(function(n){n={idToken:n};"undefined"!=typeof i&&(n.displayName=i);j(n,{phoneVerificationInfo:Ni(e.a)});return fs(t,qh,n)})}function pa(e,t,n){return n.Ha().then(function(n){n={mfaPendingCredential:n};j(n,{phoneVerificationInfo:Ni(e.a)});return fs(t,Hh,n)})}function ma(e){Rn(this,"factorId",e.fa);this.a=e}function va(e){ma.call(this,e);if(this.a.fa!=Li.PROVIDER_ID)throw new v("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function _a(e,t){je.call(this,e);for(var n in t)this[n]=t[n]}function ya(e,t){this.a=e;this.b=[];this.c=g(this.xc,this);Ke(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&Ql(t.multiFactor.enrolledFactors,function(e){var t=null,i={};if(e){e.uid&&(i[Sd]=e.uid);e.displayName&&(i[kd]=e.displayName);e.enrollmentTime&&(i[bd]=new Date(e.enrollmentTime).toISOString());e.phoneNumber&&(i[wd]=e.phoneNumber);try{t=new qn(i)}catch(r){}e=t}else e=null;e&&n.push(e)});ba(this,n)}function ka(e){var t=[];Ql(e.mfaInfo||[],function(e){(e=$n(e))&&t.push(e)});return t}function ba(e,t){e.b=t;Rn(e,"enrolledFactors",t)}function Sa(e,t,n){this.h=e;this.i=t;this.g=n;this.c=3e4;this.f=96e4;this.b=null;this.a=this.c;if(this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function wa(e,t){if(t)return e.a=e.c,e.g();t=e.a;e.a*=2;e.a>e.f&&(e.a=e.f);return t}function Ca(e,t){e.stop();e.b=ht(wa(e,t)).then(function(){return En()}).then(function(){return e.h()}).then(function(){Ca(e,!0)}).s(function(t){e.i(t)&&Ca(e,!1)})}function Ea(e){this.c=e;this.b=this.a=null}function Ta(e){return e.b&&1e3*e.b.c||0}function Ia(e,t){var n=t.refreshToken;e.b=Xn(t[Ch]||"");e.a=n}function Aa(e,t){e.b=t.b;e.a=t.a}function xa(e,t){return Gr(e.c,t).then(function(t){e.b=Xn(t.access_token);e.a=t.refresh_token;return{accessToken:e.b.toString(),refreshToken:e.a}}).s(function(t){"auth/user-token-expired"==t.code&&(e.a=null);throw t})}function Oa(e,t){this.a=e||null;this.b=t||null;Dn(this,{lastSignInTime:In(t||null),creationTime:In(e||null)})}function Pa(e){return new Oa(e.a,e.b)}function Ra(e,t,n,i,r,s){Dn(this,{uid:e,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:s||null,providerId:t})}function Da(e,t,n){this.G=[];this.l=e.apiKey;this.m=e.appName;this.o=e.authDomain||null;var i=Pl.SDK_VERSION?ln(Pl.SDK_VERSION):null;
this.a=new qr(this.l,y(Hl),i);e.emulatorConfig&&jr(this.a,e.emulatorConfig);this.b=new Ea(this.a);ja(this,t[Ch]);Ia(this.b,t);Rn(this,"refreshToken",this.b.a);za(this,n||{});at.call(this);this.P=!1;this.o&&fn()&&(this.i=Ko(this.o,this.l,this.m));this.R=[];this.f=null;this.u=$a(this);this.$=g(this.gb,this);var r=this;this.pa=null;this.Ba=function(e){r.wa(e.h)};this.ba=null;this.za=function(e){jr(r.a,e.c)};this.W=null;this.X=[];this.Aa=function(e){La(r,e.f)};this.aa=null;this.N=new ya(this,n);Rn(this,"multiFactor",this.N)}function Ma(e,t){e.ba&&Ze(e.ba,"languageCodeChanged",e.Ba);(e.ba=t)&&Ke(t,"languageCodeChanged",e.Ba)}function Na(e,t){e.W&&Ze(e.W,"emulatorConfigChanged",e.za);(e.W=t)&&Ke(t,"emulatorConfigChanged",e.za)}function La(e,t){e.X=t;Wr(e.a,Pl.SDK_VERSION?ln(Pl.SDK_VERSION,e.X):null)}function Fa(e,t){e.aa&&Ze(e.aa,"frameworkChanged",e.Aa);(e.aa=t)&&Ke(t,"frameworkChanged",e.Aa)}function Ua(e){try{return Pl.app(e.m).auth()}catch(t){throw new v("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function $a(e){return new Sa(function(){return e.I(!0)},function(e){return e&&"auth/network-request-failed"==e.code?!0:!1},function(){var t=Ta(e.b)-ql()-3e5;return t>0?t:0})}function qa(e){e.A||e.u.b||(e.u.start(),Ze(e,"tokenChanged",e.$),Ke(e,"tokenChanged",e.$))}function Ha(e){Ze(e,"tokenChanged",e.$);e.u.stop()}function ja(e,t){e.ya=t;Rn(e,"_lat",t)}function Ba(e,t){D(e.R,function(e){return e==t})}function Wa(e){for(var t=[],n=0;n<e.R.length;n++)t.push(e.R[n](e));return Ie(t).then(function(){return e})}function Va(e){e.i&&!e.P&&(e.P=!0,jo(e.i,e))}function za(e,t){Dn(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Oa(t.createdAt,t.lastLoginAt),providerData:[]});e.a.b=e.tenantId}function Ga(){}function Qa(e){return we().then(function(){if(e.A)throw new v("app-deleted")})}function Ka(e){return Yl(e.providerData,function(e){return e.providerId})}function Ya(e,t){t&&(Xa(e,t.providerId),e.providerData.push(t))}function Xa(e,t){D(e.providerData,function(e){return e.providerId==t})}function Ja(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Rn(e,t,n)}function Za(e,t){e!=t&&(Dn(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Rn(e,"metadata",Pa(t.metadata)):Rn(e,"metadata",new Oa),Ql(t.providerData,function(t){Ya(e,t)}),Aa(e.b,t.b),Rn(e,"refreshToken",e.b.a),ba(e.N,t.N.b))}function ec(e){return e.I().then(function(t){var n=e.isAnonymous;return nc(e,t).then(function(){n||Ja(e,"isAnonymous",!1);return t})})}function tc(e,t){t[Ch]&&e.ya!=t[Ch]&&(Ia(e.b,t),e.dispatchEvent(new _a("tokenChanged")),ja(e,t[Ch]),Ja(e,"refreshToken",e.b.a))}function nc(e,t){return fs(e.a,jh,{idToken:t}).then(g(e.Jc,e))}function ic(e){return(e=e.providerUserInfo)&&e.length?Yl(e,function(e){return new Ra(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}function rc(e,t){return ec(e).then(function(){return P(Ka(e),t)?Wa(e).then(function(){throw new v("provider-already-linked")}):void 0})}function sc(e,t,n){var i=Ui(t);t=ei(t);return Mn({user:e,credential:i,additionalUserInfo:t,operationType:n})}function oc(e,t){tc(e,t);return e.reload().then(function(){return e})}function ac(e,t,n,i,r){if(!fn())return Ce(new v("operation-not-supported-in-this-environment"));if(e.f&&!r)return Ce(e.f);var s=Zn(n.providerId),o=kn(e.uid+":::"),a=null;(!mn()||nn())&&e.o&&n.isOAuthProvider&&(a=As(e.o,e.l,e.m,t,n,null,o,Pl.SDK_VERSION||null,null,null,e.tenantId));var c=Xt(a,s&&s.ua,s&&s.ta);i=i().then(function(){lc(e);return r?void 0:e.I().then(function(){})}).then(function(){return Wo(e.i,c,t,n,o,!!a,e.tenantId)}).then(function(){return new ke(function(n,i){e.ma(t,null,new v("cancelled-popup-request"),e.h||null);e.g=n;e.O=i;e.h=o;e.c=Go(e.i,e,t,c,o)})}).then(function(e){c&&Yt(c);return e?Mn(e):null}).s(function(e){c&&Yt(c);throw e});return uc(e,i,r)}function cc(e,t,n,i,r){if(!fn())return Ce(new v("operation-not-supported-in-this-environment"));if(e.f&&!r)return Ce(e.f);var s=null,o=kn(e.uid+":::");i=i().then(function(){lc(e);return r?void 0:e.I().then(function(){})}).then(function(){e.ga=o;return Wa(e)}).then(function(t){e.ha&&(t=e.ha,t=t.b.set(qf,e.w(),t.a));return t}).then(function(){return zo(e.i,t,n,o,e.tenantId)}).s(function(t){s=t;if(e.ha)return mc(e.ha);throw s}).then(function(){if(s)throw s});return uc(e,i,r)}function lc(e){if(!e.i||!e.P){if(e.i&&!e.P)throw new v("internal-error");throw new v("auth-domain-config-required")}}function uc(e,t,n){var i=dc(e,t,n);e.G.push(i);i.na(function(){R(e.G,i)});return i.s(function(t){var n=null;t&&"auth/multi-factor-auth-required"===t.code&&(n=ha(t.w(),Ua(e),g(e.ic,e)));throw n||t})}function dc(e,t,n){return e.f&&!n?(t.cancel(),Ce(e.f)):t.s(function(t){!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.f||e.dispatchEvent(new _a("userInvalidated")),e.f=t);throw t})}function hc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Ch]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var i=new Da(t,n,e);e.providerData&&Ql(e.providerData,function(e){e&&Ya(i,Mn(e))});e.redirectEventId&&(i.ga=e.redirectEventId);return i}function fc(e,t,n,i){var r=new Da(e,t);n&&(r.ha=n);i&&La(r,i);return r.reload().then(function(){return r})}function gc(e,t,n,i){var r=e.b,s={};s[Ch]=r.b&&r.b.toString();s.refreshToken=r.a;t=new Da(t||{apiKey:e.l,authDomain:e.o,appName:e.m},s);n&&(t.ha=n);i&&La(t,i);Za(t,e);return t}function pc(e){this.a=e;this.b=lo()}function mc(e){return go(e.b,qf,e.a)}function vc(e,t){return e.b.get(qf,e.a).then(function(e){e&&t&&(e.authDomain=t);return hc(e||{})})}function _c(e){this.a=e;this.b=lo();this.c=null;this.f=kc(this);this.b.addListener(bc("local"),this.a,g(this.g,this))}function yc(e,t){var n,i=[];for(n in Cf)Cf[n]!==t&&i.push(go(e.b,bc(Cf[n]),e.a));i.push(go(e.b,Hf,e.a));return Te(i)}function kc(e){var t=bc("local"),n=bc("session"),i=bc("none");return fo(e.b,t,e.a).then(function(){return e.b.get(n,e.a)}).then(function(r){return r?n:e.b.get(i,e.a).then(function(n){return n?i:e.b.get(t,e.a).then(function(n){return n?t:e.b.get(Hf,e.a).then(function(e){return e?bc(e):t})})})}).then(function(t){e.c=t;return yc(e,t.D)}).s(function(){e.c||(e.c=t)})}function bc(e){return{name:"authUser",D:e}}function Sc(e){return Tc(e,function(){return e.b.set(Hf,e.c.D,e.a)})}function wc(e,t){return Tc(e,function(){return e.b.set(e.c,t.w(),e.a)})}function Cc(e){return Tc(e,function(){return go(e.b,e.c,e.a)})}function Ec(e,t,n){return Tc(e,function(){return e.b.get(e.c,e.a).then(function(e){e&&t&&(e.authDomain=t);e&&n&&(e.emulatorConfig=n);return hc(e||{})})})}function Tc(e,t){e.f=e.f.then(t,t);return e.f}function Ic(e){this.m=!1;Rn(this,"settings",new oa);Rn(this,"app",e);if(!jc(this).options||!jc(this).options.apiKey)throw new v("invalid-api-key");e=Pl.SDK_VERSION?ln(Pl.SDK_VERSION):null,this.a=new qr(jc(this).options&&jc(this).options.apiKey,y(Hl),e);this.R=[];this.u=[];this.P=[];this.ac=Pl.INTERNAL.createSubscribe(g(this.yc,this));this.X=void 0;this.bc=Pl.INTERNAL.createSubscribe(g(this.zc,this));Fc(this,null);this.l=new _c(jc(this).options.apiKey+":"+jc(this).name);this.G=new pc(jc(this).options.apiKey+":"+jc(this).name);this.$=Gc(this,$c(this));this.i=Gc(this,qc(this));this.ba=!1;this.pa=g(this.Yc,this);this.Ba=g(this.da,this);this.ya=g(this.kc,this);this.za=g(this.vc,this);this.Aa=g(this.wc,this);this.b=null;Mc(this);this.INTERNAL={};this.INTERNAL["delete"]=g(this["delete"],this);this.INTERNAL.logFramework=g(this.Fc,this);this.A=0;at.call(this);Rc(this);this.N=[];this.f=null}function Ac(e){je.call(this,"languageCodeChanged");this.h=e}function xc(e){je.call(this,"emulatorConfigChanged");this.c=e}function Oc(e){je.call(this,"frameworkChanged");this.f=e}function Pc(){Tn("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");Nl.document&&Zt().then(function(){var e=Nl.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.";e.style.position="fixed";e.style.width="100%";e.style.backgroundColor="#ffffff";e.style.border=".1em solid #000000";e.style.color="#ff0000";e.style.bottom="0px";e.style.left="0px";e.style.margin="0px";e.style.zIndex=1e4;e.style.textAlign="center";e.classList.add("firebase-emulator-warning");Nl.document.body.appendChild(e)})}function Rc(e){Object.defineProperty(e,"lc",{get:function(){return this.ka()},set:function(e){this.wa(e)},enumerable:!1});e.aa=null;Object.defineProperty(e,"ti",{get:function(){return this.S()},set:function(e){this.xb(e)},enumerable:!1});e.W=null}function Dc(e){return e.gb||Ce(new v("auth-domain-config-required"))}function Mc(e){var t=jc(e).options.authDomain,n=jc(e).options.apiKey;t&&fn()&&(e.gb=e.$.then(function(){if(!e.m){e.b=Ko(t,n,jc(e).name,e.f);jo(e.b,e);Bc(e)&&Va(Bc(e));if(e.o){Va(e.o);var i=e.o;i.wa(e.ka());Ma(i,e);i=e.o;La(i,e.N);Fa(i,e);i=e.o;jr(i.a,e.f);Na(i,e);e.o=null}return e.b}}))}function Nc(e){if(!fn())return Ce(new v("operation-not-supported-in-this-environment"));var t=Dc(e).then(function(){return e.b.qa()}).then(function(e){return e?Mn(e):null});return Gc(e,t)}function Lc(e,t){var n={};n.apiKey=jc(e).options.apiKey;n.authDomain=jc(e).options.authDomain;n.appName=jc(e).name;e.f&&(n.emulatorConfig=e.f);return e.$.then(function(){return fc(n,t,e.G,e.Ga())}).then(function(t){if(Bc(e)&&t.uid==Bc(e).uid)return Za(Bc(e),t),e.da(t);Fc(e,t);Va(t);return e.da(t)}).then(function(){Vc(e)})}function Fc(e,t){Bc(e)&&(Ba(Bc(e),e.Ba),Ze(Bc(e),"tokenChanged",e.ya),Ze(Bc(e),"userDeleted",e.za),Ze(Bc(e),"userInvalidated",e.Aa),Ha(Bc(e)));t&&(t.R.push(e.Ba),Ke(t,"tokenChanged",e.ya),Ke(t,"userDeleted",e.za),Ke(t,"userInvalidated",e.Aa),0<e.A&&qa(t));Rn(e,"currentUser",t);t&&(t.wa(e.ka()),Ma(t,e),La(t,e.N),Fa(t,e),jr(t.a,e.f),Na(t,e))}function Uc(e){var t=vc(e.G,jc(e).options.authDomain).then(function(t){(e.o=t)&&(t.ha=e.G);return mc(e.G)});return Gc(e,t)}function $c(e){var t=jc(e).options.authDomain,n=Uc(e).then(function(){return Ec(e.l,t,e.f)}).then(function(t){return t?(t.ha=e.G,e.o&&(e.o.ga||null)==(t.ga||null)?t:t.reload().then(function(){return wc(e.l,t).then(function(){return t})}).s(function(n){return"auth/network-request-failed"==n.code?t:Cc(e.l)})):null}).then(function(t){Fc(e,t||null)});return Gc(e,n)}function qc(e){return e.$.then(function(){return Nc(e)}).s(function(){}).then(function(){return e.m?void 0:e.pa()}).s(function(){}).then(function(){if(!e.m){e.ba=!0;var t=e.l;t.b.addListener(bc("local"),t.a,e.pa)}})}function Hc(e,t){var n=null,i=null;return Gc(e,t.then(function(t){n=Ui(t);i=ei(t);return Lc(e,t)},function(t){var n=null;t&&"auth/multi-factor-auth-required"===t.code&&(n=ha(t.w(),e,g(e.jc,e)));throw n||t}).then(function(){return Mn({user:Bc(e),credential:n,additionalUserInfo:i,operationType:"signIn"})}))}function jc(e){return e.app}function Bc(e){return e.currentUser}function Wc(e){return Bc(e)&&Bc(e)._lat||null}function Vc(e){if(e.ba){for(var t=0;t<e.u.length;t++)e.u[t]&&e.u[t](Wc(e));if(e.X!==e.getUid()&&e.P.length)for(e.X=e.getUid(),t=0;t<e.P.length;t++)e.P[t]&&e.P[t](Wc(e))}}function zc(e,t){e.P.push(t);Gc(e,e.i.then(function(){!e.m&&P(e.P,t)&&e.X!==e.getUid()&&(e.X=e.getUid(),t(Wc(e)))}))}function Gc(e,t){e.R.push(t);t.na(function(){R(e.R,t)});return t}function Qc(){}function Kc(){this.a={};this.b=1e12}function Yc(e,t){return(t=Xc(t))?e.a[t]||null:null}function Xc(e){return(e="undefined"==typeof e?1e12:e)?e.toString():null}function Jc(e,t){this.g=!1;this.c=t;this.a=this.b=null;this.h="invisible"!==this.c.size;this.f=le(e);var n=this;this.i=function(){n.execute()};this.h?this.execute():Ke(this.f,"click",this.i)}function Zc(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function el(){}function tl(){}function nl(){this.b=Nl.grecaptcha?1/0:0;this.f=null;this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function il(e,t,n,i,r,s,o){Rn(this,"type","recaptcha");this.c=this.f=null;this.A=!1;this.m=t;this.g=null;o?(Bf||(Bf=new tl),o=Bf):(zf||(zf=new nl),o=zf);this.v=o;this.a=n||{theme:"light",type:"image"};this.h=[];if(this.a[Kf])throw new v("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");this.i="invisible"===this.a[Yf];if(!Nl.document)throw new v("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(t)||!this.i&&le(t).hasChildNodes())throw new v("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new qr(e,s||null,r||null);this.u=i||function(){return null};var a=this;this.l=[];var c=this.a[Gf];this.a[Gf]=function(e){rl(a,e);if("function"==typeof c)c(e);else if("string"==typeof c){var t=dn(c,Nl);"function"==typeof t&&t(e)}};var l=this.a[Qf];this.a[Qf]=function(){rl(a,null);if("function"==typeof l)l();else if("string"==typeof l){var e=dn(l,Nl);"function"==typeof e&&e()}}}function rl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(i){}}function sl(e,t){D(e.l,function(e){return e==t})}function ol(e,t){e.h.push(t);t.na(function(){R(e.h,t)});return t}function al(e){if(e.A)throw new v("internal-error","RecaptchaVerifier instance has been destroyed.")}function cl(e,t,n){var i=!1;try{this.b=n||Pl.app()}catch(r){throw new v("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new v("invalid-api-key");n=this.b.options.apiKey;var s=this,o=null;try{o=this.b.auth().Ga()}catch(r){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(r){}o=Pl.SDK_VERSION?ln(Pl.SDK_VERSION,o):null;il.call(this,n,e,t,function(){try{var e=s.b.auth().ka()}catch(t){e=null}return e},o,y(Hl),i)}function ll(e,t,n,i){e:{n=Array.prototype.slice.call(n);for(var r=0,s=!1,o=0;o<t.length;o++)if(t[o].optional)s=!0;else{if(s)throw new v("internal-error","Argument validator encountered a required argument after an optional argument.");r++}s=t.length;if(n.length<r||s<n.length)i="Expected "+(r==s?1==r?"1 argument":r+" arguments":r+"-"+s+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(s=t[r].optional&&void 0===n[r],!t[r].K(n[r])&&!s){t=t[r];if(0>r||r>=Xf.length)throw new v("internal-error","Argument validator received an unsupported number of arguments.");n=Xf[r];i=(i?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.J+".";break e}i=null}}if(i)throw new v("argument-error",e+" failed: "+i)}function ul(e,t){return{name:e||"",J:"a valid string",optional:!!t,K:function(e){return"string"==typeof e}}}function dl(e,t){return{name:e||"",J:"a boolean",optional:!!t,K:function(e){return"boolean"==typeof e}}}function hl(e,t){return{name:e||"",J:"a valid object",optional:!!t,K:u}}function fl(e,t){return{name:e||"",J:"a function",optional:!!t,K:function(e){return"function"==typeof e}}}function gl(e,t){return{name:e||"",J:"null",optional:!!t,K:function(e){return null===e}}}function pl(){return{name:"",J:"an HTML element",optional:!1,K:function(e){return!!(e&&e instanceof Element)}}}function ml(){return{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(e){return!!(e&&e instanceof Ic)}}}function vl(){return{name:"app",J:"an instance of Firebase App",optional:!0,K:function(e){return!!(e&&e instanceof Pl.app.App)}}}function _l(e){return{name:e?e+"Credential":"credential",J:e?"a valid "+e+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ja||!n)}}}function yl(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(e){return e?!!e.rb:!1}}}function kl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function bl(e,t){return u(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function Sl(e){return u(e)&&"string"==typeof e.uid}function wl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}}function Cl(e,t,n,i){return{name:n||"",J:e.J+" or "+t.J,optional:!!i,K:function(n){return e.K(n)||t.K(n)}}}function El(e,t){for(var n in t){var i=t[n].name;e[i]=Al(i,e[n],t[n].j)}}function Tl(e,t){for(var n in t){var i=t[n].name;i!==n&&Object.defineProperty(e,i,{get:p(function(e){return this[e]},n),set:p(function(e,t,n,i){ll(e,[n],[i],!0);this[t]=i},i,n,t[n].jb),enumerable:!0})}}function Il(e,t,n,i){e[t]=Al(t,n,i)}function Al(e,t,n){function i(){var e=Array.prototype.slice.call(arguments);ll(s,n,e);return t.apply(this,e)}if(!n)return t;var r,s=xl(e);for(r in t)i[r]=t[r];for(r in t.prototype)i.prototype[r]=t.prototype[r];return i}function xl(e){e=e.split(".");return e[e.length-1]}var Ol,Pl=n(6)["default"],Rl="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},Dl=t(this);i("Promise",function(e){function t(e){this.b=0;this.c=void 0;this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var r=Dl.setTimeout;n.prototype.c=function(e){r(e,0)};n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(i){this.f(i)}}}this.a=null};n.prototype.f=function(e){this.c(function(){throw e})};t.prototype.f=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.v),reject:e(this.g)}};t.prototype.v=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.m(e):this.h(e)}};t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(n){this.g(n);return}"function"==typeof t?this.u(t,e):this.h(e)};t.prototype.g=function(e){this.i(2,e)};t.prototype.h=function(e){this.i(1,e)};t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e;this.c=t;this.l()};t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;t.prototype.o=function(e){var t=this.f();e.Pa(t.resolve,t.reject)};t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(i){n.reject(i)}};t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(n){s(n)}}:t}var r,s,o=new t(function(e,t){r=e;s=t});this.Pa(i(e,r),i(n,s));return o};t.prototype["catch"]=function(e){return this.then(void 0,e)};t.prototype.Pa=function(e,t){function n(){switch(i.b){case 1:e(i.c);break;case 2:t(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?o.b(n):this.a.push(n)};t.resolve=i;t.reject=function(e){return new t(function(t,n){n(e)})};t.race=function(e){return new t(function(t,n){for(var r=s(e),o=r.next();!o.done;o=r.next())i(o.value).Pa(t,n)})};t.all=function(e){var n=s(e),r=n.next();return r.done?i([]):new t(function(e,t){function s(t){return function(n){o[t]=n;a--;0==a&&e(o)}}var o=[],a=0;do o.push(void 0),a++,i(r.value).Pa(s(o.length-1),t),r=n.next();while(!r.done)})};return t});var Ml=Ml||{},Nl=this||self,Ll=/^[\w+\/_-]+[=]{0,2}$/,Fl=null,Ul="closure_uid_"+(1e9*Math.random()>>>0),$l=0,ql=Date.now||function(){return+new Date};m(v,Error);v.prototype.w=function(){var e={code:this.code,message:this.message};this.a&&(e.serverResponse=this.a);return e};v.prototype.toJSON=function(){return this.w()};var Hl,jl="auth/",Bl={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Wl={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};Hl=y("__EID__")?"__EID__":void 0;m(b,Error);b.prototype.name="CustomError";m(S,b);S.prototype.name="AssertionError";C.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next;e.next=null}else e=this.c();return e};var Vl=new C(function(){return new A},function(e){e.reset()});T.prototype.add=function(e,t){var n=Vl.get();n.set(e,t);this.b?this.b.next=n:this.a=n;this.b=n};A.prototype.set=function(e,t){this.a=e;this.b=t;this.next=null};A.prototype.reset=function(){this.next=this.b=this.a=null};var zl,Gl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ql=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,r="string"==typeof e?e.split(""):e,s=0;i>s;s++)s in r&&t.call(n,r[s],s,e);
},Kl=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=[],r=0,s="string"==typeof e?e.split(""):e,o=0;n>o;o++)if(o in s){var a=s[o];t.call(void 0,a,o,e)&&(i[r++]=a)}return i},Yl=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=Array(n),r="string"==typeof e?e.split(""):e,s=0;n>s;s++)s in r&&(i[s]=t.call(void 0,r[s],s,e));return i},Xl=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,i="string"==typeof e?e.split(""):e,r=0;n>r;r++)if(r in i&&t.call(void 0,i[r],r,e))return!0;return!1},Jl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},Zl=/&/g,eu=/</g,tu=/>/g,nu=/"/g,iu=/'/g,ru=/\x00/g,su=/[\x00&<>"']/;e:{var ou=Nl.navigator;if(ou){var au=ou.userAgent;if(au){zl=au;break e}}zl=""}var cu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");W.prototype.sa=!0;W.prototype.ra=function(){return this.a};W.prototype.toString=function(){return"Const{"+this.a+"}"};var lu={},uu={},du=new W(uu,"");z.prototype.sa=!0;z.prototype.ra=function(){return this.a.toString()};z.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var hu=/%{(\w+)}/g,fu=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,gu={},pu={};K.prototype.sa=!0;K.prototype.ra=function(){return this.a.toString()};K.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var mu=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,vu={},_u={};J.prototype.sa=!0;J.prototype.ra=function(){return this.a.toString()};J.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var yu={};ee("<!DOCTYPE html>");var ku=ee("");ee("<br>");se[" "]=o;var bu,Su=U("Opera"),wu=U("Trident")||U("MSIE"),Cu=U("Edge"),Eu=Cu||wu,Tu=U("Gecko")&&!(L(zl.toLowerCase(),"webkit")&&!U("Edge"))&&!(U("Trident")||U("MSIE"))&&!U("Edge"),Iu=L(zl.toLowerCase(),"webkit")&&!U("Edge");e:{var Au="",xu=function(){var e=zl;return Tu?/rv:([^\);]+)(\)|;)/.exec(e):Cu?/Edge\/([\d\.]+)/.exec(e):wu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Iu?/WebKit\/(\S+)/.exec(e):Su?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();xu&&(Au=xu?xu[1]:"");if(wu){var Ou=ae();if(null!=Ou&&Ou>parseFloat(Au)){bu=String(Ou);break e}}bu=Au}var Pu,Ru={};Pu=Nl.document&&wu?ae():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Du){}var Mu,Nu,Lu=!wu||9<=Number(Pu),Fu={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Uu=!1,$u=new T,qu=0,Hu=2,ju=3;be.prototype.reset=function(){this.f=this.b=this.g=this.a=null;this.c=!1};var Bu=new C(function(){return new be},function(e){e.reset()});ke.prototype.then=function(e,t,n){return Oe(this,l(e)?e:null,l(t)?t:null,n)};ke.prototype.$goog_Thenable=!0;Ol=ke.prototype;Ol.na=function(e,t){e=Se(e,e,t);e.c=!0;xe(this,e);return this};Ol.s=function(e,t){return Oe(this,null,e,t)};Ol.cancel=function(e){if(this.a==qu){var t=new $e(e);ve(function(){Ae(this,t)},this)}};Ol.Zc=function(e){this.a=qu;Pe(this,Hu,e)};Ol.$c=function(e){this.a=qu;Pe(this,ju,e)};Ol.fc=function(){for(var e;e=Ne(this);)Le(this,e,this.a,this.i);this.h=!1};var Wu=pe;m($e,b);$e.prototype.name="cancel";var Vu=0,zu={};qe.prototype.xa=!1;qe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Gu=Object.freeze||function(e){return e},Qu=!wu||9<=Number(Pu),Ku=wu&&!ce("9"),Yu=function(){if(!Nl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Nl.addEventListener("test",o,t),Nl.removeEventListener("test",o,t)}catch(n){}return e}();je.prototype.preventDefault=function(){this.defaultPrevented=!0};m(Be,je);var Xu=Gu({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.$a.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ku)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};Be.prototype.g=function(){return this.a};var Ju="closure_listenable_"+(1e6*Math.random()|0),Zu=0;ze.prototype.add=function(e,t,n,i,r){var s=e.toString();e=this.a[s];e||(e=this.a[s]=[],this.b++);var o=Qe(e,t,i,r);o>-1?(t=e[o],n||(t.Oa=!1)):(t=new We(t,this.src,s,!!i,r),t.Oa=n,e.push(t));return t};var ed="closure_lm_"+(1e6*Math.random()|0),td={},nd=0,id="__closure_events_fn_"+(1e9*Math.random()>>>0);m(at,qe);at.prototype[Ju]=!0;at.prototype.addEventListener=function(e,t,n,i){Ke(this,e,t,n,i)};at.prototype.removeEventListener=function(e,t,n,i){Ze(this,e,t,n,i)};at.prototype.dispatchEvent=function(e){var t,n=this.fb;if(n)for(t=[];n;n=n.fb)t.push(n);n=this.$b;var i=e.type||e;if("string"==typeof e)e=new je(e,n);else if(e instanceof je)e.target=e.target||n;else{var r=e;e=new je(i,n);j(e,r)}r=!0;if(t)for(var s=t.length-1;s>=0;s--){var o=e.b=t[s];r=ut(o,i,!0,e)&&r}o=e.b=n;r=ut(o,i,!0,e)&&r;r=ut(o,i,!1,e)&&r;if(t)for(s=0;s<t.length;s++)o=e.b=t[s],r=ut(o,i,!1,e)&&r;return r};at.prototype.Da=function(){at.$a.Da.call(this);if(this.v){var e,t=this.v,n=0;for(e in t.a){for(var i=t.a[e],r=0;r<i.length;r++)++n,Ve(i[r]);delete t.a[e];t.b--}}this.fb=null};Ol=mt.prototype;Ol.V=function(){vt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e};Ol.Y=function(){vt(this);return this.a.concat()};Ol.clear=function(){this.b={};this.c=this.a.length=0};Ol.get=function(e,t){return _t(this.b,e)?this.b[e]:t};Ol.set=function(e,t){_t(this.b,e)||(this.c++,this.a.push(e));this.b[e]=t};Ol.forEach=function(e,t){for(var n=this.Y(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);e.call(t,s,r,this)}};var rd=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;kt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(xt(t,sd,!0),":");var n=this.a;(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(xt(t,sd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&e.push(":",String(n)));(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(xt(n,"/"==n.charAt(0)?ad:od,!0)));(n=this.b.toString())&&e.push("?",n);(n=this.h)&&e.push("#",xt(n,ld));return e.join("")};kt.prototype.resolve=function(e){var t=new kt(this),n=!!e.f;n?bt(t,e.f):n=!!e.l;n?t.l=e.l:n=!!e.a;n?t.a=e.a:n=null!=e.g;var i=e.c;if(n)St(t,e.g);else if(n=!!e.c){if("/"!=i.charAt(0))if(this.a&&!this.c)i="/"+i;else{var r=t.c.lastIndexOf("/");-1!=r&&(i=t.c.substr(0,r+1)+i)}r=i;if(".."==r||"."==r)i="";else if(L(r,"./")||L(r,"/.")){i=0==r.lastIndexOf("/",0);r=r.split("/");for(var s=[],o=0;o<r.length;){var a=r[o++];"."==a?i&&o==r.length&&s.push(""):".."==a?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),i&&o==r.length&&s.push("")):(s.push(a),i=!0)}i=s.join("/")}else i=r}n?t.c=i:n=""!==e.b.toString();n?wt(t,Ft(e.b)):n=!!e.h;n&&(t.h=e.h);return t};var sd=/[#\/\?@]/g,od=/[#\?:]/g,ad=/[#\?]/g,cd=/[#\?@]/g,ld=/#/g;Ol=Pt.prototype;Ol.add=function(e,t){Rt(this);this.c=null;e=Ut(this,e);var n=this.a.get(e);n||this.a.set(e,n=[]);n.push(t);this.b+=1;return this};Ol.clear=function(){this.a=this.c=null;this.b=0};Ol.forEach=function(e,t){Rt(this);this.a.forEach(function(n,i){Ql(n,function(n){e.call(t,n,i,this)},this)},this)};Ol.Y=function(){Rt(this);for(var e=this.a.V(),t=this.a.Y(),n=[],i=0;i<t.length;i++)for(var r=e[i],s=0;s<r.length;s++)n.push(t[i]);return n};Ol.V=function(e){Rt(this);var t=[];if("string"==typeof e)Nt(this,e)&&(t=M(t,this.a.get(Ut(this,e))));else{e=this.a.V();for(var n=0;n<e.length;n++)t=M(t,e[n])}return t};Ol.set=function(e,t){Rt(this);this.c=null;e=Ut(this,e);Nt(this,e)&&(this.b-=this.a.get(e).length);this.a.set(e,[t]);this.b+=1;return this};Ol.get=function(e,t){if(!e)return t;e=this.V(e);return 0<e.length?String(e[0]):t};Ol.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.V(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s])));e.push(o)}}return this.c=e.join("&")};var ud={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},dd=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,hd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fd=/^[^@]+@[^@]+$/,gd="Firefox",pd="Chrome",md={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};wn.prototype.get=function(){var e=Nl.navigator;return(e&&"boolean"==typeof e.onLine&&(gn()||"chrome-extension:"===pn()||"undefined"!=typeof e.connection)?e.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var vd,_d={};try{var yd={};Object.defineProperty(yd,"abcd",{configurable:!0,enumerable:!0,value:1});Object.defineProperty(yd,"abcd",{configurable:!0,enumerable:!0,value:2});vd=2==yd.abcd}catch(Du){vd=!1}Un.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var kd="displayName",bd="enrolledAt",Sd="mfaEnrollmentId",wd="phoneInfo";m(qn,Un);qn.prototype.w=function(){var e=qn.$a.w.call(this);e.phoneNumber=this.phoneNumber;return e};var Cd="REVERT_SECOND_FACTOR_ADDITION",Ed="EMAIL_SIGNIN",Td="VERIFY_AND_CHANGE_EMAIL",Id="email",Ad="mfaInfo",xd="newEmail",Od="requestType",Pd="email",Rd="fromEmail",Dd="multiFactorInfo",Md="previousEmail",Nd="data",Ld="operation",Fd="apiKey",Ud="oobCode",$d="continueUrl",qd="languageCode",Hd="mode",jd="tenantId",Bd={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Cd,signIn:Ed,verifyAndChangeEmail:Td,verifyEmail:"VERIFY_EMAIL"},Wd="android",Vd="dynamicLinkDomain",zd="handleCodeInApp",Gd="iOS",Qd="url",Kd="installApp",Yd="minimumVersion",Xd="packageName",Jd="bundleId",Zd=null;Yn.prototype.S=function(){return this.f};Yn.prototype.i=function(){return this.b};Yn.prototype.toString=function(){return this.g};var eh="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),th=["client_id","response_type","scope","redirect_uri","state"],nh={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:th},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:th},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:th},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:eh},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}},ih="idToken",rh="providerId";m(ni,ti);m(ii,ni);m(ri,ni);m(si,ni);m(oi,ni);var sh="enroll",oh="signin";ci.prototype.Ha=function(){return we(this.a?this.a:this.b)};ci.prototype.w=function(){return this.type==sh?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};li.prototype.ja=function(){};li.prototype.b=function(){};li.prototype.c=function(){};li.prototype.w=function(){};di.prototype.ja=function(e){return ls(e,hi(this))};di.prototype.b=function(e,t){var n=hi(this);n.idToken=t;return us(e,n)};di.prototype.c=function(e,t){return ui(ds(e,hi(this)),t)};di.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};gi.prototype.ja=function(e){return ls(e,pi(this))};gi.prototype.b=function(e,t){var n=pi(this);n.idToken=t;return us(e,n)};gi.prototype.c=function(e,t){var n=pi(this);return ui(ds(e,n),t)};gi.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};this.idToken&&(e.oauthIdToken=this.idToken);this.accessToken&&(e.oauthAccessToken=this.accessToken);this.secret&&(e.oauthTokenSecret=this.secret);this.nonce&&(e.nonce=this.nonce);this.a&&(e.pendingToken=this.a);return e};vi.prototype.Ka=function(e){this.Hb=H(e);return this};m(_i,vi);m(yi,vi);yi.prototype.Ca=function(e){P(this.a,e)||this.a.push(e);return this};yi.prototype.Pb=function(){return N(this.a)};yi.prototype.credential=function(e,t){var n;n=u(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null};if(!n.idToken&&!n.accessToken)throw new v("argument-error","credential failed: must provide the ID token and/or the access token.");return new gi(this.providerId,n,this.providerId)};m(ki,yi);Rn(ki,"PROVIDER_ID","facebook.com");Rn(ki,"FACEBOOK_SIGN_IN_METHOD","facebook.com");m(Si,yi);Rn(Si,"PROVIDER_ID","github.com");Rn(Si,"GITHUB_SIGN_IN_METHOD","github.com");m(Ci,yi);Rn(Ci,"PROVIDER_ID","google.com");Rn(Ci,"GOOGLE_SIGN_IN_METHOD","google.com");m(Ti,vi);Rn(Ti,"PROVIDER_ID","twitter.com");Rn(Ti,"TWITTER_SIGN_IN_METHOD","twitter.com");Ai.prototype.ja=function(e){return this.signInMethod==Oi.EMAIL_LINK_SIGN_IN_METHOD?fs(e,Uh,{email:this.a,oobCode:this.f}):fs(e,af,{email:this.a,password:this.f})};Ai.prototype.b=function(e,t){return this.signInMethod==Oi.EMAIL_LINK_SIGN_IN_METHOD?fs(e,$h,{idToken:t,email:this.a,oobCode:this.f}):fs(e,Jh,{idToken:t,email:this.a,password:this.f})};Ai.prototype.c=function(e,t){return ui(this.ja(e),t)};Ai.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};Dn(Oi,{PROVIDER_ID:"password"});Dn(Oi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"});Dn(Oi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});Di.prototype.ja=function(e){return e.eb(Ni(this))};Di.prototype.b=function(e,t){var n=Ni(this);n.idToken=t;return fs(e,lf,n)};Di.prototype.c=function(e,t){var n=Ni(this);n.operation="REAUTH";e=fs(e,uf,n);return ui(e,t)};Di.prototype.w=function(){var e={providerId:"phone"};this.a.cb&&(e.verificationId=this.a.cb);this.a.bb&&(e.verificationCode=this.a.bb);this.a.La&&(e.temporaryProof=this.a.La);this.a.ea&&(e.phoneNumber=this.a.ea);return e};Li.prototype.eb=function(e,t){var n=this.a.a;return we(t.verify()).then(function(i){if("string"!=typeof i)throw new v("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var r,s=u(e)?e.session:null,o=u(e)?e.phoneNumber:e;r=s&&s.type==sh?s.Ha().then(function(e){return ns(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i}})}):s&&s.type==oh?s.Ha().then(function(t){return rs(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:i}})}):ts(n,{phoneNumber:o,recaptchaToken:i});return r.then(function(e){"function"==typeof t.reset&&t.reset();return e},function(e){"function"==typeof t.reset&&t.reset();throw e});default:throw new v("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};Dn(Li,{PROVIDER_ID:"phone"});Dn(Li,{PHONE_SIGN_IN_METHOD:"phone"});qi.prototype.getUid=function(){var e=[];e.push(this.c);this.b&&e.push(this.b);this.f&&e.push(this.f);this.h&&e.push(this.h);return e.join("-")};qi.prototype.S=function(){return this.h};qi.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var ah=null;m(Wi,v);m(Vi,v);Vi.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email);this.phoneNumber&&(e.phoneNumber=this.phoneNumber);this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();t&&j(e,t);return e};Vi.prototype.toJSON=function(){return this.w()};Gi.prototype.c=null;var ch;m(Ki,Gi);Ki.prototype.a=function(){var e=Yi(this);return e?new ActiveXObject(e):new XMLHttpRequest};Ki.prototype.b=function(){var e={};Yi(this)&&(e[0]=!0,e[1]=!0);return e};ch=new Ki;m(Xi,Gi);Xi.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Ji;throw Error("Unsupported browser")};Xi.prototype.b=function(){return{}};Ol=Ji.prototype;Ol.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)};Ol.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()};Ol.abort=function(){this.a.abort()};Ol.setRequestHeader=function(){};Ol.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""};Ol.pc=function(){this.status=200;this.response=this.responseText=this.a.responseText;Zi(this,4)};Ol.Rb=function(){this.status=500;this.response=this.responseText="";Zi(this,4)};Ol.uc=function(){this.Rb()};Ol.qc=function(){this.status=200;Zi(this,1)};Ol.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};er.prototype.a=null;var lh=0;er.prototype.reset=function(e,t,n,i,r){"number"==typeof r||lh++;i||ql();delete this.a};nr.prototype.toString=function(){return this.name};var uh=new nr("SEVERE",1e3),dh=new nr("WARNING",900),hh=new nr("CONFIG",700),fh=new nr("FINE",500);tr.prototype.log=function(e,t,n){if(e.value>=ir(this).value)for(l(t)&&(t=t()),e=new er(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var gh={},ph=null;m(or,Gi);or.prototype.a=function(){return new ar(this.f)};or.prototype.b=function(e){return function(){return e}}({});m(ar,at);var mh=0;Ol=ar.prototype;Ol.open=function(e,t){if(this.readyState!=mh)throw this.abort(),Error("Error reopening a connection");this.m=e;this.g=t;this.readyState=1;ur(this)};Ol.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e);this.o.fetch(new Request(this.g,t)).then(this.tc.bind(this),this.Ta.bind(this))};Ol.abort=function(){this.response=this.responseText="";this.i=new Headers;this.status=0;this.c&&this.c.cancel("Request was aborted.");1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,lr(this,!1));this.readyState=mh};Ol.tc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,ur(this)),this.a&&(this.readyState=3,ur(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):"undefined"!=typeof Nl.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,cr(this)):e.text().then(this.sc.bind(this),this.Ta.bind(this)))))};Ol.oc=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t);e.done?lr(this,!0):ur(this);3==this.readyState&&cr(this)}};Ol.sc=function(e){this.a&&(this.response=this.responseText=e,lr(this,!0))};Ol.rc=function(e){this.a&&(this.response=e,lr(this,!0))};Ol.Ta=function(e){var t=this.h;t&&t.log(dh,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e));this.a&&lr(this,!0)};Ol.setRequestHeader=function(e,t){this.i.append(e,t)};Ol.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(dh,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")};Ol.getAllResponseHeaders=function(){if(!this.b){var e=this.h;e&&e.log(dh,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0);return""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")};m(dr,at);var vh="";dr.prototype.b=rr("goog.net.XhrIo");var _h=/^https?$/i,yh=["POST","PUT"];Ol=dr.prototype;Ol.Ma=function(){"undefined"!=typeof Ml&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",sr(this.b,wr(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};Ol.abort=function(){this.a&&this.c&&(sr(this.b,wr(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_r(this))};Ol.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),_r(this,!0));dr.$a.Da.call(this)};Ol.Ub=function(){this.xa||(this.N||this.i||this.f?vr(this):this.Ic())};Ol.Ic=function(){vr(this)};Ol.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case vh:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;e&&e.log(uh,"Response type "+this.m+" is not supported on this browser",void 0);return null}catch(t){return sr(this.b,"Can not get response: "+t.message),null}};Cr.prototype.cancel=function(e){if(this.a)this.c instanceof Cr&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b;e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.o,this):this.m=!0;this.a||(e=new Rr(this),Tr(this),Er(this,!1,e))}};Cr.prototype.v=function(e,t){this.i=!1;Er(this,e,t)};Cr.prototype.then=function(e,t,n){var i,r,s=new ke(function(e,t){i=e;r=t});Ar(this,i,function(e){e instanceof Rr?s.cancel():r(e)});return s.then(e,t,n)};Cr.prototype.$goog_Thenable=!0;m(Pr,b);Pr.prototype.message="Deferred has already fired";Pr.prototype.name="AlreadyCalledError";m(Rr,b);Rr.prototype.message="Deferred was canceled";Rr.prototype.name="CanceledError";Dr.prototype.c=function(){delete kh[this.a];throw this.b};var kh={},bh=0,Sh=1;m(Ur,b);m($r,Gi);$r.prototype.a=function(){return new this.f};$r.prototype.b=function(){return{}};var wh,Ch="idToken",Eh=new wn(3e4,6e4),Th={"Content-Type":"application/x-www-form-urlencoded"},Ih=new wn(3e4,6e4),Ah={"Content-Type":"application/json"};qr.prototype.S=function(){return this.b};qr.prototype.u=function(e,t,n,i,r,s){if(rn()&&("undefined"==typeof Nl.fetch||"undefined"==typeof Nl.Headers||"undefined"==typeof Nl.Request))throw new v("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var o=new dr(this.f);if(s){o.g=Math.max(0,s);var a=setTimeout(function(){o.dispatchEvent("timeout")},s)}ct(o,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(Sr(this))||null}catch(n){e=null}t&&t(e)});lt(o,"ready",function(){a&&clearTimeout(a);He(this)});lt(o,"timeout",function(){a&&clearTimeout(a);He(this);t&&t(null)});hr(o,e,n,i,r)};var xh=new W(uu,"https://apis.google.com/js/client.js?onload=%{onload}"),Oh="__fcb"+Math.floor(1e6*Math.random()).toString();qr.prototype.o=function(e,t,n,i,r){var s=this;wh.then(function(){window.gapi.client.setApiKey(s.c);var o=window.gapi.auth.getToken();window.gapi.auth.setToken(null);window.gapi.client.request({path:e,method:n,body:i,headers:r,authType:"none",callback:function(e){window.gapi.auth.setToken(o);t&&t(e)}})}).s(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})};qr.prototype.yb=function(){return fs(this,Zh,{})};qr.prototype.Ab=function(e,t){return fs(this,Xh,{idToken:e,email:t})};qr.prototype.Bb=function(e,t){return fs(this,Jh,{idToken:e,password:t})};var Ph={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Ol=qr.prototype;Ol.Cb=function(e,t){var n={idToken:e},i=[];$(Ph,function(e,r){var s=t[r];null===s?i.push(e):r in t&&(n[r]=s)});i.length&&(n.deleteAttribute=i);return fs(this,Xh,n)};Ol.ub=function(e,t){e={requestType:"PASSWORD_RESET",email:e};j(e,t);return fs(this,zh,e)};Ol.vb=function(e,t){e={requestType:"EMAIL_SIGNIN",email:e};j(e,t);return fs(this,Bh,e)};Ol.tb=function(e,t){e={requestType:"VERIFY_EMAIL",idToken:e};j(e,t);return fs(this,Wh,e)};Ol.Db=function(e,t,n){e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t};j(e,n);return fs(this,Vh,e)};Ol.eb=function(e){return fs(this,cf,e)};Ol.mb=function(e,t){return fs(this,Kh,{oobCode:e,newPassword:t})};Ol.Qa=function(e){return fs(this,Dh,{oobCode:e})};Ol.ib=function(e){return fs(this,Rh,{oobCode:e})};var Rh={endpoint:"setAccountInfo",B:hs,Z:"email",C:!0},Dh={endpoint:"resetPassword",B:hs,F:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new v("internal-error")},C:!0},Mh={endpoint:"signupNewUser",B:function(e){Kr(e);if(!e.password)throw new v("weak-password")},F:Zr,U:!0,C:!0},Nh={endpoint:"createAuthUri",C:!0},Lh={endpoint:"deleteAccount",M:["idToken"]},Fh={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(e){if("array"!=a(e.deleteProvider))throw new v("internal-error")}},Uh={endpoint:"emailLinkSignin",M:["email","oobCode"],B:Kr,F:Zr,U:!0,C:!0},$h={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:Kr,F:Zr,U:!0},qh={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:is,F:Zr,C:!0,Na:!0},Hh={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:is,F:Zr,C:!0,Na:!0},jh={endpoint:"getAccountInfo"},Bh={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new v("internal-error");Kr(e)},Z:"email",C:!0},Wh={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new v("internal-error")},Z:"email",C:!0},Vh={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new v("internal-error")},Z:"email",C:!0},zh={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(e){if("PASSWORD_RESET"!=e.requestType)throw new v("internal-error");Kr(e)},Z:"email",C:!0},Gh={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Qh={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(e){if(!e.recaptchaSiteKey)throw new v("internal-error")}},Kh={endpoint:"resetPassword",B:hs,Z:"email",C:!0},Yh={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Xh={endpoint:"setAccountInfo",M:["idToken"],B:Yr,U:!0},Jh={endpoint:"setAccountInfo",M:["idToken"],B:function(e){Yr(e);if(!e.password)throw new v("weak-password")},F:Zr,U:!0},Zh={endpoint:"signupNewUser",F:Zr,U:!0,C:!0},ef={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(e){if(!e.phoneEnrollmentInfo)throw new v("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new v("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new v("missing-app-credential")},F:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new v("internal-error")},C:!0,Na:!0},tf={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new v("missing-app-credential")},F:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new v("internal-error")},C:!0,Na:!0},nf={endpoint:"verifyAssertion",B:os,Xa:as,F:cs,U:!0,C:!0},rf={endpoint:"verifyAssertion",B:os,Xa:as,F:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new v("user-not-found");if(e.errorMessage)throw gs(e.errorMessage);Zr(e)},U:!0,C:!0},sf={endpoint:"verifyAssertion",B:function(e){os(e);if(!e.idToken)throw new v("internal-error")},Xa:as,F:cs,U:!0},of={endpoint:"verifyCustomToken",B:function(e){if(!e.token)throw new v("invalid-custom-token")},F:Zr,U:!0,C:!0},af={endpoint:"verifyPassword",B:function(e){Kr(e);if(!e.password)throw new v("wrong-password")},F:Zr,U:!0,C:!0},cf={endpoint:"verifyPhoneNumber",B:es,F:Zr,C:!0},lf={endpoint:"verifyPhoneNumber",B:function(e){if(!e.idToken)throw new v("internal-error");es(e)},F:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",zi(e);Zr(e)}},uf={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:es,F:Zr,C:!0},df={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(e){if(!!e[Ch]^!!e.refreshToken)throw new v("internal-error")},C:!0,Na:!0},hf=new W(uu,"https://apis.google.com/js/api.js?onload=%{onload}"),ff=new wn(3e4,6e4),gf=new wn(5e3,15e3),pf=null;bs.prototype.toString=function(){this.f?Ct(this.a,"v",this.f):Mt(this.a.b,"v");this.b?Ct(this.a,"eid",this.b):Mt(this.a.b,"eid");this.c.length?Ct(this.a,"fw",this.c.join(",")):Mt(this.a.b,"fw");return this.a.toString()};Ss.prototype.xb=function(e){this.h=e;return this};Ss.prototype.toString=function(){if(this.m){var e=Tt(this.m.url);e=It(e.f,e.a,e.g,"/emulator/auth/handler")}else e=It("https",this.u,null,"/__/auth/handler");Ct(e,"apiKey",this.o);Ct(e,"appName",this.c);Ct(e,"authType",this.v);if(this.a.isOAuthProvider){var t=this.a;try{var n=Pl.app(this.c).auth().ka()}catch(i){n=null}t.nb=n;Ct(e,"providerId",this.a.providerId);n=this.a;t=_n(n.Hb);for(var r in t)t[r]=t[r].toString();r=n.Pc;t=H(t);for(var s=0;s<r.length;s++){var o=r[s];o in t&&delete t[o]}n.ob&&n.nb&&!t[n.ob]&&(t[n.ob]=n.nb);q(t)||Ct(e,"customParameters",vn(t))}"function"==typeof this.a.Pb&&(n=this.a.Pb(),n.length&&Ct(e,"scopes",n.join(",")));this.l?Ct(e,"redirectUrl",this.l):Mt(e.b,"redirectUrl");this.g?Ct(e,"eventId",this.g):Mt(e.b,"eventId");this.i?Ct(e,"v",this.i):Mt(e.b,"v");if(this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Et(e,a)&&Ct(e,a,this.b[a]);this.h?Ct(e,"tid",this.h):Mt(e.b,"tid");this.f?Ct(e,"eid",this.f):Mt(e.b,"eid");a=ws(this.c);a.length&&Ct(e,"fw",a.join(","));return e.toString()};Ol=Cs.prototype;Ol.Nb=function(e,t,n){var i=new v("popup-closed-by-user"),r=new v("web-storage-unsupported"),s=this,o=!1;return this.la().then(function(){Os(s).then(function(n){n||(e&&Yt(e),t(r),o=!0)})}).s(function(){}).then(function(){return o?void 0:Jt(e)}).then(function(){return o?void 0:ht(n).then(function(){t(i)})})};Ol.Wb=function(){var e=un();return!mn(e)&&!bn(e)};Ol.Sb=function(){return!1};Ol.Lb=function(e,t,n,i,r,s,o,a){if(!e)return Ce(new v("popup-blocked"));if(o&&!mn())return this.la().s(function(t){Yt(e);r(t)}),i(),we();this.a||(this.a=Es(Is(this)));var c=this;return this.a.then(function(){var t=c.la().s(function(t){Yt(e);r(t);throw t});i();return t}).then(function(){$i(n);if(!o){var i=As(c.o,c.g,c.b,t,n,null,s,c.c,void 0,c.i,a,c.f);zt(i,e)}}).s(function(e){"auth/network-request-failed"==e.code&&(c.a=null);throw e})};Ol.Mb=function(e,t,n,i){this.a||(this.a=Es(Is(this)));var r=this;return this.a.then(function(){$i(t);var s=As(r.o,r.g,r.b,e,t,Vt(),n,r.c,void 0,r.i,i,r.f);zt(s)}).s(function(e){"auth/network-request-failed"==e.code&&(r.a=null);throw e})};Ol.la=function(){var e=this;return Ts(this).then(function(){return e.m.qb}).s(function(){e.a=null;throw new v("network-request-failed")})};Ol.Zb=function(){return!0};Ol.Ea=function(e){this.h.push(e)};Ol.Ra=function(e){D(this.h,function(t){return t==e})};Ol=Ps.prototype;Ol.get=function(e){return we(this.a.getItem(e)).then(function(e){return e&&yn(e)})};Ol.set=function(e,t){return we(this.a.setItem(e,vn(t)))};Ol.T=function(e){return we(this.a.removeItem(e))};Ol.ca=function(){};Ol.ia=function(){};var mf=[];Rs.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,i=this.a[t];if(i&&0<i.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var r=[];Ql(i,function(t){r.push(we().then(function(){return t(e.origin,e.data.data)}))});Ie(r).then(function(i){var r=[];Ql(i,function(e){r.push({fulfilled:e.Ob,value:e.value,reason:e.reason?e.reason.message:void 0})});Ql(r,function(e){for(var t in e)"undefined"==typeof e[t]&&delete e[t]});e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:r})})}};Ns.prototype.postMessage=function(e,t){this.a.postMessage(e,t)};Ls.prototype.close=function(){for(;0<this.a.length;)Us(this,this.a[0]);this.b=!0};var vf;Ol=$s.prototype;Ol.set=function(e,t){var n,i=!1,r=this;return js(this).then(function(t){n=t;t=Ws(Vs(n,!0));return zs(t.get(e))}).then(function(s){var o=Ws(Vs(n,!0));if(s)return s.value=t,zs(o.put(s));r.b++;i=!0;s={};s.fbase_key=e;s.value=t;return zs(o.add(s))}).then(function(){r.c[e]=t;return Gs(r,e)}).na(function(){i&&r.b--})};Ol.get=function(e){return js(this).then(function(t){return zs(Ws(Vs(t,!1)).get(e))}).then(function(e){return e&&e.value})};Ol.T=function(e){var t=!1,n=this;return js(this).then(function(i){t=!0;n.b++;return zs(Ws(Vs(i,!0))["delete"](e))}).then(function(){delete n.c[e];return Gs(n,e)}).na(function(){t&&n.b--})};Ol.ca=function(e){0==this.a.length&&Ks(this);this.a.push(e)};Ol.ia=function(e){D(this.a,function(t){
return t==e});0==this.a.length&&Ys(this)};Ol=Xs.prototype;Ol.get=function(e){return this.b.then(function(t){return t.get(e)})};Ol.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})};Ol.T=function(e){return this.b.then(function(t){return t.T(e)})};Ol.ca=function(e){this.a.push(e)};Ol.ia=function(e){D(this.a,function(t){return t==e})};Ol=Js.prototype;Ol.get=function(e){return we(this.a[e])};Ol.set=function(e,t){this.a[e]=t;return we()};Ol.T=function(e){delete this.a[e];return we()};Ol.ca=function(){};Ol.ia=function(){};Ol=Zs.prototype;Ol.get=function(e){var t=this;return we().then(function(){var n=t.a.getItem(e);return yn(n)})};Ol.set=function(e,t){var n=this;return we().then(function(){var i=vn(t);null===i?n.T(e):n.a.setItem(e,i)})};Ol.T=function(e){var t=this;return we().then(function(){t.a.removeItem(e)})};Ol.ca=function(e){Nl.window&&Ke(Nl.window,"storage",e)};Ol.ia=function(e){Nl.window&&Ze(Nl.window,"storage",e)};Ol=no.prototype;Ol.get=function(){return we(null)};Ol.set=function(){return we()};Ol.T=function(){return we()};Ol.ca=function(){};Ol.ia=function(){};Ol=io.prototype;Ol.get=function(e){var t=this;return we().then(function(){var n=t.a.getItem(e);return yn(n)})};Ol.set=function(e,t){var n=this;return we().then(function(){var i=vn(t);null===i?n.T(e):n.a.setItem(e,i)})};Ol.T=function(e){var t=this;return we().then(function(){t.a.removeItem(e)})};Ol.ca=function(){};Ol.ia=function(){};var _f,yf,kf={D:Zs,ab:io},bf={D:Zs,ab:io},Sf={D:Ps,ab:no},wf={D:Zs,ab:no},Cf={qd:"local",NONE:"none",sd:"session"};Ol=co.prototype;Ol.get=function(e,t){return uo(this,e.D).get(ho(e,t))};Ol.set=function(e,t,n){var i=ho(e,n),r=this,s=uo(this,e.D);return s.set(i,t).then(function(){return s.get(i)}).then(function(t){"local"==e.D&&(r.b[i]=t)})};Ol.addListener=function(e,t,n){e=ho(e,t);this.l&&(this.b[e]=Nl.localStorage.getItem(e));q(this.a)&&(uo(this,"local").ca(this.f),this.h||(Wt()||!An())&&Nl.indexedDB||!this.l||po(this));this.a[e]||(this.a[e]=[]);this.a[e].push(n)};Ol.removeListener=function(e,t,n){e=ho(e,t);this.a[e]&&(D(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]);q(this.a)&&(uo(this,"local").ia(this.f),mo(this))};Ol.Xb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var i=this.b[n];"undefined"==typeof i&&(i=null);var r=Nl.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.lb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){"undefined"!=typeof e.a.a?uo(this,"local").ia(this.f):mo(this);if(this.v)if(n=Nl.localStorage.getItem(t),i=e.a.newValue,i!==n)null!==i?Nl.localStorage.setItem(t,i):Nl.localStorage.removeItem(t);else if(this.b[t]===i&&"undefined"==typeof e.a.a)return;var s=this;n=function(){("undefined"!=typeof e.a.a||s.b[t]!==Nl.localStorage.getItem(t))&&(s.b[t]=Nl.localStorage.getItem(t),s.lb(t))};wu&&Pu&&10==Pu&&Nl.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else Ql(e,g(this.lb,this))};Ol.lb=function(e){this.a[e]&&Ql(this.a[e],function(e){e()})};var Ef,Tf={name:"authEvent",D:"local"};m(bo,ko);for(var If=64,Af=If-1,xf=[],Of=0;Af>Of;Of++)xf[Of]=0;var Pf=M(128,xf);bo.prototype.reset=function(){this.g=this.c=0;this.a=Nl.Int32Array?new Int32Array(this.h):N(this.h)};var Rf=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];m(Co,bo);var Df=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Ol=Eo.prototype;Ol.la=function(){return this.Ia?this.Ia:this.Ia=en().then(function(){if("function"!=typeof dn("universalLinks.subscribe",Nl))throw To("cordova-universal-links-plugin-fix is not installed");if("undefined"==typeof dn("BuildInfo.packageName",Nl))throw To("cordova-plugin-buildinfo is not installed");if("function"!=typeof dn("cordova.plugins.browsertab.openUrl",Nl))throw To("cordova-plugin-browsertab is not installed");if("function"!=typeof dn("cordova.InAppBrowser.open",Nl))throw To("cordova-plugin-inappbrowser is not installed")},function(){throw new v("cordova-not-ready")})};Ol.Nb=function(e,t){t(new v("operation-not-supported-in-this-environment"));return we()};Ol.Lb=function(){return Ce(new v("operation-not-supported-in-this-environment"))};Ol.Zb=function(){return!1};Ol.Wb=function(){return!0};Ol.Sb=function(){return!0};Ol.Mb=function(e,t,n,i){if(this.c)return Ce(new v("redirect-operation-pending"));var r=this,s=Nl.document,o=null,a=null,c=null,l=null;return this.c=we().then(function(){$i(t);return Po(r)}).then(function(){return xo(r,e,t,n,i)}).then(function(){return new ke(function(e,t){a=function(){var t=dn("cordova.plugins.browsertab.close",Nl);e();"function"==typeof t&&t();r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null);return!1};r.Ea(a);c=function(){o||(o=ht(2e3).then(function(){t(new v("redirect-cancelled-by-user"))}))};l=function(){Cn()&&c()};s.addEventListener("resume",c,!1);un().toLowerCase().match(/android/)||s.addEventListener("visibilitychange",l,!1)}).s(function(e){return Ro(r).then(function(){throw e})})}).na(function(){c&&s.removeEventListener("resume",c,!1);l&&s.removeEventListener("visibilitychange",l,!1);o&&o.cancel();a&&r.Ra(a);r.c=null})};Ol.Ea=function(e){this.b.push(e);Po(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new qi("unknown",null,null,null,new v("no-auth-event")),e(t))})};Ol.Ra=function(e){D(this.b,function(t){return t==e})};var Mf={name:"pendingRedirect",D:"session"};Uo.prototype.reset=function(){this.f=!1;this.a.Ra(this.l);this.a=$o(this.O,this.m,this.v,null,this.G);this.i={}};Uo.prototype.o=function(e){if(!e)throw new v("invalid-auth-event");6e5<=ql()-this.u&&(this.i={},this.u=0);if(e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Eb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,i),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=ql()));t=!0;break}}Xo(this.b);return t};var Nf=new wn(2e3,1e4),Lf=new wn(3e4,6e4);Uo.prototype.qa=function(){return this.b.qa()};var Ff={};Yo.prototype.reset=function(){this.b=null;this.a&&(this.a.cancel(),this.a=null)};Yo.prototype.h=function(e,t){if(e){this.reset();this.g=!0;var n=e.c,i=e.b,r=e.a&&"auth/web-storage-unsupported"==e.a.code,s=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!r&&!s);"unknown"!=n||r||s?e.a?(na(this,!0,null,e.a),we()):t.Fa(n,i)?Zo(this,e,t):Ce(new v("invalid-auth-event")):(na(this,!1,null,null),we())}else Ce(new v("invalid-auth-event"))};Yo.prototype.qa=function(){var e=this;return new ke(function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),ia(e))})};ra.prototype.h=function(e,t){if(e){var n=e.c,i=e.b;e.a?(t.ma(e.c,null,e.a,e.b),we()):t.Fa(n,i)?sa(e,t):Ce(new v("invalid-auth-event"))}else Ce(new v("invalid-auth-event"))};aa.prototype.confirm=function(e){e=Fi(this.verificationId,e);return this.a(e)};var Uf="mfaInfo",$f="mfaPendingCredential";ua.prototype.Qc=function(e){var t=this;return e.rb(this.a.a,this.c).then(function(e){var n=H(t.f);delete n[Uf];delete n[$f];j(n,e);return t.g(n)})};m(da,v);fa.prototype.rb=function(e,t,n){return t.type==sh?ga(this,e,t,n):pa(this,e,t)};m(ma,fa);m(va,ma);m(_a,je);Ol=ya.prototype;Ol.xc=function(e){ba(this,ka(e.gd))};Ol.Qb=function(){return this.a.I().then(function(e){return new ci(e,null)})};Ol.ec=function(e,t){var n=this,i=this.a.a;return this.Qb().then(function(n){return e.rb(i,n,t)}).then(function(e){tc(n.a,e);return n.a.reload()})};Ol.ad=function(e){var t=this,n="string"==typeof e?e:e.uid,i=this.a.a;return this.a.I().then(function(e){return fs(i,df,{idToken:e,mfaEnrollmentId:n})}).then(function(e){var i=Kl(t.b,function(e){return e.uid!=n});ba(t,i);tc(t.a,e);return t.a.reload().s(function(e){if("auth/user-token-expired"!=e.code)throw e})})};Ol.w=function(){return{multiFactor:{enrolledFactors:Yl(this.b,function(e){return e.w()})}}};Sa.prototype.start=function(){this.a=this.c;Ca(this,!0)};Sa.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};Ea.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Ta(this)}};Ea.prototype.getToken=function(e){e=!!e;return this.b&&!this.a?Ce(new v("user-token-expired")):e||!this.b||ql()>Ta(this)-3e4?this.a?xa(this,{grant_type:"refresh_token",refresh_token:this.a}):we(null):we({accessToken:this.b.toString(),refreshToken:this.a})};Oa.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};m(Da,at);Da.prototype.wa=function(e){this.pa=e;Hr(this.a,e)};Da.prototype.ka=function(){return this.pa};Da.prototype.Ga=function(){return N(this.X)};Da.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())};Rn(Da.prototype,"providerId","firebase");Ol=Da.prototype;Ol.reload=function(){var e=this;return uc(this,Qa(this).then(function(){return ec(e).then(function(){return Wa(e)}).then(Ga)}))};Ol.nc=function(e){return this.I(e).then(function(e){return new la(e)})};Ol.I=function(e){var t=this;return uc(this,Qa(this).then(function(){return t.b.getToken(e)}).then(function(e){if(!e)throw new v("internal-error");e.accessToken!=t.ya&&(ja(t,e.accessToken),t.dispatchEvent(new _a("tokenChanged")));Ja(t,"refreshToken",e.refreshToken);return e.accessToken}))};Ol.Jc=function(e){e=e.users;if(!e||!e.length)throw new v("internal-error");e=e[0];za(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=ic(e),n=0;n<t.length;n++)Ya(this,t[n]);Ja(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length));this.dispatchEvent(new _a("userReloaded",{gd:e}))};Ol.Kc=function(e){Pn("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.");return this.sb(e)};Ol.sb=function(e){var t=this,n=null;return uc(this,e.c(this.a,this.uid).then(function(e){tc(t,e);n=sc(t,e,"reauthenticate");t.f=null;return t.reload()}).then(function(){return n}),!0)};Ol.Bc=function(e){Pn("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead.");return this.pb(e)};Ol.pb=function(e){var t=this,n=null;return uc(this,rc(this,e.providerId).then(function(){return t.I()}).then(function(n){return e.b(t.a,n)}).then(function(e){n=sc(t,e,"link");return oc(t,e)}).then(function(){return n}))};Ol.Cc=function(e,t){var n=this;return uc(this,rc(this,"phone").then(function(){return ca(Ua(n),e,t,g(n.pb,n))}))};Ol.Lc=function(e,t){var n=this;return uc(this,we().then(function(){return ca(Ua(n),e,t,g(n.sb,n))}),!0)};Ol.Ab=function(e){var t=this;return uc(this,this.I().then(function(n){return t.a.Ab(n,e)}).then(function(e){tc(t,e);return t.reload()}))};Ol.dd=function(e){var t=this;return uc(this,this.I().then(function(n){return e.b(t.a,n)}).then(function(e){tc(t,e);return t.reload()}))};Ol.Bb=function(e){var t=this;return uc(this,this.I().then(function(n){return t.a.Bb(n,e)}).then(function(e){tc(t,e);return t.reload()}))};Ol.Cb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Qa(this);var t=this;return uc(this,this.I().then(function(n){return t.a.Cb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){tc(t,e);Ja(t,"displayName",e.displayName||null);Ja(t,"photoURL",e.photoUrl||null);Ql(t.providerData,function(e){"password"===e.providerId&&(Rn(e,"displayName",t.displayName),Rn(e,"photoURL",t.photoURL))});return Wa(t)}).then(Ga))};Ol.bd=function(e){var t=this;return uc(this,ec(this).then(function(n){return P(Ka(t),e)?ss(t.a,n,[e]).then(function(e){var n={};Ql(e.providerUserInfo||[],function(e){n[e.providerId]=!0});Ql(Ka(t),function(e){n[e]||Xa(t,e)});n[Li.PROVIDER_ID]||Rn(t,"phoneNumber",null);return Wa(t)}):Wa(t).then(function(){throw new v("no-such-provider")})}))};Ol["delete"]=function(){var e=this;return uc(this,this.I().then(function(t){return fs(e.a,Lh,{idToken:t})}).then(function(){e.dispatchEvent(new _a("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");Ma(e,null);Na(e,null);Fa(e,null);e.G=[];e.A=!0;Ha(e);Rn(e,"refreshToken",null);e.i&&Bo(e.i,e)})};Ol.Eb=function(e,t){return"linkViaPopup"==e&&(this.h||null)==t&&this.g||"reauthViaPopup"==e&&(this.h||null)==t&&this.g||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t?!0:!1};Ol.ma=function(e,t,n,i){"linkViaPopup"!=e&&"reauthViaPopup"!=e||i!=(this.h||null)||(n&&this.O?this.O(n):t&&!n&&this.g&&this.g(t),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)};Ol.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.h||null)?g(this.Jb,this):"reauthViaPopup"==e&&t==(this.h||null)?g(this.Kb,this):"linkViaRedirect"==e&&(this.ga||null)==t?g(this.Jb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?g(this.Kb,this):null};Ol.Dc=function(e){var t=this;return ac(this,"linkViaPopup",e,function(){return rc(t,e.providerId).then(function(){return Wa(t)})},!1)};Ol.Mc=function(e){return ac(this,"reauthViaPopup",e,function(){return we()},!0)};Ol.Ec=function(e){var t=this;return cc(this,"linkViaRedirect",e,function(){return rc(t,e.providerId)},!1)};Ol.Nc=function(e){return cc(this,"reauthViaRedirect",e,function(){return we()},!0)};Ol.Jb=function(e,t,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var s=null;n=this.I().then(function(n){return us(r.a,{requestUri:e,postBody:i,sessionId:t,idToken:n})}).then(function(e){s=sc(r,e,"link");return oc(r,e)}).then(function(){return s});return uc(this,n)};Ol.Kb=function(e,t,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var s=null,o=we().then(function(){return ui(ds(r.a,{requestUri:e,sessionId:t,postBody:i,tenantId:n}),r.uid)}).then(function(e){s=sc(r,e,"reauthenticate");tc(r,e);r.f=null;return r.reload()}).then(function(){return s});return uc(this,o,!0)};Ol.tb=function(e){var t=this,n=null;return uc(this,this.I().then(function(t){n=t;return"undefined"==typeof e||q(e)?{}:Vn(new Wn(e))}).then(function(e){return t.a.tb(n,e)}).then(function(e){return t.email!=e?t.reload():void 0}).then(function(){}))};Ol.Db=function(e,t){var n=this,i=null;return uc(this,this.I().then(function(e){i=e;return"undefined"==typeof t||q(t)?{}:Vn(new Wn(t))}).then(function(t){return n.a.Db(i,e,t)}).then(function(e){return n.email!=e?n.reload():void 0}).then(function(){}))};Ol.ic=function(e){var t=null,n=this;e=ui(we(e),n.uid).then(function(e){t=sc(n,e,"reauthenticate");tc(n,e);n.f=null;return n.reload()}).then(function(){return t});return uc(this,e,!0)};Ol.toJSON=function(){return this.w()};Ol.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};this.metadata&&j(e,this.metadata.w());Ql(this.providerData,function(t){e.providerData.push(Nn(t))});j(e,this.N.w());return e};var qf={name:"redirectUser",D:"session"};_c.prototype.g=function(){var e=this,t=bc("local");Tc(this,function(){return we().then(function(){return e.c&&"local"!=e.c.D?e.b.get(t,e.a):null}).then(function(n){return n?yc(e,"local").then(function(){e.c=t}):void 0})})};var Hf={name:"persistence",D:"session"};_c.prototype.wb=function(e){var t=null,n=this;ao(e);return Tc(this,function(){return e!=n.c.D?n.b.get(n.c,n.a).then(function(i){t=i;return yc(n,e)}).then(function(){n.c=bc(e);return t?n.b.set(n.c,t,n.a):void 0}):we()})};m(Ic,at);m(Ac,je);m(xc,je);m(Oc,je);Ol=Ic.prototype;Ol.wb=function(e){e=this.l.wb(e);return Gc(this,e)};Ol.wa=function(e){this.aa===e||this.m||(this.aa=e,Hr(this.a,this.aa),this.dispatchEvent(new Ac(this.ka())))};Ol.ka=function(){return this.aa};Ol.ed=function(){var e=Nl.navigator;this.wa(e?e.languages&&e.languages[0]||e.language||e.userLanguage||null:null)};Ol.fd=function(e){if(!this.f){if(!/^https?:\/\//.test(e))throw new v("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Pc();this.f={url:e};this.settings.hb=!0;jr(this.a,this.f);this.dispatchEvent(new xc(this.f))}};Ol.Fc=function(e){this.N.push(e);Wr(this.a,Pl.SDK_VERSION?ln(Pl.SDK_VERSION,this.N):null);this.dispatchEvent(new Oc(this.N))};Ol.Ga=function(){return N(this.N)};Ol.xb=function(e){this.W===e||this.m||(this.W=e,this.a.b=this.W)};Ol.S=function(){return this.W};Ol.toJSON=function(){return{apiKey:jc(this).options.apiKey,authDomain:jc(this).options.authDomain,appName:jc(this).name,currentUser:Bc(this)&&Bc(this).w()}};Ol.Eb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==t&&!!this.g;default:return!1}};Ol.ma=function(e,t,n,i){"signInViaPopup"==e&&this.h==i&&(n&&this.O?this.O(n):t&&!n&&this.g&&this.g(t),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)};Ol.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.h==t&&this.g?g(this.hc,this):null};Ol.hc=function(e,t,n,i){var r=this,s={requestUri:e,postBody:i,sessionId:t,tenantId:n};this.c&&(this.c.cancel(),this.c=null);return r.$.then(function(){return Hc(r,ls(r.a,s))})};Ol.Wc=function(e){if(!fn())return Ce(new v("operation-not-supported-in-this-environment"));var t=this,n=Zn(e.providerId),i=kn(),r=null;(!mn()||nn())&&jc(this).options.authDomain&&e.isOAuthProvider&&(r=As(jc(this).options.authDomain,jc(this).options.apiKey,jc(this).name,"signInViaPopup",e,null,i,Pl.SDK_VERSION||null,null,null,this.S(),this.f));var s=Xt(r,n&&n.ua,n&&n.ta);n=Dc(this).then(function(n){return Wo(n,s,"signInViaPopup",e,i,!!r,t.S())}).then(function(){return new ke(function(e,n){t.ma("signInViaPopup",null,new v("cancelled-popup-request"),t.h);t.g=e;t.O=n;t.h=i;t.c=Go(t.b,t,"signInViaPopup",s,i)})}).then(function(e){s&&Yt(s);return e?Mn(e):null}).s(function(e){s&&Yt(s);throw e});return Gc(this,n)};Ol.Xc=function(e){if(!fn())return Ce(new v("operation-not-supported-in-this-environment"));var t=this,n=Dc(this).then(function(){return Sc(t.l)}).then(function(){return zo(t.b,"signInViaRedirect",e,void 0,t.S())});return Gc(this,n)};Ol.qa=function(){var e=this;return Nc(this).then(function(t){e.b&&Jo(e.b.b);return t}).s(function(t){e.b&&Jo(e.b.b);throw t})};Ol.cd=function(e){if(!e)return Ce(new v("null-user"));if(this.W!=e.tenantId)return Ce(new v("tenant-id-mismatch"));var t=this,n={};n.apiKey=jc(this).options.apiKey;n.authDomain=jc(this).options.authDomain;n.appName=jc(this).name;var i=gc(e,n,t.G,t.Ga());return Gc(this,this.i.then(function(){return jc(t).options.apiKey!=e.l?i.reload():void 0}).then(function(){if(Bc(t)&&e.uid==Bc(t).uid)return Za(Bc(t),e),t.da(e);Fc(t,i);Va(i);return t.da(i)}).then(function(){Vc(t)}))};Ol.zb=function(){var e=this,t=this.i.then(function(){e.b&&Jo(e.b.b);if(!Bc(e))return we();Fc(e,null);return Cc(e.l).then(function(){Vc(e)})});return Gc(this,t)};Ol.Yc=function(){var e=this;return Ec(this.l,jc(this).options.authDomain).then(function(t){if(!e.m){var n;if(n=Bc(e)&&t){n=Bc(e).uid;var i=t.uid;n=void 0===n||null===n||""===n||void 0===i||null===i||""===i?!1:n==i}if(n)return Za(Bc(e),t),Bc(e).I();(Bc(e)||t)&&(Fc(e,t),t&&(Va(t),t.ha=e.G),e.b&&jo(e.b,e),Vc(e))}})};Ol.da=function(e){return wc(this.l,e)};Ol.kc=function(){Vc(this);this.da(Bc(this))};Ol.vc=function(){this.zb()};Ol.wc=function(){this.zb()};Ol.jc=function(e){var t=this;return this.i.then(function(){return Hc(t,we(e))})};Ol.yc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(Bc(t))})};Ol.zc=function(e){var t=this;zc(this,function(){e.next(Bc(t))})};Ol.Hc=function(e,t,n){var i=this;this.ba&&Promise.resolve().then(function(){"function"==typeof e?e(Bc(i)):"function"==typeof e.next&&e.next(Bc(i))});return this.ac(e,t,n)};Ol.Gc=function(e,t,n){var i=this;this.ba&&Promise.resolve().then(function(){i.X=i.getUid();"function"==typeof e?e(Bc(i)):"function"==typeof e.next&&e.next(Bc(i))});return this.bc(e,t,n)};Ol.mc=function(e){var t=this,n=this.i.then(function(){return Bc(t)?Bc(t).I(e).then(function(e){return{accessToken:e}}):null});return Gc(this,n)};Ol.Sc=function(e){var t=this;return this.i.then(function(){return Hc(t,fs(t.a,of,{token:e}))}).then(function(e){var n=e.user;Ja(n,"isAnonymous",!1);t.da(n);return e})};Ol.Tc=function(e,t){var n=this;return this.i.then(function(){return Hc(n,fs(n.a,af,{email:e,password:t}))})};Ol.dc=function(e,t){var n=this;return this.i.then(function(){return Hc(n,fs(n.a,Mh,{email:e,password:t}))})};Ol.Za=function(e){var t=this;return this.i.then(function(){return Hc(t,e.ja(t.a))})};Ol.Rc=function(e){Pn("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead.");return this.Za(e)};Ol.yb=function(){var e=this;return this.i.then(function(){var t=Bc(e);if(t&&t.isAnonymous){var n=Mn({providerId:null,isNewUser:!1});return Mn({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Hc(e,e.a.yb()).then(function(t){var n=t.user;Ja(n,"isAnonymous",!0);e.da(n);return t})})};Ol.getUid=function(){return Bc(this)&&Bc(this).uid||null};Ol.cc=function(e){this.addAuthTokenListener(e);this.A++;0<this.A&&Bc(this)&&qa(Bc(this))};Ol.Oc=function(e){var t=this;Ql(this.u,function(n){n==e&&t.A--});0>this.A&&(this.A=0);0==this.A&&Bc(this)&&Ha(Bc(this));this.removeAuthTokenListener(e)};Ol.addAuthTokenListener=function(e){var t=this;this.u.push(e);Gc(this,this.i.then(function(){t.m||P(t.u,e)&&e(Wc(t))}))};Ol.removeAuthTokenListener=function(e){D(this.u,function(t){return t==e})};Ol["delete"]=function(){this.m=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");this.R=[];this.l&&(e=this.l,e.b.removeListener(bc("local"),e.a,this.pa));this.b&&(Bo(this.b,this),Jo(this.b.b));return Promise.resolve()};Ol.gc=function(e){return Gc(this,Xr(this.a,e))};Ol.Ac=function(e){return!!Ri(e)};Ol.vb=function(e,t){var n=this;return Gc(this,we().then(function(){var e=new Wn(t);if(!e.c)throw new v("argument-error",zd+" must be true when sending sign in link to email");return Vn(e)}).then(function(t){return n.a.vb(e,t)}).then(function(){}))};Ol.hd=function(e){return this.Qa(e).then(function(e){return e.data.email})};Ol.mb=function(e,t){return Gc(this,this.a.mb(e,t).then(function(){}))};Ol.Qa=function(e){return Gc(this,this.a.Qa(e).then(function(e){return new Hn(e)}))};Ol.ib=function(e){return Gc(this,this.a.ib(e).then(function(){}))};Ol.ub=function(e,t){var n=this;return Gc(this,we().then(function(){return"undefined"==typeof t||q(t)?{}:Vn(new Wn(t))}).then(function(t){return n.a.ub(e,t)}).then(function(){}))};Ol.Vc=function(e,t){return Gc(this,ca(this,e,t,g(this.Za,this)))};Ol.Uc=function(e,t){var n=this;return Gc(this,we().then(function(){var i=t||Vt(),r=Pi(e,i);i=Ri(i);if(!i)throw new v("argument-error","Invalid email link!");if(i.tenantId!==n.S())throw new v("tenant-id-mismatch");return n.Za(r)}))};Qc.prototype.render=function(){};Qc.prototype.reset=function(){};Qc.prototype.getResponse=function(){};Qc.prototype.execute=function(){};var jf=null;Kc.prototype.render=function(e,t){this.a[this.b.toString()]=new Jc(e,t);return this.b++};Kc.prototype.reset=function(e){var t=Yc(this,e);e=Xc(e);t&&e&&(t["delete"](),delete this.a[e])};Kc.prototype.getResponse=function(e){return(e=Yc(this,e))?e.getResponse():null};Kc.prototype.execute=function(e){(e=Yc(this,e))&&e.execute()};Jc.prototype.getResponse=function(){Zc(this);return this.b};Jc.prototype.execute=function(){Zc(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=an();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(i){}e.a=setTimeout(function(){e.a=null;e.b=null;if(n)try{n()}catch(t){}e.h&&e.execute()},6e4)},500))};Jc.prototype["delete"]=function(){Zc(this);this.g=!0;clearTimeout(this.a);this.a=null;Ze(this.f,"click",this.i)};Rn(el,"FACTOR_ID","phone");tl.prototype.g=function(){jf||(jf=new Kc);return we(jf)};tl.prototype.c=function(){};var Bf=null,Wf=new W(uu,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Vf=new wn(3e4,6e4);nl.prototype.g=function(e){var t=this;return new ke(function(n,i){var r=setTimeout(function(){i(new v("network-request-failed"))},Vf.get());if(!Nl.grecaptcha||e!==t.f&&!t.b){Nl[t.a]=function(){if(Nl.grecaptcha){t.f=e;var s=Nl.grecaptcha.render;Nl.grecaptcha.render=function(e,n){e=s(e,n);t.b++;return e};clearTimeout(r);n(Nl.grecaptcha)}else clearTimeout(r),i(new v("internal-error"));delete Nl[t.a]};var s=Q(Wf,{onload:t.a,hl:e||""});we(Mr(s)).s(function(){clearTimeout(r);i(new v("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(r),n(Nl.grecaptcha)})};nl.prototype.c=function(){this.b--};var zf=null,Gf="callback",Qf="expired-callback",Kf="sitekey",Yf="size";Ol=il.prototype;Ol.Ia=function(){var e=this;return this.f?this.f:this.f=ol(this,we().then(function(){if(gn()&&!rn())return Zt();throw new v("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.v.g(e.u())}).then(function(t){e.g=t;return fs(e.o,Qh,{})}).then(function(t){e.a[Kf]=t.recaptchaSiteKey}).s(function(t){e.f=null;throw t}))};Ol.render=function(){al(this);var e=this;return ol(this,this.Ia().then(function(){if(null===e.c){var t=e.m;if(!e.i){var n=le(t);t=de("DIV");n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))};Ol.verify=function(){al(this);var e=this;return ol(this,this.render().then(function(t){return new ke(function(n){var i=e.g.getResponse(t);if(i)n(i);else{var r=function(t){t&&(sl(e,r),n(t))};e.l.push(r);e.i&&e.g.execute(e.c)}})}))};Ol.reset=function(){al(this);null!==this.c&&this.g.reset(this.c)};Ol.clear=function(){al(this);this.A=!0;this.v.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=le(this.m);for(var t;t=e.firstChild;)e.removeChild(t)}};m(cl,il);var Xf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");El(Ic.prototype,{ib:{name:"applyActionCode",j:[ul("code")]},Qa:{name:"checkActionCode",j:[ul("code")]},mb:{name:"confirmPasswordReset",j:[ul("code"),ul("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[ul("email"),ul("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[ul("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[ul("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Cl(hl(),fl(),"nextOrObserver"),fl("opt_error",!0),fl("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Cl(hl(),fl(),"nextOrObserver"),fl("opt_error",!0),fl("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[ul("email"),Cl(hl("opt_actionCodeSettings",!0),gl(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[ul("email"),hl("actionCodeSettings")]},wb:{name:"setPersistence",j:[ul("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[_l()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[_l()]},Sc:{name:"signInWithCustomToken",j:[ul("token")]},Tc:{name:"signInWithEmailAndPassword",j:[ul("email"),ul("password")]},Uc:{name:"signInWithEmailLink",j:[ul("email"),ul("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[ul("phoneNumber"),wl()]},Wc:{name:"signInWithPopup",j:[kl()]},Xc:{name:"signInWithRedirect",j:[kl()]},cd:{name:"updateCurrentUser",j:[Cl(function(e){return{name:"user",J:"an instance of Firebase User",optional:!!e,K:function(e){return!!(e&&e instanceof Da)}}}(),gl(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ul(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[ul("url")]},hd:{name:"verifyPasswordResetCode",j:[ul("code")]}});Tl(Ic.prototype,{lc:{name:"languageCode",jb:Cl(ul(),gl(),"languageCode")},ti:{name:"tenantId",jb:Cl(ul(),gl(),"tenantId")}});Ic.Persistence=Cf;Ic.Persistence.LOCAL="local";Ic.Persistence.SESSION="session";Ic.Persistence.NONE="none";El(Da.prototype,{"delete":{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[dl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[dl("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[_l()]},pb:{name:"linkWithCredential",j:[_l()]},Cc:{name:"linkWithPhoneNumber",j:[ul("phoneNumber"),wl()]},Dc:{name:"linkWithPopup",j:[kl()]},Ec:{name:"linkWithRedirect",j:[kl()]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[_l()]},sb:{name:"reauthenticateWithCredential",j:[_l()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[ul("phoneNumber"),wl()]},Mc:{name:"reauthenticateWithPopup",j:[kl()]},Nc:{name:"reauthenticateWithRedirect",j:[kl()]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Cl(hl("opt_actionCodeSettings",!0),gl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ul(null,!0)]},bd:{name:"unlink",j:[ul("provider")]},Ab:{name:"updateEmail",j:[ul("email")]},Bb:{name:"updatePassword",j:[ul("password")]},dd:{name:"updatePhoneNumber",j:[_l("phone")]},Cb:{name:"updateProfile",j:[hl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[ul("email"),Cl(hl("opt_actionCodeSettings",!0),gl(null,!0),"opt_actionCodeSettings",!0)]}});El(Kc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}});El(Qc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}});El(ke.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}});Tl(oa.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:dl("appVerificationDisabledForTesting")}});El(aa.prototype,{confirm:{name:"confirm",j:[ul("verificationCode")]}});Il(li,"fromJSON",function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[mi,xi,Mi,fi],i=0;i<n.length;i++)if(t=n[i](e))return t;return null},[Cl(ul(),hl(),"json")]);Il(Oi,"credential",function(e,t){return new Ai(e,t)},[ul("email"),ul("password")]);El(Ai.prototype,{w:{name:"toJSON",j:[ul(null,!0)]}});El(ki.prototype,{Ca:{name:"addScope",j:[ul("scope")]},Ka:{name:"setCustomParameters",j:[hl("customOAuthParameters")]}});Il(ki,"credential",bi,[Cl(ul(),hl(),"token")]);Il(Oi,"credentialWithLink",Pi,[ul("email"),ul("emailLink")]);El(Si.prototype,{Ca:{name:"addScope",j:[ul("scope")]},Ka:{name:"setCustomParameters",j:[hl("customOAuthParameters")]}});Il(Si,"credential",wi,[Cl(ul(),hl(),"token")]);El(Ci.prototype,{Ca:{name:"addScope",j:[ul("scope")]},Ka:{name:"setCustomParameters",j:[hl("customOAuthParameters")]}});Il(Ci,"credential",Ei,[Cl(ul(),Cl(hl(),gl()),"idToken"),Cl(ul(),gl(),"accessToken",!0)]);El(Ti.prototype,{Ka:{name:"setCustomParameters",j:[hl("customOAuthParameters")]}});Il(Ti,"credential",Ii,[Cl(ul(),hl(),"token"),ul("secret",!0)]);El(yi.prototype,{Ca:{name:"addScope",j:[ul("scope")]},credential:{name:"credential",j:[Cl(ul(),Cl(hl(),gl()),"optionsOrIdToken"),Cl(ul(),gl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[hl("customOAuthParameters")]}});El(gi.prototype,{w:{name:"toJSON",j:[ul(null,!0)]}});El(di.prototype,{w:{name:"toJSON",j:[ul(null,!0)]}});Il(Li,"credential",Fi,[ul("verificationId"),ul("verificationCode")]);El(Li.prototype,{eb:{name:"verifyPhoneNumber",j:[Cl(ul(),function(e,t){return{name:e||"phoneInfoOptions",J:"valid phone info options",optional:!!t,K:function(e){return e?e.session&&e.phoneNumber?bl(e.session,sh)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?bl(e.session,oh)&&Sl(e.multiFactorHint):e.session&&e.multiFactorUid?bl(e.session,oh)&&"string"==typeof e.multiFactorUid:e.phoneNumber?"string"==typeof e.phoneNumber:!1:!1;
}}}(),"phoneInfoOptions"),wl()]}});El(Di.prototype,{w:{name:"toJSON",j:[ul(null,!0)]}});El(v.prototype,{toJSON:{name:"toJSON",j:[ul(null,!0)]}});El(Vi.prototype,{toJSON:{name:"toJSON",j:[ul(null,!0)]}});El(Wi.prototype,{toJSON:{name:"toJSON",j:[ul(null,!0)]}});El(da.prototype,{toJSON:{name:"toJSON",j:[ul(null,!0)]}});El(ua.prototype,{Qc:{name:"resolveSignIn",j:[yl()]}});El(ya.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[yl(),ul("displayName",!0)]},ad:{name:"unenroll",j:[Cl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Sl},ul(),"multiFactorInfoIdentifier")]}});El(cl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}});Il(jn,"parseLink",Bn,[ul("link")]);Il(el,"assertion",function(e){return new va(e)},[_l("phone")]);!function(){if("undefined"==typeof Pl||!Pl.INTERNAL||!Pl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ed,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Cd,VERIFY_AND_CHANGE_EMAIL:Td,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Ic,AuthCredential:li,Error:v};Il(e,"EmailAuthProvider",Oi,[]);Il(e,"FacebookAuthProvider",ki,[]);Il(e,"GithubAuthProvider",Si,[]);Il(e,"GoogleAuthProvider",Ci,[]);Il(e,"TwitterAuthProvider",Ti,[]);Il(e,"OAuthProvider",yi,[ul("providerId")]);Il(e,"SAMLAuthProvider",_i,[ul("providerId")]);Il(e,"PhoneAuthProvider",Li,[ml()]);Il(e,"RecaptchaVerifier",cl,[Cl(ul(),pl(),"recaptchaContainer"),hl("recaptchaParameters",!0),vl()]);Il(e,"ActionCodeURL",jn,[]);Il(e,"PhoneMultiFactorGenerator",el,[]);Pl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){e=e.getProvider("app").getImmediate();return new Ic(e)},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"});Pl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){e=e.getProvider("auth").getImmediate();return{getUid:g(e.getUid,e),getToken:g(e.mc,e),addAuthTokenListener:g(e.cc,e),removeAuthTokenListener:g(e.Oc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"});Pl.registerVersion("@firebase/auth","0.15.0");Pl.INTERNAL.extendNamespace({User:Da})}()}).apply("undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(t,function(){return this}())},function(e,t,n){"use strict";n(14)},function(e,t,n){(function(i){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}function s(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function o(e){for(var t="",n=e.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}t+="/"+r}return t}function a(e){var t,n,i={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var r=T.__values(e.split("&")),s=r.next();!s.done;s=r.next()){var o=s.value;if(0!==o.length){var a=o.split("=");2===a.length?i[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):G("Invalid query segment '"+o+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=r["return"])&&n.call(r)}finally{if(t)throw t.error}}return i}function c(e){y=e}function l(e){b=e}function u(e){S=e}/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function d(e,t){return Z(e.name,t.name)}function h(e,t){return Z(e,t)}function f(e,t){void 0===t&&(t=null);if(null===e)return gt.EMPTY_NODE;"object"==typeof e&&".priority"in e&&(t=e[".priority"]);I.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t);"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]);if("object"!=typeof e||".sv"in e){var n=e;return new nt(n,f(t))}if(e instanceof Array||!vt){var i=gt.EMPTY_NODE;s(e,function(t,n){if(I.contains(e,t)&&"."!==t.substring(0,1)){var r=f(n);(r.isLeafNode()||!r.isEmpty())&&(i=i.updateImmediateChild(t,r))}});return i.updatePriority(f(t))}var r=[],o=!1,a=e;s(a,function(e,t){if("."!==e.substring(0,1)){var n=f(t);if(!n.isEmpty()){o=o||!n.getPriority().isEmpty();r.push(new Ye(e,n))}}});if(0===r.length)return gt.EMPTY_NODE;var c=dt(r,d,function(e){return e.name},h);if(o){var l=dt(r,rt.getCompare());return new gt(c,f(t),new ft({".priority":l},{".priority":rt}))}return new gt(c,f(t),ft.Default)}function g(e,t,n){var i,r=e.getPriority().val(),s=Rt(r,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,a=Rt(o.getValue(),t,n);return a!==o.getValue()||s!==o.getPriority().val()?new nt(a,f(s)):e}var c=e;i=c;s!==c.getPriority().val()&&(i=i.updatePriority(new nt(s)));c.forEachChild(rt,function(e,r){var s=g(r,t.getImmediateChild(e),n);s!==r&&(i=i.updateImmediateChild(e,s))});return i}function p(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var i=null;t.children.inorderTraversal(function(t,r){if(".priority"===t){I.assert(null!==r.value,"Priority writes must always be leaf nodes");i=r.value}else n=p(e.child(t),r,n)});n.getChild(e).isEmpty()||null===i||(n=n.updateChild(e.child(".priority"),i));return n}function m(e){Wn=e}function v(t){m(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new x.Component("database",function(e,t){var n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal");return Mi.getInstance().databaseFromApp(n,i,t)},"PUBLIC").setServiceProps({Reference:Ti,Query:At,Database:Ni,DataSnapshot:wt,enableLogging:j,INTERNAL:Vi,ServerValue:tr,TEST_ACCESS:Ji}).setMultipleInstances(!0));t.registerVersion(Zi,er);I.isNodeSdk()&&(e.exports=n)}Object.defineProperty(t,"__esModule",{value:!0});var _,y,k,b,S,w,C,E=n(6),T=n(7),I=n(8),A=n(10),x=n(9),O=r(E),P=function(){function e(e){this.domStorage_=e;this.prefix_="firebase:"}e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),I.stringify(t))};e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:I.jsonEval(t)};e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))};e.prototype.prefixedName_=function(e){return this.prefix_+e};e.prototype.toString=function(){return this.domStorage_.toString()};return e}(),R=function(){function e(){this.cache_={};this.isInMemoryStorage=!0}e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t};e.prototype.get=function(e){return I.contains(this.cache_,e)?this.cache_[e]:null};e.prototype.remove=function(e){delete this.cache_[e]};return e}(),D=function(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];t.setItem("firebase:sentinel","cache");t.removeItem("firebase:sentinel");return new P(t)}}catch(n){}return new R},M=D("localStorage"),N=D("sessionStorage"),L=new A.Logger("@firebase/database"),F=function(){var e=1;return function(){return e++}}(),U=function(e){var t=I.stringToByteArray(e),n=new I.Sha1;n.update(t);var i=n.digest();return I.base64.encodeByteArray(i)},$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",i=0;i<e.length;i++){var r=e[i];n+=Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?$.apply(null,r):"object"==typeof r?I.stringify(r):r;n+=" "}return n},q=null,H=!0,j=function(e,t){I.assert(!t||e===!0||e===!1,"Can't turn on custom loggers persistently.");if(e===!0){L.logLevel=A.LogLevel.VERBOSE;q=L.log.bind(L);t&&N.set("logging_enabled",!0)}else if("function"==typeof e)q=e;else{q=null;N.remove("logging_enabled")}},B=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(H===!0){H=!1;null===q&&N.get("logging_enabled")===!0&&j(!0)}if(q){var n=$.apply(null,e);q(n)}},W=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];B.apply(void 0,T.__spread([e],t))}},V=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+$.apply(void 0,T.__spread(e));L.error(n)},z=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+$.apply(void 0,T.__spread(e));L.error(n);throw new Error(n)},G=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+$.apply(void 0,T.__spread(e));L.warn(n)},Q=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&G("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},K=function(e){return"number"==typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Y=function(e){if(I.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){if(document.body){if(!t){t=!0;e()}}else setTimeout(n,Math.floor(10))};if(document.addEventListener){document.addEventListener("DOMContentLoaded",n,!1);window.addEventListener("load",n,!1)}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()});window.attachEvent("onload",n)}}},X="[MIN_NAME]",J="[MAX_NAME]",Z=function(e,t){if(e===t)return 0;if(e===X||t===J)return-1;if(t===X||e===J)return 1;var n=le(e),i=le(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:t>e?-1:1},ee=function(e,t){return e===t?0:t>e?-1:1},te=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+I.stringify(t))},ne=function(e){if("object"!=typeof e||null===e)return I.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var i="{",r=0;r<t.length;r++){0!==r&&(i+=",");i+=I.stringify(t[r]);i+=":";i+=ne(e[t[r]])}i+="}";return i},ie=function(e,t){var n=e.length;if(t>=n)return[e];for(var i=[],r=0;n>r;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i},re=function(e){I.assert(!K(e),"Invalid JSON number");var t,n,i,r,s,o=11,a=52,c=(1<<o-1)-1;if(0===e){n=0;i=0;t=1/e===-(1/0)?1:0}else{t=0>e;e=Math.abs(e);if(e>=Math.pow(2,1-c)){r=Math.min(Math.floor(Math.log(e)/Math.LN2),c);n=r+c;i=Math.round(e*Math.pow(2,a-r)-Math.pow(2,a))}else{n=0;i=Math.round(e/Math.pow(2,1-c-a))}}var l=[];for(s=a;s;s-=1){l.push(i%2?1:0);i=Math.floor(i/2)}for(s=o;s;s-=1){l.push(n%2?1:0);n=Math.floor(n/2)}l.push(t?1:0);l.reverse();var u=l.join(""),d="";for(s=0;64>s;s+=8){var h=parseInt(u.substr(s,8),2).toString(16);1===h.length&&(h="0"+h);d+=h}return d.toLowerCase()},se=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},oe=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},ae=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var i=new Error(e+" at "+t.path.toString()+": "+n);i.code=e.toUpperCase();return i},ce=new RegExp("^-?(0*)\\d{1,10}$"),le=function(e){if(ce.test(e)){var t=Number(e);if(t>=-2147483648&&2147483647>=t)return t}return null},ue=function(e){try{e()}catch(t){setTimeout(function(){var e=t.stack||"";G("Exception was thrown by user callback.",e);throw t},Math.floor(0))}},de=function(){var e="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},he=function(e,t){var n=setTimeout(e,t);"object"==typeof n&&n.unref&&n.unref();return n},fe=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)if(this.pieces_[i].length>0){this.pieces_[n]=this.pieces_[i];n++}this.pieces_.length=n;this.pieceNum_=0}else{this.pieces_=e;this.pieceNum_=t}}Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!1,configurable:!0});e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]};e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_};e.prototype.popFront=function(){var t=this.pieceNum_;t<this.pieces_.length&&t++;return new e(this.pieces_,t)};e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null};e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"};e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"};e.prototype.slice=function(e){void 0===e&&(e=0);return this.pieces_.slice(this.pieceNum_+e)};e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)};e.prototype.child=function(t){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(t instanceof e)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var r=t.split("/"),i=0;i<r.length;i++)r[i].length>0&&n.push(r[i]);return new e(n,0)};e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length};e.relativePath=function(t,n){var i=t.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")};e.comparePaths=function(e,t){for(var n=e.slice(),i=t.slice(),r=0;r<n.length&&r<i.length;r++){var s=Z(n[r],i[r]);if(0!==s)return s}return n.length===i.length?0:n.length<i.length?-1:1};e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0};e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t;++n}return!0};return e}(),ge=function(){function e(e,t){this.errorPrefix_=t;this.parts_=e.slice();this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=I.stringLength(this.parts_[n]);this.checkValid_()}Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0});Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0});e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1);this.parts_.push(e);this.byteLength_+=I.stringLength(e);this.checkValid_()};e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=I.stringLength(e);this.parts_.length>0&&(this.byteLength_-=1)};e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())};e.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"};return e}(),pe="5",me="v",ve="s",_e="r",ye="f",ke="firebaseio.com",be="ls",Se="p",we="websocket",Ce="long_polling",Ee=function(){function e(e,t,n,i,r,s,o){void 0===r&&(r=!1);void 0===s&&(s="");void 0===o&&(o=!1);this.secure=t;this.namespace=n;this.webSocketOnly=i;this.nodeAdmin=r;this.persistenceKey=s;this.includeNamespaceInQueryParams=o;this.host=e.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.internalHost=M.get("host:"+e)||this.host}e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams};e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)};e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain};e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain};e.prototype.updateHost=function(e){if(e!==this.internalHost){this.internalHost=e;this.isCacheableHost()&&M.set("host:"+this.host,this.internalHost)}};e.prototype.connectionURL=function(e,t){I.assert("string"==typeof e,"typeof type must == string");I.assert("object"==typeof t,"typeof params must == object");var n;if(e===we)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==Ce)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var i=[];s(t,function(e,t){i.push(e+"="+t)});return n+i.join("&")};e.prototype.toString=function(){var e=this.toURLString();this.persistenceKey&&(e+="<"+this.persistenceKey+">");return e};e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host};return e}(),Te=function(e,t){var n=Ie(e),i=n.namespace;"firebase.com"===n.domain&&z(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");i&&"undefined"!==i||"localhost"===n.domain||z("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");n.secure||Q();var r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ee(n.host,n.secure,i,t,r,"",i!==n.subdomain),path:new fe(n.pathString)}},Ie=function(e){var t="",n="",i="",r="",s="",c=!0,l="https",u=443;if("string"==typeof e){var d=e.indexOf("//");if(d>=0){l=e.substring(0,d-1);e=e.substring(d+2)}var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length);t=e.substring(0,Math.min(h,f));f>h&&(r=o(e.substring(h,f)));var g=a(e.substring(Math.min(e.length,f)));d=t.indexOf(":");if(d>=0){c="https"===l||"wss"===l;u=parseInt(t.substring(d+1),10)}else d=t.length;var p=t.slice(0,d);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var m=t.indexOf(".");i=t.substring(0,m).toLowerCase();n=t.substring(m+1);s=i}"ns"in g&&(s=g.ns)}return{host:t,port:u,domain:n,subdomain:i,secure:c,scheme:l,pathString:r,namespace:s}},Ae=/[\[\].#$\/\u0000-\u001F\u007F]/,xe=/[\[\].#$\u0000-\u001F\u007F]/,Oe=10485760,Pe=function(e){return"string"==typeof e&&0!==e.length&&!Ae.test(e)},Re=function(e){return"string"==typeof e&&0!==e.length&&!xe.test(e)},De=function(e){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/"));return Re(e)},Me=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!K(e)||e&&"object"==typeof e&&I.contains(e,".sv")},Ne=function(e,t,n,i,r){r&&void 0===n||Le(I.errorPrefix(e,t,r),n,i)},Le=function(e,t,n){var i=n instanceof fe?new ge(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof t)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+t.toString());if(K(t))throw new Error(e+"contains "+t.toString()+" "+i.toErrorString());if("string"==typeof t&&t.length>Oe/3&&I.stringLength(t)>Oe)throw new Error(e+"contains a string greater than "+Oe+" utf8 bytes "+i.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var r=!1,o=!1;s(t,function(t,n){if(".value"===t)r=!0;else if(".priority"!==t&&".sv"!==t){o=!0;if(!Pe(t))throw new Error(e+" contains an invalid key ("+t+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}i.push(t);Le(e,n,i);i.pop()});if(r&&o)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},Fe=function(e,t){var n,i;for(n=0;n<t.length;n++){i=t[n];for(var r=i.slice(),s=0;s<r.length;s++)if(".priority"===r[s]&&s===r.length-1);else if(!Pe(r[s]))throw new Error(e+"contains an invalid key ("+r[s]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(fe.comparePaths);var o=null;for(n=0;n<t.length;n++){i=t[n];if(null!==o&&o.contains(i))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},Ue=function(e,t,n,i,r){if(!r||void 0!==n){var o=I.errorPrefix(e,t,r);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];s(n,function(e,t){var n=new fe(e);Le(o,t,i.child(n));if(".priority"===n.getBack()&&!Me(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)});Fe(o,a)}},$e=function(e,t,n,i){if(!i||void 0!==n){if(K(n))throw new Error(I.errorPrefix(e,t,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Me(n))throw new Error(I.errorPrefix(e,t,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qe=function(e,t,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(I.errorPrefix(e,t,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},He=function(e,t,n,i){if(!(i&&void 0===n||Pe(n)))throw new Error(I.errorPrefix(e,t,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},je=function(e,t,n,i){if(!(i&&void 0===n||Re(n)))throw new Error(I.errorPrefix(e,t,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Be=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/"));je(e,t,n,i)},We=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},Ve=function(e,t,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Pe(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!De(i))throw new Error(I.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ze=function(e,t,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw new Error(I.errorPrefix(e,t,i)+"must be a boolean.")},Ge=function(){function e(e,t){this.repo_=e;this.path_=t}e.prototype.cancel=function(e){I.validateArgCount("OnDisconnect.cancel",0,1,arguments.length);I.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new I.Deferred;this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e));return t.promise};e.prototype.remove=function(e){I.validateArgCount("OnDisconnect.remove",0,1,arguments.length);We("OnDisconnect.remove",this.path_);I.validateCallback("OnDisconnect.remove",1,e,!0);var t=new I.Deferred;this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e));return t.promise};e.prototype.set=function(e,t){I.validateArgCount("OnDisconnect.set",1,2,arguments.length);We("OnDisconnect.set",this.path_);Ne("OnDisconnect.set",1,e,this.path_,!1);I.validateCallback("OnDisconnect.set",2,t,!0);var n=new I.Deferred;this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t));return n.promise};e.prototype.setWithPriority=function(e,t,n){I.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length);We("OnDisconnect.setWithPriority",this.path_);Ne("OnDisconnect.setWithPriority",1,e,this.path_,!1);$e("OnDisconnect.setWithPriority",2,t,!1);I.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var i=new I.Deferred;this.repo_.onDisconnectSetWithPriority(this.path_,e,t,i.wrapCallback(n));return i.promise};e.prototype.update=function(e,t){I.validateArgCount("OnDisconnect.update",1,2,arguments.length);We("OnDisconnect.update",this.path_);if(Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n;G("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ue("OnDisconnect.update",1,e,this.path_,!1);I.validateCallback("OnDisconnect.update",2,t,!0);var r=new I.Deferred;this.repo_.onDisconnectUpdate(this.path_,e,r.wrapCallback(t));return r.promise};return e}(),Qe=function(){function e(e,t){this.committed=e;this.snapshot=t}e.prototype.toJSON=function(){I.validateArgCount("TransactionResult.toJSON",0,1,arguments.length);return{committed:this.committed,snapshot:this.snapshot.toJSON()}};return e}(),Ke=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(i){var r=i===t;t=i;var s,o=new Array(8);for(s=7;s>=0;s--){o[s]=e.charAt(i%64);i=Math.floor(i/64)}I.assert(0===i,"Cannot push at time == 0");var a=o.join("");if(r){for(s=11;s>=0&&63===n[s];s--)n[s]=0;n[s]++}else for(s=0;12>s;s++)n[s]=Math.floor(64*Math.random());for(s=0;12>s;s++)a+=e.charAt(n[s]);I.assert(20===a.length,"nextPushId: Length should be 20.");return a}}(),Ye=function(){function e(e,t){this.name=e;this.node=t}e.Wrap=function(t,n){return new e(t,n)};return e}(),Xe=function(){function e(){}e.prototype.getCompare=function(){return this.compare.bind(this)};e.prototype.indexedValueChanged=function(e,t){var n=new Ye(X,e),i=new Ye(X,t);return 0!==this.compare(n,i)};e.prototype.minPost=function(){return Ye.MIN};return e}(),Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}T.__extends(t,e);Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return _},set:function(e){_=e},enumerable:!1,configurable:!0});t.prototype.compare=function(e,t){return Z(e.name,t.name)};t.prototype.isDefinedOn=function(e){throw I.assertionError("KeyIndex.isDefinedOn not expected to be called.")};t.prototype.indexedValueChanged=function(e,t){return!1};t.prototype.minPost=function(){return Ye.MIN};t.prototype.maxPost=function(){return new Ye(J,_)};t.prototype.makePost=function(e,t){I.assert("string"==typeof e,"KeyIndex indexValue must always be a string.");return new Ye(e,_)};t.prototype.toString=function(){return".key"};return t}(Xe),Ze=new Je,et=function(e){return"number"==typeof e?"number:"+re(e):"string:"+e},tt=function(e){if(e.isLeafNode()){var t=e.val();I.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&I.contains(t,".sv"),"Priority must be a string or number.")}else I.assert(e===y||e.isEmpty(),"priority of unexpected type.");I.assert(e===y||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},nt=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE);this.value_=t;this.priorityNode_=n;this.lazyHash_=null;I.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value.");tt(this.priorityNode_)}Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return k},set:function(e){k=e},enumerable:!1,configurable:!0});e.prototype.isLeafNode=function(){return!0};e.prototype.getPriority=function(){return this.priorityNode_};e.prototype.updatePriority=function(t){return new e(this.value_,t)};e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE};e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE};e.prototype.hasChild=function(){return!1};e.prototype.getPredecessorChildName=function(e,t){return null};e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)};e.prototype.updateChild=function(t,n){var i=t.getFront();if(null===i)return n;if(n.isEmpty()&&".priority"!==i)return this;I.assert(".priority"!==i||1===t.getLength(),".priority must be the last token in a path");return this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n))};e.prototype.isEmpty=function(){return!1};e.prototype.numChildren=function(){return 0};e.prototype.forEachChild=function(e,t){return!1};e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()};e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+et(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":";e+="number"===t?re(this.value_):this.value_;this.lazyHash_=U(e)}return this.lazyHash_};e.prototype.getValue=function(){return this.value_};e.prototype.compareTo=function(t){if(t===e.__childrenNodeConstructor.EMPTY_NODE)return 1;if(t instanceof e.__childrenNodeConstructor)return-1;I.assert(t.isLeafNode(),"Unknown node type");return this.compareToLeafNode_(t)};e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,i=typeof this.value_,r=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(i);I.assert(r>=0,"Unknown leaf type: "+n);I.assert(s>=0,"Unknown leaf type: "+i);return r===s?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-r};e.prototype.withIndex=function(){return this};e.prototype.isIndexed=function(){return!0};e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1};e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e}(),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}T.__extends(t,e);t.prototype.compare=function(e,t){var n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?Z(e.name,t.name):r};t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()};t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())};t.prototype.minPost=function(){return Ye.MIN};t.prototype.maxPost=function(){return new Ye(J,new nt("[PRIORITY-POST]",S))};t.prototype.makePost=function(e,t){var n=b(e);return new Ye(t,new nt("[PRIORITY-POST]",n))};t.prototype.toString=function(){return".priority"};return t}(Xe),rt=new it,st=function(){function e(e,t,n,i,r){void 0===r&&(r=null);this.isReverse_=i;this.resultGenerator_=r;this.nodeStack_=[];for(var s=1;!e.isEmpty();){e=e;s=t?n(e.key,t):1;i&&(s*=-1);if(0>s)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e);e=this.isReverse_?e.right:e.left}}}e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_){t=t.left;for(;!t.isEmpty();){this.nodeStack_.push(t);t=t.right}}else{t=t.right;for(;!t.isEmpty();){this.nodeStack_.push(t);t=t.left}}return e};e.prototype.hasNext=function(){return this.nodeStack_.length>0};e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}};return e}(),ot=function(){function e(t,n,i,r,s){this.key=t;this.value=n;this.color=null!=i?i:e.RED;this.left=null!=r?r:ct.EMPTY_NODE;this.right=null!=s?s:ct.EMPTY_NODE}e.prototype.copy=function(t,n,i,r,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)};e.prototype.count=function(){return this.left.count()+1+this.right.count()};e.prototype.isEmpty=function(){return!1};e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)};e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)};e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()};e.prototype.minKey=function(){return this.min_().key};e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()};e.prototype.insert=function(e,t,n){var i=this,r=n(e,i.key);i=0>r?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n));return i.fixUp_()};e.prototype.removeMin_=function(){if(this.left.isEmpty())return ct.EMPTY_NODE;var e=this;e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_());e=e.copy(null,null,null,e.left.removeMin_(),null);return e.fixUp_()};e.prototype.remove=function(e,t){var n,i;n=this;if(t(e,n.key)<0){n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_());n=n.copy(null,null,null,n.left.remove(e,t),null)}else{n.left.isRed_()&&(n=n.rotateRight_());n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_());if(0===t(e,n.key)){if(n.right.isEmpty())return ct.EMPTY_NODE;i=n.right.min_();n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()};e.prototype.isRed_=function(){return this.color};e.prototype.fixUp_=function(){var e=this;e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_());e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_());e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_());return e};e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();if(e.right.left.isRed_()){e=e.copy(null,null,null,null,e.right.rotateRight_());e=e.rotateLeft_();e=e.colorFlip_()}return e};e.prototype.moveRedRight_=function(){var e=this.colorFlip_();if(e.left.left.isRed_()){e=e.rotateRight_();e=e.colorFlip_()}return e};e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)};e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)};e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)};e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1};e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)};e.RED=!0;e.BLACK=!1;return e}(),at=function(){function e(){}e.prototype.copy=function(e,t,n,i,r){return this};e.prototype.insert=function(e,t,n){return new ot(e,t,null)};e.prototype.remove=function(e,t){return this};e.prototype.count=function(){return 0};e.prototype.isEmpty=function(){return!0};e.prototype.inorderTraversal=function(e){return!1};e.prototype.reverseTraversal=function(e){return!1};e.prototype.minKey=function(){return null};e.prototype.maxKey=function(){return null};e.prototype.check_=function(){return 0};e.prototype.isRed_=function(){return!1};return e}(),ct=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE);this.comparator_=t;this.root_=n}e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ot.BLACK,null,null))};e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ot.BLACK,null,null));
};e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){t=this.comparator_(e,n.key);if(0===t)return n.value;0>t?n=n.left:t>0&&(n=n.right)}return null};e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,i=null;!n.isEmpty();){t=this.comparator_(e,n.key);if(0===t){if(n.left.isEmpty())return i?i.key:null;n=n.left;for(;!n.right.isEmpty();)n=n.right;return n.key}if(0>t)n=n.left;else if(t>0){i=n;n=n.right}}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")};e.prototype.isEmpty=function(){return this.root_.isEmpty()};e.prototype.count=function(){return this.root_.count()};e.prototype.minKey=function(){return this.root_.minKey()};e.prototype.maxKey=function(){return this.root_.maxKey()};e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)};e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)};e.prototype.getIterator=function(e){return new st(this.root_,null,this.comparator_,!1,e)};e.prototype.getIteratorFrom=function(e,t){return new st(this.root_,e,this.comparator_,!1,t)};e.prototype.getReverseIteratorFrom=function(e,t){return new st(this.root_,e,this.comparator_,!0,t)};e.prototype.getReverseIterator=function(e){return new st(this.root_,null,this.comparator_,!0,e)};e.EMPTY_NODE=new at;return e}(),lt=Math.log(2),ut=function(){function e(e){var t=function(e){return parseInt(Math.log(e)/lt,10)},n=function(e){return parseInt(Array(e+1).join("1"),2)};this.count=t(e+1);this.current_=this.count-1;var i=n(this.count);this.bits_=e+1&i}e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);this.current_--;return e};return e}(),dt=function(e,t,n,i){e.sort(t);var r=function(t,i){var s,o,a=i-t;if(0===a)return null;if(1===a){s=e[t];o=n?n(s):s;return new ot(o,s.node,ot.BLACK,null,null)}var c=parseInt(a/2,10)+t,l=r(t,c),u=r(c+1,i);s=e[c];o=n?n(s):s;return new ot(o,s.node,ot.BLACK,l,u)},s=function(t){for(var i=null,s=null,o=e.length,a=function(t,i){var s=o-t,a=o;o-=t;var l=r(s+1,a),u=e[s],d=n?n(u):u;c(new ot(d,u.node,i,null,l))},c=function(e){if(i){i.left=e;i=e}else{s=e;i=e}},l=0;l<t.count;++l){var u=t.nextBitIsOne(),d=Math.pow(2,t.count-(l+1));if(u)a(d,ot.BLACK);else{a(d,ot.BLACK);a(d,ot.RED)}}return s},o=new ut(e.length),a=s(o);return new ct(i||t,a)},ht={},ft=function(){function e(e,t){this.indexes_=e;this.indexSet_=t}Object.defineProperty(e,"Default",{get:function(){I.assert(ht&&rt,"ChildrenNode.ts has not been loaded");w=w||new e({".priority":ht},{".priority":rt});return w},enumerable:!1,configurable:!0});e.prototype.get=function(e){var t=I.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ct?t:null};e.prototype.hasIndex=function(e){return I.contains(this.indexSet_,e.toString())};e.prototype.addIndex=function(t,n){I.assert(t!==Ze,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i=[],r=!1,s=n.getIterator(Ye.Wrap),o=s.getNext();o;){r=r||t.isDefinedOn(o.node);i.push(o);o=s.getNext()}var a;a=r?dt(i,t.getCompare()):ht;var c=t.toString(),l=T.__assign({},this.indexSet_);l[c]=t;var u=T.__assign({},this.indexes_);u[c]=a;return new e(u,l)};e.prototype.addToIndexes=function(t,n){var i=this,r=I.map(this.indexes_,function(e,r){var s=I.safeGet(i.indexSet_,r);I.assert(s,"Missing index implementation for "+r);if(e===ht){if(s.isDefinedOn(t.node)){for(var o=[],a=n.getIterator(Ye.Wrap),c=a.getNext();c;){c.name!==t.name&&o.push(c);c=a.getNext()}o.push(t);return dt(o,s.getCompare())}return ht}var l=n.get(t.name),u=e;l&&(u=u.remove(new Ye(t.name,l)));return u.insert(t,t.node)});return new e(r,this.indexSet_)};e.prototype.removeFromIndexes=function(t,n){var i=I.map(this.indexes_,function(e){if(e===ht)return e;var i=n.get(t.name);return i?e.remove(new Ye(t.name,i)):e});return new e(i,this.indexSet_)};return e}(),gt=function(){function e(e,t,n){this.children_=e;this.priorityNode_=t;this.indexMap_=n;this.lazyHash_=null;this.priorityNode_&&tt(this.priorityNode_);this.children_.isEmpty()&&I.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}Object.defineProperty(e,"EMPTY_NODE",{get:function(){return C||(C=new e(new ct(h),null,ft.Default))},enumerable:!1,configurable:!0});e.prototype.isLeafNode=function(){return!1};e.prototype.getPriority=function(){return this.priorityNode_||C};e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)};e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?C:t};e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())};e.prototype.hasChild=function(e){return null!==this.children_.get(e)};e.prototype.updateImmediateChild=function(t,n){I.assert(n,"We should always be passing snapshot nodes");if(".priority"===t)return this.updatePriority(n);var i=new Ye(t,n),r=void 0,s=void 0;if(n.isEmpty()){r=this.children_.remove(t);s=this.indexMap_.removeFromIndexes(i,this.children_)}else{r=this.children_.insert(t,n);s=this.indexMap_.addToIndexes(i,this.children_)}var o=r.isEmpty()?C:this.priorityNode_;return new e(r,o,s)};e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;I.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,i)};e.prototype.isEmpty=function(){return this.children_.isEmpty()};e.prototype.numChildren=function(){return this.children_.count()};e.prototype.val=function(t){if(this.isEmpty())return null;var n={},i=0,r=0,s=!0;this.forEachChild(rt,function(o,a){n[o]=a.val(t);i++;s&&e.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1});if(!t&&s&&2*i>r){var o=[];for(var a in n)o[a]=n[a];return o}t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val());return n};e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+et(this.getPriority().val())+":");this.forEachChild(rt,function(t,n){var i=n.hash();""!==i&&(e+=":"+t+":"+i)});this.lazyHash_=""===e?"":U(e)}return this.lazyHash_};e.prototype.getPredecessorChildName=function(e,t,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new Ye(e,t));return r?r.name:null}return this.children_.getPredecessorKey(e)};e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()};e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Ye(t,this.children_.get(t)):null};e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()};e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Ye(t,this.children_.get(t)):null};e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)};e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)};e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var i=this.children_.getIteratorFrom(e.name,Ye.Wrap),r=i.peek();null!=r&&t.compare(r,e)<0;){i.getNext();r=i.peek()}return i};e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)};e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var i=this.children_.getReverseIteratorFrom(e.name,Ye.Wrap),r=i.peek();null!=r&&t.compare(r,e)>0;){i.getNext();r=i.peek()}return i};e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mt?-1:0};e.prototype.withIndex=function(t){if(t===Ze||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)};e.prototype.isIndexed=function(e){return e===Ze||this.indexMap_.hasIndex(e)};e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(rt),i=t.getIterator(rt),r=n.getNext(),s=i.getNext();r&&s;){if(r.name!==s.name||!r.node.equals(s.node))return!1;r=n.getNext();s=i.getNext()}return null===r&&null===s}return!1}return!1};e.prototype.resolveIndex_=function(e){return e===Ze?null:this.indexMap_.get(e.toString())};e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;return e}(),pt=function(e){function t(){return e.call(this,new ct(h),gt.EMPTY_NODE,ft.Default)||this}T.__extends(t,e);t.prototype.compareTo=function(e){return e===this?0:1};t.prototype.equals=function(e){return e===this};t.prototype.getPriority=function(){return this};t.prototype.getImmediateChild=function(e){return gt.EMPTY_NODE};t.prototype.isEmpty=function(){return!1};return t}(gt),mt=new pt;Object.defineProperties(Ye,{MIN:{value:new Ye(X,gt.EMPTY_NODE)},MAX:{value:new Ye(J,mt)}});Je.__EMPTY_NODE=gt.EMPTY_NODE;nt.__childrenNodeConstructor=gt;c(mt);u(mt);/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var vt=!0;l(f);/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var _t,yt,kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}T.__extends(t,e);t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?Z(e.name,t.name):n};t.prototype.isDefinedOn=function(e){return!0};t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)};t.prototype.minPost=function(){return Ye.MIN};t.prototype.maxPost=function(){return Ye.MAX};t.prototype.makePost=function(e,t){var n=f(e);return new Ye(t,n)};t.prototype.toString=function(){return".value"};return t}(Xe),bt=new kt,St=function(e){function t(t){var n=e.call(this)||this;n.indexPath_=t;I.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key");return n}T.__extends(t,e);t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)};t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()};t.prototype.compare=function(e,t){var n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?Z(e.name,t.name):r};t.prototype.makePost=function(e,t){var n=f(e),i=gt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ye(t,i)};t.prototype.maxPost=function(){var e=gt.EMPTY_NODE.updateChild(this.indexPath_,mt);return new Ye(J,e)};t.prototype.toString=function(){return this.indexPath_.slice().join("/")};return t}(Xe),wt=function(){function e(e,t,n){this.node_=e;this.ref_=t;this.index_=n}e.prototype.val=function(){I.validateArgCount("DataSnapshot.val",0,0,arguments.length);return this.node_.val()};e.prototype.exportVal=function(){I.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length);return this.node_.val(!0)};e.prototype.toJSON=function(){I.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length);return this.exportVal()};e.prototype.exists=function(){I.validateArgCount("DataSnapshot.exists",0,0,arguments.length);return!this.node_.isEmpty()};e.prototype.child=function(t){I.validateArgCount("DataSnapshot.child",0,1,arguments.length);t=String(t);je("DataSnapshot.child",1,t,!1);var n=new fe(t),i=this.ref_.child(n);return new e(this.node_.getChild(n),i,rt)};e.prototype.hasChild=function(e){I.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length);je("DataSnapshot.hasChild",1,e,!1);var t=new fe(e);return!this.node_.getChild(t).isEmpty()};e.prototype.getPriority=function(){I.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length);return this.node_.getPriority().val()};e.prototype.forEach=function(t){var n=this;I.validateArgCount("DataSnapshot.forEach",1,1,arguments.length);I.validateCallback("DataSnapshot.forEach",1,t,!1);if(this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,function(i,r){return t(new e(r,n.ref_.child(i),rt))})};e.prototype.hasChildren=function(){I.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length);return this.node_.isLeafNode()?!1:!this.node_.isEmpty()};Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0});e.prototype.numChildren=function(){I.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length);return this.node_.numChildren()};e.prototype.getRef=function(){I.validateArgCount("DataSnapshot.ref",0,0,arguments.length);return this.ref_};Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0});return e}(),Ct=function(){function e(e,t,n,i){this.eventType=e;this.eventRegistration=t;this.snapshot=n;this.prevName=i}e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path};e.prototype.getEventType=function(){return this.eventType};e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)};e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+I.stringify(this.snapshot.exportVal())};return e}(),Et=function(){function e(e,t,n){this.eventRegistration=e;this.error=t;this.path=n}e.prototype.getPath=function(){return this.path};e.prototype.getEventType=function(){return"cancel"};e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)};e.prototype.toString=function(){return this.path.toString()+":cancel"};return e}(),Tt=function(){function e(e,t,n){this.callback_=e;this.cancelCallback_=t;this.context_=n}e.prototype.respondsTo=function(e){return"value"===e};e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Ct("value",this,new wt(e.snapshotNode,t.getRef(),n))};e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){I.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var i=this.callback_;return function(){i.call(t,e.snapshot)}};e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Et(this,e,t):null};e.prototype.matches=function(t){return t instanceof e?t.callback_&&this.callback_?t.callback_===this.callback_&&t.context_===this.context_:!0:!1};e.prototype.hasAnyCallback=function(){return null!==this.callback_};return e}(),It=function(){function e(e,t,n){this.callbacks_=e;this.cancelCallback_=t;this.context_=n}e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;t="children_removed"===t?"child_removed":t;return I.contains(this.callbacks_,t)};e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Et(this,e,t):null};e.prototype.createEvent=function(e,t){I.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),i=t.getQueryParams().getIndex();return new Ct(e.type,this,new wt(e.snapshotNode,n,i),e.prevName)};e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){I.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var i=this.callbacks_[e.eventType];return function(){i.call(t,e.snapshot,e.prevName)}};e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var i=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),s=i.length,o=r.length;if(s===o){if(1===s){var a=i[0],c=r[0];return!(c!==a||t.callbacks_[a]&&this.callbacks_[c]&&t.callbacks_[a]!==this.callbacks_[c])}return r.every(function(e){return t.callbacks_[e]===n.callbacks_[e]})}}}return!1};e.prototype.hasAnyCallback=function(){return null!==this.callbacks_};return e}(),At=function(){function e(e,t,n,i){this.repo=e;this.path=t;this.queryParams_=n;this.orderByCalled_=i}Object.defineProperty(e,"__referenceConstructor",{get:function(){I.assert(_t,"Reference.ts has not been loaded");return _t},set:function(e){_t=e},enumerable:!1,configurable:!0});e.validateQueryEndpoints_=function(e){var t=null,n=null;e.hasStart()&&(t=e.getIndexStartValue());e.hasEnd()&&(n=e.getIndexEndValue());if(e.getIndex()===Ze){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){var s=e.getIndexStartName();if(s!==X)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(e.hasEnd()){var o=e.getIndexEndName();if(o!==J)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(e.getIndex()===rt){if(null!=t&&!Me(t)||null!=n&&!Me(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else{I.assert(e.getIndex()instanceof St||e.getIndex()===bt,"unknown index type.");if(null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}};e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")};e.prototype.validateNoPreviousOrderByCall_=function(e){if(this.orderByCalled_===!0)throw new Error(e+": You can't combine multiple orderBy calls.")};e.prototype.getQueryParams=function(){return this.queryParams_};e.prototype.getRef=function(){I.validateArgCount("Query.ref",0,0,arguments.length);return new e.__referenceConstructor(this.repo,this.path)};e.prototype.on=function(t,n,i,r){I.validateArgCount("Query.on",2,4,arguments.length);qe("Query.on",1,t,!1);I.validateCallback("Query.on",2,n,!1);var s=e.getCancelAndContextArgs_("Query.on",i,r);if("value"===t)this.onValueEvent(n,s.cancel,s.context);else{var o={};o[t]=n;this.onChildEvent(o,s.cancel,s.context)}return n};e.prototype.onValueEvent=function(e,t,n){var i=new Tt(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,i)};e.prototype.onChildEvent=function(e,t,n){var i=new It(e,t,n);this.repo.addEventCallbackForQuery(this,i)};e.prototype.off=function(e,t,n){I.validateArgCount("Query.off",0,3,arguments.length);qe("Query.off",1,e,!0);I.validateCallback("Query.off",2,t,!0);I.validateContextObject("Query.off",3,n,!0);var i=null,r=null;if("value"===e){var s=t||null;i=new Tt(s,null,n||null)}else if(e){if(t){r={};r[e]=t}i=new It(r,null,n||null)}this.repo.removeEventCallbackForQuery(this,i)};e.prototype.once=function(t,n,i,r){var s=this;I.validateArgCount("Query.once",1,4,arguments.length);qe("Query.once",1,t,!1);I.validateCallback("Query.once",2,n,!0);var o=e.getCancelAndContextArgs_("Query.once",i,r),a=!0,c=new I.Deferred;c.promise["catch"](function(){});var l=function(e){if(a){a=!1;s.off(t,l);n&&n.bind(o.context)(e);c.resolve(e)}};this.on(t,l,function(e){s.off(t,l);o.cancel&&o.cancel.bind(o.context)(e);c.reject(e)});return c.promise};e.prototype.limitToFirst=function(t){I.validateArgCount("Query.limitToFirst",1,1,arguments.length);if("number"!=typeof t||Math.floor(t)!==t||0>=t)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)};e.prototype.limitToLast=function(t){I.validateArgCount("Query.limitToLast",1,1,arguments.length);if("number"!=typeof t||Math.floor(t)!==t||0>=t)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)};e.prototype.orderByChild=function(t){I.validateArgCount("Query.orderByChild",1,1,arguments.length);if("$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');je("Query.orderByChild",1,t,!1);this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new fe(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new St(n),r=this.queryParams_.orderBy(i);e.validateQueryEndpoints_(r);return new e(this.repo,this.path,r,!0)};e.prototype.orderByKey=function(){I.validateArgCount("Query.orderByKey",0,0,arguments.length);this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Ze);e.validateQueryEndpoints_(t);return new e(this.repo,this.path,t,!0)};e.prototype.orderByPriority=function(){I.validateArgCount("Query.orderByPriority",0,0,arguments.length);this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(rt);e.validateQueryEndpoints_(t);return new e(this.repo,this.path,t,!0)};e.prototype.orderByValue=function(){I.validateArgCount("Query.orderByValue",0,0,arguments.length);this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(bt);e.validateQueryEndpoints_(t);return new e(this.repo,this.path,t,!0)};e.prototype.startAt=function(t,n){void 0===t&&(t=null);I.validateArgCount("Query.startAt",0,2,arguments.length);Ne("Query.startAt",1,t,this.path,!0);He("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(t,n);e.validateLimit_(i);e.validateQueryEndpoints_(i);if(this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");if(void 0===t){t=null;n=null}return new e(this.repo,this.path,i,this.orderByCalled_)};e.prototype.endAt=function(t,n){void 0===t&&(t=null);I.validateArgCount("Query.endAt",0,2,arguments.length);Ne("Query.endAt",1,t,this.path,!0);He("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(t,n);e.validateLimit_(i);e.validateQueryEndpoints_(i);if(this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,i,this.orderByCalled_)};e.prototype.equalTo=function(e,t){I.validateArgCount("Query.equalTo",1,2,arguments.length);Ne("Query.equalTo",1,e,this.path,!1);He("Query.equalTo",2,t,!0);if(this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)};e.prototype.toString=function(){I.validateArgCount("Query.toString",0,0,arguments.length);return this.repo.toString()+this.path.toUrlEncodedString()};e.prototype.toJSON=function(){I.validateArgCount("Query.toJSON",0,1,arguments.length);return this.toString()};e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()};e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=ne(e);return"{}"===t?"default":t};e.prototype.isEqual=function(t){I.validateArgCount("Query.isEqual",1,1,arguments.length);if(!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var i=this.repo===t.repo,r=this.path.equals(t.path),s=this.queryIdentifier()===t.queryIdentifier();return i&&r&&s};e.getCancelAndContextArgs_=function(e,t,n){var i={cancel:null,context:null};if(t&&n){i.cancel=t;I.validateCallback(e,3,i.cancel,!0);i.context=n;I.validateContextObject(e,4,i.context,!0)}else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error(I.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");i.cancel=t}return i};Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0});return e}(),xt=function(){function e(e){this.node_=e}e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)};e.prototype.node=function(){return this.node_};return e}(),Ot=function(){function e(e,t){this.syncTree_=e;this.path_=t}e.prototype.getImmediateChild=function(t){var n=this.path_.child(t);return new e(this.syncTree_,n)};e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)};return e}(),Pt=function(e){e=e||{};e.timestamp=e.timestamp||(new Date).getTime();return e},Rt=function(e,t,n){if(!e||"object"!=typeof e)return e;I.assert(".sv"in e,"Unexpected leaf node or priority contents");if("string"==typeof e[".sv"])return Dt(e[".sv"],t,n);if("object"==typeof e[".sv"])return Mt(e[".sv"],t);I.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2));return void 0},Dt=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:I.assert(!1,"Unexpected server value: "+e)}},Mt=function(e,t,n){e.hasOwnProperty("increment")||I.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var i=e.increment;"number"!=typeof i&&I.assert(!1,"Unexpected increment value: "+i);var r=t.node();I.assert(null!==r&&"undefined"!=typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls");if(!r.isLeafNode())return i;var s=r,o=s.getValue();return"number"!=typeof o?i:o+i},Nt=function(e,t,n,i){return g(t,new Ot(n,e),i)},Lt=function(e,t,n){return g(e,new xt(t),n)},Ft=function(){function e(){this.value=null;this.children=new Map}e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();e=e.popFront();if(this.children.has(t)){var n=this.children.get(t);return n.find(e)}return null}return null};e.prototype.remember=function(t,n){if(t.isEmpty()){this.value=n;this.children.clear()}else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var i=t.getFront();this.children.has(i)||this.children.set(i,new e);var r=this.children.get(i);t=t.popFront();r.remember(t,n)}};e.prototype.forget=function(e){if(e.isEmpty()){this.value=null;this.children.clear();return!0}if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;t.forEachChild(rt,function(e,t){n.remember(new fe(e),t)});return this.forget(e)}if(this.children.size>0){var i=e.getFront();e=e.popFront();if(this.children.has(i)){var r=this.children.get(i).forget(e);r&&this.children["delete"](i)}return 0===this.children.size}return!0};e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild(function(n,i){var r=new fe(e.toString()+"/"+n);i.forEachTree(r,t)})};e.prototype.forEachChild=function(e){this.children.forEach(function(t,n){e(n,t)})};return e}();!function(e){e[e.OVERWRITE=0]="OVERWRITE";e[e.MERGE=1]="MERGE";e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE";e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(yt||(yt={}));var Ut,$t,qt=function(){function e(e,t,n,i){this.fromUser=e;this.fromServer=t;this.queryId=n;this.tagged=i;I.assert(!i||t,"Tagged queries must be from server.")}e.User=new e(!0,!1,null,!1);e.Server=new e(!1,!0,null,!1);e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)};return e}(),Ht=function(){function e(e,t,n){this.path=e;this.affectedTree=t;this.revert=n;this.type=yt.ACK_USER_WRITE;this.source=qt.User}e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value){I.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths.");return this}var n=this.affectedTree.subtree(new fe(t));return new e(fe.Empty,n,this.revert)}I.assert(this.path.getFront()===t,"operationForChild called for unrelated child.");return new e(this.path.popFront(),this.affectedTree,this.revert)};return e}(),jt=function(){Ut||(Ut=new ct(ee));return Ut},Bt=function(){function e(e,t){void 0===t&&(t=jt());this.value=e;this.children=t}e.fromObject=function(t){var n=e.Empty;s(t,function(e,t){n=n.set(new fe(e),t)});return n};e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()};e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:fe.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(e.popFront(),t);if(null!=r){var s=new fe(n).child(r.path);return{path:s,value:r.value}}return null}return null};e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})};e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),i=this.children.get(n);return null!==i?i.subtree(t.popFront()):e.Empty};e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var i=t.getFront(),r=this.children.get(i)||e.Empty,s=r.set(t.popFront(),n),o=this.children.insert(i,s);return new e(this.value,o)};e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),i=this.children.get(n);if(i){var r=i.remove(t.popFront()),s=void 0;s=r.isEmpty()?this.children.remove(n):this.children.insert(n,r);return null===this.value&&s.isEmpty()?e.Empty:new e(this.value,s)}return this};e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null};e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var i=t.getFront(),r=this.children.get(i)||e.Empty,s=r.setTree(t.popFront(),n),o=void 0;o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s);return new e(this.value,o)};e.prototype.fold=function(e){return this.fold_(fe.Empty,e)};e.prototype.fold_=function(e,t){var n={};this.children.inorderTraversal(function(i,r){n[i]=r.fold_(e.child(i),t)});return t(e,this.value,n)};e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,fe.Empty,t)};e.prototype.findOnPath_=function(e,t,n){var i=this.value?n(t,this.value):!1;if(i)return i;if(e.isEmpty())return null;var r=e.getFront(),s=this.children.get(r);return s?s.findOnPath_(e.popFront(),t.child(r),n):null};e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,fe.Empty,t)};e.prototype.foreachOnPath_=function(t,n,i){if(t.isEmpty())return this;this.value&&i(n,this.value);var r=t.getFront(),s=this.children.get(r);return s?s.foreachOnPath_(t.popFront(),n.child(r),i):e.Empty};e.prototype.foreach=function(e){this.foreach_(fe.Empty,e)};e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,i){i.foreach_(e.child(n),t)});this.value&&t(e,this.value)};e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})};e.Empty=new e(null);return e}(),Wt=function(){function e(e,t){this.source=e;this.path=t;this.type=yt.LISTEN_COMPLETE}e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,fe.Empty):new e(this.source,this.path.popFront())};return e}(),Vt=function(){function e(e,t,n){this.source=e;this.path=t;this.snap=n;this.type=yt.OVERWRITE}e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,fe.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)};return e}(),zt=function(){function e(e,t,n){this.source=e;this.path=t;this.children=n;this.type=yt.MERGE}e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new fe(t));return n.isEmpty()?null:n.value?new Vt(this.source,fe.Empty,n.value):new e(this.source,fe.Empty,n)}I.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation");return new e(this.source,this.path.popFront(),this.children)};e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};return e}(),Gt=function(){function e(e,t,n){this.node_=e;this.fullyInitialized_=t;this.filtered_=n}e.prototype.isFullyInitialized=function(){return this.fullyInitialized_};e.prototype.isFiltered=function(){return this.filtered_};e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)};e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)};e.prototype.getNode=function(){return this.node_};return e}(),Qt=function(){function e(e,t){this.eventCache_=e;this.serverCache_=t}e.prototype.updateEventSnap=function(t,n,i){return new e(new Gt(t,n,i),this.serverCache_)};e.prototype.updateServerSnap=function(t,n,i){return new e(this.eventCache_,new Gt(t,n,i))};e.prototype.getEventCache=function(){return this.eventCache_};e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null};e.prototype.getServerCache=function(){return this.serverCache_};e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null};e.Empty=new e(new Gt(gt.EMPTY_NODE,!1,!1),new Gt(gt.EMPTY_NODE,!1,!1));return e}(),Kt=function(){function e(e,t,n,i,r){this.type=e;this.snapshotNode=t;this.childName=n;this.oldSnap=i;this.prevName=r}e.valueChange=function(t){return new e(e.VALUE,t)};e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)};e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)};e.childChangedChange=function(t,n,i){return new e(e.CHILD_CHANGED,n,t,i)};e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)};e.CHILD_ADDED="child_added";e.CHILD_REMOVED="child_removed";e.CHILD_CHANGED="child_changed";e.CHILD_MOVED="child_moved";e.VALUE="value";return e}(),Yt=function(){function e(e){this.index_=e}e.prototype.updateChild=function(e,t,n,i,r,s){I.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);if(o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty())return e;null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Kt.childRemovedChange(t,o)):I.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Kt.childAddedChange(t,n)):s.trackChildChange(Kt.childChangedChange(t,n,o)));return e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_)};e.prototype.updateFullNode=function(e,t,n){if(null!=n){e.isLeafNode()||e.forEachChild(rt,function(e,i){t.hasChild(e)||n.trackChildChange(Kt.childRemovedChange(e,i))});t.isLeafNode()||t.forEachChild(rt,function(t,i){if(e.hasChild(t)){var r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(Kt.childChangedChange(t,i,r))}else n.trackChildChange(Kt.childAddedChange(t,i))})}return t.withIndex(this.index_)};e.prototype.updatePriority=function(e,t){return e.isEmpty()?gt.EMPTY_NODE:e.updatePriority(t)};e.prototype.filtersNodes=function(){return!1};e.prototype.getIndexedFilter=function(){return this};e.prototype.getIndex=function(){return this.index_};return e}(),Xt=function(){function e(){this.changeMap=new Map}e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;I.assert(t===Kt.CHILD_ADDED||t===Kt.CHILD_CHANGED||t===Kt.CHILD_REMOVED,"Only child changes supported for tracking");I.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var r=i.type;if(t===Kt.CHILD_ADDED&&r===Kt.CHILD_REMOVED)this.changeMap.set(n,Kt.childChangedChange(n,e.snapshotNode,i.snapshotNode));else if(t===Kt.CHILD_REMOVED&&r===Kt.CHILD_ADDED)this.changeMap["delete"](n);else if(t===Kt.CHILD_REMOVED&&r===Kt.CHILD_CHANGED)this.changeMap.set(n,Kt.childRemovedChange(n,i.oldSnap));else if(t===Kt.CHILD_CHANGED&&r===Kt.CHILD_ADDED)this.changeMap.set(n,Kt.childAddedChange(n,e.snapshotNode));else{if(t!==Kt.CHILD_CHANGED||r!==Kt.CHILD_CHANGED)throw I.assertionError("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,Kt.childChangedChange(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)};e.prototype.getChanges=function(){return Array.from(this.changeMap.values())};return e}(),Jt=function(){function e(){}e.prototype.getCompleteChild=function(e){return null};e.prototype.getChildAfterChild=function(e,t,n){return null};return e}(),Zt=new Jt,en=function(){function e(e,t,n){void 0===n&&(n=null);this.writes_=e;this.viewCache_=t;this.optCompleteServerCache_=n}e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Gt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)};e.prototype.getChildAfterChild=function(e,t,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,t,1,n,e);return 0===r.length?null:r[0]};return e}(),tn=function(){function e(e,t){this.viewCache=e;this.changes=t}return e}(),nn=function(){function e(e){this.filter_=e}e.prototype.assertIndexed=function(e){I.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed");I.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")};e.prototype.applyOperation=function(t,n,i,r){var s,o,a=new Xt;if(n.type===yt.OVERWRITE){var c=n;if(c.source.fromUser)s=this.applyUserOverwrite_(t,c.path,c.snap,i,r,a);else{I.assert(c.source.fromServer,"Unknown source.");o=c.source.tagged||t.getServerCache().isFiltered()&&!c.path.isEmpty();s=this.applyServerOverwrite_(t,c.path,c.snap,i,r,o,a)}}else if(n.type===yt.MERGE){var l=n;if(l.source.fromUser)s=this.applyUserMerge_(t,l.path,l.children,i,r,a);else{I.assert(l.source.fromServer,"Unknown source.");o=l.source.tagged||t.getServerCache().isFiltered();s=this.applyServerMerge_(t,l.path,l.children,i,r,o,a)}}else if(n.type===yt.ACK_USER_WRITE){var u=n;s=u.revert?this.revertUserWrite_(t,u.path,i,r,a):this.ackUserWrite_(t,u.path,u.affectedTree,i,r,a)}else{if(n.type!==yt.LISTEN_COMPLETE)throw I.assertionError("Unknown operation type: "+n.type);s=this.listenComplete_(t,n.path,i,a)}var d=a.getChanges();e.maybeAddValueEvent_(t,s,d);return new tn(s,d)};e.maybeAddValueEvent_=function(e,t,n){var i=t.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Kt.valueChange(t.getCompleteEventSnap()))}};e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,i,r){var s=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var o=void 0,a=void 0;if(t.isEmpty()){I.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data");if(e.getServerCache().isFiltered()){var c=e.getCompleteServerSnap(),l=c instanceof gt?c:gt.EMPTY_NODE,u=n.calcCompleteEventChildren(l);o=this.filter_.updateFullNode(e.getEventCache().getNode(),u,r)}else{var d=n.calcCompleteEventCache(e.getCompleteServerSnap());o=this.filter_.updateFullNode(e.getEventCache().getNode(),d,r)}}else{var h=t.getFront();if(".priority"===h){I.assert(1===t.getLength(),"Can't have a priority with additional path components");var f=s.getNode();a=e.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(t,f,a);o=null!=g?this.filter_.updatePriority(f,g):s.getNode()}else{var p=t.popFront(),m=void 0;if(s.isCompleteForChild(h)){a=e.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(t,s.getNode(),a);m=null!=v?s.getNode().getImmediateChild(h).updateChild(p,v):s.getNode().getImmediateChild(h)}else m=n.calcCompleteChild(h,e.getServerCache());o=null!=m?this.filter_.updateChild(s.getNode(),h,m,p,i,r):s.getNode()}}return e.updateEventSnap(o,s.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())};e.prototype.applyServerOverwrite_=function(e,t,n,i,r,s,o){var a,c=e.getServerCache(),l=s?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())a=l.updateFullNode(c.getNode(),n,null);else if(l.filtersNodes()&&!c.isFiltered()){var u=c.getNode().updateChild(t,n);a=l.updateFullNode(c.getNode(),u,null)}else{var d=t.getFront();if(!c.isCompleteForPath(t)&&t.getLength()>1)return e;var h=t.popFront(),f=c.getNode().getImmediateChild(d),g=f.updateChild(h,n);a=".priority"===d?l.updatePriority(c.getNode(),g):l.updateChild(c.getNode(),d,g,h,Zt,null)}var p=e.updateServerSnap(a,c.isFullyInitialized()||t.isEmpty(),l.filtersNodes()),m=new en(i,p,r);return this.generateEventCacheAfterServerEvent_(p,t,i,m,o)};e.prototype.applyUserOverwrite_=function(e,t,n,i,r,s){var o,a,c=e.getEventCache(),l=new en(i,e,r);if(t.isEmpty()){a=this.filter_.updateFullNode(e.getEventCache().getNode(),n,s);o=e.updateEventSnap(a,!0,this.filter_.filtersNodes())}else{var u=t.getFront();if(".priority"===u){
a=this.filter_.updatePriority(e.getEventCache().getNode(),n);o=e.updateEventSnap(a,c.isFullyInitialized(),c.isFiltered())}else{var d=t.popFront(),h=c.getNode().getImmediateChild(u),f=void 0;if(d.isEmpty())f=n;else{var g=l.getCompleteChild(u);f=null!=g?".priority"===d.getBack()&&g.getChild(d.parent()).isEmpty()?g:g.updateChild(d,n):gt.EMPTY_NODE}if(h.equals(f))o=e;else{var p=this.filter_.updateChild(c.getNode(),u,f,d,l,s);o=e.updateEventSnap(p,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return o};e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)};e.prototype.applyUserMerge_=function(t,n,i,r,s,o){var a=this,c=t;i.foreach(function(i,l){var u=n.child(i);e.cacheHasChild_(t,u.getFront())&&(c=a.applyUserOverwrite_(c,u,l,r,s,o))});i.foreach(function(i,l){var u=n.child(i);e.cacheHasChild_(t,u.getFront())||(c=a.applyUserOverwrite_(c,u,l,r,s,o))});return c};e.prototype.applyMerge_=function(e,t){t.foreach(function(t,n){e=e.updateChild(t,n)});return e};e.prototype.applyServerMerge_=function(e,t,n,i,r,s,o){var a=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var c,l=e;c=t.isEmpty()?n:Bt.Empty.setTree(t,n);var u=e.getServerCache().getNode();c.children.inorderTraversal(function(t,n){if(u.hasChild(t)){var c=e.getServerCache().getNode().getImmediateChild(t),d=a.applyMerge_(c,n);l=a.applyServerOverwrite_(l,new fe(t),d,i,r,s,o)}});c.children.inorderTraversal(function(t,n){var c=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!u.hasChild(t)&&!c){var d=e.getServerCache().getNode().getImmediateChild(t),h=a.applyMerge_(d,n);l=a.applyServerOverwrite_(l,new fe(t),h,i,r,s,o)}});return l};e.prototype.ackUserWrite_=function(e,t,n,i,r,s){if(null!=i.shadowingWrite(t))return e;var o=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,a.getNode().getChild(t),i,r,o,s);if(t.isEmpty()){var c=Bt.Empty;a.getNode().forEachChild(Ze,function(e,t){c=c.set(new fe(e),t)});return this.applyServerMerge_(e,t,c,i,r,o,s)}return e}var l=Bt.Empty;n.foreach(function(e,n){var i=t.child(e);a.isCompleteForPath(i)&&(l=l.set(e,a.getNode().getChild(i)))});return this.applyServerMerge_(e,t,l,i,r,o,s)};e.prototype.listenComplete_=function(e,t,n,i){var r=e.getServerCache(),s=e.updateServerSnap(r.getNode(),r.isFullyInitialized()||t.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(s,t,n,Zt,i)};e.prototype.revertUserWrite_=function(e,t,n,i,r){var s;if(null!=n.shadowingWrite(t))return e;var o=new en(n,e,i),a=e.getEventCache().getNode(),c=void 0;if(t.isEmpty()||".priority"===t.getFront()){var l=void 0;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var u=e.getServerCache().getNode();I.assert(u instanceof gt,"serverChildren would be complete if leaf node");l=n.calcCompleteEventChildren(u)}l=l;c=this.filter_.updateFullNode(a,l,r)}else{var d=t.getFront(),h=n.calcCompleteChild(d,e.getServerCache());null==h&&e.getServerCache().isCompleteForChild(d)&&(h=a.getImmediateChild(d));c=null!=h?this.filter_.updateChild(a,d,h,t.popFront(),o,r):e.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(a,d,gt.EMPTY_NODE,t.popFront(),o,r):a;if(c.isEmpty()&&e.getServerCache().isFullyInitialized()){s=n.calcCompleteEventCache(e.getCompleteServerSnap());s.isLeafNode()&&(c=this.filter_.updateFullNode(c,s,r))}}s=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(fe.Empty);return e.updateEventSnap(c,s,this.filter_.filtersNodes())};return e}(),rn=function(){function e(e){this.query_=e;this.index_=this.query_.getQueryParams().getIndex()}e.prototype.generateEventsForChanges=function(e,t,n){var i=this,r=[],s=[];e.forEach(function(e){e.type===Kt.CHILD_CHANGED&&i.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&s.push(Kt.childMovedChange(e.childName,e.snapshotNode))});this.generateEventsForType_(r,Kt.CHILD_REMOVED,e,n,t);this.generateEventsForType_(r,Kt.CHILD_ADDED,e,n,t);this.generateEventsForType_(r,Kt.CHILD_MOVED,s,n,t);this.generateEventsForType_(r,Kt.CHILD_CHANGED,e,n,t);this.generateEventsForType_(r,Kt.VALUE,e,n,t);return r};e.prototype.generateEventsForType_=function(e,t,n,i,r){var s=this,o=n.filter(function(e){return e.type===t});o.sort(this.compareChanges_.bind(this));o.forEach(function(t){var n=s.materializeSingleChange_(t,r);i.forEach(function(i){i.respondsTo(t.type)&&e.push(i.createEvent(n,s.query_))})})};e.prototype.materializeSingleChange_=function(e,t){if("value"===e.type||"child_removed"===e.type)return e;e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_);return e};e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw I.assertionError("Should only compare child_ events.");var n=new Ye(e.childName,e.snapshotNode),i=new Ye(t.childName,t.snapshotNode);return this.index_.compare(n,i)};return e}(),sn=function(){function e(e,t){this.query_=e;this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new Yt(n.getIndex()),r=n.getNodeFilter();this.processor_=new nn(r);var s=t.getServerCache(),o=t.getEventCache(),a=i.updateFullNode(gt.EMPTY_NODE,s.getNode(),null),c=r.updateFullNode(gt.EMPTY_NODE,o.getNode(),null),l=new Gt(a,s.isFullyInitialized(),i.filtersNodes()),u=new Gt(c,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=new Qt(u,l);this.eventGenerator_=new rn(this.query_)}e.prototype.getQuery=function(){return this.query_};e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()};e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null};e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length};e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)};e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){I.assert(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var r=e.createCancelEvent(t,i);r&&n.push(r)})}if(e){for(var r=[],s=0;s<this.eventRegistrations_.length;++s){var o=this.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(s+1));break}}else r.push(o)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n};e.prototype.applyOperation=function(e,t,n){if(e.type===yt.MERGE&&null!==e.source.queryId){I.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges");I.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache")}var i=this.viewCache_,r=this.processor_.applyOperation(i,e,t,n);this.processor_.assertIndexed(r.viewCache);I.assert(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back");this.viewCache_=r.viewCache;return this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)};e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];if(!t.getNode().isLeafNode()){var i=t.getNode();i.forEachChild(rt,function(e,t){n.push(Kt.childAddedChange(e,t))})}t.isFullyInitialized()&&n.push(Kt.valueChange(t.getNode()));return this.generateEventsForChanges_(n,t.getNode(),e)};e.prototype.generateEventsForChanges_=function(e,t,n){var i=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,i)};return e}(),on=function(){function e(){this.views=new Map}Object.defineProperty(e,"__referenceConstructor",{get:function(){I.assert($t,"Reference.ts has not been loaded");return $t},set:function(e){I.assert(!$t,"__referenceConstructor has already been defined");$t=e},enumerable:!1,configurable:!0});e.prototype.isEmpty=function(){return 0===this.views.size};e.prototype.applyOperation=function(e,t,n){var i,r,s=e.source.queryId;if(null!==s){var o=this.views.get(s);I.assert(null!=o,"SyncTree gave us an op for an invalid query.");return o.applyOperation(e,t,n)}var a=[];try{for(var c=T.__values(this.views.values()),l=c.next();!l.done;l=c.next()){var o=l.value;a=a.concat(o.applyOperation(e,t,n))}}catch(u){i={error:u}}finally{try{l&&!l.done&&(r=c["return"])&&r.call(c)}finally{if(i)throw i.error}}return a};e.prototype.addEventRegistration=function(e,t,n,i,r){var s=e.queryIdentifier(),o=this.views.get(s);if(!o){var a=n.calcCompleteEventCache(r?i:null),c=!1;if(a)c=!0;else if(i instanceof gt){a=n.calcCompleteEventChildren(i);c=!1}else{a=gt.EMPTY_NODE;c=!1}var l=new Qt(new Gt(a,c,!1),new Gt(i,r,!1));o=new sn(e,l);this.views.set(s,o)}o.addEventRegistration(t);return o.getInitialEvents(t)};e.prototype.removeEventRegistration=function(t,n,i){var r,s,o=t.queryIdentifier(),a=[],c=[],l=this.hasCompleteView();if("default"===o)try{for(var u=T.__values(this.views.entries()),d=u.next();!d.done;d=u.next()){var h=T.__read(d.value,2),f=h[0],g=h[1];c=c.concat(g.removeEventRegistration(n,i));if(g.isEmpty()){this.views["delete"](f);g.getQuery().getQueryParams().loadsAllData()||a.push(g.getQuery())}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(s=u["return"])&&s.call(u)}finally{if(r)throw r.error}}else{var g=this.views.get(o);if(g){c=c.concat(g.removeEventRegistration(n,i));if(g.isEmpty()){this.views["delete"](o);g.getQuery().getQueryParams().loadsAllData()||a.push(g.getQuery())}}}l&&!this.hasCompleteView()&&a.push(new e.__referenceConstructor(t.repo,t.path));return{removed:a,events:c}};e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var i=T.__values(this.views.values()),r=i.next();!r.done;r=i.next()){var s=r.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=i["return"])&&t.call(i)}finally{if(e)throw e.error}}return n};e.prototype.getCompleteServerCache=function(e){var t,n,i=null;try{for(var r=T.__values(this.views.values()),s=r.next();!s.done;s=r.next()){var o=s.value;i=i||o.getCompleteServerCache(e)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=r["return"])&&n.call(r)}finally{if(t)throw t.error}}return i};e.prototype.viewForQuery=function(e){var t=e.getQueryParams();if(t.loadsAllData())return this.getCompleteView();var n=e.queryIdentifier();return this.views.get(n)};e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)};e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()};e.prototype.getCompleteView=function(){var e,t;try{for(var n=T.__values(this.views.values()),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.getQuery().getQueryParams().loadsAllData())return r}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}return null};return e}(),an=function(){function e(e){this.writeTree_=e}e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new Bt(n));var i=this.writeTree_.findRootMostValueAndPath(t);if(null!=i){var r=i.path,s=i.value,o=fe.relativePath(r,t);s=s.updateChild(o,n);return new e(this.writeTree_.set(r,s))}var a=new Bt(n),c=this.writeTree_.setTree(t,a);return new e(c)};e.prototype.addWrites=function(e,t){var n=this;s(t,function(t,i){n=n.addWrite(e.child(t),i)});return n};e.prototype.removeWrite=function(t){if(t.isEmpty())return e.Empty;var n=this.writeTree_.setTree(t,Bt.Empty);return new e(n)};e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)};e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(fe.relativePath(t.path,e)):null};e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;null!=t?t.isLeafNode()||t.forEachChild(rt,function(t,n){e.push(new Ye(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Ye(t,n.value))});return e};e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new Bt(n):this.writeTree_.subtree(t))};e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()};e.prototype.apply=function(e){return p(fe.Empty,this.writeTree_,e)};e.Empty=new e(new Bt(null));return e}(),cn=function(){function e(){this.visibleWrites_=an.Empty;this.allWrites_=[];this.lastWriteId_=-1}e.prototype.childWrites=function(e){return new ln(e,this)};e.prototype.addOverwrite=function(e,t,n,i){I.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones");void 0===i&&(i=!0);this.allWrites_.push({path:e,snap:t,writeId:n,visible:i});i&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t));this.lastWriteId_=n};e.prototype.addMerge=function(e,t,n){I.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones");this.allWrites_.push({path:e,children:t,writeId:n,visible:!0});this.visibleWrites_=this.visibleWrites_.addWrites(e,t);this.lastWriteId_=n};e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null};e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});I.assert(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,o=!1,a=this.allWrites_.length-1;r&&a>=0;){var c=this.allWrites_[a];c.visible&&(a>=n&&this.recordContainsPath_(c,i.path)?r=!1:i.path.contains(c.path)&&(o=!0));a--}if(r){if(o){this.resetTree_();return!0}if(i.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(i.path);else{var l=i.children;s(l,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(i.path.child(e))})}return!0}return!1};e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)};e.prototype.calcCompleteEventCache=function(t,n,i,r){if(i||r){var s=this.visibleWrites_.childCompoundWrite(t);if(!r&&s.isEmpty())return n;if(r||null!=n||s.hasCompleteWrite(fe.Empty)){var o=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},a=e.layerTree_(this.allWrites_,o,t),c=n||gt.EMPTY_NODE;return a.apply(c)}return null}var l=this.visibleWrites_.getCompleteNode(t);if(null!=l)return l;var u=this.visibleWrites_.childCompoundWrite(t);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(fe.Empty)){var c=n||gt.EMPTY_NODE;return u.apply(c)}return null};e.prototype.calcCompleteEventChildren=function(e,t){var n=gt.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(e);if(i){i.isLeafNode()||i.forEachChild(rt,function(e,t){n=n.updateImmediateChild(e,t)});return n}if(t){var r=this.visibleWrites_.childCompoundWrite(e);t.forEachChild(rt,function(e,t){var i=r.childCompoundWrite(new fe(e)).apply(t);n=n.updateImmediateChild(e,i)});r.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)});return n}var s=this.visibleWrites_.childCompoundWrite(e);s.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)});return n};e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,i){I.assert(n||i,"Either existingEventSnap or existingServerSnap must exist");var r=e.child(t);if(this.visibleWrites_.hasCompleteWrite(r))return null;var s=this.visibleWrites_.childCompoundWrite(r);return s.isEmpty()?i.getChild(t):s.apply(i.getChild(t))};e.prototype.calcCompleteChild=function(e,t,n){var i=e.child(t),r=this.visibleWrites_.getCompleteNode(i);if(null!=r)return r;if(n.isCompleteForChild(t)){var s=this.visibleWrites_.childCompoundWrite(i);return s.apply(n.getNode().getImmediateChild(t))}return null};e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)};e.prototype.calcIndexedSlice=function(e,t,n,i,r,s){var o,a=this.visibleWrites_.childCompoundWrite(e),c=a.getCompleteNode(fe.Empty);if(null!=c)o=c;else{if(null==t)return[];o=a.apply(t)}o=o.withIndex(s);if(o.isEmpty()||o.isLeafNode())return[];for(var l=[],u=s.getCompare(),d=r?o.getReverseIteratorFrom(n,s):o.getIteratorFrom(n,s),h=d.getNext();h&&l.length<i;){0!==u(h,n)&&l.push(h);h=d.getNext()}return l};e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1};e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,fe.Empty);this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1};e.DefaultFilter_=function(e){return e.visible};e.layerTree_=function(e,t,n){for(var i=an.Empty,r=0;r<e.length;++r){var s=e[r];if(t(s)){var o=s.path,a=void 0;if(s.snap){if(n.contains(o)){a=fe.relativePath(n,o);i=i.addWrite(a,s.snap)}else if(o.contains(n)){a=fe.relativePath(o,n);i=i.addWrite(fe.Empty,s.snap.getChild(a))}}else{if(!s.children)throw I.assertionError("WriteRecord should have .snap or .children");if(n.contains(o)){a=fe.relativePath(n,o);i=i.addWrites(a,s.children)}else if(o.contains(n)){a=fe.relativePath(o,n);if(a.isEmpty())i=i.addWrites(fe.Empty,s.children);else{var c=I.safeGet(s.children,a.getFront());if(c){var l=c.getChild(a.popFront());i=i.addWrite(fe.Empty,l)}}}}}}return i};return e}(),ln=function(){function e(e,t){this.treePath_=e;this.writeTree_=t}e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)};e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)};e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)};e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))};e.prototype.calcIndexedSlice=function(e,t,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,i,r)};e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)};e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)};return e}(),un=function(){function e(e){this.listenProvider_=e;this.syncPointTree_=Bt.Empty;this.pendingWriteTree_=new cn;this.tagToQueryMap=new Map;this.queryToTagMap=new Map}e.prototype.applyUserOverwrite=function(e,t,n,i){this.pendingWriteTree_.addOverwrite(e,t,n,i);return i?this.applyOperationToSyncPoints_(new Vt(qt.User,e,t)):[]};e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var i=Bt.fromObject(t);return this.applyOperationToSyncPoints_(new zt(qt.User,e,i))};e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e),i=this.pendingWriteTree_.removeWrite(e);if(i){var r=Bt.Empty;null!=n.snap?r=r.set(fe.Empty,!0):s(n.children,function(e,t){r=r.set(new fe(e),t)});return this.applyOperationToSyncPoints_(new Ht(n.path,r,t))}return[]};e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new Vt(qt.Server,e,t))};e.prototype.applyServerMerge=function(e,t){var n=Bt.fromObject(t);return this.applyOperationToSyncPoints_(new zt(qt.Server,e,n))};e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new Wt(qt.Server,e))};e.prototype.applyTaggedQueryOverwrite=function(t,n,i){var r=this.queryKeyForTag_(i);if(null!=r){var s=e.parseQueryKey_(r),o=s.path,a=s.queryId,c=fe.relativePath(o,t),l=new Vt(qt.forServerTaggedQuery(a),c,n);return this.applyTaggedOperation_(o,l)}return[]};e.prototype.applyTaggedQueryMerge=function(t,n,i){var r=this.queryKeyForTag_(i);if(r){var s=e.parseQueryKey_(r),o=s.path,a=s.queryId,c=fe.relativePath(o,t),l=Bt.fromObject(n),u=new zt(qt.forServerTaggedQuery(a),c,l);return this.applyTaggedOperation_(o,u)}return[]};e.prototype.applyTaggedListenComplete=function(t,n){var i=this.queryKeyForTag_(n);if(i){var r=e.parseQueryKey_(i),s=r.path,o=r.queryId,a=fe.relativePath(s,t),c=new Wt(qt.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(s,c)}return[]};e.prototype.addEventRegistration=function(t,n){var i=t.path,r=null,s=!1;this.syncPointTree_.foreachOnPath(i,function(e,t){var n=fe.relativePath(e,i);r=r||t.getCompleteServerCache(n);s=s||t.hasCompleteView()});var o=this.syncPointTree_.get(i);if(o){s=s||o.hasCompleteView();r=r||o.getCompleteServerCache(fe.Empty)}else{o=new on;this.syncPointTree_=this.syncPointTree_.set(i,o)}var a;if(null!=r)a=!0;else{a=!1;r=gt.EMPTY_NODE;var c=this.syncPointTree_.subtree(i);c.foreachChild(function(e,t){var n=t.getCompleteServerCache(fe.Empty);n&&(r=r.updateImmediateChild(e,n))})}var l=o.viewExistsForQuery(t);if(!l&&!t.getQueryParams().loadsAllData()){var u=e.makeQueryKey_(t);I.assert(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var d=e.getNextQueryTag_();this.queryToTagMap.set(u,d);this.tagToQueryMap.set(d,u)}var h=this.pendingWriteTree_.childWrites(i),f=o.addEventRegistration(t,n,h,r,a);if(!l&&!s){var g=o.viewForQuery(t);f=f.concat(this.setupListener_(t,g))}return f};e.prototype.removeEventRegistration=function(t,n,i){var r=this,s=t.path,o=this.syncPointTree_.get(s),a=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var c=o.removeEventRegistration(t,n,i);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(s));var l=c.removed;a=c.events;var u=-1!==l.findIndex(function(e){return e.getQueryParams().loadsAllData()}),d=this.syncPointTree_.findOnPath(s,function(e,t){return t.hasCompleteView()});if(u&&!d){var h=this.syncPointTree_.subtree(s);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),g=0;g<f.length;++g){var p=f[g],m=p.getQuery(),v=this.createListenerForView_(p);this.listenProvider_.startListening(e.queryForListening_(m),this.tagForQuery_(m),v.hashFn,v.onComplete)}}if(!d&&l.length>0&&!i)if(u){var _=null;this.listenProvider_.stopListening(e.queryForListening_(t),_)}else l.forEach(function(t){var n=r.queryToTagMap.get(e.makeQueryKey_(t));r.listenProvider_.stopListening(e.queryForListening_(t),n)});this.removeTags_(l)}return a};e.prototype.calcCompleteEventCache=function(e,t){var n=!0,i=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var i=fe.relativePath(t,e),r=n.getCompleteServerCache(i);return r?r:void 0});return i.calcCompleteEventCache(e,r,t,n)};e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView()){var i=t.getCompleteView();return[i]}var r=[];t&&(r=t.getQueryViews());s(n,function(e,t){r=r.concat(t)});return r})};e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var i=t[n];if(!i.getQueryParams().loadsAllData()){var r=e.makeQueryKey_(i),s=this.queryToTagMap.get(r);this.queryToTagMap["delete"](r);this.tagToQueryMap["delete"](s)}}};e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e};e.prototype.setupListener_=function(t,n){var i=t.path,r=this.tagForQuery_(t),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),r,o.hashFn,o.onComplete),c=this.syncPointTree_.subtree(i);if(r)I.assert(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var i=[];t&&(i=i.concat(t.getQueryViews().map(function(e){return e.getQuery()})));s(n,function(e,t){i=i.concat(t)});return i}),u=0;u<l.length;++u){var d=l[u];this.listenProvider_.stopListening(e.queryForListening_(d),this.tagForQuery_(d))}return a};e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){var t=e.getServerCache()||gt.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return i?t.applyTaggedListenComplete(n.path,i):t.applyListenComplete(n.path);var r=ae(e,n);return t.removeEventRegistration(n,null,r)}}};e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()};e.parseQueryKey_=function(e){var t=e.indexOf("$");I.assert(-1!==t&&t<e.length-1,"Bad queryKey.");return{queryId:e.substr(t+1),path:new fe(e.substr(0,t))}};e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)};e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)};e.getNextQueryTag_=function(){return e.nextQueryTag_++};e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);I.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,i,null)};e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(fe.Empty))};e.prototype.applyOperationHelper_=function(e,t,n,i){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,i);var r=t.get(fe.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(fe.Empty));var s=[],o=e.path.getFront(),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){var l=n?n.getImmediateChild(o):null,u=i.child(o);s=s.concat(this.applyOperationHelper_(a,c,l,u))}r&&(s=s.concat(r.applyOperation(e,i,n)));return s};e.prototype.applyOperationDescendantsHelper_=function(e,t,n,i){var r=this,s=t.get(fe.Empty);null==n&&null!=s&&(n=s.getCompleteServerCache(fe.Empty));var o=[];t.children.inorderTraversal(function(t,s){var a=n?n.getImmediateChild(t):null,c=i.child(t),l=e.operationForChild(t);l&&(o=o.concat(r.applyOperationDescendantsHelper_(l,s,a,c)))});s&&(o=o.concat(s.applyOperation(e,i,n)));return o};e.nextQueryTag_=1;return e}(),dn=function(){function e(){this.rootNode_=gt.EMPTY_NODE}e.prototype.getNode=function(e){return this.rootNode_.getChild(e)};e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)};return e}(),hn=function(){function e(){this.counters_={}}e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1);I.contains(this.counters_,e)||(this.counters_[e]=0);this.counters_[e]+=t};e.prototype.get=function(){return I.deepCopy(this.counters_)};return e}(),fn=function(){function e(){}e.getCollection=function(e){var t=e.toString();this.collections_[t]||(this.collections_[t]=new hn);return this.collections_[t]};e.getOrCreateReporter=function(e,t){var n=e.toString();this.reporters_[n]||(this.reporters_[n]=t());return this.reporters_[n]};e.collections_={};e.reporters_={};return e}(),gn=function(){function e(e){this.collection_=e;this.last_=null}e.prototype.get=function(){var e=this.collection_.get(),t=T.__assign({},e);this.last_&&s(this.last_,function(e,n){t[e]=t[e]-n});this.last_=e;return t};return e}(),pn=1e4,mn=3e4,vn=3e5,_n=function(){function e(e,t){this.server_=t;this.statsToReport_={};this.statsListener_=new gn(e);var n=pn+(mn-pn)*Math.random();he(this.reportStats_.bind(this),Math.floor(n))}e.prototype.includeStat=function(e){this.statsToReport_[e]=!0};e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},i=!1;s(t,function(t,r){if(r>0&&I.contains(e.statsToReport_,t)){n[t]=r;i=!0}});i&&this.server_.reportStats(n);he(this.reportStats_.bind(this),Math.floor(2*Math.random()*vn))};return e}(),yn=function(){function e(){this.eventLists_=[];this.recursionDepth_=0}e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var i=e[n],r=i.getPath();if(null!==t&&!r.equals(t.getPath())){this.eventLists_.push(t);t=null}null===t&&(t=new kn(r));t.add(i)}t&&this.eventLists_.push(t)};e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t);this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})};e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t);this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})};e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];if(i){var r=i.getPath();if(e(r)){this.eventLists_[n].raise();this.eventLists_[n]=null}else t=!1}}t&&(this.eventLists_=[]);this.recursionDepth_--};return e}(),kn=function(){function e(e){this.path_=e;this.events_=[]}e.prototype.add=function(e){this.events_.push(e)};e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();q&&B("event: "+t.toString());ue(n)}}};e.prototype.getPath=function(){return this.path_};return e}(),bn=function(){function e(e){this.allowedEvents_=e;this.listeners_={};I.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var i=T.__spread(this.listeners_[e]),r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)};e.prototype.on=function(e,t,n){this.validateEventType_(e);this.listeners_[e]=this.listeners_[e]||[];this.listeners_[e].push({callback:t,context:n});var i=this.getInitialEvent(e);i&&t.apply(n,i)};e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var i=this.listeners_[e]||[],r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context)){i.splice(r,1);return}};e.prototype.validateEventType_=function(e){I.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)};return e}(),Sn=function(e){function t(){var t,n,i=e.call(this,["visible"])||this;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener)if("undefined"!=typeof document.hidden){n="visibilitychange";t="hidden"}else if("undefined"!=typeof document.mozHidden){n="mozvisibilitychange";t="mozHidden"}else if("undefined"!=typeof document.msHidden){n="msvisibilitychange";t="msHidden"}else if("undefined"!=typeof document.webkitHidden){n="webkitvisibilitychange";t="webkitHidden"}i.visible_=!0;n&&document.addEventListener(n,function(){var e=!document[t];if(e!==i.visible_){i.visible_=e;i.trigger("visible",e)}},!1);return i}T.__extends(t,e);t.getInstance=function(){return new t};t.prototype.getInitialEvent=function(e){I.assert("visible"===e,"Unknown event type: "+e);return[this.visible_]};return t}(bn),wn=function(e){function t(){var t=e.call(this,["online"])||this;t.online_=!0;if("undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&!I.isMobileCordova()){window.addEventListener("online",function(){if(!t.online_){t.online_=!0;t.trigger("online",!0)}},!1);window.addEventListener("offline",function(){if(t.online_){t.online_=!1;t.trigger("online",!1)}},!1)}return t}T.__extends(t,e);t.getInstance=function(){return new t};t.prototype.getInitialEvent=function(e){I.assert("online"===e,"Unknown event type: "+e);return[this.online_]};t.prototype.currentlyOnline=function(){return this.online_};return t}(bn),Cn=function(){function e(e){this.onMessage_=e;this.pendingResponses=[];this.currentResponseNum=0;this.closeAfterResponse=-1;this.onClose=null}e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e;this.onClose=t;if(this.closeAfterResponse<this.currentResponseNum){this.onClose();this.onClose=null}};e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var i=function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=function(t){e[t]&&ue(function(){n.onMessage_(e[t])})},i=0;i<e.length;++i)t(i);if(r.currentResponseNum===r.closeAfterResponse){if(r.onClose){r.onClose();r.onClose=null}return"break"}r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum];){var s=i();if("break"===s)break}};return e}(),En="start",Tn="close",In="pLPCommand",An="pRTLPCB",xn="id",On="pw",Pn="ser",Rn="cb",Dn="seg",Mn="ts",Nn="d",Ln="dframe",Fn=1870,Un=30,$n=Fn-Un,qn=25e3,Hn=3e4,jn=function(){function e(e,t,n,i,r){this.connId=e;this.repoInfo=t;this.applicationId=n;this.transportSessionId=i;this.lastSessionId=r;this.bytesSent=0;this.bytesReceived=0;this.everConnected_=!1;
this.log_=W(e);this.stats_=fn.getCollection(t);this.urlFn=function(e){return t.connectionURL(Ce,e)}}e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0;this.onDisconnect_=t;this.myPacketOrderer=new Cn(e);this.isClosed_=!1;this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect.");n.onClosed_();n.connectTimeoutTimer_=null},Math.floor(Hn));Y(function(){if(!n.isClosed_){n.scriptTagHolder=new Bn(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=T.__read(e,5),r=i[0],s=i[1],o=i[2];i[3],i[4];n.incrementIncomingBytes_(e);if(n.scriptTagHolder){if(n.connectTimeoutTimer_){clearTimeout(n.connectTimeoutTimer_);n.connectTimeoutTimer_=null}n.everConnected_=!0;if(r===En){n.id=s;n.password=o}else{if(r!==Tn)throw new Error("Unrecognized command received: "+r);if(s){n.scriptTagHolder.sendNewPolls=!1;n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})}else n.onClosed_()}}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=T.__read(e,2),r=i[0],s=i[1];n.incrementIncomingBytes_(e);n.myPacketOrderer.handleResponse(r,s)},function(){n.onClosed_()},n.urlFn);var e={};e[En]="t";e[Pn]=Math.floor(1e8*Math.random());n.scriptTagHolder.uniqueCallbackIdentifier&&(e[Rn]=n.scriptTagHolder.uniqueCallbackIdentifier);e[me]=pe;n.transportSessionId&&(e[ve]=n.transportSessionId);n.lastSessionId&&(e[be]=n.lastSessionId);n.applicationId&&(e[Se]=n.applicationId);"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(ke)&&(e[_e]=ye);var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t);n.scriptTagHolder.addTag(t,function(){})}})};e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password);this.addDisconnectPingFrame(this.id,this.password)};e.forceAllow=function(){e.forceAllow_=!0};e.forceDisallow=function(){e.forceDisallow_=!0};e.isAvailable=function(){return I.isNodeSdk()?!1:e.forceAllow_?!0:!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!se()&&!oe()};e.prototype.markConnectionHealthy=function(){};e.prototype.shutdown_=function(){this.isClosed_=!0;if(this.scriptTagHolder){this.scriptTagHolder.close();this.scriptTagHolder=null}if(this.myDisconnFrame){document.body.removeChild(this.myDisconnFrame);this.myDisconnFrame=null}if(this.connectTimeoutTimer_){clearTimeout(this.connectTimeoutTimer_);this.connectTimeoutTimer_=null}};e.prototype.onClosed_=function(){if(!this.isClosed_){this.log_("Longpoll is closing itself");this.shutdown_();if(this.onDisconnect_){this.onDisconnect_(this.everConnected_);this.onDisconnect_=null}}};e.prototype.close=function(){if(!this.isClosed_){this.log_("Longpoll is being closed.");this.shutdown_()}};e.prototype.send=function(e){var t=I.stringify(e);this.bytesSent+=t.length;this.stats_.incrementCounter("bytes_sent",t.length);for(var n=I.base64Encode(t),i=ie(n,$n),r=0;r<i.length;r++){this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]);this.curSegmentNum++}};e.prototype.addDisconnectPingFrame=function(e,t){if(!I.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Ln]="t";n[xn]=e;n[On]=t;this.myDisconnFrame.src=this.urlFn(n);this.myDisconnFrame.style.display="none";document.body.appendChild(this.myDisconnFrame)}};e.prototype.incrementIncomingBytes_=function(e){var t=I.stringify(e).length;this.bytesReceived+=t;this.stats_.incrementCounter("bytes_received",t)};return e}(),Bn=function(){function e(t,n,i,r){this.onDisconnect=i;this.urlFn=r;this.outstandingRequests=new Set;this.pendingSegs=[];this.currentSerial=Math.floor(1e8*Math.random());this.sendNewPolls=!0;if(I.isNodeSdk()){this.commandCB=t;this.onMessageCB=n}else{this.uniqueCallbackIdentifier=F();window[In+this.uniqueCallbackIdentifier]=t;window[An+this.uniqueCallbackIdentifier]=n;this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var o=document.domain;s='<script>document.domain="'+o+'";</script>'}var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open();this.myIFrame.doc.write(a);this.myIFrame.doc.close()}catch(c){B("frame writing exception");c.stack&&B(c.stack);B(c)}}}e.createIFrame_=function(){var e=document.createElement("iframe");e.style.display="none";if(!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{var t=e.contentWindow.document;t||B("No IE domain setting required")}catch(n){var i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document);return e};e.prototype.close=function(){var e=this;this.alive=!1;if(this.myIFrame){this.myIFrame.doc.body.innerHTML="";setTimeout(function(){if(null!==e.myIFrame){document.body.removeChild(e.myIFrame);e.myIFrame=null}},Math.floor(0))}var t=this.onDisconnect;if(t){this.onDisconnect=null;t()}};e.prototype.startLongPoll=function(e,t){this.myID=e;this.myPW=t;this.alive=!0;for(;this.newRequest_(););};e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[xn]=this.myID;e[On]=this.myPW;e[Pn]=this.currentSerial;for(var t=this.urlFn(e),n="",i=0;this.pendingSegs.length>0;){var r=this.pendingSegs[0];if(!(r.d.length+Un+n.length<=Fn))break;var s=this.pendingSegs.shift();n=n+"&"+Dn+i+"="+s.seg+"&"+Mn+i+"="+s.ts+"&"+Nn+i+"="+s.d;i++}t+=n;this.addLongPollTag_(t,this.currentSerial);return!0}return!1};e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n});this.alive&&this.newRequest_()};e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var i=function(){n.outstandingRequests["delete"](t);n.newRequest_()},r=setTimeout(i,Math.floor(qn)),s=function(){clearTimeout(r);i()};this.addTag(e,s)};e.prototype.addTag=function(e,t){var n=this;I.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript";i.async=!0;i.src=e;i.onload=i.onreadystatechange=function(){var e=i.readyState;if(!e||"loaded"===e||"complete"===e){i.onload=i.onreadystatechange=null;i.parentNode&&i.parentNode.removeChild(i);t()}};i.onerror=function(){B("Long-poll script failed to load: "+e);n.sendNewPolls=!1;n.close()};n.myIFrame.doc.body.appendChild(i)}catch(r){}},Math.floor(1))};return e}(),Wn="",Vn=16384,zn=45e3,Gn=null;"undefined"!=typeof MozWebSocket?Gn=MozWebSocket:"undefined"!=typeof WebSocket&&(Gn=WebSocket);var Qn=function(){function e(t,n,i,r,s){this.connId=t;this.applicationId=i;this.keepaliveTimer=null;this.frames=null;this.totalFrames=0;this.bytesSent=0;this.bytesReceived=0;this.log_=W(this.connId);this.stats_=fn.getCollection(n);this.connURL=e.connectionURL_(n,r,s);this.nodeAdmin=n.nodeAdmin}e.connectionURL_=function(e,t,n){var i={};i[me]=pe;!I.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(ke)&&(i[_e]=ye);t&&(i[ve]=t);n&&(i[be]=n);return e.connectionURL(we,i)};e.prototype.open=function(e,t){var n=this;this.onDisconnect=t;this.onMessage=e;this.log_("Websocket connecting to "+this.connURL);this.everConnected_=!1;M.set("previous_websocket_failure",!0);try{if(I.isNodeSdk()){var r=this.nodeAdmin?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/"+pe+"/"+Wn+"/"+i.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},o=i.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a});this.mySock=new Gn(this.connURL,[],s)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Gn(this.connURL,[],s)}}catch(c){this.log_("Error instantiating WebSocket.");var l=c.message||c.data;l&&this.log_(l);this.onClosed_();return}this.mySock.onopen=function(){n.log_("Websocket connected.");n.everConnected_=!0};this.mySock.onclose=function(){n.log_("Websocket connection was disconnected.");n.mySock=null;n.onClosed_()};this.mySock.onmessage=function(e){n.handleIncomingFrame(e)};this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t);n.onClosed_()}};e.prototype.start=function(){};e.forceDisallow=function(){e.forceDisallow_=!0};e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Gn&&!e.forceDisallow_};e.previouslyFailed=function(){return M.isInMemoryStorage||M.get("previous_websocket_failure")===!0};e.prototype.markConnectionHealthy=function(){M.remove("previous_websocket_failure")};e.prototype.appendFrame_=function(e){this.frames.push(e);if(this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=I.jsonEval(t);this.onMessage(n)}};e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e;this.frames=[]};e.prototype.extractFrameCount_=function(e){I.assert(null===this.frames,"We already have a frame buffer");if(e.length<=6){var t=Number(e);if(!isNaN(t)){this.handleNewFrameCount_(t);return null}}this.handleNewFrameCount_(1);return e};e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;this.bytesReceived+=t.length;this.stats_.incrementCounter("bytes_received",t.length);this.resetKeepAlive();if(null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}};e.prototype.send=function(e){this.resetKeepAlive();var t=I.stringify(e);this.bytesSent+=t.length;this.stats_.incrementCounter("bytes_sent",t.length);var n=ie(t,Vn);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])};e.prototype.shutdown_=function(){this.isClosed_=!0;if(this.keepaliveTimer){clearInterval(this.keepaliveTimer);this.keepaliveTimer=null}if(this.mySock){this.mySock.close();this.mySock=null}};e.prototype.onClosed_=function(){if(!this.isClosed_){this.log_("WebSocket is closing itself");this.shutdown_();if(this.onDisconnect){this.onDisconnect(this.everConnected_);this.onDisconnect=null}}};e.prototype.close=function(){if(!this.isClosed_){this.log_("WebSocket is being closed");this.shutdown_()}};e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer);this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0");e.resetKeepAlive()},Math.floor(zn))};e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection.");setTimeout(this.onClosed_.bind(this),0)}};e.responsesRequiredToBeHealthy=2;e.healthyTimeout=3e4;return e}(),Kn=function(){function e(e){this.initTransports_(e)}Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[jn,Qn]},enumerable:!1,configurable:!0});e.prototype.initTransports_=function(t){var n,i,r=Qn&&Qn.isAvailable(),s=r&&!Qn.previouslyFailed();if(t.webSocketOnly){r||G("wss:// URL used, but browser isn't known to support websockets.  Trying anyway.");s=!0}if(s)this.transports_=[Qn];else{var o=this.transports_=[];try{for(var a=T.__values(e.ALL_TRANSPORTS),c=a.next();!c.done;c=a.next()){var l=c.value;l&&l.isAvailable()&&o.push(l)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}}};e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")};e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null};return e}(),Yn=6e4,Xn=5e3,Jn=10240,Zn=102400,ei="t",ti="d",ni="s",ii="r",ri="e",si="o",oi="a",ai="n",ci="p",li="h",ui=function(){function e(e,t,n,i,r,s,o,a){this.id=e;this.repoInfo_=t;this.applicationId_=n;this.onMessage_=i;this.onReady_=r;this.onDisconnect_=s;this.onKill_=o;this.lastSessionId=a;this.connectionCount=0;this.pendingDataMessages=[];this.state_=0;this.log_=W("c:"+this.id+":");this.transportManager_=new Kn(t);this.log_("Connection created");this.start_()}e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId);this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_;this.rx_=this.conn_;this.secondaryConn_=null;this.isHealthy_=!1;setTimeout(function(){e.conn_&&e.conn_.open(n,i)},Math.floor(0));var r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=he(function(){e.healthyTimeout_=null;if(!e.isHealthy_)if(e.conn_&&e.conn_.bytesReceived>Zn){e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy.");e.isHealthy_=!0;e.conn_.markConnectionHealthy()}else if(e.conn_&&e.conn_.bytesSent>Jn)e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive.");else{e.log_("Closing unhealthy connection after timeout.");e.close()}},Math.floor(r)))};e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++};e.prototype.disconnReceiver_=function(e){var t=this;return function(n){if(e===t.conn_)t.onConnectionLost_(n);else if(e===t.secondaryConn_){t.log_("Secondary connection lost.");t.onSecondaryConnectionLost_()}else t.log_("closing an old connection")}};e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}};e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)};e.prototype.tryCleanupConnection=function(){if(this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_){this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId);this.conn_=this.secondaryConn_;this.secondaryConn_=null}};e.prototype.onSecondaryControl_=function(e){if(ei in e){var t=e[ei];if(t===oi)this.upgradeIfSecondaryHealthy_();else if(t===ii){this.log_("Got a reset on secondary, closing it");this.secondaryConn_.close();(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()}else if(t===si){this.log_("got pong on secondary.");this.secondaryResponsesRequired_--;this.upgradeIfSecondaryHealthy_()}}};e.prototype.onSecondaryMessageReceived_=function(e){var t=te("t",e),n=te("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}};e.prototype.upgradeIfSecondaryHealthy_=function(){if(this.secondaryResponsesRequired_<=0){this.log_("Secondary connection is healthy.");this.isHealthy_=!0;this.secondaryConn_.markConnectionHealthy();this.proceedWithUpgrade_()}else{this.log_("sending ping on secondary.");this.secondaryConn_.send({t:"c",d:{t:ci,d:{}}})}};e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start();this.log_("sending client ack on secondary");this.secondaryConn_.send({t:"c",d:{t:oi,d:{}}});this.log_("Ending transmission on primary");this.conn_.send({t:"c",d:{t:ai,d:{}}});this.tx_=this.secondaryConn_;this.tryCleanupConnection()};e.prototype.onPrimaryMessageReceived_=function(e){var t=te("t",e),n=te("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)};e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_();this.onMessage_(e)};e.prototype.onPrimaryResponse_=function(){if(!this.isHealthy_){this.primaryResponsesRequired_--;if(this.primaryResponsesRequired_<=0){this.log_("Primary connection is healthy.");this.isHealthy_=!0;this.conn_.markConnectionHealthy()}}};e.prototype.onControl_=function(e){var t=te(ei,e);if(ti in e){var n=e[ti];if(t===li)this.onHandshake_(n);else if(t===ai){this.log_("recvd end transmission on primary");this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[];this.tryCleanupConnection()}else if(t===ni)this.onConnectionShutdown_(n);else if(t===ii)this.onReset_(n);else if(t===ri)V("Server Error: "+n);else if(t===si){this.log_("got pong on primary.");this.onPrimaryResponse_();this.sendPingOnPrimaryIfNecessary_()}else V("Unknown control packet command: "+t)}};e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,i=e.h;this.sessionId=e.s;this.repoInfo_.updateHost(i);if(0===this.state_){this.conn_.start();this.onConnectionEstablished_(this.conn_,t);pe!==n&&G("Protocol version mismatch detected");this.tryStartUpgrade_()}};e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)};e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId);this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i);he(function(){if(t.secondaryConn_){t.log_("Timed out trying to upgrade.");t.secondaryConn_.close()}},Math.floor(Yn))};e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e);this.repoInfo_.updateHost(e);if(1===this.state_)this.close();else{this.closeConnections_();this.start_()}};e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established.");this.conn_=e;this.state_=1;if(this.onReady_){this.onReady_(t,this.sessionId);this.onReady_=null}if(0===this.primaryResponsesRequired_){this.log_("Primary connection is healthy.");this.isHealthy_=!0}else he(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(Xn))};e.prototype.sendPingOnPrimaryIfNecessary_=function(){if(!this.isHealthy_&&1===this.state_){this.log_("sending ping on primary.");this.sendData_({t:"c",d:{t:ci,d:{}}})}};e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null;(this.tx_===e||this.rx_===e)&&this.close()};e.prototype.onConnectionLost_=function(e){this.conn_=null;if(e||0!==this.state_)1===this.state_&&this.log_("Realtime connection lost.");else{this.log_("Realtime connection failed.");if(this.repoInfo_.isCacheableHost()){M.remove("host:"+this.repoInfo_.host);this.repoInfo_.internalHost=this.repoInfo_.host}}this.close()};e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down...");if(this.onKill_){this.onKill_(e);this.onKill_=null}this.onDisconnect_=null;this.close()};e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)};e.prototype.close=function(){if(2!==this.state_){this.log_("Closing realtime connection.");this.state_=2;this.closeConnections_();if(this.onDisconnect_){this.onDisconnect_();this.onDisconnect_=null}}};e.prototype.closeConnections_=function(){this.log_("Shutting down all connections");if(this.conn_){this.conn_.close();this.conn_=null}if(this.secondaryConn_){this.secondaryConn_.close();this.secondaryConn_=null}if(this.healthyTimeout_){clearTimeout(this.healthyTimeout_);this.healthyTimeout_=null}};return e}(),di=function(){function e(){}e.prototype.put=function(e,t,n,i){};e.prototype.merge=function(e,t,n,i){};e.prototype.refreshAuthToken=function(e){};e.prototype.onDisconnectPut=function(e,t,n){};e.prototype.onDisconnectMerge=function(e,t,n){};e.prototype.onDisconnectCancel=function(e,t){};e.prototype.reportStats=function(e){};return e}(),hi=1e3,fi=3e5,gi=3e4,pi=1.3,mi=3e4,vi="server_kill",_i=3,yi=function(e){function t(n,i,r,s,o,a,c){var l=e.call(this)||this;l.repoInfo_=n;l.applicationId_=i;l.onDataUpdate_=r;l.onConnectStatus_=s;l.onServerInfoUpdate_=o;l.authTokenProvider_=a;l.authOverride_=c;l.id=t.nextPersistentConnectionId_++;l.log_=W("p:"+l.id+":");l.interruptReasons_={};l.listens=new Map;l.outstandingPuts_=[];l.outstandingPutCount_=0;l.onDisconnectRequestQueue_=[];l.connected_=!1;l.reconnectDelay_=hi;l.maxReconnectDelay_=fi;l.securityDebugCallback_=null;l.lastSessionId=null;l.establishConnectionTimer_=null;l.visible_=!1;l.requestCBHash_={};l.requestNumber_=0;l.realtime_=null;l.authToken_=null;l.forceTokenRefresh_=!1;l.invalidAuthTokenCount_=0;l.firstConnection_=!0;l.lastConnectionAttemptTime_=null;l.lastConnectionEstablishedTime_=null;if(c&&!I.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");l.scheduleConnect_(0);Sn.getInstance().on("visible",l.onVisible_,l);-1===n.host.indexOf("fblocal")&&wn.getInstance().on("online",l.onOnline_,l);return l}T.__extends(t,e);t.prototype.sendRequest=function(e,t,n){var i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(I.stringify(r));I.assert(this.connected_,"sendRequest call when we're not connected not allowed.");this.realtime_.sendRequest(r);n&&(this.requestCBHash_[i]=n)};t.prototype.listen=function(e,t,n,i){var r=e.queryIdentifier(),s=e.path.toString();this.log_("Listen called for "+s+" "+r);this.listens.has(s)||this.listens.set(s,new Map);I.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query");I.assert(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");var o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o);this.connected_&&this.sendListen_(o)};t.prototype.sendListen_=function(e){var n=this,i=e.query,r=i.path.toString(),s=i.queryIdentifier();this.log_("Listen on "+r+" for "+s);var o={p:r},a="q";if(e.tag){o.q=i.queryObject();o.t=e.tag}o.h=e.hashFn();this.sendRequest(a,o,function(o){var a=o.d,c=o.s;t.warnOnListenWarnings_(a,i);var l=n.listens.get(r)&&n.listens.get(r).get(s);if(l===e){n.log_("listen response",o);"ok"!==c&&n.removeListen_(r,s);e.onComplete&&e.onComplete(c,a)}})};t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&I.contains(e,"w")){var n=I.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',r=t.path.toString();G("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+i+" at ")+(r+" to your security rules for better performance."))}}};t.prototype.refreshAuthToken=function(e){this.authToken_=e;this.log_("Auth token refreshed");this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){});this.reduceReconnectDelayIfAdminCredential_(e)};t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t=e&&40===e.length;if(t||I.isAdmin(e)){this.log_("Admin auth credential detected.  Reducing max reconnect time.");this.maxReconnectDelay_=gi}};t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=I.isValidFormat(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_);this.sendRequest(n,i,function(n){var i=n.s,r=n.d||"error";e.authToken_===t&&("ok"===i?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(i,r))})}};t.prototype.unlisten=function(e,t){var n=e.path.toString(),i=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+i);I.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var r=this.removeListen_(n,i);r&&this.connected_&&this.sendUnlisten_(n,i,e.queryObject(),t)};t.prototype.sendUnlisten_=function(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);var r={p:e},s="n";if(i){r.q=n;r.t=i}this.sendRequest(s,r)};t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})};t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})};t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})};t.prototype.sendOnDisconnect_=function(e,t,n,i){var r={p:t,d:n};this.log_("onDisconnect "+e,r);this.sendRequest(e,r,function(e){i&&setTimeout(function(){i(e.s,e.d)},Math.floor(0))})};t.prototype.put=function(e,t,n,i){this.putInternal("p",e,t,n,i)};t.prototype.merge=function(e,t,n,i){this.putInternal("m",e,t,n,i)};t.prototype.putInternal=function(e,t,n,i,r){var s={p:t,d:n};void 0!==r&&(s.h=r);this.outstandingPuts_.push({action:e,request:s,onComplete:i});this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)};t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_;this.sendRequest(n,i,function(i){t.log_(n+" response",i);delete t.outstandingPuts_[e];t.outstandingPutCount_--;0===t.outstandingPutCount_&&(t.outstandingPuts_=[]);r&&r(i.s,i.d)})};t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n);this.sendRequest("s",n,function(e){var n=e.s;if("ok"!==n){var i=e.d;t.log_("reportStats","Error sending stats: "+i)}})}};t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+I.stringify(e));var t=e.r,n=this.requestCBHash_[t];if(n){delete this.requestCBHash_[t];n(e.b)}}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}};t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t);"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):V("Unrecognized action received from server: "+I.stringify(e)+"\nAre you using the latest client?")};t.prototype.onReady_=function(e,t){this.log_("connection ready");this.connected_=!0;this.lastConnectionEstablishedTime_=(new Date).getTime();this.handleTimestamp_(e);this.lastSessionId=t;this.firstConnection_&&this.sendConnectStats_();this.restoreState_();this.firstConnection_=!1;this.onConnectStatus_(!0)};t.prototype.scheduleConnect_=function(e){var t=this;I.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?");this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_);this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null;t.establishConnection_()},Math.floor(e))};t.prototype.onVisible_=function(e){if(e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_){this.log_("Window became visible.  Reducing delay.");this.reconnectDelay_=hi;this.realtime_||this.scheduleConnect_(0)}this.visible_=e};t.prototype.onOnline_=function(e){if(e){this.log_("Browser went online.");this.reconnectDelay_=hi;this.realtime_||this.scheduleConnect_(0)}else{this.log_("Browser went offline.  Killing connection.");this.realtime_&&this.realtime_.close()}};t.prototype.onRealtimeDisconnect_=function(){this.log_("data client disconnected");this.connected_=!1;this.realtime_=null;this.cancelSentTransactions_();this.requestCBHash_={};if(this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>mi&&(this.reconnectDelay_=hi);this.lastConnectionEstablishedTime_=null}}else{this.log_("Window isn't visible.  Delaying reconnect.");this.reconnectDelay_=this.maxReconnectDelay_;this.lastConnectionAttemptTime_=(new Date).getTime()}var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n;this.log_("Trying to reconnect in "+n+"ms");this.scheduleConnect_(n);this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*pi)}this.onConnectStatus_(!1)};t.prototype.establishConnection_=function(){var e=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt");this.lastConnectionAttemptTime_=(new Date).getTime();this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this,a=this.lastSessionId,c=!1,l=null,u=function(){if(l)l.close();else{c=!0;r()}},d=function(e){I.assert(l,"sendRequest call when we're not connected not allowed.");l.sendRequest(e)};this.realtime_={close:u,sendRequest:d};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;this.authTokenProvider_.getToken(h).then(function(e){if(c)B("getToken() completed but was canceled");else{B("getToken() completed. Creating connection.");o.authToken_=e&&e.accessToken;l=new ui(s,o.repoInfo_,o.applicationId_,n,i,r,function(e){G(e+" ("+o.repoInfo_.toString()+")");o.interrupt(vi)},a)}}).then(null,function(t){o.log_("Failed to get token: "+t);if(!c){e.repoInfo_.nodeAdmin&&G(t);u()}})}};t.prototype.interrupt=function(e){B("Interrupting connection for reason: "+e);this.interruptReasons_[e]=!0;if(this.realtime_)this.realtime_.close();else{if(this.establishConnectionTimer_){clearTimeout(this.establishConnectionTimer_);this.establishConnectionTimer_=null}this.connected_&&this.onRealtimeDisconnect_()}};t.prototype.resume=function(e){B("Resuming connection for reason: "+e);delete this.interruptReasons_[e];if(I.isEmpty(this.interruptReasons_)){this.reconnectDelay_=hi;this.realtime_||this.scheduleConnect_(0)}};t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})};t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];if(t&&"h"in t.request&&t.queued){t.onComplete&&t.onComplete("disconnect");delete this.outstandingPuts_[e];this.outstandingPutCount_--}}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])};t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return ne(e)}).join("$"):"default";var i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")};t.prototype.removeListen_=function(e,t){var n,i=new fe(e).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(t);r["delete"](t);0===r.size&&this.listens["delete"](i)}else n=void 0;return n};t.prototype.onAuthRevoked_=function(e,t){B("Auth token revoked: "+e+"/"+t);this.authToken_=null;this.forceTokenRefresh_=!0;this.realtime_.close();if("invalid_token"===e||"permission_denied"===e){this.invalidAuthTokenCount_++;if(this.invalidAuthTokenCount_>=_i){this.reconnectDelay_=gi;this.authTokenProvider_.notifyForInvalidToken()}}};t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))};t.prototype.restoreState_=function(){var e,t,n,i;this.tryAuth();try{for(var r=T.__values(this.listens.values()),s=r.next();!s.done;s=r.next()){var o=s.value;try{for(var a=(n=void 0,T.__values(o.values())),c=a.next();!c.done;c=a.next()){var l=c.value;this.sendListen_(l)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=r["return"])&&t.call(r)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}};t.prototype.sendConnectStats_=function(){var e={},t="js";I.isNodeSdk()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node");e["sdk."+t+"."+Wn.replace(/\./g,"-")]=1;I.isMobileCordova()?e["framework.cordova"]=1:I.isReactNative()&&(e["framework.reactnative"]=1);this.reportStats(e)};t.prototype.shouldReconnect_=function(){
var e=wn.getInstance().currentlyOnline();return I.isEmpty(this.interruptReasons_)&&e};t.nextPersistentConnectionId_=0;t.nextConnectionId_=0;return t}(di),ki=function(e){function t(t,n,i){var r=e.call(this)||this;r.repoInfo_=t;r.onDataUpdate_=n;r.authTokenProvider_=i;r.log_=W("p:rest:");r.listens_={};return r}T.__extends(t,e);t.prototype.reportStats=function(e){throw new Error("Method not implemented.")};t.getListenId_=function(e,t){if(void 0!==t)return"tag$"+t;I.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query.");return e.path.toString()};t.prototype.listen=function(e,n,i,r){var s=this,o=e.path.toString();this.log_("Listen called for "+o+" "+e.queryIdentifier());var a=t.getListenId_(e,i),c={};this.listens_[a]=c;var l=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",l,function(e,t){var n=t;if(404===e){n=null;e=null}null===e&&s.onDataUpdate_(o,n,!1,i);if(I.safeGet(s.listens_,a)===c){var l;l=e?401===e?"permission_denied":"rest_error:"+e:"ok";r(l,null)}})};t.prototype.unlisten=function(e,n){var i=t.getListenId_(e,n);delete this.listens_[i]};t.prototype.refreshAuthToken=function(e){};t.prototype.restRequest_=function(e,t,n){var i=this;void 0===t&&(t={});t.format="export";this.authTokenProvider_.getToken(!1).then(function(r){var s=r&&r.accessToken;s&&(t.auth=s);var o=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+e+"?ns="+i.repoInfo_.namespace+I.querystring(t);i.log_("Sending REST request for "+o);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){i.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);var e=null;if(a.status>=200&&a.status<300){try{e=I.jsonEval(a.responseText)}catch(t){G("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else{401!==a.status&&404!==a.status&&G("Got unsuccessful REST response for "+o+" Status: "+a.status);n(a.status)}n=null}};a.open("GET",o,!0);a.send()})};return t}(di),bi="repo_interrupt",Si=function(){function e(e,t,n,i){var r=this;this.repoInfo_=e;this.app=n;this.dataUpdateCount=0;this.statsListener_=null;this.eventQueue_=new yn;this.nextWriteId_=1;this.interceptServerDataCallback_=null;this.onDisconnect_=new Ft;this.persistentConnection_=null;this.stats_=fn.getCollection(e);if(t||de()){this.server_=new ki(this.repoInfo_,this.onDataUpdate_.bind(this),i);setTimeout(this.onConnectStatus_.bind(this,!0),0)}else{var s=n.options.databaseAuthVariableOverride;if("undefined"!=typeof s&&null!==s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{I.stringify(s)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}this.persistentConnection_=new yi(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,s);this.server_=this.persistentConnection_}i.addTokenChangeListener(function(e){r.server_.refreshAuthToken(e)});this.statsReporter_=fn.getOrCreateReporter(e,function(){return new _n(r.stats_,r.server_)});this.transactionsInit_();this.infoData_=new dn;this.infoSyncTree_=new un({startListening:function(e,t,n,i){var s=[],o=r.infoData_.getNode(e.path);if(!o.isEmpty()){s=r.infoSyncTree_.applyServerOverwrite(e.path,o);setTimeout(function(){i("ok")},0)}return s},stopListening:function(){}});this.updateInfo_("connected",!1);this.serverSyncTree_=new un({startListening:function(e,t,n,i){r.server_.listen(e,n,t,function(t,n){var s=i(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,s)});return[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host};e.prototype.name=function(){return this.repoInfo_.namespace};e.prototype.serverTime=function(){var e=this.infoData_.getNode(new fe(".info/serverTimeOffset")),t=e.val()||0;return(new Date).getTime()+t};e.prototype.generateServerValues=function(){return Pt({timestamp:this.serverTime()})};e.prototype.onDataUpdate_=function(e,t,n,i){this.dataUpdateCount++;var r=new fe(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var s=[];if(i)if(n){var o=I.map(t,function(e){return f(e)});s=this.serverSyncTree_.applyTaggedQueryMerge(r,o,i)}else{var a=f(t);s=this.serverSyncTree_.applyTaggedQueryOverwrite(r,a,i)}else if(n){var c=I.map(t,function(e){return f(e)});s=this.serverSyncTree_.applyServerMerge(r,c)}else{var l=f(t);s=this.serverSyncTree_.applyServerOverwrite(r,l)}var u=r;s.length>0&&(u=this.rerunTransactions_(r));this.eventQueue_.raiseEventsForChangedPath(u,s)};e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e};e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e);e===!1&&this.runOnDisconnectEvents_()};e.prototype.onServerInfoUpdate_=function(e){var t=this;s(e,function(e,n){t.updateInfo_(e,n)})};e.prototype.updateInfo_=function(e,t){var n=new fe("/.info/"+e),i=f(t);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)};e.prototype.getNextWriteId_=function(){return this.nextWriteId_++};e.prototype.setWithPriority=function(e,t,n,i){var r=this;this.log_("set",{path:e.toString(),value:t,priority:n});var s=this.generateServerValues(),o=f(t,n),a=this.serverSyncTree_.calcCompleteEventCache(e),c=Lt(o,a,s),l=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(e,c,l,!0);this.eventQueue_.queueEvents(u);this.server_.put(e.toString(),o.val(!0),function(t,n){var s="ok"===t;s||G("set at "+e+" failed: "+t);var o=r.serverSyncTree_.ackUserWrite(l,!s);r.eventQueue_.raiseEventsForChangedPath(e,o);r.callOnCompleteCallback(i,t,n)});var d=this.abortTransactions_(e);this.rerunTransactions_(d);this.eventQueue_.raiseEventsForChangedPath(d,[])};e.prototype.update=function(e,t,n){var i=this;this.log_("update",{path:e.toString(),value:t});var r=!0,o=this.generateServerValues(),a={};s(t,function(t,n){r=!1;a[t]=Nt(e.child(t),f(n),i.serverSyncTree_,o)});if(r){B("update() called with empty data.  Don't do anything.");this.callOnCompleteCallback(n,"ok")}else{var c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(e,a,c);this.eventQueue_.queueEvents(l);this.server_.merge(e.toString(),t,function(t,r){var s="ok"===t;s||G("update at "+e+" failed: "+t);var o=i.serverSyncTree_.ackUserWrite(c,!s),a=o.length>0?i.rerunTransactions_(e):e;i.eventQueue_.raiseEventsForChangedPath(a,o);i.callOnCompleteCallback(n,t,r)});s(t,function(t){var n=i.abortTransactions_(e.child(t));i.rerunTransactions_(n)});this.eventQueue_.raiseEventsForChangedPath(e,[])}};e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=new Ft;this.onDisconnect_.forEachTree(fe.Empty,function(i,r){var s=Nt(i,r,e.serverSyncTree_,t);n.remember(i,s)});var i=[];n.forEachTree(fe.Empty,function(t,n){i=i.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var r=e.abortTransactions_(t);e.rerunTransactions_(r)});this.onDisconnect_=new Ft;this.eventQueue_.raiseEventsForChangedPath(fe.Empty,i)};e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(i,r){"ok"===i&&n.onDisconnect_.forget(e);n.callOnCompleteCallback(t,i,r)})};e.prototype.onDisconnectSet=function(e,t,n){var i=this,r=f(t);this.server_.onDisconnectPut(e.toString(),r.val(!0),function(t,s){"ok"===t&&i.onDisconnect_.remember(e,r);i.callOnCompleteCallback(n,t,s)})};e.prototype.onDisconnectSetWithPriority=function(e,t,n,i){var r=this,s=f(t,n);this.server_.onDisconnectPut(e.toString(),s.val(!0),function(t,n){"ok"===t&&r.onDisconnect_.remember(e,s);r.callOnCompleteCallback(i,t,n)})};e.prototype.onDisconnectUpdate=function(e,t,n){var i=this;if(I.isEmpty(t)){B("onDisconnect().update() called with empty data.  Don't do anything.");this.callOnCompleteCallback(n,"ok")}else this.server_.onDisconnectMerge(e.toString(),t,function(r,o){"ok"===r&&s(t,function(t,n){var r=f(n);i.onDisconnect_.remember(e.child(t),r)});i.callOnCompleteCallback(n,r,o)})};e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t);this.eventQueue_.raiseEventsAtPath(e.path,n)};e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t);this.eventQueue_.raiseEventsAtPath(e.path,n)};e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(bi)};e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(bi)};e.prototype.stats=function(e){void 0===e&&(e=!1);if("undefined"!=typeof console){var t;if(e){this.statsListener_||(this.statsListener_=new gn(this.stats_));t=this.statsListener_.get()}else t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);s(t,function(e,t){for(var i=e,r=e.length;n+2>r;r++)i+=" ";console.log(i+t)})}};e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e);this.statsReporter_.includeStat(e)};e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":");B.apply(void 0,T.__spread([n],e))};e.prototype.callOnCompleteCallback=function(e,t,n){e&&ue(function(){if("ok"===t)e(null);else{var i=(t||"error").toUpperCase(),r=i;n&&(r+=": "+n);var s=new Error(r);s.code=i;e(s)}})};Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new Ni(this))},enumerable:!1,configurable:!0});return e}(),wi=function(){function e(t){this.indexedFilter_=new Yt(t.getIndex());this.index_=t.getIndex();this.startPost_=e.getStartPost_(t);this.endPost_=e.getEndPost_(t)}e.prototype.getStartPost=function(){return this.startPost_};e.prototype.getEndPost=function(){return this.endPost_};e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0};e.prototype.updateChild=function(e,t,n,i,r,s){this.matches(new Ye(t,n))||(n=gt.EMPTY_NODE);return this.indexedFilter_.updateChild(e,t,n,i,r,s)};e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=gt.EMPTY_NODE);var i=t.withIndex(this.index_);i=i.updatePriority(gt.EMPTY_NODE);var r=this;t.forEachChild(rt,function(e,t){r.matches(new Ye(e,t))||(i=i.updateImmediateChild(e,gt.EMPTY_NODE))});return this.indexedFilter_.updateFullNode(e,i,n)};e.prototype.updatePriority=function(e,t){return e};e.prototype.filtersNodes=function(){return!0};e.prototype.getIndexedFilter=function(){return this.indexedFilter_};e.prototype.getIndex=function(){return this.index_};e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()};e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()};return e}(),Ci=function(){function e(e){this.rangedFilter_=new wi(e);this.index_=e.getIndex();this.limit_=e.getLimit();this.reverse_=!e.isViewFromLeft()}e.prototype.updateChild=function(e,t,n,i,r,s){this.rangedFilter_.matches(new Ye(t,n))||(n=gt.EMPTY_NODE);return e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)};e.prototype.updateFullNode=function(e,t,n){var i;if(t.isLeafNode()||t.isEmpty())i=gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){i=gt.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var s=0;r.hasNext()&&s<this.limit_;){var o=r.getNext(),a=void 0;a=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0;if(!a)break;i=i.updateImmediateChild(o.name,o.node);s++}}else{i=t.withIndex(this.index_);i=i.updatePriority(gt.EMPTY_NODE);var c=void 0,l=void 0,u=void 0,r=void 0;if(this.reverse_){r=i.getReverseIterator(this.index_);c=this.rangedFilter_.getEndPost();l=this.rangedFilter_.getStartPost();var d=this.index_.getCompare();u=function(e,t){return d(t,e)}}else{r=i.getIterator(this.index_);c=this.rangedFilter_.getStartPost();l=this.rangedFilter_.getEndPost();u=this.index_.getCompare()}for(var s=0,h=!1;r.hasNext();){var o=r.getNext();!h&&u(c,o)<=0&&(h=!0);var a=h&&s<this.limit_&&u(o,l)<=0;a?s++:i=i.updateImmediateChild(o.name,gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)};e.prototype.updatePriority=function(e,t){return e};e.prototype.filtersNodes=function(){return!0};e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()};e.prototype.getIndex=function(){return this.index_};e.prototype.fullLimitUpdateChild_=function(e,t,n,i,r){var s;if(this.reverse_){var o=this.index_.getCompare();s=function(e,t){return o(t,e)}}else s=this.index_.getCompare();var a=e;I.assert(a.numChildren()===this.limit_,"");var c=new Ye(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){for(var d=a.getImmediateChild(t),h=i.getChildAfterChild(this.index_,l,this.reverse_);null!=h&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);var f=null==h?1:s(h,c),g=u&&!n.isEmpty()&&f>=0;if(g){null!=r&&r.trackChildChange(Kt.childChangedChange(t,n,d));return a.updateImmediateChild(t,n)}null!=r&&r.trackChildChange(Kt.childRemovedChange(t,d));var p=a.updateImmediateChild(t,gt.EMPTY_NODE),m=null!=h&&this.rangedFilter_.matches(h);if(m){null!=r&&r.trackChildChange(Kt.childAddedChange(h.name,h.node));return p.updateImmediateChild(h.name,h.node)}return p}if(n.isEmpty())return e;if(u){if(s(l,c)>=0){if(null!=r){r.trackChildChange(Kt.childRemovedChange(l.name,l.node));r.trackChildChange(Kt.childAddedChange(t,n))}return a.updateImmediateChild(t,n).updateImmediateChild(l.name,gt.EMPTY_NODE)}return e}return e};return e}(),Ei=function(){function e(){this.limitSet_=!1;this.startSet_=!1;this.startNameSet_=!1;this.endSet_=!1;this.endNameSet_=!1;this.limit_=0;this.viewFrom_="";this.indexStartValue_=null;this.indexStartName_="";this.indexEndValue_=null;this.indexEndName_="";this.index_=rt}e.prototype.hasStart=function(){return this.startSet_};e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT};e.prototype.getIndexStartValue=function(){I.assert(this.startSet_,"Only valid if start has been set");return this.indexStartValue_};e.prototype.getIndexStartName=function(){I.assert(this.startSet_,"Only valid if start has been set");return this.startNameSet_?this.indexStartName_:X};e.prototype.hasEnd=function(){return this.endSet_};e.prototype.getIndexEndValue=function(){I.assert(this.endSet_,"Only valid if end has been set");return this.indexEndValue_};e.prototype.getIndexEndName=function(){I.assert(this.endSet_,"Only valid if end has been set");return this.endNameSet_?this.indexEndName_:J};e.prototype.hasLimit=function(){return this.limitSet_};e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_};e.prototype.getLimit=function(){I.assert(this.limitSet_,"Only valid if limit has been set");return this.limit_};e.prototype.getIndex=function(){return this.index_};e.prototype.copy_=function(){var t=new e;t.limitSet_=this.limitSet_;t.limit_=this.limit_;t.startSet_=this.startSet_;t.indexStartValue_=this.indexStartValue_;t.startNameSet_=this.startNameSet_;t.indexStartName_=this.indexStartName_;t.endSet_=this.endSet_;t.indexEndValue_=this.indexEndValue_;t.endNameSet_=this.endNameSet_;t.indexEndName_=this.indexEndName_;t.index_=this.index_;t.viewFrom_=this.viewFrom_;return t};e.prototype.limit=function(e){var t=this.copy_();t.limitSet_=!0;t.limit_=e;t.viewFrom_="";return t};e.prototype.limitToFirst=function(t){var n=this.copy_();n.limitSet_=!0;n.limit_=t;n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;return n};e.prototype.limitToLast=function(t){var n=this.copy_();n.limitSet_=!0;n.limit_=t;n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;return n};e.prototype.startAt=function(e,t){var n=this.copy_();n.startSet_=!0;void 0===e&&(e=null);n.indexStartValue_=e;if(null!=t){n.startNameSet_=!0;n.indexStartName_=t}else{n.startNameSet_=!1;n.indexStartName_=""}return n};e.prototype.endAt=function(e,t){var n=this.copy_();n.endSet_=!0;void 0===e&&(e=null);n.indexEndValue_=e;if(void 0!==t){n.endNameSet_=!0;n.indexEndName_=t}else{n.endNameSet_=!1;n.indexEndName_=""}return n};e.prototype.orderBy=function(e){var t=this.copy_();t.index_=e;return t};e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_){n[t.INDEX_START_VALUE]=this.indexStartValue_;this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)}if(this.endSet_){n[t.INDEX_END_VALUE]=this.indexEndValue_;this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)}if(this.limitSet_){n[t.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT);n[t.VIEW_FROM]=i}this.index_!==rt&&(n[t.INDEX]=this.index_.toString());return n};e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)};e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===rt};e.prototype.getNodeFilter=function(){return this.loadsAllData()?new Yt(this.getIndex()):this.hasLimit()?new Ci(this):new wi(this)};e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var i;if(this.index_===rt)i=t.PRIORITY_INDEX;else if(this.index_===bt)i=t.VALUE_INDEX;else if(this.index_===Ze)i=t.KEY_INDEX;else{I.assert(this.index_ instanceof St,"Unrecognized index type!");i=this.index_.toString()}n[t.ORDER_BY]=I.stringify(i);if(this.startSet_){n[t.START_AT]=I.stringify(this.indexStartValue_);this.startNameSet_&&(n[t.START_AT]+=","+I.stringify(this.indexStartName_))}if(this.endSet_){n[t.END_AT]=I.stringify(this.indexEndValue_);this.endNameSet_&&(n[t.END_AT]+=","+I.stringify(this.indexEndName_))}this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_);return n};e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"};e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"};e.DEFAULT=new e;return e}(),Ti=function(e){function t(t,n){var i=this;if(!(t instanceof Si))throw new Error("new Reference() no longer supported - use app.database().");i=e.call(this,t,n,Ei.DEFAULT,!1)||this;return i}T.__extends(t,e);t.prototype.getKey=function(){I.validateArgCount("Reference.key",0,0,arguments.length);return this.path.isEmpty()?null:this.path.getBack()};t.prototype.child=function(e){I.validateArgCount("Reference.child",1,1,arguments.length);"number"==typeof e?e=String(e):e instanceof fe||(null===this.path.getFront()?Be("Reference.child",1,e,!1):je("Reference.child",1,e,!1));return new t(this.repo,this.path.child(e))};t.prototype.getParent=function(){I.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)};t.prototype.getRoot=function(){I.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e};t.prototype.databaseProp=function(){return this.repo.database};t.prototype.set=function(e,t){I.validateArgCount("Reference.set",1,2,arguments.length);We("Reference.set",this.path);Ne("Reference.set",1,e,this.path,!1);I.validateCallback("Reference.set",2,t,!0);var n=new I.Deferred;this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t));return n.promise};t.prototype.update=function(e,t){I.validateArgCount("Reference.update",1,2,arguments.length);We("Reference.update",this.path);if(Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n;G("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ue("Reference.update",1,e,this.path,!1);I.validateCallback("Reference.update",2,t,!0);var r=new I.Deferred;this.repo.update(this.path,e,r.wrapCallback(t));return r.promise};t.prototype.setWithPriority=function(e,t,n){I.validateArgCount("Reference.setWithPriority",2,3,arguments.length);We("Reference.setWithPriority",this.path);Ne("Reference.setWithPriority",1,e,this.path,!1);$e("Reference.setWithPriority",2,t,!1);I.validateCallback("Reference.setWithPriority",3,n,!0);if(".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new I.Deferred;this.repo.setWithPriority(this.path,e,t,i.wrapCallback(n));return i.promise};t.prototype.remove=function(e){I.validateArgCount("Reference.remove",0,1,arguments.length);We("Reference.remove",this.path);I.validateCallback("Reference.remove",1,e,!0);return this.set(null,e)};t.prototype.transaction=function(e,t,n){I.validateArgCount("Reference.transaction",1,3,arguments.length);We("Reference.transaction",this.path);I.validateCallback("Reference.transaction",1,e,!1);I.validateCallback("Reference.transaction",2,t,!0);ze("Reference.transaction",3,n,!0);if(".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new I.Deferred;"function"==typeof t&&i.promise["catch"](function(){});var r=function(e,n,r){e?i.reject(e):i.resolve(new Qe(n,r));"function"==typeof t&&t(e,n,r)};this.repo.startTransaction(this.path,e,r,n);return i.promise};t.prototype.setPriority=function(e,t){I.validateArgCount("Reference.setPriority",1,2,arguments.length);We("Reference.setPriority",this.path);$e("Reference.setPriority",1,e,!1);I.validateCallback("Reference.setPriority",2,t,!0);var n=new I.Deferred;this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t));return n.promise};t.prototype.push=function(e,t){I.validateArgCount("Reference.push",0,2,arguments.length);We("Reference.push",this.path);Ne("Reference.push",1,e,this.path,!0);I.validateCallback("Reference.push",2,t,!0);var n,i=this.repo.serverTime(),r=Ke(i),s=this.child(r),o=this.child(r);n=null!=e?s.set(e,t).then(function(){return o}):Promise.resolve(o);s.then=n.then.bind(n);s["catch"]=n.then.bind(n,void 0);"function"==typeof t&&n["catch"](function(){});return s};t.prototype.onDisconnect=function(){We("Reference.onDisconnect",this.path);return new Ge(this.repo,this.path)};Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0});Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0});Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0});Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0});return t}(At);At.__referenceConstructor=Ti;on.__referenceConstructor=Ti;/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var Ii,Ai=function(){function e(){this.children={};this.childCount=0;this.value=null}return e}(),xi=function(){function e(e,t,n){void 0===e&&(e="");void 0===t&&(t=null);void 0===n&&(n=new Ai);this.name_=e;this.parent_=t;this.node_=n}e.prototype.subTree=function(t){for(var n=t instanceof fe?t:new fe(t),i=this,r=n.getFront();null!==r;){var s=I.safeGet(i.node_.children,r)||new Ai;i=new e(r,i,s);n=n.popFront();r=n.getFront()}return i};e.prototype.getValue=function(){return this.node_.value};e.prototype.setValue=function(e){I.assert("undefined"!=typeof e,"Cannot set value to undefined");this.node_.value=e;this.updateParents_()};e.prototype.clear=function(){this.node_.value=null;this.node_.children={};this.node_.childCount=0;this.updateParents_()};e.prototype.hasChildren=function(){return this.node_.childCount>0};e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()};e.prototype.forEachChild=function(t){var n=this;s(this.node_.children,function(i,r){t(new e(i,n,r))})};e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this);this.forEachChild(function(t){t.forEachDescendant(e,!0,n)});t&&n&&e(this)};e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1};e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})};e.prototype.path=function(){return new fe(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)};e.prototype.name=function(){return this.name_};e.prototype.parent=function(){return this.parent_};e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)};e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),i=I.contains(this.node_.children,e);if(n&&i){delete this.node_.children[e];this.node_.childCount--;this.updateParents_()}else if(!n&&!i){this.node_.children[e]=t.node_;this.node_.childCount++;this.updateParents_()}};return e}();!function(e){e[e.RUN=0]="RUN";e[e.SENT=1]="SENT";e[e.COMPLETED=2]="COMPLETED";e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT";e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(Ii||(Ii={}));Si.MAX_TRANSACTION_RETRIES_=25;Si.prototype.transactionsInit_=function(){this.transactionQueueTree_=new xi};Si.prototype.startTransaction=function(e,t,n,i){this.log_("transaction on "+e);var r=function(){},s=new Ti(this,e);s.on("value",r);var o=function(){s.off("value",r)},a={path:e,update:t,onComplete:n,status:null,order:F(),applyLocally:i,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=this.getLatestState_(e);a.currentInputSnapshot=c;var l=a.update(c.val());if(void 0===l){a.unwatcher();a.currentOutputSnapshotRaw=null;a.currentOutputSnapshotResolved=null;if(a.onComplete){var u=new wt(a.currentInputSnapshot,new Ti(this,a.path),rt);a.onComplete(null,!1,u)}}else{Le("transaction failed: Data returned ",l,a.path);a.status=Ii.RUN;var d=this.transactionQueueTree_.subTree(e),h=d.getValue()||[];h.push(a);d.setValue(h);var g=void 0;if("object"==typeof l&&null!==l&&I.contains(l,".priority")){g=I.safeGet(l,".priority");I.assert(Me(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")}else{var p=this.serverSyncTree_.calcCompleteEventCache(e)||gt.EMPTY_NODE;g=p.getPriority().val()}g=g;var m=this.generateServerValues(),v=f(l,g),_=Lt(v,c,m);a.currentOutputSnapshotRaw=v;a.currentOutputSnapshotResolved=_;a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(e,_,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,y);this.sendReadyTransactions_()}};Si.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||gt.EMPTY_NODE};Si.prototype.sendReadyTransactions_=function(e){var t=this;void 0===e&&(e=this.transactionQueueTree_);e||this.pruneCompletedTransactionsBelowNode_(e);if(null!==e.getValue()){var n=this.buildTransactionQueue_(e);I.assert(n.length>0,"Sending zero length transaction queue");var i=n.every(function(e){return e.status===Ii.RUN});i&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})};Si.prototype.sendTransactionQueue_=function(e,t){for(var n=this,i=t.map(function(e){return e.currentWriteId}),r=this.getLatestState_(e,i),s=r,o=r.hash(),a=0;a<t.length;a++){var c=t[a];I.assert(c.status===Ii.RUN,"tryToSendTransactionQueue_: items in queue should all be run.");c.status=Ii.SENT;c.retryCount++;var l=fe.relativePath(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var u=s.val(!0),d=e;this.server_.put(d.toString(),u,function(i){n.log_("transaction put response",{path:d.toString(),status:i});var r=[];if("ok"===i){for(var s=[],o=0;o<t.length;o++){t[o].status=Ii.COMPLETED;r=r.concat(n.serverSyncTree_.ackUserWrite(t[o].currentWriteId));if(t[o].onComplete){var a=t[o].currentOutputSnapshotResolved,c=new Ti(n,t[o].path),l=new wt(a,c,rt);s.push(t[o].onComplete.bind(null,null,!0,l))}t[o].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e));n.sendReadyTransactions_();n.eventQueue_.raiseEventsForChangedPath(e,r);for(var o=0;o<s.length;o++)ue(s[o])}else{if("datastale"===i)for(var o=0;o<t.length;o++)t[o].status===Ii.SENT_NEEDS_ABORT?t[o].status=Ii.NEEDS_ABORT:t[o].status=Ii.RUN;else{G("transaction at "+d.toString()+" failed: "+i);for(var o=0;o<t.length;o++){t[o].status=Ii.NEEDS_ABORT;t[o].abortReason=i}}n.rerunTransactions_(e)}},o)};Si.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),i=this.buildTransactionQueue_(t);this.rerunTransactionQueue_(i,n);return n};Si.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],i=[],r=e.filter(function(e){return e.status===Ii.RUN}),s=r.map(function(e){return e.currentWriteId}),o=0;o<e.length;o++){var a=e[o],c=fe.relativePath(t,a.path),l=!1,u=void 0;I.assert(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null.");if(a.status===Ii.NEEDS_ABORT){l=!0;u=a.abortReason;i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}else if(a.status===Ii.RUN)if(a.retryCount>=Si.MAX_TRANSACTION_RETRIES_){l=!0;u="maxretry";i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}else{var d=this.getLatestState_(a.path,s);a.currentInputSnapshot=d;var h=e[o].update(d.val());if(void 0!==h){Le("transaction failed: Data returned ",h,a.path);var g=f(h),p="object"==typeof h&&null!=h&&I.contains(h,".priority");p||(g=g.updatePriority(d.getPriority()));var m=a.currentWriteId,v=this.generateServerValues(),_=Lt(g,d,v);a.currentOutputSnapshotRaw=g;a.currentOutputSnapshotResolved=_;a.currentWriteId=this.getNextWriteId_();s.splice(s.indexOf(m),1);i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,_,a.currentWriteId,a.applyLocally));i=i.concat(this.serverSyncTree_.ackUserWrite(m,!0))}else{l=!0;u="nodata";i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}}this.eventQueue_.raiseEventsForChangedPath(t,i);i=[];if(l){e[o].status=Ii.COMPLETED;!function(e){setTimeout(e,Math.floor(0))}(e[o].unwatcher);if(e[o].onComplete)if("nodata"===u){var y=new Ti(this,e[o].path),k=e[o].currentInputSnapshot,b=new wt(k,y,rt);n.push(e[o].onComplete.bind(null,null,!1,b))}else n.push(e[o].onComplete.bind(null,new Error(u),!1,null))}}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var o=0;o<n.length;o++)ue(n[o]);this.sendReadyTransactions_()}};Si.prototype.getAncestorTransactionNode_=function(e){var t,n=this.transactionQueueTree_;t=e.getFront();for(;null!==t&&null===n.getValue();){n=n.subTree(t);e=e.popFront();t=e.getFront()}return n};Si.prototype.buildTransactionQueue_=function(e){var t=[];this.aggregateTransactionQueuesForNode_(e,t);t.sort(function(e,t){return e.order-t.order});return t};Si.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,i=e.getValue();if(null!==i)for(var r=0;r<i.length;r++)t.push(i[r]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})};Si.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var i=0,r=0;r<n.length;r++)if(n[r].status!==Ii.COMPLETED){n[i]=n[r];i++}n.length=i;e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})};Si.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),i=this.transactionQueueTree_.subTree(e);i.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)});this.abortTransactionsOnNode_(i);i.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)});return n};Si.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],i=[],r=-1,s=0;s<t.length;s++)if(t[s].status===Ii.SENT_NEEDS_ABORT);else if(t[s].status===Ii.SENT){I.assert(r===s-1,"All SENT items should be at beginning of queue.");r=s;t[s].status=Ii.SENT_NEEDS_ABORT;t[s].abortReason="set"}else{I.assert(t[s].status===Ii.RUN,"Unexpected transaction status in abort");t[s].unwatcher();i=i.concat(this.serverSyncTree_.ackUserWrite(t[s].currentWriteId,!0));if(t[s].onComplete){var o=null;n.push(t[s].onComplete.bind(null,new Error("set"),!1,o))}}-1===r?e.setValue(null):t.length=r+1;this.eventQueue_.raiseEventsForChangedPath(e.path(),i);for(var s=0;s<n.length;s++)ue(n[s])}};/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var Oi,Pi=function(){function e(e,t){var n=this;this.app_=e;this.authProvider_=t;this.auth_=null;this.auth_=t.getImmediate({optional:!0});this.auth_||t.get().then(function(e){return n.auth_=e})}e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e)["catch"](function(e){if(e&&"auth/token-not-initialized"===e.code){B("Got auth/token-not-initialized error.  Treating as null token.");return null}return Promise.reject(e)}):Promise.resolve(null)};e.prototype.addTokenChangeListener=function(e){if(this.auth_)this.auth_.addAuthTokenListener(e);else{setTimeout(function(){return e(null)},0);this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})}};e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})};e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.';G(e)};return e}(),Ri=function(){function e(){}e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})};e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)};e.prototype.removeTokenChangeListener=function(e){};e.prototype.notifyForInvalidToken=function(){};e.EMULATOR_AUTH_TOKEN="owner";return e}(),Di="FIREBASE_DATABASE_EMULATOR_HOST",Mi=function(){function e(){this.repos_={};this.useRestClient_=!1}e.getInstance=function(){Oi||(Oi=new e);return Oi};e.prototype.interrupt=function(){var e,t,n,i;try{for(var r=T.__values(Object.keys(this.repos_)),s=r.next();!s.done;s=r.next()){var o=s.value;try{for(var a=(n=void 0,T.__values(Object.keys(this.repos_[o]))),c=a.next();!c.done;c=a.next()){var l=c.value;this.repos_[o][l].interrupt()}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=r["return"])&&t.call(r)}finally{if(e)throw e.error}}};e.prototype.resume=function(){var e,t,n,i;try{for(var r=T.__values(Object.keys(this.repos_)),s=r.next();!s.done;s=r.next()){var o=s.value;try{for(var a=(n=void 0,T.__values(Object.keys(this.repos_[o]))),c=a.next();!c.done;c=a.next()){var l=c.value;this.repos_[o][l].resume()}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=r["return"])&&t.call(r)}finally{if(e)throw e.error}}};e.prototype.databaseFromApp=function(e,t,n,r){var s=n||e.options.databaseURL;if(void 0===s){e.options.projectId||z("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp().");B("Using default host for project ",e.options.projectId);s=e.options.projectId+"-default-rtdb.firebaseio.com"}var o,a=Te(s,r),c=a.repoInfo,l=void 0;"undefined"!=typeof i&&(l=i.env[Di]);if(l){o=!0;s="http://"+l+"?ns="+c.namespace;a=Te(s,r);c=a.repoInfo}else o=!a.repoInfo.secure;var u=r&&o?new Ri:new Pi(e,t);Ve("Invalid Firebase Database URL",1,a);a.path.isEmpty()||z("Database URL must point to the root of a Firebase Database (not including a child path).");var d=this.createRepo(c,e,u);return d.database};e.prototype.deleteRepo=function(e){var t=I.safeGet(this.repos_,e.app.name);t&&I.safeGet(t,e.repoInfo_.toURLString())===e||z("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted.");e.interrupt();delete t[e.repoInfo_.toURLString()]};e.prototype.createRepo=function(e,t,n){var i=I.safeGet(this.repos_,t.name);if(!i){i={};this.repos_[t.name]=i}var r=I.safeGet(i,e.toURLString());r&&z("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");r=new Si(e,this.useRestClient_,t,n);i[e.toURLString()]=r;return r};e.prototype.forceRestClient=function(e){this.useRestClient_=e};return e}(),Ni=function(){function e(e){this.repo_=e;e instanceof Si||z("Don't call new Database() directly - please use firebase.database().");this.root_=new Ti(e,fe.Empty);this.INTERNAL=new Li(this)}Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0});e.prototype.ref=function(e){this.checkDeleted_("ref");I.validateArgCount("database.ref",0,1,arguments.length);return e instanceof Ti?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_};e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t);I.validateArgCount(t,1,1,arguments.length);var n=Te(e,this.repo_.repoInfo_.nodeAdmin);Ve(t,1,n);var i=n.repoInfo;i.host!==this.repo_.repoInfo_.host&&z(t+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")");return this.ref(n.path.toString())};e.prototype.checkDeleted_=function(e){null===this.repo_&&z("Cannot call "+e+" on a deleted database.")};e.prototype.goOffline=function(){I.validateArgCount("database.goOffline",0,0,arguments.length);this.checkDeleted_("goOffline");this.repo_.interrupt()};e.prototype.goOnline=function(){I.validateArgCount("database.goOnline",0,0,arguments.length);this.checkDeleted_("goOnline");this.repo_.resume()};e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}};return e}(),Li=function(){function e(e){this.database=e}e.prototype["delete"]=function(){return T.__awaiter(this,void 0,void 0,function(){return T.__generator(this,function(e){this.database.checkDeleted_("delete");Mi.getInstance().deleteRepo(this.database.repo_);this.database.repo_=null;this.database.root_=null;this.database.INTERNAL=null;this.database=null;return[2]})})};return e}(),Fi=function(){Qn.forceDisallow();jn.forceAllow()},Ui=function(){jn.forceDisallow()},$i=function(){return Qn.isAvailable()},qi=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},Hi=function(e,t){e.repo.stats(t)},ji=function(e,t){e.repo.statsIncrementCounter(t)},Bi=function(e){return e.repo.dataUpdateCount},Wi=function(e,t){return e.repo.interceptServerData_(t)},Vi=Object.freeze({__proto__:null,forceLongPolling:Fi,forceWebSockets:Ui,isWebSocketsAvailable:$i,setSecurityDebugCallback:qi,stats:Hi,statsIncrementCounter:ji,dataUpdateCount:Bi,interceptServerData:Wi}),zi=yi;yi.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};yi.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Gi=ui,Qi=function(e){var t=yi.prototype.put;yi.prototype.put=function(n,i,r,s){void 0!==s&&(s=e());t.call(this,n,i,r,s)};return function(){yi.prototype.put=t}},Ki=Ee,Yi=function(e){return e.queryIdentifier()},Xi=function(e){Mi.getInstance().forceRestClient(e)},Ji=Object.freeze({__proto__:null,DataConnection:zi,RealTimeConnection:Gi,hijackHash:Qi,ConnectionTarget:Ki,queryIdentifier:Yi,forceRestClient:Xi}),Zi="@firebase/database",er="0.6.13",tr=Ni.ServerValue;v(O["default"]);t.DataSnapshot=wt;t.Database=Ni;t.OnDisconnect=Ge;t.Query=At;t.Reference=Ti;t.ServerValue=tr;t.enableLogging=j;t.registerDatabase=v}).call(t,n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout){u=setTimeout;return setTimeout(e,0)}try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout){d=clearTimeout;return clearTimeout(e)}try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){if(p&&f){p=!1;f.length?g=f.concat(g):m=-1;g.length&&a()}}function a(){if(!p){var e=r(o);p=!0;for(var t=g.length;t;){f=g;g=[];for(;++m<t;)f&&f[m].run();m=-1;t=g.length}f=null;p=!1;s(e)}}function c(e,t){this.fun=e;this.array=t}function l(){}var u,d,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var f,g=[],p=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new c(e,t));1!==g.length||p||r(a)};c.prototype.run=function(){this.fun.apply(null,this.array)};h.title="browser";h.browser=!0;h.env={};h.argv=[];h.version="";h.versions={};h.on=l;h.addListener=l;h.once=l;h.off=l;h.removeListener=l;h.removeAllListeners=l;h.emit=l;h.prependListener=l;h.prependOnceListener=l;h.listeners=function(e){return[]};h.binding=function(e){throw new Error("process.binding is not supported")};h.cwd=function(){return"/"};h.chdir=function(e){throw new Error("process.chdir is not supported")};h.umask=function(){return 0}},function(e,t,n){"use strict";function i(e,t,n){"ngInject";moment.suppressDeprecationWarnings=!0;n.decorator("$exceptionHandler",o["default"]);e.debugEnabled(t.debugLogging)}i.$inject=["$logProvider","environment","$provide"];var r=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t.config=i;var s=n(17),o=r(s)},function(e,t,n){"use strict";function i(e){"ngInject";return function(t,n){e(t,n);var i=o["default"].get,r=angular.isDefined(i)&&i.LogRocketService;angular.isDefined(r)&&r.handleError(t)}}i.$inject=["$delegate"];var r=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var s=n(18),o=r(s);e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=null,o=function(){function e(t,n,i,o,a,c,l,u){"ngInject";r(this,e);this.$log=t;this.$window=n;this._window=n[0];this.$rootScope=i;this.$timeout=o;this.$document=a;this._document=a[0];this.$location=c;this.$mdDialog=l;this.ImageEditService=u;this._md=new MobileDetect(n?n.navigator.userAgent:"");this._isWindows=!1;platform.os&&platform.os.family&&(this._isWindows=platform.os.family.indexOf("Windows")>-1);this._isMac=!1;platform.os&&platform.os.family&&(this._isMac=platform.os.family.indexOf("OS X")>-1);var d=platform.name.toLowerCase();this._isSafari="safari"===d;this._isIE="ie"===d;this._isEdge=d&&d.indexOf("edge")>1;this._isFirefox="firefox"===d;this._isMobile=!!this._md.mobile();this._isTouchDevice=!!this.determineTouchDevice();this._isClasskickIPadApp=this.$window?this.$window.navigator.userAgent.indexOf("ClasskickIPadApp")>-1:!1;this._md.is("iPad")&&(this._isIPad=!0);s=this}e.$inject=["$log","$window","$rootScope","$timeout","$document","$location","$mdDialog","ImageEditService"];i(e,[{key:"determineTouchDevice",value:function(){var e=!1;try{if(!this._window)return!1;var t=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in this._window||this._window.DocumentTouch&&this._document instanceof DocumentTouch)return!0;var n=["(",t.join("touch-enabled),("),"heartz",")"].join("");e=this.mq(n)}catch(i){this.$log.error(i)}return e}},{key:"mq",value:function(e){return this._window.matchMedia(e).matches}},{key:"isWindows",get:function(){return this._isWindows}},{key:"isMac",get:function(){return this._isMac}},{key:"isSafari",get:function(){return this._isSafari}},{key:"isIE",get:function(){return this._isIE}},{key:"isEdge",get:function(){return this._isEdge}},{key:"isFirefox",get:function(){return this._isFirefox}},{key:"isMobile",get:function(){return this._isMobile}},{key:"isTouchDevice",get:function(){return this._isTouchDevice}},{key:"isClasskickIPadApp",get:function(){return this._isClasskickIPadApp}},{key:"isIPad",get:function(){return this._isIPad}}],[{key:"get",get:function(){return s}},{key:"_testInstance",set:function(e){s=e}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){e.exports=n(20)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(21),s=i(r);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);(0,s["default"])(e,i.key,i)}}return function(t,n,i){n&&e(t.prototype,n);i&&e(t,i);return t}}()},function(e,t,n){e.exports={"default":n(22),__esModule:!0}},function(e,t,n){n(23);var i=n(26).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(24);i(i.S+i.F*!n(34),"Object",{defineProperty:n(30).f})},function(e,t,n){var i=n(25),r=n(26),s=n(27),o=n(29),a="prototype",c=function(e,t,n){var l,u,d,h=e&c.F,f=e&c.G,g=e&c.S,p=e&c.P,m=e&c.B,v=e&c.W,_=f?r:r[t]||(r[t]={}),y=_[a],k=f?i:g?i[t]:(i[t]||{})[a];f&&(n=t);for(l in n){u=!h&&k&&void 0!==k[l];if(!(u&&l in _)){d=u?k[l]:n[l];_[l]=f&&"function"!=typeof k[l]?n[l]:m&&u?s(d,i):v&&k[l]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};t[a]=e[a];return t}(d):p&&"function"==typeof d?s(Function.call,d):d;if(p){(_.virtual||(_.virtual={}))[l]=d;e&c.R&&y&&!y[l]&&o(y,l,d)}}}};c.F=1;c.G=2;c.S=4;c.P=8;c.B=16;c.W=32;c.U=64;c.R=128;e.exports=c},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(28);e.exports=function(e,t,n){i(e);if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(30),r=n(38);e.exports=n(34)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){e[t]=n;return e}},function(e,t,n){var i=n(31),r=n(33),s=n(37),o=Object.defineProperty;t.f=n(34)?Object.defineProperty:function(e,t,n){i(e);t=s(t,!0);i(n);if(r)try{return o(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");"value"in n&&(e[t]=n.value);return e}},function(e,t,n){var i=n(32);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(34)&&!n(35)(function(){return 7!=Object.defineProperty(n(36)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(35)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var i=n(32),r=n(25).document,s=i(r)&&i(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},function(e,t,n){var i=n(32);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){e.exports=n(40)},function(e,t){"use strict";t.__esModule=!0;t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){"use strict";function n(e,t,n,i){"ngInject";i.hashPrefix("");n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|localhost):/);e.state("root",{"abstract":!0,templateUrl:"app/controllers/root/root.html",controller:"RootController as ctrl"}).state("root.loading",{url:"",template:"",controller:"LoadingController as ctrl"}).state("root.404",{templateUrl:"app/controllers/error/404.html",controller:"ErrorController as ctrl",params:{name:"",errorMessage:""}}).state("root.order",{url:"/order?{tab?}",templateUrl:"app/controllers/order/order.html",controller:"OrderController as ctrl",params:{tab:null}}).state("root.order-detail",{url:"/order/{orderId}",templateUrl:"app/controllers/order-detail/order-detail.html",controller:"OrderDetailController as ctrl",params:{orderId:""}}).state("root.purchase-order",{url:"/order/{orderId}/submit",templateUrl:"app/controllers/submit-order/submit-order.html",controller:"SubmitOrderController as ctrl",params:{orderId:"",isPayment:!1}}).state("root.payment-order",{url:"/order/{orderId}/payment",templateUrl:"app/controllers/submit-order/submit-order.html",controller:"SubmitOrderController as ctrl",params:{orderId:"",isPayment:!0}}).state("root.login",{url:"/login",templateUrl:"app/controllers/login/login.html",controller:"LoginController as ctrl",params:{classCode:"",name:"",errorMessage:""}}).state("root.login-with-classcode",{url:"/{source:login|classcode}/{classCode:.{6}}",templateUrl:"app/controllers/login/login.html",controller:"LoginController as ctrl",params:{classCode:"",name:"",errorMessage:""}}).state("root.account-login",{url:"/account/login",templateUrl:"app/controllers/account-login/account-login.html",controller:"AccountLoginController as ctrl",params:{referral:"",classCode:""}}).state("root.account-clever",{url:"/account/clever?{token?}&{state?}",templateUrl:"app/controllers/account-clever/account-clever.html",controller:"AccountCleverController as ctrl",params:{token:"",state:""}}).state("root.forgot-password",{url:"/forgot-password",templateUrl:"app/controllers/forgot-password/forgot-password.html",controller:"ForgotPasswordController as ctrl"}).state("root.signup-choice",{url:"/signup/choice",templateUrl:"app/controllers/signup-choice/signup-choice.html",controller:"SignupChoiceController as ctrl"}).state("root.signup-teacher",{url:"/signup/teacher",templateUrl:"app/controllers/signup/signup.html",controller:"SignupController as ctrl",params:{isTeacher:!0,referral:""}}).state("root.signup-student",{url:"/signup/student",templateUrl:"app/controllers/signup/signup.html",controller:"SignupController as ctrl",params:{isStudent:!0,classCode:null}}).state("root.signup-teacher-name",{url:"/signup/teacher/name",templateUrl:"app/controllers/signup-name/signup-name.html",controller:"SignupNameController as ctrl",params:{isTeacher:!0,firstName:"",lastName:""}}).state("root.signup-student-name",{url:"/signup/student/name",templateUrl:"app/controllers/signup-name/signup-name.html",controller:"SignupNameController as ctrl",params:{isStudent:!0,firstName:"",lastName:""}}).state("root.signup-school",{url:"/signup/teacher/school",templateUrl:"app/controllers/signup-school/signup-school.html",controller:"SignupSchoolController as ctrl"}).state("root.anon-student-assignment-work",{url:"/student/{classCode:.{6}}/{name:[^/]+}/{question:int}",templateUrl:"app/controllers/anon-student-assignment-work/anon-student-assignment-work.html",controller:"AnonStudentAssignmentWorkController as ctrl",params:{classCode:"",name:"",source:"",errorMessage:"",question:1}}).state("root.anon-student-assignment-overview",{url:"/student/{classCode:.{6}}/{name:[^/]+}",templateUrl:"app/controllers/anon-student-assignment-overview/anon-student-assignment-overview.html",controller:"AnonStudentAssignmentOverviewController as ctrl",params:{classCode:"",name:""}}).state("root.anon-student-assignment-feedback",{url:"/student/{classCode:.{6}}/{name:[^/]+}/help",templateUrl:"app/controllers/anon-student-assignment-feedback/anon-student-assignment-feedback.html",controller:"AnonStudentAssignmentFeedbackController as ctrl",params:{classCode:"",name:"",request:null}}).state("root.password-reset",{url:"/password-reset/{token}",templateUrl:"app/controllers/password-reset/password-reset.html",controller:"PasswordResetController as ctrl"}).state("root.account",{"abstract":!0,url:"/account",templateUrl:"app/controllers/account/account.html",controller:"AccountController as ctrl",params:{authType:""}}).state("root.account.home",{url:"",template:"",controller:"AccountHomeController as ctrl",params:{classCode:""}}).state("root.account.nav",{"abstract":!0,templateUrl:"app/controllers/nav/nav.html",controller:"NavController as ctrl"}).state("root.account.nav.assignments",{url:"/assignments",templateUrl:"app/controllers/assignments-list/assignments-list.html",controller:"AssignmentsListController as ctrl",params:{source:""}}).state("root.account.nav.folder",{url:"/assignments/folder/{folderId}",templateUrl:"app/controllers/assignments-list/assignments-list.html",controller:"AssignmentsListController as ctrl",params:{folderId:""}}).state("root.account.nav.notifications",{url:"/notifications",templateUrl:"app/controllers/user-notifications-list/user-notifications-list.html",controller:"UserNotificationsListController as ctrl"}).state("root.account.nav.rosters",{url:"/rosters",templateUrl:"app/controllers/rosters-list/rosters-list.html",controller:"RostersListController as ctrl"}).state("root.account.nav.admin",{url:"/admin",templateUrl:"app/controllers/admin/admin.html",controller:"AdminController as ctrl",params:{hideNavText:void 0}}).state("root.account.roster",{url:"/rosters/{rosterId}",templateUrl:"app/controllers/roster-edit/roster-edit.html",controller:"RosterEditController as ctrl",params:{rosterId:"",isNew:!1}}).state("root.account.nav.profile",{url:"/profile?{tab?}",templateUrl:"app/controllers/user-profile/user-profile.html",controller:"UserProfileController as ctrl",reloadOnSearch:!1,params:{tab:null}}).state("root.account.nav.contract-users-no-id",{url:"/contracts",templateUrl:"app/controllers/contract-users-list/contract-users-list.html",controller:"ContractUsersListController as ctrl",reloadOnSearch:!1}).state("root.account.nav.contract-users",{url:"/contracts/{contractId}/users?{verifyUserId?}",templateUrl:"app/controllers/contract-users-list/contract-users-list.html",controller:"ContractUsersListController as ctrl",reloadOnSearch:!1,params:{contractId:null,verifyUserId:null}}).state("root.account.nav.metrics",{url:"/metrics/{contractId}",templateUrl:"app/controllers/metric-list/metric-list.html",controller:"MetricListController as ctrl",params:{contractId:null}}).state("root.account.nav.metrics-no-contract-id",{url:"/metrics",templateUrl:"app/controllers/metric-list/metric-list.html",controller:"MetricListController as ctrl"}).state("root.account.contract-user",{url:"/contracts/{contractId}/users/{userId}",templateUrl:"app/controllers/contract-user-edit/contract-user-edit.html",controller:"ContractUserEditController as ctrl",params:{contractId:null,userId:null}}).state("root.account.nav.student-assignments-list",{url:"/student-assignments",templateUrl:"app/controllers/student-assignments-list/student-assignments-list.html",controller:"StudentAssignmentsListController as ctrl"}).state("root.account.assignment",{url:"/assignments/{assignmentId}",templateUrl:"app/controllers/assignment-edit/assignment-edit.html",controller:"AssignmentEditController as ctrl",params:{assignmentId:"",isNew:!1,lastRosterId:""}}).state("root.account.assignment-question",{url:"/assignments/{assignmentId}/question/{questionId}",templateUrl:"app/controllers/assignment-edit-question/assignment-edit-question.html",controller:"AssignmentEditQuestionController as ctrl",params:{assignmentId:"",questionId:""}}).state("root.account.assignment-rosters",{url:"/assignments/{assignmentId}/rosters",templateUrl:"app/controllers/assignment-rosters/assignment-rosters.html",controller:"AssignmentRostersController as ctrl",params:{assignmentId:"",lastRosterId:""}}).state("root.account.session",{"abstract":!0,url:"/assignments/{assignmentId}/roster/{rosterId}",templateUrl:"app/controllers/session/session.html",controller:"SessionController as ctrl"}).state("root.account.session.work",{url:"/work",templateUrl:"app/controllers/session-work/session-work.html",controller:"SessionWorkController as ctrl",params:{assignmentId:"",rosterId:"",sort:""}}).state("root.account.session.work.feedback",{url:"/feedback/{assignmentWorkId}/{questionId}",templateUrl:"app/controllers/assignment-teacher-feedback/assignment-teacher-feedback.html",controller:"AssignmentTeacherFeedbackController as ctrl",params:{assignmentId:"",assignmentWorkId:"",questionId:""}}).state("root.account.session.watch",{url:"/watch",templateUrl:"app/controllers/session-watch/session-watch.html",controller:"SessionWatchController as ctrl",params:{assignmentId:"",rosterId:"",sort:""}}).state("root.account.session.watch.feedback",{url:"/feedback/{assignmentWorkId}/{questionId}",templateUrl:"app/controllers/assignment-teacher-feedback/assignment-teacher-feedback.html",controller:"AssignmentTeacherFeedbackController as ctrl",params:{assignmentId:"",assignmentWorkId:"",questionId:""}}).state("root.account.session.question",{url:"/question/{questionNumber:int}",templateUrl:"app/controllers/session-question/session-question.html",controller:"SessionQuestionController as ctrl",params:{assignmentId:"",rosterId:"",questionNumber:1,sort:""}}).state("root.account.session.question.feedback",{url:"/feedback/{assignmentWorkId}/{questionId}",templateUrl:"app/controllers/assignment-teacher-feedback/assignment-teacher-feedback.html",controller:"AssignmentTeacherFeedbackController as ctrl",params:{assignmentId:"",assignmentWorkId:"",questionId:""}}).state("root.account.student-assignment-overview",{url:"/student-works/{assignmentWorkId}/overview",templateUrl:"app/controllers/student-account-assignment-overview/student-account-assignment-overview.html",controller:"StudentAccountAssignmentOverviewController as ctrl",params:{assignmentWorkId:""}}).state("root.account.student-assignment-work",{url:"/student-works/{assignmentWorkId}/questions/{questionId}",templateUrl:"app/controllers/student-account-assignment-work/student-account-assignment-work.html",controller:"StudentAccountAssignmentWorkController as ctrl",params:{assignmentWorkId:"",questionId:""}}).state("root.account.student-assignment-feedback",{url:"/student-works/{assignmentWorkId}/help",templateUrl:"app/controllers/student-account-assignment-feedback/student-account-assignment-feedback.html",controller:"StudentAccountAssignmentFeedbackController as ctrl",params:{assignmentWorkId:"",request:null}}).state("root.account.create-payment",{url:"/upgrade",templateUrl:"app/controllers/payment/payment.html",controller:"PaymentController as ctrl"}).state("root.account.payment-success",{url:"/upgrade/success?{subscriptionId}",templateUrl:"app/controllers/payment-success/payment-success.html",controller:"PaymentSuccessController as ctrl",params:{subscriptionId:null}}).state("root.account.update-payment",{url:"/plans/{subscriptionPlan}/update-payment",templateUrl:"app/controllers/payment/payment.html",controller:"PaymentController as ctrl",params:{subscriptionPlan:null}}).state("root.help",{url:"/help?{userEmail?}",templateUrl:"app/controllers/help/help.html",controller:"HelpController as ctrl",params:{userEmail:null}}).state("root.help-category",{url:"/help/categories/{categoryId}",templateUrl:"app/controllers/help-category/help-category.html",controller:"HelpCategoryController as ctrl",params:{categoryId:""}}).state("root.help-section",{url:"/help/sections/{sectionId}",templateUrl:"app/controllers/help-section/help-section.html",controller:"HelpSectionController as ctrl",params:{sectionId:""}}).state("root.help-article",{url:"/help/articles/{articleId}",templateUrl:"app/controllers/help-article/help-article.html",controller:"HelpArticleController as ctrl",params:{articleId:""}}).state("root.help-coaches",{url:"/help/coaches/{sectionId}",templateUrl:"app/controllers/help-coaches/help-coaches.html",controller:"HelpCoachesController as ctrl",params:{sectionId:""}}).state("root.public-assignments-library",{url:"/assignments",templateUrl:"app/controllers/assignment-library/assignment-library.html",controller:"AssignmentLibraryController as ctrl"}).state("root.public-assignments-list",{url:"/users/{userId}/shared",templateUrl:"app/controllers/public-assignments-list/public-assignments-list.html",controller:"PublicAssignmentsListController as ctrl",params:{userId:""}}).state("root.public-assignment",{url:"/assignments/{assignmentId}",templateUrl:"app/controllers/public-assignment/public-assignment.html",controller:"PublicAssignmentController as ctrl",params:{assignmentId:""}}).state("root.public-assignment-question",{url:"/assignments/{assignmentId}/question/{questionId}",templateUrl:"app/controllers/public-assignment-question/public-assignment-question.html",controller:"PublicAssignmentQuestionController as ctrl",params:{assignmentId:"",questionId:""}});t.otherwise(function(e,t){var n=t.url(),i=e.get("$state");if(""!==n&&"/"!==n){n.startsWith("/teacher")&&(n=n.replace(/^\/teacher/,"/account"));n.endsWith("/account/account")&&(n="/account/profile");n.lastIndexOf("/")===n.length-1&&(n=n.slice(0,n.length-1));if(!n.startsWith("/login-teacher")){t.url()===n&&i.go("root.404",{errorMessage:"Sorry, we couldn't find that page."},{reload:!0});return n}i.go("root.account-login")}else i.go("root.loading")})}n.$inject=["$stateProvider","$urlRouterProvider","$compileProvider","$locationProvider"];Object.defineProperty(t,"__esModule",{value:!0});t.routerConfig=n},function(e,t){"use strict";function n(e,t,n,i,r,s,o,a){"ngInject";s.init();o.info("starting classkick",a.version)}n.$inject=["DomObservabilityService","StorageService","StaticService","ImageEditService","CacheService","BootstrapService","$log","constants"];Object.defineProperty(t,"__esModule",{value:!0});t.runBlock=n},function(e,t){"use strict";function n(){"ngInject";Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,s=Math.max(r>=0?r:i-Math.abs(r),0);i>s;){if(n[s]===e)return!0;s++}return!1}});Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(!angular.isFunction(e))throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;n>r;){var s=t[r];if(e.call(i,s,r,t))return r;r++}return-1},configurable:!0,writable:!0});Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{value:function(){for(var e=[],t=0;t<this.length;t++)angular.isArray(this[t])?e=e.concat(this[t].flat()):e.push(this[t]);return e}})}Object.defineProperty(t,"__esModule",{value:!0});t.polyfill=n},function(e,t){"use strict";function n(e){"ngInject";e.definePalette("classkickPrimary",{50:"#ffffff",100:"#eff9e3",200:"#d5eeb6",300:"#b4e17c",400:"#a5db63",500:"#97d54a",600:"#89cf31",700:"#78b72b",800:"#689e25",900:"#58861f",A100:"#ffffff",A200:"#eff9e3",A400:"#a5db63",A700:"#78b72b",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200 A400 A700",contrastLightColors:void 0});e.definePalette("classkickWarn",{50:"#ffffff",100:"#ffffff",200:"#fff1f1",300:"#ffa9a9",400:"#ff8b8b",500:"#ff6c6c",600:"#ff4d4d",700:"#ff2f2f",800:"#ff1010",900:"#f10000",A100:"#ffffff",A200:"#ffffff",A400:"#ff8b8b",A700:"#ff2f2f",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 500 600 A100 A200 A400"});e.theme("default").primaryPalette("classkickPrimary").warnPalette("classkickWarn")}n.$inject=["$mdThemingProvider"];Object.defineProperty(t,"__esModule",{value:!0});t.themeConfig=n},function(e,t){"use strict";function n(){angular.module("classkickApp").constant("environment",{
serverUrlBase:"https://services.classkick.com",webUrlBase:"https://storage.googleapis.com/web-classkick-prod",stripeKey:"pk_live_pNNk6m3mpbUOd6LXlfrFHSed",debugLogging:!1,firebaseTraceLogging:!1,defaultFirebaseNotificationShards:40,defaultFirebaseReduceNotificationShardConnections:!1,retryMs:6e4,accountInitTimeout:15e3,delighted:!0,logRocket:!0,clever:{clientId:"f381693ae99cf2053dde"},observability:{enabled:!0,traceLogging:!1},dataDog:{enabled:!0,traceLogging:!1,clientToken:"pub7195c2a238d40b2f05660f02e239d413",applicationId:"14dcfe51-044f-400a-8584-90aff3b0afb9",site:"datadoghq.com",service:"classkick-web",env:"production",sampleRate:1,trackInteractions:!0},google:{auth:{apiKey:"AIzaSyD1ROevzxlQOl8UKr0ZkP-eHX7Zk2fA2Io",clientId:"174905604722-dfu3ki6es9ufi9fvhsqj5juhificuds9.apps.googleusercontent.com"},stackdriverLogging:!0},googleAnalyticsIds:{"labs.classkick.com":"UA-67130803-4","app.classkick.com":"UA-67130803-3"},mixpanelId:"09fb7fc91c9df01692c528b071cd48f9",assignmentLibraryAccount:"library@classkick.com",ipstack:"302fad1d1e1ddd137aa7587171a258b7"})}Object.defineProperty(t,"__esModule",{value:!0});t.Environment=n},function(e,t){"use strict";function n(){angular.module("classkickApp").constant("constants",{version:"4.43.0-6170-bae8442",backend:"webservices",projectId:"classkick-907"})}Object.defineProperty(t,"__esModule",{value:!0});t.Constants=n},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",scope:{config:"="},templateUrl:"app/components/assignment-sheet/assignment-sheet.html",link:ge.link,controller:ge,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(48)["default"],a=n(68)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var l=n(117),u=c(l),d=n(118),h=c(d),f=n(233),g=c(f),p=n(230),m=c(p),v=n(153),_=c(v),y=n(276),k=c(y),b=n(156),S=n(144),w=c(S),C=n(279),E=c(C),T=n(280),I=c(T),A=n(205),x=c(A),O=n(274),P=c(O),R=n(249),D=c(R),M=n(219),N=c(M),L=n(214),F=c(L),U=n(171),$=c(U),q=n(281),H=(c(q),n(255)),j=(c(H),n(258)),B=c(j),W=n(222),V=c(W),z=n(262),G=c(z),Q=n(234),K=c(Q),Y=n(266),X=c(Y),J=n(282),Z=c(J),ee=n(246),te=c(ee),ne=n(268),ie=c(ne),re=n(283),se=c(re),oe=n(284),ae=c(oe),ce=n(130),le=c(ce),ue=n(155),de=c(ue),he=function(){function e(t,n,i,r,o,a,c,l,u,d,h){s(this,e);this._metadata={userId:o,role:a,intent:c};this._readonly=angular.isDefined(i)?i:!0;this._thumbnail=angular.isDefined(r)?r:!0;this._contentOpacity=u;this._onInit=d;this._hasOnInitFunc=angular.isFunction(d);this._target=t;this._questionId=n;this._questionIndex=t.indexForQuestionId(n);this._helpRequests=h;this._scrollViewSelector=l}r(e,[{key:"metadata",get:function(){return this._metadata}},{key:"readonly",get:function(){return this._readonly}},{key:"thumbnail",get:function(){return this._thumbnail}},{key:"target",get:function(){return this._target}},{key:"questionId",get:function(){return this._questionId}},{key:"index",get:function(){return this._questionIndex}},{key:"scrollViewSelector",get:function(){return this._scrollViewSelector}},{key:"contentOpacity",get:function(){return this._contentOpacity}},{key:"onInit",get:function(){return this._onInit}},{key:"hasOnInitFunc",get:function(){return this._hasOnInitFunc}},{key:"helpRequests",get:function(){return this._helpRequests}}]);return e}();t.AssignmentSheetMetadata=he;var fe=function(e){function t(e,n,i){s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.editable=n;this.active=i;this.ctrl=e}a(t,e);r(t,[{key:"onAdded",value:function(e){this.ctrl.renderOne(e,this.editable,this.active);this.ctrl.isFeedback(e)&&this.ctrl._toolbarService.feedback.given()}},{key:"onRemoved",value:function(e){this.ctrl.remove(e);this.ctrl.isFeedback(e)&&this.ctrl._toolbarService.feedback.given()}},{key:"onChanged",value:function(e){this.ctrl.renderOne(e,this.editable,this.active);this.ctrl.isFeedback(e)&&this.ctrl._toolbarService.feedback.given()}}]);return t}(u["default"]),ge=function(){function e(t,n,i,r,o,a,c,l,u,d,h,f,g,p){"ngInject";var m=this;s(this,e);this.$q=t;this.$log=n;this.$document=r;this.$timeout=o;this.$window=a;this.$mdDialog=c;this.$mdPanel=l;i.$on("$destroy",function(){return m._destroy()});this._svgSheet=null;this._firebaseService=u;this._focusManager=d;this._assignmentTrackingService=h;this._toolbarService=f;this._mediaService=g;this._logRocketService=p;this._config=null;this._elementsLoaded=0;this._initialElementPosition=new w["default"](50,50);this._initialStickerPosition=D["default"].InitialStickerPosition;this._anonHandleNotification=function(e){return m._handleNotification(e)};this._anonHandleStateUpdated=function(e){return m._handleStateUpdated(e.newState)};this._importImageDialog=x["default"].show;this._linkDialog=E["default"].show;this._loadingDialog=P["default"].show;this._errorDialog=F["default"].show;this._cameraDialog=se["default"].show;this._addManipulativeImageDialog=ae["default"].show;this._moreOptionsManager=new pe(this.$q,this.$mdPanel,this.$mdDialog);this.focusedElement&&(this.focusedElement=void 0)}e.$inject=["$q","$log","$scope","$document","$timeout","$window","$mdDialog","$mdPanel","FirebaseService","FocusManagerService","AssignmentTrackingService","ToolbarService","MediaService","LogRocketService"];r(e,[{key:"_init",value:function(e){var t=this;this._elementsLoaded=0;this.content&&this.content.unsubscribe(this._assignmentObserver);this.work&&this.work.unsubscribe(this._workObserver);e();this._svgSheet.readonly=this._readonly;this._svgSheet.layers.clear();this._svgSheet.refreshLayout();if(angular.isNumber(this._index)&&this._target&&this._isInDom){this._initContentOpacity();if(this._active){this._svgSheet.scrollViewSelector=this._scrollViewSelector;this._toolbarService.zoomManager.svgSheet=this._svgSheet}this._svgSheet.showSheet();if(this._assignment){this._assignmentObserver=new fe(this,!this._readonlyContent,this._active);this.content.subscribe(this._assignmentObserver);this.contentQuestion.start()}if(this._assignmentWork){this._workObserver=new fe(this,!this._readonlyWork,this._active);this.work.subscribe(this._workObserver);this.workQuestion.start()}if(this._active){this._toolbarService.notification.subscribe(this._anonHandleNotification,this);this._toolbarService.stateUpdated.subscribe(this._anonHandleStateUpdated,this);this._toolbarService.targetIndex=this._index;if(this._ready){this._helpRequests&&(this._toolbarService.helpCenter.helpRequestManager.parentHelpRequestSet=this._helpRequests);this._isWork&&(this._toolbarService.helpCenter.chatMessageManager.messages=this.workQuestion.messages);if(!this._readonly){this._focusManager.elementList=this._isWork?this.work:this.content;this.lineCapture&&this.lineCapture.destroy();this.lineCapture=new h["default"](this._svgSheet,this._ownerId,this._role,this._intent,this._isWork,this._index,this._workOrContent,this._firebaseService,this._assignmentTrackingService,this._toolbarService);this.panCapture=new I["default"](this._svgSheet.layers.panCapture,this._toolbarService);this.placementCapture=new Z["default"](this._svgSheet,this._toolbarService);this.lineCapture.render(this._svgSheet.layers.lineCapture);this.panCapture.render(this._svgSheet.layers.panCapture);this.placementCapture.render(this._svgSheet.layers.placementCapture);var n=this._toolbarService.state.mode;this._toolbarService.updateMode(b.ToolbarModes.isPlacementMode(n)?b.ToolbarModes.Selector:n)}}}this._hasOnInitFunc&&this.initialElementCount.then(function(e){0===e&&t._onInit()})}}},{key:"_destroy",value:function(){if(this.content){this.content.unsubscribe(this._assignmentObserver);this.content.forEach(function(e){e.cleanUp()})}if(this.work){this.work.unsubscribe(this._workObserver);this.work.forEach(function(e){e.cleanUp()})}this._toolbarService.notification.unsubscribe(this._anonHandleNotification,this);this._toolbarService.stateUpdated.unsubscribe(this._anonHandleStateUpdated,this);this._svgSheet.destroy();this.lineCapture&&this.lineCapture.destroy();this.placementCapture&&this.placementCapture.clear()}},{key:"_handleNotification",value:function(e){var t=this;if(this._active){e.data.needsFocusedElement||(this.focusedElement=void 0);if(e.type===b.Notifications.CREATE_TEXTBOX)this.addTextbox(e.data.initialText,e.data.skipPlacement);else if(e.type===b.Notifications.CREATE_LINK)this._linkDialog(this.$mdDialog).then(function(e){t.addLink(e.title,e.url)});else if(e.type===b.Notifications.CREATE_IMAGE_FROM_FILE)this.addImage(e.data);else if(e.type===b.Notifications.CREATE_IMAGE_FROM_CAMERA)this.addCameraImage();else if(e.type===b.Notifications.CREATE_AUDIO)this.addAudio(e.data);else if(e.type===b.Notifications.CREATE_MANIPULATIVE_IMAGE)this.addManipulativeImage();else if(e.type===b.Notifications.CREATE_FILL_IN_THE_BLANK)this.addFillInTheBlank();else if(e.type===b.Notifications.CREATE_MULTIPLE_CHOICE)this.addMultipleChoiceParent(e.data);else if(e.type===b.Notifications.MOUSE_ENTER_DELETE&&this.hasFocusedElement)this.focusedElement.warnBeforeDeletion();else if(e.type===b.Notifications.MOUSE_LEAVE_DELETE&&this.hasFocusedElement)this.focusedElement.tryUpdate();else if(e.type===b.Notifications.DELETE&&this.hasFocusedElement){var n=this.focusedElement;this.focusedElement=void 0;this._assignmentTrackingService.deleteElement(n,this._index,this._isWork)}else if(e.type===b.Notifications.HIDE_FEEDBACK)this.feedbackVisible=!1;else if(e.type===b.Notifications.SHOW_FEEDBACK)this.feedbackVisible=!0;else if(e.type===b.Notifications.UPDATE_TEXTBOX_SIZE&&(this.textboxIsFocused||this.fillInTheBlankParentIsFocused))this.focusedElement.fontSize=e.data.fontSize;else if(e.type===b.Notifications.UNDO)e.data.change.deleted?this.focusedElement=void 0:this.textboxIsFocused&&this._focusManager.refocusElement();else if(e.type===b.Notifications.REDO)e.data.change.deleted?this.focusedElement=void 0:this.textboxIsFocused&&this._focusManager.refocusElement();else if(e.type===b.Notifications.UPDATE_TEXTBOX_COLOR&&this.textboxIsFocused){e.data.hex&&(this.focusedElement.textColor=e.data.hex);this._focusManager.refocusInput()}else if(e.type===b.Notifications.UPDATE_TEXTBOX_BACKGROUND_COLOR&&this.textboxIsFocused){e.data.hex&&(this.focusedElement.backgroundColor=e.data.hex);this._focusManager.refocusInput()}else if(e.type===b.Notifications.UPDATE_TEXTBOX_BORDER_COLOR&&this.textboxIsFocused){e.data.hex&&(this.focusedElement.borderColor=e.data.hex);this._focusManager.refocusInput()}else e.type===b.Notifications.ADD_STICKER?this.addSticker(e.data.sticker,e.data.stickerImage,e.data.skipPlacement):e.type===b.Notifications.CLONE_ELEMENT?this.cloneElement(e.data.element):e.type===b.Notifications.CREATE_STRAIGHT_LINE?this.addStraightLine():e.type===b.Notifications.UPDATE_STRAIGHT_LINE_COLOR&&this.straightLineIsFocused?this.focusedElement.color=e.data.hex:e.type===b.Notifications.UPDATE_STRAIGHT_LINE_WIDTH&&this.straightLineIsFocused?this.focusedElement.width=e.data.width:e.type===b.Notifications.CLEAR_PLACEMENT?this.placementCapture.clear():e.type===b.Notifications.UPDATE_SLIDE_BACKGROUND?this.updateSlideBackground(e.data.hex,e.data.url):e.type===b.Notifications.CLEAR_ALL&&this.clearAll()}else this.$log.warn("Attempted to handle event for inactive sheet",e)}},{key:"_handleStateUpdated",value:function(e){if(this._ready&&this.lineCapture){this.lineCapture.state=e;this.isPanning=e.mode===b.ToolbarModes.Touch;b.ToolbarModes.Selector!==e.mode&&(this.focusedElement=void 0)}}},{key:"cloneElement",value:function(e){var t=this;e.id=this._firebaseService.newId();e.metadata=this._newElementMetadata;var n=this.$q.resolve(e);(e.type===V["default"].type||e.type===N["default"].type)&&(n=this._copyMedia(e.id,e.url).then(function(t){e.url=t;return e}));n.then(function(e){e.location=t._clonedElementPosition(e.location);return t._assignmentTrackingService.createElement(e,t._index,t._isWork)});this._loadingDialog(this.$mdDialog,n)}},{key:"_clonedElementPosition",value:function(e){return this._collidesWithExistingElement(e)?this._clonedElementPosition(e.plus(new w["default"](30,30))):e}},{key:"_collidesWithExistingElement",value:function(e){var t=this._isWork?this.work:this.content;return t.some(function(t){return t.location.equals(e)})}},{key:"_copyMedia",value:function(e,t){return this._mediaService.copy(e,t,this._isWork?this.workQuestion.elementListId:this.contentQuestion.elementListId)}},{key:"addTextbox",value:function(e,t){var n=this,i=new g["default"](this._firebaseService.newId(),this._newElementMetadata,e||"",void 0,null,this._toolbarService.state.text.size,null,null,this._toolbarService.state.text.color,this._toolbarService.state.text.backgroundColor,this._toolbarService.state.text.borderColor);if(t){i.location=this._svgSheet.elementOffset(this._nextElementPosition());this._addTextbox(i)}else{this.placementCapture.config=new J.PlacementConfig(i,function(e,t){i.location=e;t.width>0&&(i.size=t);n._addTextbox(i)});this._toolbarService.updateMode(b.ToolbarModes.PlaceTextbox)}}},{key:"_addTextbox",value:function(e){this.renderOne(e,!0,!0);this._assignmentTrackingService.createElement(e,this._index,this._isWork);e.setNewTextboxAttributes();e.focus()}},{key:"addStraightLine",value:function(){var e=this,t=new X["default"](this._firebaseService.newId(),this._newElementMetadata,void 0,void 0,this._toolbarService.state.straightLines.color.hex,this._toolbarService.state.straightLines.width);this.placementCapture.config=new J.PlacementConfig(t,function(n,i,r,s){t.start=r;t.end=r.equals(s)?r.plus(new w["default"](100,100)):s;e.renderOne(t,!0,!0);e._assignmentTrackingService.createElement(t,e._index,e._isWork);t.focus()});this._toolbarService.updateMode(b.ToolbarModes.PlaceStraightLine)}},{key:"addCameraImage",value:function(){var e=this;this._cameraDialog(this.$mdDialog,this._index,this._questionId).then(function(t){return e.addImage(t)})}},{key:"addImage",value:function(e){var t=this,n=void 0;n=e.imageImport?this.$q.resolve({newQuestions:[],images:[e.imageImport]}):this._launchImportImageDialog();n.then(function(e){t._importImages(e)})}},{key:"addManipulativeImage",value:function(){var e=this;this._addManipulativeImageDialog(this.$q,this.$mdDialog,this._assignment.questions,this._questionId).then(function(t){return e._importImages(t)})}},{key:"_launchImportImageDialog",value:function(){return this._importImageDialog(this.$q,this.$mdDialog,this._assignment.questions,this._intent===v.ElementIntents.CONTENT,this._intent===v.ElementIntents.CONTENT,this._questionId,!1)}},{key:"_importImages",value:function(e){var t=this._assignmentTrackingService.importImages(e,this._target,this._newElementMetadata,this._svgSheet,this._questionId);this._loadingDialog(this.$mdDialog,t);return t}},{key:"addFillInTheBlank",value:function(){var e=this,t=new G["default"](this._firebaseService.newId(),this._newElementMetadata,new w["default"](0,0),void 0,void 0,void 0);this.placementCapture.config=new J.PlacementConfig(t,function(n,i){t.location=n;i.width>0&&(t.size=i);e.renderOne(t,!0,!0);e._assignmentTrackingService.createElement(t,e._index,e._isWork);t.focus()});this._toolbarService.updateMode(b.ToolbarModes.PlaceFillInTheBlank)}},{key:"addAudio",value:function(e){var t=this,n=this._mediaService.create(e,this._intent,this._elementListId);this._loadingDialog(this.$mdDialog,n);n.then(function(e){var n=t._svgSheet.elementOffset(t._nextElementPosition()),i=new N["default"](e.newElementId,t._newElementMetadata,n,void 0,e.mediaLink);t.renderOne(i,!0,!1);i.focus();t._assignmentTrackingService.createElement(i,t._index,t._isWork)})["catch"](function(e){t.$log.error("#addAudio",e);navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(n){var i=n.reduce(function(e,t){return e+", '"+t.label+"':"+t.kind},"devices-");t._logRocketService.handleError(new Error(e.message+": "+i))}):t._logRocketService.handleError(e);"internal-server-error"===e.code&&"empty upload file"===e.message?t._errorDialog(t.$mdDialog,void 0,"<p>Classkick is having trouble recording from your microphone. This can often be fixed by quitting and reopening your browser, but sometimes requires you to restart your computer.</p>\n             <p>We're working on a permanent fix, but in the meantime please try the above steps. If you continue to have problems send us an email at <b>support@classkick.com</b></p>"):t._errorDialog(t.$mdDialog,"Oh no! Something went wrong! Please try again.","If you continue to have problems, send us an email at <b>support@classkick.com</b>")})}},{key:"addMultipleChoiceParent",value:function(e){var t=this._svgSheet.elementOffset(this._nextElementPosition()),n=new $["default"](this._firebaseService.newId(),this._newElementMetadata,t,void 0,e);this._assignmentTrackingService.createElement(n,this._index,this._isWork)}},{key:"deleteMultipleChoiceParent",value:function(e){this._assignmentTrackingService.deleteElement(e,this._index,this._isWork)}},{key:"addLink",value:function(e,t){var n=this._svgSheet.elementOffset(this._nextElementPosition()),i=new m["default"](this._firebaseService.newId(),this._newElementMetadata,n,null,e,t);this.renderOne(i,!0,!1);i.focus();this._assignmentTrackingService.createElement(i,this._index,this._isWork)}},{key:"updateSlideBackground",value:function(e,t){var n=this.content.find(function(e){return e.type===ie["default"].type});if(n)e?n.hex=e:t?n.url=t:this._assignmentTrackingService.deleteElement(n,this._index,this._isWork);else{var i=new ie["default"](this._firebaseService.newId(),this._newElementMetadata,e,t);this.renderOne(i,!0,!1);this._assignmentTrackingService.createElement(i,this._index,this._isWork)}}},{key:"clearAll",value:function(){var e=this,t=this._workOrContent.filter(function(t){return(t.type===le["default"].type||t.type===de["default"].type)&&e._isSameUser(t)});this._assignmentTrackingService.deleteElements(t,this._index,this._isWork)}},{key:"addSticker",value:function(e,t,n){var i=this,r=new D["default"](this._firebaseService.newId(),this._newElementMetadata,void 0,e.imageUrl&&D["default"].createSizeFromImage(t),e.text,e.imageUrl,e.score,!1);if(n){r.location=this._svgSheet.elementOffset(this._nextStickerPosition());this._addSticker(r,e);this.placementCapture.clear()}else{this.placementCapture.config=new J.PlacementConfig(r,function(t,n,s,o){r.location=o;i._addSticker(r,e)},function(){i._toolbarService.state.stickers.selectedId===e.id&&i._toolbarService.updateSelectedUserSticker("")});this._toolbarService.updateMode(b.ToolbarModes.PlaceSticker);this._toolbarService.updateSelectedUserSticker(e.id)}}},{key:"_addSticker",value:function(e,t){this.renderOne(e,!0,!1);this._assignmentTrackingService.createElement(e,this._index,this._isWork);this._toolbarService.updateSelectedUserSticker("");this._toolbarService.addStickerScore(t.score)}},{key:"_nextStickerPosition",value:function(){this._lastStickerPosition?this._lastStickerPosition.y>450?this._lastStickerPosition=this._initialStickerPosition.plus(new w["default"](80,0)):this._lastStickerPosition=this._lastStickerPosition.plus(new w["default"](0,80)):this._lastStickerPosition=this._initialStickerPosition;return this._lastStickerPosition}},{key:"_nextElementPosition",value:function(){!this._lastElementPosition||this._lastElementPosition.x>200||this._lastElementPosition>600?this._lastElementPosition=this._initialElementPosition:this._lastElementPosition=this._lastElementPosition.plus(new w["default"](60,60));return this._lastElementPosition}},{key:"renderOne",value:function(e,t,n){var i=this;e.render(this._svgSheet.layers.pickLayer(e),this._isEditable(e,t),n,this._svgSheet,this._target,this._config.metadata,this._config.thumbnail,this._moreOptionsManager);e.visibility=this._isVisible(e)?"inherit":"hidden";this._hasOnInitFunc&&e.loaded["catch"](function(e){i.$log.error(e)}).then(function(){return i.initialElementCount}).then(function(e){i._elementsLoaded++;e===i._elementsLoaded&&i._onInit()})}},{key:"remove",value:function(e){e.remove&&e.remove()}},{key:"_isEditable",value:function(e,t){return t&&this._isSameIntent(e)&&this._isSameRole(e)&&this._isSameUser(e)}},{key:"_isSameUser",value:function(e){return this._intent===v.ElementIntents.CONTENT||e.metadata.ownerId===this._ownerId}},{key:"_isSameIntent",value:function(e){return e.metadata.intent===this._intent}},{key:"_isSameRole",value:function(e){return e.metadata.role===this._role}},{key:"isFeedback",value:function(e){return e.metadata.intent===v.ElementIntents.FEEDBACK}},{key:"_isVisible",value:function(e){return(this._isSameUser(e)||!this.isFeedbackInvisible&&!this.isFeedbackNotification)&&this._isManipulativeParentVisible(e)}},{key:"_isManipulativeParentVisible",value:function(e){return e.type===$["default"].type||e.type===B["default"].type||e.type===G["default"].type?!this._isWork:!0}},{key:"_initContentOpacity",value:function(){this._hasContentOpacity&&this._setContentOpacity()}},{key:"_setContentOpacity",value:function(){this._svgSheet.layers.content.attr({opacity:this._config.contentOpacity})}},{key:"element",get:function(){return this._element},set:function(e){this._element=e;this._svgSheet=new k["default"](this._element,this.$timeout,this.$window,this._focusManager,this._toolbarService)}},{key:"config",set:function(e){var t=this;if(e!==this._config){this._setup&&this.$timeout.cancel(this._setup);this._setup=this.$timeout(function(){t._init(function(){t._config=e});t._setup=void 0},0,!1)}}},{key:"hasMetadata",get:function(){return this._config&&this._config.metadata}},{key:"_ownerId",get:function(){return this.hasMetadata?this._config.metadata.userId:""}},{key:"_role",get:function(){return this.hasMetadata?this._config.metadata.role:""}},{key:"_intent",get:function(){return this.hasMetadata?this._config.metadata.intent:""}},{key:"_readonly",get:function(){return this._config?!!this._config.readonly:!1}},{key:"_active",get:function(){return this._config?!this._config.thumbnail:!1}},{key:"_index",get:function(){return this._config?this._config.index:void 0}},{key:"_scrollViewSelector",get:function(){return this._config?this._config.scrollViewSelector:void 0}},{key:"_target",get:function(){return this._config&&this._config.target}},{key:"_assignment",get:function(){return this._isWork?this._target.assignment:this._target}},{key:"_assignmentWork",get:function(){return this._isWork?this._target:null}},{key:"_isWork",get:function(){return this._target&&this._target.isWork}},{key:"_readonlyContent",get:function(){return this._readonly||!!this._assignmentWork}},{key:"_readonlyWork",get:function(){return this._readonly}},{key:"_onInit",get:function(){return this._config&&this._config.onInit}},{key:"_hasOnInitFunc",get:function(){return this._config&&this._config.hasOnInitFunc}},{key:"_helpRequests",get:function(){return this._config&&this._config.helpRequests}},{key:"_questionId",get:function(){return this._assignment&&angular.isNumber(this._index)&&this._assignment.questionIdForIndex(this._index)}},{key:"_isInDom",get:function(){return this.$document[0].body.contains(this._element[0])}},{key:"focusedElement",get:function(){return this._focusManager.focusedElement},set:function(e){this._focusManager.focusedElement=e}},{key:"hasFocusedElement",get:function(){return angular.isDefined(this.focusedElement)}},{key:"textboxIsFocused",get:function(){return this.hasFocusedElement&&this.focusedElement instanceof K["default"]}},{key:"straightLineIsFocused",get:function(){return this.hasFocusedElement&&this.focusedElement.type===X["default"].type}},{key:"fillInTheBlankParentIsFocused",get:function(){return this.hasFocusedElement&&this.focusedElement.type===G["default"].type}},{key:"isPanning",set:function(e){if(this._ready&&this.panCapture){this._isPanning=e;this.panCapture.visibility=e?"visible":"hidden";this._svgSheet.readonly=e}},get:function(){return this._isPanning}},{key:"_newElementMetadata",get:function(){return new _["default"](this._ownerId,this._role,this._intent)}},{key:"contentQuestion",get:function(){return this._assignment?this._assignment.questions[this._index]:void 0}},{key:"content",get:function(){return this.contentQuestion?this.contentQuestion.elements:void 0}},{key:"workQuestion",get:function(){return this._assignmentWork?this._assignmentWork.questionForIndex(this._index):void 0}},{key:"work",get:function(){return this.workQuestion?this.workQuestion.elements:void 0}},{key:"_ready",get:function(){return this._isWork&&angular.isDefined(this.work)||!this._isWork&&angular.isDefined(this.content)}},{key:"_workOrContent",get:function(){return this._isWork?this.work:this.content}},{key:"_elementListId",get:function(){return this._isWork?this.workQuestion.elementListId:this.contentQuestion.elementListId}},{key:"initialElementCount",get:function(){return this._isWork?this._assignmentWork.initialElementCountForIndex(this._index):this._assignment.initialElementCountForIndex(this._index)}},{key:"isFeedbackInvisible",get:function(){return this._toolbarService.isFeedbackInvisible}},{key:"isFeedbackNotification",get:function(){return this._toolbarService.isFeedbackNotification}},{key:"feedbackVisible",set:function(e){var t=this;this.work&&this.work.forEach(function(n){t.isFeedback(n)&&(n.visibility=e?"inherit":"hidden")})}},{key:"_hasContentOpacity",get:function(){return angular.isNumber(this._config.contentOpacity)}}],[{key:"link",value:function(e,t,n,i){i.element=t;e.$watch("config",function(e){i.config=e})}}]);return e}(),pe=function(){function e(t,n,i){s(this,e);this.$q=t;this.$mdPanel=n;this.$mdDialog=i;this._canvasContextMenu=te["default"].show;this._linkDialog=E["default"].show}r(e,[{key:"openMenu",value:function(e){if(!e)throw new Error("Event object must be passed to open more options menu");return this._canvasContextMenu(this.$mdPanel,this.$q,e)}},{key:"editLink",value:function(e,t){return this._linkDialog(this.$mdDialog,e,t)}}]);return e}();t.MoreOptionsManager=pe},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(49),s=i(r),o=n(60),a=i(o);t["default"]=function c(e,t,n){null===e&&(e=Function.prototype);var i=(0,a["default"])(e,t);if(void 0===i){var r=(0,s["default"])(e);return null===r?void 0:c(r,t,n)}if("value"in i)return i.value;var o=i.get;return void 0===o?void 0:o.call(n)}},function(e,t,n){e.exports={"default":n(50),__esModule:!0}},function(e,t,n){n(51);e.exports=n(26).Object.getPrototypeOf},function(e,t,n){var i=n(52),r=n(54);n(59)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(53);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(55),r=n(52),s=n(56)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=r(e);return i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(57)("keys"),r=n(58);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(25),r="__core-js_shared__",s=i[r]||(i[r]={});e.exports=function(e){return s[e]||(s[e]={})}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(24),r=n(26),s=n(35);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n);i(i.S+i.F*s(function(){n(1)}),"Object",o)}},function(e,t,n){e.exports={"default":n(61),__esModule:!0}},function(e,t,n){n(62);var i=n(26).Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var i=n(63),r=n(66).f;n(59)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){var i=n(64),r=n(53);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(65);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(67),r=n(38),s=n(63),o=n(37),a=n(55),c=n(33),l=Object.getOwnPropertyDescriptor;t.f=n(34)?l:function(e,t){e=s(e);t=o(t,!0);if(c)try{return l(e,t)}catch(n){}return a(e,t)?r(!i.f.call(e,t),e[t]):void 0}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(69),s=i(r),o=n(73),a=i(o),c=n(86),l=i(c);t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,l["default"])(t)));e.prototype=(0,a["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(s["default"]?(0,s["default"])(e,t):e.__proto__=t)}},function(e,t,n){e.exports={"default":n(70),__esModule:!0}},function(e,t,n){n(71);e.exports=n(26).Object.setPrototypeOf},function(e,t,n){var i=n(24);i(i.S,"Object",{setPrototypeOf:n(72).set})},function(e,t,n){var i=n(32),r=n(31),s=function(e,t){r(e);if(!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(27)(Function.call,n(66).f(Object.prototype,"__proto__").set,2);i(e,[]);t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){s(e,n);t?e.__proto__=n:i(e,n);return e}}({},!1):void 0),check:s}},function(e,t,n){e.exports={"default":n(74),__esModule:!0}},function(e,t,n){n(75);var i=n(26).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(24);i(i.S,"Object",{create:n(76)})},function(e,t,n){var i=n(31),r=n(77),s=n(84),o=n(56)("IE_PROTO"),a=function(){},c="prototype",l=function(){var e,t=n(36)("iframe"),i=s.length,r="<",o=">";t.style.display="none";n(85).appendChild(t);t.src="javascript:";e=t.contentWindow.document;e.open();e.write(r+"script"+o+"document.F=Object"+r+"/script"+o);e.close();l=e.F;for(;i--;)delete l[c][s[i]];return l()};e.exports=Object.create||function(e,t){var n;if(null!==e){a[c]=i(e);n=new a;a[c]=null;n[o]=e}else n=l();return void 0===t?n:r(n,t)}},function(e,t,n){var i=n(30),r=n(31),s=n(78);e.exports=n(34)?Object.defineProperties:function(e,t){r(e);for(var n,o=s(t),a=o.length,c=0;a>c;)i.f(e,n=o[c++],t[n]);return e}},function(e,t,n){var i=n(79),r=n(84);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(55),r=n(63),s=n(80)(!1),o=n(56)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),c=0,l=[];for(n in a)n!=o&&i(a,n)&&l.push(n);for(;t.length>c;)i(a,n=t[c++])&&(~s(l,n)||l.push(n));return l}},function(e,t,n){var i=n(63),r=n(81),s=n(83);e.exports=function(e){return function(t,n,o){var a,c=i(t),l=r(c.length),u=s(o,l);if(e&&n!=n)for(;l>u;){a=c[u++];if(a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var i=n(82),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(82),r=Math.max,s=Math.min;e.exports=function(e,t){e=i(e);return 0>e?r(e+t,0):s(e,t)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(25).document&&document.documentElement},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(87),s=i(r),o=n(103),a=i(o),c="function"==typeof a["default"]&&"symbol"==typeof s["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":typeof e};t["default"]="function"==typeof a["default"]&&"symbol"===c(s["default"])?function(e){return"undefined"==typeof e?"undefined":c(e)}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":"undefined"==typeof e?"undefined":c(e)}},function(e,t,n){e.exports={"default":n(88),
__esModule:!0}},function(e,t,n){n(89);n(98);e.exports=n(102).f("iterator")},function(e,t,n){"use strict";var i=n(90)(!0);n(91)(String,"String",function(e){this._t=String(e);this._i=0},function(){var e,t=this._t,n=this._i;if(n>=t.length)return{value:void 0,done:!0};e=i(t,n);this._i+=e.length;return{value:e,done:!1}})},function(e,t,n){var i=n(82),r=n(53);e.exports=function(e){return function(t,n){var s,o,a=String(r(t)),c=i(n),l=a.length;if(0>c||c>=l)return e?"":void 0;s=a.charCodeAt(c);return 55296>s||s>56319||c+1===l||(o=a.charCodeAt(c+1))<56320||o>57343?e?a.charAt(c):s:e?a.slice(c,c+2):(s-55296<<10)+(o-56320)+65536}}},function(e,t,n){"use strict";var i=n(92),r=n(24),s=n(93),o=n(29),a=n(55),c=n(94),l=n(95),u=n(96),d=n(54),h=n(97)("iterator"),f=!([].keys&&"next"in[].keys()),g="@@iterator",p="keys",m="values",v=function(){return this};e.exports=function(e,t,n,_,y,k,b){l(n,t,_);var S,w,C,E=function(e){if(!f&&e in x)return x[e];switch(e){case p:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",I=y==m,A=!1,x=e.prototype,O=x[h]||x[g]||y&&x[y],P=O||E(y),R=y?I?E("entries"):P:void 0,D="Array"==t?x.entries||O:O;if(D){C=d(D.call(new e));if(C!==Object.prototype){u(C,T,!0);i||a(C,h)||o(C,h,v)}}if(I&&O&&O.name!==m){A=!0;P=function(){return O.call(this)}}i&&!b||!f&&!A&&x[h]||o(x,h,P);c[t]=P;c[T]=v;if(y){S={values:I?P:E(m),keys:k?P:E(p),entries:R};if(b)for(w in S)w in x||s(x,w,S[w]);else r(r.P+r.F*(f||A),t,S)}return S}},function(e,t){e.exports=!0},function(e,t,n){e.exports=n(29)},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(76),r=n(38),s=n(96),o={};n(29)(o,n(97)("iterator"),function(){return this});e.exports=function(e,t,n){e.prototype=i(o,{next:r(1,n)});s(e,t+" Iterator")}},function(e,t,n){var i=n(30).f,r=n(55),s=n(97)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){var i=n(57)("wks"),r=n(58),s=n(25).Symbol,o="function"==typeof s,a=e.exports=function(e){return i[e]||(i[e]=o&&s[e]||(o?s:r)("Symbol."+e))};a.store=i},function(e,t,n){n(99);for(var i=n(25),r=n(29),s=n(94),o=n(97)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;5>c;c++){var l=a[c],u=i[l],d=u&&u.prototype;d&&!d[o]&&r(d,o,l);s[l]=s.Array}},function(e,t,n){"use strict";var i=n(100),r=n(101),s=n(94),o=n(63);e.exports=n(91)(Array,"Array",function(e,t){this._t=o(e);this._i=0;this._k=t},function(){var e=this._t,t=this._k,n=this._i++;if(!e||n>=e.length){this._t=void 0;return r(1)}return"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values");s.Arguments=s.Array;i("keys");i("values");i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){t.f=n(97)},function(e,t,n){e.exports={"default":n(104),__esModule:!0}},function(e,t,n){n(105);n(114);n(115);n(116);e.exports=n(26).Symbol},function(e,t,n){"use strict";var i=n(25),r=n(55),s=n(34),o=n(24),a=n(93),c=n(106).KEY,l=n(35),u=n(57),d=n(96),h=n(58),f=n(97),g=n(102),p=n(107),m=n(108),v=n(109),_=n(111),y=n(31),k=n(63),b=n(37),S=n(38),w=n(76),C=n(112),E=n(66),T=n(30),I=n(78),A=E.f,x=T.f,O=C.f,P=i.Symbol,R=i.JSON,D=R&&R.stringify,M="prototype",N=f("_hidden"),L=f("toPrimitive"),F={}.propertyIsEnumerable,U=u("symbol-registry"),$=u("symbols"),q=u("op-symbols"),H=Object[M],j="function"==typeof P,B=i.QObject,W=!B||!B[M]||!B[M].findChild,V=s&&l(function(){return 7!=w(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=A(H,t);i&&delete H[t];x(e,t,n);i&&e!==H&&x(H,t,i)}:x,z=function(e){var t=$[e]=w(P[M]);t._k=e;return t},G=j&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Q=function(e,t,n){e===H&&Q(q,t,n);y(e);t=b(t,!0);y(n);if(r($,t)){if(n.enumerable){r(e,N)&&e[N][t]&&(e[N][t]=!1);n=w(n,{enumerable:S(0,!1)})}else{r(e,N)||x(e,N,S(1,{}));e[N][t]=!0}return V(e,t,n)}return x(e,t,n)},K=function(e,t){y(e);for(var n,i=v(t=k(t)),r=0,s=i.length;s>r;)Q(e,n=i[r++],t[n]);return e},Y=function(e,t){return void 0===t?w(e):K(w(e),t)},X=function(e){var t=F.call(this,e=b(e,!0));return this===H&&r($,e)&&!r(q,e)?!1:t||!r(this,e)||!r($,e)||r(this,N)&&this[N][e]?t:!0},J=function(e,t){e=k(e);t=b(t,!0);if(e!==H||!r($,t)||r(q,t)){var n=A(e,t);!n||!r($,t)||r(e,N)&&e[N][t]||(n.enumerable=!0);return n}},Z=function(e){for(var t,n=O(k(e)),i=[],s=0;n.length>s;)r($,t=n[s++])||t==N||t==c||i.push(t);return i},ee=function(e){for(var t,n=e===H,i=O(n?q:k(e)),s=[],o=0;i.length>o;)r($,t=i[o++])&&(n?r(H,t):!0)&&s.push($[t]);return s};if(!j){P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(q,n);r(this,N)&&r(this[N],e)&&(this[N][e]=!1);V(this,e,S(1,n))};s&&W&&V(H,e,{configurable:!0,set:t});return z(e)};a(P[M],"toString",function(){return this._k});E.f=J;T.f=Q;n(113).f=C.f=Z;n(67).f=X;n(110).f=ee;s&&!n(92)&&a(H,"propertyIsEnumerable",X,!0);g.f=function(e){return z(f(e))}}o(o.G+o.W+o.F*!j,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var te=I(f.store),ne=0;te.length>ne;)p(te[ne++]);o(o.S+o.F*!j,"Symbol",{"for":function(e){return r(U,e+="")?U[e]:U[e]=P(e)},keyFor:function(e){if(G(e))return m(U,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}});o(o.S+o.F*!j,"Object",{create:Y,defineProperty:Q,defineProperties:K,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});R&&o(o.S+o.F*(!j||l(function(){var e=P();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!G(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);t=i[1];"function"==typeof t&&(n=t);(n||!_(t))&&(t=function(e,t){n&&(t=n.call(this,e,t));return G(t)?void 0:t});i[1]=t;return D.apply(R,i)}}});P[M][L]||n(29)(P[M],L,P[M].valueOf);d(P,"Symbol");d(Math,"Math",!0);d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(58)("meta"),r=n(32),s=n(55),o=n(30).f,a=0,c=Object.isExtensible||function(){return!0},l=!n(35)(function(){return c(Object.preventExtensions({}))}),u=function(e){o(e,i,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[i].i},h=function(e,t){if(!s(e,i)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[i].w},f=function(e){l&&g.NEED&&c(e)&&!s(e,i)&&u(e);return e},g=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},function(e,t,n){var i=n(25),r=n(26),s=n(92),o=n(102),a=n(30).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=s?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},function(e,t,n){var i=n(78),r=n(63);e.exports=function(e,t){for(var n,s=r(e),o=i(s),a=o.length,c=0;a>c;)if(s[n=o[c++]]===t)return n}},function(e,t,n){var i=n(78),r=n(110),s=n(67);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var o,a=n(e),c=s.f,l=0;a.length>l;)c.call(e,o=a[l++])&&t.push(o);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(65);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(63),r=n(113).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?a(e):r(i(e))}},function(e,t,n){var i=n(79),r=n(84).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t){},function(e,t,n){n(107)("asyncIterator")},function(e,t,n){n(107)("observable")},function(e,t,n){"use strict";var i=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=function s(){i(this,s);if(angular.isUndefined(this.onAdded))throw new TypeError("The onAdded(value) method must be defined");if(angular.isUndefined(this.onRemoved))throw new TypeError("The onRemoved(value) method must be defined");if(angular.isUndefined(this.onChanged))throw new TypeError("The onChanged(value, oldValue) method must be defined")};t["default"]=r;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(119)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(130),u=c(l),d=n(144),h=c(d),f=n(152),g=c(f),p=n(132),m=c(p),v=n(153),_=c(v),y=n(154),k=c(y),b=n(155),S=c(b),w=n(156),C=function(e){function t(e,n,r,s,a,c,l,u,d,h){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"lineCapture",void 0);this._lineCaptureSnap=e.layers.lineCapture;this._newlineSnap=e.layers.newLine;this._mode=h.state.mode;this._ownerId=n;this._role=r;this._intent=s;this._isWork=a;this._index=c;this._elements=l;this._firebaseService=u;this._assignmentTrackingService=d;this._currentPenColor=h.state.lines.color.hex||"#111111";this._currentWidth=h.state.lines.width||2;this._isErasing=!1;this._active=!1;this._newLinePoints=void 0;this._linesToDelete=[];this._lastEraserCoords=void 0;this._gesture=new g["default"](void 0,e);this._gesture._dragThreshold=0;this._gesture.start(this._lineCaptureSnap.node);this._gesture.click.subscribe(this.handleClick,this);this._gesture.dragStart.subscribe(this.startDrawing,this);this._gesture.dragMove.subscribe(this.whileDrawing,this);this._gesture.dragEnd.subscribe(this.endDrawing,this)}r(t,e);s(t,[{key:"createElement",value:function(e){this._root=e.rect(0,0,k["default"].INITIAL_WIDTH,k["default"].INITIAL_HEIGHT).addClass(this.id).attr({fill:"transparent",cursor:this.getCursor(this.visibility,this._isErasing)});this._root.attr({visibility:"hidden"})}},{key:"update",value:function(){this._root.attr({visibility:this.visibility,cursor:this.getCursor(this.visibility,this._isErasing)})}},{key:"getCursor",value:function(e,t){var n="pointer";if(e){var i=void 0,r=void 0;if(t){i="cursor_eraser";r="6 12"}else if(this.isHighlighterMode){i="cursor_highlighter";r="2 20"}else{i="cursor_pen";r="1 20"}n='url("../assets/images/cursors/'+i+'.png") '+r+", auto"}return n}},{key:"handleClick",value:function(e){this.startDrawing(e);this.endDrawing(e)}},{key:"startDrawing",value:function(e){var t=this;e.originalEvent.preventDefault();this._active=!0;var n=this.formatCoords(e);if(this._isErasing){this._lastEraserCoords=n[0];this.checkForCollisions(this._elements,n,function(e){return t.handleCollision(e)})}else this.newLinePoints=n}},{key:"whileDrawing",value:function(e){var t=this;e.originalEvent.preventDefault();(e.offsetLocation.x>k["default"].INITIAL_WIDTH||e.offsetLocation.x<0||e.offsetLocation.y>k["default"].INITIAL_HEIGHT||e.offsetLocation.y<0)&&this.endDrawing(e);if(this._active){var n=this.formatCoords(e);if(this._isErasing){var i=this.interpolate(this._lastEraserCoords,n[0]);this.checkForCollisions(this._elements,i,function(e){return t.handleCollision(e)});this._lastEraserCoords=n[0]}else this.newLinePoints=[].concat(a(this._newLinePoints),a(n))}}},{key:"endDrawing",value:function(e){e.originalEvent.preventDefault();if(this._active)if(this._isErasing){this._assignmentTrackingService.deleteElements(this._linesToDelete,this._index,this._isWork);this._linesToDelete=[]}else{var t=this.lineOrHighlight(this._firebaseService.newId(),new _["default"](this._ownerId,this._role,this._intent),this.newLinePoints,this._currentPenColor,this._currentWidth);this._assignmentTrackingService.createElement(t,this._index,this._isWork)}this.newLinePoints=void 0;this._active=!1}},{key:"interpolate",value:function(e,n){var i=[],r=e.getDist(n);if(r>t.ERASER_RADIUS)for(var s=Math.ceil(r/t.ERASER_RADIUS),o=e.minus(n).times(1/(s+1)),a=1;s>=a;a++)i.push(e.minus(o.times(a)));return[e].concat(i,[n])}},{key:"checkForCollisions",value:function(e,t,n){var i=this;e.forEach(function(e){(e.type===u["default"].type||e.type===S["default"].type)&&e.editable&&i.intersection(e.points,t)&&n(e)})}},{key:"handleCollision",value:function(e){if(!e.pendingErase){e.pendingErase=!0;this._linesToDelete.push(e)}}},{key:"intersection",value:function(e,n){var i=this,r=arguments.length<=2||void 0===arguments[2]?t.ERASER_RADIUS:arguments[2];return n.some(function(t){return i.intersectionBBox(e,t,r)&&i.intersectionSVGPaths(e,t,r)})}},{key:"intersectionBBox",value:function(e,n){angular.isString(e)||(e=u["default"].svgPathFormat(e));var i=Snap.path.getBBox(e);i.x=i.x-t.ERASER_RADIUS;i.y=i.y-t.ERASER_RADIUS;i.x2=i.x2+t.ERASER_RADIUS;i.y2=i.y2+t.ERASER_RADIUS;return i.x<=n.x&&n.x<=i.x2&&i.y<n.y&&n.y<i.y2}},{key:"intersectionSVGPaths",value:function(e,n){var i=this,r=arguments.length<=2||void 0===arguments[2]?t.ERASER_RADIUS:arguments[2];return e.some(function(e,t,s){return 0===t?n.getDist(e)<r:i.interpolate(s[t-1],e).some(function(e){return n.getDist(e)<r})})}},{key:"formatCoords",value:function(e){return[new h["default"](e.offsetLocation.x,e.offsetLocation.y)]}},{key:"renderNewLine",value:function(e){this.clearNewLine();u["default"].draw(this._newlineSnap,e,this._currentPenColor,this._currentWidth)}},{key:"clearNewLine",value:function(){this._newlineSnap.select("path")&&this._newlineSnap.select("path").remove()}},{key:"lineOrHighlight",value:function(e,t,n,i,r){if(this.isLinesMode)return new u["default"](e,t,n,i,r);if(this.isHighlighterMode)return new S["default"](e,t,n,i,r);throw new Error("\n        Cannot create new lines or highlights in "+this._mode+" mode.\n        Line capture must be in either lines or highlighter mode to create new elements.\n      ")}},{key:"destroy",value:function(){this._gesture.stop();this._gesture.click.unsubscribe(this.handleClick,this);this._gesture.dragStart.unsubscribe(this.startDrawing,this);this._gesture.dragMove.unsubscribe(this.whileDrawing,this);this._gesture.dragEnd.unsubscribe(this.endDrawing,this)}},{key:"state",set:function(e){this._mode=e.mode;this.visibility=this.isLinesMode||this.isHighlighterMode||this.isEraserMode?"visible":"hidden";this.erasing=this.isEraserMode;if(this.isLinesMode){this.color=e.lines.color.hex;this.width=e.lines.width}else if(this.isHighlighterMode){this.color=e.highlighter.color.hex;this.width=e.highlighter.width}}},{key:"isLinesMode",get:function(){return this._mode===w.ToolbarModes.Lines}},{key:"isHighlighterMode",get:function(){return this._mode===w.ToolbarModes.Highlighter}},{key:"isEraserMode",get:function(){return this._mode===w.ToolbarModes.Eraser}},{key:"isSelectorMode",get:function(){return this._mode===w.ToolbarModes.Selector}},{key:"isTouchMode",get:function(){return this._mode===w.ToolbarModes.Touch}},{key:"newLinePoints",get:function(){return this._newLinePoints.length>t.MAX_POINTS?this._newLinePoints.slice(0,t.MAX_POINTS):this._newLinePoints},set:function(e){this._newLinePoints=e;this._newLinePoints?this.renderNewLine(this._newLinePoints):this.clearNewLine()}},{key:"color",set:function(e){this._currentPenColor=e;this.update()}},{key:"width",set:function(e){this._currentWidth=e}},{key:"erasing",set:function(e){this._isErasing=e;this.update()}}],[{key:"MAX_POINTS",get:function(){return 1e3}},{key:"ERASER_RADIUS",get:function(){return 8}},{key:"ERASER_DIAMETER",get:function(){return 2*t.ERASER_RADIUS}}]);return t}(m["default"]);t["default"]=C;e.exports=t["default"]},function(e,t,n){e.exports=n(120)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(121),s=i(r);t["default"]=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,s["default"])(e)}},function(e,t,n){e.exports={"default":n(122),__esModule:!0}},function(e,t,n){n(89);n(123);e.exports=n(26).Array.from},function(e,t,n){"use strict";var i=n(27),r=n(24),s=n(52),o=n(124),a=n(125),c=n(81),l=n(126),u=n(127);r(r.S+r.F*!n(129)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,h=s(e),f="function"==typeof this?this:Array,g=arguments.length,p=g>1?arguments[1]:void 0,m=void 0!==p,v=0,_=u(h);m&&(p=i(p,g>2?arguments[2]:void 0,2));if(void 0==_||f==Array&&a(_)){t=c(h.length);for(n=new f(t);t>v;v++)l(n,v,m?p(h[v],v):h[v])}else for(d=_.call(h),n=new f;!(r=d.next()).done;v++)l(n,v,m?o(d,p,[r.value,v],!0):r.value);n.length=v;return n}})},function(e,t,n){var i=n(31);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(s){var o=e["return"];void 0!==o&&i(o.call(e));throw s}}},function(e,t,n){var i=n(94),r=n(97)("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[r]===e)}},function(e,t,n){"use strict";var i=n(30),r=n(38);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(128),r=n(97)("iterator"),s=n(94);e.exports=n(26).getIteratorMethod=function(e){return void 0!=e?e[r]||e["@@iterator"]||s[i(e)]:void 0}},function(e,t,n){var i=n(65),r=n(97)("toStringTag"),s="Arguments"==i(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),r))?n:s?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var i=n(97)("iterator"),r=!1;try{var s=[7][i]();s["return"]=function(){r=!0};Array.from(s,function(){throw 2})}catch(o){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s=[7],o=s[i]();o.next=function(){return{done:n=!0}};s[i]=function(){return o};e(s)}catch(a){}return n}},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(131),l=a(c),u=function(e){function t(e,n,r,s,a){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._points=r||[];this._color=s||"#111111";this._width=a||2;this._pendingErase=!1}r(t,e);s(t,[{key:"createElement",value:function(e){this._line=e}},{key:"update",value:function(){this._line.select("path")&&this._line.select("path").remove();t.draw(this._line,this.points,this.color,this.width,this.pendingErase,this.pendingEraseColor)}},{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._points=e._points||this._points;this._color=e._color||this._color;this._width=e._width||this._width;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_points:this._points,_color:this._color,_width:this._width}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._points,n._color,n._width)}},{key:"pendingEraseColor",get:function(){return t.PendingEraseColor}},{key:"points",get:function(){return this._points},set:function(e){var t=this;this._trackChange(function(){t._points=e})}},{key:"color",get:function(){return this._color},set:function(e){var t=this;this._trackChange(function(){t._color=e})}},{key:"width",get:function(){return this._width},set:function(e){var t=this;this._trackChange(function(){t._width=e})}},{key:"strokeOpacity",get:function(){return this._strokeOpacity},set:function(e){this._strokeOpacity=e}},{key:"pendingErase",get:function(){return this._pendingErase},set:function(e){this._pendingErase=e;this.tryUpdate()}}],[{key:"draw",value:function(e,n,i,r,s,o,a){void 0===o&&(o="#F3F3F3");e.path(t.svgPathFormat(n)).attr({stroke:s?o:i,strokeWidth:r,strokeLinecap:"round",fill:"none",pointerEvents:a||"none"})}},{key:"testDraw",value:function(e,n){n=n||"#111111";var i=angular.element("svg")[0],r=new Snap(i);t.draw(r,e,n,"4px",!1)}},{key:"svgPathFormat",value:function(e){return 1===e.length?"M"+e[0].x+","+e[0].y+" L"+e[0].x+","+e[0].y:e.reduce(function(t,n){return 0===t.length?"M"+n.x+","+n.y+" "+(e.length>2?"R":"L"):t+=n.x+","+n.y+" "},"")}},{key:"type",get:function(){return"line"}},{key:"PendingEraseColor",get:function(){return"#F3F3F3"}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(147),d=a(u),h=n(150),f=a(h),g=n(151),p=a(g),m=function(e){function t(e,n,r){var s=this;o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);this._changed=new d["default"](this);this._deleted=new d["default"](this);this._previewChanged=new d["default"](this);this._metadata=r;this._debouncedChange=void 0;this._debouncer=new p["default"](1e3,5e3,function(){return s._flushChange()})}r(t,e);s(t,[{key:"delete",value:function(){this._deleted.raise(new f["default"](this.id,this.fromSnapshot,this.snapshot(),!0))}},{key:"_onChanged",value:function(e){this.previewChanged.raise(this);var t=e;this._debouncedChange&&(t=this._debouncedChange.previousState);this._debouncedChange=new f["default"](this.id,this.fromSnapshot,t);this._debouncer.tick()}},{key:"_trackChange",value:function(e){var t=this.snapshot();e();this.tryUpdate();this._onChanged(t)}},{key:"flush",value:function(){this._debouncer.flush()}},{key:"_flushChange",value:function(){if(this._debouncedChange){this.changed.raise(this._debouncedChange);this._debouncedChange=void 0}}},{key:"merge",value:function(e,t){throw new Error("merge not implemented"+e)}},{key:"snapshot",value:function(){throw new Error("extract not implemented")}},{key:"fromSnapshot",value:function(e,t){throw new Error("fromSnapshot not implemented"+e+" "+t)}},{key:"cleanUp",value:function(){this.flush()}},{key:"isChildManipulative",get:function(){return!1}},{key:"isParentManipulative",get:function(){return!1}},{key:"isManipulative",get:function(){return this.isParentManipulative||this.isChildManipulative}},{key:"typeDisplay",get:function(){return this._type}},{key:"answerDisplay",get:function(){return""}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"changed",get:function(){return this._changed}},{key:"previewChanged",get:function(){return this._previewChanged}},{key:"deleted",get:function(){return this._deleted}}],[{key:"merge",value:function(e,t){e.merge(t)}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(133)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(144),c=o(a),l=n(146),u=o(l),d=n(147),h=o(d),f=n(148),g=function(){function e(t,n){var i=this;r(this,e);this._id=t;this._type=n;this._location=new c["default"](0,0);this._size=new u["default"](0,0);this._minSize=new u["default"](0,0);this._rotation=0;this._hasFocus=!1;this._editable=!1;this._active=!1;this._clicked=new h["default"](this);this._resized=new h["default"](this);this._moved=new h["default"](this);this._rotated=new h["default"](this);this._focused=new h["default"](this);this._blurred=new h["default"](this);this._visibilityUpdated=new h["default"](this);this._opacityUpdated=new h["default"](this);this._focusNextElement=new h["default"](this);this._focusPrevElement=new h["default"](this);this._domElement=void 0;this._domElementRoot=void 0;this._placement=new f.DefaultPlacement;this.loaded=new s(function(e){i.resolveLoaded=e})}i(e,[{key:"resize",value:function(e,t){this.size=new u["default"](e,t)}},{key:"focus",value:function(){if(this.editable&&!this._hasFocus){this._hasFocus=!0;this.tryUpdate();this.focused.raise({})}}},{key:"blur",value:function(){if(this._hasFocus){this._hasFocus=!1;this.tryUpdate();this.blurred.raise({})}}},{key:"render",value:function(e,t,n,i,r,s,o,a){this._canvas=i;this._assignment=r;this._viewerMetadata=s;this._thumbnail=o;this._moreOptionsManager=a;var c=e.select("."+this._id);c&&!this._domElement&&c.select(".elementRoot").remove();if(!c||!this._domElement){this._domElement=c||e.group().addClass(this._id);this._domElementRoot=this._domElement.group().addClass("elementRoot");this._editable=!!t;this._active=this.editable||!!n;this._hasFocus=!1;this._visibility="inherit";this.createElement(this._domElementRoot,this.editable,this.active)}this.update(this._domElementRoot,this.editable,this.active);this.resolveLoaded()}},{key:"warnBeforeDeletion",value:function(){throw new Error("editable="+this._editable+", active="+this._active)}},{key:"remove",value:function(){if(this._domElement){this._domElement.remove();this._domElement=void 0;this._domElementRoot=void 0}}},{key:"createElement",value:function(e,t,n){throw new Error("not-implemented "+e+", editable="+t+", active="+n)}},{key:"update",value:function(e,t,n){throw new Error("not-implemented "+e+", editable="+t+", active="+n)}},{key:"tryUpdate",value:function(){this._domElement&&this.update(this._domElement,this.editable,this.active)}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"type",get:function(){return this._type}},{key:"location",get:function(){return this._location},set:function(e){if(this.location.x!==e.x||this.location.y!==e.y){var t={oldLocation:this._location,location:e};this._location=e;this.tryUpdate();this.moved.raise(t)}}},{key:"center",get:function(){return this.location.plus(new c["default"](this.width/2,this.height/2))}},{key:"size",get:function(){return this._size},set:function(e){var t=Math.max(e.width,this._minSize.width),n=Math.max(e.height,this._minSize.height);if(t!==this.width||n!==this.height){var i=new u["default"](t,n),r={oldWidth:this.width,oldHeight:this.height,width:t,height:n,oldSize:this.size,size:i};this._size=i;this.tryUpdate();this.resized.raise(r)}}},{key:"width",get:function(){return this._size.width}},{key:"height",get:function(){return this._size.height}},{key:"minWidth",set:function(e){this._minSize._width=e;this.width<e&&this.resize(e,this.height)},get:function(){return this._minSize.width}},{key:"minHeight",set:function(e){this._minSize._height=e;this.height<e&&this.resize(this.width,e)},get:function(){return this._minSize.height}},{key:"visibility",get:function(){return this._visibility},set:function(e){if(this.visibility!==e){var t={oldVisibility:this.visibility,visibility:e};this._domElementRoot.attr({visibility:e});this._visibility=e;this.tryUpdate();this.visibilityUpdated.raise(t)}}},{key:"opacity",get:function(){return this._domElementRoot?this._domElementRoot.attr("opacity"):1},set:function(e){if(this._domElementRoot&&this.opacity!==e){var t={oldOpacity:this.opacity,opacity:e};this._domElementRoot.attr({opacity:e});this.tryUpdate();this.opacityUpdated.raise(t)}}},{key:"editable",get:function(){return this._editable}},{key:"active",get:function(){return this._active}},{key:"clicked",get:function(){return this._clicked}},{key:"hasFocus",get:function(){return this._hasFocus}},{key:"resized",get:function(){return this._resized}},{key:"moved",get:function(){return this._moved}},{key:"focused",get:function(){return this._focused}},{key:"blurred",get:function(){return this._blurred}},{key:"visibilityUpdated",get:function(){return this._visibilityUpdated}},{key:"opacityUpdated",get:function(){return this._opacityUpdated}},{key:"focusNextElement",get:function(){return this._focusNextElement}},{key:"focusPrevElement",get:function(){return this._focusPrevElement}},{key:"viewerMetadata",get:function(){return this._viewerMetadata}},{key:"viewerIntent",get:function(){return this.viewerMetadata&&this.viewerMetadata.intent}},{key:"viewerRole",get:function(){return this.viewerMetadata&&this.viewerMetadata.role}},{key:"canvas",get:function(){return this._canvas}},{key:"hiddenTextInput",get:function(){return this.canvas&&this.canvas.hiddenTextInput}},{key:"assignment",get:function(){return this._assignment}},{key:"thumbnail",get:function(){return this._thumbnail}},{key:"moreOptionsManager",get:function(){return this._moreOptionsManager}},{key:"placement",get:function(){return this._placement}}]);return e}();t["default"]=g;e.exports=t["default"]},function(e,t,n){e.exports={"default":n(134),__esModule:!0}},function(e,t,n){n(114);n(89);n(98);n(135);e.exports=n(26).Promise},function(e,t,n){"use strict";var i,r,s,o=n(92),a=n(25),c=n(27),l=n(128),u=n(24),d=n(32),h=n(28),f=n(136),g=n(137),p=n(138),m=n(139).set,v=n(141)(),_="Promise",y=a.TypeError,k=a.process,b=a[_],k=a.process,S="process"==l(k),w=function(){},C=!!function(){try{var e=b.resolve(1),t=(e.constructor={})[n(97)("species")]=function(e){e(w,w)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(w)instanceof t}catch(i){}}(),E=function(e,t){return e===t||e===b&&t===s},T=function(e){var t;return d(e)&&"function"==typeof(t=e.then)?t:!1},I=function(e){return E(b,e)?new A(e):new r(e)},A=r=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw y("Bad Promise constructor");t=e;n=i});this.resolve=h(t);this.reject=h(n)},x=function(e){try{e()}catch(t){return{error:t}}},O=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var i=e._v,r=1==e._s,s=0,o=function(t){var n,s,o=r?t.ok:t.fail,a=t.resolve,c=t.reject,l=t.domain;try{if(o){if(!r){2==e._h&&D(e);e._h=1}if(o===!0)n=i;else{l&&l.enter();n=o(i);l&&l.exit()}n===t.promise?c(y("Promise-chain cycle")):(s=T(n))?s.call(n,a,c):a(n)}else c(i)}catch(u){c(u)}};n.length>s;)o(n[s++]);e._c=[];e._n=!1;t&&!e._h&&P(e)})}},P=function(e){m.call(a,function(){var t,n,i,r=e._v;if(R(e)){t=x(function(){S?k.emit("unhandledRejection",r,e):(n=a.onunhandledrejection)?n({promise:e,reason:r}):(i=a.console)&&i.error&&i.error("Unhandled promise rejection",r)});e._h=S||R(e)?2:1}e._a=void 0;if(t)throw t.error})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;){t=n[i++];if(t.fail||!R(t.promise))return!1}return!0},D=function(e){m.call(a,function(){var t;S?k.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;if(!t._d){t._d=!0;t=t._w||t;t._v=e;t._s=2;t._a||(t._a=t._c.slice());O(t,!0)}},N=function(e){var t,n=this;if(!n._d){n._d=!0;n=n._w||n;try{if(n===e)throw y("Promise can't be resolved itself");if(t=T(e))v(function(){var i={_w:n,_d:!1};try{t.call(e,c(N,i,1),c(M,i,1))}catch(r){M.call(i,r)}});else{n._v=e;n._s=1;O(n,!1)}}catch(i){M.call({_w:n,_d:!1},i)}}};if(!C){b=function(e){f(this,b,_,"_h");h(e);i.call(this);try{e(c(N,this,1),c(M,this,1))}catch(t){M.call(this,t)}};i=function(e){this._c=[];this._a=void 0;this._s=0;this._d=!1;this._v=void 0;this._h=0;this._n=!1};i.prototype=n(142)(b.prototype,{then:function(e,t){var n=I(p(this,b));n.ok="function"==typeof e?e:!0;n.fail="function"==typeof t&&t;n.domain=S?k.domain:void 0;this._c.push(n);this._a&&this._a.push(n);this._s&&O(this,!1);return n.promise},"catch":function(e){return this.then(void 0,e)}});A=function(){var e=new i;this.promise=e;this.resolve=c(N,e,1);this.reject=c(M,e,1)}}u(u.G+u.W+u.F*!C,{Promise:b});n(96)(b,_);n(143)(_);s=n(26)[_];u(u.S+u.F*!C,_,{reject:function(e){var t=I(this),n=t.reject;n(e);return t.promise}});u(u.S+u.F*(o||!C),_,{resolve:function(e){if(e instanceof b&&E(e.constructor,this))return e;var t=I(this),n=t.resolve;n(e);return t.promise}});u(u.S+u.F*!(C&&n(129)(function(e){b.all(e)["catch"](w)})),_,{all:function(e){var t=this,n=I(t),i=n.resolve,r=n.reject,s=x(function(){var n=[],s=0,o=1;g(e,!1,function(e){var a=s++,c=!1;n.push(void 0);o++;t.resolve(e).then(function(e){if(!c){c=!0;n[a]=e;--o||i(n)}},r)});--o||i(n)});s&&r(s.error);return n.promise},race:function(e){var t=this,n=I(t),i=n.reject,r=x(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});r&&i(r.error);return n.promise}})},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(27),r=n(124),s=n(125),o=n(31),a=n(81),c=n(127),l={},u={},t=e.exports=function(e,t,n,d,h){var f,g,p,m,v=h?function(){return e}:c(e),_=i(n,d,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(s(v))for(f=a(e.length);f>y;y++){m=t?_(o(g=e[y])[0],g[1]):_(e[y]);if(m===l||m===u)return m}else for(p=v.call(e);!(g=p.next()).done;){m=r(p,_,g.value,t);if(m===l||m===u)return m}};t.BREAK=l;
t.RETURN=u},function(e,t,n){var i=n(31),r=n(28),s=n(97)("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||void 0==(n=i(o)[s])?t:r(n)}},function(e,t,n){var i,r,s,o=n(27),a=n(140),c=n(85),l=n(36),u=n(25),d=u.process,h=u.setImmediate,f=u.clearImmediate,g=u.MessageChannel,p=0,m={},v="onreadystatechange",_=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e];t()}},y=function(e){_.call(e.data)};if(!h||!f){h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);m[++p]=function(){a("function"==typeof e?e:Function(e),t)};i(p);return p};f=function(e){delete m[e]};if("process"==n(65)(d))i=function(e){d.nextTick(o(_,e,1))};else if(g){r=new g;s=r.port2;r.port1.onmessage=y;i=o(s.postMessage,s,1)}else if(u.addEventListener&&"function"==typeof postMessage&&!u.importScripts){i=function(e){u.postMessage(e+"","*")};u.addEventListener("message",y,!1)}else i=v in l("script")?function(e){c.appendChild(l("script"))[v]=function(){c.removeChild(this);_.call(e)}}:function(e){setTimeout(o(_,e,1),0)}}e.exports={set:h,clear:f}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(25),r=n(139).set,s=i.MutationObserver||i.WebKitMutationObserver,o=i.process,a=i.Promise,c="process"==n(65)(o);e.exports=function(){var e,t,n,l=function(){var i,r;c&&(i=o.domain)&&i.exit();for(;e;){r=e.fn;e=e.next;try{r()}catch(s){e?n():t=void 0;throw s}}t=void 0;i&&i.enter()};if(c)n=function(){o.nextTick(l)};else if(s){var u=!0,d=document.createTextNode("");new s(l).observe(d,{characterData:!0});n=function(){d.data=u=!u}}else if(a&&a.resolve){var h=a.resolve();n=function(){h.then(l)}}else n=function(){r.call(i,l)};return function(i){var r={fn:i,next:void 0};t&&(t.next=r);if(!e){e=r;n()}t=r}}},function(e,t,n){var i=n(29);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){"use strict";var i=n(25),r=n(26),s=n(30),o=n(34),a=n(97)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];o&&t&&!t[a]&&s.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(145),a=s(o),c=function(){function e(t,n){r(this,e);this.x=t;this.y=n}i(e,[{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"times",value:function(t){return new e(this.x*t,this.y*t)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"clockwiseAngle",value:function(e){return a["default"].toDeg(a["default"].clockwiseAngle(this,e))}},{key:"getDist",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"rotate",value:function(t){var n=a["default"].toRad(t),i=Math.cos(n),r=Math.sin(n);return new e(this.x*i-this.y*r,this.y*i+this.x*r)}}],[{key:"fromOffset",value:function(t){return new e(t.left,t.top)}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(144),a=s(o),c=180/Math.PI,l=Math.PI/180,u=function(){function e(){r(this,e)}i(e,null,[{key:"toRad",value:function(e){return l*e}},{key:"toDeg",value:function(e){return c*e}},{key:"sin",value:function(t){return Math.sin(e.toRad(t))}},{key:"cos",value:function(t){return Math.cos(e.toRad(t))}},{key:"tan",value:function(t){return Math.tan(e.toRad(t))}},{key:"clockwiseAngle",value:function(e,t){var n=Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x);0>n&&(n+=2*Math.PI);return n}},{key:"findSlope",value:function(e,t){var n=e.y-t.y,i=e.x-t.x,r=n/i;return r}},{key:"findPerpendicularSlope",value:function(e,t){var n=e.y-t.y,i=e.x-t.x,r=-1*i/n;return r}},{key:"findYIntercept",value:function(e,t){return-1*e*t.x+t.y}},{key:"findIntercept",value:function(t,n,i,r){var s=e.findX(t,n,i,r),o=e.findY(t,s,n);return new a["default"](s,o)}},{key:"findX",value:function(e,t,n,i){return(i-t)/(e-n)}},{key:"findY",value:function(e,t,n){return e*t+n}},{key:"closestPoint",value:function(t,n,i,r){var s=e.findYIntercept(r,t);return e.findIntercept(n,i,r,s)}},{key:"roundToNearest",value:function(e,t){return Math.round(e/t)*t}},{key:"rotate",value:function(t,n,i){var r=e.toRad(i),s=Math.cos(r),o=Math.sin(r),c=t.x-n.x,l=t.y-n.y;return new a["default"](s*c-o*l+n.x,o*c+s*l+n.y)}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(144),a=s(o),c=function(){function e(t,n){r(this,e);this._width=t;this._height=n}i(e,[{key:"plus",value:function(t){return new e(this.width+t.width,this.height+t.height)}},{key:"minus",value:function(t){return new e(this.width-t.width,this.height-t.height)}},{key:"times",value:function(t){return new e(this.width*t,this.height*t)}},{key:"fitScale",value:function(e){return Math.min(this.width/e.width,this.height/e.height)}},{key:"fit",value:function(e){return e.times(this.fitScale(e))}},{key:"center",value:function(e){return this.minus(e).times(.5).asPoint()}},{key:"middle",value:function(){this.times(.5).asPoint()}},{key:"asPoint",value:function(){return new a["default"](this.width,this.height)}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),a=s(o),c=function(){function e(t){r(this,e);this._source=t;this._listeners=[]}i(e,[{key:"subscribe",value:function(e,t){if(!this._listeners.some(function(n){return n.f===e&&n.c===t})){var n={f:e,c:t};this._listeners.push(n);return n}}},{key:"unsubscribe",value:function(e,t){this._listeners=this._listeners.filter(function(n){return!(n.f===e&&n.c===t)})}},{key:"once",value:function(e,t){var n=this;t=t||this;var i=function r(i,s){e.call(t,i,s||n._source);n.unsubscribe(r)};this.subscribe(i);return i}},{key:"cancelOnce",value:function(e){this.unsubscribe(e)}},{key:"raise",value:function(e,t){var n=this;this._listeners.forEach(function(i){try{i.f.call(i.c||n,e,t||n._source)}catch(r){a["default"].get.$log.error("callback error",r,i)}})}},{key:"clear",value:function(){this._listeners=[]}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(149),l=a(c),u=function(){function e(){r(this,e)}i(e,[{key:"create",value:function(e,t,n){throw new Error("not-implemented "+e+", initial="+t+", current="+n)}},{key:"update",value:function(e,t,n){throw new Error("not-implemented "+e+", initial="+t+", current="+n)}},{key:"remove",value:function(){throw new Error("not-implemented-remove")}},{key:"cursor",get:function(){throw new Error("not-implemented-cursor")}}]);return e}();t.Placement=u;var d=function(e){function t(){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}o(t,e);i(t,[{key:"create",value:function(e,t,n){this._rect=e.rect(0,0,0,0).attr({fill:"transparent",stroke:l["default"].CK_GREEN,strokeWidth:2})}},{key:"update",value:function(e,t,n){var i=t.x<n.x?t.x:n.x,r=t.y<n.y?t.y:n.y,s=Math.abs(t.x-n.x),o=Math.abs(t.y-n.y);this._rect.attr({x:i,y:r,width:s,height:o})}},{key:"remove",value:function(){this._rect.remove()}},{key:"cursor",get:function(){return"crosshair"}}]);return t}(u);t.DefaultPlacement=d},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"CK_GREEN",get:function(){return"#98D64A"}},{key:"CK_WARN",get:function(){return"#ff6c6c"}},{key:"BACKGROUND_GREY",get:function(){return"#F7F7F7"}},{key:"BORDER_GREY",get:function(){return"#eeeeef"}},{key:"CK_HEADER_GREY",get:function(){return"#6D6E70"}},{key:"CK_DISABLED_GREY",get:function(){return"#d8d8d8"}},{key:"CK_ELEMENT_RED",get:function(){return"#FF5043"}},{key:"CK_ELEMENT_RED_ORANGE",get:function(){return"#ff6e4e"}},{key:"CK_ELEMENT_ORANGE",get:function(){return"#ffa800"}},{key:"CK_ELEMENT_YELLOW",get:function(){return"#ffe600"}},{key:"CK_ELEMENT_LIME_GREEN",get:function(){return"#ddf261"}},{key:"CK_ELEMENT_MINT_GREEN",get:function(){return"#8ff261"}},{key:"CK_ELEMENT_GREEN",get:function(){return"#17c638"}},{key:"CK_ELEMENT_TEAL",get:function(){return"#05cec8"}},{key:"CK_ELEMENT_AQUA",get:function(){return"#80f9f0"}},{key:"CK_ELEMENT_TURQUOISE",get:function(){return"#00b7f9"}},{key:"CK_ELEMENT_BLUE",get:function(){return"#3e3eff"}},{key:"CK_ELEMENT_PURPLE",get:function(){return"#884aff"}},{key:"CK_ELEMENT_MAUVE",get:function(){return"#c7a4ff"}},{key:"CK_ELEMENT_VIOLET",get:function(){return"#bd57ff"}},{key:"CK_ELEMENT_MAGENTA",get:function(){return"#ff558a"}},{key:"CK_ELEMENT_PINK",get:function(){return"#ffaec7"}},{key:"CK_ELEMENT_SAND",get:function(){return"#eebe95"}},{key:"CK_ELEMENT_TAN",get:function(){return"#d4976b"}},{key:"CK_ELEMENT_BROWN",get:function(){return"#9c7550"}},{key:"CK_ELEMENT_DARK_BROWN",get:function(){return"#6b473d"}},{key:"CK_ELEMENT_BLACK",get:function(){return"#404041"}},{key:"CK_ELEMENT_GREY",get:function(){return"#878787"}},{key:"CK_ELEMENT_LIGHT_GREY",get:function(){return"#d6d6d6"}},{key:"CK_ELEMENT_WHITE",get:function(){return"#FFFFFF"}},{key:"CK_GRADING_BELOW",get:function(){return"#F48A8C"}},{key:"CK_GRADING_APPROACHING",get:function(){return"#FFBD7B"}},{key:"CK_GRADING_MEETS",get:function(){return"#CAE097"}},{key:"CK_ROSTER_BLUE",get:function(){return"#2DCCF7"}},{key:"CK_ROSTER_ORANGE",get:function(){return"#FFA045"}},{key:"CK_ROSTER_PURPLE",get:function(){return"#CD6EDE"}},{key:"CK_ROSTER_RED_PINK",get:function(){return"#F04E8F"}},{key:"CK_ROSTER_YELLOW",get:function(){return"#F5C631"}},{key:"CK_ROSTER_GREEN",get:function(){return"#15CA9A"}},{key:"CK_ROSTER_GREY",get:function(){return"#828F99"}},{key:"CK_ROSTER_PINK",get:function(){return"#FFBBBB"}},{key:"CK_ROSTER_RED",get:function(){return"#E9552D"}},{key:"CK_ROSTER_BROWN",get:function(){return"#8C5225"}},{key:"CK_ROSTER_LIGHT_BLUE",get:function(){return"#9DEEF2"}},{key:"CK_ROSTER_LIGHT_GREEN",get:function(){return"#C8ED80"}},{key:"CK_TRANSPARENT",get:function(){return"#00000000"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s){r(this,e);this._elementId=t;this._factory=n;this._previousState=i;this._deleted=s}i(e,[{key:"undo",value:function(t,n,i,r){var s=t.elements.valueForId(this.elementId),o=s?s.snapshot():void 0;if(this.created){n(t,s);return new e(this.elementId,this._factory,o,!0)}if(this.deleted){var a=this._factory(this.elementId,this.previousState);i(t,a);return new e(this.elementId,this._factory)}s.merge(this.previousState,!0);r(t,s);return new e(this.elementId,this.factory,o)}},{key:"elementId",get:function(){return this._elementId}},{key:"created",get:function(){return!this._previousState}},{key:"deleted",get:function(){return this._deleted}},{key:"previousState",get:function(){return this._previousState}},{key:"factory",get:function(){return this._factory}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),a=s(o),c=function(){function e(t,n,i,s,o){var a=this;r(this,e);this._minDelayMs=t;this._maxDelayMs=n;this._applyFunc=i;this._transientEnd=0;this._changeDebounceTimer=void 0;this._lastEv=null;this._valid=!0;this.$window=o;this.$scope=s;s&&s.$on("$destroy",function(){return a.destroy()});if(o){this._anonBeforeUnload=function(e){return a._onBeforeUnload(e)};o.onbeforeunload.add(this._anonBeforeUnload)}}i(e,[{key:"tick",value:function(e){var t=this;this._changeDebounceTimer?a["default"].get.$timeout.cancel(this._changeDebounceTimer):this._transientEnd=moment().valueOf()+this._maxDelayMs;var n=Math.max(0,Math.min(this._minDelayMs,this._transientEnd-moment().valueOf()));this._lastEv=e;this._changeDebounceTimer=a["default"].get.$timeout(function(){return t.flush()},n)}},{key:"flush",value:function(){if(this._changeDebounceTimer)if(this._valid){var e=this._lastEv;this.cancel();this._applyFunc(e)}else this.tick(this._lastEv)}},{key:"cancel",value:function(){a["default"].get.$timeout.cancel(this._changeDebounceTimer);this._changeDebounceTimer=void 0;this._lastEv=void 0}},{key:"_onBeforeUnload",value:function(e){var t=this.pending;this.flush();if(t){var n="There are unsaved changes on the page. If you leave you may lose those unsaved changes";e.message=n;return n}}},{key:"destroy",value:function(){this.$window&&this.$window.onbeforeunload.remove(this._anonBeforeUnload);this.flush()}},{key:"pending",get:function(){return!!this._changeDebounceTimer}},{key:"valid",set:function(e){this._valid=e},get:function(){return this._valid}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(147),a=s(o),c=n(144),l=s(c),u=n(18),d=s(u),h=function(){function e(t,n){var i=this;r(this,e);this._target=t;this._click=new a["default"](t);this._rightclick=new a["default"](t);this._doubleclick=new a["default"](t);this._tripleclick=new a["default"](t);this._dragStart=new a["default"](t);this._dragMove=new a["default"](t);this._dragEnd=new a["default"](t);this._mouseEnter=new a["default"](t);this._mouseLeave=new a["default"](t);this._canvas=n;this._hovering=!1;this._dragging=!1;this._clicking=!1;this._rightclicking=!1;this._startPoint=null;this._dragThreshold=5;this._doubleclickThreshold=250;this._lastClick=moment().subtract(100,"seconds");this._secondClick=moment().subtract(100,"seconds");this._anonJqMouseDown=function(e){return i._jqMouseDown(e)};this._anonJqMouseUp=function(e){return i._jqMouseUp(e)};this._anonJqMouseMove=function(e){return i._jqMouseMove(e)};this._anonJqMouseEnter=function(e){return i._jqMouseEnter(e)};this._anonJqMouseLeave=function(e){return i._jqMouseLeave(e)};this._anonJqContextMenu=function(e){return i._jqContextMenu(e)};this._body=angular.element("body")}i(e,[{key:"start",value:function(e){this.stop();this._element=angular.element(e);this._element.on("touchstart",this._anonJqMouseDown);this._element.mousedown(this._anonJqMouseDown);this._element.mouseenter(this._anonJqMouseEnter);this._element.mouseleave(this._anonJqMouseLeave);this._element.on("contextmenu",this._anonJqContextMenu)}},{key:"stop",value:function(){if(this._element){this._element.off("touchstart",this._anonJqMouseDown);this._element.off("mousedown",this._anonJqMouseDown);this._element.off("mouseenter",this._anonJqMouseEnter);this._element.off("mouseleave",this._anonJqMouseLeave);this._element.off("contextmenu",this._anonJqContextMenu);this._body.off("mouseup",this._anonJqMouseUp);this._body.off("mousemove",this._anonJqMouseMove)}this._click.clear();this._dragStart.clear();this._dragMove.clear();this._dragEnd.clear();this._mouseEnter.clear();this._mouseLeave.clear()}},{key:"_jqMouseDown",value:function(e){if(this._isLeftClick(e)||this._isTouchEvent(e)){e.preventDefault();e.stopPropagation();this._startPoint=this._point(e).minus(this._canvas.absolutePosition).times(this._canvas.inverseScaleFactor);this._targetStart=this._targetLocation;this._clicking=!0;this._dragging=!1}else if(this._isRightClick(e)){e.preventDefault();e.stopPropagation();this._rightclicking=!0}if(this._clicking||this._rightclicking){this._body.mouseup(this._anonJqMouseUp);this._body.mousemove(this._anonJqMouseMove);this._element.on("touchend",this._anonJqMouseUp);this._element.on("touchmove",this._anonJqMouseMove)}}},{key:"_jqMouseUp",value:function(e){if(this._isLeftClick(e)||this._isTouchEvent(e)){e.preventDefault();e.stopPropagation();if(this._dragging)this.dragEnd.raise(this._eventArgs(e));else if(this._clicking)if(this._doubleclickThreshold>=0&&this._secondClick.isAfter(moment().subtract(this._doubleclickThreshold,"milliseconds"))){this.tripleclick.raise(this._eventArgs(e));this._secondClick=moment().subtract(100,"seconds")}else if(this._doubleclickThreshold>=0&&this._lastClick.isAfter(moment().subtract(this._doubleclickThreshold,"milliseconds"))){this.doubleclick.raise(this._eventArgs(e));this._lastClick=moment().subtract(100,"seconds");this._secondClick=moment()}else{this.click.raise(this._eventArgs(e));this._lastClick=moment()}this._clicking=!1;this._dragging=!1}else if(this._isRightClick(e)){e.preventDefault();e.stopPropagation();this._rightclicking=!1}if(!this._clicking&&!this._rightclicking){this._body.off("mouseup",this._anonJqMouseUp);this._body.off("mousemove",this._anonJqMouseMove);this._element.off("touchend",this._anonJqMouseUp);this._element.off("touchmove",this._anonJqMouseMove)}}},{key:"_jqMouseMove",value:function(e){if(this._clicking||this._isTouchEvent(e)){e.preventDefault();var t=this._eventArgs(e),n=t.offsetLocation;if(null===this._startPoint){d["default"].get.$log.warn("gesture-manager$_jqMouseMove _startPoint is null");return}var i=new l["default"](n.x-this._startPoint.x,n.y-this._startPoint.y);if(this._dragThreshold>=0&&this._clicking&&!this._dragging&&Math.max(Math.abs(n.x-this._startPoint.x),Math.abs(n.y-this._startPoint.y))>this._dragThreshold){this._dragging=!0;t.absoluteLocation=n.minus(i);t.relativeLocation=t.relativeLocation.minus(i);this._dragStart.raise(t)}if(this._dragging){t.delta=i;this.dragMove.raise(t)}}}},{key:"_jqMouseEnter",value:function(e){this._hovering=!0;this.mouseEnter.raise(this._eventArgs(e))}},{key:"_jqMouseLeave",value:function(e){this._hovering=!1;this.mouseLeave.raise(this._eventArgs(e))}},{key:"_jqContextMenu",value:function(e){e.preventDefault()}},{key:"_eventArgs",value:function(e,t){var n=t?t:{};n.controlStart=this._targetStart;n.mouseStart=this._startPoint;n.absoluteLocation=this._point(e);n.offsetLocation=n.absoluteLocation.minus(this._canvas.absolutePosition).times(this._canvas.inverseScaleFactor);n.relativeLocation=n.offsetLocation.minus(this._targetLocation);n.originalEvent=e;return n}},{key:"_point",value:function(e){var t=e.type.search(/touch/)>-1?e.originalEvent.changedTouches[0]:e;return new l["default"](t.pageX,t.pageY)}},{key:"_relativePoint",value:function(e){return new l["default"](e.offsetX-this._targetLocation.x,e.offsetY-this._targetLocation.y)}},{key:"_offsetPoint",value:function(e){return new l["default"](e.offsetX,e.offsetY)}},{key:"_isLeftClick",value:function(e){return 0===e.button}},{key:"_isRightClick",value:function(e){return 2===e.button}},{key:"_isTouchEvent",value:function(e){return e.type.search(/touch/)>-1}},{key:"_targetLocation",get:function(){return this._target?this._target.location:new l["default"](0,0)}},{key:"hovering",get:function(){return this._hovering}},{key:"clicking",get:function(){return this._clicking}},{key:"dragging",get:function(){return this._dragging}},{key:"click",get:function(){return this._click}},{key:"rightclick",get:function(){return this._rightclick}},{key:"doubleclick",get:function(){return this._doubleclick}},{key:"tripleclick",get:function(){return this._tripleclick}},{key:"dragStart",get:function(){return this._dragStart}},{key:"dragMove",get:function(){return this._dragMove}},{key:"dragEnd",get:function(){return this._dragEnd}},{key:"mouseEnter",get:function(){return this._mouseEnter}},{key:"mouseLeave",get:function(){return this._mouseLeave}}]);return e}();t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"WORK",get:function(){return"work"}},{key:"CONTENT",get:function(){return"content"}},{key:"FEEDBACK",get:function(){return"feedback"}}]);return e}();t.ElementIntents=s;var o=function(){function e(t,n,i,s){r(this,e);this._value={owner_id:t,role:n,intent:i,version:s}}i(e,[{key:"copy",value:function(){return e.copy(this)}},{key:"ownerId",get:function(){return this._value.owner_id}},{key:"role",get:function(){return this._value.role}},{key:"intent",get:function(){return this._value.intent}},{key:"version",get:function(){return this._value.version?this._value._version:"1"}},{key:"value",get:function(){return this._value}}],[{key:"fromObject",value:function(t){var n=new e;n._value=t;return n}},{key:"copy",value:function(t){var n=new e;n._value=angular.copy(t._value);return n}}]);return e}();t["default"]=o},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,[{key:"scale",value:function(e){throw new Error("Must implement scale method")}},{key:"absolutePosition",get:function(){throw new Error("Must implement absolutePosition getter method")}},{key:"inverseScaleFactor",get:function(){throw new Error("Must implement inverseScaleFactor getter method")}},{key:"hiddenTextInput",get:function(){throw new Error("Must implement hiddenTextInput getter method")}}],[{key:"INITIAL_WIDTH",get:function(){return 1004}},{key:"INITIAL_HEIGHT",get:function(){return 2008}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(130),l=a(c),u=function(e){function t(e,n,r,s,a){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,r,s,a)}r(t,e);s(t,[{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._points=e._points||this._points;this._color=e._color||this._color;this._width=e._width||this._width;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_points:this._points,_color:this._color,_width:this._width}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._points,n._color,n._width)}},{key:"type",get:function(){return t.type}},{key:"pendingEraseColor",get:function(){return t.PendingEraseColor}}],[{key:"type",get:function(){return"highlight"}},{key:"PendingEraseColor",get:function(){return"rgba(243, 243, 243, 0.3)"}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(147),c=o(a),l=n(162),u=n(165),d=o(u),h=n(166),f=n(167),g=o(f),p=n(168),m=o(p),v=n(170),_=o(v),y=n(187),k=o(y),b=n(204),S=o(b),w=n(234),C=o(w),E=n(262),T=o(E),I=n(264),A=o(I),x=n(270),O=o(x),P=n(266),R=o(P),D=n(271),M=(o(D),n(273)),N=n(233),L=o(N),F=[1,2,3,4],U=[10,20,30,40,50],$=[1,2,3,4,8,16,24],q=function(){function e(){r(this,e)}i(e,null,[{key:"isPlacementMode",value:function(t){return t===e.PlaceTextbox||t===e.PlaceSticker||t===e.PlaceFillInTheBlank||t===e.PlaceStraightLine}},{key:"Lines",get:function(){return"lines"}},{key:"Highlighter",get:function(){return"highlighter"}},{key:"Selector",get:function(){return"selector"}},{key:"Touch",get:function(){return"touch"}},{key:"Eraser",get:function(){return"eraser"}},{key:"PlaceTextbox",get:function(){return"place_textbox"}},{key:"PlaceStraightLine",get:function(){return"place_straight_line"}},{key:"PlaceFillInTheBlank",get:function(){return"place_fill_in_the_blank"}},{key:"PlaceSticker",get:function(){return"place_sticker"}}]);return e}();t.ToolbarModes=q;var H={mode:q.Selector,highlighter:{color:l.Colors.penToHighlight(l.Colors.ELEMENT_COLORS.filter(function(e){return"yellow"===e.name})[0]),width:U[2]},lines:{color:l.Colors.ELEMENT_COLORS.filter(function(e){return e.active})[0],width:F[2]},text:{color:C["default"].DEFAULT_TEXT_COLOR,backgroundColor:C["default"].DEFAULT_BACKGROUND_COLOR,borderColor:C["default"].DEFAULT_BORDER_COLOR,size:25},eraser:{color:"#F3F3F3",size:2},straightLines:{color:l.Colors.ELEMENT_COLORS.filter(function(e){return e.active})[0],width:$[1]},stickers:{selectedId:""}},j=function(){function e(){r(this,e)}i(e,null,[{key:"UPDATE_MODE",get:function(){return"TOOLBAR.UPDATE_MODE"}},{key:"UPDATE_COLOR",get:function(){return"TOOLBAR.UPDATE_COLOR"}},{key:"UPDATE_PEN_WIDTH",get:function(){return"TOOLBAR.UPDATE_PEN_WIDTH"}},{key:"UPDATE_HIGHLIGHTER_COLOR",get:function(){return"TOOLBAR.UPDATE_HIGHLIGHTER_COLOR"}},{key:"UPDATE_HIGHLIGHTER_WIDTH",get:function(){return"TOOLBAR.UPDATE_HIGHLIGHTER_WIDTH"}},{key:"UPDATE_TEXT_SIZE",get:function(){return"TOOLBAR.UPDATE_TEXT_SIZE"}},{key:"UPDATE_TEXT_COLOR",get:function(){return"TOOLBAR.UPDATE_TEXT_COLOR"}},{key:"UPDATE_TEXT_BACKGROUND_COLOR",get:function(){return"TOOLBAR.UPDATE_TEXT_BACKGROUND_COLOR"}},{key:"UPDATE_TEXTBOX_BORDER_COLOR",get:function(){return"TOOLBAR.UPDATE_TEXTBOX_BORDER_COLOR"}},{key:"UPDATE_STRAIGHT_LINE_COLOR",get:function(){return"TOOLBAR.UPDATE_STRAIGHT_LINE_COLOR"}},{key:"UPDATE_STRAIGHT_LINE_WIDTH",get:function(){return"TOOLBAR.UPDATE_STRAIGHT_LINE_WIDTH"}},{key:"UPDATE_SELECTED_STICKER",get:function(){return"TOOLBAR.UPDATE_SELECTED_STICKER"}}]);return e}();t.Actions=j;var B=function(){function e(){r(this,e)}i(e,null,[{key:"DELETE",get:function(){return"delete"}},{key:"MOUSE_ENTER_DELETE",get:function(){return"mouse-enter-delete"}},{key:"MOUSE_LEAVE_DELETE",get:function(){return"mouse-leave-delete"}},{key:"CREATE_TEXTBOX",get:function(){return"create-textbox"}},{key:"CREATE_IMAGE_FROM_FILE",get:function(){return"create-image-from-file"}},{key:"CREATE_IMAGE_FROM_CAMERA",get:function(){return"create-image-from-camera"}},{key:"CREATE_AUDIO",get:function(){return"create-audio"}},{key:"CREATE_MANIPULATIVE_IMAGE",get:function(){return"create-manipulative-image"}},{key:"CREATE_FILL_IN_THE_BLANK",get:function(){return"create-fill-in-the-blank"}},{key:"CREATE_LINK",get:function(){return"create-link"}},{key:"CREATE_MULTIPLE_CHOICE",get:function(){return"create-multiple-choice"}},{key:"HELP_REQUEST",get:function(){return"help"}},{key:"CHECK_REQUEST",get:function(){return"check"}},{key:"CHAT_REQUEST",get:function(){return"chat"}},{key:"CANCEL_REQUEST",get:function(){return"cancel"}},{key:"RESOLVE_REQUEST",get:function(){return"resolve"}},{key:"UPDATE_POINT_VALUE",get:function(){return"update_point_value"}},{key:"UPDATE_SCORED_POINTS",get:function(){return"update_scored_points"}},{key:"HIDE_FEEDBACK",get:function(){return"hide_feedback"}},{key:"SHOW_FEEDBACK",get:function(){return"show_feedback"}},{key:"UPDATE_TEXTBOX_SIZE",get:function(){return"update_textbox_size"}},{key:"UPDATE_TEXTBOX_COLOR",get:function(){return"update_textbox_color"}},{key:"UPDATE_TEXTBOX_BACKGROUND_COLOR",get:function(){return"update_textbox_background_color"}},{key:"UPDATE_TEXTBOX_BORDER_COLOR",get:function(){return"update_textbox_border_color"}},{key:"UNDO",get:function(){return"undo_element"}},{key:"REDO",get:function(){return"redo_element"}},{key:"ADD_STICKER",get:function(){return"add_sticker"}},{key:"CLONE_ELEMENT",get:function(){return"clone_element"}},{key:"CREATE_STRAIGHT_LINE",get:function(){return"create_straight_line"}},{key:"UPDATE_STRAIGHT_LINE_COLOR",get:function(){return"update_straight_line_color"}},{key:"UPDATE_STRAIGHT_LINE_WIDTH",get:function(){return"update_straight_line_width"}},{key:"CLEAR_PLACEMENT",get:function(){return"clear_placement"}},{key:"UPDATE_SLIDE_BACKGROUND",get:function(){return"update_slide_background"}},{key:"CLEAR_ALL",get:function(){return"clear_all"}}]);return e}();t.Notifications=B;var W=function(){function e(t,n,i,s,o,a,l,u,f,p,v,y,b,w,C,E,T,I,A,x){"ngInject";var P=this;r(this,e);this.$q=t;this.$timeout=n;this.$window=i;this.$document=s;this.$mdToast=o;this.$log=a;this.$mdDialog=l;this._hotkeys=u;this._assignmentTrackingService=f;this._cacheService=p;this._helpRequestService=v;this._authService=y;this._firebaseService=b;this._storageService=w;this._mixpanelService=E;this._assignmentWorkService=C;this._imageEditService=T;this._mediaService=I;this._slideBackgroundService=A;this._feedbackService=x;this._stateUpdated=new c["default"](this);this._notification=new c["default"](this);this._extendedStateUpdated=new c["default"](this);this._stickerManager=new m["default"](this.$q,this.$log,this._cacheService,this._imageEditService,this._mediaService,this._authService);this._fillInTheBlankManager=new O["default"](this._assignmentTrackingService,this._cacheService);this._sidenavManager=new g["default"](this._stickerManager,this._fillInTheBlankManager);this._zoomManager=new d["default"](this._sidenavManager.updated,n);this._feedback=new h.Feedback(n,this);this._multipleChoiceManager=new _["default"](this._cacheService);this._helpCenterManager=new k["default"](this.$q,this.$timeout,this,this._helpRequestService,this._authService,this._firebaseService,this._cacheService,this._storageService,this._mixpanelService,this._feedbackService);this._clipboardManager=new S["default"](this.$log,this.$window,this.$document,this._hotkeys,this,this._imageEditService);this._slideBackgroundManager=new M.SlideBackgroundManager(this.$mdDialog,this.$q,this.$document,this._slideBackgroundService,this,this._mediaService,this._authService,this._imageEditService);this._state=H;this._penWidths=F;this._highlighterWidths=U;this._straightLineWidths=$;this._focusedElement=void 0;this._assignmentTrackingService.undoStackUpdated.subscribe(function(){return P.extendedStateUpdated.raise()});this._sidenavManager.updated.subscribe(function(){return P.extendedStateUpdated.raise()});this._authService.dataCleared.subscribe(function(){return P.reset()})}e.$inject=["$q","$timeout","$window","$document","$mdToast","$log","$mdDialog","hotkeys","AssignmentTrackingService","CacheService","HelpRequestService","AuthService","FirebaseService","StorageService","AssignmentWorkService","MixpanelService","ImageEditService","MediaService","SlideBackgroundService","FeedbackService"];i(e,[{key:"reducer",value:function(e,t){switch(t.type){case j.UPDATE_MODE:return s({},e,{mode:t.mode});case j.UPDATE_COLOR:return s({},e,{lines:s({},e.lines,{color:s({},t.color)})});case j.UPDATE_PEN_WIDTH:return s({},e,{lines:s({},e.lines,{width:t.newWidth})});case j.UPDATE_HIGHLIGHTER_COLOR:return s({},e,{highlighter:s({},e.highlighter,{color:s({},t.color)})});case j.UPDATE_HIGHLIGHTER_WIDTH:return s({},e,{highlighter:s({},e.highlighter,{width:t.newWidth})});case j.UPDATE_TEXT_SIZE:return s({},e,{text:s({},e.text,{size:t.newSize})});case j.UPDATE_TEXT_COLOR:return s({},e,{text:s({},e.text,{color:t.newColor})});case j.UPDATE_TEXT_BACKGROUND_COLOR:return s({},e,{text:s({},e.text,{backgroundColor:t.newBackgroundColor})});case j.UPDATE_TEXTBOX_BORDER_COLOR:return s({},e,{text:s({},e.text,{borderColor:t.newBorderColor})});case j.UPDATE_STRAIGHT_LINE_COLOR:return s({},e,{straightLines:s({},e.straightLines,{color:t.newColor})});case j.UPDATE_STRAIGHT_LINE_WIDTH:return s({},e,{straightLines:s({},e.straightLines,{width:t.newWidth})});case j.UPDATE_SELECTED_STICKER:return s({},e,{stickers:{selectedId:t.selectedId}});default:return e}}},{key:"dispatch",value:function(e){var t=this.state;this._state=this.reducer(this.state,e);this._stateUpdated.raise({newState:this.state,oldState:t});this.extendedStateUpdated.raise()}},{key:"updateMode",value:function(e){this.dispatch({type:j.UPDATE_MODE,mode:e||void 0})}},{key:"notify",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];n&&this.updateMode(q.Selector);this._notification.raise({
type:e,data:t})}},{key:"updateSelectedUserSticker",value:function(e){this.dispatch({type:j.UPDATE_SELECTED_STICKER,selectedId:e})}},{key:"updateTextColor",value:function(e){this.dispatch({type:j.UPDATE_TEXT_COLOR,newColor:e});this.notify(B.UPDATE_TEXTBOX_COLOR,s({},e,{needsFocusedElement:!0}))}},{key:"updateTextboxBackgroundColor",value:function(e){this.dispatch({type:j.UPDATE_TEXT_BACKGROUND_COLOR,newBackgroundColor:e});this.notify(B.UPDATE_TEXTBOX_BACKGROUND_COLOR,s({},e,{needsFocusedElement:!0}))}},{key:"updateTextboxBorderColor",value:function(e){this.dispatch({type:j.UPDATE_TEXTBOX_BORDER_COLOR,newBorderColor:e});this.notify(B.UPDATE_TEXTBOX_BORDER_COLOR,s({},e,{needsFocusedElement:!0}))}},{key:"updateTextSize",value:function(e){var t=Math.min(C["default"].FONT_SIZE_MAX,Math.max(C["default"].FONT_SIZE_MIN,this.state.text.size+C["default"].FONT_INCREMENT*(e?1:-1)));this.dispatch({type:j.UPDATE_TEXT_SIZE,newSize:t});this.notify(B.UPDATE_TEXTBOX_SIZE,{fontSize:t,needsFocusedElement:!0})}},{key:"updateStraightLineColor",value:function(e){this.dispatch({type:j.UPDATE_STRAIGHT_LINE_COLOR,newColor:e});this.notify(B.UPDATE_STRAIGHT_LINE_COLOR,s({},e,{needsFocusedElement:!0}))}},{key:"updateStraightLineWidth",value:function(e){this.dispatch({type:j.UPDATE_STRAIGHT_LINE_WIDTH,newWidth:e});this.notify(B.UPDATE_STRAIGHT_LINE_WIDTH,{width:e,needsFocusedElement:!0})}},{key:"updateColor",value:function(e){this.dispatch({type:j.UPDATE_COLOR,color:e})}},{key:"updatePenWidth",value:function(e){this.dispatch({type:j.UPDATE_PEN_WIDTH,newWidth:e})}},{key:"updateHighlighterColor",value:function(e){this.dispatch({type:j.UPDATE_HIGHLIGHTER_COLOR,color:e})}},{key:"updateHighlighterWidth",value:function(e){this.dispatch({type:j.UPDATE_HIGHLIGHTER_WIDTH,newWidth:e})}},{key:"zoomIn",value:function(){this._zoomManager.increment();this.extendedStateUpdated.raise()}},{key:"zoomOut",value:function(){this._zoomManager.decrement();this.extendedStateUpdated.raise()}},{key:"clearTarget",value:function(){this._targetIndex=null}},{key:"undo",value:function(){if(this.hasTarget){var e=this._assignmentTrackingService.undo(this.targetIndex,this.target.isWork);this.notify(B.UNDO,{needsFocusedElement:!0,change:e},!1)}}},{key:"redo",value:function(){if(this.hasTarget){var e=this._assignmentTrackingService.redo(this.targetIndex,this.target.isWork);this.notify(B.REDO,{needsFocusedElement:!0,change:e},!1)}}},{key:"_handleActiveStateChanged",value:function(e){(this.focusedElementIsTextbox||this.focusedElementIsFillInTheBlankChild)&&this.dispatch({type:j.UPDATE_TEXT_COLOR,newColor:e.newColor});if(this.focusedElementIsTextbox){this.dispatch({type:j.UPDATE_TEXT_BACKGROUND_COLOR,newBackgroundColor:e.newBackgroundColor});this.dispatch({type:j.UPDATE_TEXTBOX_BORDER_COLOR,newBorderColor:e.newBorderColor})}}},{key:"hideFeedback",value:function(){this.notify(B.HIDE_FEEDBACK,{needsFocusedElement:!1},!1)}},{key:"showFeedback",value:function(){this.notify(B.SHOW_FEEDBACK,{needsFocusedElement:!1},!1)}},{key:"saveSticker",value:function(){var e=this;this.sidenavManager.startLoading();return this._stickerManager.saveSelected()["catch"](function(){e.sidenavManager.setError("There was a problem saving your sticker")})["finally"](function(){e.sidenavManager.closeState();e.sidenavManager.finishLoading()})}},{key:"deleteSelected",value:function(){var e=this;this.sidenavManager.startLoading();return this._stickerManager.deleteSelected()["catch"](function(){e.sidenavManager.setError("There was a problem deleting your sticker")})["finally"](function(){e.sidenavManager.closeState();e.sidenavManager.finishLoading()})}},{key:"addStickerScore",value:function(e){var t=this.workQuestion,n=t.addScore(e);n!==t.points&&this.notify(B.UPDATE_SCORED_POINTS,{needsFocusedElement:!1,newScore:n},!1)}},{key:"clearAll",value:function(){this.notify(B.CLEAR_ALL,{},!1)}},{key:"clearPlacement",value:function(){this.updateSelectedUserSticker("");this.notify(B.CLEAR_PLACEMENT,{},!1)}},{key:"toast",value:function(e){var t=this.$mdToast.simple().textContent(e).position("bottom right");this.$mdToast.show(t)}},{key:"reset",value:function(){this._state=H;this.feedback.reset();this.stickerManager.reset();this.sidenavManager.reset();this.helpCenter.reset()}},{key:"state",get:function(){return this._state}},{key:"penWidths",get:function(){return this._penWidths}},{key:"highlighterWidths",get:function(){return this._highlighterWidths}},{key:"straightLineWidths",get:function(){return this._straightLineWidths}},{key:"stateUpdated",get:function(){return this._stateUpdated}},{key:"notification",get:function(){return this._notification}},{key:"extendedStateUpdated",get:function(){return this._extendedStateUpdated}},{key:"zoomManager",get:function(){return this._zoomManager}},{key:"zoomFactor",get:function(){return this.zoomManager&&this._zoomManager.factor},set:function(e){this._zoomManager.setFactor(e);this.extendedStateUpdated.raise()}},{key:"canZoomOut",get:function(){return this.zoomFactor>u.ZoomConstants.LOWER_LIMIT}},{key:"canZoomIn",get:function(){return this.zoomFactor<u.ZoomConstants.UPPER_LIMIT}},{key:"zoomPercent",get:function(){return this._zoomManager.percentage}},{key:"targetIndex",set:function(e){this._targetIndex=e;this.extendedStateUpdated.raise()},get:function(){return this._targetIndex}},{key:"hasTargetIndex",get:function(){return null!==this._targetIndex}},{key:"hasTarget",get:function(){return this._assignmentTrackingService.target&&angular.isNumber(this._targetIndex)}},{key:"target",get:function(){return this._assignmentTrackingService.target}},{key:"contentQuestion",get:function(){return this.hasTarget&&this.hasTargetIndex?this.target.isWork?this.target.assignment.questions[this.targetIndex]:this.target.questions[this.targetIndex]:null}},{key:"workQuestion",get:function(){return this.hasTarget&&this.target.isWork&&this.hasTargetIndex?this.target.questionForIndex(this.targetIndex):null}},{key:"canUndo",get:function(){return this.hasTarget&&this._assignmentTrackingService.canUndo(this.targetIndex,this.target.isWork)}},{key:"canRedo",get:function(){return this.hasTarget&&this._assignmentTrackingService.canRedo(this.targetIndex,this.target.isWork)}},{key:"focusedElement",set:function(e){(this.focusedElementIsTextbox||this.focusedElementIsFillInTheBlankChild)&&this.focusedElement.activeStateChanged.unsubscribe(this._handleActiveStateChanged,this);this._focusedElement=e;(this.focusedElementIsTextbox||this.focusedElementIsFillInTheBlankChild)&&this.focusedElement.activeStateChanged.subscribe(this._handleActiveStateChanged,this);(this.focusedElementIsTextbox||this.focusedElementIsFillInTheBlankChild)&&this.dispatch({type:j.UPDATE_TEXT_SIZE,newSize:this.focusedElement.fontSize});if(this.focusedElementIsStraightLine){this.dispatch({type:j.UPDATE_STRAIGHT_LINE_COLOR,newColor:{hex:this.focusedElement.color}});this.dispatch({type:j.UPDATE_STRAIGHT_LINE_WIDTH,newWidth:this.focusedElement.width})}this.extendedStateUpdated.raise()},get:function(){return this._focusedElement}},{key:"focusedElementIsTextbox",get:function(){return this.focusedElement&&this.focusedElement.type===L["default"].type}},{key:"focusedElementIsStraightLine",get:function(){return this.focusedElement&&this.focusedElement.type===R["default"].type}},{key:"focusedElementIsFillInTheBlankParent",get:function(){return this.focusedElement&&this.focusedElement.type===T["default"].type}},{key:"focusedElementIsFillInTheBlankChild",get:function(){return this.focusedElement&&this.focusedElement.type===A["default"].type}},{key:"activeColor",get:function(){return this.state.text.color}},{key:"feedback",get:function(){return this._feedback}},{key:"isFeedbackVisible",get:function(){return this.feedback.state instanceof h.FeedbackVisible}},{key:"isFeedbackInvisible",get:function(){return this.feedback.state instanceof h.FeedbackInvisible}},{key:"isFeedbackDisabled",get:function(){return this.feedback.state instanceof h.FeedbackDisabled}},{key:"isFeedbackNotification",get:function(){return this.feedback.state instanceof h.FeedbackNotification}},{key:"sidenavManager",get:function(){return this._sidenavManager}},{key:"stickerManager",get:function(){return this._stickerManager}},{key:"selectedSticker",get:function(){return this._stickerManager.selected}},{key:"multipleChoiceManager",get:function(){return this._multipleChoiceManager}},{key:"helpCenter",get:function(){return this._helpCenterManager}},{key:"clipboardManager",get:function(){return this._clipboardManager}},{key:"slideBackgroundManager",get:function(){return this._slideBackgroundManager}},{key:"fillInTheBlankManager",get:function(){return this._fillInTheBlankManager}}]);return e}();t["default"]=W},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(158),s=i(r);t["default"]=s["default"]||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t,n){e.exports={"default":n(159),__esModule:!0}},function(e,t,n){n(160);e.exports=n(26).Object.assign},function(e,t,n){var i=n(24);i(i.S+i.F,"Object",{assign:n(161)})},function(e,t,n){"use strict";var i=n(78),r=n(110),s=n(67),o=n(52),a=n(64),c=Object.assign;e.exports=!c||n(35)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";e[n]=7;i.split("").forEach(function(e){t[e]=e});return 7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i})?function(e,t){for(var n=o(e),c=arguments.length,l=1,u=r.f,d=s.f;c>l;)for(var h,f=a(arguments[l++]),g=u?i(f).concat(u(f)):i(f),p=g.length,m=0;p>m;)d.call(f,h=g[m++])&&(n[h]=f[h]);return n}:c},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(149),a=s(o),c=n(163),l=s(c),u=new l["default"],d=[{name:"red",hex:a["default"].CK_ELEMENT_RED},{name:"red-orange",hex:a["default"].CK_ELEMENT_RED_ORANGE},{name:"orange",hex:a["default"].CK_ELEMENT_ORANGE},{name:"yellow",hex:a["default"].CK_ELEMENT_YELLOW},{name:"lime",hex:a["default"].CK_ELEMENT_LIME_GREEN},{name:"mint",hex:a["default"].CK_ELEMENT_MINT_GREEN},{name:"green",hex:a["default"].CK_ELEMENT_GREEN},{name:"teal",hex:a["default"].CK_ELEMENT_TEAL},{name:"aqua",hex:a["default"].CK_ELEMENT_AQUA},{name:"turquoise",hex:a["default"].CK_ELEMENT_TURQUOISE},{name:"blue",hex:a["default"].CK_ELEMENT_BLUE},{name:"purple",hex:a["default"].CK_ELEMENT_PURPLE},{name:"mauve",hex:a["default"].CK_ELEMENT_MAUVE},{name:"violet",hex:a["default"].CK_ELEMENT_VIOLET},{name:"magenta",hex:a["default"].CK_ELEMENT_MAGENTA},{name:"pink",hex:a["default"].CK_ELEMENT_PINK},{name:"sand",hex:a["default"].CK_ELEMENT_SAND},{name:"tan",hex:a["default"].CK_ELEMENT_TAN},{name:"brown",hex:a["default"].CK_ELEMENT_BROWN},{name:"dark-brown",hex:a["default"].CK_ELEMENT_DARK_BROWN},{name:"black",hex:a["default"].CK_ELEMENT_BLACK,active:!0},{name:"grey",hex:a["default"].CK_ELEMENT_GREY},{name:"light-grey",hex:a["default"].CK_ELEMENT_LIGHT_GREY},{name:"white",hex:a["default"].CK_ELEMENT_WHITE}],h=[{name:"blue",hex:a["default"].CK_ROSTER_BLUE},{name:"orange",hex:a["default"].CK_ROSTER_ORANGE},{name:"purple",hex:a["default"].CK_ROSTER_PURPLE},{name:"red_pink",hex:a["default"].CK_ROSTER_RED_PINK},{name:"yellow",hex:a["default"].CK_ROSTER_YELLOW},{name:"green",hex:a["default"].CK_ROSTER_GREEN},{name:"grey",hex:a["default"].CK_ROSTER_GREY},{name:"pink",hex:a["default"].CK_ROSTER_PINK},{name:"red",hex:a["default"].CK_ROSTER_RED},{name:"brown",hex:a["default"].CK_ROSTER_BROWN},{name:"light_blue",hex:a["default"].CK_ROSTER_LIGHT_BLUE},{name:"light_green",hex:a["default"].CK_ROSTER_LIGHT_GREEN}],f="1px solid "+a["default"].CK_DISABLED_GREY,g=function(){function e(){r(this,e)}i(e,null,[{key:"penToHighlight",value:function(e){return{name:e.name,hex:u.hex6ToRgba(e.hex)}}},{key:"borderColor",value:function(e){return"white"===e.name?f:"0"}},{key:"ELEMENT_COLORS",get:function(){return d}},{key:"ROSTER_COLORS",get:function(){return h}}]);return e}();t.Colors=g},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return this.isHex6(e)?e:this.rgbaToHex8(e)}},{key:"decode",value:function(e){return this.isHex6(e)?e:this.hex8ToRgba(e)}},{key:"isHex6",value:function(e){return e.match(/^#[\da-fA-F]{6}$/)}},{key:"isHex8",value:function(e){return e.match(/^#[\da-fA-F]{8}$/)}},{key:"hex8ToRgba",value:function(e){var t=e.match(/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/);return t?"rgba("+this.hexToDecimal(t[1])+","+this.hexToDecimal(t[2])+","+this.hexToDecimal(t[3])+","+this.hexToDecimal(t[4])/256+")":"rgba(0, 10, 0, 1)"}},{key:"rgbaToHex8",value:function(e){var t=e.match(/(\d+)[, ]+(\d+)[, ]+(\d+)[, ]+(\d*\.?\d+\.?\d*)/);return t?"#"+this.intStringToHex(t[1])+this.intStringToHex(t[2])+this.intStringToHex(t[3])+this.zeroPad(Math.round(256*parseFloat(t[4])).toString(16)):"#000a00ff"}},{key:"rgbaOverrideAlpha",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?.3:arguments[1],n=e.match(/(\d+)[, ]+(\d+)[, ]+(\d+)[, ]+(\d*\.?\d+\.?\d*)/);return n?"rgba("+n[1]+", "+n[2]+", "+n[3]+", "+t+")":"rgba(0, 10, 0, 1)"}},{key:"hex6ToRgba",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?.3:arguments[1],n=e.match(/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/);return n?"rgba("+this.hexToDecimal(n[1])+", "+this.hexToDecimal(n[2])+", "+this.hexToDecimal(n[3])+", "+t+")":"rgba(0, 10, 0, 1)"}},{key:"hexToDecimal",value:function(e){return parseInt(e,16)}},{key:"intStringToHex",value:function(e){return this.zeroPad(parseInt(e).toString(16))}},{key:"zeroPad",value:function(e){return 1===e.length?"0"+e:e}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=function s(){i(this,s);if(angular.isUndefined(this.encode))throw new TypeError("The encode(value) method must be defined");if(angular.isUndefined(this.decode))throw new TypeError("The decode(value, key) method must be defined")};t["default"]=r;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"FIXED",get:function(){return"zoom_fixed"}},{key:"NO_GROW",get:function(){return"zoom_no_grow"}},{key:"TO_FIT",get:function(){return"zoom_to_fit"}}]);return e}();t.ZoomModes=s;var o=function(){function e(){r(this,e)}i(e,null,[{key:"UPPER_LIMIT",get:function(){return 5}},{key:"LOWER_LIMIT",get:function(){return.25}},{key:"INCREMENT",get:function(){return.25}}]);return e}();t.ZoomConstants=o;var a=function(){function e(t,n){r(this,e);this._factor=1;this.$timeout=n;t.subscribe(this._handleSidenavUpdated,this)}i(e,[{key:"_handleSidenavUpdated",value:function(e){var t=this,n=e.newState,i=e.oldState;if(this._svgSheet&&n.isOpen!==i.isOpen){this.$timeout(function(){return t.mode=t.mode||s.NO_GROW},500,!1);this.$timeout(function(){return t.mode=t.mode||s.NO_GROW},1e3,!1)}}},{key:"increment",value:function(){this.setFactor(this.factor+o.INCREMENT)}},{key:"decrement",value:function(){this.setFactor(this.factor-o.INCREMENT)}},{key:"setFactor",value:function(e){this.factor=e;this.mode=s.FIXED}},{key:"_determineFactor",value:function(){return this._mode===s.FIXED?this._factor:this._mode===s.TO_FIT?this._svgSheet.toFitFactor:this._mode===s.NO_GROW?this._svgSheet.noGrowFactor:void 0}},{key:"svgSheet",set:function(e){this._svgSheet=e;this.mode=this.mode||s.NO_GROW}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e;this._factor=this._determineFactor();this._svgSheet.zoom(this._factor)}},{key:"factor",get:function(){return this._factor},set:function(e){e>o.UPPER_LIMIT?e=o.UPPER_LIMIT:e<o.LOWER_LIMIT&&(e=o.LOWER_LIMIT);this._factor=e}},{key:"percentage",get:function(){return Math.floor(100*this._factor)+"%"}}]);return e}();t["default"]=a},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){r(this,e)}i(e,[{key:"given",value:function(){throw new TypeError("The given(value) method must be defined")}},{key:"toggled",value:function(){throw new TypeError("The toggled(value) method must be defined")}}]);return e}(),c=function(e){function t(){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}o(t,e);i(t,[{key:"given",value:function(e){e.setState(new l);e.toolbarService.extendedStateUpdated.raise()}},{key:"toggled",value:function(){}}]);return t}(a);t.FeedbackDisabled=c;var l=function(e){function t(){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}o(t,e);i(t,[{key:"given",value:function(){}},{key:"toggled",value:function(e){e.setState(new u);e.toolbarService.hideFeedback();e.toolbarService.extendedStateUpdated.raise()}}]);return t}(a);t.FeedbackVisible=l;var u=function(e){function t(){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}o(t,e);i(t,[{key:"given",value:function(e){e.setState(new d);e.toolbarService.extendedStateUpdated.raise()}},{key:"toggled",value:function(e){e.setState(new l);e.toolbarService.showFeedback();e.toolbarService.extendedStateUpdated.raise()}}]);return t}(a);t.FeedbackInvisible=u;var d=function(e){function t(){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}o(t,e);i(t,[{key:"given",value:function(){}},{key:"toggled",value:function(e){e.setState(new l);e.toolbarService.showFeedback()}}]);return t}(a);t.FeedbackNotification=d;var h=function(){function e(t,n){r(this,e);this.$timeout=t;this.toolbarService=n;this.state=null;this.reset()}i(e,[{key:"setState",value:function(e){this.state=e}},{key:"given",value:function(){this.state.given(this)}},{key:"toggled",value:function(){this.state.toggled(this)}},{key:"reset",value:function(){this.setState(new c(this))}}]);return e}();t.Feedback=h},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(147),a=s(o),c=function(){function e(t,n,i){r(this,e);this._name=t;this._type=n;this._filterFunc=i}i(e,[{key:"name",get:function(){return this._name}},{key:"isStickerMode",get:function(){return this._type===e.TYPE_STICKER}},{key:"isAudioMode",get:function(){return this._type===e.TYPE_AUDIO}},{key:"isFillInTheBlankMode",get:function(){return this._type===e.TYPE_FILL_IN_THE_BLANK}},{key:"isMultipleChoiceMode",get:function(){return this._type===e.TYPE_MULTIPLE_CHOICE}},{key:"isSlideBackgroundMode",get:function(){return this._type===e.TYPE_SLIDE_BACKGROUND}},{key:"isHelpCenterMode",get:function(){return this._type===e.TYPE_HELP_CENTER}},{key:"filter",get:function(){return this._filterFunc}}],[{key:"TYPE_STICKER",get:function(){return"sticker"}},{key:"TYPE_AUDIO",get:function(){return"audio"}},{key:"TYPE_FILL_IN_THE_BLANK",get:function(){return"fill_in_the_blank"}},{key:"TYPE_MULTIPLE_CHOICE",get:function(){return"multiple_choice"}},{key:"TYPE_SLIDE_BACKGROUND",get:function(){return"slide_background"}},{key:"TYPE_HELP_CENTER",get:function(){return"help_center"}}]);return e}(),l=new c("place_stickers",c.TYPE_STICKER,function(e){return!e.mode.isStickerMode}),u=new c("edit_sticker",c.TYPE_STICKER),d=new c("audio_record",c.TYPE_AUDIO,function(e){return!e.mode.isAudioMode}),h=new c("edit_fill_in_the_blank",c.TYPE_FILL_IN_THE_BLANK,function(e){return!e.mode.isFillInTheBlankMode}),f=new c("edit_multiple_choice",c.TYPE_MULTIPLE_CHOICE),g=new c("slide_background",c.TYPE_SLIDE_BACKGROUND,function(e){return!e.mode.isSlideBackgroundMode}),p=new c("help_center",c.TYPE_HELP_CENTER,function(e){return!e.mode.isHelpCenterMode}),m=function(){function e(){r(this,e)}i(e,[{key:"PLACE_STICKERS",get:function(){return l}},{key:"EDIT_STICKER",get:function(){return u}},{key:"AUDIO_RECORD",get:function(){return d}},{key:"EDIT_FILL_IN_THE_BLANK",get:function(){return h}},{key:"EDIT_MULTIPLE_CHOICE",get:function(){return f}},{key:"SLIDE_BACKGROUND",get:function(){return g}},{key:"HELP_CENTER",get:function(){return p}}]);return e}();t.SidenavModes=m;var v=function(){function e(t,n,i){r(this,e);this._mode=t;this._isOpen=n;this._data=i}i(e,[{key:"mode",get:function(){return this._mode}},{key:"isOpen",get:function(){return this._isOpen}},{key:"data",get:function(){return this._data}}]);return e}(),_=function(){function e(t,n){r(this,e);this._stickerManager=t;this._fillInTheBlankManager=n;this._updated=new a["default"](this);this._errorMessage=void 0;this._isLoading=!1;this._modes=new m;this._stateStack=[];this.reset()}i(e,[{key:"_raiseUpdated",value:function(e){var t=this._state;e();this._updated.raise({newState:this._state,oldState:t})}},{key:"setError",value:function(e){this.finishLoading();this._errorMessage=e}},{key:"clearError",value:function(){this._errorMessage=null}},{key:"startLoading",value:function(){this.clearError();this._isLoading=!0}},{key:"finishLoading",value:function(){this._isLoading=!1}},{key:"toggleOpen",value:function(){var e=this._state;this._goToState(new v(e.mode,!e.isOpen,e.data))}},{key:"open",value:function(){this.isOpen||this.toggleOpen()}},{key:"close",value:function(){this.isOpen&&this.toggleOpen()}},{key:"_goToState",value:function(e){var t=this;this.clearError();this.finishLoading();angular.equals(e,this._state)||this._raiseUpdated(function(){e.mode===t.mode?t._stateStack.pop():e.mode.filter&&(t._stateStack=t._stateStack.filter(e.mode.filter));t._stateStack.push(e);t._applyStateUpdate()})}},{key:"_applyStateUpdate",value:function(){var e=this._state;e.mode&&e.mode.isStickerMode?this._stickerManager.selected=e.data:e.mode&&e.mode.isFillInTheBlankMode&&(this._fillInTheBlankManager.selected=e.data)}},{key:"closeState",value:function(){var e=this;this._stateStack.length>1?this._raiseUpdated(function(){e._stateStack.pop();e._applyStateUpdate()}):this.close()}},{key:"openPlaceSticker",value:function(){this._goToState(new v(this.modes.PLACE_STICKERS,!0,null))}},{key:"openEditSticker",value:function(e){this._goToState(new v(this.modes.EDIT_STICKER,!0,e))}},{key:"openRecordAudio",value:function(){this._goToState(new v(this.modes.AUDIO_RECORD,!0))}},{key:"openEditFillInTheBlank",value:function(e){this._goToState(new v(this.modes.EDIT_FILL_IN_THE_BLANK,!0,e))}},{key:"openEditMultipleChoice",value:function(e){this._goToState(new v(this.modes.EDIT_MULTIPLE_CHOICE,!0,e))}},{key:"openSlideBackground",value:function(){this._goToState(new v(this.modes.SLIDE_BACKGROUND,!0))}},{key:"openHelpCenter",value:function(){this._goToState(new v(this.modes.HELP_CENTER,!0))}},{key:"isModeVisible",value:function(e){return this.isOpen&&this.canShowMode&&e===this.mode}},{key:"reset",value:function(){this._stateStack=[new v(this.modes.PLACE_STICKERS,!1,null)]}},{key:"updated",get:function(){return this._updated}},{key:"error",get:function(){return this._errorMessage}},{key:"isError",get:function(){return!!this._errorMessage}},{key:"isLoading",get:function(){return this._isLoading}},{key:"isOpen",get:function(){return this._state.isOpen}},{key:"canShowMode",get:function(){return!this.isLoading&&!this.isError}},{key:"_state",get:function(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1]:null}},{key:"mode",get:function(){return this._state.mode}},{key:"modes",get:function(){return this._modes}},{key:"isStickerModeOpen",get:function(){return!!this._stateStack.find(function(e){return e.isOpen&&e.mode.isStickerMode})}},{key:"isAudioModeOpen",get:function(){return!!this._stateStack.find(function(e){return e.isOpen&&e.mode.isAudioMode})}},{key:"isMultipleChoiceModeOpen",get:function(){return!!this._stateStack.find(function(e){return e.isOpen&&e.mode.isMultipleChoiceMode})}},{key:"isSlideBackgroundModeOpen",get:function(){return!!this._stateStack.find(function(e){return e.isOpen&&e.mode.isSlideBackgroundMode})}},{key:"isHelpCenterModeOpen",get:function(){return!!this._stateStack.find(function(e){return e.isOpen&&e.mode.isHelpCenterMode})}}]);return e}();t["default"]=_},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(169),a=s(o),c=function(){function e(t,n,i,s,o,a){r(this,e);this.$q=t;this.$log=n;this._cacheService=i;this._imageEditService=s;this._mediaService=o;this._authService=a;this.reset()}i(e,[{key:"init",value:function(){var e=this;this._cacheService.getStickersForUser(!1).then(function(t){e.stickers=t})}},{key:"saveSelected",value:function(){var e=this,t=void 0;if(this._selectedImageUrl.startsWith("data:")){var n=this._imageEditService.dataURItoBlob(this._selectedImageUrl);t=this._uploadStickerMedia(n)}else t=this._selectedImageUrl.startsWith("blob:")?this._imageEditService.objectUrlToBlob(this._selectedImageUrl).then(function(t){return e._uploadStickerMedia(t)}):this.$q.resolve(this._selectedImageUrl);return t.then(function(t){e.selected.text=e._selectedText;e.selected.score=e._selectedScore;e.selected.imageUrl=t;return e.selected.id?e._save(e.selected,e._getBeforeStickerId(e.selected.id)):e._cacheService.createSticker(e.selected.imageUrl,e.selected.text,e.selected.tags)}).then(function(t){e.partialReset();return t})}},{key:"_uploadStickerMedia",value:function(e){return this._mediaService.create(e,"feedback",this._authService.currentUserId).then(function(e){return e.mediaLink})}},{key:"deleteSelected",value:function(){var e=this;return this._cacheService.deleteSticker(this.selected.id).then(function(){e.partialReset()})}},{key:"reset",value:function(){this._stickers=void 0;this.partialReset()}},{key:"partialReset",value:function(){this._selected=void 0;this._selectedText=void 0;this._selectedScore=void 0;this._selectedImageUrl=void 0}},{key:"save",value:function(e){var t=this.stickers.find(function(t){return t.id===e}),n=this._getBeforeStickerId(e);return this._save(t,n)}},{key:"_save",value:function(e,t){return this._cacheService.updateSticker(e,t)}},{key:"_getBeforeStickerId",value:function(e){var t=this.stickers.map(function(e){return e.id}).indexOf(e),n=this.stickers[t+1];return n&&n.id}},{key:"stickers",get:function(){return this._stickers},set:function(e){e!==this._stickers&&this.reset();this._stickers=e}},{key:"selected",get:function(){return this._selected},set:function(e){this._selectedText=e&&e.text;this._selectedScore=e&&e.score;this._selectedImageUrl=e&&e.imageUrl;this._selected=e}},{key:"selectedText",get:function(){return this._selectedText},set:function(e){this._selectedText=e}},{key:"selectedScore",get:function(){return a["default"].formatScore(this._selectedScore)},set:function(e){this._selectedScore=a["default"].formatScore(e)}},{key:"selectedImageUrl",get:function(){return this._selectedImageUrl},set:function(e){this._selectedImageUrl=e}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"scoreIsValid",value:function(e){return angular.isNumber(e)&&100>=e&&e>=0}},{key:"formatScore",value:function(t){if(!e.scoreIsValid(t))return null;t=Number(t);t=Math.max(Math.min(100,t),0);t=Math.round(100*t)/100;return t}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(171),a=n(169),c=s(a),l=function(){function e(t){r(this,e);this._cacheService=t;this.resetOptions();this._selected=null;this._user=void 0;this._showHelp=!1}i(e,[{key:"init",value:function(){var e=this;this._cacheService.getUser(!1).then(function(t){e._user=t;e._showHelp=e._user.showMultipleChoiceIntro})}},{key:"resetOptions",value:function(){this._options=this.answers.map(function(e){return new o.MultipleChoiceOption(e)});this._selected=null}},{key:"selectAnswer",value:function(e){this.selected&&(e.points=this.selected.points);this.options.filter(function(t){return t!==e}).forEach(function(t){t.correct=!1;t.points=angular.isNumber(e.points)?0:null});this.selected=e;this.selected.correct=!0}},{key:"removeCorrectAnswer",value:function(){if(this.selected){this.resetOptions();this.selected=null}}},{key:"multipleChoiceScorePlus",value:function(){this.selected&&(this.selectedPoints=this.selected.points+1)}},{key:"multipleChoiceScoreMinus",value:function(){this.selected.points>=1&&(this.selectedPoints=this.selected.points-1)}},{key:"answers",get:function(){return["A","B","C","D","E"]}},{key:"options",get:function(){return this._options}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e}},{key:"isSelected",get:function(){return!!this.selected}},{key:"selectedPoints",get:function(){return this.selected?this.selected.points:void 0},set:function(e){var t=this;this.selected&&!function(){var n=c["default"].formatScore(e);t.options.forEach(function(e){return e.points=angular.isNumber(n)?0:null});t.selected.points=n}()}},{key:"showHelp",get:function(){return this._showHelp},set:function(e){this._showHelp=e;if(this._user&&this._user.showMultipleChoiceIntro&&!e){this._user.showMultipleChoiceIntro=e;this._cacheService.updateUser(this._user)}}}]);return e}();t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(131),u=c(l),d=n(144),h=c(d),f=n(146),g=c(f),p=n(183),m=c(p),v=n(152),_=c(v),y=n(149),k=c(y),b=n(184),S=c(b),w=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=arguments.length<=2||void 0===arguments[2]?null:arguments[2];r(this,e);this._answer=t;this._points=n;this._correct=i}i(e,[{key:"points",get:function(){return this._points},set:function(e){this._points=e}},{key:"correct",get:function(){return this._correct},set:function(e){this._correct=e}},{key:"answer",get:function(){return this._answer}}]);return e}();t.MultipleChoiceOption=w;var C=function(e){function t(e,n,i,o,c){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._location=i||new h["default"](100,200);this._size=o||new g["default"](280,84);this._options=c;this._renderedOptions=new a;this._padding=20}o(t,e);i(t,[{key:"hoverIn",value:function(){this.tryUpdate()}},{key:"hoverOut",value:function(){this.tryUpdate()}},{key:"_repositionStart",value:function(){this._dragStartState=this.snapshot()}},{key:"_repositionMove",value:function(e){this.location=e.controlStart.plus(e.delta)}},{key:"_repositionEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"createElement",value:function(e,t,n){this._base=e.group();this._background=this._base.rect(0,0,0,0);this._pointValue=this._base.text(0,0,"");this._interactive=e.group();this._touch=this._interactive.rect(0,0,0,0).addClass("touch-foreground");this._renderedOptions.clear();if(n){this._gesture=new _["default"](this,this.canvas);this._gesture._dragThreshold=0;this._gesture.start(this._touch.node);this._gesture.click.subscribe(this._toggle,this)}if(t){this._removeHandle=new m["default"](this);this._removeHandle.render(this._interactive);this._removeHandle.mouseEnter.subscribe(this.hoverIn,this);this._removeHandle.mouseLeave.subscribe(this.hoverOut,this);this._drag=new _["default"](this,this.canvas);this._drag.start(this._touch.node);this._drag.click.subscribe(this.focus,this);this._drag.dragStart.subscribe(this._repositionStart,this);this._drag.dragMove.subscribe(this._repositionMove,this);this._drag.dragEnd.subscribe(this._repositionEnd,this);
this._drag.dragEnd.subscribe(this.focus,this);this._drag.mouseEnter.subscribe(this.hoverIn,this);this._drag.mouseLeave.subscribe(this.hoverOut,this)}}},{key:"update",value:function(e,t,n){var i=this;this._background.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:k["default"].BACKGROUND_GREY,stroke:k["default"].CK_HEADER_GREY});var r=this._options.filter(function(e){return e.correct}).map(function(e){return e.points}).pop();this._pointValue.attr({x:this.location.x+8,y:this.location.y+19,style:this.textStyle,text:angular.isNumber(r)?1===r?r+" Pt":r+" Pts":""});var s=(this.width-this._padding-this._padding)/5;this._options.forEach(function(e,t){var n=i.id+"-"+t,r=i._renderedOptions.get(n);if(!r){r=new S["default"](n,i,e);r.render(i._interactive,!1,!1,i.canvas,i.assignment,i.viewerMetadata,i.thumbnail,i.moreOptionsManager);i._renderedOptions.set(n,r)}r.location=new h["default"](i.location.x+s*t+i._padding,i.location.y+.25*i.height);r.tryUpdate()});this._touch.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:"transparent",cursor:"move"});if(!t&&n)this._touch.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:"transparent",cursor:"move"});else if(t){this._background.attr({stroke:this.hovering||this.hasFocus?k["default"].CK_GREEN:k["default"].CK_HEADER_GREY});this._removeHandle.location=this.location.plus(new h["default"](this.width,0));this._removeHandle.visibility=this.hovering||this.hasFocus?"visible":"hidden"}}},{key:"_toggle",value:function(){this.focus();this.tryUpdate()}},{key:"warnBeforeDeletion",value:function(){this._background.attr({stroke:k["default"].CK_WARN})}},{key:"remove",value:function(){this._stopEvents();s(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"_stopEvents",value:function(){this._removeHandle&&this._removeHandle.remove();this._drag&&this._drag.stop();this._selectedDrag&&this._selectedDrag.stop();if(this._resizers){this._resizers.topLeft.remove();this._resizers.bottomLeft.remove();this._resizers.bottomRight.remove()}}},{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._size=e._size||this._size;this._options=e._options||this._options;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_size:this._size,_options:this._options}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._size,n._options)}},{key:"typeDisplay",get:function(){return"multiple choice"}},{key:"isParentManipulative",get:function(){return!0}},{key:"answerDisplay",get:function(){return this._options.filter(function(e){return e.correct}).map(function(e){return e.answer}).join(", ")}},{key:"options",get:function(){return this._options}},{key:"points",get:function(){var e=this._options.find(function(e){return e.correct});return e&&e.points}},{key:"hovering",get:function(){return this._drag.hovering||this._removeHandle.hovering}},{key:"textStyle",get:function(){return"\n      pointer-events:none;\n      font-family:GothamRoundedMedium;\n      dominant-baseline:ideographic;\n      line-height:115%;\n      font-size:13px;\n      fill: "+k["default"].CK_HEADER_GREY+";\n    "}}],[{key:"type",get:function(){return"mchoice_parent"}}]);return t}(u["default"]);t["default"]=C},function(e,t,n){e.exports={"default":n(173),__esModule:!0}},function(e,t,n){n(114);n(89);n(98);n(174);n(180);e.exports=n(26).Map},function(e,t,n){"use strict";var i=n(175);e.exports=n(176)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(30).f,r=n(76),s=n(142),o=n(27),a=n(136),c=n(53),l=n(137),u=n(91),d=n(101),h=n(143),f=n(34),g=n(106).fastKey,p=f?"_s":"size",m=function(e,t){var n,i=g(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var d=e(function(e,i){a(e,d,t,"_i");e._i=r(null);e._f=void 0;e._l=void 0;e[p]=0;void 0!=i&&l(i,n,e[u],e)});s(d.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n){n.r=!0;n.p&&(n.p=n.p.n=void 0);delete t[n.i]}e._f=e._l=void 0;e[p]=0},"delete":function(e){var t=this,n=m(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i];n.r=!0;r&&(r.n=i);i&&(i.p=r);t._f==n&&(t._f=i);t._l==n&&(t._l=r);t[p]--}return!!n},forEach:function(e){a(this,d,"forEach");for(var t,n=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;){n(t.v,t.k,this);for(;t&&t.r;)t=t.p}},has:function(e){return!!m(this,e)}});f&&i(d.prototype,"size",{get:function(){return c(this[p])}});return d},def:function(e,t,n){var i,r,s=m(e,t);if(s)s.v=n;else{e._l=s={i:r=g(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1};e._f||(e._f=s);i&&(i.n=s);e[p]++;"F"!==r&&(e._i[r]=s)}return e},getEntry:m,setStrong:function(e,t,n){u(e,t,function(e,t){this._t=e;this._k=t;this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;if(!e._t||!(e._l=n=n?n.n:e._t._f)){e._t=void 0;return d(1)}return"keys"==t?d(0,n.k):"values"==t?d(0,n.v):d(0,[n.k,n.v])},n?"entries":"values",!n,!0);h(t)}}},function(e,t,n){"use strict";var i=n(25),r=n(24),s=n(106),o=n(35),a=n(29),c=n(142),l=n(137),u=n(136),d=n(32),h=n(96),f=n(30).f,g=n(177)(0),p=n(34);e.exports=function(e,t,n,m,v,_){var y=i[e],k=y,b=v?"set":"add",S=k&&k.prototype,w={};if(p&&"function"==typeof k&&(_||S.forEach&&!o(function(){(new k).entries().next()}))){k=t(function(t,n){u(t,k,e,"_c");t._c=new y;void 0!=n&&l(n,v,t[b],t)});g("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in S&&(!_||"clear"!=e)&&a(k.prototype,e,function(n,i){u(this,k,e);if(!t&&_&&!d(n))return"get"==e?void 0:!1;var r=this._c[e](0===n?0:n,i);return t?this:r})});"size"in S&&f(k.prototype,"size",{get:function(){return this._c.size}})}else{k=m.getConstructor(t,e,v,b);c(k.prototype,n);s.NEED=!0}h(k,e);w[e]=k;r(r.G+r.W+r.F,w);_||m.setStrong(k,e,v);return k}},function(e,t,n){var i=n(27),r=n(64),s=n(52),o=n(81),a=n(178);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,u=4==e,d=6==e,h=5==e||d,f=t||a;return function(t,a,g){for(var p,m,v=s(t),_=r(v),y=i(a,g,3),k=o(_.length),b=0,S=n?f(t,k):c?f(t,0):void 0;k>b;b++)if(h||b in _){p=_[b];m=y(p,b,v);if(e)if(n)S[b]=m;else if(m)switch(e){case 3:return!0;case 5:return p;case 6:return b;case 2:S.push(p)}else if(u)return!1}return d?-1:l||u?u:S}}},function(e,t,n){var i=n(179);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(32),r=n(111),s=n(97)("species");e.exports=function(e){var t;if(r(e)){t=e.constructor;"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0);if(i(t)){t=t[s];null===t&&(t=void 0)}}return void 0===t?Array:t}},function(e,t,n){var i=n(24);i(i.P+i.R,"Map",{toJSON:n(181)("Map")})},function(e,t,n){var i=n(128),r=n(182);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(137);e.exports=function(e,t){var n=[];i(e,!1,n.push,n,t);return n}},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(146),d=a(u),h=n(152),f=a(h),g=n(149),p=a(g),m=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e.id,"remove");this._size=new d["default"](30,30);this._iconDiameter=14;this._target=e;this._gestureManager=new f["default"](this._target,this._target.canvas)}r(t,e);s(t,[{key:"createElement",value:function(e){this._base=e.group();this._background=this._base.circle(0,0,0);this._trashIcon=this._base.image("assets/colored-icons/trash-white.svg",0,0,0,0);this._interactive=e.group();this._touch=this._interactive.circle(0,0,0).addClass("touch-foreground");this._gestureManager.start(this._interactive.node);this._gestureManager.click.subscribe(this._clickHandler,this)}},{key:"update",value:function(){this._base.attr({visibility:this._visibility});this._background.attr({cx:this.location.x,cy:this.location.y,r:this.width/2,fill:p["default"].CK_WARN});angular.isNumber(this._target.rotation)&&this._trashIcon.node.setAttribute("transform","rotate("+(360-this._target.rotation)+", "+this.location.x+", "+this.location.y+")");this._trashIcon.attr({x:this.location.x-this._iconDiameter/2,y:this.location.y-this._iconDiameter/2,width:this._iconDiameter,height:this._iconDiameter,preserveAspectRatio:"xMidYMid meet",style:"pointer-events:none;"});this._touch.attr({cx:this.location.x,cy:this.location.y,r:this.width/2,fill:"transparent",cursor:"pointer"})}},{key:"_clickHandler",value:function(){this._target["delete"]()}},{key:"remove",value:function(){this._gestureManager.stop();this._gestureManager.click.unsubscribe(this._clickHandler,this);i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"hovering",get:function(){return this._gestureManager.hovering}},{key:"mouseEnter",get:function(){return this._gestureManager.mouseEnter}},{key:"mouseLeave",get:function(){return this._gestureManager.mouseLeave}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(157)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(132),u=c(l),d=n(152),h=c(d),f=n(149),g=c(f),p=n(146),m=c(p),v=n(153),_=n(185),y=function(e){function t(e,n,r){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,"answer-handle");this._target=n;this._correct=r.correct;this._points=r.points;this._answer=r.answer;this._size=new m["default"](44,44)}r(t,e);s(t,[{key:"createElement",value:function(e,t){this._base=e.group();this._background=this._base.circle(0,0,0);this._textbox=this._base.text(0,0,"");this._interactive=this._base.circle(0,0,0);if(t){this._gestureManager=new h["default"](this._target,this._target.canvas);this._gestureManager.start(this._interactive.node);this._gestureManager.click.subscribe(this._clickHandler,this)}}},{key:"update",value:function(e,t){var n={cx:this.location.x+this.width/2,cy:this.location.y+this.height/2,r:.5*this.width,"pointer-events":t?"auto":"none"};this._textbox.attr({x:n.cx,y:n.cy,text:this._answer,style:"font-family:GothamRoundedMedium;dominant-baseline:middle;fill:"+this.textColor+";font-size:16px;text-anchor:middle;pointer-events:none;"});this._background.attr(a({},n,{fill:this.backgroundColor,stroke:this.strokeColor}));this._interactive.attr(a({},n,{fill:"transparent",stroke:"transparent",cursor:t?"pointer":"default"}))}},{key:"_clickHandler",value:function(){this._target.answer=this._answer}},{key:"textColor",get:function(){return this.showCorrect||this.showSelected?"white":g["default"].CK_HEADER_GREY}},{key:"strokeColor",get:function(){return this.showCorrect?g["default"].CK_GRADING_MEETS:this.showIncorrect?g["default"].CK_GRADING_BELOW:g["default"].CK_HEADER_GREY}},{key:"backgroundColor",get:function(){return this.showCorrect?g["default"].CK_GRADING_MEETS:this.showIncorrect?g["default"].CK_GRADING_BELOW:this.showSelected?g["default"].CK_HEADER_GREY:g["default"].BACKGROUND_GREY}},{key:"showCorrect",get:function(){return this._canShowCorrectness&&this._isSelected&&this._correct}},{key:"showIncorrect",get:function(){return this._canShowCorrectness&&this._isSelected&&this._correct===!1}},{key:"_canShowCorrectness",get:function(){return this.viewerIntent===v.ElementIntents.WORK&&this.showStudentScores||this.viewerIntent===v.ElementIntents.FEEDBACK&&this.viewerRole===_.UserRoles.TEACHER||this.thumbnail&&this.isWork&&this.viewerIntent&&this.viewerIntent!==v.ElementIntents.WORK}},{key:"showSelected",get:function(){return this._isSelected||this.thumbnail&&!this.isWork&&this._correct||this.viewerIntent===v.ElementIntents.CONTENT&&this._correct}},{key:"_isSelected",get:function(){return!!this._answer&&!!this.selectedAnswer&&this._answer===this.selectedAnswer}},{key:"selectedAnswer",get:function(){return this._target&&this._target.answer}},{key:"showStudentScores",get:function(){return this._target&&this._target.showStudentScores}},{key:"isWork",get:function(){return this._target&&this._target.isWork}}]);return t}(u["default"]);t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(186),a=s(o),c={};c.SORT_NAME_ASC=function(e,t){return a["default"].NAME_ASC(e.name,t.name)};c.SORT_NAME_DESC=function(e,t){return a["default"].NAME_DESC(e.name,t.name)};var l=function(){function e(){r(this,e)}i(e,null,[{key:"SCHOOL",get:function(){return"school"}},{key:"COUNTRY",get:function(){return"country"}},{key:"STATE",get:function(){return"state"}},{key:"CITY",get:function(){return"city"}},{key:"SUBJECT",get:function(){return"subject"}},{key:"STUDENT_AGE",get:function(){return"student_age"}},{key:"REFERRAL",get:function(){return"referral"}},{key:"JOB_TITLE",get:function(){return"job_title"}},{key:"MIGRATION",get:function(){return"migration"}},{key:"LEGACY_ID",get:function(){return"legacy_id"}},{key:"MIXPANEL_ID",get:function(){return"mixpanel_id"}},{key:"SESSION_VIEW_SHOW_WORK",get:function(){return"session_view_show_work"}},{key:"SHOW_FILL_IN_THE_BLANK_INTRO",get:function(){return"show_fill_in_the_blank_intro"}},{key:"SHOW_MULTIPLE_CHOICE_INTRO",get:function(){return"show_mc_intro"}},{key:"HELP_DIALOGS_VIEWED",get:function(){return"help_dialogs_viewed"}},{key:"LAST_VIEWED_LATEST_FEATURES",get:function(){return"last_viewed_latest_features"}},{key:"SHOW_SESSION_REFACTOR_DIALOG",get:function(){return"show_session_refactor_dialog"}},{key:"ASSIGNMENTS_LIMIT",get:function(){return"assignments_limit"}},{key:"MIGRATION_VALUES",get:function(){return{COMPLETE:"complete",ERROR:"error",WORKING:"working"}}},{key:"PREFIX_OPTIONS",get:function(){return["Ms.","Mrs.","Mr.","Mx.","Miss","Coach","Prof.","Dr."]}},{key:"SUBJECT_OPTIONS",get:function(){return["Math","ELA","Science","Social Studies","Foreign Language"]}},{key:"STUDENT_AGE_OPTIONS",get:function(){return["0-6","6-9","9-12","12-15","15-18","18+"]}},{key:"JOB_TITLE_OPTIONS",get:function(){return["Teacher","Administrator","Coach","Parent","Social Worker","Tutor","Other"]}},{key:"REFERRAL_OPTIONS",get:function(){return["A Colleague","My Administration","PD / Training","Social Media","The Internet"]}},{key:"COUNTRY_OPTIONS",get:function(){return["United States of America (USA)","United Kingdom (UK)","Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic (CAR)","Chad","Chile","China","Colombia","Comoros","Democratic Republic of the Congo","Republic of the Congo","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar (Burma)","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates (UAE)","Uruguay","Uzbekistan","Vanuatu","Vatican City (Holy See)","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"]}},{key:"STATE_OPTIONS",get:function(){return["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","other"]}}]);return e}();t.UserProperties=l;var u=function(){function e(){r(this,e)}i(e,null,[{key:"TEACHER",get:function(){return"teacher"}},{key:"STUDENT",get:function(){return"student"}},{key:"ADMIN",get:function(){return"admin"}}]);return e}();t.UserRoles=u;var d=function(){function e(t,n,i,s,o,a,c,l,u,d,h){r(this,e);this._id=t;this._username=n;this._email=i;this._firstName=s;this._lastName=o;this._displayName=a;this._created=c?moment(c):void 0;this._properties=l||{};this._roles=u;this._contractMembers=d;this._authTypes=h}i(e,[{key:"_wasCreatedWithin",value:function(e,t){if(this._created){var n=moment().subtract(e,t),i=moment();return this._created.isBetween(n,i)}return!1}},{key:"getHelpDialogViewed",value:function(e){var t=this.helpDialogsViewed;return t&&angular.isDefined(t[e])?t[e]:!1}},{key:"setHelpDialogViewed",value:function(e,t){var n=this.helpDialogsViewed||{};n[e]=t;this.helpDialogsViewed=n}},{key:"_setProperty",value:function(e,t){this._properties[e]=t||null}},{key:"id",get:function(){return this._id}},{key:"username",get:function(){return this._username},set:function(e){this._username=e}},{key:"email",set:function(e){this._email=e},get:function(){return this._email}},{key:"firstName",set:function(e){this._firstName=e||null},get:function(){return this._firstName}},{key:"lastName",set:function(e){this._lastName=e||null},get:function(){return this._lastName}},{key:"displayName",set:function(e){this._displayName=e||null},get:function(){return this._displayName}},{key:"created",get:function(){return this._created}},{key:"isNewUser",get:function(){return this._wasCreatedWithin(30,"days")}},{key:"properties",get:function(){return this._properties}},{key:"contractMembers",get:function(){return this._contractMembers}},{key:"authTypes",get:function(){return this._authTypes}},{key:"isStudent",get:function(){return this._roles.includes(u.STUDENT)}},{key:"isTeacher",get:function(){return this._roles.includes(u.TEACHER)}},{key:"school",get:function(){return this._properties[l.SCHOOL]},set:function(e){this._setProperty(l.SCHOOL,e)}},{key:"country",get:function(){return this._properties[l.COUNTRY]},set:function(e){this._setProperty(l.COUNTRY,e)}},{key:"state",get:function(){return this._properties[l.STATE]},set:function(e){this._setProperty(l.STATE,e)}},{key:"city",get:function(){return this._properties[l.CITY]},set:function(e){this._setProperty(l.CITY,e)}},{key:"jobTitle",get:function(){return this._properties[l.JOB_TITLE]},set:function(e){this._setProperty(l.JOB_TITLE,e)}},{key:"subject",get:function(){return this._properties[l.SUBJECT]},set:function(e){this._setProperty(l.SUBJECT,e)}},{key:"studentAge",get:function(){return this._properties[l.STUDENT_AGE]},set:function(e){this._setProperty(l.STUDENT_AGE,e)}},{key:"referral",get:function(){return this._properties[l.REFERRAL]},set:function(e){this._setProperty(l.REFERRAL,e)}},{key:"migration",get:function(){return this._properties[l.MIGRATION]}},{key:"sessionViewShowWork",get:function(){return!this._properties[l.SESSION_VIEW_SHOW_WORK]||this._properties[l.SESSION_VIEW_SHOW_WORK]===(!0).toString()},set:function(e){this._setProperty(l.SESSION_VIEW_SHOW_WORK,e.toString())}},{key:"showFillInTheBlankIntro",get:function(){return!this._properties[l.SHOW_FILL_IN_THE_BLANK_INTRO]||this._properties[l.SHOW_FILL_IN_THE_BLANK_INTRO]===(!0).toString()},set:function(e){this._setProperty(l.SHOW_FILL_IN_THE_BLANK_INTRO,e.toString())}},{key:"showMultipleChoiceIntro",get:function(){return!this._properties[l.SHOW_MULTIPLE_CHOICE_INTRO]||this._properties[l.SHOW_MULTIPLE_CHOICE_INTRO]===(!0).toString()},set:function(e){this._setProperty(l.SHOW_MULTIPLE_CHOICE_INTRO,e.toString())}},{key:"showSessionRefactorHelpDialog",get:function(){return!this._properties[l.SHOW_SESSION_REFACTOR_DIALOG]||this._properties[l.SHOW_SESSION_REFACTOR_DIALOG]===(!0).toString()},set:function(e){this._setProperty(l.SHOW_SESSION_REFACTOR_DIALOG,e.toString())}},{key:"helpDialogsViewed",get:function(){var e=this._properties[l.HELP_DIALOGS_VIEWED];return e&&angular.fromJson(e)},set:function(e){this._setProperty(l.HELP_DIALOGS_VIEWED,angular.toJson(e))}},{key:"lastViewedLatestFeatures",get:function(){return this._properties[l.LAST_VIEWED_LATEST_FEATURES]},set:function(e){this._setProperty(l.LAST_VIEWED_LATEST_FEATURES,e)}},{key:"assignmentsLimit",get:function(){return this._properties[l.ASSIGNMENTS_LIMIT]},set:function(e){this._setProperty(l.ASSIGNMENTS_LIMIT,e)}},{key:"name",get:function(){return this._displayName?this._displayName:this._firstName||this._lastName?this.firstLastCombo:this._username?this._username:this._email?this._email:"User"}},{key:"contractName",get:function(){return this.school?this.name+" at "+this.school:this.name}},{key:"firstLastCombo",get:function(){var e=this._firstName||"",t=this._lastName||"",n=e&&t?" ":"";return""+e+n+t}},{key:"login",get:function(){return this._email?this._email:this._username}}],[{key:"DefaultAssignmentsLimit",get:function(){return 20}},{key:"SORT_NAME_ASC",get:function(){return c.SORT_NAME_ASC}},{key:"SORT_NAME_DESC",get:function(){return c.SORT_NAME_DESC}}]);return e}();t["default"]=d},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"combine",value:function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return n.slice(1).reduce(function(t,n){return e._combineTwo(t,n)},n[0])}},{key:"_combineTwo",value:function(e,t){return function(n,i){var r=e.call(null,n,i);return 0===r?t.call(null,n,i):r}}},{key:"NUMERIC_UNDEFINED_ASC",value:function(e,t){return angular.isUndefined(e)&&angular.isNumber(t)?1:angular.isNumber(e)&&angular.isUndefined(t)?-1:angular.isUndefined(e)&&angular.isUndefined(t)?0:t>e?-1:e>t?1:e===t?0:void 0}},{key:"NUMERIC_UNDEFINED_DESC",value:function(e,t){return angular.isUndefined(e)&&angular.isNumber(t)?1:angular.isNumber(e)&&angular.isUndefined(t)?-1:angular.isUndefined(e)&&angular.isUndefined(t)?0:t>e?1:e>t?-1:e===t?0:void 0}},{key:"NAME_ASC",get:function(){return function(e,t){return e.localeCompare(t)}}},{key:"NAME_DESC",get:function(){return function(e,t){return t.localeCompare(e)}}},{key:"SIZE_ASC",get:function(){return function(e,t){return e.size<t.size?1:e.size>t.size?-1:0}}},{key:"SIZE_DESC",get:function(){return function(e,t){return e.size>t.size?1:e.size<t.size?-1:0}}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(188),a=s(o),c=n(201),l=s(c),u=n(202),d=function(){function e(t,n,i,s,o,c,u,d,h,f){r(this,e);this.$q=t;this._cacheService=u;this._feedbackService=f;this._helpRequestManager=new a["default"](i,s,o,d);this._chatMessageManager=new l["default"](n,i,o,c,h)}i(e,[{key:"newHelpRequest_Help",value:function(){var e=this;return this._helpRequestManager.newHelpRequest_Help().then(function(){return e.currentUser}).then(function(t){return e.chatMessageManager.send(u.ChatMessageTypes.HELP,t.id,t.name)})}},{key:"newHelpRequest_Check",value:function(){var e=this;return this._helpRequestManager.newHelpRequest_Check().then(function(){return e.currentUser}).then(function(t){return e.chatMessageManager.send(u.ChatMessageTypes.CHECK,t.id,t.name)})}},{key:"lowerHelpRequest",value:function(){var e=this;return this._helpRequestManager.lowerHelpRequest().then(function(){return e.currentUser}).then(function(t){e.chatMessageManager.send(u.ChatMessageTypes.HAND_DOWN,t.id,t.name)})}},{key:"sendMessage",value:function(e){var t=this;return e?this.currentUser.then(function(n){return t.$q.all([t.chatMessageManager.send(u.ChatMessageTypes.MESSAGE,n.id,n.name,e),t._handleHelpRequestOnMessage(n),t._handleFeedbackNotificationOnMessage(n.id,n.name),t.chatMessageManager.markRead()])}):this.$q.resolve([])}},{key:"_handleHelpRequestOnMessage",value:function(e){var t=this;if(!(this.helpRequestManager.helpeeId!==this.helpRequestManager.currentUserId||this.helpRequestManager.isHelpRequestHelp||this.helpRequestManager.isHelpRequestCheck||this.helpRequestManager.isHelpRequestChat||this.helpRequestManager.isLoadingForHelp||this.helpRequestManager.isLoadingForCheck))return this.helpRequestManager.newHelpRequest_Chat();if(this.helpRequestManager.helpeeId===this.helpRequestManager.currentUserId||!this.helpRequestManager.hasHelpRequest)return this.$q.resolve();var n=function(){var n=t.helpRequestManager.isHelpRequestChat;return{v:t.helpRequestManager.resolve().then(function(){return n?t.$q.resolve():t.chatMessageManager.send(u.ChatMessageTypes.HAND_DOWN,e.id,e.name)})}}();return"object"==typeof n?n.v:void 0}},{key:"_handleFeedbackNotificationOnMessage",value:function(e,t){return this.helpRequestManager.helpeeId!==this.helpRequestManager.currentUserId?this.$q.all([this._feedbackService.give(this.helpRequestManager.helpeeId,this.helpRequestManager.assignmentWork,this.helpRequestManager.questionId,e,t)]):this.$q.resolve()}},{key:"reset",value:function(){this._helpRequestManager.reset();this._chatMessageManager.reset()}},{key:"helpRequestManager",get:function(){return this._helpRequestManager}},{key:"chatMessageManager",get:function(){return this._chatMessageManager}},{key:"currentUser",get:function(){return this._cacheService.getUser(!1)}},{key:"hasUnreadMessages",get:function(){return this.chatMessageManager.hasUnreadMessages(this.helpRequestManager.currentUserId)}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(189),a=n(191),c=s(a),l=n(156),u=function(){function e(){r(this,e)}i(e,null,[{key:"CHECK",get:function(){return"status_check_request"}},{key:"HELP",get:function(){return"status_help_request"}},{key:"CHAT",get:function(){return"status_chat_request"}},{key:"NO_REQUEST",get:function(){return"status_no_request"}},{key:"LOADING",get:function(){return"status_loading_request"}}]);return e}();t.HelpRequestStatusCodes=u;var d=function(){function e(t,n,i,s){r(this,e);this._toolbarService=t;this._helpRequestService=n;this._authService=i;this._storageService=s;this.reset()}i(e,[{key:"reset",value:function(){this._parentHelpRequestSet=void 0;this._helpRequestSet=void 0;this._loadingFor=void 0;this._anonAnimalNameForHelpee=void 0}},{key:"_init",value:function(e){this._loadingFor=void 0;this._anonAnimalNameForHelpee=void 0;if(e){this._helpRequestSet=e.createChild(c["default"].FILTER_FUNC_HELPEE_QUESTION_UNRESOLVED(this.helpeeId,this.questionId));this._helpRequestSet.start()}}},{key:"newHelpRequest_Help",value:function(){this._loadingFor=u.HELP;this._notifyHelpRequest(l.Notifications.HELP_REQUEST);return this._createHelpRequest(o.HelpRequestTypes.HELP)}},{key:"newHelpRequest_Check",value:function(){this._loadingFor=u.CHECK;this._notifyHelpRequest(l.Notifications.CHECK_REQUEST);return this._createHelpRequest(o.HelpRequestTypes.CHECK)}},{key:"newHelpRequest_Chat",value:function(){this._notifyHelpRequest(l.Notifications.CHAT_REQUEST);return this._createHelpRequest(o.HelpRequestTypes.CHAT)}},{key:"lowerHelpRequest",value:function(){return this.helpeeId===this.currentUserId?this.lowerHelpRequest_Cancel():this.lowerHelpRequest_Resolve()}},{key:"lowerHelpRequest_Resolve",value:function(){var e=this;this._loadingFor=u.NO_REQUEST;this._notifyHelpRequest(l.Notifications.RESOLVE_REQUEST);return this.resolve().then(function(){e._loadingFor=void 0})}},{key:"resolve",value:function(){var e=this,t=this.currentHelpRequest;return this._helpRequestService.resolve(t.id).then(function(){e._helpRequestSet.localResolve(t)})}},{key:"lowerHelpRequest_Cancel",value:function(){var e=this;this._loadingFor=u.NO_REQUEST;this._notifyHelpRequest(l.Notifications.CANCEL_REQUEST);var t=this.currentHelpRequest;return this._helpRequestService.cancel(t.id).then(function(){e._helpRequestSet.localCancel(t);e._loadingFor=void 0})}},{key:"_createHelpRequest",value:function(e){var t=this;return this._helpRequestService.create(this.rosterId,this.assignmentId,this.questionId,e).then(function(e){if(t._helpRequestSet){t._helpRequestSet.localAdd(e);t._loadingFor=void 0}})}},{key:"_notifyHelpRequest",value:function(e){this._toolbarService.notify(e,{questionId:this.questionId,needsFocusedElement:!0},!1)}},{key:"loading",get:function(){return!this._helpRequestSet||!!this._loadingFor}},{key:"isLoadingForCheck",get:function(){return this._loadingFor===u.CHECK}},{key:"isLoadingForHelp",get:function(){return this._loadingFor===u.HELP}},{key:"parentHelpRequestSet",set:function(e){this._parentHelpRequestSet&&this._parentHelpRequestSet===e||(this._parentHelpRequestSet=e);this._init(this._parentHelpRequestSet)}},{key:"helpRequestSet",get:function(){return this._helpRequestSet},set:function(e){this._helpRequestSet=e}},{key:"currentHelpRequest",get:function(){return this._helpRequestSet&&this._helpRequestSet.requests[0]}},{key:"anonAnimalNameForHelpee",get:function(){if(!this._anonAnimalNameForHelpee){var e=this._storageService.feedbackHelpRequest;this._anonAnimalNameForHelpee=e&&e.anonAnimalNameForHelpee}return this._anonAnimalNameForHelpee}},{key:"status",get:function(){if(this.loading)return u.LOADING;var e=this.currentHelpRequest;return e?e.requestType===o.HelpRequestTypes.HELP?u.HELP:e.requestType===o.HelpRequestTypes.CHECK?u.CHECK:e.requestType===o.HelpRequestTypes.CHAT?u.CHAT:void 0:u.NO_REQUEST}},{key:"isHelpRequestLoading",get:function(){return this.status===u.LOADING}},{key:"isHelpRequestCheck",get:function(){return this.status===u.CHECK}},{key:"isHelpRequestHelp",get:function(){return this.status===u.HELP}},{key:"isHelpRequestChat",get:function(){return this.status===u.CHAT}},{key:"hasHelpRequest",get:function(){return this.isHelpRequestHelp||this.isHelpRequestCheck||this.isHelpRequestChat}},{key:"currentUserId",get:function(){return this._authService.currentUserId}},{key:"helpeeId",get:function(){return this.assignmentWork&&this.assignmentWork.ownerId}},{key:"assignmentWork",get:function(){return this._toolbarService.target}},{key:"assignment",get:function(){return this.assignmentWork.assignment}},{key:"questionId",get:function(){return this._toolbarService.contentQuestion.id}},{key:"rosterId",get:function(){return this.assignmentWork.rosterId}},{key:"assignmentId",get:function(){return this.assignment.id}}]);return e}();t["default"]=d},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(190),a=s(o),c=function(){function e(){r(this,e)}i(e,null,[{key:"CHECK",get:function(){return"check"}},{key:"HELP",get:function(){return"help"}},{key:"CHAT",get:function(){return"chat"}
},{key:"ALL",get:function(){return[e.HELP,e.CHECK,e.CHAT]}}]);return e}();t.HelpRequestTypes=c;var l=function(){function e(t,n,i,s,o,a,c,l,u,d){r(this,e);this._id=t;this._helpeeId=n;this._rosterId=i;this._assignmentId=s;this._questionId=o;this._requestType=a;this._created=c?moment(c):void 0;this._resolved=l?moment(l):void 0;this._helperId=u;this._helperRole=d;this._animalName=null}i(e,[{key:"id",get:function(){return this._id}},{key:"helpeeId",get:function(){return this._helpeeId}},{key:"rosterId",get:function(){return this._rosterId}},{key:"assignmentId",get:function(){return this._assignmentId}},{key:"questionId",get:function(){return this._questionId}},{key:"requestType",get:function(){return this._requestType}},{key:"isHelp",get:function(){return this.requestType===c.HELP}},{key:"isCheck",get:function(){return this.requestType===c.CHECK}},{key:"isChat",get:function(){return this.requestType===c.CHAT}},{key:"created",get:function(){return this._created}},{key:"resolved",get:function(){return this._resolved},set:function(e){this._resolved=e}},{key:"helperId",get:function(){return this._helperId}},{key:"helperRole",get:function(){return this._helperRole}},{key:"animalName",get:function(){this._animalName||(this._animalName=a["default"].generate(this._id));return this._animalName}},{key:"anonAnimalNameForHelpee",get:function(){var e=this.animalName;return e&&e.display}},{key:"anonAnimalFileName",get:function(){var e=this.animalName;return e&&e.file}}]);return e}();t["default"]=l},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i,s){r(this,e);this._name=t;this._description=n;this._display=this._description+" "+this._name;this._displayWithoutArticle=this._display.split(" ").slice(1).join(" ");this._partialFileName=i;this._color=s}i(e,[{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"display",get:function(){return this._display}},{key:"displayWithoutArticle",get:function(){return this._displayWithoutArticle}},{key:"partialFileName",get:function(){return this._partialFileName}},{key:"color",get:function(){return this._color}},{key:"file",get:function(){return this._partialFileName+"-"+this._color}}]);return e}();t.AnimalName=o;var a=void 0,c=void 0,l=void 0,u=[{name:"Bear",file:"bear"},{name:"Bookworm",file:"bookworm"},{name:"Bird",file:"chicken"},{name:"Dog",file:"dog"},{name:"Pig",file:"pig"},{name:"Rabbit",file:"rabbit"},{name:"Robot",file:"robot"},{name:"Giraffe",file:"giraffe"},{name:"Panda"},{name:"Cat"},{name:"Duck"},{name:"Fish"},{name:"Llama"},{name:"Salamander"},{name:"Elephant"},{name:"Dinosaur"},{name:"Tiger"},{name:"Monkey"},{name:"Dolphin"},{name:"Otter"}],d=function(){function e(){r(this,e)}i(e,null,[{key:"generate",value:function(t){var n=e.hashFunc(t,e.combinations.length);return e.combinations[n]}},{key:"generateForHelper",value:function(t){var n=e.hashFunc(t,e.combinationsForHelper.length);return e.combinationsForHelper[n]}},{key:"generateForHelperWithoutColors",value:function(t){var n=e.hashFunc(t,e.combinationsForHelperWithoutColors.length);return e.combinationsForHelperWithoutColors[n]}},{key:"makeCombinations",value:function(t){return e.namesWithFiles.reduce(function(e,n){var i=n.name[0];return e.concat(t[i].map(function(e){return s({},n,{description:e})}))},[]).reduce(function(t,n){return t.concat(e.colors.map(function(e){return s({},n,{color:e})}))},[]).map(function(e){return new o(e.name,e.description,e.file,e.color)})}},{key:"makeCombinationsWithoutColors",value:function(t){return e.names.reduce(function(e,n){var i=n.name[0];return e.concat(t[i].map(function(e){return s({},n,{description:e})}))},[]).map(function(e){return new o(e.name,e.description,e.file,e.color)})}},{key:"hashFunc",value:function(e,t){var n=0,i=void 0,r=void 0,s=void 0;if(0===e.length)return n;for(i=0,s=e.length;s>i;i++){r=e.charCodeAt(i);n=(n<<5)-n+r;n|=0}return Math.abs(n)%t}},{key:"namesWithFiles",get:function(){return u.filter(function(e){return e.file})}},{key:"names",get:function(){return u}},{key:"descriptions",get:function(){return{B:["A Brave","A Bold","A Beaming","A Brainy","A Broadminded","A Budding"],C:["A Creative","A Candid","A Clever","A Curious"],D:["A Daring","A Determined","A Decisive","A Devoted","A Dazzling","A Diligent"],E:["An Earnest","An Eager","An Energetic"],F:["A Friendly","A Fearless","A Focused"],G:["A Jazzy","A Jovial"],L:["A Loving","A Learning","A Logical"],M:["A Majestic","A Masterful","A Methodical","A Motivated"],O:["An Overjoyed","An Optimistic","Open-Minded"],P:["A Peppy","A Proud","A Passionate","A Persistent","A Plucky","A Poised"],R:["A Rational","A Resolute","A Radiant","A Reflective","A Regal","A Revered"],S:["A Savvy","A Selfless","A Sage"],T:["A Terrific","A Teachable","A Tireless","A Trailblazing"]}}},{key:"colors",get:function(){return["green","purple","orange","blue","red","yellow"]}},{key:"combinations",get:function(){a||(a=e.makeCombinations(e.descriptions));return a}},{key:"combinationsForHelper",get:function(){c||(c=e.makeCombinations(e.descriptions));return c}},{key:"combinationsForHelperWithoutColors",get:function(){l||(l=e.makeCombinationsWithoutColors(e.descriptions));return l}}]);return e}();t["default"]=d},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(147),u=c(l),d=n(192),h=function(e){function t(e,n,r,s){var c=this;o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._filterFunc=r||t.FILTER_FUNC_ALL;this._indexFunc=s||t.INDEX_FUNC_ID;this._requests=e.filter(this._filterFunc);this._requestIndex=new a(this._requests.map(function(e){return[c._indexFunc(e),e]}));this._created=new u["default"](this);this._resolved=new u["default"](this);this._canceled=new u["default"](this);this._helpRequestUpdateNotifier=n;if(this._helpRequestUpdateNotifier){this._helpRequestUpdateNotifier.created.subscribe(function(e){return c._handleCreated(e)});this._helpRequestUpdateNotifier.resolved.subscribe(function(e){return c._handleResolved(e)});this._helpRequestUpdateNotifier.canceled.subscribe(function(e){return c._handleCanceled(e)})}}r(t,e);s(t,[{key:"start",value:function(){return this._helpRequestUpdateNotifier?this._helpRequestUpdateNotifier.start():void 0}},{key:"stop",value:function(){return this._helpRequestUpdateNotifier?this._helpRequestUpdateNotifier.stop():void 0}},{key:"get",value:function(e){return this._requestIndex.get(e)}},{key:"filter",value:function(e){return this.requests.filter(e)}},{key:"createChild",value:function(e,n){return new t(this.requests,this,e,n)}},{key:"indexFor",value:function(e){return this._indexFunc(e)}},{key:"shouldContain",value:function(e){return this._filterFunc(e)}},{key:"isPresent",value:function(e){return!!this._requests.find(function(t){return t.id===e.id})}},{key:"localAdd",value:function(e){this._handleCreated(e)}},{key:"localCancel",value:function(e){this._handleCanceled(e)}},{key:"localResolve",value:function(e){this._handleResolved(e)}},{key:"_handleCreated",value:function(e){if(this.shouldContain(e)&&!this.isPresent(e)){this._add(e);this._created.raise(e)}}},{key:"_handleResolved",value:function(e){var t=this._findIndex(e);if(t>-1){this.shouldContain(e)?this._updateAt(t,e):this._removeAt(t);this._resolved.raise(e)}else if(this.shouldContain(e)){this._add(e);this._resolved.raise(e)}}},{key:"_handleCanceled",value:function(e){var t=this._findIndex(e);if(t>-1){var n=this._removeAt(t);this._canceled.raise(n)}}},{key:"_removeAt",value:function(e){var t=this._requests[e];this._requests.splice(e,1);this._requestIndex["delete"](this.indexFor(t));return t}},{key:"_add",value:function(e){this._requests.push(e);this._requestIndex.set(this.indexFor(e),e)}},{key:"_updateAt",value:function(e,t){var n=this._requests[e];this._requests[e]=t;this._requestIndex["delete"](this.indexFor(n));this._requestIndex.set(this.indexFor(t),t)}},{key:"_findIndex",value:function(e){return this._requests.findIndex(function(t){return t.id===e.id})}},{key:"notifier",get:function(){return this._helpRequestUpdateNotifier}},{key:"created",get:function(){return this._created}},{key:"resolved",get:function(){return this._resolved}},{key:"canceled",get:function(){return this._canceled}},{key:"requests",get:function(){return this._requests}},{key:"size",get:function(){return this._requests.length}},{key:"total",get:function(){return this.size}}],[{key:"_INDEX_HELPEE_QUESTION",value:function(e,t){return""+e+t}},{key:"FILTER_FUNC_STUDENT_UNRESOLVED",value:function(e){return function(t){return t.helpeeId!==e&&angular.isUndefined(t.resolved)}}},{key:"FILTER_FUNC_HELPEE_QUESTION_UNRESOLVED",value:function(e,t){return function(n){return angular.isUndefined(n.resolved)&&n.helpeeId===e&&n.questionId===t}}},{key:"FILTER_FUNC_TYPES_UNRESOLVED",value:function(e){return function(t){return angular.isUndefined(t.resolved)&&e.some(function(e){return e===t.requestType})}}},{key:"combine",value:function(e,n,i){return new t(e.map(function(e){return e.requests}).reduce(function(e,t){return e.concat(t)},[]),new d.MultiHelpRequestUpdateNotifier(e),n||t.FILTER_FUNC_ALL,i||t.INDEX_FUNC_ID)}},{key:"FILTER_FUNC_ALL",get:function(){return function(){return!0}}},{key:"FILTER_FUNC_UNRESOLVED",get:function(){return function(e){return!e.resolved}}},{key:"INDEX_FUNC_ID",get:function(){return function(e){return e.id}}},{key:"INDEX_FUNC_HELPEE_QUESTION",get:function(){return function(e){return t._INDEX_HELPEE_QUESTION(e.helpeeId,e.questionId)}}}]);return t}(d.HelpRequestUpdateNotifier);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(200),d=(a(u),n(147)),h=a(d),f=n(189),g=a(f),p=function(){function e(){r(this,e)}i(e,[{key:"start",value:function(){throw new Error("not implemented")}},{key:"stop",value:function(){throw new Error("not implemented")}},{key:"created",get:function(){throw new Error("not implemented")}},{key:"resolved",get:function(){throw new Error("not implemented")}},{key:"canceled",get:function(){throw new Error("not implemented")}}]);return e}();t.HelpRequestUpdateNotifier=p;var m=function(e){function t(e){var n=this;r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._notifications=e;this._created=new h["default"](this);this._resolved=new h["default"](this);this._canceled=new h["default"](this);this._notifications.forEach(function(e){e.created.subscribe(n.created.raise,n.created);e.resolved.subscribe(n.resolved.raise,n.resolved);e.canceled.subscribe(n.canceled.raise,n.canceled)})}o(t,e);i(t,[{key:"start",value:function(){this._notifications.forEach(function(e){e.start()})}},{key:"stop",value:function(){this._notifications.forEach(function(e){e.stop()})}},{key:"destroy",value:function(){var e=this;this._notifications.forEach(function(t){t.created.unsubscribe(e.created.raise,e.created);t.resolved.unsubscribe(e.resolved.raise,e.resolved);t.canceled.unsubscribe(e.canceled.raise,e.canceled)})}},{key:"created",get:function(){return this._created}},{key:"resolved",get:function(){return this._resolved}},{key:"canceled",get:function(){return this._canceled}}]);return t}(p);t.MultiHelpRequestUpdateNotifier=m;var v=function(e){function t(e,n,i,o){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,n,i,o,"HelpRequestNotification");this._helpRequestService=null;this._created=new h["default"](this);this._resolved=new h["default"](this);this._canceled=new h["default"](this);this._value=null;this._logTrace("cstr complete")}o(t,e);i(t,[{key:"_changed",value:function(e){var n=this;if(e){var i=new g["default"](e.help_request_id,e.helpee_id,null,null,e.question_id,e.request_type);this._logTrace("_changed value="+angular.toJson(e));e.change===t.CANCELED?this._canceled.raise(i):this._helpRequestService?this._helpRequestService.get(e.help_request_id).then(function(i){e.change===t.CREATED?n._created.raise(i):e.change===t.RESOLVED&&n._resolved.raise(i)}):e.change===t.CREATED?this._created.raise(i):e.change===t.RESOLVED&&this._resolved.raise(i)}}},{key:"helpRequestService",set:function(e){this._helpRequestService=e}},{key:"created",get:function(){return this._created}},{key:"resolved",get:function(){return this._resolved}},{key:"canceled",get:function(){return this._canceled}}],[{key:"forAssignment",value:function(e,n,i,r){return new t(e,"assignments/"+n+"/help_requests",i,r)}},{key:"forRoster",value:function(e,n,i,r){return new t(e,"rosters/"+n+"/help_requests",i,r)}},{key:"forPeers",value:function(e,n,i,r,s){return new t(e,"assignments/"+n+"/help_requests_peers/rosters/"+i,r,s)}},{key:"CREATED",get:function(){return"created"}},{key:"RESOLVED",get:function(){return"resolved"}},{key:"CANCELED",get:function(){return"canceled"}}]);return t}(l["default"]);t["default"]=v},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(194),u=c(l),d=n(196),h=c(d),f=n(197),g=c(f),p=n(199),m=c(p),v=new h["default"]("/notifications/v1/{url}",{update:new g["default"]("",function(){return!0},function(e){return e._value},function(e,t){e._value=t},new m["default"],function(e,t){e._onChanged(t)})}),_=new h["default"]("/notifications/v2/{url}",{update:new g["default"]("",function(){return!0},function(e){return e._value},function(e,t){e._value=t},new m["default"],function(e,t){e._onChanged(t)})}),y=new h["default"]("/notifications/v3/{url}",{update:new g["default"]("",function(){return!0},function(e){return e._value},function(e,t){e._value=t},new m["default"],function(e,t){e._onChanged(t)})}),k=function(e){function t(e,n,r,s){var c=arguments.length<=4||void 0===arguments[4]?!0:arguments[4],l=arguments.length<=5||void 0===arguments[5]?"":arguments[5];o(this,t);var u=s.firebaseNotificationInstanceIdForShardKey(n);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(new a).set("url",r),t.getMapping(e),u,s,void 0,!0,l+"[instance="+u+", "+n+", url="+r+"]");this._showNotification=c;this._initialValue=void 0}r(t,e);s(t,[{key:"start",value:function(){var e=this;this._logTrace("start");this.firebase.loadOnce().then(function(){i(Object.getPrototypeOf(t.prototype),"start",e).call(e)})}},{key:"_onChanged",value:function(e){this._raiseNotification(e)&&this._changed(e)}},{key:"_raiseNotification",value:function(e){if(angular.isUndefined(this._initialValue)){this._initialValue=e;return!1}(this._showNotification||!angular.equals(e,this._initialValue))&&(this._showNotification=!0);return this._showNotification}}],[{key:"getMapping",value:function(e){if(e===t.V1)return v;if(e===t.V2)return _;if(e===t.V3)return y;throw new Error(e+" is an invalid api version")}},{key:"V1",get:function(){return"v1"}},{key:"V2",get:function(){return"v2"}},{key:"V3",get:function(){return"v3"}}]);return t}(u["default"]);t["default"]=k;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(195),a=s(o),c=function(){function e(t,n,i,s){var o=arguments.length<=4||void 0===arguments[4]?!0:arguments[4],a=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],c=arguments.length<=6||void 0===arguments[6]?"":arguments[6];r(this,e);this._ids=t;this._mapping=n;this._firebaseInstanceId=i;this._firebaseService=s;this._listen=o;this._triggerApply=a;this._started=!1;this._traceTag=c;this._firebase=null}i(e,[{key:"start",value:function(){if(!this._started){this.firebase.start();this._started=!0}return this}},{key:"stop",value:function(){this.firebase.stop();this._started=!1;return this}},{key:"loadOnce",value:function(){this.start();return this.firebase.loadOnce()}},{key:"_logTrace",value:function(e){this._firebaseService.logTrace(this._traceTag,e)}},{key:"mapping",get:function(){return this.firebase.mapping}},{key:"ids",get:function(){return this._ids}},{key:"firebaseInstanceId",get:function(){return this._firebaseInstanceId}},{key:"firebase",get:function(){this._firebase=this._firebase||new a["default"](this._firebaseInstanceId,this._firebaseService,this,this._mapping,this._triggerApply,this._traceTag);return this._firebase}},{key:"firebaseService",get:function(){return this._firebaseService}}],[{key:"defaultListenIndicator",value:function(e){return e._listen}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i,o){var a=this,c=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],l=arguments.length<=5||void 0===arguments[5]?"":arguments[5];r(this,e);if(angular.isUndefined(n))throw new Error("FirebaseService must be defined");if(angular.isUndefined(i))throw new Error("instance must be defined");if(angular.isUndefined(o))throw new Error("mapping must be defined");this._firebaseInstanceId=t;this._firebaseService=n;this._instance=i;this._mapping=o;this._apply=c;this._traceTag=l;this._firebaseRefs=new s;this._hasRead=!1;this._mapping.urlTemplateToPropertyMap.forEach(function(e){var t=a._mapping.fullUrlForProperty(a._instance,e),n=a._firebaseService.ref(t,a._firebaseInstanceId);a._firebaseRefs.set(t,n)})}i(e,[{key:"start",value:function(){var e=this;this._logTrace("FirebaseConnection.start");this._mapping.urlTemplateToPropertyMap.forEach(function(t){var n=e._mapping.fullUrlForProperty(e._instance,t),i=e._firebaseRefs.get(n);if(t.connectIndicator(e._instance))if(t.isCollection){i.on("child_added",e.onChildAdded,e);i.on("child_removed",e.onChildRemoved,e);i.on("child_changed",e.onChildChanged,e)}else i.on("value",e.onValueChanged,e)})}},{key:"stop",value:function(){var e=this;this._logTrace("FirebaseConnection.stop");this._firebaseRefs.forEach(function(t){t.off("child_added",e.onChildAdded,e);t.off("child_removed",e.onChildRemoved,e);t.off("child_changed",e.onChildChanged,e);t.off("value",e.onValueChanged,e)})}},{key:"loadOnce",value:function(){var e=this;this._logTrace("FirebaseConnection.loadOnce");var t={};this._mapping.urlTemplateToPropertyMap.forEach(function(n){var i=e._mapping.fullUrlForProperty(e._instance,n);if(!i)throw new Error("FirebaseConnection reference must be different than the base reference");var r=e._firebaseService.ref(i,e._firebaseInstanceId);n.isCollection?t[i]=r.parent().once("value").then(function(t){t.forEach(function(t){n._onAdded(e._instance,n.codec.decode(t.val(),t.key))})}):t[i]=r.once("value").then(function(t){var i=n.codec.decode(t.val(),t.key);n._set(e._instance,i);return i})});return this._firebaseService.$q.all(t)}},{key:"firebaseForProperty",value:function(e){return this._firebaseRefs.get(this._mapping.fullUrlForProperty(this._instance,e))}},{key:"setValue",value:function(e,t){this._logTrace("FirebaseConnection.setValue property: "+angular.toJson(e)+", value: "+angular.toJson(t));var n=this.firebaseForProperty(e);n.set(e.codec.encode(t),this.logError)}},{key:"removeValue",value:function(e){this._logTrace("FirebaseConnection.removeValue property: "+angular.toJson(e));var t=this.firebaseForProperty(e);t.remove(this.logError)}},{key:"createChild",value:function(e,t){this._logTrace("FirebaseConnection.createChild property: "+angular.toJson(e));var n=this.firebaseForProperty(e);n.push(e.codec.encode(t),this.logError)}},{key:"removeChild",value:function(e,t){this._logTrace("FirebaseConnection.removeChild property: "+angular.toJson(e));var n=this.firebaseForProperty(e);return n.child(t.id).remove(this.logError)}},{key:"upsertChild",value:function(e,t){this._logTrace("FirebaseConnection.upsertChild property: "+angular.toJson(e));var n=this.firebaseForProperty(e);return n.child(t.id).set(e.codec.encode(t),this.logError)}},{key:"propertyForSnapshot",value:function(e,t){var n=this._firebaseService.attachExtras(e.ref,this._firebaseService.instanceIdToUrl(this._firebaseInstanceId));t&&(n=n.$parent());var i=decodeURIComponent(n.$uri());return this._mapping.propertyForFullUrl(this._instance,i)}},{key:"onValueChanged",value:function(e){this._hasRead||(this._hasRead=!0);var t=this.propertyForSnapshot(e);this._logTrace("FirebaseConnection.onValueChanged val: "+angular.toJson(e.val())+", key: "+angular.toJson(e.key));t._set(this._instance,t.codec.decode(e.val(),e.key));this.apply()}},{key:"onChildAdded",value:function(e,t){this._hasRead||(this._hasRead=!0);var n=this.propertyForSnapshot(e,!0);this._logTrace("FirebaseConnection.onChildAdded: "+angular.toJson(e));n._onAdded(this._instance,n.codec.decode(e.val(),e.key),t);this.apply()}},{key:"onChildRemoved",value:function(e){this._hasRead||(this._hasRead=!0);var t=this.propertyForSnapshot(e,!0);this._logTrace("FirebaseConnection.onChildRemoved: "+angular.toJson(e));t._onRemoved(this._instance,t.codec.decode(e.val(),e.key));this.apply()}},{key:"onChildChanged",value:function(e,t){var n=this.propertyForSnapshot(e,!0);this._logTrace("FirebaseConnection.onChildChanged: "+angular.toJson(e));n._onChanged(this._instance,n.codec.decode(e.val(),e.key),t);this.apply()}},{key:"apply",value:function(){this._apply&&this._firebaseService.triggerApply()}},{key:"onDisconnectSet",value:function(e,t){var n=this.firebaseForProperty(e);n.onDisconnect().cancel();n.onDisconnect().set(t)}},{key:"onDisconnectRemove",value:function(e){var t=this.firebaseForProperty(e);t.onDisconnect().cancel();t.onDisconnect().remove()}},{key:"logError",value:function(e){!!e&&console.log(e)}},{key:"_logTrace",value:function(e){this._firebaseService.logTrace(this._traceTag,e)}},{key:"mapping",get:function(){return this._mapping}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n){var i=this;r(this,e);this._uriBase=t;this._urlTemplateToPropertyMap=new s;this._propertyToUrlTemplateMap=new s;this._properties=n;angular.forEach(n,function(e){var t=i.uriBase+e.uriTemplate;i.urlTemplateToPropertyMap.set(t,e);i.propertyToUrlTemplateMap.set(e,t)})}i(e,[{key:"fullUrlForProperty",value:function(e,t){return this.fullUrlFromTemplate(e,this.propertyToUrlTemplateMap.get(t))}},{key:"propertyForFullUrl",value:function(e,t){return this.urlTemplateToPropertyMap.get(this.urlTemplateFromFull(e,t))}},{key:"urlTemplateFromFull",value:function(e,t){var n=t,i=e.ids;i.forEach(function(e,t){var i="{0}".replace("0",t);n=n.replace(new RegExp(e,"g"),i)});return n}},{key:"fullUrlFromTemplate",value:function(e,t){var n=t,i=e.ids;i.forEach(function(e,t){var i="{0}".replace("0",t);n=n.replace(new RegExp(i,"g"),e)});return n}},{key:"properties",get:function(){return this._properties}},{key:"uriBase",get:function(){return this._uriBase}},{key:"urlTemplateToPropertyMap",get:function(){return this._urlTemplateToPropertyMap}},{key:"propertyToUrlTemplateMap",get:function(){return this._propertyToUrlTemplateMap}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(198),l=a(c),u=function(e){function t(e,n,r,s,a,c){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,a);this._getter=r;this._setter=s;this._onChange=c}r(t,e);s(t,[{key:"get",value:function(e){return this._getter(e)}},{key:"_set",value:function(e,t){this._setter(e,t);this._onChange&&this._onChange(e,t)}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(199),a=s(o),c=function(){function e(t,n,i){r(this,e);this._uriTemplate=t;this._connectIndicator=n;this._codec=i;this._codec||(this._codec=new a["default"])}i(e,[{key:"codec",get:function(){return this._codec}},{key:"uriTemplate",get:function(){return this._uriTemplate}},{key:"connectIndicator",get:function(){return this._connectIndicator}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){var t=angular.fromJson(angular.toJson(e));t&&delete t.id;return t}},{key:"decode",value:function(e,t){var n=angular.fromJson(angular.toJson(e));angular.isObject(n)&&(n.id=t);return n}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n){r(this,e);this._name=t;this._value=n}i(e,[{key:"toString",value:function(){return this._name+"="+(angular.isUndefined(this._value)?"undefined":this._value)}},{key:"name",get:function(){return this._name}},{key:"value",get:function(){return this._value}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(133)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(202),u=c(l),d=n(203),h=c(d),f=n(117),g=c(f),p=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._ctrl=e}r(t,e);s(t,[{key:"onAdded",value:function(e){this._ctrl.isNew(e.timestamp)&&this._ctrl.showHelpCenter&&this._ctrl.markRead()}},{key:"onChanged",value:function(){}},{key:"onRemoved",value:function(){}}]);return t}(g["default"]),m=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.$timeout=e}r(t,e);s(t,[{key:"onAdded",value:function(){this.$timeout(function(){})}},{key:"onChanged",value:function(){this.$timeout(function(){})}},{key:"onRemoved",value:function(){}}]);return t}(g["default"]),v=function(){function e(t,n,i,r,s){o(this,e);this.$timeout=t;this._toolbarService=n;this._authService=i;this._firebaseService=r;this._mixpanelService=s;this._messages=void 0;this._firstMessage=void 0}s(e,[{key:"reset",value:function(){this._firstMessage=!0}},{key:"_init",value:function(e){this.reset();if(this._messages){this._messages.messagesRead.unsubscribe(this._messagesReadObserver);this._messages.messages.unsubscribe(this._messageObserver)}e();if(this._messages){this._messagesReadObserver=new m(this.$timeout);this._messages.messagesRead.subscribe(this._messagesReadObserver);this._messageObserver=new p(this);this._messages.messages.subscribe(this._messageObserver);this._messages.start()}}},{key:"send",value:function(e,t,n){var i=this,r=arguments.length<=3||void 0===arguments[3]?"":arguments[3],s=new u["default"](this._firebaseService.newId(),e,t,n,r,moment());return this._messages.save(s).then(function(){e===l.ChatMessageTypes.MESSAGE&&i._sendMixpanelEvent()})}},{key:"_sendMixpanelEvent",value:function(){if(this._firstMessage){this._mixpanelService.chatSent();this._firstMessage=!1}}},{key:"isNew",value:function(e){return this._now&&this._now.isBefore(e)}},{key:"markRead",value:function(){var e=this.lastMessage;if(e){this._now=moment();var t=new h["default"](this.currentUserId,e.id,this._now);return this._messages.markRead(t)}return a.resolve()}},{key:"hasUnreadMessages",value:function(e){var t=this.messagesRead.find(function(t){return t.id===e});if(this.messages&&this.messages.length>0)for(var n=this.messages.length-1;n>=0;n--){var i=this.messages[n];if(t&&i.id===t.messageId)return!1;if(i.type===l.ChatMessageTypes.MESSAGE)return!0}return!1}},{key:"hasChatMessages",get:function(){return this._messages&&this._messages.messages.size>0}},{key:"messages",get:function(){return this._messages?this._messages.messages.map(function(e){return e}):void 0},set:function(e){var t=this;this._init(function(){t._messages=e})}},{key:"messagesRead",get:function(){return this._messages?this._messages.messagesRead.map():[]}},{key:"lastMessage",get:function(){var e=this.messages;return e&&e[e.length-1]}},{key:"showHelpCenter",get:function(){var e=this._toolbarService.sidenavManager;return e.isModeVisible(e.modes.HELP_CENTER)}},{key:"currentUserId",get:function(){return this._authService.currentUserId}}]);return e}();t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"HELP",get:function(){return"help"}},{key:"CHECK",get:function(){return"check"}},{key:"HAND_DOWN",get:function(){return"hand_down"}},{key:"MESSAGE",get:function(){return"message"}},{key:"ALL",get:function(){return[e.HELP,e.CHECK,e.HAND_DOWN,e.MESSAGE]}}]);return e}();t.ChatMessageTypes=s;var o=function(){function e(t,n,i,s,o,a){r(this,e);this._id=t;this._type=n;this._userId=i;this._displayName=s;this._text=o;this._timestamp=a?moment(a):void 0}i(e,[{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"userId",get:function(){return this._userId}},{key:"displayName",get:function(){return this._displayName}},{key:"text",get:function(){return this._text}},{key:"timestamp",get:function(){return this._timestamp}},{key:"isCheck",get:function(){return this.type===s.CHECK}},{key:"isHelp",get:function(){return this.type===s.HELP}},{key:"isHandDown",get:function(){return this.type===s.HAND_DOWN}},{key:"isMessage",get:function(){return this.type===s.MESSAGE}}]);return e}();t["default"]=o},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){r(this,e);this._id=t;this._messageId=n;this._timestamp=angular.isDefined(i)?moment(i):void 0}i(e,[{key:"id",get:function(){return this._id}},{key:"messageId",get:function(){return this._messageId}},{key:"timestamp",get:function(){return this._timestamp}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(121)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(156),c=n(205),l=n(146),u=o(l),d=n(212),h=n(144),f=o(h),g=n(215),p=o(g),m=n(18),v=o(m),_=function(){function e(t,n,i,s,o,a){r(this,e);this.$log=t;this._window=angular.element(n);this._document=angular.element(i);this._hotkeys=s;this._toolbarService=o;this._imageEditService=a;this._elementCodec=new p["default"];this._handleCopyClasskickElementFunc=void 0;this._handlePasteFunc=void 0}i(e,[{key:"init",value:function(e){var t=v["default"].get.isMac?"command+v":"ctrl+v",n=v["default"].get.isMac?"command+c":"ctrl+c",i=v["default"].get.isMac?"command+x":"ctrl+x",r=v["default"].get.isMac?"command+z":"ctrl+z",s=v["default"].get.isMac?"command+shift+z":"ctrl+shift+z";this._hotkeys.bindTo(e).add({combo:t,description:"Paste",callback:this._handleCommandPaste.bind(this)}).add({combo:n,description:"Copy",callback:this._handleCommandCopy.bind(this)}).add({combo:i,description:"Cut",callback:this._handleCommandCut.bind(this)}).add({combo:"backspace",description:"Delete",callback:this._handleDelete.bind(this)}).add({combo:r,description:"Undo",callback:this._handleUndo.bind(this)}).add({combo:s,description:"Redo",callback:this._handleRedo.bind(this)})}},{key:"_handleCommandPaste",value:function(){if(v["default"].get.isSafari)this._toolbarService.toast("Sorry, pasting elements does not work in Safari.");else{this._handlePasteFunc=this._handlePaste.bind(this);
this._document[0].addEventListener("paste",this._handlePasteFunc);this._document[0].execCommand("paste",!1,null)}}},{key:"_handlePaste",value:function(e){if(e.clipboardData&&e.clipboardData.items){var t=s(e.clipboardData.items),n=t.find(function(e){return-1!==e.type.indexOf("image")}),i=t.find(function(e){return"text/classkick"===e.type}),r=t.find(function(e){return"text/plain"===e.type});n?this._pasteImage(n):i?this._pasteClasskickElement(i):r&&this._pastePlainText(r)}e.preventDefault();this._document[0].removeEventListener("paste",this._handlePasteFunc)}},{key:"_pasteImage",value:function(e){var t=this,n=e.getAsFile();n?this._createImageFromBlob(n):e.getAsString(function(e){var n=t._imageEditService.dataURItoBlob(e);t._createImageFromBlob(n)})}},{key:"_createImageFromBlob",value:function(e){var t=this;this._imageEditService.imageFromFile(e).then(function(e){var n=t._formatImageImport(e);t._sendCreateImageNotification(n)})}},{key:"_pasteClasskickElement",value:function(e){var t=this;e.getAsString(function(e){var n=t._extractElement(e);n&&t._toolbarService.notify(a.Notifications.CLONE_ELEMENT,{element:n})})}},{key:"_pastePlainText",value:function(e){var t=this,n=e.getAsFile();n||e.getAsString(function(e){t._toolbarService.notify(a.Notifications.CREATE_TEXTBOX,{initialText:e,skipPlacement:!0})})}},{key:"_extractElement",value:function(e){try{var t=angular.fromJson(e);return this._elementCodec.decode(t,"")}catch(n){this.$log.warn(n)}}},{key:"_handleCommandCopy",value:function(){if(this.focusedElement&&!this.focusedElement.isChildManipulative){if(v["default"].get.isSafari){this._toolbarService.toast("Sorry, copying elements does not work in Safari.");return}this._handleCopyClasskickElementFunc=this._handleCopyClasskickElement.bind(this);this._document[0].addEventListener("copy",this._handleCopyClasskickElementFunc);this._document[0].execCommand("copy",!1,null);this._toolbarService.toast("Copied "+this.focusedElement.typeDisplay+" to the clipboard.")}}},{key:"_handleCopyClasskickElement",value:function(e){var t=this._elementCodec.encode(this.focusedElement),n=angular.toJson(t);e.clipboardData.clearData();e.clipboardData.setData("text/classkick",n);e.preventDefault();this._document[0].removeEventListener("copy",this._handleCopyClasskickElementFunc)}},{key:"_formatImageImport",value:function(e){var t=new u["default"](e.naturalWidth,e.naturalHeight),n=new d.CropResult(t,new f["default"](0,0),t),i=this._imageEditService.crop(e,new f["default"](0,0),t),r=this._toolbarService.target.questionIdForIndex(this._toolbarService.targetIndex);return new c.ImageImport(i,this._toolbarService.targetIndex,n,[new c.QuestionDisplay(r,this._toolbarService.targetIndex,!0,!1,void 0)])}},{key:"_sendCreateImageNotification",value:function(e){this._toolbarService.notify(a.Notifications.CREATE_IMAGE_FROM_FILE,{needsFocusedElement:!1,imageImport:e})}},{key:"_handleDelete",value:function(){this._toolbarService.focusedElement&&this._toolbarService.notify(a.Notifications.DELETE,{needsFocusedElement:!0})}},{key:"_handleCommandCut",value:function(){this._handleCommandCopy();this._handleDelete()}},{key:"_handleUndo",value:function(){this._toolbarService.canUndo&&this._toolbarService.undo()}},{key:"_handleRedo",value:function(){this._toolbarService.canRedo&&this._toolbarService.redo()}},{key:"focusedElement",get:function(){return this._toolbarService.focusedElement}}]);return e}();t["default"]=_;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(206)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(144),c=o(a),l=n(146),u=o(l),d=n(210),h=o(d),f=n(211),g=o(f),p=n(151),m=o(p),v=n(212),_=n(214),y=o(_),k=function(){function e(t,n,i,s,o){r(this,e);this.questionId=t;this.index=n;this.isCurrent=i;this.isNew=s||!1;this.beforeQuestionId=o}i(e,[{key:"name",get:function(){return"Q"+(this.index+1)+(this.isCurrent?" (Current Page)":"")+(this.isNew?" (New)":"")}}]);return e}();t.QuestionDisplay=k;var b=function(){function e(t,n,i,s,o,a){r(this,e);this._imageSrc=t;this._page=n;this._cropResult=i;this._destinations=s;this._isManipulative=o;this._originalFile=a}i(e,[{key:"imageSrc",get:function(){return this._imageSrc}},{key:"page",get:function(){return this._page}},{key:"cropResult",get:function(){return this._cropResult}},{key:"destinations",get:function(){return this._destinations}},{key:"destinationNames",get:function(){return this._destinations.map(function(e){return e.name}).join(", ")}},{key:"isManipulative",get:function(){return this._isManipulative}},{key:"originalFile",get:function(){return this._originalFile}}]);return e}();t.ImageImport=b;var S=function(){function e(t,n,i,s,o,a,c,l,u,d,h){var f=this;r(this,e);this.$q=t;this.$mdDialog=n;this.$scope=i;this.$timeout=s;this._imageEditService=o;this._questions=a;this._currentQuestionId=u;this._allowNewQuestions=l;this._allowChooseDestinations=c;this._isManipulative=d;this.originalFile=h;this._source=new g["default"](!0);this.numPages=1;this.currentPage=1;this._cropPager=new m["default"](250,1e4,function(){return f.loadImage()});this._cropSource=void 0;this.cropResult=void 0;this._croppedImageSrc=void 0;this._state=void 0;this._newQuestionEnd={name:"New Question"};this._newQuestionBefore={name:"New Question Before"};this.availableDestinations=a?this._initialDestinations(a):[];this.defaultDestinations=[];this._currentQuestionId?this.defaultDestinations.push(this.availableDestinations.find(function(e){return e.questionId===f._currentQuestionId})):this._allowNewQuestions&&this.defaultDestinations.push(this._newQuestionEnd);this.selectedImports=[];this._errorDialog=y["default"].show;this.$scope.$on("$destroy",function(){return f._destroy()});this._init()}e.$inject=["$q","$mdDialog","$scope","$timeout","ImageEditService","questions","allowChooseDestinations","allowNewQuestions","currentQuestionId","isManipulative","originalFile"];i(e,[{key:"_init",value:function(){if(h["default"].ImageSupport.includes(this.originalFile.type))if(this.originalFile.type===h["default"].IMAGE_GIF)this.to(this.CHOOSE_DESTINATIONS);else{this.to(this.CROP);this.debouncedLoadImage(1)}else this._errorDialog(this.$mdDialog,"The selected file is not supported","")}},{key:"_initialDestinations",value:function(e){var t=this;return e.map(function(e,n){return new k(e.id,n,e.id===t._currentQuestionId)}).concat(this._allowNewQuestions?[this._newQuestionEnd]:[])}},{key:"to",value:function(e){if(e===this.CHOOSE_DESTINATIONS){this.cropImage();if(!this._allowChooseDestinations)if(this._questions)e=this.REVIEW;else{this.resolveAvailableQuestions();this.cropSelectAll();this.finish()}}this._state=e;if(this._state===this.CROP)this._croppedImageSrc=void 0;else if(this._state===this.REVIEW){this.resolveAvailableQuestions();this.cropSelectAll()}}},{key:"debouncedLoadImage",value:function(e){this.currentPage=e||this.currentPage;this.cropSource=null;this._cropPager.tick()}},{key:"loadImage",value:function(e){var t=this;this.currentPage=e||this.currentPage;this.cropSource=null;var n=this.source;this.isPdf&&(n=n.then(function(e){return t._imageEditService.imageFromPdfPage(e,t.currentPage)}));return n.then(function(e){t.cropSource=e;return e})["catch"](function(e){t._errorDialog(t.$mdDialog,"There was an error opening the selected file","")})}},{key:"crop_hasNext",value:function(){return this.currentPage<this.numPages}},{key:"crop_hasPrev",value:function(){return this.currentPage>1}},{key:"crop_next",value:function(){this.debouncedLoadImage(this.currentPage+1)}},{key:"crop_prev",value:function(){this.debouncedLoadImage(this.currentPage-1)}},{key:"cropSelectAll",value:function(){this.cropResult=null}},{key:"cropImage",value:function(){if(this.isGif)this._croppedImageSrc=URL.createObjectURL(this.originalFile);else{var e=Math.min(1,this._imageEditService.canvasFitSize.fitScale(this.cropResult.selectedSize));this._croppedImageSrc=this._imageEditService.crop(this.cropSource,this.cropResult.selectedLocation.times(e),this.cropResult.selectedSize.times(e),e)}if(this.currentSelection){this.currentSelection._currentPage=this.currentPage;this.currentSelection._cropResult=this.cropResult;this.currentSelection._imageSrc=this._croppedImageSrc}else this.currentSelection=new b(this._croppedImageSrc,this.currentPage,this.cropResult,this.defaultDestinations.slice(0),this._isManipulative,this.originalFile)}},{key:"cleanup",value:function(){this.isPdf&&this._source.isSet&&this.source.then(function(e){e.destroy()});this._source.clear();this.cropSource=null;this.currentPage=1}},{key:"importWholePdf",value:function(){var e=this;this.to(this.LOAD_PDF);return this.importPdfPages(1,this.numPages)["finally"](function(){e.to(e.REVIEW)})}},{key:"importPdfPages",value:function(e,t){var n=this;return e>t?this.$q.resolve():this.importPdfPage(e).then(function(){return n.importPdfPages(e+1,t)})}},{key:"importPdfPage",value:function(e){var t=this;return this.loadImage(e).then(function(n){var i=new u["default"](n.naturalWidth,n.naturalHeight),r=t._newQuestionEnd;t._currentQuestionId&&(r=t._newQuestionBefore);t.currentSelection=new b(n.src,e,new v.CropResult(i,new c["default"](0,0),i),[r]);t.resolveAvailableQuestions()})}},{key:"resolveAvailableQuestions",value:function(){var e=this;if(this.currentSelection){var t=this.currentSelection.destinations.indexOf(this._newQuestionEnd);if(-1!==t){var n=new k(Math.random().toString(),this.availableDestinations.length-1,!1,!0);this.availableDestinations.splice(this.availableDestinations.length-1,0,n);this.currentSelection.destinations[t]=n}var i=this.currentSelection.destinations.indexOf(this._newQuestionBefore);if(-1!==i){var r=this.availableDestinations.find(function(e){return e.isCurrent}),o=this._beforeQuestionDestination(r),a=this._questions[r.index+1],n=new k(Math.random().toString(),o.index+1,!1,!0,a&&a.id);this.availableDestinations.splice(o.index+1,0,n);this.currentSelection.destinations[0]=n}this.currentSelection.destinations.sort(function(e,t){return e.index>t.index});this.selectedImports.includes(this.currentSelection)||this.selectedImports.push(this.currentSelection);this.currentSelection=null}var c=new s(this.selectedImports.reduce(function(e,t){return e.concat(t.destinations.filter(function(e){return e.isNew}))},[]));this.availableDestinations=this.availableDestinations.filter(function(e){return e.isNew?c.has(e):!0});var l=0;this.availableDestinations.forEach(function(t){if(t!==e._newQuestionEnd){t.index=l;l++}})}},{key:"_beforeQuestionDestination",value:function(e){var t=this.availableDestinations[e.index+1];return t&&t!==this._newQuestionEnd&&t.isNew?this._beforeQuestionDestination(t):e}},{key:"removeSelection",value:function(e){this.selectedImports=this.selectedImports.filter(function(t){return t!==e});this.resolveAvailableQuestions()}},{key:"editSelection",value:function(e){var t=this;this.currentSelection=e;this.to(this.CROP);this.loadImage(this.currentSelection.page).then(function(){t.cropResult=t.currentSelection.cropResult})}},{key:"finish",value:function(){this.$mdDialog.hide({newQuestions:this.availableDestinations.filter(function(e){return e.isNew}),images:this.selectedImports})}},{key:"cancel",value:function(e){if(e||!this.hasWork)this.$mdDialog.cancel();else{this._resumeState=this._state;this.to(this.CANCEL_CHECK)}}},{key:"resume",value:function(){if(this._resumeState){this.to(this._resumeState);this._resumeState=void 0}}},{key:"_destroy",value:function(){this.cleanup()}},{key:"isManipulative",get:function(){return this._isManipulative}},{key:"state",get:function(){return this._state}},{key:"isPdf",get:function(){return this.originalFile&&this.originalFile.type===h["default"].APPLICATION_PDF}},{key:"isGif",get:function(){return this.originalFile&&this.originalFile.type===h["default"].IMAGE_GIF}},{key:"source",get:function(){var e=this;return this._source.value(function(){if(e.isPdf)return e._imageEditService.pdfFromFile(e.originalFile).then(function(t){e.numPages=t.numPages;return t});if(e.isGif){var t=document.createElement("img");t.src=URL.createObjectURL(e.originalFile);return e.$q.resolve(t)}return e._imageEditService.imageFromFile(e.originalFile)})}},{key:"cropSource",set:function(e){this._cropSource=e;this.cropResult=null},get:function(){return this._cropSource}},{key:"hasCropSource",get:function(){return!!this._cropSource}},{key:"canImportWholePdf",get:function(){return this._allowNewQuestions&&this.isPdf&&!this.hasWork&&this.numPages>1}},{key:"croppedImageSrc",get:function(){return this._croppedImageSrc}},{key:"hasWork",get:function(){return this.selectedImports.length>0}},{key:"CROP",get:function(){return"crop"}},{key:"CHOOSE_DESTINATIONS",get:function(){return"make-selection"}},{key:"REVIEW",get:function(){return"review"}},{key:"CANCEL_CHECK",get:function(){return"cancel-check"}},{key:"LOAD_PDF",get:function(){return"load-pdf"}}],[{key:"selectFile",value:function(e,t){var n=e.defer(),i=angular.element('<input type="file" accept="'+t+'"/>');i.on("change",function(e){n.resolve(e.target.files[0])});i.click();return n.promise}},{key:"show",value:function(t,n,i,r,s,o,a){var c=arguments.length<=7||void 0===arguments[7]?h["default"].ImageSupport:arguments[7];return e.selectFile(t,c).then(function(c){if(c.type===h["default"].IMAGE_GIF&&!r&&!s){var l=o?[new k(o,i&&i.findIndex(function(e){return e.id===o}),!0,!1,void 0)]:void 0;return t.resolve({images:[new b(URL.createObjectURL(c),void 0,void 0,l,void 0,c)],newQuestions:[]})}return n.show({controller:e,templateUrl:"app/components/import-image-dialog/import-image-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!1,locals:{questions:i,allowChooseDestinations:r,allowNewQuestions:s,currentQuestionId:o,isManipulative:a,originalFile:c}})})}}]);return e}();t["default"]=S},function(e,t,n){e.exports={"default":n(207),__esModule:!0}},function(e,t,n){n(114);n(89);n(98);n(208);n(209);e.exports=n(26).Set},function(e,t,n){"use strict";var i=n(175);e.exports=n(176)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},function(e,t,n){var i=n(24);i(i.P+i.R,"Set",{toJSON:n(181)("Set")})},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"AudioSupport",value:function(){return[e.AUDIO_WAV,e.AUDIO_AAC,e.AUDIO_MP3,e.AUDIO_WEBM,e.AUDIO_OGG]}},{key:"IMAGE_JPEG",get:function(){return"image/jpeg"}},{key:"IMAGE_PNG",get:function(){return"image/png"}},{key:"IMAGE_GIF",get:function(){return"image/gif"}},{key:"IMAGE_BMP",get:function(){return"image/bmp"}},{key:"APPLICATION_PDF",get:function(){return"application/pdf"}},{key:"AUDIO_WAV",get:function(){return"audio/wav"}},{key:"AUDIO_AAC",get:function(){return"audio/aac"}},{key:"AUDIO_MP3",get:function(){return"audio/mp3"}},{key:"AUDIO_WEBM",get:function(){return"audio/webm"}},{key:"AUDIO_OGG",get:function(){return"audio/ogg"}},{key:"TEXT_CSV",get:function(){return"text/csv"}},{key:"ImageSupport",get:function(){return[e.IMAGE_BMP,e.IMAGE_GIF,e.IMAGE_PNG,e.IMAGE_JPEG,e.APPLICATION_PDF]}},{key:"BackgroundImageSupport",get:function(){return[e.IMAGE_BMP,e.IMAGE_PNG,e.IMAGE_JPEG,e.APPLICATION_PDF]}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){r(this,e);this._clearValue=t?null:{};this.clear()}i(e,[{key:"value",value:function(e){this.isSet||(this._value=e());return this._value}},{key:"set",value:function(e){this._value=e}},{key:"clear",value:function(e){e&&this.isSet&&e(this._value);this._value=this._clearValue}},{key:"isSet",get:function(){return this._clearValue!==this._value}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(131),l=a(c),u=n(151),d=a(u),h=n(152),f=a(h),g=n(144),p=a(g),m=n(146),v=a(m),_=n(213),y=a(_),k=function(e){function t(e,n,r,s){var a=this;o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"image-cropper","image-cropper",null);this._size=e;this._imageSize=r;this._padding=s;var c=this._size.minus(this._padding.times(2)).fit(r),l=this._size.center(c);this._imageView=new y["default"](n,l,c);this._debouncer=new d["default"](250,5e3,function(){return a._flushChange()});this._selectAll();this._interacted=!1}r(t,e);s(t,[{key:"createElement",value:function(e){this._image=e.g();this._shade=e.path();this._crop=e.rect(0,0,0,0);this._interactRect=e.rect(0,0,0,0);this._imageView.createElement(this._image);this._drag=new f["default"](this,this._canvas);this._drag.start(this._interactRect.node);this._drag.click.subscribe(this._click,this);this._drag.dragStart.subscribe(this._dragStart,this);this._drag.dragMove.subscribe(this._dragMove,this);this._drag.dragEnd.subscribe(this._dragEnd,this)}},{key:"update",value:function(){this._imageView.update(this._image);if(this._interacted){this._shade.attr({d:this._shadePath(),fillRule:"evenodd",fill:"rgba(0, 0, 0, .5)"});this._crop.attr({x:this._selectedLocation.x,y:this._selectedLocation.y,width:this._selectedSize.width,height:this._selectedSize.height,fill:"transparent",strokeWidth:1,strokeDasharray:"5, 5",stroke:"#FFFFFF"})}this._interactRect.attr({width:this.width,height:this.height,fill:"transparent"})}},{key:"_click",value:function(){this.selectAll()}},{key:"setSelection",value:function(e){var t=this;if(e){this._interacted=!0;this._trackChange(function(){var n=t._imageView.size.fitScale(e.imageSize);t._selectedLocation=e.selectedLocation.times(n).plus(t._imageView.location);t._selectedSize=e.selectedSize.times(n)})}else this.selectAll()}},{key:"selectAll",value:function(){var e=this;this._interacted=!0;this._trackChange(function(){e._selectAll()})}},{key:"_selectAll",value:function(){this._selectedLocation=new p["default"](this._imageView.location.x,this._imageView.location.y);this._selectedSize=new v["default"](this._imageView.width,this._imageView.height)}},{key:"_dragStart",value:function(e){this._interacted=!0;this._beginDrag=e.mouseStart;this._endDrag=e.offsetLocation;this._measureDrag()}},{key:"_dragMove",value:function(e){this._endDrag=e.offsetLocation;this._measureDrag()}},{key:"_dragEnd",value:function(e){var t=this;this._trackChange(function(){t._endDrag=e.offsetLocation;t._measureDrag()})}},{key:"_measureDrag",value:function(){var e=this._imageView.location,t=this._imageView.location.plus(new p["default"](this._imageView.width,this._imageView.height));this._selectedLocation=new p["default"](Math.min(t.x-5,Math.max(e.x,Math.min(this._beginDrag.x,this._endDrag.x))),Math.min(t.y-5,Math.max(e.y,Math.min(this._beginDrag.y,this._endDrag.y))));var n=new p["default"](Math.min(t.x,Math.max(e.x,Math.max(this._beginDrag.x,this._endDrag.x))),Math.min(t.y,Math.max(e.y,Math.max(this._beginDrag.y,this._endDrag.y))));this._selectedSize=new v["default"](Math.max(5,Math.abs(n.x-this._selectedLocation.x)),Math.max(5,Math.abs(n.y-this._selectedLocation.y)));this.tryUpdate()}},{key:"_shadePath",value:function(){return["M"+this._imageView.location.x+" "+this._imageView.location.y,"v"+this._imageView.height,"h"+this._imageView.width,"v-"+this._imageView.height+"z","M"+this._selectedLocation.x+" "+this._selectedLocation.y,"h"+this._selectedSize.width,"v"+this._selectedSize.height,"h-"+this._selectedSize.width+"z"].join(" ")}},{key:"snapshot",value:function(){return{imageSize:this._imageView.size,selectedLocation:this._selectedLocation,selectedSize:this._selectedSize}}},{key:"crop",value:function(){var e=this._imageSize.fitScale(this._imageView.size);return new b(this._imageSize,this._selectedLocation.minus(this._imageView.location).times(e),this._selectedSize.times(e))}},{key:"cleanUp",value:function(){i(Object.getPrototypeOf(t.prototype),"cleanUp",this).call(this);this._debouncer.destroy()}},{key:"resize",value:function(e,t){this._size=e;this._drag._canvas.absolutePosition=t;var n=this._size.minus(this._padding.times(2)).fit(this._imageSize),i=this._size.center(n);this._imageView._size=n;this._imageView._location=i;this.selectAll();this.tryUpdate()}}]);return t}(l["default"]);t["default"]=k;var b=function S(e,t,n){o(this,S);this.imageSize=e;this.selectedLocation=t;this.selectedSize=n};t.CropResult=b},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(131),l=a(c),u=function(e){function t(e,n,r){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"image-view","image-view",null);this._src=e;this._location=n;this._size=r}r(t,e);s(t,[{key:"createElement",value:function(e){this._image=e.image(this._src,0,0,0,0)}},{key:"update",value:function(){this._image.attr({x:this.location.x,y:this.location.y,width:this._size.width,height:this._size.height})}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s){"ngInject";r(this,e);this.primaryMessage=n;this.secondaryMessage=i;this.buttons=s||[{text:"Ok",action:e.CONFIRM}];this.$mdDialog=t}e.$inject=["$mdDialog","primaryMessage","secondaryMessage","buttons"];i(e,[{key:"handleClick",value:function(t){t.action===e.CONFIRM?this.$mdDialog.hide(t):t.action===e.CANCEL&&this.$mdDialog.cancel(t)}},{key:"buttonClass",value:function(t){return t===e.CONFIRM?"ck-primary":""}}],[{key:"show",value:function(t,n,i,r){var s={controller:e,templateUrl:"app/components/error-dialog/error-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{primaryMessage:n,secondaryMessage:i,buttons:r},bindToController:!0};return t.show(s)}},{key:"CONFIRM",get:function(){return"ERROR_CONFIRM"}},{key:"CANCEL",get:function(){return"ERROR_CANCEL"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(164),u=c(l),d=n(216),h=c(d),f=n(217),g=c(f),p=n(218),m=c(p),v=n(144),_=c(v),y=n(219),k=c(y),b=n(221),S=c(b),w=n(222),C=c(w),E=n(226),T=c(E),I=n(130),A=c(I),x=n(155),O=c(x),P=n(228),R=c(P),D=n(230),M=c(D),N=n(248),L=c(N),F=n(249),U=c(F),$=n(251),q=c($),H=n(233),j=c(H),B=n(252),W=c(B),V=n(254),z=c(V),G=n(255),Q=c(G),K=n(256),Y=c(K),X=n(171),J=c(X),Z=n(257),ee=c(Z),te=n(258),ne=c(te),ie=n(259),re=c(ie),se=n(260),oe=c(se),ae=n(261),ce=c(ae),le=n(262),ue=c(le),de=n(263),he=c(de),fe=n(264),ge=c(fe),pe=n(265),me=c(pe),ve=n(266),_e=c(ve),ye=n(267),ke=c(ye),be=n(268),Se=c(be),we=n(269),Ce=c(we),Ee=new h["default"],Te=new g["default"],Ie=new m["default"],Ae=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._codecMap=(new a).set(k["default"].type,new S["default"]).set(C["default"].type,new T["default"]).set(A["default"].type,new R["default"]).set(O["default"].type,new z["default"]).set(M["default"].type,new L["default"]).set(U["default"].type,new q["default"]).set(j["default"].type,new W["default"]).set(Q["default"].type,new Y["default"]).set(J["default"].type,new ee["default"]).set(ne["default"].type,new re["default"]).set(oe["default"].type,new ce["default"]).set(ue["default"].type,new he["default"]).set(ge["default"].type,new me["default"]).set(_e["default"].type,new ke["default"]).set(Se["default"].type,new Ce["default"])}r(t,e);s(t,[{key:"encode",value:function(e){if(this._codecMap.has(e.type))return this._codecMap.get(e.type).encode(e);throw new Error("Unknown type: "+e.type)}},{key:"decode",value:function(e,t){var n=e.data.type;if(this._codecMap.has(n))return this._codecMap.get(n).decode(e,t);throw new Error("Unknown type: "+n+" with id: "+t)}}],[{key:"locationFromCenterAndSize",value:function(e,t){return new _["default"](e.x-t.width/2,e.y-t.height/2)}},{key:"centerFromLocationAndSize",value:function(e,t){return new _["default"](e.x+t.width/2,e.y+t.height/2)}},{key:"extractMetadata",value:function(e){return Ee.decode(e.metadata)}},{key:"firebaseElement",value:function(e,t){return{data:e,metadata:Ee.encode(t)}}},{key:"preEncode",value:function(e,n){var i=Ie.encode(e.size),r=Te.encode(t.centerFromLocationAndSize(e.location,e.size));return t.firebaseElement(n(i,r),e.metadata)}},{key:"preDecode",value:function(e,n){var i=t.extractMetadata(e),r=Ie.decode(e.data.size),s=Te.decode(e.data.center),o=t.locationFromCenterAndSize(s,r);return n(i,r,o,s)}},{key:"sizeCodec",get:function(){return Ie}},{key:"pointCodec",get:function(){return Te}}]);return t}(u["default"]);t["default"]=Ae;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(153),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){var t=e.value;angular.forEach(t,function(e,n){angular.isUndefined(e)&&delete t[n]});return t}},{key:"decode",value:function(e){return d["default"].fromObject(e)}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(144),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return angular.toJson([Math.round(e.x),Math.round(e.y)])}},{key:"decode",value:function(e){var t=e;angular.isString(t)&&(t=angular.fromJson(t));return new d["default"](t[0],t[1])}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(146),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return angular.toJson([Math.round(e.width),Math.round(e.height)])}},{key:"decode",value:function(e){var t=e;angular.isString(t)&&(t=angular.fromJson(t));return new d["default"](t[0],t[1])}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(131),l=a(c),u=n(144),d=a(u),h=n(146),f=a(h),g=n(183),p=a(g),m=n(152),v=a(m),_=n(220),y=a(_),k=n(149),b=a(k),S=function(e){function t(e,n,r,s,a){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._location=r||new d["default"](100,200);this._size=s||new f["default"](250,55);this._url=a||"";this.formatPlaybackTime=y["default"].formatPlaybackTime;this._shadowFilter=Snap.filter.shadow(0,0,3,b["default"].CK_DISABLED_GREY,1)}r(t,e);s(t,[{key:"cleanUp",value:function(){i(Object.getPrototypeOf(t.prototype),"cleanUp",this).call(this);this.resetAudio()}},{key:"resetAudio",value:function(){this.isPlaying&&this.audio.pause();this.isPlaying=!1;this.audio.currentTime=0}},{key:"hoverIn",value:function(){this.tryUpdate()}},{key:"hoverOut",value:function(){this.tryUpdate()}},{key:"_repositionStart",value:function(){this._dragStartState=this.snapshot()}},{key:"_repositionMove",value:function(e){this.location=e.controlStart.plus(e.delta)}},{key:"_repositionEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"warnBeforeDeletion",value:function(){this._background.attr({stroke:b["default"].CK_WARN})}},{key:"createElement",value:function(e,t,n){this._base=e.group();this._interactive=e.group();this._touch=this._interactive.rect(0,0,0,0).addClass("touch-foreground");this._background=this._base.rect(0,0,0,0);this._playIcon=this._base.image(this.playIconUri,0,0,0,0);this._textbox=this._base.text(0,0,"");if(n){this._gesture=new v["default"](this,this.canvas);this._gesture._dragThreshold=0;this._gesture.start(this._touch.node);this._gesture.click.subscribe(this._toggle,this)}if(t){this._removeHandle=new p["default"](this);this._removeHandle.render(this._interactive);this._removeHandle.mouseEnter.subscribe(this.hoverIn,this);this._removeHandle.mouseLeave.subscribe(this.hoverOut,this);this._drag=new v["default"](this,this.canvas);this._drag.start(this._touch.node);this._drag.click.subscribe(this.focus,this);this._drag.dragStart.subscribe(this._repositionStart,this);this._drag.dragMove.subscribe(this._repositionMove,this);this._drag.dragEnd.subscribe(this._repositionEnd,this);this._drag.dragEnd.subscribe(this.focus,this);this._drag.mouseEnter.subscribe(this.hoverIn,this);this._drag.mouseLeave.subscribe(this.hoverOut,this);this._playIconHover=new v["default"](this,this.canvas);this._playIconHover.start(this._playIcon.node);this._playIconHover.mouseEnter.subscribe(this.hoverIn,this);this._playIconHover.mouseLeave.subscribe(this.hoverOut,this)}}},{key:"update",value:function(e,t,n){this._background.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:b["default"].BACKGROUND_GREY,stroke:b["default"].CK_DISABLED_GREY,strokeWidth:2,filter:this._background.paper.filter(this._shadowFilter)});this._playIcon.attr({x:this.center.x-10,y:this.center.y-10,width:20,height:20,preserveAspectRatio:"xMidYMid meet",href:this.playIconUri,cursor:"pointer"});this._touch.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:"transparent",cursor:"pointer"});this._textbox.attr({x:this.location.x+30,y:this.location.y+15,text:this.playbackTime,fontFamily:"GothamRoundedBook",dominantBaseline:"middle",fill:b["default"].CK_HEADER_GREY,fontSize:16,textAnchor:"middle",pointerEvents:"none"});if(t){this._background.attr({stroke:this.hovering||this.hasFocus?b["default"].CK_GREEN:b["default"].CK_DISABLED_GREY});this._removeHandle.location=this.location.plus(new d["default"](this.width,0));this._removeHandle.visibility=this.hovering||this.hasFocus?"visible":"hidden"}else n&&this._touch.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:"transparent",cursor:"pointer"})}},{key:"_toggle",value:function(){var e=this;this.focus();if(this.audio.paused||this.audio.ended){this.audio.play();this.isPlaying=!0;this.audio.onended||(this.audio.onended=function(){e.isPlaying=!1;e.tryUpdate();e.audio.onended=void 0});this.audio.ontimeupdate||(this.audio.ontimeupdate=function(){e.tryUpdate()})}else{this.audio.pause();this.isPlaying=!1}this.tryUpdate()}},{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._size=e._size||this._size;var t=this._url;this._url=e._url||this._url;this._url!==t&&(this._audio=null);this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_size:this._size,_url:this._url}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._size,n._url)}},{key:"remove",value:function(){this.audio.pause();i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"audio",get:function(){var e=this;if(!this._audio){this._audio=new Audio(this.url);this._audio.oncanplay=function(){e.tryUpdate()}}return this._audio}},{key:"playIconUri",get:function(){return this.isPlaying?"assets/colored-icons/pause.svg":"assets/colored-icons/play.png";
}},{key:"hovering",get:function(){return this._drag.hovering||this._playIconHover.hovering||this._removeHandle.hovering}},{key:"playbackTime",get:function(){return this.audio.currentTime>0?this.formatPlaybackTime(this.audio.currentTime):this.formatPlaybackTime(this.audio.duration)}}],[{key:"type",get:function(){return"audio"}}]);return t}(l["default"]);t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"formatPlaybackTime",value:function(e){return isFinite(e)?moment.duration(e,"seconds").format("m:ss",{trim:!1}):"0:00"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(219),f=a(h),g=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return d["default"].preEncode(e,function(t,n){return{type:e.type,audio_url:e.url,size:t,center:n}})}},{key:"decode",value:function(e,t){return d["default"].preDecode(e,function(n,i,r){return new f["default"](t,n,r,i,e.data.audio_url)})}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(223),l=a(c),u=function(e){function t(e,n,r,s,a,c,l){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n,r,s,a,c,l)}r(t,e);s(t,[{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._imageSize=e._imageSize||this._imageSize;this._scale=e._scale||this._scale;this._rotation=0===e._rotation?0:e._rotation||this._rotation;var t=this._url;this._url=e._url||this._url;if(this._url!==t){this._image&&this._image.attr({href:this.url});this._preload()}this._size=this._imageSize.times(this._scale);this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_imageSize:this._imageSize,_scale:this._scale,_rotation:this._rotation,_url:this._url}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._imageSize,n._scale,n._rotation,n._url)}}],[{key:"type",get:function(){return"image"}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(133)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(131),u=c(l),d=n(144),h=c(d),f=n(146),g=c(f),p=n(152),m=c(p),v=n(183),_=c(v),y=n(224),k=c(y),b=n(225),S=c(b),w=n(149),C=c(w),E=n(18),T=c(E),I=function(e){function t(e,n,r,s,a,c,l,u){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,r);this._location=s||new h["default"](100,200);this._imageSize=a;this._url=u;this._scale=c;this._size=this._imageSize.times(c);this._rotation=l;this._orientation=0;this.loaded=this._preload()}r(t,e);s(t,[{key:"_exifTransform",value:function(){return 8===this.orientation?"rotate(-90)":7===this.orientation?"rotate(-90) scale(-1, 1)":6===this.orientation?"rotate(90)":5===this.orientation?"rotate(90) scale(-1, 1)":4===this.orientation?"rotate(180) scale(-1, 1)":3===this.orientation?"rotate(180)":2===this.orientation?"scale(-1, 1)":"scale(1)"}},{key:"createElement",value:function(e,t){this._transform=e.group();this._exif=this._transform.group().addClass("exif");this._handlesRect=this._transform.group();this._image=this._exif.image(this.url,0,0,0,0);this._interactRect=this._exif.rect(0,0,0,0).addClass("touch-foreground");this._editBox=this._exif.rect(0,0,0,0).addClass("touch-foreground");if(t){this._removeHandle=new _["default"](this);this._removeHandle.render(this._handlesRect);this._removeHandle.mouseEnter.subscribe(this._hoverIn,this);this._removeHandle.mouseLeave.subscribe(this._hoverOut,this);this._resizers={topLeft:this._createResizeHandle("topLeft"),bottomLeft:this._createResizeHandle("bottomLeft"),bottomRight:this._createResizeHandle("bottomRight")};this._rotateHandle=new S["default"](this);this._rotateHandle.rotationStarted.subscribe(this._rotationStarted,this);this._rotateHandle.rotationComplete.subscribe(this._rotationComplete,this);this._rotateHandle.render(this._handlesRect);this._drag=new m["default"](this,this.canvas);this._drag.start(this._interactRect.node);this._drag.click.subscribe(this._click,this);this._drag.mouseEnter.subscribe(this._hoverIn,this);this._drag.mouseLeave.subscribe(this._hoverOut,this);this._drag.dragStart.subscribe(this._dragStart,this);this._drag.dragMove.subscribe(this._dragMove,this);this._drag.dragEnd.subscribe(this._dragEnd,this);this._manipulativeIcon=this._exif.image("assets/images/item_manipulative_overlay.png",0,0,0,0)}}},{key:"_createResizeHandle",value:function(e){var t=new k["default"](this,e);t.resizeStarted.subscribe(this._resizeStarted,this);t.resizeComplete.subscribe(this._resizeComplete,this);t.render(this._handlesRect);return t}},{key:"update",value:function(e,t){this._transform.node.setAttribute("transform","translate("+this.location.x+","+this.location.y+") rotate("+this.rotation+")");this._exif.node.setAttribute("transform",this._exifTransform());var n=this._exifSize;this._image.attr({x:.5*-n.width,y:.5*-n.height,width:n.width,height:n.height});if(t){this._editBox.attr({x:.5*-n.width,y:.5*-n.height,width:n.width,height:n.height,fill:"transparent",stroke:C["default"].CK_GREEN,"stroke-width":"2px","pointer-events":"none"});this._interactRect.attr({x:.5*-n.width,y:.5*-n.height,width:n.width,height:n.height,fill:"transparent",cursor:"move"});this._editBox.attr({visibility:this.hasFocus||this.hovering||this._drag.dragging?"inherit":"hidden"});this._removeHandle.location=this._determineLocation(n,2,0);this._removeHandle.visibility=this.isChildManipulative||!this.hasFocus&&!this.hovering?"hidden":"visible";this._removeHandle.tryUpdate();this._rotateHandle.location=this._determineLocation(n,1,0);this._rotateHandle.visibility=this.hasFocus?"visible":"hidden";this._rotateHandle.tryUpdate();this._resizers.topLeft.location=this._determineLocation(n,0,0);this._resizers.bottomLeft.location=this._determineLocation(n,0,2);this._resizers.bottomRight.location=this._determineLocation(n,2,2);this._resizers.topLeft.visibility=!this.isChildManipulative&&this.hasFocus?"inherit":"hidden";this._resizers.bottomRight.visibility=!this.isChildManipulative&&this.hasFocus?"inherit":"hidden";this._resizers.bottomLeft.visibility=!this.isChildManipulative&&this.hasFocus?"inherit":"hidden";this._resizers.topLeft.tryUpdate();this._resizers.bottomRight.tryUpdate();this._resizers.bottomLeft.tryUpdate();this._manipulativeIcon.attr({visibility:this.isParentManipulative&&(this.hasFocus||this.hovering)?"visible":"hidden",width:99,height:66,x:.5*this.width-99,y:.5*this.height-66,"pointer-events":"none"})}}},{key:"warnBeforeDeletion",value:function(){this._editBox.attr({fill:"rgba(255, 255, 255, .5)",stroke:C["default"].CK_WARN,"stroke-width":"2px"});this._resizers.topLeft.warnBeforeDeletion();this._resizers.bottomLeft.warnBeforeDeletion();this._resizers.bottomRight.warnBeforeDeletion();this._rotateHandle.warnBeforeDeletion()}},{key:"_determineLocation",value:function(e,t,n){var i=void 0,r=void 0,s=this.orientation>4?e.height:e.width,o=this.orientation>4?e.width:e.height;0===t?i=-s:1===t?i=.5*-s:2===t&&(i=0);0===n?r=-o:1===n?r=.5*-o:2===n&&(r=0);var a=new h["default"](.5*-s+s,.5*-o+o);return a.plus(new h["default"](i,r))}},{key:"_preload",value:function(){var e=this;return this.url?T["default"].get.ImageEditService.loadImage(this.url).then(function(t){e.orientation=t.orientation;e.tryUpdate();return t}):a.reject()}},{key:"_click",value:function(){this.focus()}},{key:"_hoverIn",value:function(){this.tryUpdate()}},{key:"_hoverOut",value:function(){this.tryUpdate()}},{key:"_dragStart",value:function(){this._dragStartState=this.snapshot()}},{key:"_dragMove",value:function(e){this.location=e.controlStart.plus(e.delta)}},{key:"_dragEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"_resizeStarted",value:function(){this._dragStartState=this.snapshot()}},{key:"_resizeComplete",value:function(){this._onChanged(this._dragStartState)}},{key:"_rotationStarted",value:function(){this._dragStartState=this.snapshot()}},{key:"_rotationComplete",value:function(){this._onChanged(this._dragStartState)}},{key:"remove",value:function(){this._stopEvents();i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"_stopEvents",value:function(){this._removeHandle&&this._removeHandle.remove();this._drag&&this._drag.stop();if(this._resizers){this._resizers.topLeft.remove();this._resizers.bottomLeft.remove();this._resizers.bottomRight.remove()}}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e;this.size=this._imageSize.times(this.scale)}},{key:"center",get:function(){return this.location}},{key:"imageSize",get:function(){return this._imageSize}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e;this.tryUpdate()}},{key:"orientation",set:function(e){this._orientation=e},get:function(){return this._orientation}},{key:"_exifSize",get:function(){return!this._postprocess&&this.orientation>=5?new g["default"](this.height,this.width):this.size}},{key:"hovering",get:function(){return this._drag.hovering||this._removeHandle.hovering}},{key:"image",get:function(){return this._image}}]);return t}(u["default"]);t["default"]=I;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(152),d=a(u),h=n(147),f=a(h),g=n(145),p=a(g),m=n(146),v=a(m),_=n(149),y=a(_),k=function(e){function t(e,n){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e.id+"-"+n+"-handle");this._target=e;this._size=new v["default"](18,18);this._gestureManager=new d["default"](void 0,e.canvas);this._gestureManager._dragThreshold=0;this._resizeStarted=new f["default"](this);this._resizeComplete=new f["default"](this)}r(t,e);s(t,[{key:"createElement",value:function(e){this._circle=e.circle(0,0,1);this._interactive=e.circle(0,0,0);this._gestureManager.start(this._interactive.node);this._gestureManager.dragStart.subscribe(this._dragStartHandler,this);this._gestureManager.dragMove.subscribe(this._dragMoveHandler,this);this._gestureManager.dragEnd.subscribe(this._dragEndHandler,this)}},{key:"update",value:function(){this._circle.attr({fill:y["default"].CK_GREEN,cursor:"pointer",visibility:this._visibility,cx:this.location.x,cy:this.location.y,r:7,"pointer-events":"none"});this._interactive.attr({fill:"transparent",cursor:"pointer",visibility:this._visibility,cx:this.location.x,cy:this.location.y,r:20})}},{key:"warnBeforeDeletion",value:function(){this._circle.attr({fill:y["default"].CK_WARN,visibility:this._visibility})}},{key:"remove",value:function(){this._gestureManager.stop();this.resizeStarted.clear();this.resizeComplete.clear();i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"_dragStartHandler",value:function(e){this._resizeStarted.raise();this._startScale=this._target.scale;this._startHypotenuse=Math.sqrt(this._target.width*this._target.width+this._target.height*this._target.height);this._startTargetLocation=this._target.location;this._startResizeLocation=e.relativeLocation;this._startSlope=p["default"].findSlope(this._startResizeLocation,this._startTargetLocation);this._startYIntercept=p["default"].findYIntercept(this._startSlope,this._startResizeLocation);this._perpendicularSlope=p["default"].findPerpendicularSlope(this._startResizeLocation,this._startTargetLocation)}},{key:"_dragMoveHandler",value:function(e){var t=this._startResizeLocation.plus(e.delta),n=p["default"].closestPoint(t,this._startSlope,this._startYIntercept,this._perpendicularSlope),i=n.minus(this._startResizeLocation),r=Math.sqrt(i.x*i.x+i.y*i.y),s=r/this._startHypotenuse;s=i.y<0?this._startResizeLocation.y<this._startTargetLocation.y?s+1:1-s:i.y>0?this._startResizeLocation.y<this._startTargetLocation.y?1-s:s+1:1;if(s>=1||this._target.width>50){this._target.scale=this._startScale*s;this._target.location=this._startTargetLocation.plus(i.times(.5))}}},{key:"_dragEndHandler",value:function(){this._resizeComplete.raise()}},{key:"resizeStarted",get:function(){return this._resizeStarted}},{key:"resizeComplete",get:function(){return this._resizeComplete}}]);return t}(l["default"]);t["default"]=k;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(146),d=a(u),h=n(152),f=a(h),g=n(147),p=a(g),m=n(145),v=a(m),_=n(149),y=a(_),k=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e.id+"-rotate-handle");this._target=e;this._size=new d["default"](16,16);this._gestureManager=new f["default"](void 0,e.canvas);this._gestureManager._dragThreshold=0;this._rotationStarted=new p["default"](this);this._rotationComplete=new p["default"](this)}r(t,e);s(t,[{key:"createElement",value:function(e){this._base=e.group();this._circle=this._base.circle(0,0,1);this._line=this._base.rect(0,0,0,0);this._interactive=this._base.rect(0,0,0,0);this._gestureManager.start(this._interactive.node);this._gestureManager.dragStart.subscribe(this._dragStartHandler,this);this._gestureManager.dragMove.subscribe(this._dragMoveHandler,this);this._gestureManager.dragEnd.subscribe(this._dragEndHandler,this)}},{key:"update",value:function(){this._circle.attr({fill:"#98D64A",cursor:"pointer",visibility:this._visibility,cx:this.location.x,cy:this.location.y-25,r:this.width/2});this._line.attr({x:this.location.x-1,y:this.location.y-20,visibility:this._visibility,width:2,height:20,fill:"#98D64A","pointer-events":"none"});this._interactive.attr({x:this.location.x-20,y:this.location.y-40,visibility:this._visibility,width:40,height:40,fill:"transparent"})}},{key:"warnBeforeDeletion",value:function(){this._circle.attr({fill:y["default"].CK_WARN,visibility:this._visibility});this._line.attr({fill:y["default"].CK_WARN,visibility:this._visibility})}},{key:"_dragStartHandler",value:function(e){this._rotationStarted.raise({});this._initialRotation=this._normalize(this._target.rotation);this._rotationHandleLocation=e.relativeLocation}},{key:"_dragMoveHandler",value:function(e){var t=this._deriveChange(this._rotationHandleLocation,e.relativeLocation,this._target.location),n=this._normalize(this._initialRotation+t);2.2>n%90&&(n=v["default"].roundToNearest(n,90));this._target.rotation=n}},{key:"_normalize",value:function(e){return(360+e%360)%360}},{key:"_deriveChange",value:function(e,t,n){var i=e.minus(n),r=t.minus(n);return i.clockwiseAngle(r)}},{key:"_dragEndHandler",value:function(){this._rotationComplete.raise({})}},{key:"remove",value:function(){this._gestureManager.stop();this._rotationStarted.clear();this._rotationComplete.clear();i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"rotationStarted",get:function(){return this._rotationStarted}},{key:"rotationComplete",get:function(){return this._rotationComplete}}]);return t}(l["default"]);t["default"]=k;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(222),f=a(h),g=n(227),p=a(g),m=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._jsonCodec=new p["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t=this;return d["default"].preEncode(e,function(){var n=t._jsonCodec.encode({scale:e.scale,rotation:e.rotation});return{type:e.type,image_url:e.url,size:d["default"].sizeCodec.encode(e.imageSize),center:d["default"].pointCodec.encode(e.location),transform:n}})}},{key:"decode",value:function(e,t){var n=this;return d["default"].preDecode(e,function(i,r,s,o){var a=n._decodeTransform(e.data.transform);return new f["default"](t,i,o,r,a.scale,a.rotation,e.data.image_url)})}},{key:"_decodeTransform",value:function(e){try{return this._jsonCodec.decode(e)}catch(t){return{scale:1,rotation:0}}}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return angular.toJson(e)}},{key:"decode",value:function(e){return angular.fromJson(e)}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(229),f=a(h),g=n(163),p=a(g),m=n(130),v=a(m),_=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._pointsCodec=new f["default"];this._colorCodec=new p["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t={type:e.type,color:this._colorCodec.encode(e.color),points:this._pointsCodec.encode(e.points),width:e.width};return d["default"].firebaseElement(t,e.metadata)}},{key:"decode",value:function(e,t){var n=d["default"].extractMetadata(e);return new v["default"](t,n,this._pointsCodec.decode(e.data.points),this._colorCodec.decode(e.data.color),e.data.width)}}]);return t}(l["default"]);t["default"]=_;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(217),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._pointCodec=new d["default"]}r(t,e);s(t,[{key:"encode",value:function(e){return angular.toJson(e.map(function(e){return[Math.round(e.x),Math.round(e.y)]}))}},{key:"decode",value:function(e){var t=this,n=e;angular.isString(n)&&(n=angular.fromJson(n));return n.map(function(e){return t._pointCodec.decode(e)})}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(131),l=a(c),u=n(144),d=a(u),h=n(146),f=a(h),g=n(152),p=a(g),m=n(18),v=a(m),_=n(149),y=a(_),k=n(231),b=a(k),S=n(237),w=n(245),C=a(w),E=n(246),T=n(247),I=a(T),A=function(e){function t(e,n,r,s,a,c){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._location=r||new d["default"](100,200);this._size=s||new f["default"](250,55);this._url=c||"";this._text=a||"";this._initialFontSize=16;this._arranger=new b["default"];this._arranger.lineHeightScale=v["default"].get.isWindows?1:1.2;this._shadowFilter=Snap.filter.shadow(0,0,3,y["default"].CK_DISABLED_GREY,1)}r(t,e);s(t,[{key:"resetTextAndUrl",value:function(e,t){var n=this;this._trackChange(function(){n._text=e;n._url=t})}},{key:"createElement",value:function(e,t,n){this._base=e.group();this._interactive=e.group();this._background=this._base.rect(0,0,0,0);this._linkIcon=this._base.image(this.iconUri,0,0,0,0);this._touch=this._interactive.rect(0,0,0,0).addClass("touch-foreground");this._textbox=this._base.text(0,0,"");this._arranger.invalidateDom();if(n){this._gesture=new p["default"](this,this.canvas);this._gesture._dragThreshold=0;this._gesture.start(this._touch.node);this._gesture.click.subscribe(this._handleClick,this)}if(t){this._moreOptionsHandle=new C["default"](this);this._moreOptionsHandle.render(this._interactive);this._moreOptionsHandle.mouseEnter.subscribe(this.hoverIn,this);this._moreOptionsHandle.mouseLeave.subscribe(this.hoverOut,this);this._drag=new p["default"](this,this.canvas);this._drag.start(this._touch.node);this._drag.dragStart.subscribe(this._repositionStart,this);this._drag.dragMove.subscribe(this._repositionMove,this);this._drag.dragEnd.subscribe(this._repositionEnd,this);this._drag.mouseEnter.subscribe(this.hoverIn,this);this._drag.mouseLeave.subscribe(this.hoverOut,this)}}},{key:"hoverIn",value:function(){this.tryUpdate()}},{key:"hoverOut",value:function(){this.tryUpdate()}},{key:"_repositionStart",value:function(){this._dragStartState=this.snapshot()}},{key:"_repositionMove",value:function(e){this.location=e.controlStart.plus(e.delta)}},{key:"_repositionEnd",value:function(){this.focus();this._onChanged(this._dragStartState)}},{key:"update",value:function(e,t,n){this._background.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,fill:y["default"].BACKGROUND_GREY,stroke:y["default"].CK_DISABLED_GREY,strokeWidth:2,filter:this._background.paper.filter(this._shadowFilter)});this._linkIcon.attr({href:this.iconUri,x:this.location.x+20,y:this.location.y+(this.isVideoLink?18:16),width:20,height:20,preserveAspectRatio:"xMidYMid meet"});this._touch.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:"transparent",cursor:"pointer"});this._renderAdjustedText(this.center.y,this._initialFontSize,1,this.text);if(t){this._background.attr({stroke:this.hovering||this.hasFocus?y["default"].CK_GREEN:y["default"].CK_DISABLED_GREY});this._moreOptionsHandle.location=this.location.plus(new d["default"](this.width,0));this._moreOptionsHandle.visibility=this.hovering||this.hasFocus?"visible":"hidden"}else n&&this._touch.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,fill:"transparent",cursor:"pointer"})}},{key:"_renderAdjustedText",value:function(e,t,n,i){this._renderText(e,t,i);if(this._linesOfText<=n){e=this.location.y+(this.height-2-this._newHeight)/2;this._renderText(e,t,i)}else n+1>this.MAX_LINES?this._renderAdjustedText(e,t,n,this._truncatedText):this._renderAdjustedText(e,t-1,n+1,i)}},{key:"_renderText",value:function(e,t,n){var i=this._textLocation(e);this._textbox.attr({fontFamily:"GothamRoundedMedium",alignmentBaseline:"middle",fontSize:t,pointerEvents:"none"});this._arranger.renderText(i,this._textbox,n||this.text,170,[new S.ColorSpan(0,null,y["default"].CK_GREEN)],t)}},{key:"_textLocation",value:function(e){return new d["default"](this.location.x+60,e)}},{key:"warnBeforeDeletion",value:function(){this._background.attr({stroke:y["default"].CK_WARN})}},{key:"_handleClick",value:function(){this.isVideoLink?I["default"].show(v["default"].get.$mdDialog,this.url):v["default"].get.$window.open(this.url)}},{key:"handleMoreOptionsClicked",value:function(e){var t=this;this.focus();this.moreOptionsManager.openMenu(e).then(function(e){e===E.ContextMenuOptions.Edit?t.moreOptionsManager.editLink(t.text,t.url).then(function(e){var n=e.title,i=e.url;t.resetTextAndUrl(n,i)}):e===E.ContextMenuOptions.Delete&&t["delete"]()})}},{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._size=e._size||this._size;this._text=e._text||this._text;this._url=e._url||this._url;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_size:this._size,_text:this._text,_url:this._url}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._size,n._text,n._url)}},{key:"url",get:function(){return this._url}},{key:"text",get:function(){return this._text}},{key:"isVideoLink",get:function(){return this.url.indexOf("youtube.com")>=0||this.url.indexOf("youtu.be")>=0}},{key:"iconUri",get:function(){return this.isVideoLink?"assets/colored-icons/youtube.svg":"assets/colored-icons/link.svg"}},{key:"MAX_LINES",get:function(){return 3}},{key:"_linesOfText",get:function(){return this._arranger.lineData.length}},{key:"_newHeight",get:function(){return this._arranger._cachedLineHeight*this._linesOfText}},{key:"_truncatedText",get:function(){var e=this._arranger.lineData[2],t=e.endIdx;return this.text.slice(0,t-3)+"..."}},{key:"hovering",get:function(){return this._drag.hovering||this._moreOptionsHandle.hovering}}],[{key:"type",get:function(){return"link"}}]);return t}(l["default"]);t["default"]=A;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(232),a=n(144),c=s(a),l=n(236),u=n(238),d=s(u),h=n(18),f=s(h),g=n(237),p=s(g),m=n(239),v=s(m),_=function(){function e(){r(this,e);this.spanData=[];this.text="";this.colors=[];this.lineHeightScale=1;this._cachedLineHeight=14;this.lineWidth=0;this.lineData=[];this._dirtyLayout=!0;this._dirtyRender=!0}i(e,[{key:"renderText",value:function(e,t,n,i,r,s){1===n.length&&this._isCarriageReturn(n)&&(n+=" ");if(this._notInDom(t.node))this.invalidateDom();else{r=p["default"].arrangeColors(r,n);if(this.text!==n||this.lineWidth!==i||!angular.equals(this.colors,r)||this.fontSize!==s){this.invalidateLayout();this.text=n;this.colors=r;this.lineWidth=i;this.fontSize=s}if(this._dirtyLayout){if(!n){t.attr({text:"abc"});this._cachedLineHeight=t.node.getBBox().height*this.lineHeightScale}t.attr({text:n});this.spanData=this._arrangeText(t.node,n,i,this._findBoundaries(n),this.colors);this._dirtyLayout=!1}if(this._dirtyRender){t.attr({text:this.spanData.map(function(e){return e.text})});this._dirtyRender=!1}for(var o=t.selectAll("tspan"),a=0;a<this.spanData.length;a++){this.spanData[a].offset=e;this.spanData[a].tspan=o[a]}}}},{key:"invalidateLayout",value:function(){this._dirtyLayout=!0;this.invalidateDom()}},{key:"invalidateDom",value:function(){this._dirtyRender=!0}},{key:"_arrangeText",value:function(e,t,n,i,r){this._textBBox=e.getBBox();this._measuredTextHeight=this._textBBox.height;var s=this._measuredTextHeight?this._measuredTextHeight*this.lineHeightScale:this._cachedLineHeight;this._cachedLineHeight=s;this.lineData=this._measureLines([],t,0,e,n,s,i);return this._formatLines([],t,e,this.lineData,r[0],r.slice(1))}},{key:"_measureLines",value:function(e,t,n,i,r,s,o){if(0===o.length)return e;var a,l=this._measureLine(t,n,i,r,o);if(e.length>0)a=e[e.length-1].location;else{var u=f["default"].get.isWindows?.8*this._measuredTextHeight:this._measuredTextHeight;a=new c["default"](this._textBBox.x,u-s)}l.line.location=new c["default"](0,a.y+s);l.line.height=s;return this._measureLines(e.concat([l.line]),t,l.line.endIdx,i,r,s,l.breaks)}},{key:"_measureLine",value:function(e,t,n,i,r,s){var o=r[0],a=this._locationOfChar(n,e,t),l=this._locationOfChar(n,e,o.index),u=l.x-a.x,d=new c["default"](0,0);o.index>0&&(d="end"===o.type?this._getEndPositionOfChar(n,o.index-1):"char"===o.type?this._getStartPositionOfChar(n,o.index):this._getStartPositionOfChar(n,o.index-1));if(d.x-a.x>i){if(s){var h=this._locationOfChar(n,e,s.index);return{breaks:r,line:new y(t,s.index,h.x-a.x)}}var f=o.index,g=l;do{f--;g=this._getStartPositionOfChar(n,f)}while(g.x-a.x>i);f===t&&(f+=1);g=f===e.length?this._getEndPositionOfChar(n,f-1):this._getStartPositionOfChar(n,f);return{breaks:r,line:new y(t,f,g.x-a.x)}}return"newline"===o.type?{breaks:r.slice(1),line:new y(t,o.index,u)}:"end"===o.type?{breaks:[],line:new y(t,e.length,u)}:this._measureLine(e,t,n,i,r.slice(1),o)}},{key:"_locationOfChar",value:function(e,t,n){return""===t?new c["default"](0,0):n<t.length?this._getStartPositionOfChar(e,n):this._getEndPositionOfChar(e,n-1)}},{key:"_formatLines",value:function(e,t,n,i,r,s){if(0===i.length)return e;var o=i[0],a=s.filter(function(e){return e.index<o.endIdx}),c=r;a.length>0&&(c=a[a.length-1]);var l=this._createSpans([],t,n,o,o.startIdx,o.location.x,r,a);return this._formatLines(e.concat(l),t,n,i.slice(1),c,s.slice(a.length))}},{key:"_createSpans",value:function(e,t,n,i,r,s,o,a){if(0===a.length)return e.concat([new k(r,t.substring(r,i.endIdx),o.color,new c["default"](s,i.location.y),i.width-s,i.height)]);var l=0,u=[],d=a[0],h=Math.min(d.index,i.endIdx);if(h>r){l=this._getStartPositionOfChar(n,h).x-this._getStartPositionOfChar(n,r).x;u.push(new k(r,t.substring(r,h),o.color,new c["default"](s,i.location.y),l,i.height))}return this._createSpans(e.concat(u),t,n,i,h,s+l,d,a.slice(1))}},{key:"_findBoundaries",value:function(e){for(var t=new v["default"](e),n=[],i=t.nextBreak();i;){var r=e[i.position-1],s=this._isSpaceOrTab(r),o=this._isNewLine(r)||i.required,a=i.position,c=void 0;if(s)c="space";else if(o)c="newline";else{if(a===e.length)break;c="char"}n.push({type:c,index:a});i=t.nextBreak()}return[].concat(n,[{index:e.length,type:"end"}]).sort(function(e,t){return e.index-t.index})}},{key:"_isSpaceOrTab",value:function(e){var t=/[ \t]+/g;return!!t.exec(e)}},{key:"_isNewLine",value:function(e){var t=/\n/g;return!!t.exec(e)}},{key:"_isCarriageReturn",value:function(e){return 10===e.charCodeAt(0)}},{key:"cursorForPoint",value:function(e){if(0===this.text.length)return this.defaultCursor();for(var t=this.spanData[this.spanData.length-1],n=0;n<this.spanData.length;n++){var i=this.spanData[n];if(e.y>=i.location.y-i.height&&e.y<=i.location.y){t=i;if(e.x>=i.location.x&&e.x<i.location.x+i.width)break}}var r=t.location.x+t.width,s=Math.abs(r-e.x),a=!1,l=t.startIdx+t.text.length-1,u=this.spanEndsWithNewLineCharacter(t),d=0;if(u&&e.x>r)return this.cursorForIndex(l,!0);if(e.y<t.location.y)for(var h=0;h<t.text.length;h++){t.text.length>1&&(d=this._getStartPositionOfChar(t.tspan.node,h).x-t.offset.x);var f=Math.abs(d-e.x);if(s>f){s=f;r=d;a=!0;l=h+t.startIdx}}return new o.CursorInfo(new c["default"](r,t.location.y-t.height+this.spaceBetweenTopOfRowAndTopOfText),l,a,t.height,e)}},{key:"cursorForIndex",value:function(e,t){if(0===this.text.length)return this.defaultCursor();var n=this.spanData.find(function(n){return n.containsIndex(t?e:e-1)});(!n||e>=this.text.length-1&&!t)&&(n=this.spanData[this.spanData.length-1]);var i,r,s=this.spanEndsWithNewLineCharacter(n);if(s&&(e-n.startIdx<1||n.text.length<=1)){i=new c["default"](n.location.x,n.location.y-n.height+this.spaceBetweenTopOfRowAndTopOfText);t=!0}else if(e>=this.text.length){i=new c["default"](n.location.x+n.width,n.location.y-n.height+this.spaceBetweenTopOfRowAndTopOfText);e=this.text.length-1;t=!1}else if(t){r=this._getStartPositionOfChar(n.tspan.node,e-n.startIdx);i=new c["default"](r.x-n.offset.x,n.location.y-n.height+this.spaceBetweenTopOfRowAndTopOfText)}else if(e-n.startIdx<n.text.length-1){r=this._getStartPositionOfChar(n.tspan.node,e-n.startIdx+1);i=new c["default"](r.x-n.offset.x,n.location.y-n.height+this.spaceBetweenTopOfRowAndTopOfText)}else i=new c["default"](n.location.x+n.width,n.location.y-n.height+this.spaceBetweenTopOfRowAndTopOfText);return new o.CursorInfo(i,e,!!t,n.height,e)}},{key:"defaultCursor",value:function(){return new o.CursorInfo(new c["default"](0,0),0,!0,this._cachedLineHeight,0)}},{key:"spanEndsWithNewLineCharacter",value:function(e){return 10===e.text.charCodeAt([e.text.length-1])}},{key:"selectionForPoints",value:function(e,t){var n=this.cursorForPoint(e),i=this.cursorForPoint(t);return this.selectionForCursors(n,i)}},{key:"selectionForIndices",value:function(e,t,n,i){var r=this.cursorForIndex(e,t),s=this.cursorForIndex(n,i);return this.selectionForCursors(r,s)}},{key:"selectionForWordAtCursor",value:function(e){for(var t=e.textIndex,n=t,i=t,r=!0,s=/[a-zA-Z\d_]/,o=t-1;o>=-1;o--)if(0>o||!this.text[o].match(s)){
n=o+1;break}for(var o=t;o<=this.text.length;o++)if(o===this.text.length){i=o-1;r=!1}else if(!this.text[o].match(s)){i=o;break}return this.selectionForIndices(Math.min(n,t),!0,Math.max(i,t),r)}},{key:"selectionForCursors",value:function(e,t){var n=e.before?e.index:e.index+1,i=t.before?t.index:t.index+1,r=[],s={};if(i>n){s.start=e;s.startIndex=n;s.end=t;s.endIndex=i}else{if(!(n>i))return new l.SelectionInfo(e,t,n,i,r,t);s.end=e;s.endIndex=n;s.start=t;s.startIndex=i}for(var o=!1,a=0;a<this.lineData.length;a++){var u=this.lineData[a];u.endIdx>s.startIndex&&(o=!0);if(o){var h=u.location.minus(new c["default"](0,u.height-this.spaceBetweenTopOfRowAndTopOfText)),f=u.width,g=u.height;if(u.startIdx<s.startIndex&&s.start.location.y.toFixed(2)===h.y.toFixed(2)){h=s.start.location;f-=s.start.location.x-u.location.x}s.endIndex<u.endIdx&&(f=s.end.location.x-h.x);r.push(new d["default"](h.x,h.y,f,g))}if(s.endIndex<=u.endIdx)break}return new l.SelectionInfo(s.start,s.end,s.startIndex,s.endIndex,r,t)}},{key:"_getStartPositionOfChar",value:function(e,t){try{return e.getStartPositionOfChar(t)}catch(n){f["default"].get.$log.warn(n,this.text,e,t);return new c["default"](0,0)}}},{key:"_getEndPositionOfChar",value:function(e,t){try{return e.getEndPositionOfChar(t)}catch(n){f["default"].get.$log.warn(n,this.text,e,t);return new c["default"](0,0)}}},{key:"_notInDom",value:function(e){return!f["default"].get.$document[0].body.contains(e)}},{key:"spaceBetweenTopOfRowAndTopOfText",get:function(){return.15*this._cachedLineHeight}}]);return e}();t["default"]=_;var y=function(){function e(t,n,i,s,o){r(this,e);this.startIdx=t;this.endIdx=n;this.width=i;this.height=s;this.location=o}i(e,[{key:"containsIndex",value:function(e){return e>=this.startIdx&&e<this.endIdx}}]);return e}(),k=function(){function e(t,n,i,s,o,a,l){r(this,e);n||(n="");this.startIdx=t;this.text=n;this.color=i;this.location=s;this.width=o;this.height=a;this.tspan=l;this.offset=new c["default"](0,0)}i(e,[{key:"containsIndex",value:function(e){return e>=this.startIdx&&e<this.startIdx+this.text.length}},{key:"tspan",get:function(){return this._tspan},set:function(e){this._tspan=e;if(this._tspan){this._tspan.addClass("noselect");this._tspan.attr({x:this.location.x+this.offset.x,y:this.location.y+this.offset.y,fill:this.color,pointerEvents:"none"})}}}]);return e}();e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(18),d=a(u),h=n(144),f=a(h),g=n(146),p=a(g),m=n(233),v=a(m),_=function(e){function t(e,n,r){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"cursor","cursor");this._info=n;this._size=new p["default"](1.5,10);this._visible=!0;this._target=e;this._color=r||v["default"].DEFAULT_TEXT_COLOR}r(t,e);s(t,[{key:"createElement",value:function(e){this._rect=e.rect(0,0,0,0)}},{key:"update",value:function(){if(this._info){this._size._height=this._info.height;this._location=new f["default"](this._info.location.x+this._target.offset.x,this._info.location.y+this._target.offset.y)}this._rect.attr({x:this._location.x,y:this._location.y,width:this.width,height:this.height,fill:this._color})}},{key:"show",value:function(e){var t=this;e&&(this.info=e);this.hide();this._visible=!0;this.visibility="inherit";this._timer=d["default"].get.$window.setInterval(function(){t.toggleVisibility()},500)}},{key:"hide",value:function(){d["default"].get.$window.clearInterval(this._timer);this.visibility="hidden";this._visible=!1}},{key:"toggleVisibility",value:function(){this.visibility="inherit"===this.visibility?"hidden":"inherit"}},{key:"info",get:function(){return this._info},set:function(e){this._info=e;this.show()}},{key:"visible",get:function(){return this._visible}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}}]);return t}(l["default"]);t["default"]=_;var y=function(){function e(t,n,i,r,s){o(this,e);this.location=t;this.index=n;this.before=i;this.height=r;this.target=s}s(e,[{key:"targetIsIndex",get:function(){return angular.isNumber(this.target)}},{key:"targetIsPoint",get:function(){return!this.targetIsIndex}},{key:"textIndex",get:function(){return this.before?this.index:this.index-1}}]);return e}();t.CursorInfo=y},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(234),l=a(c),u=n(146),d=a(u),h=function(e){function t(e,n,r,s,a,c,u,h,f,g,p){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._text=r||this._text;this._location=s||this._location;this._fontSize=c||this._fontSize;this._size=a||new d["default"](100+10*this._fontSize,200);this._padding=u||this._padding;this._colorSpans=h||this._colorSpans;this._activeColor=f||this._activeColor;this._backgroundColor=g||l["default"].DEFAULT_BACKGROUND_COLOR;this._borderColor=p||l["default"].DEFAULT_BORDER_COLOR}r(t,e);s(t,[{key:"merge",value:function(e){this._text=angular.isDefined(e._text)?e._text:this._text;this._colorSpans=e._colorSpans||this._colorSpans;var t=this._fontSize;this._fontSize=e._fontSize||this._fontSize;this._size=e._size||this._size;this._location=e._location||this._location;this._metadata=e._metadata||this._metadata;this._backgroundColor=e._backgroundColor||this._backgroundColor;this._borderColor=e._borderColor||this._borderColor;this._fontSize!==t&&this._arranger.invalidateLayout();this.tryUpdate()}},{key:"snapshot",value:function(){return{_text:this._text,_colorSpans:this._colorSpans,_fontSize:this._fontSize,_size:this._size,_location:this._location,_metadata:this._metadata,_backgroundColor:this._backgroundColor,_borderColor:this._borderColor}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._text,n._location,n._size,n._fontSize,void 0,n._colorSpans,void 0,n._backgroundColor,n._borderColor)}}],[{key:"type",get:function(){return"textbox"}},{key:"CHARACTER_LIMIT",get:function(){return 4e3}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(144),l=a(c),u=n(146),d=a(u),h=n(131),f=a(h),g=n(235),p=a(g),m=n(183),v=a(m),_=n(152),y=a(_),k=n(231),b=a(k),S=n(232),w=a(S),C=n(236),E=a(C),T=n(18),I=a(T),A=n(147),x=a(A),O=n(149),P=a(O),R=n(237),D=a(R),M=function(){function e(){r(this,e)}i(e,null,[{key:"DASHED",get:function(){return"dashed"}},{key:"SOLID",get:function(){return"solid"}},{key:"DEFAULT_DASH_SPACING",get:function(){return"5,5"}}]);return e}();t.BorderStyle=M;var N=function(e){function t(e,n,i){var o=this;r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,i);this._location=new l["default"](100,50);this._text="";this._fontSize=t.DEFAULT_FONT_SIZE;this._size=new d["default"](300,200);this._padding=t.DEFAULT_PADDING;this._minSize=new d["default"](40,40);this._colorSpans=[];this._activeColor=t.DEFAULT_TEXT_COLOR;this._backgroundColor=t.DEFAULT_BACKGROUND_COLOR;this._borderColor=t.DEFAULT_BORDER_COLOR;this._borderStyle=M.SOLID;this._placeholderText=t.DEFAULT_PLACEHOLDER_TEXT;this._editBoxBorderColor=t.DEFAULT_EDIT_BOX_BORDER_COLOR;this._selectionChanged=new x["default"](this);this._activeStateChanged=new x["default"](this);this._enableResize=!0;this._enableRemove=!0;this._enableReposition=!0;this._background=void 0;this._content=void 0;this._interactive=void 0;this._arranger=new b["default"];this._arranger.lineHeightScale=I["default"].get.isWindows?1:1.2;this._cursor=new w["default"](this,void 0,this._activeColor);this._selection=new E["default"](this);this._colorSpanArranger=new D["default"];this._previousStartIndex=void 0;this._previousEndIndex=void 0;this._anonSetTouched=function(){o.untouched=!1};this.previewChanged.once(function(){return o._anonSetTouched()},this)}o(t,e);i(t,[{key:"setText",value:function(e,t,n){var i=this;this._trackChange(function(){var r=i.previousStartIndex,s=i.previousEndIndex;if(angular.isUndefined(r)||angular.isUndefined(s)){r=t-1;s=n-1}i._colorSpans=i._colorSpanArranger.updateColorSpans(i._colorSpans,i._text,e,r,s,t,n,i._activeColor);var o=i._text;i._text=e;i._shouldResetActiveColor(r,s,t,e,o)&&i.setActiveColor(t)})}},{key:"_shouldResetActiveColor",value:function(e,t,n,i,r){var s=t-e,o=i.length-r.length;return this.activeColorForCurrentIndex(n)!==this._activeColor&&0===s&&0>o}},{key:"setSelection",value:function(e,t){this._previousStartIndex=e;this._previousEndIndex=t;this._selection.info=this._arranger.selectionForIndices(this.isCursorStarting?t:e,!0,this.isCursorStarting?e:t,!0);this.tryUpdate()}},{key:"raiseActiveStateChanged",value:function(){this._activeStateChanged.raise({newColor:this._activeColor,newBackgroundColor:this._backgroundColor,newBorderColor:this._borderColor})}},{key:"setActiveColor",value:function(e){this.activeColor=this.activeColorForCurrentIndex(e)}},{key:"activeColorForCurrentIndex",value:function(e){var t=0===e?0:e-1;return this.activeColorForIndex(t)}},{key:"activeColorForIndex",value:function(e){if(this.text.length>0){var t=this._findActiveColorSpan(e);if(t)return t.color}return this._activeColor}},{key:"_findActiveColorSpan",value:function(e){return D["default"].arrangeColors(this._colorSpans,this._text).find(function(t,n,i){var r=i[n+1];return!r||t.start<=e&&e<r.start})}},{key:"remove",value:function(){this._stopEvents();s(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"_stopEvents",value:function(){this._drag&&this._drag.stop();this._selectedDrag&&this._selectedDrag.stop();if(this._resizers){this._resizers.topLeft.remove();this._resizers.bottomLeft.remove();this._resizers.bottomRight.remove()}this._removeHandle&&this._removeHandle.remove()}},{key:"createElement",value:function(e,t){this._previousStartIndex=void 0;this._previousEndIndex=void 0;this._arranger.invalidateLayout();this._background=e.group().addClass("background");this._backgroundRect=this._background.rect(0,0,0,0);this._editBox=this._background.rect(0,0,0,0);this._content=e.group().addClass("content");this._textbox=this._content.text(0,0,"").addClass("textbox");this._textbox.node.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");if(t){this._selection.render(this._content);this._cursor.render(this._content)}this._interactive=e.group().addClass("interactive");if(t){this._interactRect=this._interactive.rect(0,0,0,0).addClass("touch-foreground");this._drag=new y["default"](this,this.canvas);this._drag.start(this._interactRect.node);this._drag.click.subscribe(this._click,this);this._drag.mouseEnter.subscribe(this.hoverIn,this);this._drag.mouseLeave.subscribe(this.hoverOut,this);this._drag.dragStart.subscribe(this._dragStart,this);this._drag.dragMove.subscribe(this._dragMove,this);this._drag.dragEnd.subscribe(this._dragEnd,this);this._drag.doubleclick.subscribe(this._doubleclick,this);this._drag.tripleclick.subscribe(this._tripleclick,this);if(this._enableReposition){this._selectedDragRect=this._interactive.rect(0,0,0,0).addClass("touch-foreground");this._selectedDrag=new y["default"](this,this.canvas);this._selectedDrag.start(this._selectedDragRect.node);this._selectedDrag.dragStart.subscribe(this._repositionStart,this);this._selectedDrag.dragMove.subscribe(this._repositionMove,this);this._selectedDrag.dragEnd.subscribe(this._repositionEnd,this)}this._enableResize&&(this._resizers={topLeft:this.createHandle(this._interactive,1,1,-1,-1),bottomLeft:this.createHandle(this._interactive,1,0,-1,1),bottomRight:this.createHandle(this._interactive,0,0,1,1)});if(this._enableRemove){this._removeHandle=new v["default"](this);this._removeHandle.render(this._interactive);this._removeHandle.mouseEnter.subscribe(this.hoverIn,this);this._removeHandle.mouseLeave.subscribe(this.hoverOut,this)}}}},{key:"createHandle",value:function(e,t,n,i,r){var s=new p["default"](this,t,n,i,r);s.resizeStarted.subscribe(this._resizeStarted,this);s.resizeComplete.subscribe(this._resizeComplete,this);s.size=new d["default"](14,14);s.render(e);return s}},{key:"update",value:function(e,n){this._backgroundRect.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,fill:this._backgroundColor===t.DEFAULT_BACKGROUND_COLOR?"transparent":this._backgroundColor,stroke:this._borderColor===t.DEFAULT_BORDER_COLOR?"transparent":this._borderColor,strokeWidth:2,strokeDasharray:this._borderStyle===M.DASHED?M.DEFAULT_DASH_SPACING:"inherit"});n&&this._editBox.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,fill:this.editBoxFill,stroke:this._editBoxBorderColor,strokeWidth:2,visibility:this.hasFocus||this.hovering||this.dragging?"inherit":"hidden"});this._textbox.attr({dominantBaseline:"alphabetical",fontFamily:"GothamRoundedMedium",fontSize:this._fontSize+"px"});var i=n&&!this.hasText&&!this.hasFocus,r=i?this._placeholderText:this.text;this._arranger.renderText(this.offset,this._textbox,r,this.width-2*this._padding.width,this.colorSpans,this._fontSize);this.resizeTextboxHeight();if(n){this.hasFocus?this._cursor.show():this._cursor.hide();this._selection.visibility=this.hasFocus?"inherit":"hidden";if(this._selection.info&&"inherit"===this._selection.visibility){var s=this._selection.info.start,o=this._selection.info.end;if(this.isCursorStarting){s=this._selection.info.end;o=this._selection.info.start}this._selection.info=this._arranger.selectionForIndices(s.index,s.before,o.index,o.before);this._cursor.info=this._selection.info.cursor}}if(n){this._interactRect.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,fill:"transparent",cursor:n&&this._enableReposition?this.hasFocus?"text":"move":"inherit"});this._enableReposition&&this._selectedDragRect.attr({x:this.location.x-5,y:this.location.y-5,height:this.height+10,width:this.width+10,cursor:"move",fill:"none",stroke:"transparent",strokeWidth:n&&this.hasFocus?"15px":"0px"});if(this._resizers){if(this.hasFocus){this._resizers.topLeft.location=this.location;this._resizers.bottomLeft.location=this.location.plus(new l["default"](0,this.height));this._resizers.bottomRight.location=this.location.plus(new l["default"](this.width,this.height))}this._resizers.topLeft.visibility=this.hasFocus?"inherit":"hidden";this._resizers.bottomLeft.visibility=this.hasFocus?"inherit":"hidden";this._resizers.bottomRight.visibility=this.hasFocus?"inherit":"hidden";this._resizers.topLeft.tryUpdate();this._resizers.bottomLeft.tryUpdate();this._resizers.bottomRight.tryUpdate()}if(this._removeHandle){this._removeHandle.location=this.location.plus(new l["default"](this.width,0));this._removeHandle.visibility=this.hasFocus||this.hovering?"visible":"hidden"}}}},{key:"setNewTextboxAttributes",value:function(){if(this._resizers){this._resizers.topLeft.visibility=this.hasFocus?"inherit":"hidden";this._resizers.bottomLeft.visibility=this.hasFocus?"inherit":"hidden";this._resizers.bottomRight.visibility=this.hasFocus?"inherit":"hidden"}}},{key:"warnBeforeDeletion",value:function(){this._editBox.attr({fill:"rgba(255, 255, 255, .9)",stroke:P["default"].CK_WARN,strokeWidth:2});if(this._resizers){this._resizers.topLeft.warnBeforeDeletion();this._resizers.bottomLeft.warnBeforeDeletion();this._resizers.bottomRight.warnBeforeDeletion()}}},{key:"resizeTextboxHeight",value:function(){this.size=new d["default"](this.width,this.newHeight||this.height)}},{key:"arrowPressed",value:function(e){switch(e){case 38:this._upArrowPressed();break;case 39:this._rightArrowPressed();break;case 40:this._downArrowPressed();break;case 37:this._leftArrowPressed()}}},{key:"_upArrowPressed",value:function(){var e=this._cursor.info.location.minus(new l["default"](0,this._cursor.info.height-1));this._selection.info=this._arranger.selectionForPoints(e,e);this._cursor.info=this._selection.info.cursor}},{key:"_leftArrowPressed",value:function(){var e=Math.max(0,this._selection.info.endIndex-1);this._selection.info=this._arranger.selectionForIndices(e,!0,e,!0);this._cursor.info=this._selection.info.cursor}},{key:"_downArrowPressed",value:function(){var e=this._cursor.info.location.plus(new l["default"](0,this._cursor.info.height+1));this._selection.info=this._arranger.selectionForPoints(e,e);this._cursor.info=this._selection.info.cursor}},{key:"_rightArrowPressed",value:function(){var e=Math.min(this.text.length,this._selection.info.endIndex+1);this._selection.info=this._arranger.selectionForIndices(e,!0,e,!0);this._cursor.info=this._selection.info.cursor}},{key:"shiftArrowPressed",value:function(e){switch(e){case 38:this._shiftUpArrowPressed();break;case 39:this._shiftRightArrowPressed();break;case 40:this._shiftDownArrowPressed();break;case 37:this._shiftLeftArrowPressed()}}},{key:"_shiftUpArrowPressed",value:function(){var e=this._selection.info.cursor.location.minus(new l["default"](0,this._cursor.info.height-1)),t=this.isCursorStarting?this._selection.info.end:this._selection.info.start,n=this._arranger.cursorForPoint(e);this.aboveBounds(e)&&(n=this._arranger.cursorForIndex(0,!0));this._selection.info=this._arranger.selectionForCursors(t,n)}},{key:"_shiftRightArrowPressed",value:function(){var e=Math.min(this.text.length,this._selection.info.cursor.index+1),t=this.isCursorStarting?this._selection.info.end:this._selection.info.start;this._selection.info=this._arranger.selectionForIndices(t.index,t.before,e,!0)}},{key:"_shiftDownArrowPressed",value:function(){var e=this._selection.info.cursor.location.plus(new l["default"](0,this._selection.info.cursor.height+1)),t=this._arranger.cursorForPoint(e),n=this.isCursorStarting?this._selection.info.end:this._selection.info.start;this._selection.info=this._arranger.selectionForCursors(n,t)}},{key:"_shiftLeftArrowPressed",value:function(){var e=Math.max(0,this._selection.info.cursor.index-1),t=this.isCursorStarting?this._selection.info.end:this._selection.info.start;this._selection.info=this._arranger.selectionForIndices(t.index,t.before,e,!0)}},{key:"aboveBounds",value:function(e){return e.y+this.location.y+this._padding.width<this.location.y}},{key:"hoverIn",value:function(){this.tryUpdate()}},{key:"hoverOut",value:function(){this.tryUpdate()}},{key:"_click",value:function(e){var t=e.relativeLocation.minus(new l["default"](this._padding.width,this._padding.height));this._selection.info=this._arranger.selectionForPoints(t,t);this.focus();this._selectionChanged.raise()}},{key:"_doubleclick",value:function(){if(this.hasFocus){this._selection.info=this._arranger.selectionForWordAtCursor(this._selection.info.cursor);this._selectionChanged.raise();this.tryUpdate()}}},{key:"_tripleclick",value:function(){if(this.hasFocus){this._selection.info=this._arranger.selectionForIndices(0,!0,this.text.length-1,!1);this._selectionChanged.raise();this.tryUpdate()}}},{key:"_repositionStart",value:function(){this._dragStartState=this.snapshot()}},{key:"_repositionMove",value:function(e){this.location=e.controlStart.plus(e.delta)}},{key:"_repositionEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"_dragStart",value:function(e){this._enableReposition&&this._repositionStart(e);this.hasFocus&&(this._textSelectionStart=e.relativeLocation.minus(new l["default"](this._padding.width,this._padding.height)))}},{key:"_dragMove",value:function(e){if(this.hasFocus){this._textSelectionEnd=new l["default"](Math.min(Math.max(this._textSelectionStart.x+e.delta.x,0),this.width),Math.min(Math.max(this._textSelectionStart.y+e.delta.y,0),this.height));this._selection.info=this._arranger.selectionForPoints(this._textSelectionStart,this._textSelectionEnd);this._cursor.info=this._selection.info.cursor}else this._enableReposition&&this._repositionMove(e)}},{key:"_dragEnd",value:function(){this.hasFocus?this._selectionChanged.raise():this._enableReposition&&this._repositionEnd()}},{key:"_resizeStarted",value:function(){this._dragStartState=this.snapshot()}},{key:"_resizeComplete",value:function(){this._onChanged(this._dragStartState)}},{key:"focus",value:function(){this._selection.info||(this._selection.info=this._arranger.selectionForIndices(this.text.length,!0,this.text.length,!0));s(Object.getPrototypeOf(t.prototype),"focus",this).call(this)}},{key:"text",get:function(){return this._text}},{key:"colorSpans",get:function(){return this._colorSpans}},{key:"isCursorStarting",get:function(){return this._selection.info.cursor.index===this._selection.info.start.index}},{key:"selectionInfo",get:function(){return this._selection&&this._selection._info}},{key:"startIndex",get:function(){return this.selectionInfo.startIndex}},{key:"endIndex",get:function(){return this.selectionInfo.endIndex}},{key:"previousStartIndex",get:function(){return this._previousStartIndex}},{key:"previousEndIndex",get:function(){return this._previousEndIndex}},{key:"cursor",get:function(){return this._cursor}},{key:"textColor",set:function(e){var t=this;this.activeColor=e;this.isTextSelected&&this._trackChange(function(){t._colorSpans=t._colorSpanArranger.updateSelectedTextColor(t._colorSpans,t.startIndex,t.endIndex-1,t._text,t._activeColor)})}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){var t=this;this._trackChange(function(){t._backgroundColor=e;t.raiseActiveStateChanged()})}},{key:"borderColor",get:function(){return this._borderColor},set:function(e){var t=this;this._trackChange(function(){t._borderColor=e;t.raiseActiveStateChanged()})}},{key:"isTextSelected",get:function(){return this._selection.info.startIndex<this._selection.info.endIndex}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){var n=this,i=e;i>t.FONT_SIZE_MAX?i=t.FONT_SIZE_MAX:i<t.FONT_SIZE_MIN&&(i=t.FONT_SIZE_MIN);i!==this.fontSize&&this._trackChange(function(){n._fontSize=i})}},{key:"isFontSizeAtMax",get:function(){return this.fontSize>=t.FONT_SIZE_MAX}},{key:"isFontSizeAtMin",get:function(){return this.fontSize<=t.FONT_SIZE_MIN}},{key:"activeColor",get:function(){return this._activeColor},set:function(e){this._activeColor=e;this._cursor&&(this._cursor.color=this._activeColor);this.raiseActiveStateChanged()}},{key:"offset",get:function(){return new l["default"](this.offsetX,this.offsetY)}},{key:"offsetX",get:function(){return this.location.x+this._padding.width}},{key:"offsetY",get:function(){return this.location.y+this._padding.height}},{key:"hovering",get:function(){return this._drag.hovering||this._removeHandle&&this._removeHandle.hovering}},{key:"dragging",get:function(){return this._drag&&this._drag.dragging}},{key:"editBoxFill",get:function(){var e=0;this.backgroundColor!==t.DEFAULT_BACKGROUND_COLOR?e=0:this.hasFocus?e=.9:this.dragging?e=.25:this.hovering&&(e=.5);return"rgba(255, 255, 255, "+e+")"}},{key:"newHeight",get:function(){return this._arranger._cachedLineHeight*this._arranger.lineData.length+2*this._padding.height}},{key:"hasText",get:function(){return angular.isDefined(this.text)&&this.text.trim().length>0}},{key:"selectionChanged",get:function(){return this._selectionChanged}},{key:"activeStateChanged",get:function(){return this._activeStateChanged}},{key:"cursorLocation",get:function(){return this.canvas.scale(this.cursor.info.location.plus(this.location))}}],[{key:"DEFAULT_FONT_SIZE",get:function(){return 25}},{key:"DEFAULT_TEXT_COLOR",get:function(){return P["default"].CK_ELEMENT_BLACK}},{key:"DEFAULT_BACKGROUND_COLOR",get:function(){return P["default"].CK_TRANSPARENT}},{key:"DEFAULT_BORDER_COLOR",get:function(){return P["default"].CK_TRANSPARENT}},{key:"DEFAULT_EDIT_BOX_BORDER_COLOR",get:function(){return P["default"].CK_GREEN}},{key:"FONT_INCREMENT",get:function(){return 5}},{key:"FONT_SIZE_MAX",get:function(){return 60}},{key:"FONT_SIZE_MIN",get:function(){return 10}},{key:"DEFAULT_PADDING",get:function(){return new d["default"](5,5)}},{key:"DEFAULT_PLACEHOLDER_TEXT",get:function(){return"Click here to type"}}]);return t}(f["default"]);t["default"]=N},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(144),d=a(u),h=n(146),f=a(h),g=n(152),p=a(g),m=n(147),v=a(m),_=n(149),y=a(_),k=function(e){function t(e,n,r,s,a){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e.id+"-handle"+n+r+s+a,"resize");this._target=e;this._xScale=n;this._yScale=r;this._widthScale=s;this._heightScale=a;this._gestureManager=new p["default"](e,e.canvas);this._gestureManager._dragThreshold=0;this._resizeStarted=new v["default"](this);this._resizeComplete=new v["default"](this)}r(t,e);s(t,[{key:"_dragStartHandler",value:function(){this._startWidth=this._target.width;this._startHeight=this._target.height;this.resizeStarted.raise({})}},{key:"_dragMoveHandler",value:function(e){this._target.resize(this._startWidth+e.delta.x*this._widthScale,this._startHeight+e.delta.y*this._heightScale);this._target.location=new d["default"](e.controlStart.x+Math.min(e.delta.x*this._xScale,this._startWidth-this._target.minWidth),e.controlStart.y+Math.min(e.delta.y*this._yScale,this._startHeight-this._target.minHeight))}},{key:"_dragEndHandler",value:function(e){this.resizeComplete.raise({size:this._target.size,location:this._target.location,oldSize:new f["default"](this._startWidth,this._startHeight),oldLocation:e.controlStart})}},{key:"createElement",value:function(e){this._circle=e.circle(0,0,1);this._gestureManager.start(this._circle.node);this._gestureManager.dragStart.subscribe(this._dragStartHandler,this);this._gestureManager.dragMove.subscribe(this._dragMoveHandler,this);this._gestureManager.dragEnd.subscribe(this._dragEndHandler,this)}},{key:"update",value:function(){this._circle.attr({fill:"#98D64A",cursor:"pointer",cx:this.location.x,cy:this.location.y,r:this.width/2})}},{key:"warnBeforeDeletion",value:function(){this._circle.attr({fill:y["default"].CK_WARN})}},{key:"remove",value:function(){this._gestureManager.stop();this.resizeStarted.clear();this.resizeComplete.clear();i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"resizeComplete",get:function(){return this._resizeComplete}},{key:"resizeStarted",get:function(){return this._resizeStarted}}]);return t}(l["default"]);t["default"]=k;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=function(e){function t(e,n){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"selection","selection");this._target=e;this._info=n}r(t,e);s(t,[{key:"createElement",value:function(e){return e.group()}},{key:"update",value:function(e){var t=e.selectAll("rect").items;if(this._info){for(var n=0;n<this._info.boxes.length;n++){t.length<=n&&t.push(e.rect(0,0,0,0));t[n].attr({x:this._info.boxes[n].location.x+this._target.offset.x,y:this._info.boxes[n].location.y+this._target.offset.y,width:this._info.boxes[n].width,height:this._info.boxes[n].height,fill:"rgba(0, 128, 255, .2)",visibility:this.visibility})}for(var n=this._info.boxes.length;n<t.length;n++)t[n].remove()}}},{key:"info",get:function(){return this._info},set:function(e){this._info=e;this.tryUpdate()}}]);return t}(l["default"]);t["default"]=u;var d=function(){function e(t,n,i,r,s,a){o(this,e);this.start=t;this.end=n;this.startIndex=i;this.endIndex=r;this.boxes=s;this.cursor=a}s(e,[{key:"hasSelectedText",get:function(){return this.startIndex!==this.endIndex}}]);return e}();t.SelectionInfo=d},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(233),c=o(a),l=function(){function e(){r(this,e)}i(e,[{key:"updateSelectedTextColor",value:function(t,n,i,r,s){t=e.arrangeColors(t,r);t=this._updateColorSpansForDeletion(t,n,i,r);return this._updateColorSpansForInsertion(t,n,i,r,s)}},{key:"updateColorSpans",value:function(t,n,i,r,s,o,a,c){t=e.arrangeColors(t,n);var l=s-r,u=i.length-n.length;if(0===l&&u>0)t=this._updateColorSpansForInsertion(t,r,a-1,i,c);else if(0===l&&0>u){var d=r+u,h=s-1;t=this._updateColorSpansForDeletion(t,d,h,n)}else if(l>0){var f=r,g=s-1;t=this._updateColorSpansForDeletion(t,f,g,n);var p=n.length-l,m=i.length-p,v=r,_=r+m-1;m>0&&(t=this._updateColorSpansForInsertion(t,v,_,i,c))}return e.arrangeColors(t,i)}},{key:"_updateColorSpansForInsertion",value:function(t,n,i,r,o){var a=i+1,c=a-n,l=!!r[a],d=this._spanAt(t,n),h=this._spanToLeftOf(t,n),f=t[0];if(0===n&&f&&f.color===o)t=this._shift(t,1,c);else if(0===n&&f&&f.color!==o)t=[new u(0,-1,o)].concat(s(this._shift(t,0,c)));else if(h.color===o)t=this._shift(t,n,c);else if(d&&d.color===o)t=[].concat(s(this._shift(t,n+1,c)));else if(d&&d.color!==o)t=[].concat(s(this._shift(t,n,c)),[new u(n,-1,o)]);else{t=[new u(n,-1,o)].concat(s(this._shift(t,n,c)));l&&(t=[].concat(s(t),[new u(a,-1,h.color)]))}return e.arrangeColors(t,r)}},{key:"_updateColorSpansForDeletion",value:function(t,n,i,r){if(n>i)throw new Error("Invalid parameters: deleteFrom must be less than or equal to deleteTo");if(0===r.length)return t;var o=i+1,a=!!r[o],c=-1*(o-n),l=this._spansBetween(t,n,i);if(0===l.length)t=this._shift(t,o,c);else if(l.length>0){var d=this._spanAt(t,o),h=!!d,f=this._spanToLeftOf(t,n);if(h||!a){t=this._sameColor(f,d)?this._removeSpans(t,n,i+1):this._removeSpans(t,n,i);t=this._shift(t,o,c)}else{t=[].concat(s(this._removeSpans(t,n,i)));var g=l[l.length-1];this._sameColor(f,g)||(t=[].concat(s(t),[new u(o,-1,g.color)]));t=this._shift(t,o,c)}}return e.arrangeColors(t,r)}},{key:"_shift",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return e.map(function(e){e.start>=t&&(e.start+=n);return e})}},{key:"_spanToLeftOf",value:function(e,t){return e.find(function(e,n,i){var r=i[n+1];return r?e.start<t&&t<=r.start:e.start<t})}},{key:"_spanAt",value:function(e,t){var n=e.find(function(e){return e.start===t});return n?new u(n.start,-1,n.color):void 0}},{key:"_spansBetween",value:function(e,t,n){return e.filter(function(e){return t<=e.start&&e.start<=n})}},{key:"_removeSpans",value:function(e,t,n){return e.filter(function(e){return e.start<t||e.start>n})}},{key:"_sameColor",value:function(e,t){return e&&t?e.color===t.color:!1}}],[{key:"arrangeColors",value:function(e,t){var n=e?e:[];n.find(function(e){return 0===e.index})||n.push(new u(0,0,c["default"].DEFAULT_TEXT_COLOR));return n.filter(function(e){return e.index<t.length||0===e.index}).sort(function(e,t){return e.index-t.index})}}]);return e}();t["default"]=l;var u=function(){function e(t,n,i){r(this,e);this._start=t;this._length=n;this._color=i}i(e,[{key:"start",get:function(){return this._start},set:function(e){this._start=e}},{key:"index",get:function(){return this._start}},{key:"length",get:function(){return this._length}},{key:"color",get:function(){return this._color}},{key:"type",get:function(){return"color"}}]);return e}();t.ColorSpan=u},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(144),a=s(o),c=n(146),l=s(c),u=function(){function e(t,n,i,s){r(this,e);this.location=new a["default"](t,n);this.size=new l["default"](i,s)}i(e,[{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){(function(){var t,i,r,s,o,a,c,l,u,d,h,f,g,p,m,v,_,y,k,b,S,w,C,E,T,I,A,x,O,P;S=n(240);E=n(242);O=n(243),s=O.BK,u=O.CR,g=O.LF,m=O.NL,o=O.CB,r=O.BA,b=O.SP,w=O.WJ,b=O.SP,s=O.BK,g=O.LF,m=O.NL,t=O.AI,i=O.AL,y=O.SA,k=O.SG,C=O.XX,c=O.CJ,h=O.ID,v=O.NS,T=O.characterClasses;P=n(244),d=P.DI_BRK,f=P.IN_BRK,a=P.CI_BRK,l=P.CP_BRK,_=P.PR_BRK,x=P.pairTable;A=E.toByteArray("AA4IAAAAAAAAAhqg5VV7NJtZvz7fTC8zU5deplUlMrQoWqmqahD5So0aipYWrUhVFSVBQ10iSTtUtW6nKDVF6k7d75eQfEUbFcQ9KiFS90tQEolcP23nrLPmO+esr/+f39rr/a293t/e7/P8nmfvlz0O6RvrBJADtbBNaD88IOKTOmOrCqhu9zE770vc1pBV/xL5dxj2V7Zj4FGSomFKStCWNlV7hG1VabZfZ1LaHbFrRwzzLjzPoi1UHDnlV/lWbhgIIJvLBp/pu7AHEdRnIY+ROdXxg4fNpMdTxVnnm08OjozejAVsBqwqz8kddGRlRxsd8c55dNZoPuex6a7Dt6L0NNb03sqgTlR2/OT7eTt0Y0WnpUXxLsp5SMANc4DsmX4zJUBQvznwexm9tsMH+C9uRYMPOd96ZHB29NZjCIM2nfO7tsmQveX3l2r7ft0N4/SRJ7kO6Y8ZCaeuUQ4gMTZ67cp7TgxvlNDsPgOBdZi2YTam5Q7m3+00l+XG7PrDe6YoPmHgK+yLih7fAR16ZFCeD9WvOVt+gfNW/KT5/M6rb/9KERt+N1lad5RneVjzxXHsLofuU+TvrEsr3+26sVz5WJh6L/svoPK3qepFH9bysDljWtD1F7KrxzW1i9r+e/NLxV/acts7zuo304J9+t3Pd6Y6u8f3EAqxNRgv5DZjaI3unyvkvHPya/v3mWVYOC38qBq11+yHZ2bAyP1HbkV92vdno7r2lxz9UwCdCJVfd14NLcpO2CadHS/XPJ9doXgz5vLv/1OBVS3gX0D9n6LiNIDfpilO9RsLgZ2W/wIy8W/Rh93jfoz4qmRV2xElv6p2lRXQdO6/Cv8f5nGn3u0wLXjhnvClabL1o+7yvIpvLfT/xsKG30y/sTvq30ia9Czxp9dr9v/e7Yn/O0QJXxxBOJmceP/DBFa1q1v6oudn/e6qc/37dUoNvnYL4plQ9OoneYOh/r8fOFm7yl7FETHY9dXd5K2n/qEc53dOEe1TTJcvCfp1dpTC334l0vyaFL6mttNEbFjzO+ZV2mLk0qc3BrxJ4d9gweMmjRorxb7vic0rSq6D4wzAyFWas1TqPE0sLI8XLAryC8tPChaN3ALEZSWmtB34SyZcxXYn/E4Tg0LeMIPhgPKD9zyHGMxxhxnDDih7eI86xECTM8zodUCdgffUmRh4rQ8zyA6ow/Aei+01a8OMfziQQ+GAEkhwN/cqUFYAVzA9ex4n6jgtsiMvXf5BtXxEU4hSphvx3v8+9au8eEekEEpkrkne/zB1M+HAPuXIz3paxKlfe8aDMfGWAX6Md6PuuAdKHFVH++Ed5LEji94Z5zeiJIxbmWeN7rr1/ZcaBl5/nimdHsHgIH/ssyLUXZ4fDQ46HnBb+hQqG8yNiKRrXL/b1IPYDUsu3dFKtRMcjqlRvONd4xBvOufx2cUHuk8pmG1D7PyOQmUmluisVFS9OWS8fPIe8LiCtjwJKnEC9hrS9uKmISI3Wa5+vdXUG9dtyfr7g/oJv2wbzeZU838G6mEvntUb3SVV/fBZ6H/sL+lElzeRrHy2Xbe7UWX1q5sgOQ81rv+2baej4fP4m5Mf/GkoxfDtT3++KP7do9Jn26aa6xAhCf5L9RZVfkWKCcjI1eYbm2plvTEqkDxKC402bGzXCYaGnuALHabBT1dFLuOSB7RorOPEhZah1NjZIgR/UFGfK3p1ElYnevOMBDLURdpIjrI+qZk4sffGbRFiXuEmdFjiAODlQCJvIaB1rW61Ljg3y4eS4LAcSgDxxZQs0DYa15wA032Z+lGUfpoyOrFo3mg1sRQtN/fHHCx3TrM8eTrldMbYisDLXbUDoXMLejSq0fUNuO1muX0gEa8vgyegkqiqqbC3W0S4cC9Kmt8MuS/hFO7Xei3f8rSvIjeveMM7kxjUixOrl6gJshe4JU7PhOHpfrRYvu7yoAZKa3Buyk2J+K5W+nNTz1nhJDhRUfDJLiUXxjxXCJeeaOe/r7HlBP/uURc/5efaZEPxr55Qj39rfTLkugUGyMrwo7HAglfEjDriehF1jXtwJkPoiYkYQ5aoXSA7qbCBGKq5hwtu2VkpI9xVDop/1xrC52eiIvCoPWx4lLl40jm9upvycVPfpaH9/o2D4xKXpeNjE2HPQRS+3RFaYTc4Txw7Dvq5X6JBRwzs9mvoB49BK6b+XgsZVJYiInTlSXZ+62FT18mkFVcPKCJsoF5ahb19WheZLUYsSwdrrVM3aQ2XE6SzU2xHDS6iWkodk5AF6F8WUNmmushi8aVpMPwiIfEiQWo3CApONDRjrhDiVnkaFsaP5rjIJkmsN6V26li5LNM3JxGSyKgomknTyyrhcnwv9Qcqaq5utAh44W30SWo8Q0XHKR0glPF4fWst1FUCnk2woFq3iy9fAbzcjJ8fvSjgKVOfn14RDqyQuIgaGJZuswTywdCFSa89SakMf6fe+9KaQMYQlKxiJBczuPSho4wmBjdA+ag6QUOr2GdpcbSl51Ay6khhBt5UXdrnxc7ZGMxCvz96A4oLocxh2+px+1zkyLacCGrxnPzTRSgrLKpStFpH5ppKWm7PgMKZtwgytKLOjbGCOQLTm+KOowqa1sdut9raj1CZFkZD0jbaKNLpJUarSH5Qknx1YiOxdA5L6d5sfI/unmkSF65Ic/AvtXt98Pnrdwl5vgppQ3dYzWFwknZsy6xh2llmLxpegF8ayLwniknlXRHiF4hzzrgB8jQ4wdIqcaHCEAxyJwCeGkXPBZYSrrGa4vMwZvNN9aK0F4JBOK9mQ8g8EjEbIQVwvfS2D8GuCYsdqwqSWbQrfWdTRUJMqmpnWPax4Z7E137I6brHbvjpPlfNZpF1d7PP7HB/MPHcHVKTMhLO4f3CZcaccZEOiS2DpKiQB5KXDJ+Ospcz4qTRCRxgrKEQIgUkKLTKKwskdx2DWo3bg3PEoB5h2nA24olwfKSR+QR6TAvEDi/0czhUT59RZmO1MGeKGeEfuOSPWfL+XKmhqpZmOVR9mJVNDPKOS49Lq+Um10YsBybzDMtemlPCOJEtE8zaXhsaqEs9bngSJGhlOTTMlCXly9Qv5cRN3PVLK7zoMptutf7ihutrQ/Xj7VqeCdUwleTTKklOI8Wep9h7fCY0kVtDtIWKnubWAvbNZtsRRqOYl802vebPEkZRSZc6wXOfPtpPtN5HI63EUFfsy7U/TLr8NkIzaY3vx4A28x765XZMzRZTpMk81YIMuwJ5+/zoCuZj1wGnaHObxa5rpKZj4WhT670maRw04w0e3cZW74Z0aZe2n05hjZaxm6urenz8Ef5O6Yu1J2aqYAlqsCXs5ZB5o1JJ5l3xkTVr8rJQ09NLsBqRRDT2IIjOPmcJa6xQ1R5yGP9jAsj23xYDTezdyqG8YWZ7vJBIWK56K+iDgcHimiQOTIasNSua1fOBxsKMMEKd15jxTl+3CyvGCR+UyRwuSI2XuwRIPoNNclPihfJhaq2mKkNijwYLY6feqohktukmI3KDvOpN7ItCqHHhNuKlxMfBAEO5LjW2RKh6lE5Hd1dtAOopac/Z4FdsNsjMhXz/ug8JGmbVJTA+VOBJXdrYyJcIn5+OEeoK8kWEWF+wdG8ZtZHKSquWDtDVyhFPkRVqguKFkLkKCz46hcU1SUY9oJ2Sk+dmq0kglqk4kqKT1CV9JDELPjK1WsWGkEXF87g9P98e5ff0mIupm/w6vc3kCeq04X5bgJQlcMFRjlFWmSk+kssXCAVikfeAlMuzpUvCSdXiG+dc6KrIiLxxhbEVuKf7vW7KmDQI95bZe3H9mN3/77F6fZ2Yx/F9yClllj8gXpLWLpd5+v90iOaFa9sd7Pvx0lNa1o1+bkiZ69wCiC2x9UIb6/boBCuNMB/HYR0RC6+FD9Oe5qrgQl6JbXtkaYn0wkdNhROLqyhv6cKvyMj1Fvs2o3OOKoMYTubGENLfY5F6H9d8wX1cnINsvz+wZFQu3zhWVlwJvwBEp69Dqu/ZnkBf3nIfbx4TK7zOVJH5sGJX+IMwkn1vVBn38GbpTg9bJnMcTOb5F6Ci5gOn9Fcy6Qzcu+FL6mYJJ+f2ZZJGda1VqruZ0JRXItp8X0aTjIcJgzdaXlha7q7kV4ebrMsunfsRyRa9qYuryBHA0hc1KVsKdE+oI0ljLmSAyMze8lWmc5/lQ18slyTVC/vADTc+SNM5++gztTBLz4m0aVUKcfgOEExuKVomJ7XQDZuziMDjG6JP9tgR7JXZTeo9RGetW/Xm9/TgPJpTgHACPOGvmy2mDm9fl09WeMm9sQUAXP3Su2uApeCwJVT5iWCXDgmcuTsFgU9Nm6/PusJzSbDQIMfl6INY/OAEvZRN54BSSXUClM51im6Wn9VhVamKJmzOaFJErgJcs0etFZ40LIF3EPkjFTjGmAhsd174NnOwJW8TdJ1Dja+E6Wa6FVS22Haj1DDA474EesoMP5nbspAPJLWJ8rYcP1DwCslhnn+gTFm+sS9wY+U6SogAa9tiwpoxuaFeqm2OK+uozR6SfiLCOPz36LiDlzXr6UWd7BpY6mlrNANkTOeme5EgnnAkQRTGo9T6iYxbUKfGJcI9B+ub2PcyUOgpwXbOf3bHFWtygD7FYbRhb+vkzi87dB0JeXl/vBpBUz93VtqZi7AL7C1VowTF+tGmyurw7DBcktc+UMY0E10Jw4URojf8NdaNpN6E1q4+Oz+4YePtMLy8FPRP");
I=new S(A);p=function(){function e(e){this.string=e;this.pos=0;this.lastPos=0;this.curClass=null;this.nextClass=null}var n,h,p;e.prototype.nextCodePoint=function(){var e,t;e=this.string.charCodeAt(this.pos++);t=this.string.charCodeAt(this.pos);if(e>=55296&&56319>=e&&t>=56320&&57343>=t){this.pos++;return 1024*(e-55296)+(t-56320)+65536}return e};h=function(e){switch(e){case t:return i;case y:case k:case C:return i;case c:return v;default:return e}};p=function(e){switch(e){case g:case m:return s;case o:return r;case b:return w;default:return e}};e.prototype.nextCharClass=function(e){null==e&&(e=!1);return h(I.get(this.nextCodePoint()))};n=function(){function e(e,t){this.position=e;this.required=null!=t?t:!1}return e}();e.prototype.nextBreak=function(){var e,t,i;null==this.curClass&&(this.curClass=p(this.nextCharClass()));for(;this.pos<this.string.length;){this.lastPos=this.pos;t=this.nextClass;this.nextClass=this.nextCharClass();if(this.curClass===s||this.curClass===u&&this.nextClass!==g){this.curClass=p(h(this.nextClass));return new n(this.lastPos,!0)}e=function(){switch(this.nextClass){case b:return this.curClass;case s:case g:case m:return s;case u:return u;case o:return r}}.call(this);if(null==e){i=!1;switch(x[this.curClass][this.nextClass]){case d:i=!0;break;case f:i=t===b;break;case a:i=t===b;if(!i)continue;break;case l:if(t!==b)continue}this.curClass=this.nextClass;if(i)return new n(this.lastPos)}else{this.curClass=e;if(this.nextClass===o)return new n(this.lastPos)}}if(this.pos>=this.string.length){if(this.lastPos<this.string.length){this.lastPos=this.string.length;return new n(this.string.length)}return null}};return e}();e.exports=p}).call(this)},function(e,t,n){var i,r;r=n(241);i=function(){function e(e){var t,n,i;t="function"==typeof e.readUInt32BE&&"function"==typeof e.slice;if(t||e instanceof Uint8Array){if(t){this.highStart=e.readUInt32BE(0);this.errorValue=e.readUInt32BE(4);n=e.readUInt32BE(8);e=e.slice(12)}else{i=new DataView(e.buffer);this.highStart=i.getUint32(0);this.errorValue=i.getUint32(4);n=i.getUint32(8);e=e.subarray(12)}e=r(e,new Uint8Array(n));e=r(e,new Uint8Array(n));this.data=new Uint32Array(e.buffer)}else this.data=e.data,this.highStart=e.highStart,this.errorValue=e.errorValue}var t,n,i,s,o,a,c,l,u,d,h,f,g,p,m,v;f=11;p=5;g=f-p;h=65536>>f;o=1<<g;c=o-1;l=2;t=1<<p;i=t-1;d=65536>>p;u=1024>>p;a=d+u;v=a;m=32;s=v+m;n=1<<l;e.prototype.get=function(e){var t;if(0>e||e>1114111)return this.errorValue;if(55296>e||e>56319&&65535>=e){t=(this.data[e>>p]<<l)+(e&i);return this.data[t]}if(65535>=e){t=(this.data[d+(e-55296>>p)]<<l)+(e&i);return this.data[t]}if(e<this.highStart){t=this.data[s-h+(e>>f)];t=this.data[t+(e>>p&c)];t=(t<<l)+(e&i);return this.data[t]}return this.data[this.data.length-n]};return e}();e.exports=i},function(e,t){function n(){this.table=new Uint16Array(16);this.trans=new Uint16Array(288)}function i(e,t){this.source=e;this.sourceIndex=0;this.tag=0;this.bitcount=0;this.dest=t;this.destLen=0;this.ltree=new n;this.dtree=new n}function r(e,t,n,i){var r,s;for(r=0;n>r;++r)e[r]=0;for(r=0;30-n>r;++r)e[r+n]=r/n|0;for(s=i,r=0;30>r;++r){t[r]=s;s+=1<<e[r]}}function s(e,t){var n;for(n=0;7>n;++n)e.table[n]=0;e.table[7]=24;e.table[8]=152;e.table[9]=112;for(n=0;24>n;++n)e.trans[n]=256+n;for(n=0;144>n;++n)e.trans[24+n]=n;for(n=0;8>n;++n)e.trans[168+n]=280+n;for(n=0;112>n;++n)e.trans[176+n]=144+n;for(n=0;5>n;++n)t.table[n]=0;t.table[5]=32;for(n=0;32>n;++n)t.trans[n]=n}function o(e,t,n,i){var r,s;for(r=0;16>r;++r)e.table[r]=0;for(r=0;i>r;++r)e.table[t[n+r]]++;e.table[0]=0;for(s=0,r=0;16>r;++r){E[r]=s;s+=e.table[r]}for(r=0;i>r;++r)t[n+r]&&(e.trans[E[t[n+r]]++]=r)}function a(e){if(!e.bitcount--){e.tag=e.source[e.sourceIndex++];e.bitcount=7}var t=1&e.tag;e.tag>>>=1;return t}function c(e,t,n){if(!t)return n;for(;e.bitcount<24;){e.tag|=e.source[e.sourceIndex++]<<e.bitcount;e.bitcount+=8}var i=e.tag&65535>>>16-t;e.tag>>>=t;e.bitcount-=t;return i+n}function l(e,t){for(;e.bitcount<24;){e.tag|=e.source[e.sourceIndex++]<<e.bitcount;e.bitcount+=8}var n=0,i=0,r=0,s=e.tag;do{i=2*i+(1&s);s>>>=1;++r;n+=t.table[r];i-=t.table[r]}while(i>=0);e.tag=s;e.bitcount-=r;return t.trans[n+i]}function u(e,t,n){var i,r,s,a,u,d;i=c(e,5,257);r=c(e,5,1);s=c(e,4,4);for(a=0;19>a;++a)C[a]=0;for(a=0;s>a;++a){var h=c(e,3,0);C[S[a]]=h}o(w,C,0,19);for(u=0;i+r>u;){var f=l(e,w);switch(f){case 16:var g=C[u-1];for(d=c(e,2,3);d;--d)C[u++]=g;break;case 17:for(d=c(e,3,3);d;--d)C[u++]=0;break;case 18:for(d=c(e,7,11);d;--d)C[u++]=0;break;default:C[u++]=f}}o(t,C,0,i);o(n,C,i,r)}function d(e,t,n){for(;;){var i=l(e,t);if(256===i)return g;if(256>i)e.dest[e.destLen++]=i;else{var r,s,o,a;i-=257;r=c(e,_[i],y[i]);s=l(e,n);o=e.destLen-c(e,k[s],b[s]);for(a=o;o+r>a;++a)e.dest[e.destLen++]=e.dest[a]}}}function h(e){for(var t,n,i;e.bitcount>8;){e.sourceIndex--;e.bitcount-=8}t=e.source[e.sourceIndex+1];t=256*t+e.source[e.sourceIndex];n=e.source[e.sourceIndex+3];n=256*n+e.source[e.sourceIndex+2];if(t!==(65535&~n))return p;e.sourceIndex+=4;for(i=t;i;--i)e.dest[e.destLen++]=e.source[e.sourceIndex++];e.bitcount=0;return g}function f(e,t){var n,r,s,o=new i(e,t);do{n=a(o);r=c(o,2,0);switch(r){case 0:s=h(o);break;case 1:s=d(o,m,v);break;case 2:u(o,o.ltree,o.dtree);s=d(o,o.ltree,o.dtree);break;default:s=p}if(s!==g)throw new Error("Data error")}while(!n);return o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest}var g=0,p=-3,m=new n,v=new n,_=new Uint8Array(30),y=new Uint16Array(30),k=new Uint8Array(30),b=new Uint16Array(30),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w=new n,C=new Uint8Array(320),E=new Uint16Array(16);s(m,v);r(_,y,4,3);r(k,b,2,1);_[28]=0;y[28]=258;e.exports=f},function(e,t,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o||t===d?62:t===a||t===h?63:c>t?-1:c+10>t?t-c+26+26:u+26>t?t-u:l+26>t?t-l+26:void 0}function n(e){function n(e){l[d++]=e}var i,r,o,a,c,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;c="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0;l=new s(3*e.length/4-c);o=c>0?e.length-4:e.length;var d=0;for(i=0,r=0;o>i;i+=4,r+=3){a=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3));n((16711680&a)>>16);n((65280&a)>>8);n(255&a)}if(2===c){a=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4;n(255&a)}else if(1===c){a=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2;n(a>>8&255);n(255&a)}return l}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,s,o,a=e.length%3,c="";for(r=0,o=e.length-a;o>r;r+=3){s=(e[r]<<16)+(e[r+1]<<8)+e[r+2];c+=n(s)}switch(a){case 1:s=e[e.length-1];c+=t(s>>2);c+=t(s<<4&63);c+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1];c+=t(s>>10);c+=t(s>>4&63);c+=t(s<<2&63);c+="="}return c}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),a="/".charCodeAt(0),c="0".charCodeAt(0),l="a".charCodeAt(0),u="A".charCodeAt(0),d="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n;e.fromByteArray=r}(t)},function(e,t){(function(){var e,n,i,r,s,o,a,c,l,u,d,h,f,g,p,m,v,_,y,k,b,S,w,C,E,T,I,A,x,O,P,R,D,M,N,L,F,U,$,q;t.OP=x=0;t.CL=l=1;t.CP=d=2;t.QU=R=3;t.GL=g=4;t.NS=I=5;t.EX=f=6;t.SY=F=7;t.IS=b=8;t.PR=P=9;t.PO=O=10;t.NU=A=11;t.AL=n=12;t.HL=v=13;t.ID=y=14;t.IN=k=15;t.HY=_=16;t.BA=r=17;t.BB=s=18;t.B2=i=19;t.ZW=q=20;t.CM=u=21;t.WJ=U=22;t.H2=p=23;t.H3=m=24;t.JL=S=25;t.JV=C=26;t.JT=w=27;t.RI=D=28;t.AI=e=29;t.BK=o=30;t.CB=a=31;t.CJ=c=32;t.CR=h=33;t.LF=E=34;t.NL=T=35;t.SA=M=36;t.SG=N=37;t.SP=L=38;t.XX=$=39}).call(this)},function(e,t){(function(){var e,n,i,r,s;t.DI_BRK=i=0;t.IN_BRK=r=1;t.CI_BRK=e=2;t.CP_BRK=n=3;t.PR_BRK=s=4;t.pairTable=[[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,n,s,s,s,s,s,s,s],[i,s,s,r,r,s,s,s,s,r,r,i,i,i,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,r,s,s,s,s,r,r,r,r,r,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[s,s,s,r,r,r,s,s,s,r,r,r,r,r,r,r,r,r,r,r,s,e,s,r,r,r,r,r,r],[r,s,s,r,r,r,s,s,s,r,r,r,r,r,r,r,r,r,r,r,s,e,s,r,r,r,r,r,r],[i,s,s,r,r,r,s,s,s,i,i,i,i,i,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,r,r,s,s,s,i,i,i,i,i,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,r,r,s,s,s,i,i,r,i,i,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,r,r,s,s,s,i,i,r,r,r,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[r,s,s,r,r,r,s,s,s,i,i,r,r,r,r,i,r,r,i,i,s,e,s,r,r,r,r,r,i],[r,s,s,r,r,r,s,s,s,i,i,r,r,r,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[r,s,s,r,r,r,s,s,s,r,r,r,r,r,i,r,r,r,i,i,s,e,s,i,i,i,i,i,i],[r,s,s,r,r,r,s,s,s,i,i,r,r,r,i,r,r,r,i,i,s,e,s,i,i,i,i,i,i],[r,s,s,r,r,r,s,s,s,i,i,r,r,r,i,r,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,r,r,s,s,s,i,r,i,i,i,i,r,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,r,r,s,s,s,i,i,i,i,i,i,r,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,i,r,s,s,s,i,i,r,i,i,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[i,s,s,r,i,r,s,s,s,i,i,i,i,i,i,i,r,r,i,i,s,e,s,i,i,i,i,i,i],[r,s,s,r,r,r,s,s,s,r,r,r,r,r,r,r,r,r,r,r,s,e,s,r,r,r,r,r,r],[i,s,s,r,r,r,s,s,s,i,i,i,i,i,i,i,r,r,i,s,s,e,s,i,i,i,i,i,i],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,s,i,i,i,i,i,i,i,i],[r,s,s,r,r,r,s,s,s,i,i,r,r,r,i,r,r,r,i,i,s,e,s,i,i,i,i,i,i],[r,s,s,r,r,r,s,s,s,r,r,r,r,r,r,r,r,r,r,r,s,e,s,r,r,r,r,r,r],[i,s,s,r,r,r,s,s,s,i,r,i,i,i,i,r,r,r,i,i,s,e,s,i,i,i,r,r,i],[i,s,s,r,r,r,s,s,s,i,r,i,i,i,i,r,r,r,i,i,s,e,s,i,i,i,i,r,i],[i,s,s,r,r,r,s,s,s,i,r,i,i,i,i,r,r,r,i,i,s,e,s,r,r,r,r,i,i],[i,s,s,r,r,r,s,s,s,i,r,i,i,i,i,r,r,r,i,i,s,e,s,i,i,i,r,r,i],[i,s,s,r,r,r,s,s,s,i,r,i,i,i,i,r,r,r,i,i,s,e,s,i,i,i,i,r,i],[i,s,s,r,r,r,s,s,s,i,i,i,i,i,i,i,r,r,i,i,s,e,s,i,i,i,i,i,r]]}).call(this)},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(146),d=a(u),h=n(152),f=a(h),g=n(149),p=a(g),m=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e.id,"more-options");if(angular.isUndefined(e.handleMoreOptionsClicked))throw new Error("onMoreOptionsClicked method needs to be defined on the target object");this._size=new d["default"](32,32);this._iconDiameter=14;this._target=e;this._gestureManager=new f["default"](this._target,this._target.canvas)}r(t,e);s(t,[{key:"createElement",value:function(e){this._base=e.group();this._background=this._base.circle(0,0,0);this._trashIcon=this._base.image("assets/colored-icons/moreoptions-white.svg",0,0,0,0);this._interactive=e.group();this._touch=this._interactive.circle(0,0,0).addClass("touch-foreground");this._gestureManager.start(this._interactive.node);this._gestureManager.click.subscribe(this._target.handleMoreOptionsClicked,this._target)}},{key:"update",value:function(){this._base.attr({visibility:this._visibility});this._background.attr({cx:this.location.x,cy:this.location.y,r:this.width/2,fill:p["default"].CK_GREEN});angular.isNumber(this._target.rotation)&&this._trashIcon.node.setAttribute("transform","rotate("+(360-this._target.rotation)+", "+this.location.x+", "+this.location.y+")");this._trashIcon.attr({x:this.location.x-this._iconDiameter/2,y:this.location.y-this._iconDiameter/2,width:this._iconDiameter,height:this._iconDiameter,preserveAspectRatio:"xMidYMid meet",style:"pointer-events:none;"});this._touch.attr({cx:this.location.x,cy:this.location.y,r:this.width/2,fill:"transparent",cursor:"pointer"})}},{key:"remove",value:function(){this._gestureManager.stop();this._gestureManager.click.unsubscribe(this._target.handleMoreOptionsClicked,this._target);i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"hovering",get:function(){return this._gestureManager.hovering}},{key:"mouseEnter",get:function(){return this._gestureManager.mouseEnter}},{key:"mouseLeave",get:function(){return this._gestureManager.mouseLeave}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"Edit",get:function(){return"edit"}},{key:"Delete",get:function(){return"delete"}}]);return e}();t.ContextMenuOptions=s;var o=function(){function e(t,n,i){r(this,e);this._mdPanelRef=t;this._deferred=n;this._toolbarService=i}e.$inject=["mdPanelRef","deferred","ToolbarService"];i(e,[{key:"edit",value:function(){this._mdPanelRef.close();this._deferred.resolve(s.Edit)}},{key:"delete",value:function(){this._mdPanelRef.close();this._deferred.resolve(s.Delete)}}],[{key:"show",value:function(t,n,i){var r=t.newPanelPosition().absolute().left(i.absoluteLocation.x-8+"px").top(i.absoluteLocation.y-10+"px"),s=n.defer();t.open({position:r,templateUrl:"app/components/canvas-context-menu/canvas-context-menu.html",controller:e,controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,panelClass:"canvas-context-menu",locals:{deferred:s},onRemoving:function(){s.reject()}});return s.promise}}]);return e}();t["default"]=o},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(133)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i,s){"ngInject";r(this,e);this.$mdDialog=t;this.$document=n;this.$window=i;this._stopped=!1;this._videoUrl=s;this._init()}e.$inject=["$mdDialog","$document","$window","videoUrl"];i(e,[{key:"_init",value:function(){var e=this;if(this.$window.innerWidth>this.$window.innerHeight){this._height=this.$window.innerHeight-200;this._width=1.76*this._height}else{this._width=this.$window.innerWidth-0;this._height=.56*this._width}this._loadScript("https://www.youtube.com/iframe_api").then(function(){YT.ready(function(){e.player=new YT.Player("player",{height:e._height,width:e._width,videoId:e.youtubeParser(e._videoUrl),events:{onReady:e.onPlayerReady.bind(e)}})})})}},{key:"onPlayerReady",value:function(e){this._stopped||e.target.playVideo()}},{key:"_loadScript",value:function(e){var t=this;return new s(function(n,i){var r=t.$document[0].createElement("script");r.setAttribute("src",e);r.onload=function(){return n()};r.onerror=function(){return i()};var s=angular.element("body");s[0]?s[0].appendChild(r):i()})}},{key:"youtubeParser",value:function(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=e.match(t);return n&&11===n[7].length?n[7]:!1}},{key:"openInNewTab",value:function(){this._stopped=!0;this.player&&angular.isFunction(this.player.pauseVideo)&&this.player.pauseVideo();this.$window.open(this._videoUrl)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"height",get:function(){return this._height}},{key:"width",get:function(){return this._width}},{key:"videoUrl",get:function(){return this._videoUrl}}],[{key:"show",value:function(t,n){return t.show({clickOutsideToClose:!0,escapeToClose:!0,templateUrl:"app/components/video-player-dialog/video-player-dialog.html",controller:e,controllerAs:"ctrl",locals:{videoUrl:n}})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(230),f=a(h),g=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return d["default"].preEncode(e,function(t,n){return{type:e.type,url:e.url,size:t,text:e.text,center:n}})}},{key:"decode",value:function(e,t){return d["default"].preDecode(e,function(n,i,r){return new f["default"](t,n,r,i,e.data.text,e.data.url)})}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(133)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(131),u=c(l),d=n(144),h=c(d),f=n(146),g=c(f),p=n(231),m=c(p),v=n(237),_=n(183),y=c(_),k=n(152),b=c(k),S=n(149),w=c(S),C=n(250),E=n(18),T=c(E),I=n(169),A=c(I),x=n(148),O=n(185),P=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"remove",value:function(){}},{key:"cursor",get:function(){return"pointer"}}]);return t}(x.DefaultPlacement),R=function(e){function t(e,n,r,s,a,c,l,u){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._location=r||new h["default"](100,200);this._size=s||new g["default"](100,130);this._url=c||"";this._preloadUrl=this.preloadUrl;this._text=a||"";this._score=l||0;this._viewedByStudent=u||!1;this._textboxArranger=new m["default"];this.loaded=this._preload();this._placement=new P}r(t,e);s(t,[{key:"createElement",value:function(e,t){this._root=e;this._base=e.group();this._interactive=e.group();this._textboxArranger.invalidateDom();this._background=this._base.rect(0,0,0,0);this._image=this._base.image(this.mappedUrl,0,0,0,0);this._textbox=this._base.text(0,0,"");this._touch=this._interactive.rect(0,0,0,0);if(t){this._removeHandle=new y["default"](this);this._removeHandle.render(this._interactive);this._removeHandle.mouseEnter.subscribe(this.hoverIn,this);this._removeHandle.mouseLeave.subscribe(this.hoverOut,this);this._removeHandle.visibility="hidden";this._drag=new b["default"](this,this.canvas);this._drag.start(this._touch.node);this._drag.click.subscribe(this.focus,this);this._drag.dragStart.subscribe(this._repositionStart,this);this._drag.dragMove.subscribe(this._repositionMove,this);this._drag.dragEnd.subscribe(this._repositionEnd,this);this._drag.mouseEnter.subscribe(this.hoverIn,this);this._drag.mouseLeave.subscribe(this.hoverOut,this)}this.classCode&&this.classCode.showStudentScoresUpdated&&this.classCode.showStudentScoresUpdated.subscribe(this._showStudentScoresUpdated,this)}},{key:"update",value:function(e,n){var i=Math.min(this.width,t.MaxWidth),r=this.height/this.width*i;if(!this.mappedUrl){i=98;r=80}this._image.attr({x:this.location.x,y:this.location.y,width:i,height:r,preserveAspectRatio:"xMidYMin meet"});var s=new h["default"](this.location.x+i/2,this.location.y+r);this._textbox.attr({x:s.x,y:s.y,fontFamily:"GothamRoundedMedium",fontSize:"18px",dominantBaseline:"middle",textAnchor:"middle",pointerEvents:"none"});this._textboxArranger.renderText(s,this._textbox,this.displayText,t.MaxWidth,[new v.ColorSpan(0,null,w["default"].CK_HEADER_GREY)]);var o=this._textbox.getBBox(),a=new g["default"](Math.max(i,o.w+20),r+o.h+10),c=new h["default"](this.location.x+i/2-a.width/2,this.location.y);this._touch.attr({x:c.x,y:c.y,width:a.width,height:a.height,stroke:"transparent",strokeWidth:"2px",fill:"transparent"});this._background.attr({x:c.x,y:c.y+r,width:a.width,height:o.height+10,rx:4,fill:"rgba(255, 255, 255, 0.85)"});if(n){this._touch.attr({stroke:this.hovering||this.hasFocus?w["default"].CK_GREEN:"transparent"});this._removeHandle.location=c.plus(new h["default"](a.width,0));this._removeHandle.visibility=this.hovering||this.hasFocus?"visible":"hidden"}}},{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._size=e._size||this._size;this._text=e._text||this._text;this._url=e._url||this._url;this._score=e._score||this._score;this._viewedByStudent=e._viewedByStudent||this._viewedByStudent;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_size:this._size,_text:this._text,_url:this._url,_score:this._score,_viewedByStudent:this._viewedByStudent}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._size,n._text,n._url,n._score,n._viewedByStudent)}},{key:"hoverIn",value:function(){this.tryUpdate()}},{key:"hoverOut",value:function(){this.tryUpdate()}},{key:"_repositionStart",value:function(){this._dragStartState=this.snapshot()}},{key:"_repositionMove",value:function(e){this.location=e.controlStart.plus(e.delta)}},{key:"_repositionEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"_showStudentScoresUpdated",value:function(){this._score&&this.tryUpdate()}},{key:"remove",value:function(){this.classCode&&this.classCode.showStudentScoresUpdated.unsubscribe(this._showStudentScoresUpdated,this);i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"warnBeforeDeletion",value:function(){this._touch.attr({stroke:w["default"].CK_WARN})}},{key:"_preload",value:function(){var e=this;return this._preloadUrl?T["default"].get.ImageEditService.loadImage(this._preloadUrl).then(function(n){var i=t.createSizeFromImage(n.image);if(i.width!==e.width||i.height!==e.height){e.size=i;e._onChanged(e.snapshot())}return n}):a.resolve()}},{key:"url",get:function(){return this._url}},{key:"mappedUrl",get:function(){return C.StickerMap[this.url]||this.url}},{key:"text",get:function(){return this._text}},{key:"score",get:function(){return A["default"].formatScore(this._score)}},{key:"displayText",get:function(){return this.hideScore?this.text:this.text+" +"+this.score}},{key:"hideScore",get:function(){return 0===this.score||this.isStudent&&!this.showStudentScores}},{key:"isStudent",get:function(){return this.viewerRole&&this.viewerRole===O.UserRoles.STUDENT}},{key:"classCode",get:function(){return this.assignment&&this.assignment.classCode}},{key:"showStudentScores",get:function(){return this.classCode&&this.classCode.showStudentScores}},{key:"viewedByStudent",get:function(){return this._viewedByStudent}},{key:"hovering",get:function(){return this._drag.hovering||this._removeHandle.hovering}},{key:"preloadUrl",get:function(){if(angular.isDefined(URL)&&this.mappedUrl){var e=new URL(this.mappedUrl);e.searchParams.set("ck_origin",T["default"].get.$location.host());return e.href}return this.mappedUrl}}],[{key:"createSizeFromImage",value:function(e){var n=new g["default"](e.naturalWidth,e.naturalHeight);n.width>=t.MaxWidth&&(n=new g["default"](t.MaxWidth,n.height/n.width*t.MaxWidth));return n}},{key:"type",get:function(){return"sticker"}},{key:"InitialStickerPosition",get:function(){return new h["default"](800,50)}},{key:"MaxWidth",get:function(){return 210}}]);return t}(u["default"]);t["default"]=R;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(169),c=o(a),l="https://storage.googleapis.com/classkick-assets/sticker-images/",u="https://www.googleapis.com/storage/v1/b/classkick-assets/o/sticker-images%2F",d=["apple","pencil","book","magnifying-glass","award","trophy","heart","lightbulb","flag","pink-star","gold-star","green-star","bee","butterfly","ladybug","bookworm","flower","blossom","owl","bird","chicken","bear","dog","giraffe","pig","squirrel","rabbit","robot","rocketship","diamond"],h={};t.StickerMap=h;var f=d.map(function(e){var t=""+l+e+".png";h[t]=""+u+e+".png?alt=media";return{name:e,url:t}});t.DefaultUserStickers=f;var g=function(){function e(){r(this,e)}i(e,null,[{key:"Custom",get:function(){return"custom"}},{key:"Stock",get:function(){return"stock"}},{key:"None",get:function(){return"none"}}]);return e}(),p=function(){function e(){r(this,e)}i(e,null,[{key:"Score",get:function(){return"score"}},{key:"CustomImages",get:function(){return"custom_images"}}]);return e}();t.UserStickerTags=p;var m=function(){function e(t,n,i,s,o,a){r(this,e);this._id=t;this._text=n;this._partialText=void 0;this._ownerId=i;this._imageUrl=s;this._created=o?moment(o):void 0;this._tags=a}i(e,[{key:"BlankStickerUrl",get:function(){return e.BLANK_STICKER_URL}},{key:"id",get:function(){return this._id}},{key:"text",get:function(){return this._text},set:function(e){this._text=e}},{key:"partialText",get:function(){if(angular.isUndefined(this._partialText)){var e=angular.isString(this._text)?this._text:"";this._partialText=e.length>20?e.slice(0,17)+"...":e}return this._partialText}},{key:"ownerId",get:function(){return this._ownerId}},{key:"imageUrl",get:function(){return this._imageUrl},set:function(e){this._imageUrl=e}},{key:"imageType",get:function(){return this._imageUrl?h[this._imageUrl]?g.Stock:g.Custom:g.None}},{key:"imageName",get:function(){var e=this,t=f.find(function(t){var n=t.url;return n===e._imageUrl});return t&&t.name}},{key:"created",get:function(){return this._created}},{key:"tags",get:function(){return this._tags}},{key:"score",get:function(){if(this._score)return this._score;var e=this.scoreTag;e&&e.value&&(e.value=c["default"].formatScore(e.value));return e&&e.value},set:function(e){this.hasScoreTag?this._tags=this.tags.map(function(t){return t.type===p.Score?s({},t,{value:c["default"].formatScore(e)}):t}):this.tags.push({type:p.Score,value:e});this._score=c["default"].formatScore(e)}},{key:"displayScore",get:function(){return this.score?c["default"].formatScore(this.score):0}},{key:"scoreTag",get:function(){return this._tags.find(function(e){return e.type===p.Score})}},{key:"hasScoreTag",get:function(){return!!this.scoreTag}},{key:"hasCustomImage",get:function(){return!h[this._imageUrl]}}],[{key:"MAX_SCORE",get:function(){return 100}},{key:"BLANK_STICKER_URL",get:function(){return"./assets/images/blank_sticker.png"}},{key:"DEFAULT_STICKER",get:function(){return new e(null,"",null,f[18].url,null,[])}}]);return e}();t["default"]=m},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(249),f=a(h),g=n(144),p=(a(g),function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return d["default"].preEncode(e,function(t){return{type:e.type,image_url:e.url,size:t,text:e.text,center:d["default"].pointCodec.encode(d["default"].centerFromLocationAndSize(e.location,e.size)),score:e.score,viewed_by_student:e.viewedByStudent}})}},{key:"decode",value:function(e,t){return d["default"].preDecode(e,function(n,i,r){return new f["default"](t,n,r,i,e.data.text,e.data.image_url,e.data.score,e.data.viewed_by_student)})}}]);return t}(l["default"]));t["default"]=p;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(217),d=a(u),h=n(218),f=a(h),g=n(233),p=a(g),m=n(215),v=a(m),_=n(253),y=a(_),k=n(146),b=a(k),S=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._pointCodec=new d["default"];this._sizeCodec=new f["default"];this._colorsCodec=new y["default"];this._sizeDiff=t.sizeDiff}r(t,e);s(t,[{key:"encode",value:function(e){var t=e.size.plus(this._sizeDiff),n={type:e.type,text:e.text,size:this._sizeCodec.encode(t),center:this._pointCodec.encode(v["default"].centerFromLocationAndSize(e.location,t)),fontSize:e.fontSize,colors:this._colorsCodec.encode(e.colorSpans),backgroundColor:e.backgroundColor,borderColor:e.borderColor};return v["default"].firebaseElement(n,e.metadata)}},{key:"decode",value:function(e,t){var n=v["default"].extractMetadata(e),i=this._sizeCodec.decode(e.data.size),r=this._pointCodec.decode(e.data.center),s=v["default"].locationFromCenterAndSize(r,i);return new p["default"](t,n,e.data.text,s,i.minus(this._sizeDiff),e.data.fontSize,void 0,this._colorsCodec.decode(e.data.colors),void 0,e.data.backgroundColor,e.data.borderColor)}}],[{key:"sizeDiff",get:function(){return new b["default"](40,48)}}]);return t}(l["default"]);t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(237),d=n(163),h=a(d),f=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._colorCodec=new h["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t=this;return angular.toJson(e.map(function(e){return{start:e.start,color:t._colorCodec.encode(e.color)}}))}},{key:"decode",value:function(e){var t=this;return angular.fromJson(e).map(function(e){return new u.ColorSpan(e.start,-1,t._colorCodec.decode(e.color))})}}]);return t}(l["default"]);t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(229),f=a(h),g=n(163),p=a(g),m=n(155),v=a(m),_=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._pointsCodec=new f["default"];this._colorCodec=new p["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t={type:e.type,color:this._colorCodec.encode(e.color),points:this._pointsCodec.encode(e.points),width:e.width};return d["default"].firebaseElement(t,e.metadata)}},{key:"decode",value:function(e,t){var n=d["default"].extractMetadata(e);return new v["default"](t,n,this._pointsCodec.decode(e.data.points),this._colorCodec.decode(e.data.color),e.data.width)}}]);return t}(l["default"]);t["default"]=_;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(131),u=c(l),d=n(144),h=c(d),f=n(146),g=c(f),p=n(149),m=c(p),v=n(184),_=c(v),y=function(e){function t(e,n,r,s,a,c){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._location=r||new h["default"](100,200);this._size=s||new g["default"](280,84);this._padding=20;this._options=a;this._answer=c}r(t,e);s(t,[{key:"createElement",value:function(e){this._base=e.group();this._interactive=e.group();this._background=this._base.rect(0,0,0,0);this._pointValue=this._base.text(0,0,"");this._renderedOptions=new a;this.classCode&&this.classCode.showStudentScoresUpdated&&this.classCode.showStudentScoresUpdated.subscribe(this._showStudentScoresUpdated,this)}},{key:"update",value:function(e,t,n){var i=this;this._background.attr({x:this.location.x,y:this.location.y,width:this.width,height:this.height,rx:4,ry:4,fill:m["default"].BACKGROUND_GREY,stroke:m["default"].CK_HEADER_GREY});var r=this._options.filter(function(e){return e.correct}).map(function(e){return e.points}).pop();this._pointValue.attr({x:this.location.x+8,y:this.location.y+19,style:this.textStyle,text:angular.isNumber(r)?1===r?r+" Pt":r+" Pts":""});var s=(this.width-this._padding-this._padding)/5;this._options.forEach(function(e,r){var o=i.id+"-"+r,a=i._renderedOptions.get(o);if(!a){a=new _["default"](o,i,e);a.render(i._interactive,t,n,i.canvas,i.assignment,i.viewerMetadata,i.thumbnail,i.moreOptionsManager);i._renderedOptions.set(o,a)}a.location=new h["default"](i.location.x+s*r+i._padding,i.location.y+.25*i.height);a.tryUpdate()})}},{key:"_showStudentScoresUpdated",value:function(){this.tryUpdate()}},{key:"remove",value:function(){this.classCode&&this.classCode.showStudentScoresUpdated.unsubscribe(this._showStudentScoresUpdated,this);i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"merge",value:function(e){angular.equals(e._options,this._options)||(this._renderedOptions=new a);this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._size=e._size||this._size;this._options=e._options||this._options;this._answer=e._answer;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_size:this._size,_options:this._options,_answer:this._answer}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._size,n._options,n._answer)}},{key:"isChildManipulative",get:function(){return!0}},{key:"answerDisplay",get:function(){return this.answer||"--"}},{key:"options",
get:function(){return this._options}},{key:"answer",get:function(){return this._answer},set:function(e){var t=this;this._trackChange(function(){t._answer=e})}},{key:"isWork",get:function(){return this.assignment&&this.assignment.isWork}},{key:"classCode",get:function(){return this.assignment&&this.assignment.classCode}},{key:"showStudentScores",get:function(){return this.classCode&&this.classCode.showStudentScores}},{key:"textStyle",get:function(){return"\n      pointer-events:none;\n      font-family:GothamRoundedMedium;\n      dominant-baseline:ideographic;\n      line-height:115%;\n      font-size:13px;\n      fill: "+m["default"].CK_HEADER_GREY+";\n    "}}],[{key:"type",get:function(){return"mchoice_child"}}]);return t}(u["default"]);t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(255),f=a(h),g=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return d["default"].preEncode(e,function(t,n){return{type:e.type,center:n,size:t,options:angular.toJson(e.options),answer:e.answer}})}},{key:"decode",value:function(e,t){return d["default"].preDecode(e,function(n,i,r){return new f["default"](t,n,r,i,angular.fromJson(e.data.options),e.data.answer)})}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(171),f=a(h),g=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._multipleChoiceOptionCodec=new p}r(t,e);s(t,[{key:"encode",value:function(e){var t=this;return d["default"].preEncode(e,function(n,i){return{id:e.id,type:e.type,center:i,size:n,options:angular.toJson(e.options.map(function(e){return t._multipleChoiceOptionCodec.encode(e)}))}})}},{key:"decode",value:function(e,t){var n=this;return d["default"].preDecode(e,function(i,r,s){return new f["default"](t,i,s,r,angular.fromJson(e.data.options).map(function(e){return n._multipleChoiceOptionCodec.decode(e)}))})}}]);return t}(l["default"]);t["default"]=g;var p=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{answer:e.answer,points:e.points,correct:e.correct}}},{key:"decode",value:function(e){return new h.MultipleChoiceOption(e.answer,e.points,e.correct)}}]);return t}(l["default"]);t.MultipleChoiceOptionCodec=p},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(223),l=a(c),u=function(e){function t(e,n,r,s,a,c,l){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n,r,s,a,c,l)}r(t,e);s(t,[{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._imageSize=e._imageSize||this._imageSize;this._scale=e._scale||this._scale;this._rotation=0===e._rotation?0:e._rotation||this._rotation;var t=this._url;this._url=e._url||this._url;if(this._url!==t){this._image&&this._image.attr({href:this.url});this._preload()}this._size=this._imageSize.times(this._scale);this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_imageSize:this._imageSize,_scale:this._scale,_rotation:this._rotation,_url:this._url}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._imageSize,n._scale,n._rotation,n._url)}},{key:"typeDisplay",get:function(){return"manipulative image"}},{key:"isParentManipulative",get:function(){return!0}}],[{key:"type",get:function(){return"mimage_parent"}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(227),f=a(h),g=n(258),p=a(g),m=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._jsonCodec=new f["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t=this;return d["default"].preEncode(e,function(){var n=t._jsonCodec.encode({scale:e.scale,rotation:e.rotation});return{id:e.id,type:e.type,image_url:e.url,size:d["default"].sizeCodec.encode(e.imageSize),center:d["default"].pointCodec.encode(e.location),transform:n}})}},{key:"decode",value:function(e,t){var n=this;return d["default"].preDecode(e,function(i,r,s,o){var a=n._jsonCodec.decode(e.data.transform);return new p["default"](t,i,o,r,a.scale,a.rotation,e.data.image_url)})}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(223),l=a(c),u=function(e){function t(e,n,r,s,a,c,l,u,d,h){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n,u||r,s,angular.isNumber(d)?d:a,angular.isNumber(h)?h:c,l);this._parentCenter=r;this._parentScale=a;this._parentRotation=c;this._childCenter=u;this._childScale=d;this._childRotation=h;this._modified=!!u||!!h||!!d}r(t,e);s(t,[{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._imageSize=e._imageSize||this._imageSize;this._parentCenter=e._parentCenter||this._parentCenter;this._parentScale=e._parentScale||this._parentScale;this._parentRotation=0===e._parentRotation?0:e._parentRotation||this._parentRotation;this._childCenter=e._childCenter||this._childCenter;this._childScale=e._childScale||this._childScale;this._childRotation=0===e._childRotation?0:e._childRotation||this._childRotation;this._location=this._childCenter?this._childCenter:this._parentCenter;this._scale=angular.isNumber(this._childScale)?this._childScale:this._parentScale;this._rotation=angular.isNumber(this._childRotation)?this._childRotation:this._parentRotation;this._modified=!!this._childCenter||!!this._childRotation||!!this._childScale;var t=this._url;this._url=e._url||this._url;if(this._url!==t){this._image&&this._image.attr({href:this.url});this._preload()}this._size=this._imageSize.times(this._scale);this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_parentCenter:this._parentCenter,_imageSize:this._imageSize,_parentScale:this._parentScale,_parentRotation:this._parentRotation,_url:this._url,_childCenter:this._location,_childScale:this._scale,_childRotation:this._rotation}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._parentCenter,n._imageSize,n._parentScale,n._parentRotation,n._url,n._childCenter,n._childScale,n._childRotation)}},{key:"isChildManipulative",get:function(){return!0}},{key:"parentCenter",get:function(){return this._parentCenter}},{key:"parentScale",get:function(){return this._parentScale}},{key:"parentRotation",get:function(){return this._parentRotation}},{key:"childCenter",get:function(){return this._childCenter}},{key:"childScale",get:function(){return this._childScale}},{key:"childRotation",get:function(){return this._childRotation}},{key:"modified",get:function(){return this._modified}}],[{key:"type",get:function(){return"mimage_child"}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(227),f=a(h),g=n(260),p=a(g),m=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._jsonCodec=new f["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t=this;return d["default"].preEncode(e,function(){var n=t._jsonCodec.encode({scale:e.parentScale,rotation:e.parentRotation}),i=t._jsonCodec.encode({scale:e.scale,rotation:e.rotation});return{type:e.type,image_url:e.url,size:d["default"].sizeCodec.encode(e.imageSize),center:d["default"].pointCodec.encode(e.parentCenter),transform:n,child_center:d["default"].pointCodec.encode(e.location),child_transform:i}})}},{key:"decode",value:function(e,t){var n=this;return d["default"].preDecode(e,function(i,r,s,o){var a=n._jsonCodec.decode(e.data.transform),c=e.data.child_center?d["default"].pointCodec.decode(e.data.child_center):void 0,l=void 0,u=void 0;if(e.data.child_transform){var h=n._jsonCodec.decode(e.data.child_transform);l=h.scale;u=h.rotation}return new p["default"](t,i,o,r,a.scale,a.rotation,e.data.image_url,c,l,u)})}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(157)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(131),u=c(l),d=n(146),h=c(d),f=n(152),g=c(f),p=n(144),m=c(p),v=n(235),_=c(v),y=n(183),k=c(y),b=n(149),S=c(b),w=n(234),C=c(w),E=n(18),T=c(E),I=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];r(this,e);this._answer=t;this._points=n;this._correct=!0;this._selected=i}i(e,[{key:"clone",value:function(){return new e(this._answer,this._points,this._selected)}},{key:"points",get:function(){return this._points},set:function(e){this._points=e}},{key:"correct",get:function(){return this._correct},set:function(e){this._correct=e}},{key:"answer",get:function(){return this._answer},set:function(e){this._answer=e}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e}}]);return e}();t.FillInTheBlankAnswer=I;var A=function(e){function t(e,n,i,o,a,c){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._location=i;this._answers=a||[];this._fontSize=c||25;this._padding=new h["default"](7,7);this._lineHeightScale=T["default"].get.isWindows?1:1.2;this._minSize=new h["default"](40,C["default"].FONT_SIZE_MIN*this._lineHeightScale+this._padding.height+this._padding.height);this._size=o||new h["default"](8*this._fontSize,this._fontSize+this._padding.height+this._padding.height)}o(t,e);i(t,[{key:"createElement",value:function(e){this._background=e.group().addClass("background");this._content=e.group().addClass("content");this._interactive=e.group().addClass("interactive");this._backgroundRect=this._background.rect(0,0,0,0);this._contentRect=this._content.rect(0,0,0,0);this._interactRect=this._interactive.rect(0,0,0,0).addClass("touch-foreground");this._removeHandle=new k["default"](this);this._removeHandle.render(this._interactive);this._removeHandle.mouseEnter.subscribe(this.hoverIn,this);this._removeHandle.mouseLeave.subscribe(this.hoverOut,this);this._resizers={topLeft:this.createHandle(this._interactive,1,1,-1,-1),bottomLeft:this.createHandle(this._interactive,1,0,-1,1),bottomRight:this.createHandle(this._interactive,0,0,1,1)};this._drag=new g["default"](this,this.canvas);this._drag.start(this._interactRect.node);this._drag.click.subscribe(this._click,this);this._drag.mouseEnter.subscribe(this.hoverIn,this);this._drag.mouseLeave.subscribe(this.hoverOut,this);this._drag.dragStart.subscribe(this._dragStart,this);this._drag.dragMove.subscribe(this._dragMove,this);this._drag.dragEnd.subscribe(this._dragEnd,this)}},{key:"createHandle",value:function(e,t,n,i,r){var s=new _["default"](this,t,n,i,r);s.resizeStarted.subscribe(this._dragStart,this);s.resizeComplete.subscribe(this._dragEnd,this);s.size=new h["default"](14,14);s.render(e);return s}},{key:"update",value:function(e,t){var n=Math.max(this.height,this._minSize.height),i={x:this.location.x,y:this.location.y,width:this.width,height:n},r="rgba(255, 255, 255, 0)";this.hasFocus?r="rgba(255, 255, 255, .9)":this._drag.dragging?r="rgba(255, 255, 255, .25)":this.hovering&&(r="rgba(255, 255, 255, .5)");this._backgroundRect.attr(a({},i,{fill:r}));this._contentRect.attr(a({},i,{fill:"transparent",stroke:S["default"].CK_GREEN,strokeWidth:"2px",strokeDasharray:"5,5"}));t&&this._interactRect.attr(a({},i,{fill:"transparent",cursor:"move"}));this._removeHandle.location=this.location.plus(new m["default"](this.width,0));this._removeHandle.visibility=t&&(this.hasFocus||this.hovering)?"visible":"hidden";this._resizers.topLeft.location=this.location;this._resizers.bottomLeft.location=this.location.plus(new m["default"](0,n));this._resizers.bottomRight.location=this.location.plus(new m["default"](this.width,n));this._resizers.topLeft.visibility=this.hasFocus?"inherit":"hidden";this._resizers.bottomLeft.visibility=this.hasFocus?"inherit":"hidden";this._resizers.bottomRight.visibility=this.hasFocus?"inherit":"hidden";this._resizers.topLeft.tryUpdate();this._resizers.bottomLeft.tryUpdate();this._resizers.bottomRight.tryUpdate()}},{key:"merge",value:function(e,t){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._size=e._size||this._size;this._answers=angular.isDefined(e._answers)&&t?e._answers:this._answers;this._fontSize=e._fontSize||this._fontSize;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_size:this._size,_answers:this._answers,_fontSize:this._fontSize}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._size,n._answers,n._fontSize)}},{key:"_click",value:function(){this.focus()}},{key:"warnBeforeDeletion",value:function(){this._contentRect.attr({fill:"rgba(255, 255, 255, .9)",stroke:S["default"].CK_WARN});this._resizers.topLeft.warnBeforeDeletion();this._resizers.bottomLeft.warnBeforeDeletion();this._resizers.bottomRight.warnBeforeDeletion()}},{key:"hoverIn",value:function(){this.tryUpdate()}},{key:"hoverOut",value:function(){this.tryUpdate()}},{key:"remove",value:function(){this._stopEvents();s(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"_stopEvents",value:function(){this._removeHandle&&this._removeHandle.remove();this._drag&&this._drag.stop();if(this._resizers){this._resizers.topLeft.remove();this._resizers.bottomLeft.remove();this._resizers.bottomRight.remove()}}},{key:"_dragStart",value:function(){this._dragStartState=this.snapshot()}},{key:"_dragMove",value:function(e){this.location=e.controlStart.plus(e.delta)}},{key:"_dragEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"typeDisplay",get:function(){return"fill in the blank"}},{key:"isParentManipulative",get:function(){return!0}},{key:"answerDisplay",get:function(){return this._answers.filter(function(e){return e.correct}).map(function(e){return e.answer}).join(", ")}},{key:"answers",get:function(){return this._answers},set:function(e){var t=this;this._trackChange(function(){t._answers=e})}},{key:"fontSize",get:function(){return this._fontSize}},{key:"hovering",get:function(){return this._drag.hovering||this._removeHandle.hovering}}],[{key:"type",get:function(){return"fitb_parent"}}]);return t}(u["default"]);t["default"]=A},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(262),f=a(h),g=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._fillInTheBlankAnswerCodec=new p}r(t,e);s(t,[{key:"encode",value:function(e){var t=this;return d["default"].preEncode(e,function(n,i){return{id:e.id,type:e.type,size:n,center:i,answers:angular.toJson(e.answers.map(function(e){return t._fillInTheBlankAnswerCodec.encode(e)})),font_size:e.fontSize}})}},{key:"decode",value:function(e,t){var n=this;return d["default"].preDecode(e,function(i,r,s){return new f["default"](t,i,s,r,angular.fromJson(e.data.answers).map(function(e){return n._fillInTheBlankAnswerCodec.decode(e)}),e.data.font_size)})}}]);return t}(l["default"]);t["default"]=g;var p=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return{answer:e.answer,points:e.points}}},{key:"decode",value:function(e){return new h.FillInTheBlankAnswer(e.answer,e.points,!1)}}]);return t}(l["default"]);t.FillInTheBlankAnswerCodec=p},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(157)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(234),u=c(l),d=n(146),h=c(d),f=n(149),g=c(f),p=n(185),m=n(153),v=function(e){function t(e,n,r,s,a,c,l,u){var d=this;o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._location=r||this._location;this._size=s;this._parentSize=s||this._size;this._fontSize=c||this._fontSize;this._minSize=new h["default"](0,0);this._padding=new h["default"](7,7);this._colorSpans=l||this._colorSpans;this._text=u||this._text;this._answers=a;this._submitted=!!this._text;this._placeholderText="";this._borderColor=g["default"].CK_GREEN;this._editBoxBorderColor="transparent";this._enableResize=!1;this._enableRemove=!1;this._enableReposition=!1;this.blurred.subscribe(function(e){return d._handleBlurred(e)},this)}r(t,e);s(t,[{key:"resetFontSize",value:function(){if(!this.text){for(var e=this._fontSize;e>this.height-this._padding.height-this._padding.height;)e-=u["default"].FONT_INCREMENT;this._fontSize=e}}},{key:"_handleBlurred",value:function(){this._submitted=!!this.text;this.tryUpdate()}},{key:"tabPressed",value:function(){this.focusNextElement.raise()}},{key:"shiftTabPressed",value:function(){this.focusPrevElement.raise()}},{key:"_dragStart",value:function(e){this.focus();i(Object.getPrototypeOf(t.prototype),"_dragStart",this).call(this,e)}},{key:"setText",value:function(e,n,r){this._submitted=!1;i(Object.getPrototypeOf(t.prototype),"setText",this).call(this,e,n,r)}},{key:"createElement",value:function(e,n){i(Object.getPrototypeOf(t.prototype),"createElement",this).call(this,e,n);this._scoreboard=this._interactive.group();this._scoreboardRect=this._scoreboard.rect(0,0,0,0);this._scoreboardText=this._scoreboard.text(0,0,"test");this._scoreboardCheckIcon=this._scoreboard.image("assets/colored-icons/check.svg",0,0,0,0);this._scoreboardCloseIcon=this._scoreboard.image("assets/colored-icons/close.svg",0,0,0,0);this.classCode&&this.classCode.showStudentScoresUpdated&&this.classCode.showStudentScoresUpdated.subscribe(this._showStudentScoresUpdated,this)}},{key:"update",value:function(e,n){this._borderColor=this.currentBorderColor;this._borderStyle=this.showSelected?l.BorderStyle.SOLID:l.BorderStyle.DASHED;this._editBoxBorderColor=this.currentBorderColor;i(Object.getPrototypeOf(t.prototype),"update",this).call(this,e,n);var r=Math.max(this._parentSize.height,this.height);this._backgroundRect.attr({height:r});this._editBox.attr({height:r});n&&this._interactRect.attr({height:r,cursor:"text"});this._scoreboard.attr({visibility:this.showCorrect||this.showIncorrect?"inherit":"hidden"});var s=5,o=21,c=o-s-s;this._scoreboardText.attr({text:this.showScoreboardText?this.scoredPointsDisplay+"/"+this.pointValue+" "+this.pointOrPointsDisplay:"",dominantBaseline:"text-before-edge",fontFamily:"GothamRoundedMedium",fontSize:c+"px",fill:"white"});var u=this._scoreboardText.node.getBBox().width,d=u?u+s+s:o,h=this.location.x+this.width-d+1,f=this.location.y-o+this._padding.height-1;this._scoreboardRect.attr({x:h,y:f,rx:2,ry:2,width:d,height:o,fill:this.currentBorderColor});this._scoreboardText.attr({x:h+s,y:f+s});var g={x:h+s,y:f+s,width:c,height:c,pointerEvents:"none",preserveAspectRatio:"xMidYMid meet"};this._scoreboardCheckIcon.attr(a({},g,{visibility:this.showCorrect&&!this.showScoreboardText?"inherit":"hidden"}));this._scoreboardCloseIcon.attr(a({},g,{visibility:this.showIncorrect&&!this.showScoreboardText?"inherit":"hidden"}))}},{key:"_showStudentScoresUpdated",value:function(){this.tryUpdate()}},{key:"remove",value:function(){this.classCode&&this.classCode.showStudentScoresUpdated.unsubscribe(this._showStudentScoresUpdated,this);i(Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"merge",value:function(e,t){this._metadata=e._metadata||this._metadata;this._location=e._location||this._location;this._size=e._size||this._size;this._parentSize=e._size||this._parentSize;this._answers=e._answers||this._answers;this._fontSize=e._fontSize||this._fontSize;this._colorSpans=e._colorSpans||this._colorSpans;this._text=!angular.isDefined(e._text)||!t&&this.viewerIsStudentDoingWork?this._text:e._text;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_location:this._location,_size:this._size,_answers:this._answers,_fontSize:this._fontSize,_colorSpans:this._colorSpans,_answer:this._text,_text:this._text}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._location,n._size,n._answers,n._fontSize,n._colorSpans,n._answer)}},{key:"isChildManipulative",get:function(){return!0}},{key:"answerDisplay",get:function(){return this._text||"--"}},{key:"answers",get:function(){return this._answers}},{key:"answer",get:function(){return this._text},set:function(e){this._text=e}},{key:"scoredPoints",get:function(){return this.isCorrect?this.pointValue:0}},{key:"scoredPointsDisplay",get:function(){return angular.isNumber(this.scoredPoints)?this.scoredPoints:"--"}},{key:"pointValue",get:function(){return this.hasPotentiallyCorrectResponse?this.answers[0].points:void 0}},{key:"pointOrPointsDisplay",get:function(){return 1===this.pointValue?"Pt":"Pts"}},{key:"showScoreboardText",get:function(){return angular.isNumber(this.pointValue)}},{key:"currentBorderColor",get:function(){return this.showCorrect?g["default"].CK_GRADING_MEETS:this.showIncorrect?g["default"].CK_GRADING_BELOW:this.showSelected?g["default"].CK_GREEN:g["default"].CK_GREEN}},{key:"showCorrect",get:function(){return this.canShowCorrectness&&this.isCorrect}},{key:"showIncorrect",get:function(){return this.canShowCorrectness&&!this.isCorrect&&!!this.text}},{key:"canShowCorrectness",get:function(){return this.viewerIsTeacher?this.hasPotentiallyCorrectResponse:this.viewerIsStudentDoingWork?this._submitted&&this.showStudentScores&&this.hasPotentiallyCorrectResponse:!1}},{key:"hasPotentiallyCorrectResponse",get:function(){return this._answers.length>0}},{key:"showSelected",get:function(){return this.hasFocus||!!this.text}},{key:"viewerIsStudentDoingWork",get:function(){return this.viewerIsDoingWork&&this.viewerIsStudent}},{key:"viewerIsDoingWork",get:function(){return this.viewerIntent&&this.viewerIntent===m.ElementIntents.WORK}},{key:"viewerIsTeacher",get:function(){return this.viewerRole&&this.viewerRole===p.UserRoles.TEACHER}},{key:"viewerIsStudent",get:function(){return this.viewerRole&&this.viewerRole===p.UserRoles.STUDENT}},{key:"showStudentScores",get:function(){return this.classCode&&this.classCode.showStudentScores}},{key:"classCode",get:function(){return this.assignment&&this.assignment.classCode}},{key:"isCorrect",get:function(){var e=this;return this._answers.some(function(t){var n=t.answer.trim().toLowerCase(),i=e._text.trim().toLowerCase();return i===n})}},{key:"potentialScore",get:function(){return this._answers.map(function(e){return e.points}).reduce(function(e,t){return e>t?e:t})}}],[{key:"type",get:function(){return"fitb_child"}}]);return t}(u["default"]);t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(263),f=n(264),g=a(f),p=n(253),m=a(p),v=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._fillInTheBlankAnswerCodec=new h.FillInTheBlankAnswerCodec;this._colorsCodec=new m["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t=this;return d["default"].preEncode(e,function(n,i){return{type:e.type,size:n,center:i,answers:angular.toJson(e.answers.map(function(e){return t._fillInTheBlankAnswerCodec.encode(e)})),font_size:e.fontSize,colors:t._colorsCodec.encode(e.colorSpans),answer:e.answer}})}},{key:"decode",value:function(e,t){var n=this;return d["default"].preDecode(e,function(i,r,s){return new g["default"](t,i,s,r,angular.fromJson(e.data.answers).map(function(e){return n._fillInTheBlankAnswerCodec.decode(e)}),e.data.font_size,e.data.colors&&n._colorsCodec.decode(e.data.colors),e.data.answer)})}}]);return t}(l["default"]);t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(131),l=a(c),u=n(130),d=a(u),h=n(152),f=a(h),g=n(149),p=a(g),m=n(144),v=a(m),_=n(145),y=a(_),k=n(148),b=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"create",value:function(e,t,n){this._rootPath=e.path("")}},{key:"update",value:function(e,t,n){var i=d["default"].svgPathFormat([t,n]);this._rootPath.attr({d:i,stroke:p["default"].CK_GREEN,strokeWidth:2,strokeLinecap:"butt",fill:"none",pointerEvents:"none"})}},{key:"remove",value:function(){this._rootPath.remove()}}]);return t}(k.DefaultPlacement),S=function(e){function t(e,n,r,s,a,c){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._start=r;this._end=s;this._color=a;this._width=c;this._placement=new b}r(t,e);s(t,[{key:"createElement",value:function(e,t){this._root=e;this._highlightPath=this._root.path("");this._rootPath=this._root.path("");this._highlightRect=this._root.rect(0,0,0,0);this._interactivePath=this._root.path("");if(t){this._interactiveDrag=new f["default"](this,this.canvas);this._interactiveDrag.start(this._interactivePath.node);this._interactiveDrag.click.subscribe(this._onClick,this);this._interactiveDrag.dragStart.subscribe(this._repositionStart,this);this._interactiveDrag.dragMove.subscribe(this._repositionMove,this);this._interactiveDrag.dragEnd.subscribe(this._repositionEnd,this);this._interactiveDrag.mouseEnter.subscribe(this._handleMouseEnter,this);this._interactiveDrag.mouseLeave.subscribe(this._handleMouseLeave,this);this._startHandle=this._root.circle(0,0,0);this._startHandleInteractive=this._root.circle(0,0,0);this._startDrag=new f["default"](this,this.canvas);this._startDrag.start(this._startHandleInteractive.node);this._startDrag.dragStart.subscribe(this._startRepositionStart,this);this._startDrag.dragMove.subscribe(this._startRepositionMove,this);this._startDrag.dragEnd.subscribe(this._startRepositionEnd,this);this._startDrag.mouseEnter.subscribe(this._handleMouseEnter,this);this._startDrag.mouseLeave.subscribe(this._handleMouseLeave,this);this._endHandle=this._root.circle(0,0,0);this._endHandleInteractive=this._root.circle(0,0,0);this._endDrag=new f["default"](this,this.canvas);this._endDrag.start(this._endHandleInteractive.node);this._endDrag.dragStart.subscribe(this._endRepositionStart,this);this._endDrag.dragMove.subscribe(this._endRepositionMove,this);this._endDrag.dragEnd.subscribe(this._endRepositionEnd,this);this._endDrag.mouseEnter.subscribe(this._handleMouseEnter,this);this._endDrag.mouseLeave.subscribe(this._handleMouseLeave,this)}}},{key:"update",value:function(e,t){var n=d["default"].svgPathFormat([this.start,this.end]);this._rootPath.attr({d:n,stroke:this.color,strokeWidth:this.width,strokeLinecap:"butt",fill:"none",pointerEvents:"none"});if(t){this._highlightPath.attr({d:n,stroke:p["default"].CK_GREEN,strokeWidth:this.width+2,strokeLinecap:"butt",fill:"none",pointerEvents:"none",visibility:this.showSelected?"inherit":"hidden"});var i=this._highlightPath.getBBox(),r=i.x,s=i.y,o=i.width,a=i.height;this._highlightRect.attr({x:r,y:s,width:o,height:a,fill:"transparent",stroke:p["default"].CK_GREEN,strokeWidth:1.5,pointerEvents:"none",visibility:this.hasFocus?"inherit":"hidden"});this._interactivePath.attr({d:n,stroke:"transparent",strokeWidth:15,strokeLinecap:"butt",fill:"none",cursor:"move"});this._updateHandle(this._startHandle,this._startHandleInteractive,this._start);this._updateHandle(this._endHandle,this._endHandleInteractive,this._end)}}},{key:"_updateHandle",value:function(e,t,n){e.attr({fill:p["default"].CK_GREEN,visibility:this.showSelected?"inherit":"hidden",cx:n.x,cy:n.y,r:5});t.attr({fill:"transparent",cursor:"pointer",visibility:!0,cx:n.x,cy:n.y,r:7})}},{key:"warnBeforeDeletion",value:function(){var e={stroke:p["default"].CK_WARN};this._highlightPath.attr(e);this._highlightRect.attr(e);var t={fill:p["default"].CK_WARN};this._startHandle.attr(t);this._endHandle.attr(t)}},{key:"_onClick",value:function(){this.focus()}},{key:"_repositionStart",value:function(){this.focus();this._dragStartStart=this._start;this._dragStartEnd=this._end;this._dragStartState=this.snapshot()}},{key:"_repositionMove",value:function(e){this._start=this._dragStartStart.plus(e.delta);this._end=this._dragStartEnd.plus(e.delta);this.tryUpdate()}},{key:"_repositionEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"_handleMouseEnter",value:function(){this.tryUpdate()}},{key:"_handleMouseLeave",value:function(){this.tryUpdate()}},{key:"_startRepositionStart",value:function(){this._dragStartStart=this._start;this._dragStartState=this.snapshot()}},{key:"_startRepositionMove",value:function(e){var t=this._end,n=this._dragStartStart.plus(e.delta);if(e.originalEvent.shiftKey)this._start=this._closestLocation(n,t,15);else{var i=this._degreeDifference(n,t,90),r=Math.abs(i),s=1>r;this._start=s?y["default"].rotate(n,t,i):n}this.tryUpdate()}},{key:"_startRepositionEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"_endRepositionStart",value:function(){this._dragStartEnd=this._end;this._dragStartState=this.snapshot()}},{key:"_endRepositionMove",value:function(e){var t=this._start,n=this._dragStartEnd.plus(e.delta);if(e.originalEvent.shiftKey)this._end=this._closestLocation(n,t,15);else{var i=this._degreeDifference(n,this._start,90),r=Math.abs(i),s=1>r;this._end=s?y["default"].rotate(n,t,i):n}this.tryUpdate()}},{key:"_endRepositionEnd",value:function(){this._onChanged(this._dragStartState)}},{key:"_closestLocation",value:function(e,t,n){var i=this._degreeDifference(e,t,n);return y["default"].rotate(e,t,i)}},{key:"_degreeDifference",value:function(e,t,n){var i=this._deriveChange(t.plus(new v["default"](50,0)),e,t),r=y["default"].roundToNearest(i,n);return r-i}},{key:"_deriveChange",value:function(e,t,n){var i=e.minus(n),r=t.minus(n);return i.clockwiseAngle(r)}},{key:"merge",value:function(e){this._metadata=e._metadata||this._metadata;this._start=e._start||this._start;this._end=e._end||this._end;this._color=e._color||this._color;this._width=e._width||this._width;this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_start:this._start,_end:this._end,_color:this._color,_width:this._width}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._start,n._end,n._color,n._width)}},{key:"typeDisplay",get:function(){return"line"}},{key:"start",get:function(){return this._start},set:function(e){this._start=e;this.tryUpdate()}},{key:"end",get:function(){return this._end},set:function(e){this._end=e}},{key:"color",get:function(){return this._color},set:function(e){var t=this;this._trackChange(function(){t._color=e})}},{key:"width",get:function(){return this._width},set:function(e){var t=this;this._trackChange(function(){t._width=e})}},{key:"showSelected",
get:function(){return this.hasFocus||this.hovering||this.dragging}},{key:"hovering",get:function(){return this._interactiveDrag.hovering||this._startDrag.hovering||this._endDrag.hovering}},{key:"dragging",get:function(){return this._interactiveDrag.dragging||this._startDrag.dragging||this._endDrag.dragging}}],[{key:"type",get:function(){return"sline"}}]);return t}(l["default"]);t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(266),f=a(h),g=n(217),p=a(g),m=n(163),v=a(m),_=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._colorCodec=new v["default"];this._pointCodec=new p["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t={type:e.type,start:this._pointCodec.encode(e.start),end:this._pointCodec.encode(e.end),color:this._colorCodec.encode(e.color),width:e.width};return d["default"].firebaseElement(t,e.metadata)}},{key:"decode",value:function(e,t){var n=d["default"].extractMetadata(e);return new f["default"](t,n,this._pointCodec.decode(e.data.start),this._pointCodec.decode(e.data.end),this._colorCodec.decode(e.data.color),e.data.width)}}]);return t}(l["default"]);t["default"]=_;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(131),l=a(c),u=function(e){function t(e,n,r,s){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,t.type,n);this._hex=r;this._url=s}r(t,e);s(t,[{key:"_resetImage",value:function(){this._image&&this._image.remove();this._image=void 0}},{key:"createElement",value:function(e,t){this._root=e;this._background=this._root.rect(0,0,0,0);this._image=void 0;this._editable=t}},{key:"update",value:function(e,t){this._editable=t;this._background.attr({width:1004,height:2008,fill:this._hex||"transparent",pointerEvents:"none"});var n=this.optimizedUrl;this._image||(this._image=this._root.image(n,0,0,0,0));this._image.attr({width:1004,height:2008,preserveAspectRatio:"xMidYMin",url:n,pointerEvents:"none"})}},{key:"merge",value:function(e,t){this._metadata=e._metadata||this._metadata;this._hex=t?e._hex:e._hex||this._hex;this._url=t?e._url:e._url||this._url;var n=angular.isDefined(this._hex)&&angular.isDefined(this._url);if(n&&angular.isUndefined(e.hex)){this._hex=void 0;this._resetImage()}else if(n&&angular.isUndefined(e.url)){this._url=void 0;this._resetImage()}else(t||!this._editable)&&this._resetImage();this.tryUpdate()}},{key:"snapshot",value:function(){return{_metadata:this._metadata,_hex:this._hex,_url:this._url}}},{key:"fromSnapshot",value:function(e,n){return new t(e,n._metadata,n._hex,n._url)}},{key:"hex",get:function(){return this._hex},set:function(e){var t=this;this._trackChange(function(){t._hex=e;t._url=void 0;t._resetImage()})}},{key:"url",get:function(){return this._url},set:function(e){var t=this;this._trackChange(function(){t._hex=void 0;t._url=e;t._resetImage()})}},{key:"optimizedUrl",get:function(){return this.isStockUrl?this.url.replace(".png",".svg"):this.url}},{key:"isStockUrl",get:function(){return this.url&&this.url.startsWith("https://www.googleapis.com/download/storage/v1/b/slide-backgrounds")}}],[{key:"type",get:function(){return"slide_bg"}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(215),d=a(u),h=n(163),f=a(h),g=n(268),p=a(g),m=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._colorCodec=new f["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t={type:e.type,color:angular.isDefined(e.hex)?this._colorCodec.encode(e.hex):null,url:angular.isDefined(e.url)?e.url:null};return d["default"].firebaseElement(t,e.metadata)}},{key:"decode",value:function(e,t){var n=d["default"].extractMetadata(e);return new p["default"](t,n,e.data.color&&this._colorCodec.decode(e.data.color),e.data.url)}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(262),c=n(169),l=o(c),u=function(){function e(t,n){r(this,e);this._assignmentTrackingService=t;this._cacheService=n;this._selected=void 0;this._copiedSelectedAnswers=void 0;this._user=void 0;this._showHelp=!1}i(e,[{key:"init",value:function(){var e=this;this._cacheService.getUser(!1).then(function(t){e._user=t;e._showHelp=e._user.showFillInTheBlankIntro})}},{key:"incrementPoints",value:function(){this.selectedAnswers&&(this.selectedPoints=this.selectedPoints+1)}},{key:"decrementPoints",value:function(){this.selectedPoints>=1&&(this.selectedPoints=this.selectedPoints-1)}},{key:"addAnswer",value:function(){if(this._selected){this._copiedSelectedAnswers=[].concat(s(this._copiedSelectedAnswers),[new a.FillInTheBlankAnswer("",angular.isDefined(this.selectedPoints)?this.selectedPoints:null,!0)]);this.saveAnswers()}}},{key:"deleteAnswer",value:function(e){if(this._selected){this._copiedSelectedAnswers=this._copiedSelectedAnswers.filter(function(t){return t!==e});this.saveAnswers()}}},{key:"saveAnswers",value:function(){this._copiedSelectedAnswers&&(this._selected.answers=this._copiedSelectedAnswers)}},{key:"selected",set:function(e){this._copiedSelectedAnswers=void 0;this._selected=e}},{key:"selectedAnswers",get:function(){this._selected&&!this._copiedSelectedAnswers&&(this._copiedSelectedAnswers=this._selected.answers.map(function(e){return e.clone()}));return this._copiedSelectedAnswers||[]}},{key:"hasSelectedAnswers",get:function(){return this.selectedAnswers.length>0}},{key:"selectedPoints",get:function(){return this.hasSelectedAnswers?this.selectedAnswers[0].points:void 0},set:function(e){if(l["default"].scoreIsValid(e)||!angular.isNumber(e)){var t=l["default"].formatScore(e);this.selectedAnswers.forEach(function(e){e.points=t});this.saveAnswers()}}},{key:"showHelp",get:function(){return this._showHelp},set:function(e){this._showHelp=e;if(this._user&&this._user.showFillInTheBlankIntro&&!e){this._user.showFillInTheBlankIntro=e;this._cacheService.updateUser(this._user)}}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(272),l=a(c),u=function(e){function t(e,n,r,s,a,c){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,s,null);this._messages=r;this._answer=a;this._startedAt=c?moment(c):void 0}r(t,e);s(t,[{key:"addScore",value:function(e){return!angular.isNumber(e)||0>=e?this.points:this.points===t.UNGRADED?e:parseFloat((e+this.points).toFixed(2))}},{key:"isWork",get:function(){return!0}},{key:"chatId",get:function(){return this._messages.id}},{key:"points",get:function(){return angular.isUndefined(this._points)||null===this._points||isNaN(this._points)?t.UNGRADED:this._points},set:function(e){this._points=e}},{key:"isGraded",get:function(){return this.points!==t.UNGRADED}},{key:"messages",get:function(){return this._messages}},{key:"answer",get:function(){return this._answer},set:function(e){this._answer=e}},{key:"startedAt",get:function(){return this._startedAt},set:function(e){this._startedAt=e}}],[{key:"UNGRADED",get:function(){return"ungraded"}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n){var i=arguments.length<=2||void 0===arguments[2]?null:arguments[2],s=arguments.length<=3||void 0===arguments[3]?null:arguments[3];r(this,e);this._id=t;this._elements=n;this._points=i;this._title=s}i(e,[{key:"remoteAdd",value:function(e){if(!e.metadata)throw new Error("no metadata found");this._elements.start();return this._elements.remoteAdd(e)}},{key:"saveElement",value:function(e){if(!e.metadata)throw new Error("no metadata found");this._elements.start();return this._elements.saveElement(e)}},{key:"removeElement",value:function(e){return this._elements.removeElement(e)}},{key:"start",value:function(){this._elements.start()}},{key:"stop",value:function(){this._elements.stop()}},{key:"mergeFrom",value:function(e){if(e.id===this.id){this.stop();this._elements=e._elements}return this}},{key:"isWork",get:function(){return!1}},{key:"id",get:function(){return this._id}},{key:"elementListId",get:function(){return this._elements.id}},{key:"elementListDb",get:function(){return this._elements.firebaseInstanceId}},{key:"elements",get:function(){return this._elements.elements}},{key:"elementCount",get:function(){return this._elements.elementCount}},{key:"allElements",get:function(){return this._elements.allElements}},{key:"points",get:function(){return this._points},set:function(e){this._points=e}},{key:"title",get:function(){return this._title}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(162),c=n(156),l=n(205),u=o(l),d=n(211),h=o(d),f=n(274),g=o(f),p=n(275),m=o(p),v=n(210),_=o(v),y=function(){function e(t,n,i,s,o,a,c,l){r(this,e);this.$mdDialog=t;this.$q=n;this.$document=i;this._slideBackgroundService=s;this._toolbarService=o;this._mediaService=a;this._authService=c;this._imageEditService=l;this._importImageDialog=u["default"].show;this._loadingDialog=g["default"].show;this._backgrounds=new h["default"];this._backgroundItems=[]}i(e,[{key:"init",value:function(){var e=this;this.getBackgroundUrls().then(function(t){e._backgroundItems=t})}},{key:"getBackgroundUrls",value:function(){var e=this;return this._backgrounds.value(function(){return e.$q.all({stockUrls:e._slideBackgroundService.getStockUrls(),customUrls:e._slideBackgroundService.getCustomUrls()}).then(function(e){var t=e.stockUrls,n=e.customUrls;return[].concat(s(n),s(t))})})}},{key:"removeBackground",value:function(){this._toolbarService.notify(c.Notifications.UPDATE_SLIDE_BACKGROUND,{},!1)}},{key:"selectColor",value:function(e){this._toolbarService.notify(c.Notifications.UPDATE_SLIDE_BACKGROUND,{hex:e.hex},!1)}},{key:"borderColor",value:function(e){return a.Colors.borderColor(e)}},{key:"addCustomBackground",value:function(){var e=this;this._importImageDialog(this.$q,this.$mdDialog,void 0,void 0,void 0,void 0,void 0,_["default"].BackgroundImageSupport).then(function(t){var n=t.images,i=n&&n[0],r=e._addBackgroundImage(i);e._loadingDialog(e.$mdDialog,r,e.$document,".slide-background");return r}).then(function(){e._backgrounds.clear();e.init()})}},{key:"_addBackgroundImage",value:function(e){var t=this,n=this._imageEditService.dataURItoBlob(e.imageSrc);return this._mediaService.create(n,"content",this._authService.currentUserId).then(function(e){var n=new m["default"](e.newElementId,p.UserSlideBackgroundType.Custom,e.mediaLink);t.selectCustomBackgroundItem(n);return t._slideBackgroundService.setCustomUrl(n)})}},{key:"selectCustomBackgroundItem",value:function(e){this._toolbarService.notify(c.Notifications.UPDATE_SLIDE_BACKGROUND,{url:e.url},!1)}},{key:"delete",value:function(e,t){t.stopPropagation();this._slideBackgroundService.deleteCustomUrl(e.id);this._backgrounds.clear();this.init()}},{key:"backgroundItems",get:function(){return this._backgroundItems}}]);return e}();t.SlideBackgroundManager=y},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"show",value:function(t,n,i,r,s){var o=!1,a=!1;t.show({parent:r?angular.element(i[0].querySelector(r)):void 0,autoWrap:!1,targetEvent:s,controller:e,templateUrl:"app/components/loading-dialog/loading-dialog.html",escapeToClose:!1,onShowing:function(){a?t.hide():o=!0}});return n?n["finally"](function(){if(o)return t.cancel();a=!0;return void 0}):void 0}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){r(this,e);this._id=t;this._type=n;this._url=i}i(e,[{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"isStockPro",get:function(){return this._type===o.StockPro}},{key:"isStockFree",get:function(){return this._type===o.StockFree}},{key:"isCustom",get:function(){return this._type===o.Custom}},{key:"url",get:function(){return this._url}}]);return e}();t["default"]=s;var o=function(){function e(){r(this,e)}i(e,null,[{key:"StockFree",get:function(){return"stock_free"}},{key:"StockPro",get:function(){return"stock_pro"}},{key:"Custom",get:function(){return"custom"}}]);return e}();t.UserSlideBackgroundType=o},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(152),l=a(c),u=n(144),d=a(u),h=n(151),f=a(h),g=n(277),p=a(g),m=n(154),v=a(m),_=function(e){function t(e,n,r,s,a){var c=this;o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.$timeout=n;this._window=angular.element(r);this._focusManager=s;this._toolbarService=a;this._width=void 0;this._hiddenTextInput=void 0;this._svg=e.find("svg")[0];this._snap=new Snap(this._svg);this._layers=new p["default"](this._snap);this._element=e;this._zoomFactor=void 0;this._initialWidth=e.width();this._initialHeight=e.height();this._pinchState={};this._scaleFactor=1;this._inverseScaleFactor=1;this._absolutePosition=new d["default"](0,0);this._scrollViewAbsolutePosition=new d["default"](0,0);this.refreshLayout();this._resize=new f["default"](50,750,function(){c.width=e.width();c.absolutePosition=e.offset();c._initialHeight=e.height();c._initialWidth=e.width();c._scrollView&&(c.scrollViewAbsolutePosition=c._scrollView.offset())});this._anonResize=function(){c._resize.tick()};this._window.on("resize",this._anonResize);this._scroll=new f["default"](50,750,function(){c.absolutePosition=e.offset()});this._anonScrollListener=function(){return c._onContainerScrolled()};this._anonPinchStart=function(e){return c.pinchStart(e)};this._anonPinchMove=function(e){return c.pinchMove(e)};this._anonPinchEnd=function(e){return c.pinchEnd(e)};this._gesture=new l["default"](void 0,this);this._element.on("touchstart",this._anonPinchStart)}r(t,e);s(t,[{key:"_onContainerScrolled",value:function(){this._scroll.tick()}},{key:"refreshLayout",value:function(){var e=this;this.$timeout(function(){e.width=e._element.width();e.absolutePosition=e._element.offset()},0,!1)}},{key:"showSheet",value:function(){this._element.css({visibility:"inherit"})}},{key:"zoom",value:function(e){if(this._initialHeight&&this._initialWidth&&this._scrollView){var t=this._element.height(),n=this._element.width(),i=v["default"].INITIAL_HEIGHT*e,r=v["default"].INITIAL_WIDTH*e,s=Math.abs(i-this._scrollView.height()),o=Math.abs(r-this._scrollView.width()),a=this._scrollView.scrollLeft()/(n-this._scrollView.width()),c=this._scrollView.scrollTop()/(t-this._scrollView.height());(isNaN(a)||n<=this._scrollView.width()&&0>=a)&&(a=.5);this._zoomFactor=e;this._element.css({height:i,width:r});this._scrollView.scrollTop(s*c);this._scrollView.scrollLeft(o*a);this.refreshLayout()}}},{key:"pinchStart",value:function(e){if(e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();e.stopPropagation();this.savePinchState(e);this._element.on("touchmove",this._anonPinchMove);this._element.on("touchend",this._anonPinchEnd)}}},{key:"pinchMove",value:function(e){var t=e.originalEvent.touches;if(this._pinchState.touches&&this._pinchState.touches.length>1&&t.length>1){var n=this._pinchState.svgWidth,i=this._pinchState.svgHeight,r=this._pinchState.touches[0].clientX-this._pinchState.touches[1].clientX;r*=r;var s=this._pinchState.touches[0].clientY-this._pinchState.touches[1].clientY;s*=s;var o=Math.sqrt(r+s);r=t[0].clientX-t[1].clientX;r*=r;s=t[0].clientY-t[1].clientY;s*=s;var a=Math.sqrt(r+s),c=a/o;n*=c;i*=c;var l=Math.min(n/v["default"].INITIAL_WIDTH,i/v["default"].INITIAL_HEIGHT);this._toolbarService.zoomFactor=l}}},{key:"pinchEnd",value:function(e){e.preventDefault();this._element.off("touchend",this._anonPinchEnd);this._element.off("touchmove",this._anonPinchMove)}},{key:"savePinchState",value:function(e){this._pinchState.svgWidth=this._element.width();this._pinchState.svgHeight=this._element.height();this._pinchState.svgLeft=this._element.offset().left;this._pinchState.svgTop=this._element.offset().top;this._pinchState.x=e.clientX||e.pageX;this._pinchState.y=e.clientY||e.pageY;angular.isDefined(e.originalEvent.touches)&&(this._pinchState.touches=e.originalEvent.touches);this._pinchState.event=e}},{key:"handleFallThrough",value:function(){this._focusManager.focusedElement=void 0}},{key:"destroy",value:function(){this._resize.destroy();this._scroll.destroy();this.scrollViewSelector=void 0;this._gesture.stop();this._window.off("resize",this._anonResize)}},{key:"scrollOffset",value:function(e){return e.minus(new d["default"](this.absolutePosition.x,this.absolutePosition.y))}},{key:"elementOffset",value:function(e){return e.times(Math.min(1,this.inverseScaleFactor)).minus(this.scaledCanvasOrigin)}},{key:"scale",value:function(e){return e.times(this.scaleFactor)}},{key:"inverseScale",value:function(e){return e.times(this.inverseScaleFactor)}},{key:"readonly",set:function(e){if(e){this._gesture.stop();this._gesture.click.unsubscribe(this.handleFallThrough,this)}else{this._gesture.start(this._element);this._gesture.click.subscribe(this.handleFallThrough,this)}}},{key:"toFitFactor",get:function(){return this.scrollViewWidthFactor}},{key:"noGrowFactor",get:function(){var e=this.scrollViewWidthFactor;return Math.min(e-.05,1)}},{key:"initialWidthFactor",get:function(){return this._initialWidth/v["default"].INITIAL_WIDTH}},{key:"scrollViewWidthFactor",get:function(){return this._scrollView?this._scrollView.width()/v["default"].INITIAL_WIDTH:1}},{key:"layers",get:function(){return this._layers}},{key:"width",get:function(){return this._width},set:function(e){this._width=e>0?e:this._width;this._scaleFactor=this._width/v["default"].INITIAL_WIDTH;this._inverseScaleFactor=v["default"].INITIAL_WIDTH/this._width}},{key:"scaleFactor",get:function(){return this._scaleFactor}},{key:"inverseScaleFactor",get:function(){return this._inverseScaleFactor}},{key:"absolutePosition",get:function(){return this._absolutePosition},set:function(e){this._absolutePosition=new d["default"](e.left,e.top)}},{key:"scrollViewAbsolutePosition",get:function(){return this._scrollViewAbsolutePosition},set:function(e){this._scrollViewAbsolutePosition=new d["default"](e.left,e.top)}},{key:"scrollViewSelector",set:function(e){if(this._scrollView){this._scrollView.off("scroll",this._anonScrollListener);this._scrollView=void 0}this._scrollViewSelector=e;if(this._scrollViewSelector){this._scrollView=angular.element(this._scrollViewSelector);this.scrollViewAbsolutePosition=this._scrollView.offset();this._scrollView.on("scroll",this._anonScrollListener)}}},{key:"canvasOrigin",get:function(){var e=this.absolutePosition.minus(this.scrollViewAbsolutePosition);return new d["default"](Math.min(e.x,0),Math.min(e.y,0))}},{key:"scaledCanvasOrigin",get:function(){return this.canvasOrigin.times(this.inverseScaleFactor)}},{key:"hiddenTextInput",get:function(){this._hiddenTextInput||(this._hiddenTextInput=this._element.find(".hidden-text-input"));return this._hiddenTextInput}}]);return t}(v["default"]);t["default"]=_;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(278),l=a(c),u=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);this._lineCapture=void 0;this._newLine=void 0;this._panCapture=void 0;this._placementCapture=void 0}r(t,e);s(t,[{key:"lineCapture",get:function(){this._lineCapture||(this._lineCapture=this._snap.select(".root .lineCapture"));return this._lineCapture}},{key:"newLine",get:function(){this._newLine||(this._newLine=this._snap.select(".root .lineCapture .newLine"));return this._newLine}},{key:"panCapture",get:function(){this._panCapture||(this._panCapture=this._snap.select(".root .panCapture"));return this._panCapture}},{key:"placementCapture",get:function(){this._placementCapture||(this._placementCapture=this._snap.select(".root .placementCapture"));return this._placementCapture}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(268),a=s(o),c=n(249),l=s(c),u=n(153),d=function(){function e(t){r(this,e);this._snap=t;this._root=void 0;this._background=void 0;this._content=void 0;this._work=void 0;this._sticker=void 0}i(e,[{key:"pickLayer",value:function(e){return e.type===a["default"].type?this.background:e.type===l["default"].type?this.sticker:e.metadata.intent===u.ElementIntents.WORK||e.metadata.intent===u.ElementIntents.FEEDBACK?this.work:e.metadata.intent===u.ElementIntents.CONTENT?this.content:void 0}},{key:"clear",value:function(){this.background.clear();this.sticker.clear();this.content.clear();this.work.clear()}},{key:"root",get:function(){this._root||(this._root=this._snap.select(".root"));return this._root}},{key:"background",get:function(){this._background||(this._background=this._snap.select(".background"));return this._background}},{key:"content",get:function(){this._content||(this._content=this._snap.select(".root .content"));return this._content}},{key:"work",get:function(){this._work||(this._work=this._snap.select(".root .work"));return this._work}},{key:"sticker",get:function(){this._sticker||(this._sticker=this._snap.select(".root .sticker"));return this._sticker}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){"ngInject";r(this,e);this.$mdDialog=t;this.linkTitle=n;this.linkUrl=i}e.$inject=["$mdDialog","title","url"];i(e,[{key:"submit",value:function(e){var t=this._isUrlMissing("http://")&&this._isUrlMissing("https://");this.linkUrl=t?"http://"+this.linkUrl:this.linkUrl;var n=this.isTitleValid;e.addLinkForm.title.$setValidity("required",n);var i=this.isUrlValid;e.addLinkForm.link.$setValidity("url",i);if(i&&n){var r={title:this.linkTitle,url:this.linkUrl};this.$mdDialog.hide(r)}}},{key:"_isUrlMissing",value:function(e){return this.linkUrl.indexOf(e)<0}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"isUrlValid",get:function(){return this.linkUrl.indexOf(".")>=0}},{key:"isTitleValid",get:function(){return!!this.linkTitle}}],[{key:"show",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1],i=arguments.length<=2||void 0===arguments[2]?"":arguments[2];return t.show({controller:e,templateUrl:"app/components/link-dialog/link-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,locals:{title:n,url:i}})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(154),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"panCapture")}r(t,e);s(t,[{key:"createElement",value:function(e){this.root=e.rect(0,0,d["default"].INITIAL_WIDTH,d["default"].INITIAL_HEIGHT).addClass(this.id).attr({fill:"transparent",cursor:"pointer"});this.root.attr({visibility:"hidden"})}},{key:"update",value:function(){this.root.attr({visibility:this.visibility})}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"STUDENT_ACCOUNTS",get:function(){return"student_accounts"}},{key:"FOLDERS",get:function(){return"folders"}},{key:"GRADE_EXPORT",get:function(){return"grade_export"}},{key:"UNLIMITED_ASSIGNMENTS",get:function(){return"unlimited_assignments"}},{key:"EXPORT_STUDENT_WORK",get:function(){return"export_student_work"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(132),l=a(c),u=n(154),d=a(u),h=n(152),f=a(h),g=n(156),p=n(144),m=a(p),v=n(146),_=a(v),y=function(){function e(t,n){var i=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2];r(this,e);this._element=t;this._placementFunc=n;this._cancelFunc=i;this._initialPosition=void 0;this._currentPosition=void 0}i(e,[{key:"element",get:function(){return this._element}},{key:"placementFunc",get:function(){return this._placementFunc}},{key:"cancelFunc",get:function(){return this._cancelFunc}},{key:"initialPosition",get:function(){return this._initialPosition},set:function(e){this._initialPosition=e}},{key:"currentPosition",get:function(){return this._currentPosition},set:function(e){this._currentPosition=e}}]);return e}();t.PlacementConfig=y;var k=function(e){function t(e,n){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"placementCapture",void 0);this._placementCaptureSnap=e.layers.placementCapture;this._toolbarService=n;this._gesture=new f["default"](void 0,e);this._gesture._dragThreshold=0;this._gesture.start(this._placementCaptureSnap.node);this._gesture.click.subscribe(this._handleClick,this);this._gesture.dragStart.subscribe(this._dragStart,this);this._gesture.dragMove.subscribe(this._dragMove,this);this._gesture.dragEnd.subscribe(this._dragEnd,this)}o(t,e);i(t,[{key:"createElement",value:function(e){this._root=e.group();this._rect=this._root.rect(0,0,d["default"].INITIAL_WIDTH,d["default"].INITIAL_HEIGHT).addClass(this.id).attr({fill:"transparent",visibility:"hidden"});this.visibility="hidden"}},{key:"update",value:function(){this._rect.attr({visibility:this.visibility,cursor:this.cursor})}},{key:"_handleClick",value:function(e){this._dragStart(e);this._dragEnd(e)}},{key:"_dragStart",value:function(e){if(this._config){this._config.initialPosition=e.offsetLocation;this._config.currentPosition=this._config.initialPosition;this._config.element.placement.create(this._root,this._config.initialPosition,this._config.currentPosition)}}},{key:"_dragMove",value:function(e){if(this._config){this._config.currentPosition=e.offsetLocation;this._config.element.placement.update(this._root,this._config.initialPosition,this._config.currentPosition)}}},{key:"_dragEnd",value:function(e){if(this._config){this._config.currentPosition=e.offsetLocation;this._config.element.placement.remove();this._toolbarService.updateMode(g.ToolbarModes.Selector);this.visibility="hidden";var t=this._config.initialPosition,n=this._config.currentPosition,i=new m["default"](t.x<n.x?t.x:n.x,t.y<n.y?t.y:n.y),r=Math.abs(t.x-n.x),s=Math.abs(t.y-n.y),o=new _["default"](r,s);this._config.placementFunc(i,o,t,n);this._config=void 0}}},{key:"clear",value:function(){if(this._config){this._config.cancelFunc();this._config=void 0;this.visibility="hidden"}}},{key:"config",set:function(e){this._config=e;this.visibility="visible"}},{key:"cursor",get:function(){return this._config&&this._config.element.placement.cursor}}]);return t}(l["default"]);t["default"]=k},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(146),a=s(o),c=n(212),l=n(205),u=n(144),d=s(u),h=function(){function e(t,n,i,s,o,a,c,l,u){r(this,e);this.$q=t;this.$scope=n;this.$mdDialog=i;this.$window=s;this.$document=o;this.$timeout=a;this._imageEditService=c;this._state=this.Loading;this._targetIndex=l;this._questionId=u;this._stream=void 0;this.isSupported?this._init():this._state=this.Unsupported}e.$inject=["$q","$scope","$mdDialog","$window","$document","$timeout","ImageEditService","targetIndex","questionId"];i(e,[{key:"_init",value:function(){var e=this;if(this.$window.innerWidth>this.$window.innerHeight){this._height=this.$window.innerHeight-200;this._width=Math.round(1.76*this._height)}else{this._width=this.$window.innerWidth-0;this._height=.56*this._width}this._mediaConstraints={audio:!1,video:{width:this._width,height:this._height}};this.$timeout(function(){return e.setupCamera()}).then(function(){e._state=e.Active})["catch"](function(t){e._state=e.Blocked});this.$scope.$on("$destroy",function(){return e._destroy()})}},{key:"setupCamera",value:function(){var e=this;this._player=angular.element("#player");return this._getUserMedia().then(function(t){e._player[0].srcObject=t;e._stream=t})}},{key:"_getUserMedia",value:function(){var e=this;return navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(this._mediaConstraints):this.$q(function(t,n){e._setGetUserMedia();navigator.getUserMedia(e._mediaConstraints,function(e){return t(e)},function(e){return n(e)})})}},{key:"_setGetUserMedia",value:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia}},{key:"takePicture",value:function(){var e=this,t=this.$document[0].getElementById("canvas"),n=t.getContext("2d"),i=this._stream.getTracks()[0],r=i.getSettings(),s=r.width,o=r.height;t.width=s;t.height=o;n.drawImage(this._player[0],0,0,s,o);this._imageEditService.imageFromCanvas(t).then(function(t){e.$mdDialog.hide({imageImport:e._formatImageImport(t)})})}},{key:"_formatImageImport",value:function(e){var t=new a["default"](e.naturalWidth,e.naturalHeight),n=new c.CropResult(t,new d["default"](0,0),t),i=this._imageEditService.crop(e,new d["default"](0,0),t);return new l.ImageImport(i,this._targetIndex,n,[new l.QuestionDisplay(this._questionId,this._targetIndex,!0,!1,void 0)])}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"_destroy",value:function(){this._stream&&this._stream.getTracks().forEach(function(e){e.stop()})}},{key:"state",get:function(){return this._state}},{key:"Loading",get:function(){return"Loading"}},{key:"Active",get:function(){return"Active"}},{key:"Unsupported",get:function(){return"Unsupported"}},{key:"Blocked",get:function(){return"Blocked"}},{key:"height",get:function(){return this._height}},{key:"width",get:function(){return this.state===this.Active?this._width:"unset"}},{key:"isSupported",get:function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}}],[{key:"show",value:function(t,n,i){return t.show({clickOutsideToClose:!0,escapeToClose:!0,templateUrl:"app/components/camera-dialog/camera-dialog.html",controller:e,controllerAs:"ctrl",locals:{targetIndex:n,questionId:i}})}}]);return e}();t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(205),a=s(o),c=function(){function e(t,n,i,s,o){r(this,e);this.$q=t;this.$mdDialog=n;this._questions=i;this._currentQuestionId=s;this._deferred=o;this._importImageDialog=a["default"].show}e.$inject=["$q","$mdDialog","questions","currentQuestionId","deferred"];
i(e,[{key:"selectFile",value:function(){var e=this;return this._importImageDialog(this.$q,this.$mdDialog,this._questions,!0,!1,this._currentQuestionId,!0).then(function(t){e._deferred.resolve(t)})}},{key:"cancel",value:function(){this.$mdDialog.cancel();this._deferred.reject()}}],[{key:"show",value:function(t,n,i,r){var s=t.defer();n.show({controller:e,templateUrl:"app/components/add-manipulative-image-dialog/add-manipulative-image-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,locals:{questions:i,currentQuestionId:r,deferred:s}});return s.promise}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",scope:{options:"=",showGradeInput:"=",locked:"="},transclude:!0,templateUrl:"app/components/assignment-toolbar/assignment-toolbar.html",link:N.link,controller:N,controllerAs:"ctrl"}}var r=n(39)["default"],s=n(19)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var a=n(156),c=n(162),l=n(286),u=o(l),d=n(287),h=o(d),f=n(250),g=o(f),p=n(288),m=n(290),v=o(m),_=n(289),y=n(18),k=o(y),b=n(163),S=o(b),w=n(151),C=o(w),E=n(291),T=n(358),I=o(T),A=n(359),x=o(A),O=n(360),P=o(O),R=n(361),D=o(R),M=function L(){r(this,L);this.readonly=!1;this.zoomIn=!0;this.zoomOut=!0;this.selectMode=!0;this.panMode=k["default"].get&&k["default"].get.isTouchDevice;this.penMode=!0;this.highlightMode=!0;this.eraseMode=!0;this.addTextbox=!0;this.addStraightLine=!0;this.addAudio=!0;this.addLink=!0;this.addImage=!0;this.addManipulativeImage=!1;this.addFillInTheBlank=!1;this.addSticker=!1;this.editSticker=!1;this.addMultipleChoice=!1;this.editBackground=!1;this.editPoints=!1;this.editScore=!1;this.viewScore=!1;this.toggleFeedback=!1;this.requestHelp=!1;this.resolveHelp=!1};t.AssignmentToolbarConfig=M;var N=function(){function e(t,n,i,s,o,a,c,l,d,f,g,p,m){"ngInject";var v=this;r(this,e);this.$q=t;this.$scope=n;this.$timeout=i;this.$mdPanel=s;this.$mdDialog=o;this.$mdMedia=a;this.$mdToast=c;this.$log=l;this.$window=d;this._window=angular.element(d);this._cacheService=f;this._toolbarService=g;this._authService=p;this._mixpanelService=m;this._colorCodec=new S["default"];this._showConfirmMenu=u["default"].show;this._showImagePicker=h["default"].show;this._helpDialog=x["default"].show;this._showGradeInput=!1;this._locked=!1;this.capturedAudioBlob=null;this._toolbarMeasurer=new C["default"](50,200,function(){return v._updateAndMeasureToolbarButtons()},this.$scope);this._snackbar=new I["default"](this.$mdToast);this._panel=new P["default"](this.$mdPanel,this._toolbarService);this._displayingAssignmentLockMessage=!1;this._init()}e.$inject=["$q","$scope","$timeout","$mdPanel","$mdDialog","$mdMedia","$mdToast","$log","$window","CacheService","ToolbarService","AuthService","MixpanelService"];s(e,[{key:"_init",value:function(){var e=this;this.$scope.$on("$destroy",function(){return e._destroy()});this._toolbarService.extendedStateUpdated.subscribe(this._onToolbarServiceStateUpdated,this);this._anonOnResize=function(){e.onWindowResized()};this._window.on("resize",this._anonOnResize);this._toolbarService.clipboardManager.init(this.$scope);this._toolbarService.stickerManager.init();this._toolbarService.fillInTheBlankManager.init();this._toolbarService.multipleChoiceManager.init();this._user=void 0;this._cacheService.getUser().then(function(t){e._user=t;e._initToolbarModel()})}},{key:"_destroy",value:function(){this._toolbarService.extendedStateUpdated.unsubscribe(this._onToolbarServiceStateUpdated,this);this._anonOnResize&&this._window.off("resize",this._anonOnResize);this._displayingAssignmentLockMessage&&this._snackbar.dismiss()}},{key:"undo",value:function(e){e.originalEvent.preventElementBlur=!0;this._toolbarService.undo()}},{key:"redo",value:function(e){e.originalEvent.preventElementBlur=!0;this._toolbarService.redo()}},{key:"mouseEnterDelete",value:function(){this._toolbarService.notify(a.Notifications.MOUSE_ENTER_DELETE,{needsFocusedElement:!0},!1)}},{key:"mouseLeaveDelete",value:function(){this._toolbarService.notify(a.Notifications.MOUSE_LEAVE_DELETE,{needsFocusedElement:!0},!1)}},{key:"deleteElement",value:function(){this._toolbarService.notify(a.Notifications.DELETE,{needsFocusedElement:!0});this.updateToolbarButtons()}},{key:"zoomIn",value:function(e){e.originalEvent.preventElementBlur=!0;this._toolbarService.zoomIn()}},{key:"zoomOut",value:function(e){e.originalEvent.preventElementBlur=!0;this._toolbarService.zoomOut()}},{key:"decrementFont",value:function(e){e.originalEvent.preventElementBlur=!0;this._toolbarService.updateTextSize(!1)}},{key:"incrementFont",value:function(e){e.originalEvent.preventElementBlur=!0;this._toolbarService.updateTextSize(!0)}},{key:"updateTextboxColor",value:function(e){this._toolbarService.updateTextColor(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updateTextboxBackgroundColor",value:function(e){this._toolbarService.updateTextboxBackgroundColor(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updateTextboxBorderColor",value:function(e){this._toolbarService.updateTextboxBorderColor(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updateStraightLineColor",value:function(e){this._toolbarService.updateStraightLineColor(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updateStraightLineWidth",value:function(e){this._toolbarService.updateStraightLineWidth(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updatePenColor",value:function(e){this._toolbarService.updateColor(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updatePenWidth",value:function(e){this._toolbarService.updatePenWidth(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updateHighlighterColor",value:function(e){var t={name:e.name,hex:this._colorCodec.hex6ToRgba(e.hex),active:e.active};this._toolbarService.updateHighlighterColor(t);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"updateHighlighterWidth",value:function(e){this._toolbarService.updateHighlighterWidth(e);this.panel.closeToolPanel();this.panel.closeMorePanel()}},{key:"createTextbox",value:function(){var e=this;this._checkIfHelpViewed(A.ViewHelps.PlaceTextbox,function(){e._toolbarService.notify(a.Notifications.CREATE_TEXTBOX,{needsFocusedElement:!0},!1);e.panel.closeMorePanel()})}},{key:"createStraightLine",value:function(){var e=this;this._checkIfHelpViewed(A.ViewHelps.PlaceSline,function(){e._toolbarService.notify(a.Notifications.CREATE_STRAIGHT_LINE,{needsFocusedElement:!0});e.panel.closeMorePanel()})}},{key:"createLink",value:function(){a.ToolbarModes.isPlacementMode(this.currentMode)&&this._toolbarService.clearPlacement();this._toolbarService.notify(a.Notifications.CREATE_LINK,{needsFocusedElement:!1});this.panel.closeMorePanel()}},{key:"openImageMenu",value:function(e){e.target.blur();this.panel.closeMorePanel();this.panel.openToolPanel(e,this.panel.ImageMenu,this,{position:this.$mdPanel.newPanelPosition().relativeTo(e.currentTarget).addPanelPosition(this.$mdPanel.xPosition.ALIGN_START,this.$mdPanel.yPosition.BELOW)})}},{key:"createImageFromCamera",value:function(e){a.ToolbarModes.isPlacementMode(this.currentMode)&&this._toolbarService.clearPlacement();e.target.blur();this.panel.closeMorePanel();this.panel.closeToolPanel();this._toolbarService.notify(a.Notifications.CREATE_IMAGE_FROM_CAMERA,{needsFocusedElement:!1})}},{key:"createImageFromFile",value:function(e){a.ToolbarModes.isPlacementMode(this.currentMode)&&this._toolbarService.clearPlacement();e.target.blur();this.panel.closeMorePanel();this.panel.closeToolPanel();this._toolbarService.notify(a.Notifications.CREATE_IMAGE_FROM_FILE,{needsFocusedElement:!1})}},{key:"toggleAudio",value:function(){if(a.ToolbarModes.isPlacementMode(this.currentMode)){this._toolbarService.clearPlacement();this._toolbarService.updateMode(a.ToolbarModes.Selector)}this.isAudioModeVisible?this.sidenav.closeState():this.sidenav.openRecordAudio();this.panel.closeMorePanel()}},{key:"createManipulativeImage",value:function(e){a.ToolbarModes.isPlacementMode(this.currentMode)&&this._toolbarService.clearPlacement();e.target.blur();this._toolbarService.notify(a.Notifications.CREATE_MANIPULATIVE_IMAGE,{needsFocusedElement:!1});this.panel.closeMorePanel()}},{key:"createFillInTheBlank",value:function(e){var t=this;this.sidenav.closeState();this._checkIfHelpViewed(A.ViewHelps.PlaceFitb,function(){e.target.blur();t._toolbarService.notify(a.Notifications.CREATE_FILL_IN_THE_BLANK,{needsFocusedElement:!0});t.panel.closeMorePanel()})}},{key:"toggleStickers",value:function(){if(a.ToolbarModes.isPlacementMode(this.currentMode)){this._toolbarService.clearPlacement();this._toolbarService.updateMode(a.ToolbarModes.Selector)}if(this.isStickerModeVisible)for(;this.isStickerModeVisible;)this.sidenav.closeState();else this.goToPlaceStickers();this.panel.closeMorePanel()}},{key:"toggleMultipleChoice",value:function(){if(a.ToolbarModes.isPlacementMode(this.currentMode)){this._toolbarService.clearPlacement();this._toolbarService.updateMode(a.ToolbarModes.Selector)}if(this.isMultipleChoiceModeVisible)for(;this.isMultipleChoiceModeVisible;)this.sidenav.closeState();else this.goToEditMultipleChoice();this.panel.closeMorePanel()}},{key:"toggleSlideBackground",value:function(){if(this.isSlideBackgroundModeVisible)for(;this.isSlideBackgroundModeVisible;)this.sidenav.closeState();else this.goToSlideBackground();this.panel.closeMorePanel()}},{key:"clearAll",value:function(){this._toolbarService.clearAll()}},{key:"addAudio",value:function(){this.sidenav.closeState();this._toolbarService.notify(a.Notifications.CREATE_AUDIO,this.capturedAudioBlob,{needsFocusedElement:!1});this.capturedAudioBlob=null}},{key:"toggleFeedback",value:function(){this._toolbarService.feedback.toggled()}},{key:"toggleHelpRequest",value:function(){if(this.isHelpCenterModeVisible)for(;this.isHelpCenterModeVisible;)this.sidenav.closeState();else this.goToHelpCenter();this.panel.closeMorePanel()}},{key:"updateMode",value:function(e){a.ToolbarModes.isPlacementMode(this.currentMode)&&this._toolbarService.clearPlacement();this._toolbarService.updateMode(e)}},{key:"_checkIfHelpViewed",value:function(e,t){var n=this,i=this.$q.resolve();!this._user||this._user.getHelpDialogViewed(e)||this._authService.authData.isAnon||(i=this._helpDialog(this.$mdDialog,e)["catch"](function(){n._user.setHelpDialogViewed(e,!0);n._cacheService.updateUser(n._user)}));i["finally"](t)}},{key:"cancelSidenav",value:function(e,t){e&&(e.originalEvent.preventElementBlur=!!t);this.sidenav.closeState()}},{key:"goToEditSticker",value:function(e){this._toolbarService.state.stickers.selectedId&&this._toolbarService.clearPlacement();this.sidenav.openEditSticker(e)}},{key:"goToPlaceStickers",value:function(){this._mixpanelService.stickerSidenavOpened(this.stickerSource);this.sidenav.openPlaceSticker()}},{key:"createSticker",value:function(){this.goToEditSticker(g["default"].DEFAULT_STICKER)}},{key:"goToEditMultipleChoice",value:function(e){this.sidenav.openEditMultipleChoice(e)}},{key:"goToSlideBackground",value:function(){this.sidenav.openSlideBackground()}},{key:"goToHelpCenter",value:function(){this.sidenav.openHelpCenter()}},{key:"onStickerSortStart",value:function(e){this._stickerListViewport=angular.element(".place-stickers md-content");this._stickerListViewportScrollLimit=this.fullStickerListHeight-this._stickerListViewport.height()}},{key:"onStickerSort",value:function(e){var t=e.helper[0],n=this.partialStickerListHeight;t.offsetTop>n?e.helper.css("top",n):t.offsetTop<this.stickerListItemHeight&&e.helper.css("top",this.stickerListItemHeight);this._stickerListViewport.scrollTop()>this._stickerListViewportScrollLimit&&this._stickerListViewport.scrollTop(this._stickerListViewportScrollLimit)}},{key:"onStickerSortStop",value:function(e){var t=e.item[0]&&e.item[0].id;return this._toolbarService.stickerManager.save(t)}},{key:"stickerScoreClass",value:function(e){return{zero:0===e}}},{key:"stickerClass",value:function(e){return{selected:this.state.stickers.selectedId===e}}},{key:"stickerScoreMinus",value:function(){this.selectedStickerScore>=1&&(this.selectedStickerScore-=1)}},{key:"stickerScorePlus",value:function(){this.selectedStickerScore?this.selectedStickerScore+=1:this.selectedStickerScore=1}},{key:"saveSticker",value:function(){var e=this;this._toolbarService.saveSticker().then(function(t){e._mixpanelService.stickerSaved(e.stickerSource,t.imageType,t.imageName);e.$timeout(function(){var e=angular.element("#"+t.id);(0,D["default"])(e[0],!1)},0,!1)})}},{key:"deleteSticker",value:function(){var e=this,t="Are you sure you want to delete this sticker?";this._showConfirmMenu(this.$mdDialog,t).then(function(){return e._toolbarService.deleteSelected(e.selectedSticker)})}},{key:"addSticker",value:function(e){var t=this;if(this.options.addSticker)this._checkIfHelpViewed(A.ViewHelps.PlaceSticker,function(){t._addSticker(e,!1)});else if(this.options.editSticker){this._mixpanelService.stickerPlaced(E.StickerSources.CONTENT,e.imageType,e.imageName);this._helpDialog(this.$mdDialog,A.ViewHelps.ContentStickers)}else this.$log.warn('Should not be able to call "addSticker" method unless either "addSticker" or "editSticker" option is enabled')}},{key:"addStickerWithoutPlacement",value:function(e,t){if(this.options.addSticker){t.stopPropagation();this._addSticker(e,!0)}}},{key:"_addSticker",value:function(e,t){this._mixpanelService.stickerPlaced(E.StickerSources.FEEDBACK,e.imageType,e.imageName);var n=angular.element("#"+e.id+" img")[0];this._toolbarService.notify(a.Notifications.ADD_STICKER,{sticker:e,stickerImage:n,skipPlacement:t},!1)}},{key:"openHelpInfoDialogForCustomStickers",value:function(){this._helpDialog(this.$mdDialog,A.ViewHelps.CustomStickers)}},{key:"resolveHelpRequest",value:function(){this.helpCenter.helpRequestManager.currentHelpRequest&&this.helpCenter.lowerHelpRequest()}},{key:"saveMultipleChoice",value:function(){this.sidenav.closeState();this._toolbarService.notify(a.Notifications.CREATE_MULTIPLE_CHOICE,this.multipleChoiceManager.options,{needsFocusedElement:!1});this.multipleChoiceManager.resetOptions()}},{key:"selectImage",value:function(){var e=this;this._showImagePicker(this.$mdDialog,this.$q.defer(),this.selectedStickerImageUrl).then(function(t){e.selectedStickerImageUrl=t||""})}},{key:"_initToolbarModel",value:function(){var e=this;if(!this._toolbarModel&&this.options){var t={},n={};t.undo=new _.IconButton("ck-undo",null,"Undo",function(t){return e.undo(t)});t.redo=new _.IconButton("ck-redo",null,"Redo",function(t){return e.redo(t)});t.zoomOut=new _.IconButton("ck-zoomout",null,"Zoom Out",function(t){return e.zoomOut(t)});t.zoomIn=new _.IconButton("ck-zoomin",null,"Zoom In",function(t){return e.zoomIn(t)});t.textbox=new _.IconButton("ck-text",null,"Add Textbox",function(t){return e.createTextbox(t)});t.straightLine=new _.IconButton("ck-linetool",null,"Add Line",function(t){return e.createStraightLine(t)});t.link=new _.IconButton("ck-link",null,"Add Link",function(t){return e.createLink(t)});t.image=new _.IconButton("ck-camera",null,"Add Image",function(t){return e.openImageMenu(t)});t.audio=new _.IconButton("ck-audio",null,"Add Audio",function(t){return e.toggleAudio(t)});t.manipulativeImage=new _.IconButton("ck-manipulative",null,"Add Manipulative",function(t){return e.createManipulativeImage(t)});t.fillInTheBlank=new _.IconButton("ck-fillintheblank",null,"Add Fill In The Blank",function(t){return e.createFillInTheBlank(t)});t.multipleChoice=new _.IconButton("ck-multiplechoice",null,"Add Multiple Choice",function(t){return e.toggleMultipleChoice(t)},null,null,null,null);t.sticker=new _.IconButton("ck-quickfeedback",null,"Add Sticker",function(t){return e.toggleStickers(t)});t.pointsField=new _.PointsField(this.options.editPoints?100:145);t.straightLineColor=new _.RenderedButton(".assignment-toolbar .rendered-buttons .straight-line-color","Line Color",function(t){return e.panel.openToolPanel(t,e.panel.StraightLineColor,e)},null,null,!1);t.straightLineWidth=new _.IconButton("ck-linewidth",null,"Line Width",function(t){return e.panel.openToolPanel(t,e.panel.StraightLineWidth,e)});t.penColor=new _.RenderedButton(".assignment-toolbar .rendered-buttons .pen-color","Pen Color",function(t){return e.panel.openToolPanel(t,e.panel.PenColor,e)},null,null,!1);t.penWidth=new _.IconButton("ck-linewidth",null,"Pen Width",function(t){return e.panel.openToolPanel(t,e.panel.PenWidth,e)});t.highlighterColor=new _.RenderedButton(".assignment-toolbar .rendered-buttons .highlighter-color","Highlighter Color",function(t){return e.panel.openToolPanel(t,e.panel.HighlighterColor,e)},null,null,!1);t.highlighterWidth=new _.IconButton("ck-linewidth",null,"Highlighter Width",function(t){return e.panel.openToolPanel(t,e.panel.HighlighterWidth,e)});t.textColor=new _.RenderedButton(".assignment-toolbar .rendered-buttons .text-color","Text Color",function(t){return e.panel.openToolPanel(t,e.panel.TextColor,e)},null,null,!1);t.textboxBackgroundColor=new _.RenderedButton(".assignment-toolbar .rendered-buttons .text-background-color","Background Color",function(t){return e.panel.openToolPanel(t,e.panel.TextBackgroundColor,e)},null,null,!1);t.textboxBorderColor=new _.RenderedButton(".assignment-toolbar .rendered-buttons .text-border-color","Border Color",function(t){return e.panel.openToolPanel(t,e.panel.TextBorderColor,e)},null,null,!1);t.decreaseTextSize=new _.IconButton("ck-textdecrease",null,"Make Text Smaller",function(t){return e.decrementFont(t)});t.increaseTextSize=new _.IconButton("ck-textincrease",null,"Make Text Bigger",function(t){return e.incrementFont(t)});t.slideBackground=new _.TextButton("Background",void 0,"Add background to slide",function(t){return e.toggleSlideBackground(t)},void 0,void 0,void 0,105);t.clearAll=new _.TextButton("Clear All",void 0,"Removes pen and highlighter lines",function(t){return e.clearAll(t)},void 0,void 0,void 0,90);t.trash=new _.IconButton("ck-trash",null,"Delete Object",function(t){return e.deleteElement(t)},function(){return e.mouseEnterDelete()},function(){return e.mouseLeaveDelete()});t.toggleFeedback=new _.RenderedButton(".assignment-toolbar .rendered-buttons .toggle-feedback","Toggle Feedback",function(t){return e.toggleFeedback(t)});t.helpRequest=new _.RenderedButton(".assignment-toolbar .rendered-buttons .request-help","Raise Hand",function(t){return e.toggleHelpRequest(t)},!1);n.undo=new p.Section([t.undo,t.redo],-1,!1);n.zoom=new p.Section([t.zoomOut,t.zoomIn],1);var i={value:a.ToolbarModes.Selector,icon:"ck-select",tooltip:"Select Mode"},r={value:a.ToolbarModes.Touch,icon:"ck-pan",tooltip:"Pan Mode"},s={value:a.ToolbarModes.Lines,icon:"ck-pen",tooltip:"Pen Mode"},o={value:a.ToolbarModes.Highlighter,icon:"ck-highlighter",tooltip:"Highlighter Mode"},c={value:a.ToolbarModes.Eraser,icon:"ck-eraser",tooltip:"Eraser Mode"},l=[this.options.selectMode?i:null,this.options.panMode?r:null,this.options.penMode?s:null,this.options.highlightMode?o:null,this.options.eraseMode?c:null].filter(function(e){return!!e});n.mode=new p.SelectSection(l.filter(function(e){return!!e}),2,function(t){return t&&e.updateMode(t.value)},l.find(function(t){return t.value===e.currentMode}),!0,"Select Mode","mode-select-container");n.addObjects=new p.Section([this.options.addTextbox?t.textbox:null,this.options.addStraightLine?t.straightLine:null,this.options.addLink?t.link:null,this.options.addImage?t.image:null,this.options.addAudio?t.audio:null,this.options.addManipulativeImage?t.manipulativeImage:null,this.options.addFillInTheBlank?t.fillInTheBlank:null,this.options.addMultipleChoice?t.multipleChoice:null,this.options.addSticker||this.options.editSticker?t.sticker:null].filter(function(e){return!!e}),3);n.config=new p.Section([t.straightLineColor,t.straightLineWidth,t.penColor,t.penWidth,t.highlighterColor,t.highlighterWidth,t.textColor,t.textboxBackgroundColor,t.textboxBorderColor,t.decreaseTextSize,t.increaseTextSize,t.slideBackground,t.clearAll,t.trash],3,!0,4*t.penColor.width);n.more=new p.MoreSection(function(t){return e.panel.openMorePanel(t)});n.spacer=new p.Section([new _.FlexSpace],-1,!1);n.points=new p.Section([this.options.viewScore||this.options.editPoints||this.options.editScore?t.pointsField:null].filter(function(e){return!!e}),5,!1);n.hand=new p.Section([this.options.toggleFeedback?t.toggleFeedback:null,this.options.editPoints?null:t.helpRequest].filter(function(e){return!!e}),-1,!1);var u=new v["default"]([n.undo,n.zoom,n.mode,n.addObjects,n.config,n.more,n.spacer,n.points,n.hand]);u.buttonMap=t;u.sectionMap=n;u.modes=l;this._toolbarModel=u;this._updateAndMeasureToolbarButtons()}}},{key:"updateToolbarButtons",value:function(){this._toolbarMeasurer.tick()}},{key:"_updateAndMeasureToolbarButtons",value:function(){if(this.toolbarModel){this._updateToolbarButtonsSync();this.onWindowResized()}else this._initToolbarModel()}},{key:"_updateToolbarButtonsSync",value:function(){var e=this,t=this.currentMode===a.ToolbarModes.Selector,n=this.currentMode===a.ToolbarModes.Lines,i=this.currentMode===a.ToolbarModes.Highlighter,r=this.currentMode===a.ToolbarModes.Eraser,s=this.currentMode===a.ToolbarModes.PlaceTextbox,o=this.currentMode===a.ToolbarModes.PlaceStraightLine,c=this.currentMode===a.ToolbarModes.PlaceFillInTheBlank,l=this._toolbarService,u=l.focusedElementIsTextbox,d=l.focusedElementIsFillInTheBlankChild,h=l.focusedElementIsStraightLine,f=u||d;this.toolbarModel.sectionMap.mode.currentValue=this.toolbarModel.sectionMap.mode.values.find(function(t){return t.value===e.currentMode});this.toolbarModel.buttonMap.undo.disabled=!this._toolbarService.canUndo;this.toolbarModel.buttonMap.redo.disabled=!this._toolbarService.canRedo;this.toolbarModel.buttonMap.zoomIn.disabled=!this._toolbarService.canZoomIn;this.toolbarModel.buttonMap.zoomOut.disabled=!this._toolbarService.canZoomOut;this.toolbarModel.buttonMap.decreaseTextSize.disabled=f&&this.focusedElement.isFontSizeAtMin;this.toolbarModel.buttonMap.increaseTextSize.disabled=f&&this.focusedElement.isFontSizeAtMax;this.toolbarModel.buttonMap.trash.disabled=!this.focusedElement||this.focusedElement.isChildManipulative;this.toolbarModel.buttonMap.toggleFeedback.disabled=this._toolbarService.isFeedbackDisabled;this.toolbarModel.buttonMap.textbox.toggled=s;this.toolbarModel.buttonMap.straightLine.toggled=o;this.toolbarModel.buttonMap.fillInTheBlank.toggled=c;this.toolbarModel.buttonMap.audio.toggled=this.isAudioModeVisible;this.toolbarModel.buttonMap.sticker.toggled=this.isStickerModeVisible;this.toolbarModel.buttonMap.multipleChoice.toggled=this.isMultipleChoiceModeVisible;this.toolbarModel.buttonMap.toggleFeedback.toggled=this._toolbarService.isFeedbackVisible;this.toolbarModel.buttonMap.straightLineColor.visible=t&&h;this.toolbarModel.buttonMap.straightLineWidth.visible=t&&h;this.toolbarModel.buttonMap.penColor.visible=n;this.toolbarModel.buttonMap.penWidth.visible=n;this.toolbarModel.buttonMap.highlighterColor.visible=i;this.toolbarModel.buttonMap.highlighterWidth.visible=i;this.toolbarModel.buttonMap.textColor.visible=t&&f;this.toolbarModel.buttonMap.textboxBackgroundColor.visible=t&&u;this.toolbarModel.buttonMap.textboxBorderColor.visible=t&&u;this.toolbarModel.buttonMap.decreaseTextSize.visible=t&&f;this.toolbarModel.buttonMap.increaseTextSize.visible=t&&f;this.toolbarModel.buttonMap.slideBackground.visible=this.options.editBackground&&t&&!this.focusedElement;this.toolbarModel.buttonMap.clearAll.visible=r;this.toolbarModel.buttonMap.trash.visible=this.focusedElement&&t;this.toolbarModel.buttonMap.pointsField.visible=this.showGradeInput}},{key:"onWindowResized",value:function(){this.toolbarModel&&this.toolbarModel.sizeToFit(this._window.width()-30)}},{key:"_onToolbarServiceStateUpdated",value:function(){this.updateToolbarButtons();if(this._toolbarService.focusedElementIsFillInTheBlankParent){this.fillInTheBlankManager.saveAnswers();this.sidenav.openEditFillInTheBlank(this.focusedElement)}else if(this.isFillInTheBlankModeVisible){this.fillInTheBlankManager.saveAnswers();for(;this.isFillInTheBlankModeVisible;)this.sidenav.closeState()}}},{key:"preventElementBlur",value:function(e,t){e.originalEvent.preventElementBlur=angular.isDefined(e.originalEvent.preventElementBlur)?e.originalEvent.preventElementBlur:t}},{key:"addFillInTheBlankAnswer",value:function(){this.fillInTheBlankManager.addAnswer()}},{key:"handleEnter",value:function(e){var t=angular.element(".edit-fill-in-the-blank .answer input"),n=t[e+1];n?n.focus():this.addFillInTheBlankAnswer()}},{key:"options",set:function(e){this._options=e;this._initToolbarModel();this.shouldResetSidenav&&this._toolbarService.sidenavManager.reset();(this.options.addSticker||this.options.editSticker)&&this._toolbarService.stickerManager.init();this.options.editBackground&&this._toolbarService.slideBackgroundManager.init();this.options.toggleFeedback&&this._toolbarService.feedback.reset();this.options.addFillInTheBlank&&this._toolbarService.fillInTheBlankManager.init()},get:function(){return this._options}},{key:"shouldResetSidenav",get:function(){return!this.options.editSticker&&!this.options.addSticker&&this.sidenav.isStickerModeOpen||!this.options.addAudio&&this.sidenav.isAudioModeOpen||!this.options.addMultipleChoice&&this.sidenav.isMultipleChoiceModeOpen||!this.options.requestHelp&&!this.options.resolveHelp&&this.sidenav.isHelpCenterModeOpen||!this.options.editBackground&&this.sidenav.isSlideBackgroundModeOpen}},{key:"toolbarModel",get:function(){return this._toolbarModel}},{key:"state",get:function(){return this._toolbarService.state}},{key:"focusedElement",get:function(){return this._toolbarService.focusedElement}},{key:"panel",get:function(){return this._panel}},{key:"penWidths",get:function(){return this._toolbarService.penWidths}},{key:"highlighterWidths",get:function(){return this._toolbarService.highlighterWidths}},{key:"straightLineWidths",get:function(){return this._toolbarService.straightLineWidths}},{key:"straightLineColor",get:function(){return this._toolbarService.state.straightLines.color.hex}},{key:"straightLineWidth",get:function(){return this._toolbarService.state.straightLines.width}},{key:"penColor",get:function(){return this._toolbarService.state.lines.color.hex}},{key:"penWidth",get:function(){return this._toolbarService.state.lines.width}},{key:"highlighterColor",get:function(){return this._colorCodec.rgbaOverrideAlpha(this._toolbarService.state.highlighter.color.hex,1)}},{key:"highlighterWidth",get:function(){return this._toolbarService.state.highlighter.width}},{key:"textColor",get:function(){return this._toolbarService.state.text.color}},{key:"textboxBackgroundColor",get:function(){return this._toolbarService.state.text.backgroundColor}},{key:"textboxBorderColor",get:function(){return this._toolbarService.state.text.borderColor}},{key:"isTeacher",get:function(){return this._authService.authData.isTeacher}},{key:"isStudent",get:function(){return this._authService.authData.isStudent}},{key:"elementColors",get:function(){return c.Colors.ELEMENT_COLORS}},{key:"isFeedbackVisible",get:function(){return this._toolbarService.isFeedbackVisible}},{key:"isFeedbackInvisible",get:function(){return this._toolbarService.isFeedbackInvisible}},{key:"isFeedbackDisabled",get:function(){return this._toolbarService.isFeedbackDisabled}},{key:"isFeedbackNotification",get:function(){return this._toolbarService.isFeedbackNotification}},{key:"toggleFeedbackTooltipMessage",get:function(){return this.isFeedbackDisabled?"You have no feedback on this question":"Toggle feedback on and off"}},{key:"gradeInputClass",get:function(){return this.options.editPoints?"value":this.options.viewScore||this.options.editScore?"score":"hide"}},{key:"isGradeInputReadonly",get:function(){return this.options.viewScore}},{key:"currentPoints",get:function(){return this.options.editPoints?this.pointValue:this.scoredPoints},set:function(e){this.options.editPoints?this.pointValue=e:this.scoredPoints=e}},{key:"potentialScore",get:function(){return!this.options.editPoints&&this.pointValue}},{key:"contentQuestion",get:function(){return this._toolbarService.contentQuestion}},{key:"workQuestion",get:function(){return this._toolbarService.workQuestion}},{key:"pointValue",get:function(){return this.contentQuestion&&this.contentQuestion.points},set:function(e){this.contentQuestion.points=e;this.resolveHelpRequest();this.updateToolbarButtons(!0);this._toolbarService.notify(a.Notifications.UPDATE_POINT_VALUE,{needsFocusedElement:!1},!1)}},{key:"scoredPoints",get:function(){return this.workQuestion&&this.workQuestion.points},set:function(e){this.updateToolbarButtons(!0);this._toolbarService.notify(a.Notifications.UPDATE_SCORED_POINTS,{needsFocusedElement:!1,newScore:e},!1)}},{key:"hasScoredPoints",get:function(){return angular.isNumber(this.scoredPoints)&&!!this.scoredPoints}},{key:"showGradeInput",get:function(){return this.options.viewScore&&this._showGradeInput||this.options.editScore||this.options.editPoints}},{key:"sidenav",get:function(){return this._toolbarService.sidenavManager}},{key:"isAudioModeVisible",get:function(){return this.sidenav.isOpen&&this.sidenav.canShowMode&&this.sidenav.mode.isAudioMode}},{key:"isStickerModeVisible",get:function(){return this.sidenav.isOpen&&this.sidenav.canShowMode&&this.sidenav.mode.isStickerMode}},{key:"isFillInTheBlankModeVisible",get:function(){return this.sidenav.isOpen&&this.sidenav.canShowMode&&this.sidenav.mode.isFillInTheBlankMode}},{key:"isMultipleChoiceModeVisible",get:function(){return this.sidenav.isOpen&&this.sidenav.canShowMode&&this.sidenav.mode.isMultipleChoiceMode}},{key:"isSlideBackgroundModeVisible",get:function(){return this.sidenav.isOpen&&this.sidenav.canShowMode&&this.sidenav.mode.isSlideBackgroundMode}},{key:"isHelpCenterModeVisible",get:function(){return this.sidenav.isOpen&&this.sidenav.canShowMode&&this.sidenav.mode.isHelpCenterMode}},{key:"showPlaceStickers",get:function(){return this.sidenav.isModeVisible(this.sidenav.modes.PLACE_STICKERS)}},{key:"showEditSticker",get:function(){return this.sidenav.isModeVisible(this.sidenav.modes.EDIT_STICKER)}},{key:"showCaptureAudio",get:function(){return this.sidenav.isModeVisible(this.sidenav.modes.AUDIO_RECORD)}},{key:"showEditFillInTheBlank",get:function(){return this.sidenav.isModeVisible(this.sidenav.modes.EDIT_FILL_IN_THE_BLANK)}},{key:"showEditMultipleChoice",get:function(){return this.sidenav.isModeVisible(this.sidenav.modes.EDIT_MULTIPLE_CHOICE)}},{key:"showSlideBackground",get:function(){return this.sidenav.isModeVisible(this.sidenav.modes.SLIDE_BACKGROUND)}},{key:"showHelpCenter",get:function(){return this.sidenav.isModeVisible(this.sidenav.modes.HELP_CENTER)}},{key:"showDelete",get:function(){return this.showEditSticker&&this.selectedSticker&&this.selectedSticker.id}},{key:"stickerManager",get:function(){return this._toolbarService.stickerManager}},{key:"stickers",get:function(){return this.stickerManager&&this.stickerManager.stickers}},{key:"stickerSortOptions",get:function(){var e=this;this._stickerSortOptions||(this._stickerSortOptions={handle:k["default"].get&&k["default"].get.isFirefox?"> .does-not-exist":"> .md-button .sticker-item-content",axis:"y",tolerance:"pointer",start:function(t,n){return e.onStickerSortStart(n)},sort:function(t,n){return e.onStickerSort(n)},stop:function(t,n){return e.onStickerSortStop(n)}});return this._stickerSortOptions}},{key:"stickerListStyle",get:function(){var e=this.fullStickerListHeight;return{height:e,maxHeight:e}}},{key:"fullStickerListHeight",get:function(){return this.partialStickerListHeight+this.stickerListItemHeight}},{key:"partialStickerListHeight",get:function(){return this.stickers.length*this.stickerListItemHeight}},{key:"stickerListItemHeight",get:function(){return 48}},{key:"selectedSticker",get:function(){return this.stickerManager&&this.stickerManager.selected}},{key:"selectedStickerImageUrl",get:function(){return this.stickerManager&&this.stickerManager.selectedImageUrl;
},set:function(e){this.stickerManager&&(this.stickerManager.selectedImageUrl=e)}},{key:"defaultStickerImageUrl",get:function(){return g["default"].BLANK_STICKER_URL}},{key:"selectImageText",get:function(){return this.selectedStickerImageUrl?"change image":"add image"}},{key:"selectedStickerText",get:function(){return this.stickerManager&&this.stickerManager.selectedText},set:function(e){this.stickerManager&&(this.stickerManager.selectedText=e)}},{key:"selectedStickerScore",get:function(){return this.stickerManager&&this.stickerManager.selectedScore},set:function(e){this.stickerManager&&(this.stickerManager.selectedScore=e)}},{key:"stickerSource",get:function(){if(this.options.addSticker)return E.StickerSources.FEEDBACK;if(this.options.editSticker)return E.StickerSources.CONTENT;this.$log.warn('Should not be able to call "_stickerSource" method unless either "addSticker" or "editSticker" option is enabled');return void 0}},{key:"helpCenter",get:function(){return this._toolbarService.helpCenter}},{key:"helpRequestButtonClass",get:function(){var e=this.helpCenter.helpRequestManager.isHelpRequestHelp,t=this.helpCenter.helpRequestManager.isHelpRequestCheck,n=this.showHelpCenter&&!e&&!t;return{help:e,check:t,toggled:n,"unread-messages":this.helpCenter.hasUnreadMessages&&!t&&!e&&!n}}},{key:"multipleChoiceManager",get:function(){return this._toolbarService.multipleChoiceManager}},{key:"currentMode",get:function(){return this._toolbarService.state.mode}},{key:"backgroundManager",get:function(){return this._toolbarService.slideBackgroundManager}},{key:"fillInTheBlankManager",get:function(){return this._toolbarService.fillInTheBlankManager}},{key:"locked",get:function(){return this._locked},set:function(e){this._locked=e;this.toolbarModel.sections.forEach(function(t){t.visibility=!e});if(e){this.toolbarModel.sectionMap.spacer.visibility=!0;this.toolbarModel.sectionMap.points.visibility=!0;this.toolbarModel.sectionMap.hand.visibility=!0;I["default"].show(this.$mdToast,"Your teacher has locked this assignment. You will not be able to make any changes to your work.",!1);this._displayingAssignmentLockMessage=!0}else{this._snackbar.dismiss();this._displayingAssignmentLockMessage=!1}this.updateMode(a.ToolbarModes.Selector);this.toolbarModel.clear()}}],[{key:"link",value:function(e,t,n,i){e.$watch("options",function(e){e&&(i.options=e)});e.$watch("showGradeInput",function(e){if(e===!0||e===!1){i._showGradeInput=e;i.updateToolbarButtons(!0)}});e.$watch("locked",function(e){(e===!1&&i.locked===!0||e===!0&&i.locked===!1)&&(i.locked=e)})}}]);return e}()},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s){"ngInject";r(this,e);this.message=n;this.secondaryMessage=i;this.isAlert=s;this.$mdDialog=t}e.$inject=["$mdDialog","message","secondaryMessage","isAlert"];i(e,[{key:"confirm",value:function(){this.$mdDialog.hide()}},{key:"cancel",value:function(){this.$mdDialog.cancel()}}],[{key:"show",value:function(t,n,i){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],o={clickOutsideToClose:!0,escapeToClose:!0,templateUrl:"app/components/confirm-dialog/confirm-dialog.html",controller:e,controllerAs:"ctrl",locals:{message:n,secondaryMessage:i,isAlert:r},fullscreen:s};return t.show(o)}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(250),a=n(205),c=s(a),l=function(){function e(t,n,i,s){"ngInject";r(this,e);this.$q=t;this.$mdDialog=n;this._deferred=i;this._activeStickerUrl=s;this._importImageDialog=c["default"].show}e.$inject=["$q","$mdDialog","deferred","activeStickerUrl"];i(e,[{key:"selectSticker",value:function(e){this.$mdDialog.hide();this._deferred.resolve(e)}},{key:"isActive",value:function(e){return e.url===this._activeStickerUrl}},{key:"selectCustomSticker",value:function(){var e=this;this.$mdDialog.cancel();this._importImageDialog(this.$q,this.$mdDialog,void 0,!1,!1).then(function(t){var n=t.images,i=n&&n[0];e._deferred.resolve(i.imageSrc)})}},{key:"defaultUserStickers",get:function(){return o.DefaultUserStickers}}],[{key:"show",value:function(t,n,i){t.show({clickOutsideToClose:!0,escapeToClose:!0,templateUrl:"app/components/image-picker-dialog/image-picker-dialog.html",controller:e,controllerAs:"ctrl",focusOnOpen:!1,locals:{deferred:n,activeStickerUrl:i}});return n.promise}}]);return e}();t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(119)["default"],c=n(172)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(211),d=l(u),h=n(289),f=function(){function e(t,n){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],s=arguments.length<=3||void 0===arguments[3]?0:arguments[3];r(this,e);this._items=t;this._displayItems=[];this._collapsedItems=[];this._displayWidth=new d["default"];this._collapsed=!1;this._priority=n;this._leftDivider=i;this._forceExpandedWidth=s;this._visibility=!0;this.collapsed=!1}i(e,[{key:"_shouldShowDividers",value:function(){return this._displayItems.length>0&&this._leftDivider}},{key:"invalidateDisplayWidth",value:function(){this._displayWidth.clear()}},{key:"collapsed",get:function(){return this._collapsed},set:function(e){this._collapsed=e;if(this._collapsed){this._displayItems=this._items.filter(function(e){return!e.collapsible});this._collapsedItems=this._items.filter(function(e){return e.collapsible})}else{this._displayItems=this._items.slice();this._collapsedItems=[]}this._shouldShowDividers()&&this._displayItems.unshift(new h.Divider);this.invalidateDisplayWidth()}},{key:"displayItems",get:function(){return this._displayItems}},{key:"hasVisibleDisplayItems",get:function(){return this.displayItems.findIndex(function(e){return e.visible})>=0}},{key:"collapsedItems",get:function(){return this._collapsedItems}},{key:"hasVisibleCollapsedItems",get:function(){return this.collapsedItems.findIndex(function(e){return e.visible})>=0}},{key:"priority",get:function(){return this._priority}},{key:"visibility",get:function(){return this._visibility},set:function(e){this._visibility=e}},{key:"displayWidth",get:function(){var e=this;return!this.collapsed&&this._forceExpandedWidth?this._forceExpandedWidth:this._displayWidth.value(function(){return e._displayItems.filter(function(e){return e.visible}).reduce(function(e,t){return e+t.width},0)})}},{key:"type",get:function(){return e.TYPE_NORMAL}}],[{key:"SORT_PRIORITY_ASC",get:function(){return function(e,t){return e.priority>t.priority?1:-1}}},{key:"TYPE_NORMAL",get:function(){return"section"}},{key:"TYPE_MORE",get:function(){return"more"}}]);return e}();t.Section=f;var g=function(e){function t(e,n,i){var o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],c=arguments.length<=4||void 0===arguments[4]?!0:arguments[4],l=this,u=arguments.length<=5||void 0===arguments[5]?null:arguments[5],d=arguments.length<=6||void 0===arguments[6]?"":arguments[6];r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,[],n,c);this._values=e;this._currentValue=o;this._onUpdate=i;this._itemMap=this._initButtons(e,o);this._items=[].concat(a(this._itemMap.values()));this._select=new h.Select(e,function(e){return l.currentValue=e},o,u,d);this.collapsed=!1}o(t,e);i(t,[{key:"_initButtons",value:function(e,t){var n=this;return new c(e.map(function(e){var i=new h.IconButton(e.icon,null,e.tooltip,function(t,i){n.currentValue=e;i.toggled=!0},void 0,void 0,void 0,void 0);e===t&&(i.toggled=!0);return[e,i]}))}},{key:"values",get:function(){return this._values}},{key:"currentValue",get:function(){return this._currentValue},set:function(e){if(this._currentValue!==e){this._currentValue&&(this._itemMap.get(this._currentValue).toggled=!1);this._currentValue=e;this._currentValue&&(this._itemMap.get(this._currentValue).toggled=!0);this._select.currentValue=e;this._onUpdate(e,this)}}},{key:"collapsed",set:function(e){this._collapsed=e;if(this._collapsed){this._displayItems=[this._select];this._collapsedItems=[]}else{this._displayItems=this._items.slice();this._collapsedItems=[]}this._shouldShowDividers()&&this._displayItems.unshift(new h.Divider);this._displayWidth.clear()},get:function(){return s(Object.getPrototypeOf(t.prototype),"collapsed",this)}}]);return t}(f);t.SelectSection=g;var p=function(e){function t(e){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,[],-1,!0);this._moreButton=new h.TextButton("More","ck-carrot",null,e,null,null,!1,70);this.hasContent=!1}o(t,e);i(t,[{key:"collapsed",set:function(e){this._collapsed=e;this._collapsed=!1},get:function(){return s(Object.getPrototypeOf(t.prototype),"collapsed",this)}},{key:"hasContent",set:function(e){this._hasContent=e;if(this._hasContent){this._displayItems=[this._moreButton];this._collapsedItems=[]}else{this._displayItems=[];this._collapsedItems=[]}this._shouldShowDividers()&&this._displayItems.unshift(new h.Divider);this._displayWidth.clear()},get:function(){return this._hasContent}},{key:"type",get:function(){return f.TYPE_MORE}}]);return t}(f);t.MoreSection=p},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a={ICON_BUTTON:"icon-button",TEXT_BUTTON:"text-button",RENDERED_BUTTON:"rendered-button",DIVIDER:"divider",SELECT:"select",POINTS:"points-field",FLEX_SPACE:"flex-space"},c=function(){function e(t){r(this,e);this._type=t;this._visible=!0}i(e,[{key:"type",get:function(){return this._type}},{key:"collapsible",get:function(){return!0}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e}},{key:"width",get:function(){throw new Error("not implemented")}},{key:"flexClass",get:function(){return"flex-initial"}}],[{key:"TYPES",get:function(){return a}}]);return e}();t.ToolbarItem=c;var l=function(e){function t(e,n,i){var o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],a=arguments.length<=4||void 0===arguments[4]?null:arguments[4],c=arguments.length<=5||void 0===arguments[5]?!0:arguments[5],l=arguments.length<=6||void 0===arguments[6]?44:arguments[6];r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);this._tooltip=n;this._onClick=i;this._onMouseEnter=o;this._onMouseLeave=a;this._collapsible=c;this._toggled=!1;this._width=l;this._disabled=!1}o(t,e);i(t,[{key:"click",value:function(e){this._onClick&&this._onClick(e,this)}},{key:"mouseEnter",value:function(e){this._onMouseEnter&&this._onMouseEnter(e,this)}},{key:"mouseLeave",value:function(e){this._onMouseLeave&&this._onMouseLeave(e,this)}},{key:"toggle",value:function(){this.toggled=!this.toggled}},{key:"tooltip",get:function(){return this._tooltip}},{key:"collapsible",get:function(){return this._collapsible}},{key:"toggled",get:function(){return this._toggled},set:function(e){this._toggled=e}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e}},{key:"width",get:function(){return this._width}}]);return t}(c);t.Button=l;var u=function(e){function t(e,n,i,o,a,l,u,d){void 0===n&&(n=null);r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c.TYPES.ICON_BUTTON,i,o,a,l,u,d);this._icon=e;this._subIcon=n}o(t,e);i(t,[{key:"icon",get:function(){return this._icon}},{key:"subIcon",get:function(){return this._subIcon}}]);return t}(l);t.IconButton=u;var d=function(e){function t(e,n,i,o,a,l,u,d){void 0===n&&(n=null);r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c.TYPES.TEXT_BUTTON,i,o,a,l,u,d);this._text=e;this._subIcon=n}o(t,e);i(t,[{key:"subIcon",get:function(){return this._subIcon}},{key:"text",get:function(){return this._text}}]);return t}(l);t.TextButton=d;var h=function(e){function t(e,n,i,o,a,l,u){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c.TYPES.RENDERED_BUTTON,n,i,o,a,l,u);this._selector=e}o(t,e);i(t,[{key:"attach",value:function(){}},{key:"selector",get:function(){return this._selector}}]);return t}(l);t.RenderedButton=h;var f=function(e){function t(e,n){var i=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],a=arguments.length<=4||void 0===arguments[4]?"":arguments[4];r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c.TYPES.SELECT);this._values=e;this._currentValue=i;this._onUpdate=n;this._tooltip=o;this._containerClass=a}o(t,e);i(t,[{key:"onUpdate",value:function(){return this._onUpdate(this._currentValue,this)}},{key:"width",get:function(){return 60}},{key:"containerClass",get:function(){return this._containerClass}},{key:"currentValue",get:function(){return this._currentValue},set:function(e){if(this._currentValue!==e){this._currentValue=e;this.onUpdate()}}},{key:"values",get:function(){return this._values}},{key:"tooltip",get:function(){return this._tooltip}}]);return t}(c);t.Select=f;var g=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?100:arguments[0];r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c.TYPES.POINTS);this._width=e}o(t,e);i(t,[{key:"width",get:function(){return this._width}}]);return t}(c);t.PointsField=g;var p=function(e){function t(){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c.TYPES.FLEX_SPACE)}o(t,e);i(t,[{key:"width",get:function(){return 0}},{key:"flexClass",get:function(){return"flex-grow"}}]);return t}(c);t.FlexSpace=p;var m=function(e){function t(){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c.TYPES.DIVIDER)}o(t,e);i(t,[{key:"width",get:function(){return 5}}]);return t}(c);t.Divider=m},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(288),a=n(289),c=n(211),l=s(c),u=function(){function e(t){r(this,e);this._sections=t;this._prioritySections=t.slice().sort(o.Section.SORT_PRIORITY_ASC).filter(function(e){return e.priority>=0});this._hasCollapsedSections=!1;this._moreSection=this._sections.find(function(e){return e.type===o.Section.TYPE_MORE});this._displayItems=new l["default"]}i(e,[{key:"sizeToFit",value:function(e){this._prioritySections.forEach(function(e){return e.collapsed=!1});this._set_hasCollapsedSections=!1;this._collapse(this._prioritySections,this.sections,e);this._displayItems.clear()}},{key:"_collapse",value:function(e,t,n){if(0!==e.length&&!(t.reduce(function(e,t){return e+t.displayWidth},0)<n)){e[0].collapsed=!0;this._set_hasCollapsedSections=!0;return this._collapse(e.slice(1),t,n)}}},{key:"clear",value:function(){this._displayItems.clear()}},{key:"isButton",value:function(e){return e.type===this.TYPES.ICON_BUTTON||e.type===this.TYPES.TEXT_BUTTON||e.type===this.TYPES.RENDERED_BUTTON}},{key:"sections",get:function(){return this._sections}},{key:"_set_hasCollapsedSections",set:function(e){this._hasCollapsedSections=e;this._moreSection&&(this.hasCollapsedSections?this._moreSection.hasContent||(this._moreSection.hasContent=this._prioritySections.findIndex(function(e){return e.collapsedItems.length>0})>=0):this._moreSection.hasContent=!1)}},{key:"hasCollapsedSections",get:function(){return this._hasCollapsedSections}},{key:"TYPES",get:function(){return a.ToolbarItem.TYPES}},{key:"displayItems",get:function(){var e=this;return this._displayItems.value(function(){return e.sections.reduce(function(e,t){return t.visibility?e.concat(t.displayItems):e},[])})}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(172)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(292),c=n(357),l=function(){function e(t,n,i){"ngInject";r(this,e);this.$log=n;this.$q=i;this._enabled=!1;this._userData=null;this._whenReadyDeferred=null;this._whenReady=null;this._defaultProperties={platform:"web"};this._testMixpanel=null;if(t.mixpanelId){mixpanel.init(t.mixpanelId,{persistence:"localStorage"});this._enabled=!0}this.identify()}e.$inject=["environment","$log","$q"];i(e,[{key:"lockUntilIdentify",value:function(){this._whenReadyDeferred||(this._whenReadyDeferred=this.$q.defer());this._whenReady=this._whenReadyDeferred.promise}},{key:"identify",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?new o:arguments[1];this._userData=e;var i=null;this._userData&&(i=this._userData.isProClassroom?"pro":this._userData.isProSchool?"proSchool":this._userData.isProDistrict?"proDistrict":"free");i?this._defaultProperties.contractType=i:delete this._defaultProperties.contractType;if(this._userData&&this._userData.isTeacher)!function(){var e={};n.forEach(function(t,n){e["abtest."+n]=t});e.userType="teacher";if(t._enabled)try{t._mixpanel.identify(t._userData.id);t._mixpanel.register(e);i&&t._mixpanel.people.set("contractType",i)}catch(r){t.$log.error("mixpanel error",r)}t.$log.debug("mixpanel identify:",t._userData.id,e)}();else{if(this._enabled)try{this._mixpanel.reset();this._mixpanel.register({})}catch(r){this.$log.error("mixpanel error",r)}this.$log.debug("mixpanel identify: cleared")}if(this._whenReadyDeferred){this._whenReadyDeferred.resolve(this._userData);this._whenReadyDeferred=null}else this._whenReady=this.$q.resolve(this._userData)}},{key:"getDistinctId",value:function(){return this._mixpanel.get_distinct_id()}},{key:"accountCreated",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?a.AuthType.PASSWORD:arguments[0];this._whenReady.then(function(n){e._send("accountCreated",{userType:n.roles[0],authType:t})})}},{key:"assignmentCreated",value:function(e){this._send("T added Assignment",{assignmentId:e},!0)}},{key:"assignmentLibraryOpened",value:function(){this._send("assignmentLibrary",{type:"opened"},!1)}},{key:"chatSent",value:function(){this._send("chatSent",{},!0)}},{key:"classCodeDialogOpened",value:function(e,t,n){this._send("classCodeDialogOpened",{rosterId:e,assignmentId:t,location:n},!0)}},{key:"classCodeLinkCopied",value:function(e,t){this._send("classCodeLinkCopied",{rosterId:e,assignmentId:t},!0)}},{key:"createAccountProgress",value:function(e){var t=this;this._whenReady.then(function(n){t._send("createAccountProgress",{completedStep:e,userType:n.roles[0]})})}},{key:"latestFeaturesOpened",value:function(){this._send("latestFeaturesOpened",{},!0)}},{key:"profileViewFunnel",value:function(e,t,n,i){this._send("profileView",{type:e,profileId:t,userId:n||"anonymous",assignmentName:i},!1)}},{key:"publicAssignmentCopyClicked",value:function(e){this._send("publicAssignmentCopyClicked",{assignmentId:e,userId:this._userData?this._userData.id:"anonymous"})}},{key:"publicAssignmentQuestionViewed",value:function(e,t){this._send("publicAssignmentQuestionViewed",{assignmentId:e,questionId:t})}},{key:"publicAssignmentViewed",value:function(e){this._send("publicAssignmentViewed",{assignmentId:e,userId:this._userData?this._userData.id:"anonymous"})}},{key:"rosterCreatedFrom",value:function(e){this._send("rosterCreatedFrom",{location:e},!0)}},{key:"rosterToAssignments",value:function(){this._send("rosterToAssignments",{},!0)}},{key:"rosterGradeExported",value:function(){this._send("rosterGradeExported",{},!0)}},{key:"assignmentGradeExported",value:function(){this._send("assignmentGradeExported",{},!0)}},{key:"assignmentAnswerExported",value:function(){this._send("assignmentAnswerExported",{},!0)}},{key:"shareAssignmentWorkflow",value:function(e,t,n){this._send("shareAssignmentWorkflow",{assignmentId:e,location:t,step:n},!0)}},{key:"tappedViewStudentWork",value:function(e,t){this._send("Tapped ViewStudentWork",{assignmentId:e,location:t},!0)}},{key:"wcvToEditQuestion",value:function(e,t){this._send("wcvToEditQuestion",{assignmentId:e,questionId:t},!0)}},{key:"experiment",value:function(e){this._send("experiment."+e,{},!1)}},{key:"sessionQuestionViewed",value:function(e){this._send("sessionQuestionViewed",{questionNumber:e},!0)}},{key:"sessionSettingToggled",value:function(e,t){this._send("sessionSettingToggled",{type:e,value:t},!0)}},{key:"stickerSidenavOpened",value:function(e){this._send("stickerSidenavOpened",{source:e},!0)}},{key:"stickerSaved",value:function(e,t,n){this._send("stickerSaved",{source:e,type:t,name:n},!0)}},{key:"stickerPlaced",value:function(e,t,n){this._send("stickerPlaced",{source:e,type:t,name:n},!0)}},{key:"subscriptionFunnel",value:function(e,t,n,i){this._send("subscriptionFunnel",{step:e,subscriptionPlan:t,contractType:n,source:i},!1)}},{key:"teacherHelpCenter",value:function(e,t){this._send("teacherHelpCenter",{view:e,value:t},!1)}},{key:"userDeleted",value:function(){this._send("userDeleted",{},!1)}},{key:"userOrgConfirmed",value:function(){var e=arguments.length<=0||void 0===arguments[0]?c.OrganizationTypes.School:arguments[0];this._send("userOrgConfirmed",{orgType:e},!1)}},{key:"_send",value:function(e,t,n){var i=this;this._whenReady.then(function(){t||(t={});var r=s({},t,i._defaultProperties);if(i._enabled)try{i._mixpanel.track(e,r);if(n){i._mixpanel.people.increment(e+"_Count");i._mixpanel.people.set(e+"_Last",moment().toISOString())}i.$log.debug("mixpanel event: "+e+" includeCountAndLast="+n,r)}catch(o){i.$log.error("mixpanel error",o)}else i.$log.debug("[disabled] mixpanel event: "+e+" includeCountAndLast="+n,r)})}},{key:"setSchoolNamePeopleProperty",value:function(e){this._mixpanel.people.set("schoolName",e)}},{key:"_mixpanel",get:function(){return this._testMixpanel||mixpanel}}]);return e}();t["default"]=l;var u=function(){function e(){r(this,e)}i(e,null,[{key:"STARTED",get:function(){return"started"}},{key:"NAME",get:function(){return"name"}},{key:"LOCATION",get:function(){return"location"}},{key:"REFERRAL",get:function(){return"referral"}},{key:"COMPLETE",get:function(){return"complete"}},{key:"SCHOOL_NAME",get:function(){return"schoolName"}}]);return e}();t.AccountCreationStep=u;var d=function(){function e(){r(this,e)}i(e,null,[{key:"ASSIGNMENT_EDIT",get:function(){return"assignmentEdit"}},{key:"ASSIGNMENT_EDIT_TOP",get:function(){return"assignmentEdit-top"}},{key:"ASSIGNMENT_EDIT_ROSTER",get:function(){return"assignmentEdit-roster"}},{key:"ASSIGNMENT_LIST",get:function(){return"assignmentList"}},{key:"ASSIGNMENT_WATCH",get:function(){return"assignmentWatch"}},{key:"ASSIGNMENT_WORK",get:function(){return"assignmentWork"}},{key:"ASSIGNMENT_WORK_QUESTION",get:function(){return"assignmentWorkQuestion"}},{key:"PUBLIC_ASSIGNMENT",get:function(){return"publicAssignment"}},{key:"ROSTER_LIST",get:function(){return"rosterList"}},{key:"UNKNOWN",get:function(){return"unknown"}}]);return e}();t.Locations=d;var h=function(){function e(){r(this,e)}i(e,null,[{key:"STARTED",get:function(){return"started"}},{key:"WITH_COLLEAGUES",get:function(){return"withColleagues"}},{key:"WITH_STUDENTS",get:function(){return"withStudents"}},{key:"VIA_EMAIL",get:function(){return"viaEmail"}},{key:"VIA_LINK",get:function(){return"viaLink"}},{key:"VIA_GOOGLE_PLUS",get:function(){return"viaGooglePlus"}},{key:"VIA_FACEBOOK",get:function(){return"viaFacebook"}},{key:"VIA_TWITTER",get:function(){return"viaTwitter"}},{key:"VIA_PINTEREST",get:function(){return"viaPinterest"}},{key:"PUBLIC_PAGE",get:function(){return"publicPage"}}]);return e}();t.ShareWorkflowSteps=h;var f=function(){function e(){r(this,e)}i(e,null,[{key:"SIDEBAR_BUTTON",get:function(){return"sidebar_button"}},{key:"NEW_FOLDER",get:function(){return"new_folder"}},{key:"STUDENT_EXPORT",get:function(){return"student_export"}},{key:"GRADE_EXPORT",get:function(){return"grade_export"}},{key:"ANSWER_EXPORT",get:function(){return"answer_export"}},{key:"ROSTER_GRADE_EXPORT",get:function(){return"roster_grade_export"}},{key:"IMPORT_GOOGLE_ROSTERS",get:function(){return"import_google_rosters"}},{key:"STUDENT_ACCOUNTS_ADD_STUDENTS_DIALOG",get:function(){return"student_accounts_add_students_dialog"}},{key:"STUDENT_ACCOUNTS_HELP_DIALOG",get:function(){return"student_accounts_help_dialog"}},{key:"ASSIGNMENTS_LIMIT_FIRST_TIME_DIALOG",get:function(){return"assignments_limit_first_time_dialog"}},{key:"ASSIGNMENTS_LIMIT_PAYWALL_DIALOG",get:function(){return"assignments_limit_paywall_dialog"}}]);return e}();t.PaywallSources=f;var g=function(){function e(){r(this,e)}i(e,null,[{key:"PAYWALL",get:function(){return"paywall"}},{key:"START_TRIAL",get:function(){return"startTrial"}},{key:"LEARN_MORE",get:function(){return"learnMore"}},{key:"ORDER_PRO",get:function(){return"orderPro"}},{key:"ENTER_PAYMENT",get:function(){return"enterPayment"}},{key:"CANCEL",get:function(){return"cancel"}},{key:"COMPLETE",get:function(){return"complete"}},{key:"SCHOOL_CLOSURE",get:function(){return"school_closure"}}]);return e}();t.SubscriptionFunnel=g;var p=function(){function e(){r(this,e)}i(e,null,[{key:"VIEWED",get:function(){return"viewed"}},{key:"CLICKED_ASSIGNMENT",get:function(){return"clickedAssignment"}}]);return e}();t.ProfileViewFunnel=p;var m=function(){function e(){r(this,e)}i(e,null,[{key:"VIEWED",get:function(){return"viewed"}},{key:"SELECTED",get:function(){return"selected"}},{key:"RETRIEVED",get:function(){return"retrieved"}}]);return e}();t.GoogleRosterImportFunnel=m;var v=function(){function e(){r(this,e)}i(e,null,[{key:"FEEDBACK",get:function(){return"feedback"}},{key:"CONTENT",get:function(){return"content"}},{key:"SESSION_QUESTION",get:function(){return"session_question"}}]);return e}();t.StickerSources=v;var _=function(){function e(){r(this,e)}i(e,null,[{key:"ShowWork",get:function(){return"showWork"}},{key:"HideUnstartedThumbnails",get:function(){return"hideUnstartedThumbnails"}},{key:"HideOfflineStudents",get:function(){return"hideOfflineStudents"}},{key:"HideUnstartedAssignmentWorks",get:function(){return"hideUnstartedAssignmentWorks"}},{key:"HideStudentNames",get:function(){return"hideStudentNames"}},{key:"ShowStudentHelpers",get:function(){return"showStudentHelpers"}},{key:"ShowStudentScores",get:function(){return"showStudentScores"}},{key:"LockStudentWork",get:function(){return"lockStudentWork"}},{key:"HideStudentWork",get:function(){return"hideStudentWork"}}]);return e}();t.SessionSettingTypes=_;var y=function(){function e(){r(this,e)}i(e,null,[{key:"Main",get:function(){return"main"}},{key:"Category",get:function(){return"category"}},{key:"Section",get:function(){return"section"}},{key:"Article",get:function(){return"article"}},{key:"Coaches",get:function(){return"coaches"}}]);return e}();t.TeacherHelpCenterViews=y},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(293)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(211),c=o(a),l=n(185),u=n(296),d=n(301),h=o(d),f=n(147),g=o(f),p=n(355),m=o(p),v=function(){function e(t,n,i,o,a,c,l,u,d,h){r(this,e);this.id=t;this.name=n;this.email=i;this.username=o;this.authType=a;this.roles=c;this.plans=l||[];this.contracts=u||{};this.contractIds=s(this.contracts);this.firebaseToken=d;this.token=h}i(e,[{key:"hasRole",value:function(e){return this.roles.findIndex(function(t){return t.toLowerCase()===e.toLowerCase()})>=0}},{key:"isContractAdmin",value:function(e){return this.contracts[e]&&this.contracts[e].admin}},{key:"isAdmin",get:function(){return this.hasRole(l.UserRoles.ADMIN)}},{key:"isStudent",get:function(){return this.hasRole(l.UserRoles.STUDENT)}},{key:"isTeacher",get:function(){return this.hasRole(l.UserRoles.TEACHER)}},{key:"isFree",get:function(){return!this.isPro}},{key:"isPro",get:function(){return this.isProClassroom||this.isProSchool||this.isProDistrict}},{key:"isProClassroom",get:function(){return this.plans.includes(u.ContractPlans.PRO_CLASSROOM)}},{key:"isProSchool",get:function(){return this.plans.includes(u.ContractPlans.PRO_SCHOOL)}},{key:"isProDistrict",get:function(){return this.plans.includes(u.ContractPlans.PRO_DISTRICT)}},{key:"login",get:function(){return this.email||this.username}},{key:"isGoogleAuthed",get:function(){return this.authType===_.GOOGLE}},{key:"isAnon",get:function(){return this.authType===_.NONE}}]);return e}();t.UserTokenInfo=v;var _=function(){function e(){r(this,e)}i(e,null,[{key:"PASSWORD",get:function(){return"password"}},{key:"NONE",get:function(){return"none"}},{key:"GOOGLE",get:function(){return"google"}},{key:"CLEVER",get:function(){return"clever"}}]);return e}();t.AuthType=_;var y=function(){function e(t,n,i,s,o,a,l,u,d,h,f,p){"ngInject";r(this,e);this._environment=n;this._firebaseService=a;this._storageService=l;this._mixpanelService=u;this._googleClientService=d;this._logRocketService=h;this._cleverService=f;this._platformHeaderService=p;this.$http=t;this.$log=i;this.$q=s;this.$state=o;this._authData=new c["default"];this._adminAuthData=null;this._anonStudentAuth=new c["default"];this._userAuthenticated=new g["default"](this);this._dataCleared=new g["default"](this);this._classCodeCodec=new m["default"];this.init()}e.$inject=["$http","environment","$log","$q","$state","FirebaseService","StorageService","MixpanelService","GoogleClientService","LogRocketService","CleverService","PlatformHeaderService"];i(e,[{key:"init",value:function(){this._storageService.onRemoteLogOut.subscribe(this.signOut,this);this._userAuthenticated.subscribe(this._platformHeaderService.setUserInfo,this._platformHeaderService);this._dataCleared.subscribe(this._platformHeaderService.clearUserInfo,this._platformHeaderService)}},{key:"authAnonStudent",value:function(e,t){var n=this;(this._anonStudentAuth.classCode!==e||this._anonStudentAuth.studentName!==t)&&this._anonStudentAuth.clear();this._anonStudentAuth.classCode=e;this._anonStudentAuth.studentName=t;return this._anonStudentAuth.value(function(){return n._anonLogin(e,t).then(function(e){var t=e.token,i=e.classCode;return n.$q.all({authData:n.processTokenResult(t,!1),classCode:i})})["catch"](function(e){n._anonStudentAuth.clear();throw e})})}},{key:"_anonLogin",value:function(e,t){var n=this;return this._post(this._environment.serverUrlBase+"/v1/users/login/anonymous-student",{class_code:e,name:t}).then(function(e){var t=e.data;return{token:t.token,classCode:n._classCodeCodec.decode(t.class_code)}})}},{key:"resetPassword",value:function(e,t){var n=this;return this._post(this._environment.serverUrlBase+"/v1/users/password-reset",{password:t},{headers:{Authorization:"Bearer "+e}}).then(function(e){return n.processTokenResult(e.data.token,n.rememberMe)})}},{key:"requestPasswordReset",value:function(e){return this._post(this._environment.serverUrlBase+"/v1/users/password-reset-request",{email:e})}},{key:"authUserWithPassword",value:function(e,t,n){return this.authUser(e,{type:_.PASSWORD,password:t},n)}},{key:"authUser",value:function(e,t,n){var i=this;return this._post(this._environment.serverUrlBase+"/v1/users/login",{id:e,auth:t}).then(function(e){return i.processTokenResult(e.data.token,n)}).then(function(e){return e})}},{key:"authAsOther",value:function(e){var t=this;return this._post(this._environment.serverUrlBase+"/v1/users/login-as-user",{id:e},{headers:{Authorization:this.adminAuthData?"Bearer "+this.adminAuthData.token:this.authHeader}}).then(function(e){var n=t.adminAuthData||t.authData;t.clearData();t._adminAuthData=n;return e}).then(function(e){return t.processTokenResult(e.data.token)})}},{key:"unauthAsOther",value:function(){if(this._adminAuthData){var e=this._adminAuthData.token;this.clearData();return this.processTokenResult(e)}return this.$q.resolve(this.authData)}},{key:"signUpTeacherWithEmail",value:function(e,t,n){var i={email:e,auth:{type:_.PASSWORD,password:t},roles:[l.UserRoles.TEACHER]};return this.signUpUser(i,n)}},{key:"signupStudentWithEmail",value:function(e,t,n,i){var r={class_code:e,email:t,auth:{type:_.PASSWORD,password:n},roles:[l.UserRoles.STUDENT]};return this.signUpUser(r,i)}},{key:"signupStudentWithUsername",value:function(e,t,n,i){
var r={class_code:e,username:t,auth:{type:_.PASSWORD,password:n},roles:[l.UserRoles.STUDENT]};return this.signUpUser(r,i)}},{key:"signUpUser",value:function(e,t){var n=this;try{var i=this._mixpanelService._enabled?this._mixpanelService.getDistinctId():null;e.properties={mixpanel_id:i}}catch(r){this.$log.error(r)}return this._post(this._environment.serverUrlBase+"/v1/users",e).then(function(e){return n.processTokenResult(e.data.token,t)}).then(function(t){n._mixpanelService.accountCreated(e.auth.type);return t})}},{key:"updatePassword",value:function(e,t){var n=this;return this._post(this._environment.serverUrlBase+"/v1/users/"+this.authData.id+"/update-password",{old_password:e,password:t},{headers:{Authorization:this.authHeader}}).then(function(e){n.processTokenResult(e.data.token,n._storageService.rememberMe);return!0})["catch"](function(){return!1})}},{key:"processTokenResult",value:function(e,t){var n=this,i=null;try{i=this._extractToken(e)}catch(r){return this.$q.reject(r)}var s=new v(i.sub,i.name,i.email,i.username,i.authType,i.roles,i.plans,i.contracts,i.firebase,e);return this._firebaseService.auth(s).then(function(){angular.isDefined(t)&&n._storageService.setUserInfo(s,t);n._authData.set(s);n._mixpanelService.lockUntilIdentify();n.userAuthenticated.raise(s);return s})}},{key:"_extractToken",value:function(e){var t=e.split(".");if(3!==t.length)throw new Error("Invalid format");try{return angular.fromJson(Base64.decode(t[1]))}catch(n){throw new Error("Could not extract token")}}},{key:"clearData",value:function(){this._mixpanelService.identify();this._authData.clear();this._anonStudentAuth.clear();this._adminAuthData=null;this.dataCleared.raise({})}},{key:"signOut",value:function(){var e=this.authData&&this.authData.isStudent&&this.authData.isAnon;this.clearData();this._storageService.setUserInfo(null,!1);if(e){this.$log.debug("Signing out anon student");this.$state.go("root.login",{})}else{this._storageService.hideOfflineStudents=!1;this._storageService.hideUnstartedAssignmentWorks=!1;this._storageService.assignmentsListAsc=void 0;this._storageService.assignmentsListColumn=void 0;this.$state.go("root.account-login");this._googleClientService.signOut()}}},{key:"googleSignIn",value:function(){return this._googleClientService.signIn()}},{key:"authUserWithGoogle",value:function(e){var t=this,n=this.$q.resolve(e);e||(n=this.googleSignIn());return n.then(function(e){return t.authUser(e.email,{type:_.GOOGLE,token:e.idToken},!0)})}},{key:"signUpWithGoogle",value:function(e,t,n){var i={email:e.email,first_name:e.firstName,last_name:e.lastName,auth:{type:_.GOOGLE,token:e.idToken},roles:[t],class_code:n};return this.signUpUser(i,!0)}},{key:"linkToCleverAuth",value:function(e){this._cleverService.linkToCleverAuth(e)}},{key:"signUpWithClever",value:function(e,t){var n={first_name:e.firstName,last_name:e.lastName,username:e.cleverUsername,auth:{type:_.CLEVER,token:e.accessToken},roles:[e.userType]};e.email&&(n.email=e.email);t&&(n.class_code=t);return this.signUpUser(n,!0)}},{key:"authUserWithClever",value:function(e){var t=e.email?e.email:e.cleverUsername;return this.authUser(t,{type:_.CLEVER,token:e.accessToken},!0)}},{key:"_post",value:function(e,t,n){var i=this;n=this._platformHeaderService.addHeaders(e,n);return this.$http.post(e,t,n)["catch"](function(e){return h["default"].handleErrorResponse(e,i.$q,i.$log,i)})}},{key:"userAuthenticated",get:function(){return this._userAuthenticated}},{key:"dataCleared",get:function(){return this._dataCleared}},{key:"currentToken",get:function(){return this.authData&&this.authData.token}},{key:"authData",get:function(){var e=this;return this._authData.value(function(){var t=e._storageService.userInfo;if(t){e._mixpanelService.lockUntilIdentify();e.userAuthenticated.raise(t)}return t})}},{key:"anonStudentAuth",get:function(){return this._anonStudentAuth}},{key:"adminAuthData",get:function(){return this._adminAuthData}},{key:"currentUserId",get:function(){return this.isLoggedIn?this.authData.id:void 0}},{key:"authHeader",get:function(){return this.isLoggedIn?"Bearer "+this.currentToken:""}},{key:"rememberMe",get:function(){return this._storageService.rememberMe}},{key:"isLoggedIn",get:function(){return!!this.authData}}]);return e}();t["default"]=y},function(e,t,n){e.exports={"default":n(294),__esModule:!0}},function(e,t,n){n(295);e.exports=n(26).Object.keys},function(e,t,n){var i=n(52),r=n(78);n(59)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(297)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a,c=n(299),l=o(c),u=n(186),d=o(u),h=n(300),f=function(){function e(){r(this,e)}i(e,null,[{key:"PRO_CLASSROOM",get:function(){return"niagara"}},{key:"PRO_SCHOOL",get:function(){return"prometheus"}},{key:"PRO_DISTRICT",get:function(){return"invincible"}},{key:"All",get:function(){return[e.PRO_CLASSROOM,e.PRO_SCHOOL,e.PRO_DISTRICT]}}]);return e}();t.ContractPlans=f;var g=(a={},s(a,f.PRO_CLASSROOM,1),s(a,f.PRO_SCHOOL,2),s(a,f.PRO_DISTRICT,3),a),p=function(){function e(t,n,i,s,o,a){r(this,e);this._id=t;this._name=n;this._plan=i;this._created=s?moment(s):void 0;this._expires=o?moment(o):void 0;this._isTrial=a}i(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"plan",get:function(){return this._plan}},{key:"created",get:function(){return this._created}},{key:"createdDisplay",get:function(){return this.created&&this.created.format("MMMM Do YYYY")}},{key:"expires",get:function(){return this._expires}},{key:"isTrial",get:function(){return this._isTrial}},{key:"expiresDisplay",get:function(){return this.expires&&this.expires.format("MMMM Do YYYY")}},{key:"subscriptionRenewsDisplay",get:function(){return this.expires&&moment(this.expires).subtract(l["default"].GracePeriod,l["default"].GracePeriodUnit).format("MMMM Do YYYY")}},{key:"isProClassroom",get:function(){return this._plan===f.PRO_CLASSROOM}},{key:"isProSchool",get:function(){return this._plan===f.PRO_SCHOOL}},{key:"isProDistrict",get:function(){return this._plan===f.PRO_DISTRICT}},{key:"isPro",get:function(){return this.isProClassroom||this.isProSchool||this.isProDistrict}},{key:"planType",get:function(){return this.isProClassroom?"Pro Classroom":this.isProSchool?"Pro School":this.isProDistrict?"Pro District":void 0}},{key:"isExpired",get:function(){this._now||(this._now=moment());return this._now.isAfter(this._expires)}},{key:"expiresThisSchoolYear",get:function(){return h.OrderPurchasePeriod.ThisYearEnd.year()===this.expires.year()}},{key:"activeDisplay",get:function(){return this.isExpired?"Inactive":"Active"}}],[{key:"ActiveContract",value:function(e){return e.filter(function(e){return!e.isTrial&&!e.isExpired}).sort(function(e,t){return d["default"].NUMERIC_UNDEFINED_DESC(g[e.plan],g[t.plan])})[0]}}]);return e}();t["default"]=p},function(e,t,n){e.exports=n(298)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(21),s=i(r);t["default"]=function(e,t,n){t in e?(0,s["default"])(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(297)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(){function e(){r(this,e)}i(e,null,[{key:"AntaresAnnualV1",get:function(){return"antares-annual-v1"}},{key:"AntaresAnnualV2",get:function(){return"antares-annual-v2"}},{key:"NiagaraAnnualV1",get:function(){return"niagara-annual-v1"}},{key:"NiagaraMonthlyV1",get:function(){return"niagara-monthly-v1"}},{key:"NiagaraAnnualV2",get:function(){return"niagara-annual-v2"}},{key:"NiagaraMonthlyV2",get:function(){return"niagara-monthly-v2"}},{key:"NiagaraAnnualV3",get:function(){return"niagara-annual-v3"}},{key:"NiagaraMonthlyV3",get:function(){return"niagara-monthly-v3"}},{key:"NiagaraAnnualV4",get:function(){return"niagara-annual-v4"}},{key:"NiagaraMonthlyV4",get:function(){return"niagara-monthly-v4"}}]);return e}();t.SubscriptionPlans=a;var c=function(){function e(){r(this,e)}i(e,null,[{key:"isMonthly",value:function(t){return l[t]===e.Monthly}},{key:"Annual",get:function(){return"annual"}},{key:"Monthly",get:function(){return"monthly"}}]);return e}();t.SubscriptionIntervals=c;var l=(o={},s(o,a.AntaresAnnualV1,c.Annual),s(o,a.AntaresAnnualV2,c.Annual),s(o,a.NiagaraAnnualV1,c.Annual),s(o,a.NiagaraMonthlyV1,c.Monthly),s(o,a.NiagaraAnnualV2,c.Annual),s(o,a.NiagaraMonthlyV2,c.Monthly),s(o,a.NiagaraAnnualV3,c.Annual),s(o,a.NiagaraMonthlyV3,c.Monthly),s(o,a.NiagaraAnnualV4,c.Annual),s(o,a.NiagaraMonthlyV4,c.Monthly),o);t.SubscriptionIntervalsMap=l;var u=function(){function e(){r(this,e)}i(e,null,[{key:"NiagaraAnnualLegacyV1",get:function(){return"niagara-annual-legacy-v1"}},{key:"NiagaraMonthlyLegacyV1",get:function(){return"niagara-monthly-legacy-v1"}}]);return e}();t.SubscriptionCoupons=u;var d=function(){function e(){r(this,e)}i(e,null,[{key:"Created",get:function(){return"created"}},{key:"Trialing",get:function(){return"trialing"}},{key:"Active",get:function(){return"active"}},{key:"PastDue",get:function(){return"past_due"}},{key:"Cancelled",get:function(){return"cancelled"}},{key:"All",get:function(){return[e.Created,e.Trialing,e.Active,e.PastDue,e.Cancelled]}}]);return e}();t.SubscriptionStatus=d;var h=function(){function e(t,n,i,s,o,a,c,l,u,d){r(this,e);this._id=t;this._ownerId=n;this._contractId=i;this._status=s;this._provider=o;this._active=a;this._created=c?moment(c):void 0;this._updated=l?moment(l):void 0;this._subscriptionPlan=u;this._coupon=d}i(e,[{key:"id",get:function(){return this._id}},{key:"ownerId",get:function(){return this._ownerId}},{key:"contractId",get:function(){return this._contractId}},{key:"status",get:function(){return this._status}},{key:"provider",get:function(){return this._provider}},{key:"active",get:function(){return this._active}},{key:"created",get:function(){return this._created}},{key:"updated",get:function(){return this._updated}},{key:"subscriptionPlan",get:function(){return this._subscriptionPlan},set:function(e){this._subscriptionPlan=e}},{key:"coupon",get:function(){return this._coupon}},{key:"nextCharge",get:function(){var e=this._created.clone(),t=this.subscriptionPlan===a.NiagaraAnnualV4?"years":"month";return e.add(1,t).format("MMMM Do YYYY")}}],[{key:"GracePeriod",get:function(){return 7}},{key:"GracePeriodUnit",get:function(){return"days"}}]);return e}();t["default"]=h},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"getThisYearStart",value:function(t){var n=t.year(),i=t.month();i>=0&&5>=i&&(n-=1);return e.createStandardDate(n)}},{key:"getThisYearEnd",value:function(t){return e.getThisYearStart(t).add(1,"years")}},{key:"getNextYearStart",value:function(t){return e.getThisYearEnd(t)}},{key:"getNextYearEnd",value:function(t){return e.getNextYearStart(t).add(1,"years")}},{key:"getInTwoYearsStart",value:function(t){return e.getNextYearEnd(t)}},{key:"getInTwoYearsEnd",value:function(t){return e.getInTwoYearsStart(t).add(1,"years")}},{key:"createStandardDate",value:function(e){return moment(e+"-07-01")}},{key:"forStage",value:function(e,t,n,i){i=i||moment();var r=i.month();return r>=6&&11>=r||0===r?e:r>=1&&3>=r?t:r>=4&&5>=r?n:void 0}},{key:"ThisYearStart",get:function(){var t=moment();return e.getThisYearStart(t)}},{key:"ThisYearEnd",get:function(){var t=moment();return e.getThisYearEnd(t)}},{key:"NextYearStart",get:function(){var t=moment();return e.getNextYearStart(t)}},{key:"NextYearEnd",get:function(){var t=moment();return e.getNextYearEnd(t)}},{key:"InTwoYearsStart",get:function(){var t=moment();return e.getInTwoYearsStart(t)}},{key:"InTwoYearsEnd",get:function(){var t=moment();return e.getInTwoYearsEnd(t)}}]);return e}();t.OrderPurchasePeriod=s},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(302),a=s(o),c=n(303),l=s(c),u=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?1e3:arguments[0],n=arguments.length<=1||void 0===arguments[1]?4:arguments[1],i=arguments.length<=2||void 0===arguments[2]?2:arguments[2],s=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3];r(this,e);this._delay=t;this._max=n;this._factor=i;this._shouldRetry=s}i(e,[{key:"run",value:function(e){return this.backoff.run(function(){return e()},this._shouldRetry)}},{key:"backoff",get:function(){this._backoff||(this._backoff=new l["default"](this._delay,1e4,this._factor,this._max));return this._backoff}}]);return e}();t.HttpRetry=u;var d=function(){function e(t,n,i,s,o,a,c,l,u){"ngInject";r(this,e);this.$http=t;this.$q=n;this.$state=i;this.$stateParams=s;this.$log=o;this._authService=a;this._bootstrapService=c;this._storageService=l;this._platformHeaderService=u}e.$inject=["$http","$q","$state","$stateParams","$log","AuthService","BootstrapService","StorageService","PlatformHeaderService"];i(e,[{key:"_assertReady",value:function(e){return this._ready?e():this.$q.reject(new Error("Waiting for bootstrap to complete"))}},{key:"authGet",value:function(e,t,n){return this.get(e,this._addAuthHeader(t),n)}},{key:"authPost",value:function(e,t,n,i){return this.post(e,t,this._addAuthHeader(n),i)}},{key:"authPut",value:function(e,t,n,i){return this.put(e,t,this._addAuthHeader(n),i)}},{key:"authDelete",value:function(e,t,n){return this["delete"](e,this._addAuthHeader(t),n)}},{key:"get",value:function(e,t,n){var i=this;return this._assertReady(function(){t=i._platformHeaderService.addHeaders(e,t);return i._retryIfNeeded(i.$http.get.bind(i,e,t),n).then(function(e){return e.data})["catch"](function(e){return i._handleErrorResponse(e)})})}},{key:"post",value:function(e,t,n,i){var r=this;return this._assertReady(function(){n=r._platformHeaderService.addHeaders(e,n);return r._retryIfNeeded(r.$http.post.bind(r,e,t,n),i).then(function(e){return e.data})["catch"](function(e){return r._handleErrorResponse(e)})})}},{key:"put",value:function(e,t,n,i){var r=this;return this._assertReady(function(){n=r._platformHeaderService.addHeaders(e,n);return r._retryIfNeeded(r.$http.put.bind(r,e,t,n),i).then(function(e){return e.data})["catch"](function(e){return r._handleErrorResponse(e)})})}},{key:"delete",value:function(e,t,n){var i=this;return this._assertReady(function(){t=i._platformHeaderService.addHeaders(e,t);return i._retryIfNeeded(i.$http["delete"].bind(i,e,t),n).then(function(e){return e.data})["catch"](function(e){return i._handle404OrErrorResponse(e)})})}},{key:"_retryIfNeeded",value:function(e,t){return t?t.run(e):e()}},{key:"_addAuthHeader",value:function(e){e||(e={});e.headers||(e.headers={});e.headers.Authorization=this._authService.authHeader;return e}},{key:"_handle404OrErrorResponse",value:function(e){return 404===e.status?null:this._handleErrorResponse(e)}},{key:"_handleErrorResponse",value:function(t){return e.handleErrorResponse(t,this.$q,this.$log,this.$state,this.$stateParams,this._authService,this._storageService)}},{key:"_ready",get:function(){return this._bootstrapService.ready}}],[{key:"handleErrorResponse",value:function(e,t,n,i,r,s,o){e.data||(e.data={});var c=new Error(e.data.message||e.statusText);c.data=e.data;c.code=e.data.code;c.status=e.status;c.statusText=e.statusText;c.headers=function(t){return e.headers(t)};c.config=e.config;if(401===e.status){n.error("Unauthorized token detected, redirecting to login");o.ckRedirect=new a["default"](i.current.name,r);s.signOut()}return t.reject(c)}}]);return e}();t["default"]=d},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){r(this,e);this.to=t;this.params=n;this.url=i}i(e,[{key:"redirect",value:function(e){this.url?e.goUrl(this.url,!0):e.go(this.to,this.params,!0)}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";e.exports=n(304)},function(e,t,n){"use strict";var i=n(305),r=n(312),s=function(e,t,n,i){"undefined"!=typeof e&&(this.startingRetryAfterMSecs=e);"undefined"!=typeof t&&(this.maxRetryAfterMSecs=t);"undefined"!=typeof n&&(this.backoffFactor=n);"undefined"!=typeof i&&(this.maxRetries=i);this._init()};s.prototype.startingRetryAfterMSecs=1e3;s.prototype.maxRetryAfterMSecs=3e5;s.prototype.backoffFactor=1.1;s.prototype.maxRetries=50;s.prototype._init=function(){this._retryAfterMSecs=0;this.retries=0};s.prototype._nextRetryAfterMSecs=function(){return 0===this._retryAfterMSecs?this.startingRetryAfterMSecs:Math.min(this.maxRetryAfterMSecs,Math.floor(this._retryAfterMSecs*this.backoffFactor))};s.prototype.failure=function(){this._retryAfterMSecs=this._nextRetryAfterMSecs();this.retries++};s.prototype.attempt=function(e){var t=this;return i.timeout(t._retryAfterMSecs).then(function(){return e()}).then(function(e){t._init();return e})["catch"](function(e){t.failure();throw e})};s.prototype.reachedMaxRetries=function(){return this.maxRetries&&this.retries>=this.maxRetries};s.prototype.run=function(e,t){var n=this;return n.attempt(e)["catch"](function(i){return r.resolve().then(function(){return t?t(i):void 0}).then(function(){if(n.reachedMaxRetries())throw i;return n.run(e,t)})})};e.exports=s},function(e,t,n){"use strict";e.exports=n(306)},function(e,t,n){"use strict";e.exports=n(307)},function(e,t,n){"use strict";var i=n(308),r=n(309),s={arraySporks:n(310),collectionSporks:i,errorSporks:n(311),functionSporks:r,objectSporks:n(351),promiseSporks:n(352),testSporks:n(353)},o={};i.each(s,function(e){r.mix(e,o)});e.exports=o},function(e,t){"use strict";var n=function(){};n.prototype.each=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n,e)===!1)break};n.prototype.clone=function(e){return JSON.parse(JSON.stringify(e))};n.prototype.empty=function(e){var t=!0;this.each(e,function(){t=!1;return!1});return t};n.prototype.merge=function(e,t){var n,i={};if(e)for(n in e)i[n]=e[n];if(t)for(n in t)i[n]=t[n];return i};n.prototype.length=function(e){var t=0;this.each(e,function(){t++});return t};n.prototype.keys=function(e){var t=[];this.each(e,function(e,n){t.push(n)});return t};n.prototype.flip=function(e){var t={};this.each(e,function(e,n){t[e]=n});return t};n.prototype.isEqual=function(e,t){var n=this;if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null===e||void 0===e||"number"==typeof t||"boolean"==typeof t||"string"==typeof t||null===t||void 0===t)return e===t;if(n.length(e)!==n.length(t))return!1;var i=!0;n.each(e,function(e,r){if(void 0===t[r]||!n.isEqual(e,t[r])){i=!1;return!1}});return i};e.exports=new n},function(e,t){"use strict";var n=function(){};n.prototype.toArgsArray=function(e){return Array.prototype.slice.call(e)};n.prototype.mix=function(e,t,n){var i=function(n){t[n]=e[n]};if(n)n.forEach(i);else for(var r in e)i(r)};e.exports=new n},function(e,t){"use strict";var n=function(){};n.prototype.sort=function(e,t){e.sort(function(e,n){var i=0;t.forEach(function(t){0===i&&(e[t]||n[t]?!e[t]&&n[t]?i=1:e[t]&&!n[t]?i=-1:e[t]<n[t]?i=-1:e[t]>n[t]&&(i=1):i=0)});return i});return e};n.prototype.intersection=function(e,t){var n=[];e.forEach(function(e){-1!==t.indexOf(e)&&n.push(e)});return n};e.exports=new n},function(e,t,n){"use strict";var i=n(312),r=function(){};r.prototype.errorInstanceOf=function(e,t){return e.name===t};r.prototype.throwIfErrorNot=function(e,t){return new i(function(n,i){e.name===t?n():i(e)})};r.prototype.ignoreError=function(e){return e()["catch"](function(){})};e.exports=new r},function(e,t,n){"use strict";var i=n(313);i.config({warnings:!1});e.exports=i},function(e,t,n){"use strict";function i(){try{Promise===s&&(Promise=r)}catch(e){}return s}var r;"undefined"!=typeof Promise&&(r=Promise);var s=n(314)();s.noConflict=i;e.exports=s},function(e,t,n){(function(t){"use strict";e.exports=function(){function i(){}function r(e,t){if(null==e||e.constructor!==s)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new y("expecting a function but got "+g.classString(t))}function s(e){e!==b&&r(this,e);this._bitField=0;this._fulfillmentHandler0=void 0;this._rejectionHandler0=void 0;this._promise0=void 0;this._receiver0=void 0;this._resolveFromExecutor(e);this._promiseCreated();this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function c(e){var t=new s(b);t._fulfillmentHandler0=e;t._rejectionHandler0=e;t._promise0=e;t._receiver0=e}var l,u=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},d=function(){return new s.PromiseInspection(this._target())},h=function(e){return s.reject(new y(e))},f={},g=n(315);l=g.isNode?function(){var e=t.domain;void 0===e&&(e=null);return e}:function(){return null};g.notEnumerableProp(s,"_getDomain",l);var p=n(316),m=n(317),v=new m;p.defineProperty(s,"_async",{value:v});var _=n(322),y=s.TypeError=_.TypeError;s.RangeError=_.RangeError;var k=s.CancellationError=_.CancellationError;s.TimeoutError=_.TimeoutError;s.OperationalError=_.OperationalError;s.RejectionError=_.OperationalError;s.AggregateError=_.AggregateError;var b=function(){},S={},w={},C=n(323)(s,b),E=n(324)(s,b,C,h,i),T=n(325)(s),I=T.create,A=n(326)(s,T),x=(A.CapturedTrace,n(327)(s,C,w)),O=n(328)(w),P=n(329),R=g.errorObj,D=g.tryCatch;s.prototype.toString=function(){return"[object Promise]"};s.prototype.caught=s.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,i=new Array(t-1),r=0;for(n=0;t-1>n;++n){var s=arguments[n];if(!g.isObject(s))return h("Catch statement predicate: expecting an object but got "+g.classString(s));i[r++]=s}i.length=r;e=arguments[n];return this.then(void 0,O(i,e,this))}return this.then(void 0,e)};s.prototype.reflect=function(){return this._then(d,d,void 0,this,void 0)};s.prototype.then=function(e,t){if(A.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+g.classString(e);arguments.length>1&&(n+=", "+g.classString(t));this._warn(n)}return this._then(e,t,void 0,void 0,void 0)};s.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()};s.prototype.spread=function(e){return"function"!=typeof e?h("expecting a function but got "+g.classString(e)):this.all()._then(e,void 0,void 0,S,void 0)};s.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};if(this.isFulfilled()){e.fulfillmentValue=this.value();e.isFulfilled=!0}else if(this.isRejected()){e.rejectionReason=this.reason();e.isRejected=!0}return e};s.prototype.all=function(){arguments.length>0&&this._warn(".all() was passed arguments but it does not take any");return new E(this).promise()};s.prototype.error=function(e){return this.caught(g.originatesFromRejection,e)};s.getNewLibraryCopy=e.exports;s.is=function(e){return e instanceof s};s.fromNode=s.fromCallback=function(e){var t=new s(b);t._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,i=D(e)(P(t,n));i===R&&t._rejectCallback(i.e,!0);t._isFateSealed()||t._setAsyncGuaranteed();return t};s.all=function(e){return new E(e).promise()};s.cast=function(e){var t=C(e);if(!(t instanceof s)){t=new s(b);t._captureStackTrace();t._setFulfilled();t._rejectionHandler0=e}return t};s.resolve=s.fulfilled=s.cast;s.reject=s.rejected=function(e){var t=new s(b);t._captureStackTrace();t._rejectCallback(e,!0);return t};s.setScheduler=function(e){if("function"!=typeof e)throw new y("expecting a function but got "+g.classString(e));return v.setScheduler(e)};s.prototype._then=function(e,t,n,i,r){var o=void 0!==r,a=o?r:new s(b),c=this._target(),u=c._bitField;if(!o){a._propagateFrom(this,3);a._captureStackTrace();void 0===i&&0!==(2097152&this._bitField)&&(i=0!==(50397184&u)?this._boundValue():c===this?void 0:this._boundTo);this._fireEvent("promiseChained",this,a)}var d=l();if(0!==(50397184&u)){var h,f,p=c._settlePromiseCtx;if(0!==(33554432&u)){f=c._rejectionHandler0;h=e}else if(0!==(16777216&u)){f=c._fulfillmentHandler0;h=t;c._unsetRejectionIsUnhandled()}else{p=c._settlePromiseLateCancellationObserver;f=new k("late cancellation observer");c._attachExtraTrace(f);h=t}v.invoke(p,c,{handler:null===d?h:"function"==typeof h&&g.domainBind(d,h),promise:a,receiver:i,value:f})}else c._addCallbacks(e,t,a,i,d);return a};s.prototype._length=function(){return 65535&this._bitField};s.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)};s.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)};s.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e};s.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField;this._fireEvent("promiseFulfilled",this)};s.prototype._setRejected=function(){this._bitField=16777216|this._bitField;this._fireEvent("promiseRejected",this)};s.prototype._setFollowing=function(){this._bitField=67108864|this._bitField;this._fireEvent("promiseResolved",this)};s.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField};s.prototype._isFinal=function(){return(4194304&this._bitField)>0};s.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField};s.prototype._setCancelled=function(){this._bitField=65536|this._bitField;this._fireEvent("promiseCancelled",this)};s.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField};s.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)};s.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===f?void 0:void 0===t&&this._isBound()?this._boundValue():t};s.prototype._promiseAt=function(e){return this[4*e-4+2]};s.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]};s.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]};s.prototype._boundValue=function(){};s.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,i=e._promise0,r=e._receiverAt(0);void 0===r&&(r=f);this._addCallbacks(t,n,i,r,null)};s.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),i=e._rejectionHandlerAt(t),r=e._promiseAt(t),s=e._receiverAt(t);void 0===s&&(s=f);this._addCallbacks(n,i,r,s,null)};s.prototype._addCallbacks=function(e,t,n,i,r){var s=this._length();if(s>=65531){s=0;this._setLength(0)}if(0===s){this._promise0=n;this._receiver0=i;"function"==typeof e&&(this._fulfillmentHandler0=null===r?e:g.domainBind(r,e));"function"==typeof t&&(this._rejectionHandler0=null===r?t:g.domainBind(r,t))}else{var o=4*s-4;this[o+2]=n;this[o+3]=i;"function"==typeof e&&(this[o+0]=null===r?e:g.domainBind(r,e));"function"==typeof t&&(this[o+1]=null===r?t:g.domainBind(r,t))}this._setLength(s+1);return s};s.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)};s.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(u(),!1);var n=C(e,this);if(!(n instanceof s))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var r=i._bitField;if(0===(50397184&r)){var o=this._length();o>0&&i._migrateCallback0(this);for(var a=1;o>a;++a)i._migrateCallbackAt(this,a);this._setFollowing();this._setLength(0);this._setFollowee(i)}else if(0!==(33554432&r))this._fulfill(i._value());else if(0!==(16777216&r))this._reject(i._reason());else{var c=new k("late cancellation observer");i._attachExtraTrace(c);this._reject(c)}}else this._reject(u())}};s.prototype._rejectCallback=function(e,t,n){var i=g.ensureErrorObject(e),r=i===e;if(!r&&!n&&A.warnings()){var s="a promise was rejected with a non-error: "+g.classString(e);this._warn(s,!0)}this._attachExtraTrace(i,t?r:!1);this._reject(e)};s.prototype._resolveFromExecutor=function(e){if(e!==b){var t=this;this._captureStackTrace();this._pushContext();var n=!0,i=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1;this._popContext();void 0!==i&&t._rejectCallback(i,!0)}};s.prototype._settlePromiseFromHandler=function(e,t,n,i){var r=i._bitField;if(0===(65536&r)){i._pushContext();var s;if(t===S)if(n&&"number"==typeof n.length)s=D(e).apply(this._boundValue(),n);else{s=R;s.e=new y("cannot .spread() a non-array: "+g.classString(n))}else s=D(e).call(t,n);var o=i._popContext();r=i._bitField;if(0===(65536&r))if(s===w)i._reject(n);else if(s===R)i._rejectCallback(s.e,!1);else{A.checkForgottenReturns(s,o,"",i,this);i._resolveCallback(s)}}};s.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e};s.prototype._followee=function(){return this._rejectionHandler0};s.prototype._setFollowee=function(e){this._rejectionHandler0=e};s.prototype._settlePromise=function(e,t,n,r){var o=e instanceof s,a=this._bitField,c=0!==(134217728&a);if(0!==(65536&a)){o&&e._invokeInternalOnCancel();if(n instanceof x&&n.isFinallyHandler()){n.cancelPromise=e;D(t).call(n,r)===R&&e._reject(R.e)}else t===d?e._fulfill(d.call(n)):n instanceof i?n._promiseCancelled(e):o||e instanceof E?e._cancel():n.cancel()}else if("function"==typeof t)if(o){c&&e._setAsyncGuaranteed();this._settlePromiseFromHandler(t,n,r,e)}else t.call(n,r,e);else if(n instanceof i)n._isResolved()||(0!==(33554432&a)?n._promiseFulfilled(r,e):n._promiseRejected(r,e));else if(o){c&&e._setAsyncGuaranteed();0!==(33554432&a)?e._fulfill(r):e._reject(r)}};s.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,i=e.receiver,r=e.value;"function"==typeof t?n instanceof s?this._settlePromiseFromHandler(t,i,r,n):t.call(i,r,n):n instanceof s&&n._reject(r)};s.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)};s.prototype._settlePromise0=function(e,t,n){var i=this._promise0,r=this._receiverAt(0);this._promise0=void 0;this._receiver0=void 0;this._settlePromise(i,e,r,t)};s.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0};s.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=u();this._attachExtraTrace(n);return this._reject(n)}this._setFulfilled();this._rejectionHandler0=e;(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():v.settlePromises(this))}};s.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){this._setRejected();this._fulfillmentHandler0=e;if(this._isFinal())return v.fatalError(e,g.isNode);(65535&t)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled();return void 0}};s.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),s=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(r,i,s,t)}};s.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),s=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(r,i,s,t)}};s.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e);this._rejectPromises(t,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,e);this._fulfillPromises(t,i)}this._setLength(0)}this._clearCancellationData()};s.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0};s.defer=s.pending=function(){A.deprecated("Promise.defer","new Promise");var e=new s(b);return{promise:e,resolve:o,reject:a}};g.notEnumerableProp(s,"_makeSelfResolutionError",u);n(330)(s,b,C,h,A);n(331)(s,b,C,A);n(332)(s,E,h,A);n(333)(s);n(334)(s);n(335)(s,E,C,b,v,l);s.Promise=s;s.version="3.5.1";n(336)(s,E,h,C,b,A);n(337)(s);n(338)(s,h,C,I,b,A);
n(339)(s,b,A);n(340)(s,h,b,C,i,A);n(341)(s);n(342)(s,b);n(343)(s,E,C,h);n(344)(s,b,C,h);n(345)(s,E,h,C,b,A);n(346)(s,E,A);n(347)(s,E,h);n(348)(s,b);n(349)(s,b);n(350)(s);g.toFastProperties(s);g.toFastProperties(s.prototype);c({a:1});c({b:2});c({c:3});c(1);c(function(){});c(void 0);c(!1);c(new s(b));A.setBounds(m.firstLineError,g.lastLineError);return s}}).call(t,n(15))},function(e,t,n){(function(t,i){"use strict";function r(){try{var e=O;O=null;return e.apply(this,arguments)}catch(t){x.e=t;return x}}function s(e){O=e;return r}function o(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function c(e){return o(e)?new Error(v(e)):e}function l(e,t){var n,i=e.length,r=new Array(i+1);for(n=0;i>n;++n)r[n]=e[n];r[n]=t;return r}function u(e,t,n){if(!I.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var i=Object.getOwnPropertyDescriptor(e,t);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function d(e,t,n){if(o(e))return e;var i={value:n,configurable:!0,enumerable:!1,writable:!0};I.defineProperty(e,t,i);return e}function h(e){throw e}function f(e){try{if("function"==typeof e){var t=I.names(e.prototype),n=I.isES5&&t.length>1,i=t.length>0&&!(1===t.length&&"constructor"===t[0]),r=M.test(e+"")&&I.names(e).length>0;if(n||i||r)return!0}return!1}catch(s){return!1}}function g(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function p(e){return N.test(e)}function m(e,t,n){for(var i=new Array(e),r=0;e>r;++r)i[r]=t+r+n;return i}function v(e){try{return e+""}catch(t){return"[no string representation]"}}function _(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function y(e){try{d(e,"isOperational",!0)}catch(t){}}function k(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function b(e){return _(e)&&I.propertyIsWritable(e,"stack")}function S(e){return{}.toString.call(e)}function w(e,t,n){for(var i=I.names(e),r=0;r<i.length;++r){var s=i[r];if(n(s))try{I.defineProperty(t,s,I.getDescriptor(e,s))}catch(o){}}}function C(e){return q?i.env[e]:void 0}function E(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}}function T(e,t){return e.bind(t)}var I=n(316),A="undefined"==typeof navigator,x={e:{}},O,P="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:void 0!==this?this:null,R=function(e,t){function n(){this.constructor=e;this.constructor$=t;for(var n in t.prototype)i.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var i={}.hasOwnProperty;n.prototype=t.prototype;e.prototype=new n;return e.prototype},D=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(I.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var i=[],r=Object.create(null);null!=e&&!t(e);){var s;try{s=n(e)}catch(o){return i}for(var a=0;a<s.length;++a){var c=s[a];if(!r[c]){r[c]=!0;var l=Object.getOwnPropertyDescriptor(e,c);null!=l&&null==l.get&&null==l.set&&i.push(c)}}e=I.getPrototypeOf(e)}return i}}var i={}.hasOwnProperty;return function(n){if(t(n))return[];var r=[];e:for(var s in n)if(i.call(n,s))r.push(s);else{for(var o=0;o<e.length;++o)if(i.call(e[o],s))continue e;r.push(s)}return r}}(),M=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(e){return b(e)?e:new Error(v(e))}:function(e){if(b(e))return e;try{throw new Error(v(e))}catch(t){return t}}}(),F=function(e){return I.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],i=e[Symbol.iterator]();!(t=i.next()).done;)n.push(t.value);return n};F=function(e){return I.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?U(e):null}}var $="undefined"!=typeof i&&"[object process]"===S(i).toLowerCase(),q="undefined"!=typeof i&&"undefined"!=typeof i.env,H={isClass:f,isIdentifier:p,inheritedDataKeys:D,getDataPropertyOrDefault:u,thrower:h,isArray:I.isArray,asArray:F,notEnumerableProp:d,isPrimitive:o,isObject:a,isError:_,canEvaluate:A,errorObj:x,tryCatch:s,inherits:R,withAppended:l,maybeWrapAsError:c,toFastProperties:g,filledRange:m,toString:v,canAttachTrace:b,ensureErrorObject:L,originatesFromRejection:k,markAsOriginatingFromRejection:y,classString:S,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:$,hasEnvVariables:q,env:C,global:P,getNativePromise:E,domainBind:T};H.isRecentNode=H.isNode&&function(){var e=i.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}();H.isNode&&H.toFastProperties(i);try{throw new Error}catch(j){H.lastLineError=j}e.exports=H}).call(t,function(){return this}(),n(15))},function(e,t){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,r={}.toString,s={}.constructor.prototype,o=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},a=function(e,t){return{value:e[t]}},c=function(e,t,n){e[t]=n.value;return e},l=function(e){return e},u=function(e){try{return Object(e).constructor.prototype}catch(t){return s}},d=function(e){try{return"[object Array]"===r.call(e)}catch(t){return!1}};e.exports={isArray:d,keys:o,names:o,defineProperty:c,getDescriptor:a,freeze:l,getPrototypeOf:u,isES5:n,propertyIsWritable:function(){return!0}}}},function(e,t,n){(function(t){"use strict";function i(){this._customScheduler=!1;this._isTickUsed=!1;this._lateQueue=new u(16);this._normalQueue=new u(16);this._haveDrainedQueues=!1;this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()};this._schedule=l}function r(e,t,n){this._lateQueue.push(e,t,n);this._queueTick()}function s(e,t,n){this._normalQueue.push(e,t,n);this._queueTick()}function o(e){this._normalQueue._pushOne(e);this._queueTick()}var a;try{throw new Error}catch(c){a=c}var l=n(318),u=n(321),d=n(315);i.prototype.setScheduler=function(e){var t=this._schedule;this._schedule=e;this._customScheduler=!0;return t};i.prototype.hasCustomScheduler=function(){return this._customScheduler};i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0};i.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)};i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};i.prototype.fatalError=function(e,n){if(n){t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n");t.exit(2)}else this.throwLater(e)};i.prototype.throwLater=function(e,t){if(1===arguments.length){t=e;e=function(){throw t}}if("undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};if(d.hasDevTools){i.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?r.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})};i.prototype.invoke=function(e,t,n){this._trampolineEnabled?s.call(this,e,t,n):this._schedule(function(){e.call(t,n)})};i.prototype.settlePromises=function(e){this._trampolineEnabled?o.call(this,e):this._schedule(function(){e._settlePromises()})}}else{i.prototype.invokeLater=r;i.prototype.invoke=s;i.prototype.settlePromises=o}i.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),i=e.shift();t.call(n,i)}else t._settlePromises()}};i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=!0;this._drainQueue(this._lateQueue)};i.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=!0;this._schedule(this.drainQueues)}};i.prototype._reset=function(){this._isTickUsed=!1};e.exports=i;e.exports.firstLineError=a}).call(t,n(15))},function(e,t,n){(function(t,i,r){"use strict";var s,o=n(315),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=o.getNativePromise();if(o.isNode&&"undefined"==typeof MutationObserver){var l=t.setImmediate,u=i.nextTick;s=o.isRecentNode?function(e){l.call(t,e)}:function(e){u.call(i,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var d=c.resolve();s=function(e){d.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof r?function(e){r(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:a:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,i=document.createElement("div"),r=new MutationObserver(function(){e.classList.toggle("foo");n=!1});r.observe(i,t);var s=function(){if(!n){n=!0;i.classList.toggle("foo")}};return function(n){var i=new MutationObserver(function(){i.disconnect();n()});i.observe(e,t);s()}}();e.exports=s}).call(t,function(){return this}(),n(15),n(319).setImmediate)},function(e,t,n){function i(e,t){this._id=e;this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)};t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(e){e&&e.close()};i.prototype.unref=i.prototype.ref=function(){};i.prototype.close=function(){this._clearFn.call(window,this._id)};t.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};t.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))};n(320);t.setImmediate=setImmediate;t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};p[g]=i;f(g);return g++}function r(e){delete p[e]}function s(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function o(e){if(m)setTimeout(o,0,e);else{var t=p[e];if(t){m=!0;try{s(t)}finally{r(e);m=!1}}}}function a(){f=function(e){t.nextTick(function(){o(e)})}}function c(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;e.onmessage=function(){t=!1};e.postMessage("","*");e.onmessage=n;return t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n);f=function(n){e.postMessage(t+n,"*")}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)};f=function(t){e.port2.postMessage(t)}}function d(){var e=v.documentElement;f=function(t){var n=v.createElement("script");n.onreadystatechange=function(){o(t);n.onreadystatechange=null;e.removeChild(n);n=null};e.appendChild(n)}}function h(){f=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var f,g=1,p={},m=!1,v=e.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(e);_=_&&_.setTimeout?_:e;"[object process]"==={}.toString.call(e.process)?a():c()?l():e.MessageChannel?u():v&&"onreadystatechange"in v.createElement("script")?d():h();_.setImmediate=i;_.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(15))},function(e,t){"use strict";function n(e,t,n,i,r){for(var s=0;r>s;++s){n[s+i]=e[s+t];e[s+t]=void 0}}function i(e){this._capacity=e;this._length=0;this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e};i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e;this._length=t+1};i.prototype.push=function(e,t,n){var i=this.length()+3;if(this._willBeOverCapacity(i)){this._pushOne(e);this._pushOne(t);this._pushOne(n)}else{var r=this._front+i-3;this._checkCapacity(i);var s=this._capacity-1;this[r+0&s]=e;this[r+1&s]=t;this[r+2&s]=n;this._length=i}};i.prototype.shift=function(){var e=this._front,t=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length--;return t};i.prototype.length=function(){return this._length};i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)};i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var i=this._front,r=this._length,s=i+r&t-1;n(this,0,this,t,s)};e.exports=i},function(e,t,n){"use strict";function i(e,t){function n(i){if(!(this instanceof n))return new n(i);d(this,"message","string"==typeof i?i:t);d(this,"name",e);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}u(n,Error);return n}function r(e){if(!(this instanceof r))return new r(e);d(this,"name","OperationalError");d(this,"message",e);this.cause=e;this.isOperational=!0;if(e instanceof Error){d(this,"message",e.message);d(this,"stack",e.stack)}else Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var s,o,a=n(316),c=a.freeze,l=n(315),u=l.inherits,d=l.notEnumerableProp,h=i("Warning","warning"),f=i("CancellationError","cancellation error"),g=i("TimeoutError","timeout error"),p=i("AggregateError","aggregate error");try{s=TypeError;o=RangeError}catch(m){s=i("TypeError","type error");o=i("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<v.length;++_)"function"==typeof Array.prototype[v[_]]&&(p.prototype[v[_]]=Array.prototype[v[_]]);a.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0});p.prototype.isOperational=!0;var y=0;p.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++;e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),s=0;s<r.length;++s)r[s]=e+r[s];i=r.join("\n");t+=i+"\n"}y--;return t};u(r,Error);var k=Error.__BluebirdErrorTypes__;if(!k){k=c({CancellationError:f,TimeoutError:g,OperationalError:r,RejectionError:r,AggregateError:p});a.defineProperty(Error,"__BluebirdErrorTypes__",{value:k,writable:!1,enumerable:!1,configurable:!1})}e.exports={Error:Error,TypeError:s,RangeError:o,CancellationError:k.CancellationError,OperationalError:k.OperationalError,TimeoutError:k.TimeoutError,AggregateError:k.AggregateError,Warning:h}},function(e,t,n){"use strict";e.exports=function(e,t){function i(n,i){if(u(n)){if(n instanceof e)return n;var r=s(n);if(r===l){i&&i._pushContext();var c=e.reject(r.e);i&&i._popContext();return c}if("function"==typeof r){if(o(n)){var c=new e(t);n._then(c._fulfill,c._reject,void 0,c,null);return c}return a(n,r,i)}}return n}function r(e){return e.then}function s(e){try{return r(e)}catch(t){l.e=t;return l}}function o(e){try{return d.call(e,"_promise0")}catch(t){return!1}}function a(n,i,r){function s(e){if(a){a._resolveCallback(e);a=null}}function o(e){if(a){a._rejectCallback(e,d,!0);a=null}}var a=new e(t),u=a;r&&r._pushContext();a._captureStackTrace();r&&r._popContext();var d=!0,h=c.tryCatch(i).call(n,s,o);d=!1;if(a&&h===l){a._rejectCallback(h.e,!0,!0);a=null}return u}var c=n(315),l=c.errorObj,u=c.isObject,d={}.hasOwnProperty;return i}},function(e,t,n){"use strict";e.exports=function(e,t,i,r,s){function o(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function a(n){var i=this._promise=new e(t);n instanceof e&&i._propagateFrom(n,3);i._setOnCancel(this);this._values=n;this._length=0;this._totalResolved=0;this._init(void 0,-2)}var c=n(315);c.isArray;c.inherits(a,s);a.prototype.length=function(){return this._length};a.prototype.promise=function(){return this._promise};a.prototype._init=function l(t,n){var s=i(this._values,this._promise);if(s instanceof e){s=s._target();var a=s._bitField;this._values=s;if(0===(50397184&a)){this._promise._setAsyncGuaranteed();return s._then(l,this._reject,void 0,this,n)}if(0===(33554432&a))return 0!==(16777216&a)?this._reject(s._reason()):this._cancel();s=s._value()}s=c.asArray(s);if(null!==s)0!==s.length?this._iterate(s):-5===n?this._resolveEmptyArray():this._resolve(o(n));else{var u=r("expecting an array or an iterable object but got "+c.classString(s)).reason();this._promise._rejectCallback(u,!1)}};a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n;this._values=this.shouldCopyValues()?new Array(n):this._values;for(var r=this._promise,s=!1,o=null,a=0;n>a;++a){var c=i(t[a],r);if(c instanceof e){c=c._target();o=c._bitField}else o=null;if(s)null!==o&&c.suppressUnhandledRejections();else if(null!==o)if(0===(50397184&o)){c._proxy(this,a);this._values[a]=c}else s=0!==(33554432&o)?this._promiseFulfilled(c._value(),a):0!==(16777216&o)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a);else s=this._promiseFulfilled(c,a)}s||r._setAsyncGuaranteed()};a.prototype._isResolved=function(){return null===this._values};a.prototype._resolve=function(e){this._values=null;this._promise._fulfill(e)};a.prototype._cancel=function(){if(!this._isResolved()&&this._promise._isCancellable()){this._values=null;this._promise._cancel()}};a.prototype._reject=function(e){this._values=null;this._promise._rejectCallback(e,!1)};a.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return!0}return!1};a.prototype._promiseCancelled=function(){this._cancel();return!0};a.prototype._promiseRejected=function(e){this._totalResolved++;this._reject(e);return!0};a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;this._cancel();if(t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}};a.prototype.shouldCopyValues=function(){return!0};a.prototype.getActualLength=function(e){return e};return a}},function(e,t){"use strict";e.exports=function(e){function t(){this._trace=new t.CapturedTrace(i())}function n(){return r?new t:void 0}function i(){var e=s.length-1;return e>=0?s[e]:void 0}var r=!1,s=[];e.prototype._promiseCreated=function(){};e.prototype._pushContext=function(){};e.prototype._popContext=function(){return null};e._peekContext=e.prototype._peekContext=function(){};t.prototype._pushContext=function(){if(void 0!==this._trace){this._trace._promiseCreated=null;s.push(this._trace)}};t.prototype._popContext=function(){if(void 0!==this._trace){var e=s.pop(),t=e._promiseCreated;e._promiseCreated=null;return t}return null};t.CapturedTrace=null;t.create=n;t.deactivateLongStackTraces=function(){};t.activateLongStackTraces=function(){var n=e.prototype._pushContext,s=e.prototype._popContext,o=e._peekContext,a=e.prototype._peekContext,c=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n;e.prototype._popContext=s;e._peekContext=o;e.prototype._peekContext=a;e.prototype._promiseCreated=c;r=!1};r=!0;e.prototype._pushContext=t.prototype._pushContext;e.prototype._popContext=t.prototype._popContext;e._peekContext=e.prototype._peekContext=i;e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}};return t}},function(e,t,n){(function(t){"use strict";e.exports=function(e,i){function r(e,t){return{promise:t}}function s(){return!1}function o(e,t,n){var i=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+$.toString(e));i._attachCancellationCallback(e)})}catch(r){return r}}function a(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?$.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function c(){return this._onCancelField}function l(e){this._onCancelField=e}function u(){this._cancellationParent=void 0;this._onCancelField=void 0}function d(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0);e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function f(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function g(){this._trace=new R(this._peekContext())}function p(e,t){if(q(e)){var n=this._trace;void 0!==n&&t&&(n=n._parent);if(void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var i=C(e);$.notEnumerableProp(e,"stack",i.message+"\n"+i.stack.join("\n"));$.notEnumerableProp(e,"__stackCleaned__",!0)}}}function m(e,t,n,i,r){if(void 0===e&&null!==t&&Y){if(void 0!==r&&r._returnedNonUndefined())return;if(0===(65535&i._bitField))return;n&&(n+=" ");var s="",o="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=S(a),l=c.length-1;l>=0;--l){var u=c[l];if(!j.test(u)){var d=u.match(B);d&&(s="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(c.length>0)for(var h=c[0],l=0;l<a.length;++l)if(a[l]===h){l>0&&(o="\n"+a[l-1]);break}}var f="a promise was created in a "+n+"handler "+s+"but was not returned from it, see http://goo.gl/rRqMUw"+o;i._warn(f,!0,t)}}function v(e,t){var n=e+" is deprecated and will be removed in a future version.";t&&(n+=" Use "+t+" instead.");return _(n)}function _(t,n,i){if(oe.warnings){var r,s=new U(t);if(n)i._attachExtraTrace(s);else if(oe.longStackTraces&&(r=e._peekContext()))r.attachExtraTrace(s);else{var o=C(s);s.stack=o.message+"\n"+o.stack.join("\n")}te("warning",s)||E(s,"",!0)}}function y(e,t){for(var n=0;n<t.length-1;++n){t[n].push("From previous event:");t[n]=t[n].join("\n")}n<t.length&&(t[n]=t[n].join("\n"));return e+"\n"+t.join("\n")}function k(e){for(var t=0;t<e.length;++t)if(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0]){e.splice(t,1);t--}}function b(e){for(var t=e[0],n=1;n<e.length;++n){for(var i=e[n],r=t.length-1,s=t[r],o=-1,a=i.length-1;a>=0;--a)if(i[a]===s){o=a;break}for(var a=o;a>=0;--a){var c=i[a];if(t[r]!==c)break;t.pop();r--}t=i}}function S(e){for(var t=[],n=0;n<e.length;++n){var i=e[n],r="    (No stack trace)"===i||W.test(i),s=r&&ie(i);if(r&&!s){z&&" "!==i.charAt(0)&&(i="    "+i);t.push(i)}}return t}function w(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var i=t[n];if("    (No stack trace)"===i||W.test(i))break}n>0&&"SyntaxError"!=e.name&&(t=t.slice(n));return t}function C(e){var t=e.stack,n=e.toString();t="string"==typeof t&&t.length>0?w(e):["    (No stack trace)"];return{message:n,stack:"SyntaxError"==e.name?t:S(t)}}function E(e,t,n){if("undefined"!=typeof console){var i;if($.isObject(e)){var r=e.stack;i=t+V(r,e)}else i=t+String(e);"function"==typeof N?N(i,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(i)}}function T(e,t,n,i){var r=!1;try{if("function"==typeof t){r=!0;"rejectionHandled"===e?t(i):t(n,i)}}catch(s){F.throwLater(s)}"unhandledRejection"===e?te(e,n,i)||r||E(n,"Unhandled rejection "):te(e,i)}function I(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():$.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var i=JSON.stringify(e);t=i}catch(r){}0===t.length&&(t="(empty array)")}return"(<"+A(t)+">, no stack trace)"}function A(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function x(){return"function"==typeof se}function O(e){var t=e.match(re);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function P(e,t){if(x()){for(var n,i,r=e.stack.split("\n"),s=t.stack.split("\n"),o=-1,a=-1,c=0;c<r.length;++c){var l=O(r[c]);if(l){n=l.fileName;o=l.line;break}}for(var c=0;c<s.length;++c){var l=O(s[c]);if(l){i=l.fileName;a=l.line;break}}0>o||0>a||!n||!i||n!==i||o>=a||(ie=function(e){if(H.test(e))return!0;var t=O(e);return t&&t.fileName===n&&o<=t.line&&t.line<=a?!0:!1})}}function R(e){this._parent=e;this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);se(this,R);t>32&&this.uncycle()}var D,M,N,L=e._getDomain,F=e._async,U=n(322).Warning,$=n(315),q=$.canAttachTrace,H=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,j=/\((?:timers\.js):\d+:\d+\)/,B=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,W=null,V=null,z=!1,G=!(0==$.env("BLUEBIRD_DEBUG")||!$.env("BLUEBIRD_DEBUG")&&"development"!==$.env("NODE_ENV")),Q=!(0==$.env("BLUEBIRD_WARNINGS")||!G&&!$.env("BLUEBIRD_WARNINGS")),K=!(0==$.env("BLUEBIRD_LONG_STACK_TRACES")||!G&&!$.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=$.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Q||!!$.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288};e.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}};e.prototype._notifyUnhandledRejectionIsHandled=function(){T("rejectionHandled",D,void 0,this)};e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField};e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)};e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified();T("unhandledRejection",M,e,this)}};e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField};e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField};e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0};e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField};e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0};e.prototype._warn=function(e,t,n){return _(e,t,n||this)};e.onPossiblyUnhandledRejection=function(e){var t=L();M="function"==typeof e?null===t?e:$.domainBind(t,e):void 0};e.onUnhandledRejectionHandled=function(e){var t=L();D="function"==typeof e?null===t?e:$.domainBind(t,e):void 0};var X=function(){};e.longStackTraces=function(){if(F.haveItemsQueued()&&!oe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!oe.longStackTraces&&x()){var t=e.prototype._captureStackTrace,n=e.prototype._attachExtraTrace;oe.longStackTraces=!0;X=function(){if(F.haveItemsQueued()&&!oe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t;e.prototype._attachExtraTrace=n;i.deactivateLongStackTraces();F.enableTrampoline();oe.longStackTraces=!1};e.prototype._captureStackTrace=g;e.prototype._attachExtraTrace=p;i.activateLongStackTraces();F.disableTrampolineIfNecessary()}};e.hasLongStackTraces=function(){return oe.longStackTraces&&x()};var J=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");$.global.dispatchEvent(e);return function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!$.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");$.global.dispatchEvent(e);return function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});n.detail=t;return!$.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");e.initCustomEvent("testingtheevent",!1,!0,{});$.global.dispatchEvent(e);return function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e.toLowerCase(),!1,!0,t);return!$.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),Z=function(){return $.isNode?function(){return t.emit.apply(t,arguments)}:$.global?function(e){var t="on"+e.toLowerCase(),n=$.global[t];if(!n)return!1;n.apply($.global,[].slice.call(arguments,1));return!0}:function(){return!1}}(),ee={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:r},te=function(e){var t=!1;try{t=Z.apply(null,arguments)}catch(n){F.throwLater(n);t=!0}var i=!1;try{i=J(e,ee[e].apply(null,arguments))}catch(n){F.throwLater(n);i=!0}return i||t};e.config=function(t){t=Object(t);"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&X());if("warnings"in t){var n=t.warnings;oe.warnings=!!n;Y=oe.warnings;$.isObject(n)&&"wForgottenReturn"in n&&(Y=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!oe.cancellation){if(F.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=u;e.prototype._propagateFrom=d;e.prototype._onCancel=c;e.prototype._setOnCancel=l;e.prototype._attachCancellationCallback=a;e.prototype._execute=o;ne=d;oe.cancellation=!0}if("monitoring"in t)if(t.monitoring&&!oe.monitoring){oe.monitoring=!0;e.prototype._fireEvent=te}else if(!t.monitoring&&oe.monitoring){oe.monitoring=!1;e.prototype._fireEvent=s}return e};e.prototype._fireEvent=s;e.prototype._execute=function(e,t,n){try{e(t,n)}catch(i){return i}};e.prototype._onCancel=function(){};e.prototype._setOnCancel=function(e){};e.prototype._attachCancellationCallback=function(e){};e.prototype._captureStackTrace=function(){};e.prototype._attachExtraTrace=function(){};e.prototype._clearCancellationData=function(){};e.prototype._propagateFrom=function(e,t){};var ne=h,ie=function(){return!1},re=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;$.inherits(R,Error);i.CapturedTrace=R;R.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},i=0,r=this;void 0!==r;++i){t.push(r);r=r._parent}e=this._length=i;for(var i=e-1;i>=0;--i){var s=t[i].stack;void 0===n[s]&&(n[s]=i)}for(var i=0;e>i;++i){var o=t[i].stack,a=n[o];if(void 0!==a&&a!==i){if(a>0){t[a-1]._parent=void 0;t[a-1]._length=1}t[i]._parent=void 0;t[i]._length=1;var c=i>0?t[i-1]:this;if(e-1>a){c._parent=t[a+1];c._parent.uncycle();c._length=c._parent._length+1}else{c._parent=void 0;c._length=1}for(var l=c._length+1,u=i-2;u>=0;--u){t[u]._length=l;l++}return}}}};R.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=C(e),n=t.message,i=[t.stack],r=this;void 0!==r;){i.push(S(r.stack.split("\n")));r=r._parent}b(i);k(i);$.notEnumerableProp(e,"stack",y(n,i));$.notEnumerableProp(e,"__stackCleaned__",!0)}};var se=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():I(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6;W=e;V=t;var n=Error.captureStackTrace;ie=function(e){return H.test(e)};return function(e,t){Error.stackTraceLimit+=6;n(e,t);Error.stackTraceLimit-=6}}var i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0){W=/@/;V=t;z=!0;return function(e){e.stack=(new Error).stack}}var r;try{throw new Error}catch(s){r="stack"in s}if(!("stack"in i)&&r&&"number"==typeof Error.stackTraceLimit){W=e;V=t;return function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6;
}}V=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?I(t):t.toString()};return null}([]);if("undefined"!=typeof console&&"undefined"!=typeof console.warn){N=function(e){console.warn(e)};$.isNode&&t.stderr.isTTY?N=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:$.isNode||"string"!=typeof(new Error).stack||(N=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")})}var oe={warnings:Q,longStackTraces:!1,cancellation:!1,monitoring:!1};K&&e.longStackTraces();return{longStackTraces:function(){return oe.longStackTraces},warnings:function(){return oe.warnings},cancellation:function(){return oe.cancellation},monitoring:function(){return oe.monitoring},propagateFromFunction:function(){return ne},boundValueFunction:function(){return f},checkForgottenReturns:m,setBounds:P,warn:_,deprecated:v,CapturedTrace:R,fireDomEvent:J,fireGlobalEvent:Z}}}).call(t,n(15))},function(e,t,n){"use strict";e.exports=function(e,t,i){function r(e,t,n){this.promise=e;this.type=t;this.handler=n;this.called=!1;this.cancelPromise=null}function s(e){this.finallyHandler=e}function o(e,t){if(null!=e.cancelPromise){arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel();e.cancelPromise=null;return!0}return!1}function a(){return l.call(this,this.promise._target()._settledValue())}function c(e){if(!o(this,e)){h.e=e;return h}}function l(n){var r=this.promise,l=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?l.call(r._boundValue()):l.call(r._boundValue(),n);if(u===i)return u;if(void 0!==u){r._setReturnedNonUndefined();var f=t(u,r);if(f instanceof e){if(null!=this.cancelPromise){if(f._isCancelled()){var g=new d("late cancellation observer");r._attachExtraTrace(g);h.e=g;return h}f.isPending()&&f._attachCancellationCallback(new s(this))}return f._then(a,c,void 0,this,void 0)}}}if(r.isRejected()){o(this);h.e=n;return h}o(this);return n}var u=n(315),d=e.CancellationError,h=u.errorObj,f=n(328)(i);r.prototype.isFinallyHandler=function(){return 0===this.type};s.prototype._resultCancelled=function(){o(this.finallyHandler)};e.prototype._passThrough=function(e,t,n,i){return"function"!=typeof e?this.then():this._then(n,i,void 0,new r(this,t,e),void 0)};e.prototype.lastly=e.prototype["finally"]=function(e){return this._passThrough(e,0,l,l)};e.prototype.tap=function(e){return this._passThrough(e,1,l)};e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,l);var i,r=new Array(n-1),s=0;for(i=0;n-1>i;++i){var o=arguments[i];if(!u.isObject(o))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(o)));r[s++]=o}r.length=s;var a=arguments[i];return this._passThrough(f(r,a,this),1,void 0,l)};return r}},function(e,t,n){"use strict";e.exports=function(e){function t(t,n,a){return function(c){var l=a._boundValue();e:for(var u=0;u<t.length;++u){var d=t[u];if(d===Error||null!=d&&d.prototype instanceof Error){if(c instanceof d)return s(n).call(l,c)}else if("function"==typeof d){var h=s(d).call(l,c);if(h===o)return h;if(h)return s(n).call(l,c)}else if(i.isObject(c)){for(var f=r(d),g=0;g<f.length;++g){var p=f[g];if(d[p]!=c[p])continue e}return s(n).call(l,c)}}return e}}var i=n(315),r=n(316).keys,s=i.tryCatch,o=i.errorObj;return t}},function(e,t,n){"use strict";function i(e){return e instanceof Error&&u.getPrototypeOf(e)===Error.prototype}function r(e){var t;if(i(e)){t=new l(e);t.name=e.name;t.message=e.message;t.stack=e.stack;for(var n=u.keys(e),r=0;r<n.length;++r){var s=n[r];d.test(s)||(t[s]=e[s])}return t}o.markAsOriginatingFromRejection(e);return e}function s(e,t){return function(n,i){if(null!==e){if(n){var s=r(a(n));e._attachExtraTrace(s);e._reject(s)}else if(t){for(var o=arguments.length,c=new Array(Math.max(o-1,0)),l=1;o>l;++l)c[l-1]=arguments[l];e._fulfill(c)}else e._fulfill(i);e=null}}}var o=n(315),a=o.maybeWrapAsError,c=n(322),l=c.OperationalError,u=n(316),d=/^(?:name|message|stack|cause)$/;e.exports=s},function(e,t,n){"use strict";e.exports=function(e,t,i,r,s){var o=n(315),a=o.tryCatch;e.method=function(n){if("function"!=typeof n)throw new e.TypeError("expecting a function but got "+o.classString(n));return function(){var i=new e(t);i._captureStackTrace();i._pushContext();var r=a(n).apply(this,arguments),o=i._popContext();s.checkForgottenReturns(r,o,"Promise.method",i);i._resolveFromSyncValue(r);return i}};e.attempt=e["try"]=function(n){if("function"!=typeof n)return r("expecting a function but got "+o.classString(n));var i=new e(t);i._captureStackTrace();i._pushContext();var c;if(arguments.length>1){s.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=o.isArray(l)?a(n).apply(u,l):a(n).call(u,l)}else c=a(n)();var d=i._popContext();s.checkForgottenReturns(c,d,"Promise.try",i);i._resolveFromSyncValue(c);return i};e.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},function(e,t){"use strict";e.exports=function(e,t,n,i){var r=!1,s=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0;t.bindingPromise._then(s,s,null,this,e)},a=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(s){if(!r){r=!0;e.prototype._propagateFrom=i.propagateFromFunction();e.prototype._boundValue=i.boundValueFunction()}var l=n(s),u=new e(t);u._propagateFrom(this,1);var d=this._target();u._setBoundTo(l);if(l instanceof e){var h={promiseRejectionQueued:!1,promise:u,target:d,bindingPromise:l};d._then(t,o,void 0,u,h);l._then(a,c,void 0,u,h);u._setOnCancel(l)}else u._resolveCallback(d);return u};e.prototype._setBoundTo=function(e){if(void 0!==e){this._bitField=2097152|this._bitField;this._boundTo=e}else this._bitField=-2097153&this._bitField};e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)};e.bind=function(t,n){return e.resolve(n).bind(t)}}},function(e,t,n){"use strict";e.exports=function(e,t,i,r){var s=n(315),o=s.tryCatch,a=s.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel();e._setWillBeCancelled();t=e;e=n}};e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--};e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0};e.prototype._cancelBy=function(e){if(e===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return!0}this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return!0}return!1};e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()};e.prototype._cancel=function(){if(this._isCancellable()){this._setCancelled();c.invoke(this._cancelPromises,this,void 0)}};e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()};e.prototype._unsetOnCancel=function(){this._onCancelField=void 0};e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()};e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};e.prototype._doInvokeOnCancel=function(e,t){if(s.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var i=o(e).call(this._boundValue());if(i===a){this._attachExtraTrace(i.e);c.throwLater(i.e)}}}else e._resultCancelled(this)};e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel();c.invoke(this._doInvokeOnCancel,this,e)};e.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),!0);this._unsetOnCancel()}};e.prototype._resultCancelled=function(){this.cancel()}}},function(e,t){"use strict";e.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){n instanceof e&&n.suppressUnhandledRejections();return this._then(t,void 0,void 0,{value:n},void 0)};e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)};e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],i=function(){throw t};return this.caught(e,i)};e.prototype.catchReturn=function(n){if(arguments.length<=1){n instanceof e&&n.suppressUnhandledRejections();return this._then(void 0,t,void 0,{value:n},void 0)}var i=arguments[1];i instanceof e&&i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}},function(e,t){"use strict";e.exports=function(e){function t(e){if(void 0!==e){e=e._target();this._bitField=e._bitField;this._settledValueField=e._isFateSealed()?e._settledValue():void 0}else{this._bitField=0;this._settledValueField=void 0}}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},s=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)};e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)};e.prototype._isCancelled=function(){return this._target().__isCancelled()};e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)};e.prototype.isPending=function(){return o.call(this._target())};e.prototype.isRejected=function(){return s.call(this._target())};e.prototype.isFulfilled=function(){return r.call(this._target())};e.prototype.isResolved=function(){return a.call(this._target())};e.prototype.value=function(){return n.call(this._target())};e.prototype.reason=function(){var e=this._target();e._unsetRejectionIsUnhandled();return i.call(e)};e.prototype._value=function(){return this._settledValue()};e.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue()};e.PromiseInspection=t}},function(e,t,n){"use strict";e.exports=function(e,t,i,r,s,o){var a,c=n(315),l=c.canEvaluate,u=c.tryCatch,d=c.errorObj;if(l){for(var h=function(e){return new Function("value","holder","                             \n	            'use strict';                                                    \n	            holder.pIndex = value;                                           \n	            holder.checkFulfillment(this);                                   \n	            ".replace(/Index/g,e))},f=function(e){return new Function("promise","holder","                           \n	            'use strict';                                                    \n	            holder.pIndex = promise;                                         \n	            ".replace(/Index/g,e))},g=function(t){for(var n=new Array(t),i=0;i<n.length;++i)n[i]="this.p"+(i+1);var r=n.join(" = ")+" = null;",o="var promise;\n"+n.map(function(e){return"                                                         \n	                promise = "+e+";                                      \n	                if (promise instanceof Promise) {                            \n	                    promise.cancel();                                        \n	                }                                                            \n	            "}).join("\n"),a=n.join(", "),c="Holder$"+t,l="return function(tryCatch, errorObj, Promise, async) {    \n	            'use strict';                                                    \n	            function [TheName](fn) {                                         \n	                [TheProperties]                                              \n	                this.fn = fn;                                                \n	                this.asyncNeeded = true;                                     \n	                this.now = 0;                                                \n	            }                                                                \n	                                                                             \n	            [TheName].prototype._callFunction = function(promise) {          \n	                promise._pushContext();                                      \n	                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n	                promise._popContext();                                       \n	                if (ret === errorObj) {                                      \n	                    promise._rejectCallback(ret.e, false);                   \n	                } else {                                                     \n	                    promise._resolveCallback(ret);                           \n	                }                                                            \n	            };                                                               \n	                                                                             \n	            [TheName].prototype.checkFulfillment = function(promise) {       \n	                var now = ++this.now;                                        \n	                if (now === [TheTotal]) {                                    \n	                    if (this.asyncNeeded) {                                  \n	                        async.invoke(this._callFunction, this, promise);     \n	                    } else {                                                 \n	                        this._callFunction(promise);                         \n	                    }                                                        \n	                                                                             \n	                }                                                            \n	            };                                                               \n	                                                                             \n	            [TheName].prototype._resultCancelled = function() {              \n	                [CancellationCode]                                           \n	            };                                                               \n	                                                                             \n	            return [TheName];                                                \n	        }(tryCatch, errorObj, Promise, async);                               \n	        ";l=l.replace(/\[TheName\]/g,c).replace(/\[TheTotal\]/g,t).replace(/\[ThePassedArguments\]/g,a).replace(/\[TheProperties\]/g,r).replace(/\[CancellationCode\]/g,o);return new Function("tryCatch","errorObj","Promise","async",l)(u,d,e,s)},p=[],m=[],v=[],_=0;8>_;++_){p.push(g(_+1));m.push(h(_+1));v.push(f(_+1))}a=function(e){this._reject(e)}}e.join=function(){var n,s=arguments.length-1;if(s>0&&"function"==typeof arguments[s]){n=arguments[s];if(8>=s&&l){var u=new e(r);u._captureStackTrace();for(var d=p[s-1],h=new d(n),f=m,g=0;s>g;++g){var _=i(arguments[g],u);if(_ instanceof e){_=_._target();var y=_._bitField;if(0===(50397184&y)){_._then(f[g],a,void 0,u,h);v[g](_,h);h.asyncNeeded=!1}else 0!==(33554432&y)?f[g].call(u,_._value(),h):0!==(16777216&y)?u._reject(_._reason()):u._cancel()}else f[g].call(u,_,h)}if(!u._isFateSealed()){if(h.asyncNeeded){var k=o();null!==k&&(h.fn=c.domainBind(k,h.fn))}u._setAsyncGuaranteed();u._setOnCancel(h)}return u}}for(var b=arguments.length,S=new Array(b),w=0;b>w;++w)S[w]=arguments[w];n&&S.pop();var u=new t(S).promise();return void 0!==n?u.spread(n):u}}},function(e,t,n){"use strict";e.exports=function(e,t,i,r,s,o){function a(e,t,n,i){this.constructor$(e);this._promise._captureStackTrace();var r=l();this._callback=null===r?t:u.domainBind(r,t);this._preservedValues=i===s?new Array(this.length()):null;this._limit=n;this._inFlight=0;this._queue=[];f.invoke(this._asyncInit,this,void 0)}function c(t,n,r,s){if("function"!=typeof n)return i("expecting a function but got "+u.classString(n));var o=0;if(void 0!==r){if("object"!=typeof r||null===r)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(r)));if("number"!=typeof r.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(r.concurrency)));o=r.concurrency}o="number"==typeof o&&isFinite(o)&&o>=1?o:0;return new a(t,n,o,s).promise()}var l=e._getDomain,u=n(315),d=u.tryCatch,h=u.errorObj,f=e._async;u.inherits(a,t);a.prototype._asyncInit=function(){this._init$(void 0,-2)};a.prototype._init=function(){};a.prototype._promiseFulfilled=function(t,n){var i=this._values,s=this.length(),a=this._preservedValues,c=this._limit;if(0>n){n=-1*n-1;i[n]=t;if(c>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return!0}}else{if(c>=1&&this._inFlight>=c){i[n]=t;this._queue.push(n);return!1}null!==a&&(a[n]=t);var l=this._promise,u=this._callback,f=l._boundValue();l._pushContext();var g=d(u).call(f,t,n,s),p=l._popContext();o.checkForgottenReturns(g,p,null!==a?"Promise.filter":"Promise.map",l);if(g===h){this._reject(g.e);return!0}var m=r(g,this._promise);if(m instanceof e){m=m._target();var v=m._bitField;if(0===(50397184&v)){c>=1&&this._inFlight++;i[n]=m;m._proxy(this,-1*(n+1));return!1}if(0===(33554432&v)){if(0!==(16777216&v)){this._reject(m._reason());return!0}this._cancel();return!0}g=m._value()}i[n]=g}var _=++this._totalResolved;if(_>=s){null!==a?this._filter(i,a):this._resolve(i);return!0}return!1};a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var i=e.pop();this._promiseFulfilled(n[i],i)}};a.prototype._filter=function(e,t){for(var n=t.length,i=new Array(n),r=0,s=0;n>s;++s)e[s]&&(i[r++]=t[s]);i.length=r;this._resolve(i)};a.prototype.preservedValues=function(){return this._preservedValues};e.prototype.map=function(e,t){return c(this,e,t,null)};e.map=function(e,t,n,i){return c(e,t,n,i)}}},function(e,t,n){"use strict";var i=Object.create;if(i){var r=i(null),s=i(null);r[" size"]=s[" size"]=0}e.exports=function(e){function t(t,n){var i;null!=t&&(i=t[n]);if("function"!=typeof i){var r="Object "+u.classString(t)+" has no method '"+u.toString(n)+"'";throw new e.TypeError(r)}return i}function i(e){var n=this.pop(),i=t(e,n);return i.apply(e,this)}function o(e){return e[this]}function a(e){var t=+this;0>t&&(t=Math.max(0,t+e.length));return e[t]}var c,l,u=n(315),d=u.canEvaluate,h=u.isIdentifier,f=function(e){return new Function("ensureMethod","                                    \n	        return function(obj) {                                               \n	            'use strict'                                                     \n	            var len = this.length;                                           \n	            ensureMethod(obj, 'methodName');                                 \n	            switch(len) {                                                    \n	                case 1: return obj.methodName(this[0]);                      \n	                case 2: return obj.methodName(this[0], this[1]);             \n	                case 3: return obj.methodName(this[0], this[1], this[2]);    \n	                case 0: return obj.methodName();                             \n	                default:                                                     \n	                    return obj.methodName.apply(obj, this);                  \n	            }                                                                \n	        };                                                                   \n	        ".replace(/methodName/g,e))(t)},g=function(e){return new Function("obj","                                             \n	        'use strict';                                                        \n	        return obj.propertyName;                                             \n	        ".replace("propertyName",e))},p=function(e,t,n){var i=n[e];if("function"!=typeof i){if(!h(e))return null;i=t(e);n[e]=i;n[" size"]++;if(n[" size"]>512){for(var r=Object.keys(n),s=0;256>s;++s)delete n[r[s]];n[" size"]=r.length-256}}return i};c=function(e){return p(e,f,r)};l=function(e){return p(e,g,s)};e.prototype.call=function(e){for(var t=arguments.length,n=new Array(Math.max(t-1,0)),r=1;t>r;++r)n[r-1]=arguments[r];if(d){var s=c(e);if(null!==s)return this._then(s,void 0,void 0,n,void 0)}n.push(e);return this._then(i,void 0,void 0,n,void 0)};e.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=a;else if(d){var i=l(e);t=null!==i?i:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},function(e,t,n){"use strict";e.exports=function(e,t,i,r,s,o){function a(e){setTimeout(function(){throw e},0)}function c(e){var t=i(e);t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer());return t}function l(t,n){function r(){if(o>=l)return u._fulfill();var s=c(t[o++]);if(s instanceof e&&s._isDisposable()){try{s=i(s._getDisposer().tryDispose(n),t.promise)}catch(d){return a(d)}if(s instanceof e)return s._then(r,a,null,null,null)}r()}var o=0,l=t.length,u=new e(s);r();return u}function u(e,t,n){this._data=e;this._promise=t;this._context=n}function d(e,t,n){this.constructor$(e,t,n)}function h(e){if(u.isDisposer(e)){this.resources[this.index]._setDisposable(e);return e.promise()}return e}function f(e){this.length=e;this.promise=null;this[e-1]=null}var g=n(315),p=n(322).TypeError,m=n(315).inherits,v=g.errorObj,_=g.tryCatch,y={};u.prototype.data=function(){return this._data};u.prototype.promise=function(){return this._promise};u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y};u.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=t!==y?this.doDispose(t,e):null;void 0!==n&&n._popContext();this._promise._unsetDisposable();this._data=null;return i};u.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose};m(d,u);d.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)};f.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var i=this[n];i instanceof e&&i.cancel()}};e.using=function(){var n=arguments.length;if(2>n)return t("you must pass at least 2 arguments to Promise.using");var r=arguments[n-1];if("function"!=typeof r)return t("expecting a function but got "+g.classString(r));var s,a=!0;if(2===n&&Array.isArray(arguments[0])){s=arguments[0];n=s.length;a=!1}else{s=arguments;n--}for(var c=new f(n),d=0;n>d;++d){var p=s[d];if(u.isDisposer(p)){var m=p;p=p.promise();p._setDisposable(m)}else{var y=i(p);y instanceof e&&(p=y._then(h,null,null,{resources:c,index:d},void 0))}c[d]=p}for(var k=new Array(c.length),d=0;d<k.length;++d)k[d]=e.resolve(c[d]).reflect();var b=e.all(k).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected()){v.e=n.error();return v}if(!n.isFulfilled()){b.cancel();return}e[t]=n.value()}S._pushContext();r=_(r);var i=a?r.apply(void 0,e):r(e),s=S._popContext();o.checkForgottenReturns(i,s,"Promise.using",S);return i}),S=b.lastly(function(){var t=new e.PromiseInspection(b);return l(c,t)});c.promise=S;S._setOnCancel(c);return S};e.prototype._setDisposable=function(e){this._bitField=131072|this._bitField;this._disposer=e};e.prototype._isDisposable=function(){return(131072&this._bitField)>0};e.prototype._getDisposer=function(){return this._disposer};e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField;this._disposer=void 0};e.prototype.disposer=function(e){if("function"==typeof e)return new d(e,this,r());throw new p}}},function(e,t,n){"use strict";e.exports=function(e,t,i){function r(e){this.handle=e}function s(e){clearTimeout(this.handle);return e}function o(e){clearTimeout(this.handle);throw e}var a=n(315),c=e.TimeoutError;r.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(e){return u(+this).thenReturn(e)},u=e.delay=function(n,s){var o,a;if(void 0!==s){o=e.resolve(s)._then(l,null,null,n,void 0);i.cancellation()&&s instanceof e&&o._setOnCancel(s)}else{o=new e(t);a=setTimeout(function(){o._fulfill()},+n);i.cancellation()&&o._setOnCancel(new r(a));o._captureStackTrace()}o._setAsyncGuaranteed();return o};e.prototype.delay=function(e){return u(e,this)};var d=function(e,t,n){var i;i="string"!=typeof t?t instanceof Error?t:new c("operation timed out"):new c(t);a.markAsOriginatingFromRejection(i);e._attachExtraTrace(i);e._reject(i);null!=n&&n.cancel()};e.prototype.timeout=function(e,t){e=+e;var n,a,c=new r(setTimeout(function(){n.isPending()&&d(n,t,a)},e));if(i.cancellation()){a=this.then();n=a._then(s,o,void 0,c,void 0);n._setOnCancel(c)}else n=this._then(s,o,void 0,c,void 0);return n}}},function(e,t,n){"use strict";e.exports=function(e,t,i,r,s,o){function a(t,n,i){for(var s=0;s<n.length;++s){i._pushContext();var o=f(n[s])(t);i._popContext();if(o===h){i._pushContext();var a=e.reject(h.e);i._popContext();return a}var c=r(o,i);if(c instanceof e)return c}return null}function c(t,n,r,s){if(o.cancellation()){var a=new e(i),c=this._finallyPromise=new e(i);this._promise=a.lastly(function(){return c});a._captureStackTrace();a._setOnCancel(this)}else{var l=this._promise=new e(i);l._captureStackTrace()}this._stack=s;this._generatorFunction=t;this._receiver=n;this._generator=void 0;this._yieldHandlers="function"==typeof r?[r].concat(g):g;this._yieldedPromise=null;this._cancellationPhase=!1}var l=n(322),u=l.TypeError,d=n(315),h=d.errorObj,f=d.tryCatch,g=[];d.inherits(c,s);c.prototype._isResolved=function(){return null===this._promise};c.prototype._cleanup=function(){this._promise=this._generator=null;if(o.cancellation()&&null!==this._finallyPromise){this._finallyPromise._fulfill();this._finallyPromise=null}};c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n){this._promise._pushContext();t=f(this._generator["return"]).call(this._generator,void 0);this._promise._popContext()}else{var i=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=i;this._promise._attachExtraTrace(i);this._promise._pushContext();t=f(this._generator["throw"]).call(this._generator,i);this._promise._popContext()}this._cancellationPhase=!0;this._yieldedPromise=null;this._continue(t)}};c.prototype._promiseFulfilled=function(e){this._yieldedPromise=null;this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext();this._continue(t)};c.prototype._promiseRejected=function(e){this._yieldedPromise=null;this._promise._attachExtraTrace(e);this._promise._pushContext();var t=f(this._generator["throw"]).call(this._generator,e);this._promise._popContext();this._continue(t)};c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null;t.cancel()}};c.prototype.promise=function(){return this._promise};c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._promiseFulfilled(void 0)};c.prototype._continue=function(t){var n=this._promise;if(t===h){this._cleanup();return this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1)}var i=t.value;if(t.done===!0){this._cleanup();return this._cancellationPhase?n.cancel():n._resolveCallback(i)}var s=r(i,this._promise);if(!(s instanceof e)){s=a(s,this._yieldHandlers,this._promise);if(null===s){this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(i))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return}}s=s._target();var o=s._bitField;if(0===(50397184&o)){this._yieldedPromise=s;s._proxy(this,null)}else 0!==(33554432&o)?e._async.invoke(this._promiseFulfilled,this,s._value()):0!==(16777216&o)?e._async.invoke(this._promiseRejected,this,s._reason()):this._promiseCancelled()};e.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,i=c,r=(new Error).stack;return function(){var t=e.apply(this,arguments),s=new i(void 0,void 0,n,r),o=s.promise();s._generator=t;s._promiseFulfilled(void 0);return o}};e.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+d.classString(e));g.push(e)};e.spawn=function(n){o.deprecated("Promise.spawn()","Promise.coroutine()");if("function"!=typeof n)return t("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=new c(n,this),r=i.promise();i._run(e.spawn);return r}}},function(e,t,n){"use strict";e.exports=function(e){function t(e,t){var n=this;if(!s.isArray(e))return i.call(n,e,t);var r=a(t).apply(n._boundValue(),[null].concat(e));r===c&&o.throwLater(r.e)}function i(e,t){var n=this,i=n._boundValue(),r=void 0===e?a(t).call(i,null):a(t).call(i,null,e);r===c&&o.throwLater(r.e)}function r(e,t){var n=this;if(!e){var i=new Error(e+"");i.cause=e;e=i}var r=a(t).call(n._boundValue(),e);r===c&&o.throwLater(r.e)}var s=n(315),o=e._async,a=s.tryCatch,c=s.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(e,n){if("function"==typeof e){var s=i;void 0!==n&&Object(n).spread&&(s=t);this._then(s,r,void 0,this,e)}return this}}},function(e,t,n){"use strict";e.exports=function(e,t){function i(e){return!S.test(e)}function r(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function s(e,t,n){var i=f.getDataPropertyOrDefault(e,t+n,k);return i?r(i):!1}function o(e,t,n){for(var i=0;i<e.length;i+=2){var r=e[i];if(n.test(r))for(var s=r.replace(n,""),o=0;o<e.length;o+=2)if(e[o]===s)throw new _("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function a(e,t,n,i){for(var a=f.inheritedDataKeys(e),c=[],l=0;l<a.length;++l){var u=a[l],d=e[u],h=i===w?!0:w(u,d,e);"function"!=typeof d||r(d)||s(e,u,t)||!i(u,d,e,h)||c.push(u,d)}o(c,t,n);return c}function c(n,i,r,s,o,a){function c(){var r=i;i===h&&(r=this);var s=new e(t);s._captureStackTrace();var o="string"==typeof u&&this!==l?this[u]:n,c=g(s,a);try{o.apply(r,p(arguments,c))}catch(d){s._rejectCallback(m(d),!0,!0)}s._isFateSealed()||s._setAsyncGuaranteed();return s}var l=function(){return this}(),u=n;"string"==typeof u&&(n=s);f.notEnumerableProp(c,"__isPromisified__",!0);return c}function l(e,t,n,i,r){for(var s=new RegExp(C(t)+"$"),o=a(e,t,s,n),c=0,l=o.length;l>c;c+=2){var u=o[c],d=o[c+1],g=u+t;if(i===x)e[g]=x(u,h,u,d,t,r);else{var p=i(d,function(){return x(u,h,u,d,t,r)});f.notEnumerableProp(p,"__isPromisified__",!0);e[g]=p}}f.toFastProperties(e);return e}function u(e,t,n){return x(e,t,void 0,e,null,n)}var d,h={},f=n(315),g=n(329),p=f.withAppended,m=f.maybeWrapAsError,v=f.canEvaluate,_=n(322).TypeError,y="Async",k={__isPromisified__:!0},b=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],S=new RegExp("^(?:"+b.join("|")+")$"),w=function(e){return f.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e;
},C=function(e){return e.replace(/([$])/,"\\$")},E=function(e){for(var t=[e],n=Math.max(0,e-1-3),i=e-1;i>=n;--i)t.push(i);for(var i=e+1;3>=i;++i)t.push(i);return t},T=function(e){return f.filledRange(e,"_arg","")},I=function(e){return f.filledRange(Math.max(e,3),"_arg","")},A=function(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0};d=function(n,i,r,s,o,a){function c(e){var t,n=T(e).join(", "),r=e>0?", ":"";t=v?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===i?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n";return t.replace("{{args}}",n).replace(", ",r)}function l(){for(var e="",t=0;t<d.length;++t)e+="case "+d[t]+":"+c(d[t]);e+="                                                             \n	        default:                                                             \n	            var args = new Array(len + 1);                                   \n	            var i = 0;                                                       \n	            for (var i = 0; i < len; ++i) {                                  \n	               args[i] = arguments[i];                                       \n	            }                                                                \n	            args[i] = nodeback;                                              \n	            [CodeForCall]                                                    \n	            break;                                                           \n	        ".replace("[CodeForCall]",v?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n");return e}var u=Math.max(0,A(s)-1),d=E(u),v="string"==typeof n||i===h,_="string"==typeof n?"this != null ? this['"+n+"'] : fn":"fn",y="'use strict';                                                \n	        var ret = function (Parameters) {                                    \n	            'use strict';                                                    \n	            var len = arguments.length;                                      \n	            var promise = new Promise(INTERNAL);                             \n	            promise._captureStackTrace();                                    \n	            var nodeback = nodebackForPromise(promise, "+a+");   \n	            var ret;                                                         \n	            var callback = tryCatch([GetFunctionCode]);                      \n	            switch(len) {                                                    \n	                [CodeForSwitchCase]                                          \n	            }                                                                \n	            if (ret === errorObj) {                                          \n	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n	            }                                                                \n	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n	            return promise;                                                  \n	        };                                                                   \n	        notEnumerableProp(ret, '__isPromisified__', true);                   \n	        return ret;                                                          \n	    ".replace("[CodeForSwitchCase]",l()).replace("[GetFunctionCode]",_);y=y.replace("Parameters",I(u));return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",y)(e,s,i,p,m,g,f.tryCatch,f.errorObj,f.notEnumerableProp,t)};var x=v?d:c;e.promisify=function(e,t){if("function"!=typeof e)throw new _("expecting a function but got "+f.classString(e));if(r(e))return e;t=Object(t);var n=void 0===t.context?h:t.context,s=!!t.multiArgs,o=u(e,n,s);f.copyDescriptors(e,o,i);return o};e.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new _("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,i=t.suffix;"string"!=typeof i&&(i=y);var r=t.filter;"function"!=typeof r&&(r=w);var s=t.promisifier;"function"!=typeof s&&(s=x);if(!f.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var o=f.inheritedDataKeys(e),a=0;a<o.length;++a){var c=e[o[a]];if("constructor"!==o[a]&&f.isClass(c)){l(c.prototype,i,r,s,n);l(c,i,r,s,n)}}return l(e,i,r,s,n)}}},function(e,t,n){"use strict";e.exports=function(e,t,i,r){function s(e){var t,n=!1;if(void 0!==a&&e instanceof a){t=d(e);n=!0}else{var i=u.keys(e),r=i.length;t=new Array(2*r);for(var s=0;r>s;++s){var o=i[s];t[s]=e[o];t[s+r]=o}}this.constructor$(t);this._isMap=n;this._init$(void 0,n?-6:-3)}function o(t){var n,o=i(t);if(!l(o))return r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n");n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new s(o).promise();o instanceof e&&n._propagateFrom(o,2);return n}var a,c=n(315),l=c.isObject,u=n(316);"function"==typeof Map&&(a=Map);var d=function(){function e(e,i){this[t]=e;this[t+n]=i;t++}var t=0,n=0;return function(i){n=i.size;t=0;var r=new Array(2*i.size);i.forEach(e,r);return r}}(),h=function(e){for(var t=new a,n=e.length/2|0,i=0;n>i;++i){var r=e[n+i],s=e[i];t.set(r,s)}return t};c.inherits(s,t);s.prototype._init=function(){};s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var i;if(this._isMap)i=h(this._values);else{i={};for(var r=this.length(),s=0,o=this.length();o>s;++s)i[this._values[s+r]]=this._values[s]}this._resolve(i);return!0}return!1};s.prototype.shouldCopyValues=function(){return!1};s.prototype.getActualLength=function(e){return e>>1};e.prototype.props=function(){return o(this)};e.props=function(e){return o(e)}}},function(e,t,n){"use strict";e.exports=function(e,t,i,r){function s(n,s){var c=i(n);if(c instanceof e)return a(c);n=o.asArray(n);if(null===n)return r("expecting an array or an iterable object but got "+o.classString(n));var l=new e(t);void 0!==s&&l._propagateFrom(s,3);for(var u=l._fulfill,d=l._reject,h=0,f=n.length;f>h;++h){var g=n[h];(void 0!==g||h in n)&&e.cast(g)._then(u,d,void 0,l,null)}return l}var o=n(315),a=function(e){return e.then(function(t){return s(t,e)})};e.race=function(e){return s(e,void 0)};e.prototype.race=function(){return s(this,void 0)}}},function(e,t,n){"use strict";e.exports=function(e,t,i,r,s,o){function a(t,n,i,r){this.constructor$(t);var o=h();this._fn=null===o?n:f.domainBind(o,n);if(void 0!==i){i=e.resolve(i);i._attachCancellationCallback(this)}this._initialValue=i;this._currentCancellable=null;r===s?this._eachValues=Array(this._length):0===r?this._eachValues=null:this._eachValues=void 0;this._promise._captureStackTrace();this._init$(void 0,-5)}function c(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,n,r){if("function"!=typeof t)return i("expecting a function but got "+f.classString(t));var s=new a(e,t,n,r);return s.promise()}function u(t){this.accum=t;this.array._gotAccum(t);var n=r(this.value,this.array._promise);if(n instanceof e){this.array._currentCancellable=n;return n._then(d,void 0,void 0,this,void 0)}return d.call(this,n)}function d(t){var n=this.array,i=n._promise,r=g(n._fn);i._pushContext();var s;s=void 0!==n._eachValues?r.call(i._boundValue(),t,this.index,this.length):r.call(i._boundValue(),this.accum,t,this.index,this.length);s instanceof e&&(n._currentCancellable=s);var a=i._popContext();o.checkForgottenReturns(s,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i);return s}var h=e._getDomain,f=n(315),g=f.tryCatch;f.inherits(a,t);a.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==s&&this._eachValues.push(e)};a.prototype._eachComplete=function(e){null!==this._eachValues&&this._eachValues.push(e);return this._eachValues};a.prototype._init=function(){};a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)};a.prototype.shouldCopyValues=function(){return!1};a.prototype._resolve=function(e){this._promise._resolveCallback(e);this._values=null};a.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();if(!this._isResolved()){this._resultCancelled$();this._currentCancellable instanceof e&&this._currentCancellable.cancel();this._initialValue instanceof e&&this._initialValue.cancel()}};a.prototype._iterate=function(t){this._values=t;var n,i,r=t.length;if(void 0!==this._initialValue){n=this._initialValue;i=0}else{n=e.resolve(t[0]);i=1}this._currentCancellable=n;if(!n.isRejected())for(;r>i;++i){var s={accum:null,value:t[i],index:i,length:r,array:this};n=n._then(u,void 0,void 0,s,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0));n._then(c,c,void 0,n,this)};e.prototype.reduce=function(e,t){return l(this,e,t,null)};e.reduce=function(e,t,n,i){return l(e,t,n,i)}}},function(e,t,n){"use strict";e.exports=function(e,t,i){function r(e){this.constructor$(e)}var s=e.PromiseInspection,o=n(315);o.inherits(r,t);r.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return!0}return!1};r.prototype._promiseFulfilled=function(e,t){var n=new s;n._bitField=33554432;n._settledValueField=e;return this._promiseResolved(t,n)};r.prototype._promiseRejected=function(e,t){var n=new s;n._bitField=16777216;n._settledValueField=e;return this._promiseResolved(t,n)};e.settle=function(e){i.deprecated(".settle()",".reflect()");return new r(e).promise()};e.prototype.settle=function(){return e.settle(this)}}},function(e,t,n){"use strict";e.exports=function(e,t,i){function r(e){this.constructor$(e);this._howMany=0;this._unwrap=!1;this._initialized=!1}function s(e,t){if((0|t)!==t||0>t)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new r(e),s=n.promise();n.setHowMany(t);n.init();return s}var o=n(315),a=n(322).RangeError,c=n(322).AggregateError,l=o.isArray,u={};o.inherits(r,t);r.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])};r.prototype.init=function(){this._initialized=!0;this._init()};r.prototype.setUnwrap=function(){this._unwrap=!0};r.prototype.howMany=function(){return this._howMany};r.prototype.setHowMany=function(e){this._howMany=e};r.prototype._promiseFulfilled=function(e){this._addFulfilled(e);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values);return!0}return!1};r.prototype._promiseRejected=function(e){this._addRejected(e);return this._checkOutcome()};r.prototype._promiseCancelled=function(){if(this._values instanceof e||null==this._values)return this._cancel();this._addRejected(u);return this._checkOutcome()};r.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new c,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);e.length>0?this._reject(e):this._cancel();return!0}return!1};r.prototype._fulfilled=function(){return this._totalResolved};r.prototype._rejected=function(){return this._values.length-this.length()};r.prototype._addRejected=function(e){this._values.push(e)};r.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e};r.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};r.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)};r.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};e.some=function(e,t){return s(e,t)};e.prototype.some=function(e){return s(this,e)};e._SomePromiseArray=r}},function(e,t){"use strict";e.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,i){return n(this,e,i,t)};e.filter=function(e,i,r){return n(e,i,r,t)}}},function(e,t){"use strict";e.exports=function(e,t){function n(){return s(this)}function i(e,n){return r(e,n,t,t)}var r=e.reduce,s=e.all;e.prototype.each=function(e){return r(this,e,t,0)._then(n,void 0,void 0,this,void 0)};e.prototype.mapSeries=function(e){return r(this,e,t,t)};e.each=function(e,i){return r(e,i,t,0)._then(n,void 0,void 0,e,void 0)};e.mapSeries=i}},function(e,t){"use strict";e.exports=function(e){function t(e){var t=new n(e),i=t.promise();t.setHowMany(1);t.setUnwrap();t.init();return i}var n=e._SomePromiseArray;e.any=function(e){return t(e)};e.prototype.any=function(){return t(this)}}},function(e,t){"use strict";var n=function(){};n.prototype.notDefined=function(e){return"undefined"==typeof e};n.prototype.isDefined=function(e){return"undefined"!=typeof e};e.exports=new n},function(e,t,n){"use strict";var i=n(312),r=function(){};r.prototype.timeout=function(e){return new i(function(t){setTimeout(t,e)})};r.prototype.once=function(e,t){return new i(function(n){e.once(t,function(){n(arguments)})})};r.prototype.resolveFactory=function(e){return function(){return i.resolve(e)}};r.prototype.promiseError=function(e){return new i(function(){throw e})};r.prototype.promiseErrorFactory=function(e){var t=this;return function(){return t.promiseError(e)}};r.prototype.doAndOnce=function(e,t,n){var i=this.once(t,n);return e().then(function(){return i})};r.prototype.promisify=function(e,t){var n=this;return function(){var r=n.toArgsArray(arguments);return new i(function(i,s){var o=function(e){if(e)s(e);else if(2===arguments.length)i(arguments[1]);else{var t=n.toArgsArray(arguments);i(t.slice(1))}};r.push(o);e.apply(t,r)})}};r.prototype.waitFor=function(e,t,n){var r=0;t=t?t:5e3;n=n?n:100;return new i(function(s,o){var a=function(){return i.resolve().then(function(){return e()}).then(function(e){if("undefined"==typeof e)if(r>=t)o(new Error("waited for "+r+" ms"));else{r+=n;setTimeout(a,n)}else s(e)})};a()})};e.exports=new r},function(e,t,n){"use strict";var i=n(312),r=n(354),s=n(311),o=n(352),a=function(){};a.prototype.WAIT_MS=200;a.prototype.never=function(e){throw new r("undefined"==typeof e?"must never execute":e)};a.prototype._errShouldEql=function(e,t){if(s.errorInstanceOf(t,"NeverError"))throw new Error("didn't throw err");if(e){e.message&&e.message.should.eql(t.message);e.name.should.eql(t.name)}else(null===t).should.eql(!1)};a.prototype.shouldThrow=function(e,t){var n=this;return e().then(function(){n.never()})["catch"](function(e){n._errShouldEql(t,e)})};a.prototype.shouldNonPromiseThrow=function(e,t){try{e();this.never()}catch(n){this._errShouldEql(t,n)}};a.prototype.shouldDoAndOnce=function(e,t,n){var s=this,a=!0;return new i(function(i,c){o.doAndOnce(e,t,n).then(function(e){a=!1;i(e)})["catch"](function(e){c(e)});o.timeout(s.WAIT_MS).then(function(){a&&c(new r("should have emitted event "+n))})})};a.prototype.shouldDoAndNotOnce=function(e,t,n){var i=this,r=!1;o.doAndOnce(e,t,n).then(function(){r=!0});return o.timeout(i.WAIT_MS).then(function(){r&&i.never("should not have emitted event "+n)})};e.exports=new a},function(e,t){"use strict";var n=function(e){this.name="NeverError";this.message=e};n.prototype=Object.create(Error.prototype);n.prototype.constructor=n;e.exports=n},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(356),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return e?{class_code:e.classCode,roster_id:e.rosterId,assignment_id:e.assignmentId,same_contract:e.sameContract,show_student_scores:e.showStudentScores,lock_student_work:e.lockStudentWork,hide_student_work:e.hideStudentWork}:null}},{key:"decode",value:function(e){return e?new d["default"](e.class_code,e.roster_id,e.assignment_id,e.same_contract,e.show_student_scores,e.lock_student_work,e.hide_student_work):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(147),a=s(o),c=function(){function e(t,n,i,s,o,c,l){r(this,e);this._classCode=t;this._rosterId=n;this._assignmentId=i;this._sameContract=s;this._showStudentScores=o;this._showStudentScoresUpdated=new a["default"](this);this._lockStudentWork=c;this._lockStudentWorkUpdated=new a["default"](this);this._hideStudentWork=l;this._hideStudentWorkUpdated=new a["default"](this)}i(e,[{key:"format",value:function(){return this._classCode.substr(0,3)+" "+this._classCode.substr(3)}},{key:"studentUrl",value:function(e){return e.absUrl().replace(e.url(),"/login/"+this.classCode)}},{key:"classCode",get:function(){return this._classCode}},{key:"rosterId",get:function(){return this._rosterId}},{key:"assignmentId",get:function(){return this._assignmentId}},{key:"sameContract",get:function(){return this._sameContract}},{key:"showStudentScores",get:function(){return this._showStudentScores},set:function(e){this._showStudentScores=e;this._showStudentScoresUpdated.raise(e)}},{key:"showStudentScoresUpdated",get:function(){return this._showStudentScoresUpdated}},{key:"lockStudentWork",get:function(){return this._lockStudentWork},set:function(e){this._lockStudentWork=e;this._lockStudentWorkUpdated.raise(e)}},{key:"lockStudentWorkUpdated",get:function(){return this._lockStudentWorkUpdated}},{key:"hideStudentWork",get:function(){return this._hideStudentWork},set:function(e){this._hideStudentWork=e;this._hideStudentWorkUpdated.raise(e)}},{key:"hideStudentWorkUpdated",get:function(){return this._hideStudentWorkUpdated}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"Street",get:function(){return"street"}},{key:"City",get:function(){return"city"}},{key:"State",get:function(){return"state"}},{key:"Country",get:function(){return"country"}},{key:"Zip",get:function(){return"zip"}},{key:"Virtual",get:function(){return"virtual"}},{key:"ClosedEnd",get:function(){return"closed_end"}},{key:"ClosurePointEmail",get:function(){return"closure_point_email"}}]);return e}();t.OrganizationProperties=s;var o=[{value:"school",option:"School"},{value:"university",option:"University"},{value:"large-enterprise",option:"Large Enterprise"},{value:"small-business",option:"Small/Medium Sized Business"},{value:"religious",option:"Religious Organization"},{value:"nonprofit",option:"Other Nonprofit"},{value:"other",option:"Other"}],a=function(){function e(){r(this,e)}i(e,null,[{key:"School",get:function(){return"school"}},{key:"District",get:function(){return"district"}},{key:"UserDefinedOrganizationTypes",get:function(){return o}}]);return e}();t.OrganizationTypes=a;var c=function(){function e(t,n,i,s,o,a,c,l,u){r(this,e);this._id=t;this._type=n;this._name=i;this._lat=s;this._lng=o;this._contractId=a;this._properties=c||{};this._members=l||[];this._unverifiedMembers=u||[];this._contract=void 0;this._admin=void 0}i(e,[{key:"isVerifiedFor",value:function(e){return this._members.some(function(t){return t===e})&&!this._unverifiedMembers.some(function(t){return t===e})}},{key:"markVerifiedFor",value:function(e){this._unverifiedMembers=this._unverifiedMembers.filter(function(t){return t!==e})}},{key:"_setProperty",value:function(e,t){this._properties[e]=t||null}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"isDistrict",get:function(){return this._type===a.District}},{key:"name",get:function(){return this._name}},{key:"lat",get:function(){return this._lat}},{key:"lng",get:function(){return this._lng}},{key:"contractId",get:function(){return this._contractId}},{key:"properties",get:function(){return this._properties}},{key:"members",get:function(){return this._members}},{key:"memberCount",get:function(){return this.members&&this.members.length}},{key:"unverifiedMembers",get:function(){return this._unverifiedMembers}},{key:"street",get:function(){return this._properties[s.Street]},set:function(e){this._setProperty(s.Street,e)}},{key:"city",get:function(){return this._properties[s.City]},set:function(e){this._setProperty(s.City,e)}},{key:"state",get:function(){return this._properties[s.State]},set:function(e){this._setProperty(s.State,e)}},{key:"country",get:function(){return this._properties[s.Country]},set:function(e){this._setProperty(s.Country,e)}},{key:"zip",get:function(){return this._properties[s.Zip]},set:function(e){this._setProperty(s.Zip,e)}},{key:"closedEnd",get:function(){return this._properties[s.ClosedEnd]}},{key:"closurePointEmail",get:function(){return this._properties[s.ClosurePointEmail]}},{key:"virtual",get:function(){return!!this._properties[s.Virtual]},set:function(e){this._setProperty(s.Virtual,e)}},{key:"displayLocation",get:function(){return this.city+", "+this.state+", "+this.country}},{key:"contract",get:function(){return this._contract},set:function(e){this._contract=e}},{key:"admin",get:function(){return this._admin},set:function(e){this._admin=e}}]);return e}();t["default"]=c},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){"ngInject";r(this,e);this.$mdToast=t}e.$inject=["$mdToast"];i(e,[{key:"confirm",value:function(){this.$mdToast.hide()}},{key:"dismiss",value:function(){this.$mdToast.hide()}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/components/snackbar/snackbar.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!1,hideDelay:i?3e3:0,locals:{message:n,action:i?"GOT IT":null},bindToController:!0})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(293)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){r(this,e)}i(e,null,[{key:"SessionQuestion",get:function(){return"session_question"}},{key:"SessionWork",get:function(){return"session_work"}},{key:"SessionWatch",get:function(){return"session_watch"}},{key:"AssignmentsList",get:function(){return"assignments_list"}},{key:"RostersList",get:function(){return"rosters_list"}},{key:"PlaceTextbox",get:function(){return"place_textbox"}},{key:"PlaceFitb",get:function(){return"place_fitb"}},{key:"PlaceSline",get:function(){return"place_sline"}},{key:"PlaceSticker",get:function(){return"place_sticker"}},{key:"PlaceStickerWand",get:function(){return"place_sticker_wand"}},{key:"ContentStickers",get:function(){return"content_stickers"}},{key:"AssignmentEdit",get:function(){return"assignment_edit"}},{key:"AssignmentRosters",get:function(){return"assignment_rosters"}},{key:"AssignmentTeacherFeedback",get:function(){return"assignment_teacher_feedback"}},{key:"HideStudentNames",get:function(){return"hide_student_names"}},{key:"AllowPeerHelpers",get:function(){return"allow_peer_helpers"}},{key:"ShowStudentScores",get:function(){return"show_student_scores"}},{key:"LockAssignment",get:function(){return"lock_assignment"}},{key:"HideAssignment",get:function(){return"hide_assignment"}},{key:"PlaceStickersHelpText",get:function(){return"place_stickers_help_text"}},{key:"LatestFeatures",get:function(){return"latest_features"}},{key:"CustomStickers",get:function(){return"custom_stickers"}},{key:"OrderPage",get:function(){return"order_page"}},{key:"StudentAccountBasic",get:function(){return"student_account_basic"}},{key:"StudentAccountPortfolio",get:function(){return"student_account_portfolio"}},{key:"FirstSuccess",get:function(){return"first_success"}},{key:"GivingFeedback",get:function(){return"giving_feedback"}},{key:"TeacherHelpCenter",get:function(){return"teacher_help_center"}}]);return e}();t.ViewHelps=o;var a=function(){function e(t,n,i,s,o,a,c,l){"ngInject";r(this,e);this.$mdDialog=t;this.$window=n;this.$sce=s;this._staticContentService=o;this._cacheService=a;this._viewName=l;this._index=0;this._init();this._initHotkeys(i,c)}e.$inject=["$mdDialog","$window","$scope","$sce","StaticContentService","CacheService","hotkeys","viewName"];i(e,[{key:"_init",value:function(){var e=this;this._staticContentService.getViewHelps().then(function(t){var n=t[e._viewName];e._title=n.title;e._showHelp=n.show_ask_us_anything;e._helps=s(n.helps).map(function(e){return n.helps[e]});e._helps.forEach(function(t){return t.sanitizedUrl=e.$sce.trustAsResourceUrl(t.url)});e._helps.sort(function(e,t){return e.order<t.order?-1:1})})}},{key:"_initHotkeys",value:function(e,t){var n=this;t.bindTo(e).add({combo:"left",description:"View previous item",callback:function(){n.onFirst||n.prev()}}).add({combo:"right",description:"View next item",callback:function(){n.onLast||n.next()}})}},{key:"prev",value:function(){this._index--}},{key:"next",value:function(){this._index++}},{key:"goTo",value:function(e){this._index=this.indexForId(e.title)}},{key:"indexForId",value:function(e){var t=0;this._helps.forEach(function(n,i){n.title===e&&(t=i)});return t}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"openHelpCenter",value:function(){this.$window.open("https://classkick.com/help","_blank")}},{key:"title",get:function(){return this._title}},{key:"helps",get:function(){return this._helps}},{key:"hideNavButtons",get:function(){return this.helps&&this.helps.length<2}},{key:"currentHelp",get:function(){return this.helps&&this.helps[this._index]}},{key:"currentTitle",get:function(){return this.currentHelp&&this.currentHelp.title}},{key:"currentImageSanitizedUrl",get:function(){return this.currentHelp&&this.currentHelp.sanitizedUrl}},{key:"currentImageIsYoutube",get:function(){return this.currentHelp&&this.currentHelp.url&&this.currentHelp.url.indexOf("youtube")>-1}},{key:"currentDescription",get:function(){return this.currentHelp&&this.currentHelp.desc}},{key:"onFirst",get:function(){return 0===this._index}},{key:"onLast",get:function(){return this._helps&&this._index===this._helps.length-1}},{key:"ImageHeight",get:function(){return 304}},{key:"imagesStyle",get:function(){return{transform:"translateY("+this.ImageHeight*this._index*-1+"px)"}}},{key:"showHelp",get:function(){return this._showHelp}}],[{key:"show",value:function(t,n){return t.show({clickOutsideToClose:!0,escapeToClose:!0,templateUrl:"app/components/view-help-dialog/view-help-dialog.html",controller:e,controllerAs:"ctrl",locals:{viewName:n}})}}]);return e}();t["default"]=a},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n){r(this,e);this.$mdPanel=t;this._toolbarService=n;this._openToolPanel=void 0;this._openMorePanel=void 0}i(e,[{key:"openToolPanel",value:function(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];this._openToolPanel=this._openPanel(e,t,s({templateUrl:"app/components/assignment-toolbar/panels/"+t+".html",controller:["$scope",function(e){"ngInject";e.parent=n}],panelClass:"assignment-toolbar tool-panel "+t},i))}},{key:"closeToolPanel",value:function(){if(this._openToolPanel){this._openToolPanel.then(function(e){e.close()});this._openToolPanel=null}}},{key:"openMorePanel",value:function(e){this._openMorePanel=this._openPanel(e,"more",{contentElement:".assignment-toolbar .rendered-panels .more",panelClass:"assignment-toolbar tool-panel"})}},{key:"closeMorePanel",value:function(){if(this._openMorePanel){this._openMorePanel.then(function(e){e.close()});this._openMorePanel=null}}},{key:"_openPanel",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];e.originalEvent.preventElementBlur=!0;return this.$mdPanel.open(s({id:t,escapeToClose:!0,clickOutsideToClose:!0,focusOnOpen:!0,position:this.$mdPanel.newPanelPosition().relativeTo(e.currentTarget).addPanelPosition(this.$mdPanel.xPosition.CENTER,this.$mdPanel.yPosition.BELOW),animation:this.$mdPanel.newPanelAnimation().openFrom(e.currentTarget).duration(100).closeTo(e.currentTarget).withAnimation(this.$mdPanel.animation.SCALE),onRemoving:function(){if(n._toolbarService.focusedElement){n._toolbarService.focusedElement.blur();n._toolbarService.focusedElement.focus()}}},i))}},{key:"StraightLineColor",get:function(){return"straight-line-color"}},{key:"StraightLineWidth",get:function(){return"straight-line-width"}},{key:"PenColor",get:function(){return"pen-color"}},{key:"PenWidth",get:function(){return"pen-width"}},{key:"HighlighterColor",get:function(){return"highlighter-color"}},{key:"HighlighterWidth",get:function(){return"highlighter-width"}},{key:"TextColor",get:function(){return"text-color"}},{key:"TextBackgroundColor",get:function(){return"text-background-color"}},{key:"TextBorderColor",get:function(){return"text-border-color"}},{key:"ImageMenu",get:function(){return"image-menu"}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e===Object(e)&&0!==Object.keys(e).length}function s(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach(function(e){var i=e.el,r=e.top,s=e.left;if(i.scroll&&n)i.scroll({top:r,left:s,behavior:t});else{i.scrollTop=r;i.scrollLeft=s}})}function o(e){return e===!1?{block:"end",inline:"nearest"}:r(e)?e:{block:"start",inline:"nearest"}}function a(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(r(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:(0,c["default"])(e,t));if(!n){var i=o(t);return s((0,c["default"])(e,i),i.behavior)}}t.__esModule=!0;t["default"]=void 0;var c=i(n(362)),l=a;t["default"]=l;e.exports=t["default"]},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function i(e,t){return t&&"hidden"===e?!1:"visible"!==e&&"clip"!==e}function r(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return i(n.overflowY,t)||i(n.overflowX,t)}return!1}function s(e,t,n,i,r,s,o,a){return e>s&&o>t||s>e&&t>o?0:e>=s&&n>=a||o>=t&&a>=n?s-e-i:o>t&&n>a||e>s&&a>n?o-t+r:0}t.__esModule=!0;t["default"]=void 0;var o=function(e,t){var i=t.scrollMode,o=t.block,a=t.inline,c=t.boundary,l=t.skipOverflowHiddenElements,u="function"==typeof c?c:function(e){return e!==c};if(!n(e))throw new TypeError("Invalid target");for(var d=document.scrollingElement||document.documentElement,h=[],f=e;n(f)&&u(f);){f=f.parentNode;if(f===d){h.push(f);break}(f!==document.body||!r(f)||r(document.documentElement))&&r(f,l)&&h.push(f)}for(var g=window.visualViewport?visualViewport.width:innerWidth,p=window.visualViewport?visualViewport.height:innerHeight,m=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,_=e.getBoundingClientRect(),y=_.height,k=_.width,b=_.top,S=_.right,w=_.bottom,C=_.left,E="start"===o||"nearest"===o?b:"end"===o?w:b+y/2,T="center"===a?C+k/2:"end"===a?S:C,I=[],A=0;A<h.length;A++){var x=h[A],O=x.getBoundingClientRect(),P=O.height,R=O.width,D=O.top,M=O.right,N=O.bottom,L=O.left;if("if-needed"===i&&b>=0&&C>=0&&p>=w&&g>=S&&b>=D&&N>=w&&C>=L&&M>=S)return I;var F=getComputedStyle(x),U=parseInt(F.borderLeftWidth,10),$=parseInt(F.borderTopWidth,10),q=parseInt(F.borderRightWidth,10),H=parseInt(F.borderBottomWidth,10),j=0,B=0,W="offsetWidth"in x?x.offsetWidth-x.clientWidth-U-q:0,V="offsetHeight"in x?x.offsetHeight-x.clientHeight-$-H:0;if(d===x){j="start"===o?E:"end"===o?E-p:"nearest"===o?s(v,v+p,p,$,H,v+E,v+E+y,y):E-p/2;B="start"===a?T:"center"===a?T-g/2:"end"===a?T-g:s(m,m+g,g,U,q,m+T,m+T+k,k);j=Math.max(0,j+v);B=Math.max(0,B+m);
}else{j="start"===o?E-D-$:"end"===o?E-N+H+V:"nearest"===o?s(D,N,P,$,H+V,E,E+y,y):E-(D+P/2)+V/2;B="start"===a?T-L-U:"center"===a?T-(L+R/2)+W/2:"end"===a?T-M+q+W:s(L,M,R,U,q+W,T,T+k,k);var z=x.scrollLeft,G=x.scrollTop;j=Math.max(0,Math.min(G+j,x.scrollHeight-P+V));B=Math.max(0,Math.min(z+B,x.scrollWidth-R+W));E+=G-j;T+=z-B}I.push({el:x,top:j,left:B})}return I};t["default"]=o;e.exports=t["default"]},function(e,t){"use strict";function n(e){"ngInject";return{restrict:"A",scope:{ckAutofocus:"="},link:function(t,n){t.$watch("ckAutofocus",function(t){t&&e(function(){n.focus();"select"===t&&n.select()})})}}}n.$inject=["$timeout"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",scope:{config:"=",students:"<"},link:w.link,templateUrl:"app/components/assignment-question/assignment-question.html",controller:w,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(48)["default"],a=n(68)["default"],c=n(119)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var u=n(47),d=n(274),h=l(d),f=n(153),g=n(185),p=n(117),m=l(p),v=n(365),_=n(190),y=l(_),k=function(){function e(t,n,i){s(this,e);this._prev=t;this._next=n;this._goTo=i}r(e,[{key:"next",value:function(e){return this._next(e)}},{key:"previous",value:function(e){return this._prev(e)}},{key:"goTo",value:function(e){return this._goTo(e)}}]);return e}();t.PageTraverser=k;var b=function(e){function t(e,n,i,r,a,c,l,u,d,h,f){s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,i,r,a,c,l,".assignment-question .content",void 0,void 0,d);this._traverser=u||w.DEFAULT_TRAVERSER;this._feedbacks=h;this._realOrAnonNameForStudentFunc=f||t.DefaultRealOrAnonNameForStudentFunc}a(t,e);r(t,[{key:"traverser",get:function(){return this._traverser}},{key:"feedbacks",get:function(){return this._feedbacks}},{key:"realOrAnonNameForStudentFunc",get:function(){return this._realOrAnonNameForStudentFunc}}],[{key:"DefaultRealOrAnonNameForStudentFunc",get:function(){return function(e){return e.name}}}]);return t}(u.AssignmentSheetMetadata);t.AssignmentQuestionMetadata=b;var S=function(e){function t(e){s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.ctrl=e}a(t,e);r(t,[{key:"onAdded",value:function(e){this.ctrl.helpersUpdated(e)}},{key:"onRemoved",value:function(e){this.ctrl.helpersUpdated(e)}},{key:"onChanged",value:function(e){this.ctrl.helpersUpdated(e)}}]);return t}(m["default"]),w=function(){function e(t,n,i,r,o,a,c,l,u,d,f,g,p){"ngInject";var m=this;s(this,e);this.$scope=t;this.$state=n;this.$timeout=i;this.$mdDialog=r;this.$document=o;this._authService=a;this._assignmentService=c;this._assignmentTrackingService=l;this._firebaseService=d;this._staticService=u;this._cacheService=f;this._notificationService=g;this._config=void 0;this._students=void 0;this._feedbackNotifications=[];this._loading=!0;this._loadingDialog=h["default"].show;t.$on("$destroy",function(){return m._destroy()});this._initHotkeys(t,p)}e.$inject=["$scope","$state","$timeout","$mdDialog","$document","AuthService","AssignmentService","AssignmentTrackingService","StaticService","FirebaseService","CacheService","NotificationService","hotkeys"];r(e,[{key:"_init",value:function(){this._assignmentTrackingService.target=this.target;this._loading=!1;if(this.isWorkMode||this.isFeedbackMode){var e=this.isFeedbackMode?this.target.ownerId:this.metadata.userId;this.initBanners(e)}}},{key:"onStudentPagerClose",value:function(){this._targetStudent&&this._targetStudent.id!==this.currentStudentId&&this.goToFeedbackQuestion(this._targetStudent)}},{key:"goToNextQuestion",value:function(){this.hasNextQuestion&&this.$state.go(this.$state.current.name,this.traverser.next(this),{reload:this.$state.current.name})}},{key:"goToPrevQuestion",value:function(){this.hasPrevQuestion&&this.$state.go(this.$state.current.name,this.traverser.previous(this),{reload:this.$state.current.name})}},{key:"goToPrevStudent",value:function(){var e=this.students.map(function(e){return e.id}).indexOf(this.currentStudentId),t=e-1;this.goToFeedbackQuestion(this.students[t])}},{key:"goToNextStudent",value:function(){var e=this.students.map(function(e){return e.id}).indexOf(this.currentStudentId),t=e+1;this.goToFeedbackQuestion(this.students[t])}},{key:"goToFeedbackQuestion",value:function(e){var t=this;angular.element(this.$document[0].body).hasClass("md-dialog-is-showing")||this._cacheService.getSessionData(this.assignmentId,this.rosterId,!1,!0).then(function(n){return n.hasWorkForStudent(e.id)?n:t._fetchDataForStudent(n,e.id)}).then(function(n){var i=n.workForStudent(e.id);t.$state.go(t.$state.current.name,{assignmentId:t.assignmentId,questionId:t.questionId,assignmentWorkId:i.id},{reload:t.$state.current.name})})}},{key:"_fetchDataForStudent",value:function(e,t){var n=e.fetchDataForStudent(t);this._loadingDialog(this.$mdDialog,n);return n}},{key:"hasRequest",value:function(e){var t=this;return!!this.helpRequests.requests.find(function(n){return n.helpeeId===e.id&&n.questionId===t.questionId})}},{key:"realOrAnonNameForStudent",value:function(e){return e?this.config.realOrAnonNameForStudentFunc(e):""}},{key:"_initHotkeys",value:function(e,t){var n=this;t.bindTo(e).add({combo:"left",description:"Go to previous question",callback:function(){n.isStudentGivingFeedback||n.goToPrevQuestion()}}).add({combo:"right",description:"Go to next question",callback:function(){n.isStudentGivingFeedback||n.goToNextQuestion()}}).add({combo:"up",description:"Go to the previous student",callback:function(){n.hasPrevStudent&&n.goToPrevStudent()}}).add({combo:"down",description:"Go to the next student",callback:function(){n.hasNextStudent&&n.goToNextStudent()}})}},{key:"initBanners",value:function(e){if(this.isTeacherGivingFeedback){this._helpeeStatus=this._notificationService.getUserStatusNotification(e,!0);this._helpeeStatus.updated.subscribe(this._handleHelpeeStatus,this);this._helpeeStatus.start()}if(!this._helpersNotification){var t=this.target.isWork?this.target.assignment:this.target;this._helpersNotification=this._notificationService.getHelpersNotification(t,e);this._helpersNotificationObserver=new S(this);this._helpersNotification.helpers.subscribe(this._helpersNotificationObserver);this._helpersNotification.start()}this.feedbacks&&this.feedbacks.updated.subscribe(this._handleFeedbackAdded,this)}},{key:"_handleFeedbackAdded",value:function(e){var t=this,n=e.questionId,i=this.currentQuestion&&this.currentQuestion.id;i!==n&&!function(){var i=e.mostRecent;t._feedbackNotifications=[].concat(c(t._feedbackNotifications.filter(function(e){return e.questionId!==n})),[e]);t.$timeout(function(){t._feedbackNotifications=t._feedbackNotifications.filter(function(e){return e.questionId!==n||e.mostRecent.isAfter(i)})},4e3)}()}},{key:"questionNumber",value:function(e){return this.target.questionNumberForId(e)}},{key:"_handleHelpeeStatus",value:function(e){if(e.online&&e.questionId&&e.questionId===this.questionId){var t=this.students.find(function(t){return t.id===e.userId});this._studentHelpeeName=this.students&&t?this.realOrAnonNameForStudent(t):""}else this._studentHelpeeName=""}},{key:"helpersUpdated",value:function(){this.setHelpingMessage()}},{key:"setHelpingMessage",value:function(){var e=this,t=[],n=!1;this.helpers.forEach(function(i){if(e.questionId===i.questionId&&e.assignmentId===i.assignmentId){if(e.metadata.userId===i.id)return;if(i.role===g.UserRoles.STUDENT){var r=void 0;r=e.isStudentGivingFeedback?e.anonAnimalNameForHelper(i.id):e.realOrAnonNameForStudent(i);t.push(r)}else e.isTeacherGivingFeedback||(n=!0)}});this._teacherIsHelping=n;this._studentMessageConjugation=v.Helpers.formatHelpersConjugation(t);this._studentHelperMessage=v.Helpers.formatHelpersList(t);this.$timeout(function(){})}},{key:"anonAnimalNameForHelper",value:function(e){var t=y["default"].generateForHelper(""+this.questionId+e);return t.display.toLowerCase()}},{key:"onQuestionPagerClose",value:function(){this.shouldGoToNewQuestion&&this.$state.go(this.$state.current.name,this.traverser.goTo(this),{reload:this.$state.current.name})}},{key:"_destroy",value:function(){this._helpeeStatus&&this._helpeeStatus.updated.unsubscribe(this._handleHelpeeStatus,this);this._helpersNotification&&this._helpersNotification.helpers.unsubscribe(this._helpersNotificationObserver);this.feedbacks&&this.feedbacks.updated.unsubscribe(this._handleFeedbackAdded,this)}},{key:"config",get:function(){return this._config},set:function(e){this._config=e;this._init()}},{key:"helpers",get:function(){return this._helpersNotification.helpers}},{key:"loading",get:function(){return this._loading}},{key:"index",get:function(){return this.config&&this.config.index?this.config.index:0}},{key:"currentQuestionNumber",get:function(){return this.index+1}},{key:"numberOfQuestions",get:function(){return this.target?this.target.isWork?this.target.assignment.questions.length:this.target.questions.length:0}},{key:"currentPagerDisplay",get:function(){return this.currentQuestionNumber+"/"+this.numberOfQuestions}},{key:"hasNextQuestion",get:function(){return this.currentQuestionNumber<this.numberOfQuestions}},{key:"hasPrevQuestion",get:function(){return this.index>0}},{key:"metadata",get:function(){return this.config&&this.config.metadata}},{key:"target",get:function(){return this.config&&this.config.target}},{key:"questions",get:function(){return this.target?this.target.isWork?this.target.assignment.questions:this.target.questions:[]}},{key:"assignmentId",get:function(){return this.target&&this.target.isWork?this.target.assignment.id:this.target.id}},{key:"questionId",get:function(){return this.config&&this.config.questionId}},{key:"rosterId",get:function(){return this.target&&this.target.rosterId}},{key:"students",get:function(){return this._students}},{key:"userId",get:function(){return this.metadata&&this.metadata.userId}},{key:"role",get:function(){return this.metadata&&this.metadata.role}},{key:"intent",get:function(){return this.metadata&&this.metadata.intent}},{key:"currentStudentId",get:function(){return this.target&&this.target.ownerId}},{key:"currentStudent",get:function(){var e=this;return this.students&&this.currentStudentId&&this.students.find(function(t){return t.id===e.currentStudentId})},set:function(e){e.id!==this.currentStudentId&&(this._targetStudent=e)}},{key:"helpRequests",get:function(){return this.config&&this.config.helpRequests}},{key:"traverser",get:function(){return this.config.traverser||e.DEFAULT_TRAVERSER}},{key:"hasPrevStudent",get:function(){return this.students&&this.students[0]&&this.students[0].id!==this.currentStudentId}},{key:"hasNextStudent",get:function(){return this.students&&this.students.length>0&&this.students[this.students.length-1].id!==this.currentStudentId}},{key:"nextQuestionId",get:function(){return this.target.questionIdForIndex(this.index+1)}},{key:"prevQuestionId",get:function(){return this.target.questionIdForIndex(this.index-1)}},{key:"nextQuestionIndex",get:function(){return this.index+1}},{key:"prevQuestionIndex",get:function(){return this.index-1}},{key:"isMobile",get:function(){return this._staticService.isMobile}},{key:"showPaginator",get:function(){return!this.isStudentGivingFeedback}},{key:"isFeedbackMode",get:function(){return this.intent===f.ElementIntents.FEEDBACK}},{key:"isWorkMode",get:function(){return this.intent===f.ElementIntents.WORK}},{key:"isStudent",get:function(){return this.role===g.UserRoles.STUDENT}},{key:"isStudentGivingFeedback",get:function(){return this.isFeedbackMode&&this.isStudent}},{key:"isTeacherGivingFeedback",get:function(){return this.isFeedbackMode&&this.role===g.UserRoles.TEACHER}},{key:"showStudentPaginator",get:function(){return!!(this.students&&this.students.length>1)}},{key:"feedbacks",get:function(){return this.config&&this.config.feedbacks}},{key:"feedbackNotifications",get:function(){return this._feedbackNotifications}},{key:"teacherIsHelping",get:function(){return this._teacherIsHelping}},{key:"studentHelpeeName",get:function(){return this._studentHelpeeName}},{key:"studentHelperMessage",get:function(){return this._studentHelperMessage}},{key:"studentMessageConjugation",get:function(){return this._studentMessageConjugation}},{key:"currentQuestion",get:function(){return this.questions[this.index]},set:function(e){e.id!==this.currentQuestion.id&&(this._targetQuestion=e)}},{key:"targetQuestionId",get:function(){return this._targetQuestion&&this._targetQuestion.id}},{key:"targetQuestionIndex",get:function(){return this.target.indexForQuestionId(this._targetQuestion.id)}},{key:"shouldGoToNewQuestion",get:function(){return this._targetQuestion&&this._targetQuestion.id!==this.currentQuestion.id&&!!this.target.questionForId(this._targetQuestion.id)}}],[{key:"link",value:function(e,t,n,i){e.$watch("config",function(e){e&&(i.config=e)});e.$watch("students",function(e){e&&(i._students=e)})}},{key:"DEFAULT_TRAVERSER",get:function(){return new k(function(e){return{assignmentId:e.assignmentId,questionId:e.prevQuestionId}},function(e){return{assignmentId:e.assignmentId,questionId:e.nextQuestionId}},function(e){return{assignmentId:e.assignmentId,questionId:e.targetQuestionId}})}}]);return e}()},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(293)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(117),u=c(l),d=n(147),h=c(d),f=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.ctrl=e}r(t,e);s(t,[{key:"onAdded",value:function(e){this.ctrl.helperAdded(e)}},{key:"onRemoved",value:function(e){this.ctrl.helperRemoved(e)}},{key:"onChanged",value:function(e){this.ctrl.helperAdded(e)}}]);return t}(u["default"]),g=function(){function e(t){o(this,e);this._list=t}s(e,[{key:"list",get:function(){return this._list},set:function(e){this._list=e}},{key:"helpingMessage",get:function(){return e.formatHelpingMessage(this._list)}}],[{key:"formatHelpingMessage",value:function(t){var n=e.formatHelpersConjugation(t),i=e.formatHelpersList(t.map(function(e){return e.name}));return i+" "+n}},{key:"formatHelpersConjugation",value:function(e){return e.length>1?"are helping":"is helping"}},{key:"formatHelpersList",value:function(e){if(e.length>1){var t=e[e.length-1];return e.slice(0,-1).join(", ")+" and "+t+" "}return 1===e.length?e[0]+" ":null}}]);return e}();t.Helpers=g;var p=function(){function e(t,n){o(this,e);this._helpersNotification=t;this._filterFunc=n||this.DEFAULT_FILTER_FUNC;this._helpers={};this._selfHelper=null;this._updated=new h["default"](this)}s(e,[{key:"start",value:function(){this._helpersObserver=new f(this);this._helpersNotification.helpers.subscribe(this._helpersObserver);this._helpersNotification.start()}},{key:"stop",value:function(){this._helpersNotification.helpers.unsubscribe(this._helpersObserver);this._helpersNotification.stop()}},{key:"helperAdded",value:function(e){if(this._filterFunc(e)){this._remove(e);this._add(e)}}},{key:"helperRemoved",value:function(e){this._filterFunc(e)&&this._remove(e)}},{key:"_add",value:function(e){var t=this._helpers[e.questionId]||new g([]);t.list.some(function(t){return t.id===e.id})||t.list.push(e);this._helpers[e.questionId]=t;this._raiseUpdated()}},{key:"_remove",value:function(e){var t=this;angular.forEach(this._helpers,function(n,i){n.list=n.list.filter(function(t){return t.id!==e.id});0===n.list.length&&delete t._helpers[i]});this._raiseUpdated()}},{key:"_raiseUpdated",value:function(){this.updated.raise()}},{key:"DEFAULT_FILTER_FUNC",get:function(){return function(){return!0}}},{key:"notification",get:function(){return this._helpersNotification}},{key:"helpers",get:function(){return this._helpers}},{key:"hasHelpers",get:function(){return this.size>0}},{key:"helpersHelpCount",get:function(){var e=0;angular.forEach(this.helpers,function(t){e+=t.list.length});return e}},{key:"size",get:function(){return a(this._helpers).length}},{key:"updated",get:function(){return this._updated}},{key:"selfHelper",get:function(){return this._selfHelper},set:function(e){if(!angular.equals(e,this.selfHelper)){this._selfHelper&&this._remove(this._selfHelper);this._selfHelper=e;this._selfHelper&&this._add(this._selfHelper)}}}]);return e}();t["default"]=p},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",scope:{saveState:"="},templateUrl:"app/components/saving-indicator/saving-indicator.html",link:l.link,controller:l,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var a=n(367),c=o(a),l=function(){function e(t){s(this,e);this.$timeout=t;this._fadeCopyTimeout=void 0;this._saveState=""}e.$inject=["$timeout"];r(e,[{key:"saveState",get:function(){return this._saveState},set:function(e){var t=this;this._fadeCopyTimeout&&this.$timeout.cancel(this._fadeCopyTimeout);e===this.SAVED&&(this._fadeCopyTimeout=this.$timeout(function(){t._saveState=void 0;t._fadeCopyTimeout=void 0},3e3));this._saveState=e}},{key:"SAVED",get:function(){return c["default"].SAVED}},{key:"UNSAVED",get:function(){return c["default"].UNSAVED}},{key:"SAVE_ERROR",get:function(){return c["default"].SAVE_ERROR}},{key:"saveMessage",get:function(){return this.saveState===this.SAVED?"Saved":this.saveState===this.UNSAVED?"Saving...":this.saveState===this.SAVE_ERROR?"Unable to save":""}}],[{key:"link",value:function(e,t,n,i){e.$watch("saveState",function(e){i.saveState=e})}}]);return e}();t.SavingIndicatorDirectiveController=l},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"SAVED",get:function(){return"saved"}},{key:"UNSAVED",get:function(){return"unsaved"}},{key:"SAVE_ERROR",get:function(){return"save-error"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t){"use strict";function n(){return{require:"ngModel",restrict:"A",link:function(e,t,n,i){t.bind("change",function(e){var t=e.target.files,n=t[0];i.$setViewValue(n)})}}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t){"use strict";function n(e){"ngInject";return{priority:-100,restrict:"A",link:function(t,n,i){n.ready(function(){var n=e(i.ngReady);n(t)})}}}n.$inject=["$parse"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t,n){"use strict";function i(){return{restrict:"E",require:"ngModel",scope:{source:"="},templateUrl:"app/components/image-cropper/image-cropper.html",link:p.link,controller:p,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var a=n(146),c=o(a),l=n(212),u=o(l),d=n(144),h=o(d),f=n(151),g=o(f),p=function(){function e(t,n,i,r){"ngInject";var o=this;s(this,e);this.$window=t;this.$timeout=i;this.$scope=n;this._imageEditService=r;this._svg=void 0;this._snap=void 0;this._imageContainer=void 0;this._cropContainer=void 0;this._ngModel=void 0;this._size=void 0;this._padding=new c["default"](8,0);this._maxImageSize=void 0;this._imageSize=void 0;this._image=void 0;this._crop=void 0;this.$scope.$on("$destroy",function(){return o._destroy()});this._resizeDebouncer=new g["default"](50,750,function(){o.resize()});this._anonTickResize=function(){return o._resizeDebouncer.tick()};angular.element(this.$window).on("resize",this._anonTickResize)}e.$inject=["$window","$scope","$timeout","ImageEditService"];r(e,[{key:"waitForLayoutComplete",value:function(){var e=this;return this.$timeout(function(){},10,!1).then(function(){return e.$timeout(function(){},10,!1)}).then(function(){return e.$timeout(function(){},10,!1)}).then(function(){return e.$timeout(function(){},10,!1)}).then(function(){return e.$timeout(function(){},10)})}},{key:"render",value:function(){var e=this;this.resize();this._maxImageSize=this._size.minus(this._padding.times(2));this._cleanElements();this._source&&this._imageEditService.imageLoaded(this._source).then(function(t){e._imageSize=new c["default"](t.naturalWidth,t.naturalHeight);e._crop=new u["default"](e._size,t.src,e._imageSize,e._padding);e._crop.render(e._cropContainer,!0,!0,{absolutePosition:e._offset,inverseScaleFactor:1});e._ngModel.$viewValue&&e._crop.setSelection(e._ngModel.$viewValue);e._crop.previewChanged.subscribe(e._onCropChanged,e);e._onCropChanged(e._crop)})}},{key:"resize",value:function(){if(this._svg){this._size=new c["default"](this._svg.width(),this._svg.height());this._offset=h["default"].fromOffset(this._svg.offset());this._crop&&this._crop.resize(this._size,this._offset)}}},{key:"_onCropChanged",value:function(e){this.ngModelValue=e.crop()}},{key:"_destroy",value:function(){angular.element(this.$window).off("resize",this._anonTickResize);this._cleanElements()}},{key:"_cleanElements",value:function(){if(this._crop){this._crop.previewChanged.unsubscribe(this._onCropChanged,this);this._crop.remove();this._crop.cleanUp();this._crop=null}}},{key:"svg",set:function(e){this._svg=e;this._snap=new Snap(e[0]);this._imageContainer=this._snap.select(".image");this._cropContainer=this._snap.select(".crop")}},{key:"ngModel",set:function(e){var t=this;this._ngModel=e;this._ngModel.$render=function(){t._crop&&t._crop.setSelection(t._ngModel.$viewValue)}}},{key:"ngModelValue",set:function(e){this._ngModel.$setViewValue(e)}},{key:"source",set:function(e){var t=this;this._source=e;this.waitForLayoutComplete().then(function(){return t.render()})}}],[{key:"link",value:function(e,t,n,i){var r=e.ctrl;r.svg=t.find("svg");r.ngModel=i;e.$watch("source",function(e){r.source=e})}}]);return e}();t.ImageCropperDirectiveController=p},function(e,t,n){"use strict";function i(){return{restrict:"E",require:"ngModel",scope:{potentialScore:"=",readonly:"="},templateUrl:"app/components/grade-input/grade-input.html",link:f.link,controller:f,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var a=n(149),c=o(a),l=n(271),u=o(l),d=n(372),h=o(d),f=function(){function e(t,n,i){"ngInject";s(this,e);this.$q=t;this.$timeout=n;this._hotkeys=i;this._loading=!0;this._gradeInput=void 0;this._hiddenSpan=void 0;this._grade=void 0}e.$inject=["$q","$timeout","hotkeys"];r(e,[{key:"_init",value:function(){if(angular.isNumber(this.ngModelValue)){this._grade=this.ngModelValue.toString();this._setWidthFromNgModel();this._loading=!1}else if(this.ngModelValue===u["default"].UNGRADED){this._grade=this.ngModelValue;this._setWidthFromNgModel();this._loading=!1}}},{key:"_isValid",value:function(t){return t<=e.MAX_GRADE&&this._fractionalDigits(t)<3}},{key:"_fractionalDigits",value:function(e){var t=-1!==e.indexOf(".");return t?e.split(".")[1].length:0}},{key:"refreshBorderColor",value:function(){this.$timeout(function(){})}},{key:"focusInput",value:function(){this._isEditing||this.readonly||this.gradeInput.focus();this.readonly||this.gradeInput.select()}},{key:"onUpdated",value:function(e){e&&this.gradeInput.blur();this._setWidthFromHTMLInputElement()}},{key:"_setWidthFromNgModel",value:function(){this._setInputWidth(this.gradeInput,this.grade.toString())}},{key:"_setWidthFromHTMLInputElement",value:function(){this._setInputWidth(this.gradeInput,this.gradeInput.val())}},{key:"_setInputWidth",value:function(e,t){var n=this;if(t){this.hiddenSpan.text(t);this.$timeout(function(){},100,!1).then(function(){n._setInputToSpanWidth(e)})}}},{key:"_setInputToSpanWidth",value:function(e){var t=this.hiddenSpan.width()+5;e.width(t)}},{key:"_initHotkeys",value:function(e,t){var n=this;t.bindTo(e).add({combo:"g",description:"Focus grading input",callback:function(e){n.focusInput(e)}})}},{key:"GRADE_INPUT_SELECTOR",get:function(){return".grade-input"}},{key:"HIDDEN_SPAN_SELECTOR",get:function(){return".hidden-grade-span"}},{key:"POINT_VALUE_TOOLTIP_MESSAGE",get:function(){return"Change potential grade for this slide"}},{key:"EDITING_SCORE_TOOLTIP_MESSAGE",get:function(){return"Give student grade for this slide"}},{key:"VIEWING_SCORE_TOOLTIP_MESSAGE",get:function(){return"Your grade for this slide"}},{key:"potentialScore",get:function(){return this._potentialScore},set:function(e){this._potentialScore=e}},{key:"potentialScoreDisplay",get:function(){return this.hasPotentialScore?"/ "+this.potentialScore:""}},{key:"hasPotentialScore",get:function(){return angular.isNumber(this.potentialScore)}},{key:"placeholder",get:function(){return this.hasPotentialScore?"--":0}},{key:"readonly",get:function(){return this._readonly},set:function(e){this._readonly=e}},{key:"ngModel",set:function(e){var t=this;this._ngModel=e;this._ngModel.$render=function(){return t._init()}}},{key:"ngModelValue",get:function(){return this._ngModel.$viewValue}},{key:"hiddenSpan",get:function(){return this._hiddenSpan}},{key:"gradeInput",get:function(){return this._gradeInput}},{key:"grade",get:function(){return this._grade===u["default"].UNGRADED?"":this._grade},set:function(e){if(""!==e){if("."===e){e="0.";this.gradeInput.val(e)}if(this._isValid(e)){this._grade=e;this._ngModel.$setViewValue(parseFloat(e));this._setWidthFromHTMLInputElement()}}else{this._grade=u["default"].UNGRADED;this._ngModel.$setViewValue(this._grade);this._setWidthFromHTMLInputElement()}}},{key:"styles",get:function(){return this._loading?this.loadingStyles:this.hasPotentialScore?this._isEditing?void 0:this.scoredPointsStyles:this.pointValueStyles}},{key:"tooltipMessage",get:function(){return this.hasPotentialScore?this.readonly?this.VIEWING_SCORE_TOOLTIP_MESSAGE:this.EDITING_SCORE_TOOLTIP_MESSAGE:this.POINT_VALUE_TOOLTIP_MESSAGE}},{key:"loadingStyles",get:function(){return{"border-color":"transparent",color:"transparent","background-color":"transparent"}}},{key:"pointValueStyles",get:function(){return{"border-color":this._isEditing?c["default"].CK_GREEN:c["default"].BORDER_GREY}}},{key:"scoredPointsStyles",get:function(){var e=this.currentScore,t=h["default"].colorForScore(e),n=h["default"].textColorForScore(e);return{"border-color":t||c["default"].BORDER_GREY,"background-color":t||"white",color:n}}},{key:"currentScore",get:function(){return parseFloat(this._grade)/this.potentialScore}},{key:"_isEditing",get:function(){return!this.readonly&&this.gradeInput&&this.gradeInput.is(":focus")}}],[{key:"link",value:function(e,t,n,i){var r=e.ctrl;r.ngModel=i;r._gradeInput=t.find(r.GRADE_INPUT_SELECTOR);r._hiddenSpan=t.find(r.HIDDEN_SPAN_SELECTOR);e.$watch("readonly",function(e){r.readonly=e});e.$watch("potentialScore",function(e){angular.isNumber(e)&&(r.potentialScore=e)});r._initHotkeys(e,r._hotkeys)}},{key:"MAX_GRADE",get:function(){return 100}}]);return e}();t.GradeInputDirectiveController=f},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(149),a=s(o),c=function(){function e(){r(this,e)}i(e,null,[{key:"colorForScore",value:function(t){return t>=e.MEETS?a["default"].CK_GRADING_MEETS:t>=e.APPROACHING?a["default"].CK_GRADING_APPROACHING:t>=e.BELOW?a["default"].CK_GRADING_BELOW:void 0}},{key:"colorClassForScore",value:function(t){return t>=e.MEETS?"meets":t>=e.APPROACHING?"approaches":t>=e.BELOW?"below":void 0}},{key:"textColorForScore",value:function(e){return angular.isNumber(e)&&!isNaN(e)?a["default"].CK_ELEMENT_WHITE:a["default"].CK_HEADER_GREY}},{key:"EXCEEDS",get:function(){return.9}},{key:"MEETS",get:function(){return.8}},{key:"APPROACHING",get:function(){return.6}},{key:"BELOW",get:function(){return 0}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t){"use strict";function n(e){"ngInject";return function(t,n,i){t.$watch(function(e){return e.$eval(i.compile)},function(i){n.html(i);e(n.contents())(t)})}}n.$inject=["$compile"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t,n){"use strict";function i(){return{restrict:"E",scope:{helpRequests:"=",showHand:"<"},templateUrl:"app/components/help-request-indicator/help-request-indicator.html",link:o.link,controller:o,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var o=function(){function e(t,n){"ngInject";var i=this;s(this,e);this.$timeout=n;this._helpRequestView=null;this._showHand=!1;t.$on("$destroy",function(){return i._destroy()})}e.$inject=["$scope","$timeout"];r(e,[{key:"_onUpdate",value:function(){this.$timeout(function(){})}},{key:"_destroy",value:function(){this.helpRequestSet=null}},{key:"showHand",get:function(){return this._showHand},set:function(e){this._showHand=e}},{key:"helpRequestView",get:function(){return this._helpRequestView},set:function(e){if(this._helpRequestView){this._helpRequestView.created.unsubscribe(this._onUpdate,this);this._helpRequestView.resolved.unsubscribe(this._onUpdate,this);this._helpRequestView.canceled.unsubscribe(this._onUpdate,this)}this._helpRequestView=e;if(this._helpRequestView){this._helpRequestView.created.subscribe(this._onUpdate,this);this._helpRequestView.resolved.subscribe(this._onUpdate,this);this._helpRequestView.canceled.subscribe(this._onUpdate,this)}}},{key:"count",get:function(){return this._helpRequestView?this._helpRequestView.total:"-"}}],[{key:"link",value:function(e){var t=e.ctrl;e.$watch("helpRequests",function(e){t.helpRequestView=e});e.$watch("showHand",function(e){t.showHand=e})}}]);return e}();t.HelpRequestIndicatorDirectiveController=o},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",scope:{helpInboxMetadata:"=",onSelect:"&"},templateUrl:"app/components/help-inbox/help-inbox.html",link:m.link,controller:m,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var a=n(189),c=n(191),l=o(c),u=n(286),d=o(u),h=n(274),f=o(h),g=function(){function e(){s(this,e)}r(e,null,[{key:"TEACHER",get:function(){return"helpInboxTeacherType"}},{key:"STUDENT",get:function(){return"helpInboxStudentType"}},{key:"STUDENT_ACCOUNT",get:function(){return"helpInboxStudentAccountType"}}]);return e}();t.HelpInboxType=g;var p=function(){function e(t,n,i,r){s(this,e);this._helpRequestSet=t;this._studentsMap=n;this._studentWorksMap=i;this._type=r}r(e,[{key:"helpRequestSet",get:function(){return this._helpRequestSet}},{key:"studentsMap",get:function(){return this._studentsMap}},{key:"studentWorksMap",get:function(){return this._studentWorksMap}},{key:"type",get:function(){return this._type}}]);return e}();t.HelpInboxMetadata=p;var m=function(){function e(t,n,i,r,o,a,c){"ngInject";s(this,e);this.$q=t;this.$scope=n;this.$timeout=i;this.$mdDialog=r;this.$mdToast=o;this._helpRequestService=a;this._cacheService=c;this._studentsMap=void 0;this._studentWorksMap=void 0;this._type=void 0;this._unresolvedRequestSet=void 0;this._unresolvedHelpRequestSet=void 0;this._unresolvedCheckRequestSet=void 0;this._unresolvedChatRequestSet=void 0;this._user=void 0;this._confirmDialog=d["default"].show;this._loadingDialog=f["default"].show}e.$inject=["$q","$scope","$timeout","$mdDialog","$mdToast","HelpRequestService","CacheService"];r(e,[{key:"getQuestionNumber",value:function(e){var t=this._studentWorksMap.values().next().value;return t&&t.indexForQuestionId(e.questionId)+1}},{key:"giveFeedbackTo",value:function(e){this.$scope.onSelect({request:e})}},{key:"studentNameForStudentId",value:function(e){return this._studentsMap.get(e).name}},{key:"clearHands",value:function(){var e=this;this._confirmDialog(this.$mdDialog,"Are you sure you want to clear all hands?").then(function(){return e._cacheService.getUser()}).then(function(t){var n=e.$q.all(e.unresolvedRequests.map(function(n){var i=e._studentWorksMap.get(n.helpeeId),r=i.questionForId(n.questionId);return e._helpRequestService.lowerHand(n,r,t)}));e._loadingDialog(e.$mdDialog,n);
return n}).then(function(){e.$mdToast.show(e.$mdToast.simple().textContent("Hands cleared").position("bottom right"))})}},{key:"isTeacher",get:function(){return this._type===g.TEACHER}},{key:"unresolvedRequestSet",get:function(){return this._unresolvedRequestSet}},{key:"unresolvedRequests",get:function(){return this._unresolvedRequestSet&&this._unresolvedRequestSet.requests}},{key:"unresolvedHelpRequests",get:function(){return this._unresolvedHelpRequestSet&&this._unresolvedHelpRequestSet.requests}},{key:"unresolvedCheckRequests",get:function(){return this._unresolvedCheckRequestSet&&this._unresolvedCheckRequestSet.requests}},{key:"unresolvedChatRequests",get:function(){return this._unresolvedChatRequestSet&&this._unresolvedChatRequestSet.requests}},{key:"hasUnresolvedRequests",get:function(){var e=this.unresolvedRequests;return e&&e.length>0}},{key:"hasUnresolvedHelpRequests",get:function(){var e=this.unresolvedHelpRequests;return e&&e.length>0}},{key:"hasUnresolvedCheckRequests",get:function(){var e=this.unresolvedCheckRequests;return e&&e.length>0}},{key:"hasUnresolvedChatRequests",get:function(){var e=this.unresolvedChatRequests;return e&&e.length>0}},{key:"unresolvedRequestsCount",get:function(){return this.unresolvedRequests&&this.unresolvedRequests.length}},{key:"unresolvedHelpRequestsCount",get:function(){return this.unresolvedHelpRequests&&this.unresolvedHelpRequests.length}},{key:"unresolvedCheckRequestsCount",get:function(){return this.unresolvedCheckRequests&&this.unresolvedCheckRequests.length}},{key:"unresolvedChatRequestsCount",get:function(){var e=this.unresolvedChatRequests;return e&&e.length}},{key:"isTeacherHelpInbox",get:function(){return this._type===g.TEACHER}},{key:"isStudentHelpInbox",get:function(){return this.isAnonStudent||this.isProStudent}},{key:"isAnonStudent",get:function(){return this._type===g.STUDENT}},{key:"isProStudent",get:function(){return this._type===g.STUDENT_ACCOUNT}},{key:"isStudentAccountHelpInbox",get:function(){return this._type===g.STUDENT_ACCOUNT}},{key:"shouldShowChat",get:function(){return this.isTeacher}},{key:"explanation",get:function(){return this._type===g.STUDENT||this._type===g.STUDENT_ACCOUNT?"Your classmates need help!":this._type===g.TEACHER?"Your students need help!":void 0}}],[{key:"link",value:function(e,t,n,i){e.$watch("helpInboxMetadata",function(e){if(angular.isDefined(e)){i._type=e.type;i._studentsMap=e.studentsMap;i._studentWorksMap=e.studentWorksMap;i._unresolvedRequestSet=e.helpRequestSet.createChild(l["default"].FILTER_FUNC_TYPES_UNRESOLVED(e.type===g.TEACHER?a.HelpRequestTypes.ALL:[a.HelpRequestTypes.HELP,a.HelpRequestTypes.CHECK]));i._unresolvedHelpRequestSet=e.helpRequestSet.createChild(l["default"].FILTER_FUNC_TYPES_UNRESOLVED([a.HelpRequestTypes.HELP]));i._unresolvedCheckRequestSet=e.helpRequestSet.createChild(l["default"].FILTER_FUNC_TYPES_UNRESOLVED([a.HelpRequestTypes.CHECK]));i._unresolvedChatRequestSet=e.helpRequestSet.createChild(l["default"].FILTER_FUNC_TYPES_UNRESOLVED([a.HelpRequestTypes.CHAT]))}})}}]);return e}()},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",require:"ngModel",scope:{},templateUrl:"app/components/audio-capture-directive/audio-capture.html",link:p.link,controller:p,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var a=n(149),c=o(a),l=n(377),u=o(l),d=n(378),h=o(d),f=n(210),g=o(f),p=function(){function e(t,n,i,r,o,a){"ngInject";var c=this;s(this,e);this.$q=n;this.$timeout=i;this.$interval=r;this._ngModel=null;this.capturedAudioFile=void 0;this.supportedMimeTypes=g["default"].AudioSupport().join(",");this._mediaService=o;this._assignmentTrackingService=a;this._currentState=this.SAVING;if(u["default"].isSupported){this._audioTimer=new h["default"](r);this._audioRecorder=new u["default"](n);this._audioRecorder.init().then(function(){c._currentState=c.START;c.$timeout(function(){},0)})["catch"](function(){c._currentState=c.BLOCKED;c.$timeout(function(){},0)})}else this._currentState=this.NOT_SUPPORTED;t.$on("$destroy",function(){return c._destroy()})}e.$inject=["$scope","$q","$timeout","$interval","MediaService","AssignmentTrackingService"];r(e,[{key:"start",value:function(){var e=this;this._audioRecorder.start().then(function(){e._audioTimer.start();e._currentState=e.RECORDING})}},{key:"save",value:function(){var e=this;this._audioRecorder.save().then(function(t){e.ngModelValue=t;e._currentState=e.START;e._audioTimer.stop()})}},{key:"openFileSelect",value:function(){angular.element(".import-audio-input").click()}},{key:"audioFileChanged",value:function(){var e=angular.element(".import-audio-form");e.length>0&&angular.element(".import-audio-form")[0].reset();if(this.capturedAudioFile&&this.capturedAudioFile.size<this.MAX_FILE_BYTES){this.ngModelValue=this.capturedAudioFile;this._currentState=this.START}else this._currentState=this.FILE_TOO_LARGE}},{key:"_destroy",value:function(){if(this._audioRecorder){this._audioRecorder.destroy();this._audioRecorder=null}this._audioTimer&&this._audioTimer.stop()}},{key:"ngModel",set:function(e){this._ngModel=e}},{key:"ngModelValue",set:function(e){this._ngModel.$setViewValue(e)}},{key:"START",get:function(){return"start"}},{key:"RECORDING",get:function(){return"recording"}},{key:"SAVING",get:function(){return"saving"}},{key:"NOT_SUPPORTED",get:function(){return"not_supported"}},{key:"BLOCKED",get:function(){return"blocked"}},{key:"FILE_TOO_LARGE",get:function(){return"file_too_large"}},{key:"MAX_FILE_BYTES",get:function(){return 1e7}},{key:"time",get:function(){return this._audioTimer&&this._audioTimer.time}},{key:"audioStyle",get:function(){return{color:this._currentState===this.RECORDING?c["default"].CK_GREEN:c["default"].CK_HEADER_GREY}}},{key:"currentState",get:function(){return this._currentState},set:function(e){this._currentState=e}}],[{key:"link",value:function(e,t,n,i){var r=e.ctrl;r.ngModel=i}}]);return e}();e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){r(this,e);this.$q=t;this._mediaRecorder=null;this._mediaConstraints={audio:!0,video:!1}}i(e,[{key:"init",value:function(){var e=this;return this._getUserMedia().then(function(t){e._promise=e._initRecorder(t)})}},{key:"_getUserMedia",value:function(){var e=this;return navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(this._mediaConstraints):this.$q(function(t,n){e.setGetUserMedia();navigator.getUserMedia(e._mediaConstraints,function(e){return t(e)},function(e){return n(e)})})}},{key:"_initRecorder",value:function(e){var t=this;return this.$q(function(n){t._mediaRecorder=new MediaRecorder(e);var i=[];t._mediaRecorder.ondataavailable=function(e){i.push(e.data)};t._mediaRecorder.onstop=function(){var e=new Blob(i,{type:"audio/webm"});n(e)}})}},{key:"start",value:function(){if(this._mediaRecorder){this._mediaRecorder.start();return this.$q.resolve()}return this.$q.reject()}},{key:"save",value:function(){if(this._mediaRecorder){this._mediaRecorder.stop();return this._promise}return this.$q.reject()}},{key:"setGetUserMedia",value:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia}},{key:"destroy",value:function(){this._removeRecordingIcon()}},{key:"_removeRecordingIcon",value:function(){this._mediaRecorder&&angular.isFunction(this._mediaRecorder.stream.getTracks)&&this._mediaRecorder.stream.getTracks()[0].stop()}}],[{key:"isSupported",get:function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(220),a=s(o),c=function(){function e(t){r(this,e);this.$interval=t;this._formatPlaybackTime=a["default"].formatPlaybackTime;this._time=0;this._timer=null}i(e,[{key:"start",value:function(){var e=this;this._startTime=moment();this._timer=this.$interval(function(){var t=moment();e._time=t.diff(e._startTime,"seconds")},211)}},{key:"stop",value:function(){if(this._timer){this.$interval.cancel(this._timer);this._timer=null}}},{key:"time",get:function(){return this._formatPlaybackTime(this._time)}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",scope:!1,template:"",link:o.link,controller:o}}var r=n(19)["default"],s=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var o=function(){function e(t){"ngInject";s(this,e);this.$compile=t}e.$inject=["$compile"];r(e,null,[{key:"link",value:function(e,t,n,i){e.$watch(n.selector,function(n){var r=angular.element(n).first().clone();r.appendTo(t);i.$compile(r)(e)})}}]);return e}();e.exports=t["default"]},function(e,t){"use strict";function n(){"ngInject";return{restrict:"E",scope:!1,templateUrl:"app/components/assignment-toolbar/assignment-toolbar-item.html"}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t){"use strict";function n(){return function(e,t,n){t.bind("keydown",function(t){if(13===t.which){e.$apply(function(){e.$eval(n.ngEnter,{e:t})});t.preventDefault()}})}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t){"use strict";function n(){"ngInject";return{restrict:"A",scope:{ckSelect:"="},link:function(e,t){e.$watch("ckSelect",function(){var e=t.find(".md-select-icon"),n=angular.element('<span class="ck-select-icon"><i class="ck fa ck-carrot"></i></span>');e.replaceWith(n)})}}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t){"use strict";function n(){"ngInject";return{restrict:"A",scope:{ckIndicatorCircle:"="},link:function(e,t){var n=void 0;e.$watch("ckIndicatorCircle",function(e){if(e){n=n||angular.element('<span class="ck-indicator-circle"></i></span>');t.append(n)}})}}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t){"use strict";function n(){"ngInject";return{restrict:"A",scope:{ckDragstart:"&?",ckDragend:"&?",ckDragover:"&?",ckDragleave:"&?",ckDrop:"&?"},link:function(e,t,n){t.attr("draggable",!!e.ckDragstart);e.ckDragstart&&e.$watch("ckDragstart",function(){t.bind("dragstart",function(t){e.ckDragstart({event:t.originalEvent})})});e.ckDragend&&e.$watch("ckDragend",function(){t.bind("dragend",function(t){e.ckDragend({event:t})})});e.$watch("ckDragover",function(){t.bind("dragover",function(t){if(!e.ckDragover)return!1;e.ckDragover({event:t});return void 0})});e.ckDragleave&&e.$watch("ckDragleave",function(){t.bind("dragleave",function(t){e.ckDragleave({event:t})})});e.ckDrop&&e.$watch("ckDrop",function(){t.bind("drop",function(t){e.ckDrop({event:t.originalEvent})})})}}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t,n){"use strict";function i(){"ngInject";return{restrict:"E",scope:{config:"="},templateUrl:"app/components/assignment-thumbnail/assignment-thumbnail.html",link:Q.link,controller:Q,controllerAs:"ctrl"}}var r=n(19)["default"],s=n(39)["default"],o=n(48)["default"],a=n(68)["default"],c=n(206)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i;var u=n(117),d=l(u),h=n(233),f=l(h),g=n(230),p=l(g),m=n(386),v=l(m),_=n(249),y=l(_),k=n(219),b=l(k),S=n(222),w=l(S),C=n(266),E=l(C),T=n(268),I=l(T),A=n(130),x=l(A),O=n(155),P=l(O),R=n(262),D=l(R),M=n(264),N=l(M),L=n(171),F=l(L),U=n(255),$=l(U),q=n(258),H=l(q),j=n(260),B=l(j),W=new c([b["default"].type,w["default"].type,x["default"].type,P["default"].type,p["default"].type,y["default"].type,f["default"].type,$["default"].type,B["default"].type,N["default"].type,E["default"].type,I["default"].type]),V=new c([F["default"].type,H["default"].type,D["default"].type]),z=function(){function e(t,n,i,r,o,a,c,l){void 0===a&&(a=1);void 0===c&&(c=1);s(this,e);this._metadata={userId:i,role:r,intent:o};this._contentOpacity=a;this._workOpacity=c;this._target=t;this._questionId=n;this._questionIndex=t.indexForQuestionId(n);this._elementsToShow=l}r(e,[{key:"metadata",get:function(){return this._metadata}},{key:"target",get:function(){return this._target}},{key:"questionId",get:function(){return this._questionId}},{key:"index",get:function(){return this._questionIndex}},{key:"contentOpacity",get:function(){return this._contentOpacity}},{key:"workOpacity",get:function(){return this._workOpacity}},{key:"elementsToShow",get:function(){return this._elementsToShow}}],[{key:"NonManipulativeParents",get:function(){return W}},{key:"ManipulativeParents",get:function(){return V}}]);return e}();t.AssignmentThumbnailMetadata=z;var G=function(e){function t(e){s(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.ctrl=e}a(t,e);r(t,[{key:"onAdded",value:function(e){this.ctrl.renderOne(e)}},{key:"onRemoved",value:function(e){this.ctrl.remove(e)}},{key:"onChanged",value:function(e){this.ctrl.renderOne(e)}}]);return t}(d["default"]),Q=function(){function e(t,n,i,r){"ngInject";var o=this;s(this,e);this.$document=n;this.$timeout=i;this.$window=r;t.$on("$destroy",function(){return o._destroy()});this._svgThumbnail=null;this._config=null}e.$inject=["$scope","$document","$timeout","$window"];r(e,[{key:"_init",value:function(e){this.workOrContent&&this.workOrContent.unsubscribe(this._observer);e();this._svgThumbnail.layers.clear();if(angular.isNumber(this._index)&&this._target&&this._isInDom){this._initOpacity();this._observer=new G(this);this.workOrContent.subscribe(this._observer);this.workOrContentQuestion.start()}}},{key:"_destroy",value:function(){if(this.workOrContent){this.workOrContent.unsubscribe(this._observer);this.workOrContent.forEach(function(e){e.cleanUp()})}}},{key:"renderOne",value:function(e){if(this._elementsToShow.has(e.type)){e.render(this._svgThumbnail.layers.pickLayer(e),!1,!1,this._svgThumbnail,this._target,this._config.metadata,!0);e.visibility="inherit"}}},{key:"remove",value:function(e){e.remove&&e.remove()}},{key:"_initOpacity",value:function(){this._hasOpacity&&this._setOpacity()}},{key:"_setOpacity",value:function(){this._svgThumbnail.layers.content.attr({opacity:this._config.contentOpacity});this._svgThumbnail.layers.work.attr({opacity:this._config.workOpacity})}},{key:"element",get:function(){return this._element},set:function(e){this._element=e;this._svgThumbnail=new v["default"](this._element)}},{key:"config",set:function(e){var t=this;if(e!==this._config&&null!==e){this._setup&&this.$timeout.cancel(this._setup);this._setup=this.$timeout(function(){t._init(function(){t._config=e});t._setup=void 0},0,!1)}}},{key:"hasMetadata",get:function(){return this._config&&this._config.metadata}},{key:"_ownerId",get:function(){return this.hasMetadata?this._config.metadata.userId:""}},{key:"_role",get:function(){return this.hasMetadata?this._config.metadata.role:""}},{key:"_intent",get:function(){return this.hasMetadata?this._config.metadata.intent:""}},{key:"_index",get:function(){return this._config?this._config.index:void 0}},{key:"_target",get:function(){return this._config&&this._config.target}},{key:"_assignment",get:function(){return this._isWork?this._target.assignment:this._target}},{key:"_assignmentWork",get:function(){return this._isWork?this._target:null}},{key:"_isWork",get:function(){return this._target&&this._target.isWork}},{key:"_elementsToShow",get:function(){return this._config&&this._config.elementsToShow}},{key:"_isInDom",get:function(){return this.$document[0].body.contains(this._element[0])}},{key:"contentQuestion",get:function(){return this._assignment?this._assignment.questions[this._index]:void 0}},{key:"content",get:function(){return this.contentQuestion?this.contentQuestion.elements:void 0}},{key:"workQuestion",get:function(){return this._assignmentWork?this._assignmentWork.questionForIndex(this._index):void 0}},{key:"work",get:function(){return this.workQuestion?this.workQuestion.elements:void 0}},{key:"workOrContent",get:function(){return this._isWork?this.work:this.content}},{key:"workOrContentQuestion",get:function(){return this._isWork?this.workQuestion:this.contentQuestion}},{key:"_hasOpacity",get:function(){return angular.isNumber(this._config.contentOpacity)&&angular.isNumber(this._config.workOpacity)}}],[{key:"link",value:function(e,t,n,i){i.element=t;e.$watch("config",function(e){i.config=e})}}]);return e}()},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(387),l=a(c),u=n(154),d=a(u),h=function(e){function t(e,n,r){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.$timeout=n;this._window=angular.element(r);this._svg=e.find("svg")[0];this._snap=new Snap(this._svg);this._layers=new l["default"](this._snap);this._element=e}r(t,e);s(t,[{key:"scale",value:function(e){throw new Error("scale method should not be called on elements that are rendered in thumbnails")}},{key:"layers",get:function(){return this._layers}},{key:"absolutePosition",get:function(){throw new Error("absolutePosition getter method should not be called on elements that are rendered in thumbnails")}},{key:"inverseScaleFactor",get:function(){throw new Error("inverseScaleFactor getter method should not be called on elements that are rendered in thumbnails")}},{key:"hiddenTextInput",get:function(){throw new Error("hiddenTextInput getter should not be called on elements that are rendered in thumbnails")}}]);return t}(d["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(39)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(278),c=o(a),l=function(e){function t(e){s(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}r(t,e);return t}(c["default"]);t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(361),c=o(a),l=n(389),u=n(390),d=o(u),h=n(190),f=o(h),g=function(){function e(t,n,i,o,a,c){r(this,e);this.$scope=t;this.$timeout=n;this.$mdDialog=i;this._authService=o;this._toolbarService=a;this._mixpanelService=c;this._chatMessageConfigs=new s;this.newMessageText="";this.loading=!0}e.$inject=["$scope","$timeout","$mdDialog","AuthService","ToolbarService","MixpanelService"];i(e,[{key:"$postLink",value:function(){this.resizeTextarea();this.markAsRead()}},{key:"markAsRead",value:function(){var e=this;this._markAsReadTimeout=this.$timeout(function(){e.helpCenter.helpRequestManager.currentUserId!==e.helpCenter.helpRequestManager.helpeeId&&e.helpCenter.helpRequestManager.isHelpRequestChat&&e.helpCenter.helpRequestManager.resolve();e.helpCenter.chatMessageManager.markRead()},1e3)}},{key:"$onDestroy",value:function(){this._markAsReadTimeout&&this.$timeout.cancel(this._markAsReadTimeout)}},{key:"resizeTextarea",value:function(){var e=this;this.$timeout(function(){e.$scope.$broadcast("md-resize-textarea");e.loading=!1},400)}},{key:"sendMessage",value:function(){var e=this;if(d["default"].validateChatMessage(this.newMessageText)){var t=this.newMessageText;this.newMessageText="";this.helpCenter.sendMessage(t).then(function(){e.scrollToBottomOfChatMessages()})}}},{key:"scrollToBottomOfChatMessages",value:function(){var e=angular.element("chat-message:last-child")[0];e&&(0,c["default"])(e,!1)}},{key:"cancelSidenav",value:function(){this._toolbarService.sidenavManager.closeState()}},{key:"chatMessageConfig",value:function(e){!this._chatMessageConfigs.has(e.id)&&this._toolbarService.hasTargetIndex&&this._chatMessageConfigs.set(e.id,new l.ChatMessageConfig(e,this._authService.currentUserId,this._authService.authData.roles[0],this._toolbarService.target.ownerId,this.helpCenter.helpRequestManager.anonAnimalNameForHelpee,this.anonAnimalNameForHelper(e.userId),this._toolbarService.target.assignment.ownerId));return this._chatMessageConfigs.get(e.id)}},{key:"anonAnimalNameForHelper",value:function(e){var t=this._toolbarService.contentQuestion.id,n=f["default"].generate(""+t+e);return n?n.display:""}},{key:"helpCenter",get:function(){return this._toolbarService.helpCenter}},{key:"requestHelp",get:function(){return this.options&&this.options.requestHelp}},{key:"resolveHelp",get:function(){return this.options&&this.options.resolveHelp}},{key:"showHandLoading",get:function(){return this.helpCenter.helpRequestManager.isHelpRequestLoading}},{key:"showRaiseHand",get:function(){return this.requestHelp&&!this.helpCenter.helpRequestManager.isHelpRequestLoading&&!this.helpCenter.helpRequestManager.isHelpRequestCheck&&!this.helpCenter.helpRequestManager.isHelpRequestHelp}},{key:"showLowerHand",get:function(){return(this.resolveHelp||this.requestHelp)&&!this.helpCenter.helpRequestManager.isHelpRequestLoading&&(this.helpCenter.helpRequestManager.isHelpRequestHelp||this.helpCenter.helpRequestManager.isHelpRequestCheck)}},{key:"showHandInfo",get:function(){return!this.showHandLoading&&!this.showLowerHand&&!this.showRaiseHand}},{key:"handInfoMessage",get:function(){return this.helpCenter.helpRequestManager.isHelpRequestCheck||this.helpCenter.helpRequestManager.isHelpRequestHelp?"There's a hand up!":"No hand raised on this question"}},{key:"noChatsMessage",get:function(){return this.isTeacher?"Your student's hands will appear here!":"Your messages will appear here!"}},{key:"isTeacher",get:function(){return this._authService.authData.isTeacher}},{key:"chatMessageMaxSize",get:function(){return d["default"].ChatMessageMaxSize}}]);return e}();t["default"]={bindings:{options:"<"},templateUrl:"app/components/help-center/help-center.component.html",controller:g,controllerAs:"ctrl"};e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(185),o=function(){function e(t,n,i,s,o,a,c){r(this,e);this._current=t;this._currentUserId=n;this._role=i;this._helpeeId=s;this._anonAnimalNameForHelpee=o;this._anonAnimalNameForHelper=a;this._teacherId=c}i(e,[{key:"current",get:function(){return this._current}},{key:"currentUserId",get:function(){return this._currentUserId}},{key:"role",get:function(){return this._role}},{key:"isStudent",get:function(){return this._role&&this._role===s.UserRoles.STUDENT}},{key:"isTeacher",get:function(){return this._role&&this._role===s.UserRoles.TEACHER}},{key:"helpeeId",get:function(){return this._helpeeId}},{key:"anonAnimalNameForHelpee",get:function(){return this._anonAnimalNameForHelpee}},{key:"anonAnimalNameForHelper",get:function(){return this._anonAnimalNameForHelper}},{key:"teacherId",get:function(){return this._teacherId}}]);return e}();t.ChatMessageConfig=o;var a=function(){function e(){r(this,e)}i(e,[{key:"config",get:function(){return this._config},set:function(e){this._config=e}},{key:"prev",get:function(){return this._prev},set:function(e){this._prev=e}},{key:"current",get:function(){return this.config&&this.config.current}},{key:"next",get:function(){return this._next},set:function(e){this._next=e}},{key:"currentUserId",get:function(){return this.config&&this.config.currentUserId}},{key:"isStudent",get:function(){return this.config&&this.config.isStudent}},{key:"helpeeId",get:function(){return this.config&&this.config.helpeeId}},{key:"anonAnimalNameForHelpee",get:function(){return this.config&&this.config.anonAnimalNameForHelpee}},{key:"anonAnimalNameForHelper",get:function(){return this.config&&this.config.anonAnimalNameForHelper}},{key:"teacherId",get:function(){return this.config&&this.config.teacherId}},{key:"formatName",get:function(){return this.messageIsFromCurrentUser?"Me":this.displayName}},{key:"displayName",get:function(){var e=this.isStudent&&!this.helpeeIsCurrentUser;return e&&this.current.userId===this.helpeeId?this.anonAnimalNameForHelpee:e&&this.current.userId!==this.teacherId?this.anonAnimalNameForHelper:this.current.displayName}},{key:"messageClass",get:function(){return this.current.type+" "+this.blendingClass}},{key:"blendingClass",get:function(){return this.blendBoth?"blend-both":this.blendTop?"blend-top":this.blendBottom?"blend-bottom":""}},{key:"blendBoth",get:function(){return this.blendTop&&this.blendBottom}},{key:"blendTop",get:function(){return this.previousMessageIsFromSameUser&&this.previousMessageIsOfSameType}},{key:"blendBottom",get:function(){return this.nextMessageIsFromSameUser&&this.nextMessageIsOfSameType}},{key:"showName",get:function(){return!this.prev||this.previousMessageIsFromDifferentUser}},{key:"previousMessageIsFromDifferentUser",get:function(){return this.prev&&this.prev.userId!==this.current.userId}},{key:"previousMessageIsFromSameUser",get:function(){return this.prev&&this.prev.userId===this.current.userId}},{key:"previousMessageIsOfSameType",get:function(){return this.prev&&this.prev.type===this.current.type}},{key:"nextMessageIsFromSameUser",get:function(){return this.next&&this.next.userId===this.current.userId}},{key:"nextMessageIsOfSameType",get:function(){return this.next&&this.next.type===this.current.type}},{key:"messageIsFromCurrentUser",get:function(){return this.currentUserId===this.current.userId}},{key:"helpeeIsCurrentUser",get:function(){return this.helpeeId===this.currentUserId}},{key:"messageIsFromHelpee",get:function(){return this.helpeeId===this.current.userId}},{key:"showHand",get:function(){return this.current.isCheck||this.current.isHelp||this.current.isHandDown}},{key:"formatMessage",get:function(){if(this.current.isCheck||this.current.isHelp){var e=this.messageIsFromCurrentUser?"You":this.displayName,t=this.messageIsFromCurrentUser?"your":"their",n=this.current.isHelp?"help":"a check";return e+" raised "+t+" hand for "+n+"!"}if(this.current.isHandDown){var e=this.messageIsFromCurrentUser?"You":this.displayName,t=void 0;t=this.helpeeIsCurrentUser?"your":this.messageIsFromHelpee?"their":"a";return e+" put "+t+" hand down!"}return this.current.isMessage?this.current.text:void 0}}]);return e}();t["default"]={bindings:{config:"<",prev:"<",next:"<"},templateUrl:"app/components/chat-message/chat-message.component.html",controller:a,controllerAs:"ctrl"}},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"hasAtSign",value:function(e){return e&&e.indexOf("@")>-1}},{key:"isValidEmailLength",value:function(t){return t&&t.length>=e.EmailMinSize&&t.length<=e.EmailMaxSize}},{key:"isValidEmailFormat",value:function(t){return t&&e.EmailRegex.test(t)}},{key:"isValidEmail",value:function(t){return e.isValidEmailLength(t)&&e.isValidEmailFormat(t)}},{key:"isValidUsernameLength",value:function(t){return t&&t.length>=e.UsernameMinSize&&t.length<=e.UsernameMaxSize}},{key:"isValidUsernameFormat",value:function(t){return t&&e.UsernameRegex.test(t)}},{key:"isValidUsername",value:function(t){return e.isValidUsernameLength(t)&&e.isValidUsernameFormat(t)}},{key:"validateEmail",value:function(t){return e.isValidEmailFormat(t)?e.isValidEmailLength(t)?null:"email-length":"email-format"}},{key:"validateUsername",value:function(t){return e.isValidUsernameFormat(t)?e.isValidUsernameLength(t)?null:"username-length":"username-format"}},{key:"validateUsernameOrEmail",value:function(t){return e.hasAtSign(t)?e.validateEmail(t):e.validateUsername(t)}},{key:"isNumeric",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"validateChatMessage",value:function(t){return t.length<=e.ChatMessageMaxSize}},{key:"EmailPattern",get:function(){return"^.+@.+\\..+$"}},{key:"EmailRegex",get:function(){return new RegExp(e.EmailPattern)}},{key:"EmailMaxSize",get:function(){return 190}},{key:"EmailMinSize",get:function(){return 5}},{key:"UsernamePattern",get:function(){return"^[a-zA-Z][^@]*$"}},{key:"InviteCodePattern",get:function(){return"^[a-zA-Z\\d]+$"}},{key:"InviteCodeRegex",get:function(){return new RegExp(e.InviteCodePattern)}},{key:"UsernameRegex",get:function(){return new RegExp(e.UsernamePattern)}},{key:"UsernameMaxSize",get:function(){return 36}},{key:"UsernameMinSize",get:function(){return 2}},{key:"UserFirstNameMaxSize",get:function(){return 35}},{key:"UserLastNameMaxSize",get:function(){return 35}},{key:"ChatMessageMaxSize",get:function(){return 2e3}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(162),a=n(149),c=s(a),l=function(){function e(t){r(this,e);this.$window=t}e.$inject=["$window"];i(e,[{key:"select",value:function(e){this.onSelect({color:e})}},{key:"makeTransparent",value:function(){this.select({hex:c["default"].CK_TRANSPARENT,name:"transparent"})}},{key:"borderColor",value:function(e){return o.Colors.borderColor(e)}}]);return e}();t["default"]={bindings:{colors:"<",onSelect:"&",transparentButtonText:"@"},templateUrl:"app/components/assignment-toolbar/toolbar-color-menu.component.html",controller:l,controllerAs:"ctrl"};e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,[{key:"active",get:function(){return this._active},set:function(e){this._active=e}}]);return e}();t["default"]={bindings:{active:"="},transclude:!0,templateUrl:"app/components/ck-switch/ck-switch.component.html",controller:s,controllerAs:"ctrl"};e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){r(this,e);this.$timeout=t}e.$inject=["$timeout"];i(e,[{key:"_onUpdate",value:function(){this._countDisplay=this._feedbackList.feedbackCount;this.$timeout&&this.$timeout(function(){})}},{key:"feedbackList",set:function(e){this._feedbackList&&this._feedbackList.updated.unsubscribe(this._onUpdate,this);this._feedbackList=e;if(this._feedbackList){this._onUpdate();this._feedbackList.updated.subscribe(this._onUpdate,this)}}},{key:"countDisplay",get:function(){return angular.isDefined(this._countDisplay)?this._countDisplay:"-"}}]);return e}();t["default"]={bindings:{feedbackList:"<",showIcon:"<"},templateUrl:"app/components/feedback-indicator/feedback-indicator.component.html",controller:s,controllerAs:"ctrl"};e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n){r(this,e);this.$state=t;this._helpArticleService=n;this._query="";this._article=void 0;this._loadingAutocompleteHelpArticles=!1}e.$inject=["$state","HelpArticleService"];i(e,[{key:"goToArticle",value:function(e){this.$state.go("root.help-article",{articleId:e})}},{key:"autocompleteHelpArticles",value:function(e){var t=this;if(!e||e.length<2)return[];this._loadingAutocompleteHelpArticles=!0;return this._helpArticleService.search(e).then(function(e){t._loadingAutocompleteHelpArticles=!1;return e})}},{key:"loadingAutocompleteHelpArticles",get:function(){return this._loadingAutocompleteHelpArticles}},{key:"query",get:function(){return this._query},set:function(e){this._query=e}},{key:"article",get:function(){return this._article},set:function(e){e&&this.goToArticle(e.id)}}]);return e}();t["default"]={templateUrl:"app/components/article-autocomplete/article-autocomplete.component.html",controller:s,controllerAs:"ctrl"};e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){
function e(t){r(this,e);this.$filter=t}e.$inject=["$filter"];i(e,[{key:"initSelected",value:function(){var e=this.selectedStart.year(),t=this.selectedEnd.year();if(e===this._thisYearStartYear&&t===this._thisYearEndYear){this._thisYearSelected=!0;this._nextYearSelected=!1;this._inTwoYearsSelected=!1}else if(e===this._thisYearStartYear&&t===this._nextYearEndYear){this._thisYearSelected=!0;this._nextYearSelected=!0;this._inTwoYearsSelected=!1}else if(e===this._thisYearStartYear&&t===this._inTwoYearsEndYear){this._thisYearSelected=!0;this._nextYearSelected=!0;this._inTwoYearsSelected=!0}else{this._thisYearSelected=!0;this._nextYearSelected=!1;this._inTwoYearsSelected=!1}this.valid=!0}},{key:"currency",value:function(e){return this.$filter("currency")(e,"$",0)}},{key:"prices",get:function(){return this._prices},set:function(e){this._prices=e;if(e){this._thisYearStartYear=this.thisYear.start.year();this._thisYearEndYear=this.thisYear.end.year();this._nextYearStartYear=this.nextYear.start.year();this._nextYearEndYear=this.nextYear.end.year();this._inTwoYearsStartYear=this.inTwoYears.start.year();this._inTwoYearsEndYear=this.inTwoYears.end.year()}}},{key:"hideThisYear",get:function(){return this._hideThisYear},set:function(e){this._hideThisYear=e}},{key:"isRenewal",get:function(){return this._isRenewal},set:function(e){this._isRenewal=e;this.initSelected()}},{key:"thisYear",get:function(){return this._prices&&this._prices[0]}},{key:"nextYear",get:function(){return this._prices&&this._prices[1]}},{key:"inTwoYears",get:function(){return this._prices&&this._prices[2]}},{key:"quantity",get:function(){return this._quantity},set:function(e){this._quantity=e}},{key:"planPrice",get:function(){return this.thisYear&&this.thisYear.plan.price*this.quantity}},{key:"thisYearStartYear",get:function(){return this._thisYearStartYear}},{key:"thisYearEndYear",get:function(){return this._thisYearEndYear}},{key:"nextYearStartYear",get:function(){return this._nextYearStartYear}},{key:"nextYearEndYear",get:function(){return this._nextYearEndYear}},{key:"inTwoYearsStartYear",get:function(){return this._inTwoYearsStartYear}},{key:"inTwoYearsEndYear",get:function(){return this._inTwoYearsEndYear}},{key:"thisYearSelected",get:function(){return this._thisYearSelected},set:function(e){this._thisYearSelected=e;this.valid=!(this.thisYearAndInTwoYearsSelected||this.onlyInTwoYearsSelected||this.onlyThisYearSelectedAndFree||this.noYearSelected);this.selectedStart=this.newStart;this.selectedEnd=this.newEnd}},{key:"nextYearSelected",get:function(){return this._nextYearSelected},set:function(e){this._nextYearSelected=e;this.valid=!(this.thisYearAndInTwoYearsSelected||this.onlyInTwoYearsSelected||this.onlyThisYearSelectedAndFree||this.noYearSelected);this.selectedStart=this.newStart;this.selectedEnd=this.newEnd}},{key:"inTwoYearsSelected",get:function(){return this._inTwoYearsSelected},set:function(e){this._inTwoYearsSelected=e;this.valid=!(this.thisYearAndInTwoYearsSelected||this.onlyInTwoYearsSelected||this.onlyThisYearSelectedAndFree||this.noYearSelected);this.selectedStart=this.newStart;this.selectedEnd=this.newEnd}},{key:"thisYearAndInTwoYearsSelected",get:function(){return this._thisYearSelected&&!this._nextYearSelected&&this._inTwoYearsSelected}},{key:"onlyInTwoYearsSelected",get:function(){return!this._thisYearSelected&&!this._nextYearSelected&&this._inTwoYearsSelected}},{key:"onlyThisYearSelectedAndFree",get:function(){return this.onlyThisYearSelected&&0===this.thisYearTotal}},{key:"onlyThisYearSelected",get:function(){return this._thisYearSelected&&!this._nextYearSelected&&!this._inTwoYearsSelected}},{key:"noYearSelected",get:function(){return!this._thisYearSelected&&!this._nextYearSelected&&!this._inTwoYearsSelected}},{key:"totalPrice",get:function(){var e=0;this._thisYearSelected&&(e+=this.thisYearTotal);this._nextYearSelected&&(e+=this.nextYearTotal);this._inTwoYearsSelected&&(e+=this.inTwoYearsTotal);return e}},{key:"thisYearTotal",get:function(){return this.thisYear&&this.thisYear.total*this.quantity}},{key:"nextYearTotal",get:function(){return this.nextYear&&this.nextYear.total*this.quantity}},{key:"inTwoYearsTotal",get:function(){return this.inTwoYears&&this.inTwoYears.total*this.quantity}},{key:"thisYearIsFree",get:function(){return this.thisYear&&0===this.thisYear.total}},{key:"newStart",get:function(){return this._thisYearSelected?this.thisYear.start:this._nextYearSelected?this.nextYear.start:this._inTwoYearsSelected?this.inTwoYears.start:void 0}},{key:"newEnd",get:function(){return this._inTwoYearsSelected?this.inTwoYears.end:this._nextYearSelected?this.nextYear.end:this._thisYearSelected?this.thisYear.end:void 0}}]);return e}();t["default"]={bindings:{selectedStart:"=",selectedEnd:"=",valid:"=",quantity:"<",prices:"<",hideThisYear:"<",isRenewal:"<"},templateUrl:"app/components/select-purchase-period/select-purchase-period.component.html",controller:s,controllerAs:"ctrl"};e.exports=t["default"]},function(e,t){"use strict";function n(){return function(e,t,n){var i=[];angular.forEach(e,function(e){i.push(e)});i.sort(function(e,n){return t(e)>t(n)?1:-1});n&&i.reverse();return i}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=n;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(206)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(147),c=o(a),l=function(){function e(t,n,i,s,o,a,l,u,d,h,f,g,p,m){"ngInject";var v=this;r(this,e);this.$q=t;this.$rootScope=n;this.$timeout=i;this.$window=a;this.$location=l;this.$log=u;this.$http=s;this._firebaseService=h;this._authService=p;this._breadcrumbService=f;this._googleAnalyticsService=m;this._platformHeaderService=d;this._environment=o;this._state=e.STATE_LOADING;this._whenReadyDeferred=t.defer();this._whenReady=this._whenReadyDeferred.promise;this._stateChanged=new c["default"](this);this._anonMaintenanceCallback=function(e){v._maintenanceCallback(e)};this._isDisplayingSystemDowntime=!1;this._setUpOnBeforeUnload();this.$rootScope.$on("$destroy",function(){return v._destroy()})}e.$inject=["$q","$rootScope","$timeout","$http","environment","$window","$location","$log","PlatformHeaderService","FirebaseService","BreadcrumbService","ImageEditService","AuthService","GoogleAnalyticsService"];i(e,[{key:"init",value:function(){var t=this;this._updateState(e.STATE_LOADING);this._googleAnalyticsService.init();this._initAppStoreBanner();return this._connect().then(function(){t._onConnectedSuccess()})["catch"](function(e){t._onConnectedFailure(e)})}},{key:"_maintenanceCallback",value:function(t){if(t.exists()){var n=t.val().is_blocking;if(n&&this.state!==e.STATE_MAINTENANCE){this._updateState(e.STATE_MAINTENANCE);this._authService.signOut()}else n||this.state!==e.STATE_MAINTENANCE||this._reloadApp()}}},{key:"_reloadApp",value:function(){this.$window.location.reload()}},{key:"_startListeningForMaintenance",value:function(){return this._firebaseService.ref("universal_message/system_downtime",this._firebaseService.DefaultInstanceId).on("value",this._anonMaintenanceCallback)}},{key:"_stopListeningForMaintenance",value:function(){return this._firebaseService.ref("universal_message/system_downtime",this._firebaseService.DefaultInstanceId).off("value",this._anonMaintenanceCallback)}},{key:"_deferredRetry",value:function(){var e=this;this.$timeout(function(){e.init()},this._environment.retryMs||6e4)}},{key:"_updateState",value:function(t,n){if(this._state!==t){this._state=t;this._errorMessage=n||"";this._stateChanged.raise({state:this._state});this.$rootScope.$broadcast(e.EVENT_STATE,this)}}},{key:"_connect",value:function(){var e=this;return this.info.then(function(){return e._firebaseService.init(e.info,e._authService.authData)})}},{key:"_onConnectedSuccess",value:function(){this.$log.info("BootstrapService","ready");this._authService._authData.clear();this._updateState(e.STATE_READY);this._whenReadyDeferred.resolve();this._startListeningForMaintenance()}},{key:"_onConnectedFailure",value:function(t){this._updateState(e.STATE_ERROR,t.message);this._deferredRetry();var n=this._googleAnalyticsService.formatExceptionDescriptionError(t);this._googleAnalyticsService.sendException("on connected failed | "+n);this.$log.error(t)}},{key:"_initAppStoreBanner",value:function(){var e=this.$window.document.createElement("meta");e.name="apple-itunes-app";e.content="app-id=909904332, affiliate-data=at=1000lqto&ct=ioswebbanner app-argument="+this.$window.location.href;this.$window.document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_setUpOnBeforeUnload",value:function(){var e=new s,t=function(t){var n=void 0;e.forEach(function(e){n=n||e(t)});return n};t.add=function(t){e.add(t)};t.remove=function(t){e["delete"](t)};this.$window.onbeforeunload=t}},{key:"_destroy",value:function(){this._stopListeningForMaintenance()}},{key:"stateChanged",get:function(){return this._stateChanged}},{key:"info",get:function(){var e=this;if(this._gotInfo)return this._gotInfo;var t=this._environment.serverUrlBase+"/info",n=this._platformHeaderService.addHeaders(t,null),i=this.$http.get(t,n);i.then(function(){e._gotInfo=i})["catch"](function(t){e.$log.debug("get info error:",t)});return i}},{key:"state",get:function(){return this._state}},{key:"ready",get:function(){return this.state===e.STATE_READY}},{key:"whenReady",get:function(){return this._whenReady}},{key:"errorMessage",get:function(){return this._errorMessage}}],[{key:"EVENT_STATE",get:function(){return"BootstrapService.state"}},{key:"STATE_READY",get:function(){return"ready"}},{key:"STATE_LOADING",get:function(){return"loading"}},{key:"STATE_ERROR",get:function(){return"error"}},{key:"STATE_MAINTENANCE",get:function(){return"maintenance"}}]);return e}();t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(172)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(399),l=a(c),u=n(147),d=a(u),h=n(400),f=a(h),g=n(401),p=a(g),m=n(402),v=a(m),_=n(200),y=(a(_),function(){function e(t,n,i,s,a,c){"ngInject";r(this,e);this._firebase=t;this._firebaseServiceUtils=new l["default"];this.$log=n;this.$q=i;this.$timeout=s;this._environment=a;this._googleAnalyticsService=c;this._instances=new o;this._defaultInstanceId=void 0;this._notificationShardCount=void 0;this._reduceNotificationShardConnections=void 0;this._defaultInstance=void 0;this._firebaseApp=void 0;this._isConnected=!1;this._connectedEvent=new d["default"](this)}e.$inject=["firebase","$log","$q","$timeout","environment","GoogleAnalyticsService"];i(e,[{key:"getReduceNotificationShardConnections",value:function(){return this._reduceNotificationShardConnections}},{key:"firebaseNotificationInstanceIdForShardKey",value:function(e){try{var t=e.value,n=v["default"].toNumber(v["default"].remainder(p["default"].djb2Hash(t),v["default"].BigInt(this.NotificationShardCount)))+1,i=("00"+n).slice(-2),r=this.DefaultInstanceId+"-notification-shard-"+i;this.logTrace("FirebaseService","firebaseNotificationInstanceIdForShardKey "+e+", instance="+r);return r}catch(s){this.$log.error(s);return this.DefaultInstanceId+"-notification-error"}}},{key:"init",value:function(e,t){var n=this;return e.then(function(e){return n._configure(e,t)})}},{key:"_configure",value:function(e,t){var n=this,i=function(t,i){var r=e.data[t];if(angular.isDefined(r))return r;if(angular.isDefined(i)){n.$log.error('The key "'+t+'" was not found in info. Using default value: '+i);return i}throw new Error('The required key "'+t+'" was not found in info!')};try{var r=this._environment.defaultFirebaseNotificationShards,s=this._environment.defaultFirebaseReduceNotificationShardConnections;this._defaultInstanceId=i("firebase-default");this._notificationShardCount=i("firebase-notification-shards",r);this._reduceNotificationShardConnections=i("firebase-reduce-notification-shard-connections",s)===!0;if(this.isFirebaseAppInitialized){this._googleAnalyticsService.sendException("avoided duplicate init");this._firebaseApp=this._firebase.apps.find(function(e){return"[DEFAULT]"===e.name})}else this._firebaseApp=this._firebase.initializeApp({databaseURL:this.instanceIdToUrl(this._defaultInstanceId),authDomain:i("auth-domain"),apiKey:i("api-key"),projectId:i("project-id")})}catch(o){this._googleAnalyticsService.sendException(o.message);throw o}this._defaultInstance=this._getOrCreateInstance(this._defaultInstanceId);return this.auth(t).then(function(){return e})}},{key:"_getOrCreateInstance",value:function(e){this._instances.has(e)||this._instances.set(e,this._createInstance(e));return this._instances.get(e)}},{key:"_createInstance",value:function(e){this.logTrace("!!FIREBASE CONNECT!!","FirebaseService.createInstance id="+e);var t=e===this._defaultInstanceId,n=this.instanceIdToUrl(e),i=this._firebaseApp.database(t?"":n),r=this.attachExtras(i.ref(),n);return new f["default"](e,r,this._onConnectionChange.bind(this))}},{key:"auth",value:function(e){return e?this._authUser(e):this._authAnonymously()}},{key:"_authUser",value:function(e){var t=this;return this._getCurrentUser().then(function(n){return!n||n.isAnonymous||n.uid!==e.id?t._firebase.auth().signInWithCustomToken(e.firebaseToken):t.$q.resolve()}).then(function(){t.$log.info("FirebaseService","#auth",e.id)})["catch"](function(e){t.$log.error(e);var n=t._googleAnalyticsService.formatExceptionDescriptionError(e),i="fb custom auth failed | "+n;t._logError(i);return t._authAnonymously()})}},{key:"_getCurrentUser",value:function(){var e=this.$q.defer(),t=this._firebase.auth().onAuthStateChanged(function(n){t();e.resolve(n)},function(t){return e.reject(t)});return e.promise}},{key:"_authAnonymously",value:function(){var e=this;return this._firebase.auth().signInAnonymously().then(function(){e.$log.info("FirebaseService","#auth","anon")})["catch"](function(t){e.$log.error(t);var n=e._googleAnalyticsService.formatExceptionDescriptionError(t),i="fb anon auth failed | "+n;e._logError(i);return e.$q.reject(t)})}},{key:"_onConnectionChange",value:function(){var e=this._isConnected;this._isConnected=[].concat(s(this._instances.values())).every(function(e){return e.connected});if(e!==this._isConnected){this.$log.info("FirebaseService","connected="+this._isConnected);this.connectedEvent.raise({connected:this._isConnected},this)}}},{key:"attachExtras",value:function(e,t){return this._firebaseServiceUtils.attachExtras(e,this.$q,t)}},{key:"ref",value:function(e,t){var n=this._getOrCreateInstance(t);return n.ref(e)}},{key:"newId",value:function(){return this._defaultInstance.ref().child("newId").push().key}},{key:"instanceIdToUrl",value:function(e){return"https://"+e+".firebaseio.com"}},{key:"triggerApply",value:function(){this.$timeout(function(){})}},{key:"logTrace",value:function(e,t){this._environment.firebaseTraceLogging&&this.$log.debug(e+": "+t)}},{key:"_logError",value:function(e){this.$log.error(e);this._googleAnalyticsService.sendException(e)}},{key:"DefaultInstanceId",get:function(){return this._defaultInstanceId}},{key:"NotificationShardCount",get:function(){return this._notificationShardCount}},{key:"isFirebaseAppInitialized",get:function(){return this._firebase.apps.some(function(e){return"[DEFAULT]"===e.name})}},{key:"connected",get:function(){return this._isConnected}},{key:"connectedEvent",get:function(){return this._connectedEvent}}]);return e}());t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,[{key:"attachExtras",value:function(e,t,n){e.$parent=this.$parent(t,n);e.$child=this.$child(t,n);e.$once=this.$once(t);e.$uri=this.$uri(n);return e}},{key:"$parent",value:function(e,t){var n=this;return function(){return n.attachExtras(this.parent,e,t)}}},{key:"$child",value:function(e,t){var n=this;return function(i){return n.attachExtras(this.child(i),e,t)}}},{key:"$once",value:function(e){return function(t){var n=this;return e(function(e,i){n.once(t,function(t,n){if(n)return i(n);e(t);return void 0})})}}},{key:"$uri",value:function(e){return function(){return this.toString().replace(e,"")}}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){var s=this;r(this,e);this._id=t;this._baseRef=n;this._connected=!1;var o=!1;this._baseConnectionRef=this._baseRef.$child(".info/connected");this._baseConnectionRef.on("value",function(e){s._connected=e.val()===!0;o=o||s._connected;o&&i()})}i(e,[{key:"ref",value:function(e){return e?this._baseRef.$child(e):this._baseRef}},{key:"connected",get:function(){return this._connected}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(402),a=s(o),c=function(){function e(){r(this,e)}i(e,null,[{key:"djb2Hash",value:function(e){for(var t=a["default"].BigInt(5381),n=0;n<e.length;n++){var i=a["default"].BigInt(e.charCodeAt(n)),r=a["default"].asUintN(64,a["default"].multiply(t,a["default"].BigInt(33)));t=a["default"].asUintN(64,a["default"].add(r,i))}return a["default"].signedRightShift(t,a["default"].BigInt(1))}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n,i=0;i<t.length;i++)n=t[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function c(){return c=a()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=Function.bind.apply(e,i),s=new r;return n&&o(s,n.prototype),s},c.apply(null,arguments)}function l(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){function n(){return c(e,arguments,s(this).constructor)}if(null===e||!l(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function f(e){var t=a();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function g(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);t>n;n++)i[n]=e[n];return i}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(a)throw s}}}}var v=Math.imul,_=Math.clz32,y=function(n){function s(e,n){var i;if(t(this,s),e>s.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return i=c.call(this,e),i.sign=n,i}var o=Math.abs,a=Math.max;r(s,n);var c=f(s);return i(s,[{key:"toDebugString",value:function(){var e,t=["BigInt["],n=m(this);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push((i?(i>>>0).toString(16):i)+", ")}}catch(e){n.e(e)}finally{n.f()}return t.push("]"),t.join("")}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>e||e>36)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(e&e-1)?s.__toStringBasePowerOfTwo(this,e):s.__toStringGeneric(this,e,!1)}},{key:"__copy",value:function(){for(var e=new s(this.length,this.sign),t=0;t<this.length;t++)e[t]=this[t];return e}},{key:"__trim",value:function(){for(var e=this.length,t=this[e-1];0===t;)e--,t=this[e-1],this.pop();return 0===e&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var e=0;e<this.length;e++)this[e]=0}},{key:"__clzmsd",value:function(){return s.__clz32(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(e,t,n){n>this.length&&(n=this.length);for(var i=65535&e,r=e>>>16,o=0,a=65535&t,c=t>>>16,l=0;n>l;l++){var u=this.__digit(l),d=65535&u,h=u>>>16,f=s.__imul(d,i),g=s.__imul(d,r),p=s.__imul(h,i),m=s.__imul(h,r),v=a+(65535&f),_=c+o+(v>>>16)+(f>>>16)+(65535&g)+(65535&p);a=(g>>>16)+(p>>>16)+(65535&m)+(_>>>16),o=a>>>16,a&=65535,c=m>>>16;this.__setDigit(l,65535&v|_<<16)}if(0!==o||0!==a||0!==c)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(e,t,n){for(var i,r=0,s=0;n>s;s++)i=this.__halfDigit(t+s)+e.__halfDigit(s)+r,r=i>>>16,this.__setHalfDigit(t+s,i);return r}},{key:"__inplaceSub",value:function(e,t,n){var i=0;if(1&t){t>>=1;for(var r=this.__digit(t),s=65535&r,o=0;n-1>>>1>o;o++){var a=e.__digit(o),c=(r>>>16)-(65535&a)-i;i=1&c>>>16,this.__setDigit(t+o,c<<16|65535&s),r=this.__digit(t+o+1),s=(65535&r)-(a>>>16)-i,i=1&s>>>16}var l=e.__digit(o),u=(r>>>16)-(65535&l)-i;i=1&u>>>16,this.__setDigit(t+o,u<<16|65535&s);if(t+o+1>=this.length)throw new RangeError("out of bounds");0==(1&n)&&(r=this.__digit(t+o+1),s=(65535&r)-(l>>>16)-i,i=1&s>>>16,this.__setDigit(t+e.length,4294901760&r|65535&s))}else{t>>=1;for(var d=0;d<e.length-1;d++){var h=this.__digit(t+d),f=e.__digit(d),g=(65535&h)-(65535&f)-i;i=1&g>>>16;var p=(h>>>16)-(f>>>16)-i;i=1&p>>>16,this.__setDigit(t+d,p<<16|65535&g)}var m=this.__digit(t+d),v=e.__digit(d),_=(65535&m)-(65535&v)-i;i=1&_>>>16;var y=0;0==(1&n)&&(y=(m>>>16)-(v>>>16)-i,i=1&y>>>16),this.__setDigit(t+d,y<<16|65535&_)}return i}},{key:"__inplaceRightShift",value:function(e){if(0!==e){for(var t,n=this.__digit(0)>>>e,i=this.length-1,r=0;i>r;r++)t=this.__digit(r+1),this.__setDigit(r,t<<32-e|n),n=t>>>e;this.__setDigit(i,n)}}},{key:"__digit",value:function(e){return this[e]}},{key:"__unsignedDigit",value:function(e){return this[e]>>>0}},{key:"__setDigit",value:function(e,t){this[e]=0|t}},{key:"__setDigitGrow",value:function(e,t){this[e]=0|t}},{key:"__halfDigitLength",value:function(){var e=this.length;return 65535>=this.__unsignedDigit(e-1)?2*e-1:2*e}},{key:"__halfDigit",value:function(e){return 65535&this[e>>>1]>>>((1&e)<<4)}},{key:"__setHalfDigit",value:function(e,t){var n=e>>>1,i=this.__digit(n),r=1&e?65535&i|t<<16:4294901760&i|65535&t;this.__setDigit(n,r)}}],[{key:"BigInt",value:function(t){var n=Math.floor,i=Number.isFinite;if("number"==typeof t){if(0===t)return s.__zero();if((0|t)===t)return 0>t?s.__oneDigit(-t,!0):s.__oneDigit(t,!1);if(!i(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return s.__fromDouble(t)}if("string"==typeof t){var r=s.__fromString(t);if(null===r)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return r}if("boolean"==typeof t)return!0===t?s.__oneDigit(1,!1):s.__zero();if("object"===e(t)){if(t.constructor===s)return t;var o=s.__toPrimitive(t);return s.BigInt(o)}throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(e){var t=e.length;if(0===t)return 0;if(1===t){var n=e.__unsignedDigit(0);return e.sign?-n:n}var i=e.__digit(t-1),r=s.__clz32(i),o=32*t-r;if(o>1024)return e.sign?-(1/0):1/0;var a=o-1,c=i,l=t-1,u=r+1,d=32===u?0:c<<u;d>>>=12;var h=u-12,f=u>=12?0:c<<20+u,g=20+u;h>0&&l>0&&(l--,c=e.__digit(l),d|=c>>>32-h,f=c<<h,g=h),g>0&&l>0&&(l--,c=e.__digit(l),f|=c>>>32-g,g-=32);var p=s.__decideRounding(e,g,l,c);if((1===p||0===p&&1==(1&f))&&(f=f+1>>>0,0===f&&(d++,0!=d>>>20&&(d=0,a++,a>1023))))return e.sign?-(1/0):1/0;var m=e.sign?-2147483648:0;return a=a+1023<<20,s.__kBitConversionInts[1]=m|a|d,s.__kBitConversionInts[0]=f,s.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(e){if(0===e.length)return e;var t=e.__copy();return t.sign=!e.sign,t}},{key:"bitwiseNot",value:function(e){return e.sign?s.__absoluteSubOne(e).__trim():s.__absoluteAddOne(e,!0)}},{key:"exponentiate",value:function(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(0===t.length)return s.__oneDigit(1,!1);if(0===e.length)return e;if(1===e.length&&1===e.__digit(0))return e.sign&&0==(1&t.__digit(0))?s.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");var n=t.__unsignedDigit(0);if(1===n)return e;if(n>=s.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===e.length&&2===e.__digit(0)){var i=1+(n>>>5),r=e.sign&&0!=(1&n),o=new s(i,r);o.__initializeDigits();var a=1<<(31&n);return o.__setDigit(i-1,a),o}var c=null,l=e;for(0!=(1&n)&&(c=e),n>>=1;0!==n;n>>=1)l=s.multiply(l,l),0!=(1&n)&&(c=null===c?l:s.multiply(c,l));return c}},{key:"multiply",value:function(e,t){if(0===e.length)return e;if(0===t.length)return t;var n=e.length+t.length;32<=e.__clzmsd()+t.__clzmsd()&&n--;var i=new s(n,e.sign!==t.sign);i.__initializeDigits();for(var r=0;r<e.length;r++)s.__multiplyAccumulate(t,e.__digit(r),i,r);return i.__trim()}},{key:"divide",value:function(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(e,t))return s.__zero();var n,i=e.sign!==t.sign,r=t.__unsignedDigit(0);if(1===t.length&&65535>=r){if(1===r)return i===e.sign?e:s.unaryMinus(e);n=s.__absoluteDivSmall(e,r,null)}else n=s.__absoluteDivLarge(e,t,!0,!1);return n.sign=i,n.__trim()}},{key:"remainder",value:function l(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(e,t))return e;var n=t.__unsignedDigit(0);if(1===t.length&&65535>=n){if(1===n)return s.__zero();var i=s.__absoluteModSmall(e,n);return 0===i?s.__zero():s.__oneDigit(i,e.sign)}var l=s.__absoluteDivLarge(e,t,!1,!0);return l.sign=e.sign,l.__trim()}},{key:"add",value:function(e,t){var n=e.sign;return n===t.sign?s.__absoluteAdd(e,t,n):0<=s.__absoluteCompare(e,t)?s.__absoluteSub(e,t,n):s.__absoluteSub(t,e,!n)}},{key:"subtract",value:function(e,t){var n=e.sign;return n===t.sign?0<=s.__absoluteCompare(e,t)?s.__absoluteSub(e,t,n):s.__absoluteSub(t,e,!n):s.__absoluteAdd(e,t,n)}},{key:"leftShift",value:function(e,t){return 0===t.length||0===e.length?e:t.sign?s.__rightShiftByAbsolute(e,t):s.__leftShiftByAbsolute(e,t)}},{key:"signedRightShift",value:function(e,t){return 0===t.length||0===e.length?e:t.sign?s.__leftShiftByAbsolute(e,t):s.__rightShiftByAbsolute(e,t)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(e,t){return 0>s.__compareToBigInt(e,t)}},{key:"lessThanOrEqual",value:function(e,t){return 0>=s.__compareToBigInt(e,t)}},{key:"greaterThan",value:function(e,t){return 0<s.__compareToBigInt(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return 0<=s.__compareToBigInt(e,t)}},{key:"equal",value:function(e,t){if(e.sign!==t.sign)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}},{key:"notEqual",value:function(e,t){return!s.equal(e,t)}},{key:"bitwiseAnd",value:function(e,t){if(!e.sign&&!t.sign)return s.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){var n=a(e.length,t.length)+1,i=s.__absoluteSubOne(e,n),r=s.__absoluteSubOne(t);return i=s.__absoluteOr(i,r,i),s.__absoluteAddOne(i,!0,i).__trim()}if(e.sign){var o=[t,e];e=o[0],t=o[1]}return s.__absoluteAndNot(e,s.__absoluteSubOne(t)).__trim()}},{key:"bitwiseXor",value:function(e,t){if(!e.sign&&!t.sign)return s.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){var n=a(e.length,t.length),i=s.__absoluteSubOne(e,n),r=s.__absoluteSubOne(t);return s.__absoluteXor(i,r,i).__trim()}var o=a(e.length,t.length)+1;if(e.sign){var c=[t,e];e=c[0],t=c[1]}var l=s.__absoluteSubOne(t,o);return l=s.__absoluteXor(l,e,l),s.__absoluteAddOne(l,!0,l).__trim()}},{key:"bitwiseOr",value:function(e,t){var n=a(e.length,t.length);if(!e.sign&&!t.sign)return s.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){var i=s.__absoluteSubOne(e,n),r=s.__absoluteSubOne(t);return i=s.__absoluteAnd(i,r,i),s.__absoluteAddOne(i,!0,i).__trim()}if(e.sign){var o=[t,e];e=o[0],t=o[1]}var c=s.__absoluteSubOne(t,n);return c=s.__absoluteAndNot(c,e,c),s.__absoluteAddOne(c,!0,c).__trim()}},{key:"asIntN",value:function(e,t){if(0===t.length)return t;if(0===e)return s.__zero();if(e>=s.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var i=t.__unsignedDigit(n-1),r=1<<(31&e-1);if(t.length===n&&r>i)return t;if((i&r)!==r)return s.__truncateToNBits(e,t);if(!t.sign)return s.__truncateAndSubFromPowerOfTwo(e,t,!0);if(0==(i&r-1)){for(var o=n-2;o>=0;o--)if(0!==t.__digit(o))return s.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&i===r?t:s.__truncateToNBits(e,t)}return s.__truncateAndSubFromPowerOfTwo(e,t,!1)}},{key:"asUintN",value:function(e,t){if(0===t.length)return t;if(0===e)return s.__zero();if(t.sign){if(e>s.__kMaxLengthBits)throw new RangeError("BigInt too big");return s.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=s.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var i=31&e;if(t.length==n){if(0===i)return t;var r=t.__digit(n-1);if(0==r>>>i)return t}return s.__truncateToNBits(e,t)}},{key:"ADD",value:function(e,t){if(e=s.__toPrimitive(e),t=s.__toPrimitive(t),"string"==typeof e)return"string"!=typeof t&&(t=t.toString()),e+t;if("string"==typeof t)return e.toString()+t;if(e=s.__toNumeric(e),t=s.__toNumeric(t),s.__isBigInt(e)&&s.__isBigInt(t))return s.add(e,t);if("number"==typeof e&&"number"==typeof t)return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(e,t){return s.__compare(e,t,0)}},{key:"LE",value:function(e,t){return s.__compare(e,t,1)}},{key:"GT",value:function(e,t){return s.__compare(e,t,2)}},{key:"GE",value:function(e,t){return s.__compare(e,t,3)}},{key:"EQ",value:function(t,n){for(;;){if(s.__isBigInt(t))return s.__isBigInt(n)?s.equal(t,n):s.EQ(n,t);if("number"==typeof t){if(s.__isBigInt(n))return s.__equalToNumber(n,t);if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else if("string"==typeof t){if(s.__isBigInt(n))return t=s.__fromString(t),null!==t&&s.equal(t,n);if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else if("boolean"==typeof t){if(s.__isBigInt(n))return s.__equalToNumber(n,+t);
if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else if("symbol"===e(t)){if(s.__isBigInt(n))return!1;if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else{if("object"!==e(t))return t==n;if("object"===e(n)&&n.constructor!==s)return t==n;t=s.__toPrimitive(t)}}}},{key:"NE",value:function(e,t){return!s.EQ(e,t)}},{key:"__zero",value:function(){return new s(0,!1)}},{key:"__oneDigit",value:function(e,t){var n=new s(1,t);return n.__setDigit(0,e),n}},{key:"__decideRounding",value:function(e,t,n,i){if(t>0)return-1;var r;if(0>t)r=-t-1;else{if(0===n)return-1;n--,i=e.__digit(n),r=31}var s=1<<r;if(0==(i&s))return-1;if(s-=1,0!=(i&s))return 1;for(;n>0;)if(n--,0!==e.__digit(n))return 1;return 0}},{key:"__fromDouble",value:function(e){s.__kBitConversionDouble[0]=e;var t,n=2047&s.__kBitConversionInts[1]>>>20,i=n-1023,r=(i>>>5)+1,o=new s(r,0>e),a=1048575&s.__kBitConversionInts[1]|1048576,c=s.__kBitConversionInts[0],l=20,u=31&i,d=0;if(l>u){var h=l-u;d=h+32,t=a>>>h,a=a<<32-h|c>>>h,c<<=32-h}else if(u===l)d=32,t=a,a=c;else{var f=u-l;d=32-f,t=a<<f|c>>>32-f,a=c<<f}o.__setDigit(r-1,t);for(var g=r-2;g>=0;g--)d>0?(d-=32,t=a,a=c):t=0,o.__setDigit(g,t);return o.__trim()}},{key:"__isWhitespace",value:function(e){return!!(13>=e&&e>=9)||(159>=e?32==e:131071>=e?160==e||5760==e:196607>=e?(e&=131071,10>=e||40==e||41==e||47==e||95==e||4096==e):65279==e)}},{key:"__fromString",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=0,i=e.length,r=0;if(r===i)return s.__zero();for(var o=e.charCodeAt(r);s.__isWhitespace(o);){if(++r===i)return s.__zero();o=e.charCodeAt(r)}if(43===o){if(++r===i)return null;o=e.charCodeAt(r),n=1}else if(45===o){if(++r===i)return null;o=e.charCodeAt(r),n=-1}if(0===t){if(t=10,48===o){if(++r===i)return s.__zero();if(o=e.charCodeAt(r),88===o||120===o){if(t=16,++r===i)return null;o=e.charCodeAt(r)}else if(79===o||111===o){if(t=8,++r===i)return null;o=e.charCodeAt(r)}else if(66===o||98===o){if(t=2,++r===i)return null;o=e.charCodeAt(r)}}}else if(16===t&&48===o){if(++r===i)return s.__zero();if(o=e.charCodeAt(r),88===o||120===o){if(++r===i)return null;o=e.charCodeAt(r)}}for(;48===o;){if(++r===i)return s.__zero();o=e.charCodeAt(r)}var a=i-r,c=s.__kMaxBitsPerChar[t],l=s.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;var u=c*a+l>>>s.__kBitsPerCharTableShift,d=new s(u+31>>>5,!1),h=10>t?t:10,f=t>10?t-10:0;if(0==(t&t-1)){c>>=s.__kBitsPerCharTableShift;var g=[],p=[],m=!1;do{for(var v,_=0,y=0;;){if(v=void 0,h>o-48>>>0)v=o-48;else{if(!(f>(32|o)-97>>>0)){m=!0;break}v=(32|o)-87}if(y+=c,_=_<<c|v,++r===i){m=!0;break}if(o=e.charCodeAt(r),y+c>32)break}g.push(_),p.push(y)}while(!m);s.__fillFromParts(d,g,p)}else{d.__initializeDigits();var k=!1,b=0;do{for(var S,w=0,C=1;;){if(S=void 0,h>o-48>>>0)S=o-48;else{if(!(f>(32|o)-97>>>0)){k=!0;break}S=(32|o)-87}var E=C*t;if(E>4294967295)break;if(C=E,w=w*t+S,b++,++r===i){k=!0;break}o=e.charCodeAt(r)}l=32*s.__kBitsPerCharTableMultiplier-1;var T=c*b+l>>>s.__kBitsPerCharTableShift+5;d.__inplaceMultiplyAdd(C,w,T)}while(!k)}if(r!==i){if(!s.__isWhitespace(o))return null;for(r++;i>r;r++)if(o=e.charCodeAt(r),!s.__isWhitespace(o))return null}return 0!==n&&10!==t?null:(d.sign=-1===n,d.__trim())}},{key:"__fillFromParts",value:function(e,t,n){for(var i=0,r=0,s=0,o=t.length-1;o>=0;o--){var a=t[o],c=n[o];r|=a<<s,s+=c,32===s?(e.__setDigit(i++,r),s=0,r=0):s>32&&(e.__setDigit(i++,r),s-=32,r=a>>>c-s)}if(0!==r){if(i>=e.length)throw new Error("implementation bug");e.__setDigit(i++,r)}for(;i<e.length;i++)e.__setDigit(i,0)}},{key:"__toStringBasePowerOfTwo",value:function(e,t){var n=e.length,i=t-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);var r=i,o=t-1,a=e.__digit(n-1),c=s.__clz32(a),l=0|(32*n-c+r-1)/r;if(e.sign&&l++,l>268435456)throw new Error("string too long");for(var u=Array(l),d=l-1,h=0,f=0,g=0;n-1>g;g++){var p=e.__digit(g),m=(h|p<<f)&o;u[d--]=s.__kConversionChars[m];var v=r-f;for(h=p>>>v,f=32-v;f>=r;)u[d--]=s.__kConversionChars[h&o],h>>>=r,f-=r}var _=(h|a<<f)&o;for(u[d--]=s.__kConversionChars[_],h=a>>>r-f;0!==h;)u[d--]=s.__kConversionChars[h&o],h>>>=r;if(e.sign&&(u[d--]="-"),-1!==d)throw new Error("implementation bug");return u.join("")}},{key:"__toStringGeneric",value:function(e,t,n){var i=e.length;if(0===i)return"";if(1===i){var r=e.__unsignedDigit(0).toString(t);return!1===n&&e.sign&&(r="-"+r),r}var o=32*i-s.__clz32(e.__digit(i-1)),a=s.__kMaxBitsPerChar[t],c=a-1,l=o*s.__kBitsPerCharTableMultiplier;l+=c-1,l=0|l/c;var u,d,h=l+1>>1,f=s.exponentiate(s.__oneDigit(t,!1),s.__oneDigit(h,!1)),g=f.__unsignedDigit(0);if(1===f.length&&65535>=g){u=new s(e.length,!1),u.__initializeDigits();for(var p,m=0,v=2*e.length-1;v>=0;v--)p=m<<16|e.__halfDigit(v),u.__setHalfDigit(v,0|p/g),m=0|p%g;d=m.toString(t)}else{var _=s.__absoluteDivLarge(e,f,!0,!0);u=_.quotient;var y=_.remainder.__trim();d=s.__toStringGeneric(y,t,!0)}u.__trim();for(var k=s.__toStringGeneric(u,t,!0);d.length<h;)d="0"+d;return!1===n&&e.sign&&(k="-"+k),k+d}},{key:"__unequalSign",value:function(e){return e?-1:1}},{key:"__absoluteGreater",value:function(e){return e?-1:1}},{key:"__absoluteLess",value:function(e){return e?1:-1}},{key:"__compareToBigInt",value:function(e,t){var n=e.sign;if(n!==t.sign)return s.__unequalSign(n);var i=s.__absoluteCompare(e,t);return i>0?s.__absoluteGreater(n):0>i?s.__absoluteLess(n):0}},{key:"__compareToNumber",value:function(e,t){if(!0|t){var n=e.sign,i=0>t;if(n!==i)return s.__unequalSign(n);if(0===e.length){if(i)throw new Error("implementation bug");return 0===t?0:-1}if(1<e.length)return s.__absoluteGreater(n);var r=o(t),a=e.__unsignedDigit(0);return a>r?s.__absoluteGreater(n):r>a?s.__absoluteLess(n):0}return s.__compareToDouble(e,t)}},{key:"__compareToDouble",value:function(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-(1/0))return 1;var n=e.sign;if(n!==0>t)return s.__unequalSign(n);if(0===t)throw new Error("implementation bug: should be handled elsewhere");if(0===e.length)return-1;s.__kBitConversionDouble[0]=t;var i=2047&s.__kBitConversionInts[1]>>>20;if(2047==i)throw new Error("implementation bug: handled elsewhere");var r=i-1023;if(0>r)return s.__absoluteGreater(n);var o=e.length,a=e.__digit(o-1),c=s.__clz32(a),l=32*o-c,u=r+1;if(u>l)return s.__absoluteLess(n);if(l>u)return s.__absoluteGreater(n);var d=1048576|1048575&s.__kBitConversionInts[1],h=s.__kBitConversionInts[0],f=20,g=31-c;if(g!==(l-1)%31)throw new Error("implementation bug");var p,m=0;if(f>g){var v=f-g;m=v+32,p=d>>>v,d=d<<32-v|h>>>v,h<<=32-v}else if(g===f)m=32,p=d,d=h;else{var _=g-f;m=32-_,p=d<<_|h>>>32-_,d=h<<_}if(a>>>=0,p>>>=0,a>p)return s.__absoluteGreater(n);if(p>a)return s.__absoluteLess(n);for(var y=o-2;y>=0;y--){m>0?(m-=32,p=d>>>0,d=h,h=0):p=0;var k=e.__unsignedDigit(y);if(k>p)return s.__absoluteGreater(n);if(p>k)return s.__absoluteLess(n)}if(0!==d||0!==h){if(0===m)throw new Error("implementation bug");return s.__absoluteLess(n)}return 0}},{key:"__equalToNumber",value:function(e,t){return t|0===t?0===t?0===e.length:1===e.length&&e.sign===0>t&&e.__unsignedDigit(0)===o(t):0===s.__compareToDouble(e,t)}},{key:"__comparisonResultToBool",value:function(e,t){switch(t){case 0:return 0>e;case 1:return 0>=e;case 2:return e>0;case 3:return e>=0}throw new Error("unreachable")}},{key:"__compare",value:function(e,t,n){if(e=s.__toPrimitive(e),t=s.__toPrimitive(t),"string"==typeof e&&"string"==typeof t)switch(n){case 0:return t>e;case 1:return t>=e;case 2:return e>t;case 3:return e>=t}if(s.__isBigInt(e)&&"string"==typeof t)return t=s.__fromString(t),null!==t&&s.__comparisonResultToBool(s.__compareToBigInt(e,t),n);if("string"==typeof e&&s.__isBigInt(t))return e=s.__fromString(e),null!==e&&s.__comparisonResultToBool(s.__compareToBigInt(e,t),n);if(e=s.__toNumeric(e),t=s.__toNumeric(t),s.__isBigInt(e)){if(s.__isBigInt(t))return s.__comparisonResultToBool(s.__compareToBigInt(e,t),n);if("number"!=typeof t)throw new Error("implementation bug");return s.__comparisonResultToBool(s.__compareToNumber(e,t),n)}if("number"!=typeof e)throw new Error("implementation bug");if(s.__isBigInt(t))return s.__comparisonResultToBool(s.__compareToNumber(t,e),2^n);if("number"!=typeof t)throw new Error("implementation bug");return 0===n?t>e:1===n?t>=e:2===n?e>t:3===n?e>=t:void 0}},{key:"__absoluteAdd",value:function(e,t,n){if(e.length<t.length)return s.__absoluteAdd(t,e,n);if(0===e.length)return e;if(0===t.length)return e.sign===n?e:s.unaryMinus(e);var i=e.length;(0===e.__clzmsd()||t.length===e.length&&0===t.__clzmsd())&&i++;for(var r=new s(i,n),o=0,a=0;a<t.length;a++){var c=t.__digit(a),l=e.__digit(a),u=(65535&l)+(65535&c)+o,d=(l>>>16)+(c>>>16)+(u>>>16);o=d>>>16,r.__setDigit(a,65535&u|d<<16)}for(;a<e.length;a++){var h=e.__digit(a),f=(65535&h)+o,g=(h>>>16)+(f>>>16);o=g>>>16,r.__setDigit(a,65535&f|g<<16)}return a<r.length&&r.__setDigit(a,o),r.__trim()}},{key:"__absoluteSub",value:function(e,t,n){if(0===e.length)return e;if(0===t.length)return e.sign===n?e:s.unaryMinus(e);for(var i=new s(e.length,n),r=0,o=0;o<t.length;o++){var a=e.__digit(o),c=t.__digit(o),l=(65535&a)-(65535&c)-r;r=1&l>>>16;var u=(a>>>16)-(c>>>16)-r;r=1&u>>>16,i.__setDigit(o,65535&l|u<<16)}for(;o<e.length;o++){var d=e.__digit(o),h=(65535&d)-r;r=1&h>>>16;var f=(d>>>16)-r;r=1&f>>>16,i.__setDigit(o,65535&h|f<<16)}return i.__trim()}},{key:"__absoluteAddOne",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length;null===n?n=new s(i,t):n.sign=t;for(var r,o=!0,a=0;i>a;a++){if(r=e.__digit(a),o){var c=-1===r;r=0|r+1,o=c}n.__setDigit(a,r)}return o&&n.__setDigitGrow(i,1),n}},{key:"__absoluteSubOne",value:function(e,t){var n=e.length;t=t||n;for(var i,r=new s(t,!1),o=!0,a=0;n>a;a++){if(i=e.__digit(a),o){var c=0===i;i=0|i-1,o=c}r.__setDigit(a,i)}if(o)throw new Error("implementation bug");for(var l=n;t>l;l++)r.__setDigit(l,0);return r}},{key:"__absoluteAnd",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;if(r>i){o=i;var a=e,c=i;e=t,i=r,t=a,r=c}var l=o;null===n?n=new s(l,!1):l=n.length;for(var u=0;o>u;u++)n.__setDigit(u,e.__digit(u)&t.__digit(u));for(;l>u;u++)n.__setDigit(u,0);return n}},{key:"__absoluteAndNot",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;r>i&&(o=i);var a=i;null===n?n=new s(a,!1):a=n.length;for(var c=0;o>c;c++)n.__setDigit(c,e.__digit(c)&~t.__digit(c));for(;i>c;c++)n.__setDigit(c,e.__digit(c));for(;a>c;c++)n.__setDigit(c,0);return n}},{key:"__absoluteOr",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;if(r>i){o=i;var a=e,c=i;e=t,i=r,t=a,r=c}var l=i;null===n?n=new s(l,!1):l=n.length;for(var u=0;o>u;u++)n.__setDigit(u,e.__digit(u)|t.__digit(u));for(;i>u;u++)n.__setDigit(u,e.__digit(u));for(;l>u;u++)n.__setDigit(u,0);return n}},{key:"__absoluteXor",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;if(r>i){o=i;var a=e,c=i;e=t,i=r,t=a,r=c}var l=i;null===n?n=new s(l,!1):l=n.length;for(var u=0;o>u;u++)n.__setDigit(u,e.__digit(u)^t.__digit(u));for(;i>u;u++)n.__setDigit(u,e.__digit(u));for(;l>u;u++)n.__setDigit(u,0);return n}},{key:"__absoluteCompare",value:function(e,t){var n=e.length-t.length;if(0!=n)return n;for(var i=e.length-1;i>=0&&e.__digit(i)===t.__digit(i);)i--;return 0>i?0:e.__unsignedDigit(i)>t.__unsignedDigit(i)?1:-1}},{key:"__multiplyAccumulate",value:function(e,t,n,i){if(0!==t){for(var r=65535&t,o=t>>>16,a=0,c=0,l=0,u=0;u<e.length;u++,i++){var d=n.__digit(i),h=65535&d,f=d>>>16,g=e.__digit(u),p=65535&g,m=g>>>16,v=s.__imul(p,r),_=s.__imul(p,o),y=s.__imul(m,r),k=s.__imul(m,o);h+=c+(65535&v),f+=l+a+(h>>>16)+(v>>>16)+(65535&_)+(65535&y),a=f>>>16,c=(_>>>16)+(y>>>16)+(65535&k)+a,a=c>>>16,c&=65535,l=k>>>16,d=65535&h|f<<16,n.__setDigit(i,d)}for(;0!==a||0!==c||0!==l;i++){var b=n.__digit(i),S=(65535&b)+c,w=(b>>>16)+(S>>>16)+l+a;c=0,l=0,a=w>>>16,b=65535&S|w<<16,n.__setDigit(i,b)}}}},{key:"__internalMultiplyAdd",value:function(e,t,n,i,r){for(var o=n,a=0,c=0;i>c;c++){var l=e.__digit(c),u=s.__imul(65535&l,t),d=(65535&u)+a+o;o=d>>>16;var h=s.__imul(l>>>16,t),f=(65535&h)+(u>>>16)+o;o=f>>>16,a=h>>>16,r.__setDigit(c,f<<16|65535&d)}if(r.length>i)for(r.__setDigit(i++,o+a);i<r.length;)r.__setDigit(i++,0);else if(0!==o+a)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(e,t,n){null===n&&(n=new s(e.length,!1));for(var i=0,r=2*e.length-1;r>=0;r-=2){var o=(i<<16|e.__halfDigit(r))>>>0,a=0|o/t;i=0|o%t,o=(i<<16|e.__halfDigit(r-1))>>>0;var c=0|o/t;i=0|o%t,n.__setDigit(r>>>1,a<<16|c)}return n}},{key:"__absoluteModSmall",value:function(e,t){for(var n,i=0,r=2*e.length-1;r>=0;r--)n=(i<<16|e.__halfDigit(r))>>>0,i=0|n%t;return i}},{key:"__absoluteDivLarge",value:function(e,t,n,i){var r=t.__halfDigitLength(),o=t.length,a=e.__halfDigitLength()-r,c=null;n&&(c=new s(a+2>>>1,!1),c.__initializeDigits());var l=new s(r+2>>>1,!1);l.__initializeDigits();var u=s.__clz16(t.__halfDigit(r-1));u>0&&(t=s.__specialLeftShift(t,u,0));for(var d=s.__specialLeftShift(e,u,1),h=t.__halfDigit(r-1),f=0,g=a;g>=0;g--){var p=65535,m=d.__halfDigit(g+r);if(m!==h){var v=(m<<16|d.__halfDigit(g+r-1))>>>0;p=0|v/h;for(var _=0|v%h,y=t.__halfDigit(r-2),k=d.__halfDigit(g+r-2);s.__imul(p,y)>>>0>(_<<16|k)>>>0&&(p--,_+=h,!(_>65535)););}s.__internalMultiplyAdd(t,p,0,o,l);var b=d.__inplaceSub(l,g,r+1);0!==b&&(b=d.__inplaceAdd(t,g,r),d.__setHalfDigit(g+r,d.__halfDigit(g+r)+b),p--),n&&(1&g?f=p<<16:c.__setDigit(g>>>1,f|p))}return i?(d.__inplaceRightShift(u),n?{quotient:c,remainder:d}:d):n?c:void 0}},{key:"__clz16",value:function(e){return s.__clz32(e)-16}},{key:"__specialLeftShift",value:function(e,t,n){var i=e.length,r=new s(i+n,!1);if(0===t){for(var o=0;i>o;o++)r.__setDigit(o,e.__digit(o));return n>0&&r.__setDigit(i,0),r}for(var a,c=0,l=0;i>l;l++)a=e.__digit(l),r.__setDigit(l,a<<t|c),c=a>>>32-t;return n>0&&r.__setDigit(i,c),r}},{key:"__leftShiftByAbsolute",value:function(e,t){var n=s.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");var i=n>>>5,r=31&n,o=e.length,a=0!==r&&0!=e.__digit(o-1)>>>32-r,c=o+i+(a?1:0),l=new s(c,e.sign);if(0===r){for(var u=0;i>u;u++)l.__setDigit(u,0);for(;c>u;u++)l.__setDigit(u,e.__digit(u-i))}else{for(var d=0,h=0;i>h;h++)l.__setDigit(h,0);for(var f,g=0;o>g;g++)f=e.__digit(g),l.__setDigit(g+i,f<<r|d),d=f>>>32-r;if(a)l.__setDigit(o+i,d);else if(0!==d)throw new Error("implementation bug")}return l.__trim()}},{key:"__rightShiftByAbsolute",value:function(e,t){var n=e.length,i=e.sign,r=s.__toShiftAmount(t);if(0>r)return s.__rightShiftByMaximum(i);var o=r>>>5,a=31&r,c=n-o;if(0>=c)return s.__rightShiftByMaximum(i);var l=!1;if(i)if(0!=(e.__digit(o)&(1<<a)-1))l=!0;else for(var u=0;o>u;u++)if(0!==e.__digit(u)){l=!0;break}if(l&&0===a){var d=e.__digit(n-1);0==~d&&c++}var h=new s(c,i);if(0===a){h.__setDigit(c-1,0);for(var f=o;n>f;f++)h.__setDigit(f-o,e.__digit(f))}else{for(var g,p=e.__digit(o)>>>a,m=n-o-1,v=0;m>v;v++)g=e.__digit(v+o+1),h.__setDigit(v,g<<32-a|p),p=g>>>a;h.__setDigit(m,p)}return l&&(h=s.__absoluteAddOne(h,!0,h)),h.__trim()}},{key:"__rightShiftByMaximum",value:function(e){return e?s.__oneDigit(1,!0):s.__zero()}},{key:"__toShiftAmount",value:function(e){if(1<e.length)return-1;var t=e.__unsignedDigit(0);return t>s.__kMaxLengthBits?-1:t}},{key:"__toPrimitive",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==e(t))return t;if(t.constructor===s)return t;var i=t[Symbol.toPrimitive];if(i){var r=i(n);if("object"!==e(r))return r;throw new TypeError("Cannot convert object to primitive value")}var o=t.valueOf;if(o){var a=o.call(t);if("object"!==e(a))return a}var c=t.toString;if(c){var l=c.call(t);if("object"!==e(l))return l}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(e){return s.__isBigInt(e)?e:+e}},{key:"__isBigInt",value:function(t){return"object"===e(t)&&null!==t&&t.constructor===s}},{key:"__truncateToNBits",value:function(e,t){for(var n=e+31>>>5,i=new s(n,t.sign),r=n-1,o=0;r>o;o++)i.__setDigit(o,t.__digit(o));var a=t.__digit(r);if(0!=(31&e)){var c=32-(31&e);a=a<<c>>>c}return i.__setDigit(r,a),i.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(e,t,n){for(var i=Math.min,r=e+31>>>5,o=new s(r,n),a=0,c=r-1,l=0,u=i(c,t.length);u>a;a++){var d=t.__digit(a),h=0-(65535&d)-l;l=1&h>>>16;var f=0-(d>>>16)-l;l=1&f>>>16,o.__setDigit(a,65535&h|f<<16)}for(;c>a;a++)o.__setDigit(a,0|-l);var g,p=c<t.length?t.__digit(c):0,m=31&e;if(0===m){var v=0-(65535&p)-l;l=1&v>>>16;var _=0-(p>>>16)-l;g=65535&v|_<<16}else{var y=32-m;p=p<<y>>>y;var k=1<<32-y,b=(65535&k)-(65535&p)-l;l=1&b>>>16;var S=(k>>>16)-(p>>>16)-l;g=65535&b|S<<16,g&=k-1}return o.__setDigit(c,g),o.__trim()}},{key:"__digitPow",value:function(e,t){for(var n=1;t>0;)1&t&&(n*=e),t>>>=1,e*=e;return n}}]),s}(u(Array));return y.__kMaxLength=33554432,y.__kMaxLengthBits=y.__kMaxLength<<5,y.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],y.__kBitsPerCharTableShift=5,y.__kBitsPerCharTableMultiplier=1<<y.__kBitsPerCharTableShift,y.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],y.__kBitConversionBuffer=new ArrayBuffer(8),y.__kBitConversionDouble=new Float64Array(y.__kBitConversionBuffer),y.__kBitConversionInts=new Int32Array(y.__kBitConversionBuffer),y.__clz32=_||function(e){var t=Math.LN2,n=Math.log;return 0===e?32:0|31-(0|n(e>>>0)/t)},y.__imul=v||function(e,t){return 0|e*t},y})},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(214),a=s(o),c=n(211),l=s(c),u=n(18),d=s(u),h=n(404),f=s(h),g=function(){function e(){r(this,e)}i(e,null,[{key:"gettingStartedUrl",get:function(){return"https://www.youtube.com/watch?v=vho2a6t-adk"}}]);return e}();t.VideoUrl=g;var p=function(){function e(t,n,i,s,o,c,u,d){"ngInject";r(this,e);this.$q=t;this.$state=n;this.$log=i;this.$window=s;this.$location=o;this.$mdDialog=c;this._firebaseService=u;this._storageService=d;this._staticService=void 0;this._errorDialog=a["default"].show;this._viewHelps=new l["default"];this._contextualPaywalls=new l["default"];this._features=new l["default"]}e.$inject=["$q","$state","$log","$window","$location","$mdDialog","FirebaseService","StorageService"];i(e,[{key:"goToHomePage",value:function(){this.$window.location.href="http://www.classkick.com"}},{key:"goToOrdersPage",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=f["default"].absRootUrl(this.$location)+"/#/order";e&&(t+="?active="+e);this.$window.open(t,"_blank")}},{key:"goToTeacherHelpCenter",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];e?this.$window.open("https://classkick.com/help","_blank"):this.$window.location.href="https://classkick.com/help"}},{key:"goToTeacherPO",value:function(){this.$window.open("https://drive.google.com/file/d/1PuzFuAmA6-bL_71teqT2F6vVsS03WIwD/view","_blank")}},{key:"goToAssignmentsLimitBlogPost",value:function(){this.$window.open("https://blog.classkick.com/updating-classkick-basic-and-pro-7d38c44fb67b","_blank")}},{key:"goToAssignmentsLimitFAQ",value:function(){this.$window.open("https://docs.google.com/document/d/1g-WIP22zbIk7o0z8PMWvAWQfj-6XjcDfjQfIlKqw3Ws/edit","_blank")}},{key:"goToTermsOfServicePage",value:function(){this.$window.open("https://www.classkick.com/terms-of-service","_blank")}},{key:"goToPrivacyPolicyPage",value:function(){this.$window.open("https://www.classkick.com/privacy-policy","_blank")}},{key:"recommendBestBrowser",value:function(){if((this.staticService.isIE||this.staticService.isEdge||this.staticService.isSafari||this.staticService.isFirefox)&&!this.staticService.isClasskickIPadApp&&!this._storageService.hasRecommendedBrowser){this.recommendChrome();this._storageService.hasRecommendedBrowser=!0}}},{key:"recommendChrome",value:function(){var e=this,t=[{text:"Download Chrome",action:a["default"].CANCEL},{text:"Continue to Classkick",action:a["default"].CANCEL}];this._errorDialog(this.$mdDialog,"Classkick works best in the Google Chrome browser! ","It will not work as well in Safari, Firefox, Internet Explorer, or other browsers",t)["catch"](function(n){n&&n.text===t[0].text&&(e.$window.location.href=e.CHROME_DOWNLOAD_ADDRESS)})}},{key:"goToGettingStartedVideo",value:function(){this.$window.open("https://www.youtube.com/watch?v=vho2a6t-adk","_blank")}},{key:"goToGettingStartedTutorialVideo",value:function(){this.$window.open("https://www.youtube.com/watch?v=ui1uVCZPCcg&list=PLRxpSUDPIfZm8Cm1B0KUWjoKu0SUlg3cQ","_blank")}},{key:"goToPortfolioStudentTutorialVideo",value:function(){this.$window.open("https://www.youtube.com/watch?v=iZ8wdU6qgo0","_blank")}},{key:"getViewHelps",value:function(){var e=this;return this._viewHelps.value(function(){return e._firebaseService.ref("view_helps",e._firebaseService.DefaultInstanceId).$once("value").then(function(t){if(t.exists())return t.val();e.$log.warn("could not find view helps");return void 0})})}},{key:"getContextualPaywalls",value:function(){var e=this;return this._contextualPaywalls.value(function(){return e._firebaseService.ref("universal_message/contextual_paywalls",e._firebaseService.DefaultInstanceId).$once("value").then(function(t){if(t.exists())return t.val().filter(function(e){return!!e});e.$log.warn("could not find contextual paywalls");return void 0})})}},{key:"getFeaturesList",value:function(){var e=this;return this._features.value(function(){return e._firebaseService.ref("universal_message/features_list",e._firebaseService.DefaultInstanceId).$once("value").then(function(t){if(t.exists())return t.val().filter(function(e){return!!e});e.$log.warn("could not find feature list");return void 0})})}},{key:"staticService",get:function(){this._staticService||(this._staticService=d["default"].get);return this._staticService}},{key:"CHROME_DOWNLOAD_ADDRESS",get:function(){return"https://www.google.com/chrome/browser/"}}]);return e}();t["default"]=p},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"displayRootUrl",value:function(t){return e.displayUrl(e.absRootUrl(t))}},{key:"displayUrl",value:function(e){return e.slice(e.indexOf("://")+3)}},{key:"host",value:function t(e){var t=e.host();80!==e.port()&&443!==e.port()&&(t=t+":"+e.port());return t}},{key:"absRootUrl",value:function(t){var n=t.protocol(),i=e.host(t);return n+"://"+i}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(406),a=s(o),c=n(355),l=s(c),u=n(407),d=function(){function e(t,n,i,s,o,c,u,d){"ngInject";r(this,e);this.$q=n;this.$log=d;this._environment=i;this._httpService=t;this._authService=c;this._firebaseService=s;this._bootstrapService=o;this._mixpanelService=u;this._assignmentCodec=new a["default"](this._firebaseService);this._classCodeCodec=new l["default"]}e.$inject=["HttpService","$q","environment","FirebaseService","BootstrapService","AuthService","MixpanelService","$log"];i(e,[{key:"getUserAssignments",value:function(e){return this.getForUser(e||this._authService.authData.id)}},{key:"getForCurrentUser",value:function(){return this.getForUser(this._authService.authData.id)}},{key:"getForUser",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/users/"+e+"/assignments?includeFolders=true")).then(function(e){return e.assignments.map(function(e){return t._assignmentCodec.decode(e)})})}},{key:"delete",value:function(e){return this._httpService.authDelete(this._uri("/v1/assignments/"+e))}},{key:"deleteFolder",value:function(e){return this._httpService.authDelete(this._uri("/v1/assignments/folder/"+e))}},{key:"create",value:function(e,t){var n=this;return this._httpService.authPost(this._uri("/v1/assignments"),{name:e.name,brief:e.brief,access:e.access,tags:e.tags||[],question_count:angular.isNumber(t)?t:3}).then(function(e){var t=n._assignmentCodec.decode(e);n._mixpanelService.assignmentCreated(t.id);return t})}},{key:"createFolder",value:function(e){var t=e.tags||[];t.push({name:u.AssignmentTags.FOLDER,data:{is_folder:!0}});return this.create({name:e.name,tags:t},0)}},{key:"get",value:function(e){var t=this,n=this._httpService.authGet(this._uri("/v1/assignments/"+e)).then(function(e){return t._assignmentCodec.decode(e)});n["catch"](function(){return t.$log.warn("Error getting assignment: "+e)});return n}},{key:"update",value:function(e){return this._httpService.authPut(this._uri("/v1/assignments/"+e.id),this._assignmentCodec.encode(e))}},{key:"duplicate",value:function(e,t){var n=this;return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/duplicate"),{name:t}).then(function(e){var t=n._assignmentCodec.decode(e);n._mixpanelService.assignmentCreated(t.id);return t})}},{key:"addQuestion",value:function(e,t){var n=this;return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/questions"),{before_question_id:t}).then(function(e){return n._assignmentCodec.decodeQuestion(e)})}},{key:"removeQuestion",value:function(e,t){return this._httpService.authDelete(this._uri("/v1/assignments/"+e+"/questions/"+t))}},{key:"updateQuestion",value:function(e,t,n){return this._httpService.authPut(this._uri("/v1/assignments/"+e+"/questions/"+t.id),{point_value:t.points,title:t.title,before_question_id:n})}},{key:"duplicateQuestion",value:function(e,t,n){return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/questions/"+t+"/duplicate"),{before_question_id:n})}},{key:"duplicateQuestionsAcrossAssigments",value:function(e,t,n){return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/questions/copy"),{to_assignment_id:t,question_ids:n})}},{key:"addOrUpdateRoster",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=this,r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4];return this._httpService.authPut(this._uri("/v1/assignments/"+e+"/rosters/"+t),{show_student_scores:n,lock_student_work:r,hide_student_work:s}).then(function(e){return i._classCodeCodec.decode(e.class_code)})}},{key:"removeRoster",value:function(e,t){return this._httpService.authDelete(this._uri("/v1/assignments/"+e+"/rosters/"+t))}},{key:"getRosterAssignments",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/rosters/"+e+"/assignments")).then(function(e){return e.assignments.map(function(e){return t._assignmentCodec.decode(e)})})}},{key:"shareOverEmail",value:function(e,t){return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/email"),{emails:t})}},{key:"shareAssignment",value:function(e,t){return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/share"),{emails:t})}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(297)["default"],c=n(293)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(164),d=l(u),h=n(407),f=l(h),g=n(272),p=l(g),m=n(408),v=l(m),_=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._firebaseService=e}r(t,e);s(t,[{key:"encode",value:function(e){return e?{id:e.id,owner_id:e.ownerId,name:e.name,brief:e.brief,access:e.access,last_modified:e.lastModified&&e.lastModified.toISOString(),parent_id:e.parentId,parent_modified:e.parentModified&&e.parentModified.toISOString(),questions:e.questions.map(function(e){return{id:e.id,title:e.title,element_list_id:e.elementListId,element_list_db:e.elementListDb,point_value:e.points}}),rosters:e.rosters,tags:this.encodeTags(e)}:null}},{key:"encodeTags",value:function(e){var t=[];t.push({name:h.AssignmentTags.FOLDER,data:{parent:e.folder}});angular.isDefined(e.isFolder)&&t.push({name:h.AssignmentTags.FOLDER,data:{is_folder:e.isFolder}});e.grades.forEach(function(e,n){t.push({name:h.AssignmentTags.GRADES,data:a({},n,e)})});e.subjects.forEach(function(e,n){t.push({name:h.AssignmentTags.SUBJECTS,data:a({},n,e)})});return t}},{key:"decode",value:function(e){var t=this;if(e){var n=this.extractTagData(e.tags,h.AssignmentTags.FOLDER),i=this.extractTagData(e.tags,h.AssignmentTags.GRADES),r=this.extractTagData(e.tags,h.AssignmentTags.SUBJECTS);return new f["default"](e.id,e.name,e.owner_id,e.questions.map(function(e){return t.decodeQuestion(e)}),e.brief,e.access,e.last_modified,e.rosters,n&&n.is_folder,n&&n.parent,i?this.objectToArray(i):[],r?this.objectToArray(r):[],e.parent_id,e.parent_modified)}return null}},{key:"extractTagData",value:function(e,t){var n=e&&e.find(function(e){return e.name===t});return n&&n.data}},{key:"objectToArray",value:function(e){return c(e).map(function(t){return e[t]})}},{key:"decodeQuestion",value:function(e){return new p["default"](e.id,new v["default"](e.element_list_id,e.element_list_db,this._firebaseService,"AssignmentQuestionElementList"),e.point_value,e.title)}}]);return t}(d["default"]);t["default"]=_;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){r(this,e)}i(e,null,[{key:"FOLDER",get:function(){return"folder"}},{key:"GRADES",get:function(){return"grades"}},{key:"SUBJECTS",get:function(){return"subjects"}}]);return e}();t.AssignmentTags=o;var a=function(){function e(){r(this,e)}i(e,null,[{key:"PreKThroughSecondGrade",get:function(){return["Pre-K","Kindergarten","1","2"]}},{key:"ThirdThroughFifth",get:function(){return["3","4","5"]}},{key:"SixthThroughEighth",get:function(){return["6","7","8"]}},{key:"NinthThroughTwelfth",get:function(){return["9","10","11","12"]}},{key:"College",get:function(){return["College"]}}]);return e}();t.GradeRanges=a;var c=[].concat(s(a.PreKThroughSecondGrade),s(a.ThirdThroughFifth),s(a.SixthThroughEighth),s(a.NinthThroughTwelfth),s(a.College)),l=["Art","Algebra","Arithmetic","Biology","Chemistry","Classroom Management","Computer Science","English Language Arts","English Language Learners","Foreign Language","French","Geometry","German","Geography","History","Interdisciplinary","Math","Music","Physics","Pre-Algebra","Professional Development","PBL","Reading","Science","STEM","Spanish","Social Studies","Templates","Virtual/E-learning","Writing"],u=function(){function e(){r(this,e)}i(e,null,[{key:"PUBLIC",get:function(){return"public"}}]);return e}();t.AssignmentAccess=u;var d=function(){function e(t,n,i,s,o,a,c,l,u,d,h,f,g,p){r(this,e);this._id=t;this._name=n;this._ownerId=i;this._questions=s;this._brief=o;this._access=a;this._lastModified=c?moment(c):void 0;this._rosters=l;this._isFolder=u;this._folder=d;this._grades=h;this._subjects=f;this._parentId=g;this._parentModified=p?moment(p):void 0}i(e,[{key:"stop",value:function(){this._questions.forEach(function(e){return e.stop()})}},{key:"indexForQuestionId",value:function(e){if(!e)return this._questions.length;var t=this._questions.findIndex(function(t){return t.id===e});if(t>-1)return t;throw new Error("question "+e+" is not in assignment")}},{key:"questionIdForIndex",value:function(e){var t=this._questions[e];return t&&t.id}},{key:"questionForId",value:function(e){return this.questions[this.indexForQuestionId(e)]}},{key:"questionForIndex",value:function(e){return this.questions[e]}},{key:"questionAfter",value:function(e){return this.questions[this.indexForQuestionId(e)+1]}},{key:"beforeQuestionId",value:function(e){var t=this.questionAfter(e);return t&&t.id}},{key:"questionNumberForId",value:function(e){var t=this.indexForQuestionId(e);return angular.isNumber(t)&&t+1;
}},{key:"totalPotentialPoints",value:function(){return this.questions.reduce(function(e,t){return e+100*t.points},0)/100}},{key:"mergeFrom",value:function(e,t){var n=this;if(e===this)return this;e.questions.forEach(function(e){var i=n.questions.findIndex(function(t){return t.id===e.id});i>=0?n.questions[i].mergeFrom(e):t&&e.stop()});return this}},{key:"initialElementCountForId",value:function(e){var t=this.questionForId(e);return t.elementCount}},{key:"initialElementCountForIndex",value:function(e){var t=this.questionIdForIndex(e);return this.initialElementCountForId(t)}},{key:"id",get:function(){return this._id}},{key:"isWork",get:function(){return!1}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"ownerId",get:function(){return this._ownerId}},{key:"questions",get:function(){return this._questions}},{key:"brief",get:function(){return this._brief},set:function(e){this._brief=e}},{key:"access",get:function(){return this._access},set:function(e){this._access=e}},{key:"lastModified",get:function(){return this._lastModified}},{key:"lastModifiedAsDate",get:function(){return this._lastModified.format("MM/DD/YYYY")}},{key:"rosters",get:function(){return this._rosters}},{key:"isFolder",get:function(){return this._isFolder}},{key:"folder",get:function(){return this._folder},set:function(e){this._folder=e}},{key:"parentFolderId",get:function(){}},{key:"grades",get:function(){return this._grades},set:function(e){this._grades=e}},{key:"displayGrades",get:function(){return this.grades&&this.grades.join(", ")}},{key:"subjects",get:function(){return this._subjects},set:function(e){this._subjects=e}},{key:"displaySubjects",get:function(){return this.subjects&&this.subjects.join(", ")}},{key:"parentId",get:function(){return this._parentId},set:function(e){this._parentId=e}},{key:"parentModified",get:function(){return this._parentModified}}],[{key:"ASSIGNMENT_TITLE_MAX_LENGTH",get:function(){return 80}},{key:"Grades",get:function(){return c}},{key:"Subjects",get:function(){return l}}]);return e}();t["default"]=d},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(293)["default"],l=n(133)["default"],u=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(194),h=u(d),f=n(409),g=u(f),p=n(196),m=u(p),v=n(411),_=u(v),y=n(215),k=u(y),b=n(131),S=u(b),w=n(117),C=u(w),E=new m["default"]("/element_lists/{id}",{elements:new _["default"]("/elements",function(e){return e._listen},function(e){return e.elements},new k["default"])}),T=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._elementList=e}r(t,e);s(t,[{key:"onAdded",value:function(){this._elementList.invalidateCount()}},{key:"onRemoved",value:function(){this._elementList.invalidateCount()}},{key:"onChanged",value:function(){}}]);return t}(C["default"]),I=function(e){function t(e,n,r){var s=arguments.length<=3||void 0===arguments[3]?"":arguments[3];o(this,t);s=s+"[instance="+n+", id="+e+"]";i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(new a).set("id",e),E,n,r,void 0,void 0,s);this._elements=new g["default"](S["default"].merge);this._elements.subscribe(new T(this));this._elementCodec=new k["default"];this._logTrace("cstr complete")}r(t,e);s(t,[{key:"saveElement",value:function(e){this.remoteAdd(e);return this.firebase.upsertChild(this.mapping.properties.elements,e)}},{key:"remoteAdd",value:function(e){if(this._listen&&!this.elements.has(e.id)){this._logTrace("remoteAdd id="+e.id);this.elements._remoteAdd(e)}}},{key:"removeElement",value:function(e){this._logTrace("removeElement id="+e.id);return this.firebase.removeChild(this.mapping.properties.elements,e)}},{key:"invalidateCount",value:function(){this._elementCount=void 0}},{key:"id",get:function(){return this.ids.get("id")}},{key:"elements",get:function(){return this._elements}},{key:"elementCount",get:function(){var e=this;return angular.isUndefined(this._elementCount)?this.firebaseService.ref("/element_lists/"+this.id,this.firebaseInstanceId).$once("value").then(function(t){var n=t.val();if(angular.isUndefined(n)||null===n||angular.isUndefined(n.elements))return 0;var i=t.val().elements,r=c(i),s=r.length;e._elementCount=s;return s}):l.resolve(this._elementCount)}},{key:"allElements",get:function(){var e=this;return angular.isUndefined(this._allElements)?this.firebaseService.ref("/element_lists/"+this.id,this._firebaseInstanceId).$once("value").then(function(t){var n=t.val();if(angular.isUndefined(n)||null===n||angular.isUndefined(n.elements))return[];var i=t.val().elements,r=c(i);e._allElements=r.map(function(t){return e._elementCodec.decode(i[t],t)});return e._allElements}):l.resolve(this._allElements)}}]);return t}(h["default"]);t["default"]=I;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(410),u=c(l),d=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._idArray=[];this._objectMap=new a;this._merge=e}r(t,e);s(t,[{key:"valueAtIndex",value:function(e){return this._objectMap.get(this._idArray[e])}},{key:"valueForId",value:function(e){return this._objectMap.has(e)?this._objectMap.get(e):void 0}},{key:"indexOf",value:function(e){for(var t=0;t<this._idArray.length;t++)if(this._idArray[t]===e.id)return t;return-1}},{key:"has",value:function(e){return this._objectMap.has(e)}},{key:"forEach",value:function(e){for(var t=0;t<this._idArray.length;t++){var n=this._objectMap.get(this._idArray[t]),i=e(n,n.id,t);if(i===!0)return}}},{key:"map",value:function(e){var t=[];e=e||function(e){return e};this.forEach(function(n,i){t.push(e(n,i))});return t}},{key:"filter",value:function(e){var t=[];this.forEach(function(n,i){e(n,i)&&t.push(n)});return t}},{key:"find",value:function(e){var t=this.filter(e);return t[0]}},{key:"some",value:function(e){var t=!1;this.forEach(function(n,i){return t=e(n,i)});return t}},{key:"_remoteAdd",value:function(e){t.verify(e);if(!this._objectMap.has(e.id)){this._idArray.push(e.id);this._objectMap.set(e.id,e);this._onAdded(e)}return this}},{key:"_remoteRemove",value:function(e){t.verify(e);if(this._objectMap.has(e.id)){var n=this._objectMap.get(e.id),i=this.indexOf(e);this._idArray.splice(i,1);this._objectMap["delete"](e.id);this._onRemoved(n)}return this}},{key:"_remoteChange",value:function(e){t.verify(e);if(this._objectMap.has(e.id)){var n=this._objectMap.get(e.id);if(this._merge){this._merge(n,e);this._onChanged(n,n)}else{this._objectMap.set(e.id,e);this._onChanged(e,n)}}return this}},{key:"size",get:function(){return this._objectMap.size}}],[{key:"verify",value:function(e){if(angular.isUndefined(e.id))throw Error("Children must have a member .id")}}]);return t}(u["default"]);t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),a=s(o),c=function(){function e(){r(this,e);this._observers=[]}i(e,[{key:"forEach",value:function(e){throw new Error("not implemented: "+e)}},{key:"subscribe",value:function(e){var t=this;this._observers.push(e);this.forEach(function(n){return e.onAdded(n,t)});return e}},{key:"unsubscribe",value:function(e){this._observers=this._observers.filter(function(t){return t!==e});return e}},{key:"_raise",value:function(e,t,n,i,r){var s=this;this._observers.forEach(function(o){try{n?o.onAdded(e,s):i?o.onRemoved(t,s):r&&o.onChanged(e,t,s)}catch(c){a["default"].get.$log.error("callback error",c,o)}})}},{key:"clear",value:function(){this._observers=[]}},{key:"_onAdded",value:function(e){this._raise(e,null,!0,!1,!1)}},{key:"_onRemoved",value:function(e){this._raise(null,e,!1,!0,!1)}},{key:"_onChanged",value:function(e,t){this._raise(e,t,!1,!1,!0)}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(198),l=a(c),u=function(e){function t(e,n,r,s){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,s);this._getter=r}r(t,e);s(t,[{key:"get",value:function(e){return this._getter(e)}},{key:"_onAdded",value:function(e,t,n){this.get(e)._remoteAdd(t,n)}},{key:"_onRemoved",value:function(e,t){this.get(e)._remoteRemove(t)}},{key:"_onChanged",value:function(e,t,n){this.get(e)._remoteChange(t,n)}},{key:"isCollection",get:function(){return!0}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(133)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(413),l=a(c),u=n(414),d=a(u),h=n(150),f=a(h),g=n(147),p=a(g),m=n(276),v=(a(m),n(154)),_=a(v),y=n(144),k=a(y),b=n(222),S=a(b),w=n(146),C=a(w),E=n(371),T=n(219),I=a(T),A=n(249),x=a(A),O=n(258),P=a(O),R=n(210),D=a(R),M=n(415),N=a(M),L=function(){function e(t,n,i,o,a,c,l,u,d){"ngInject";r(this,e);this.$rootScope=t;this.$timeout=i;this.$q=n;this.$log=o;this._mediaService=a;this._assignmentService=c;this._imageEditService=l;this._assignmentWorkService=u;this._manipulativeElementService=d;this._cascadeStart=50;this._cascadeIncrement=50;this._target=null;this._assignment=null;this._assignmentWork=null;this._previewModified=new p["default"](this);this._modified=new p["default"](this);this._undoStackUpdated=new p["default"](this);this._workObservers=new s;this._assignmentObservers=new s;this._assignmentUndo=void 0;this._workUndo=void 0}e.$inject=["$rootScope","$q","$timeout","$log","MediaService","AssignmentService","ImageEditService","AssignmentWorkService","ManipulativeElementService"];i(e,[{key:"clearTarget",value:function(){this.target=null}},{key:"_raiseModification",value:function(e,t,n){e.raise({type:t,element:n})}},{key:"createElement",value:function(e,t,n){var i=this;this._raiseModification(this._previewModified,this.MODIFICATION_CREATE,e);var r=this._questionForIndex(t,n);return this._createElement(r,e).then(function(t){var s=new f["default"](e.id||t,e.fromSnapshot);i._undoStack(n).push(s,r);i.undoStackUpdated.raise(s);i._raiseModification(i._modified,i.MODIFICATION_CREATE,e)})}},{key:"_createElement",value:function(e,t){if(t.isParentManipulative){e.remoteAdd(t);return this._manipulativeElementService.createParent(this.assignment.id,e.id,t).then(function(e){return e.id})}return e.saveElement(t)}},{key:"deleteElements",value:function(e,t,n){var i=this;if(0===e.length)return o.resolve();var r=this._questionForIndex(t,n),s=e.map(function(e){return i._deleteElement(e,t,n)}),a=e.map(function(e){return new f["default"](e.id,e.fromSnapshot,e.snapshot(),!0)}),c=new N["default"](a);this._undoStack(n).push(c,r);this.undoStackUpdated.raise(c);return o.all(s)}},{key:"deleteElement",value:function(e,t,n){e.flush();var i=this._questionForIndex(t,n),r=this._deleteElement(e,t,n),s=new f["default"](e.id,e.fromSnapshot,e.snapshot(),!0);this._undoStack(n).push(s,i);this.undoStackUpdated.raise(s);return r}},{key:"_init",value:function(e){var t=this;this._assignment&&this._assignment.questions.forEach(function(e){if(t._assignmentObservers.has(e.id)){var n=t._assignmentObservers.get(e.id);n.stop(e)}});this._assignmentWork&&this._assignmentWork.questions.forEach(function(e){if(t._workObservers.has(e.id)){var n=t._workObservers.get(e.id);n.stop(e)}});e();this._assignmentUndo&&this._assignment.id===this._assignmentUndo.id||(this._assignmentUndo=new d["default"](this.assignment.id,this.undoCreate.bind(this),this.undoRemove.bind(this),this.undoChange.bind(this)));this._workUndo=new d["default"](this.assignment.id,this.undoCreate.bind(this),this.undoRemove.bind(this),this.undoChange.bind(this));this._assignmentObservers=new s;this._workObservers=new s;this._assignment&&this._assignment.questions.forEach(function(e,n){var i=new l["default"](t,n,!1);i.start(e);t._assignmentObservers.set(e.id,i)});this._assignmentWork&&this._assignmentWork.questions.forEach(function(e,n){try{var i=t._assignmentWork.indexForQuestionId(n),r=new l["default"](t,i,!0);r.start(e);t._workObservers.set(e.id,r)}catch(s){t.$log.error(s)}})}},{key:"_previewElementChanged",value:function(e){this._raiseModification(this._previewModified,this.MODIFICATION_UPDATE,e)}},{key:"_elementChanged",value:function(e,t,n){var i=this,r=this._questionForIndex(t,n),s=r.elements.valueForId(e.elementId);e.deleted?this._deleteElement(s,t,n):this._write(t,n,function(e){return i._saveElement(e,s)}).then(function(){i._raiseModification(i._modified,i.MODIFICATION_UPDATE,s)});this._undoStack(n).push(e,r);this.undoStackUpdated.raise(e)}},{key:"_saveElement",value:function(e,t){return t.isParentManipulative?this._manipulativeElementService.updateParent(this.assignment.id,e.id,t):t.isChildManipulative?this._manipulativeElementService.updateChild(this.assignmentWork.id,e.id,t):e.saveElement(t)}},{key:"_deleteElement",value:function(e,t,n){var i=this;this._raiseModification(this._previewModified,this.MODIFICATION_DELETE,e);return this._write(t,n,function(t){i._removeElementSideEffects(t,e);return i._removeElement(t,e)}).then(function(){i._raiseModification(i._modified,i.MODIFICATION_DELETE,e)})}},{key:"_removeElement",value:function(e,t){return t.isParentManipulative?this._manipulativeElementService.deleteParent(this.assignment.id,e.id,t.id):t.isChildManipulative?void 0:e.removeElement(t)}},{key:"_removeElementSideEffects",value:function(e,t){t.type===S["default"].type||t.type===I["default"].type||t.type===P["default"].type?this._mediaService["delete"](t.id,t.url,e.elementListId):t.type===x["default"].type&&this._removeScoreFromQuestion(e,t.score)}},{key:"_undoStack",value:function(e){return e?this._workUndo:this._assignmentUndo}},{key:"_questionForIndex",value:function(e,t){return t?this._assignmentWork.questionForIndex(e):this._assignment.questions[e]}},{key:"_write",value:function(e,t,n){return n(t?this._assignmentWork.questionForIndex(e):this._assignment.questions[e])}},{key:"_writer",value:function(e,t){var n=this;return function(i){n._write(e,t,i)}}},{key:"canUndo",value:function(e,t){var n=this._questionForIndex(e,t);return n?!this._undoStack(t).isUndoEmpty(n):!1}},{key:"undo",value:function(e,t){var n=this._questionForIndex(e,t);n.elements.forEach(function(e){return e.flush()});var i=this._undoStack(t).undo(n);this.undoStackUpdated.raise(i);return i}},{key:"canRedo",value:function(e,t){var n=this._questionForIndex(e,t);return n?!this._undoStack(t).isRedoEmpty(n):!1}},{key:"redo",value:function(e,t){var n=this._questionForIndex(e,t),i=this._undoStack(t).redo(n);this.undoStackUpdated.raise(i);return i}},{key:"importImages",value:function(e,t,n,i,r){var o=this,a=new s;return this._updateTarget(e.newQuestions,t).then(function(t){return o._addImages(e.images,t.newTarget,n,i,a,r)})}},{key:"_updateTarget",value:function(e,t){var n=this;if(0===e.length)return this.$q.resolve({newTarget:t,originalTarget:t});var i=t.isWork?t.assignment:t,r=this.target;return this._addQuestions(e,i).then(function(){return t.isWork?t:n._assignmentService.get(i.id)}).then(function(e){n.target=e;return{newTarget:e,originalTarget:r}})}},{key:"_addQuestions",value:function(e,t){var n=this;if(0===e.length)return this.$q.resolve(t);var i=e[0];return this._assignmentService.addQuestion(t.id,i.beforeQuestionId).then(function(r){i.questionId=r.id;t.questions.splice(i.index,0,r);return n._addQuestions(e.slice(1),t)})}},{key:"_addImages",value:function(e,t,n,i,r,s){var o=this;if(0===e.length)return this.$q.resolve(t);var a=e[0];return this._addImageDestinations(a.destinations,a,t,n,i,r,s).then(function(){return o._addImages(e.slice(1),t,n,i,r,s)})}},{key:"_addImageDestinations",value:function(e,t,n,i,r,s,o){var a=this;if(0===e.length)return this.$q.resolve();var c=e[0].questionId,l=o===c,u=n.isWork,d=n.indexForQuestionId(c),h=u?n.questions.get(c).elementListId:n.questions[d].elementListId;return this._addImage(t,h,i,d,u,r,s,l).then(function(){return a._addImageDestinations(e.slice(1),t,n,i,r,s,o)})}},{key:"_addImage",value:function(e,t,n,i,r,s,o,a){var c=this,l=void 0;l=e.originalFile&&e.originalFile.type===D["default"].IMAGE_GIF?e.originalFile:this._imageEditService.dataURItoBlob(e.imageSrc);return this._mediaService.create(l,n.intent,t).then(function(e){return c.$q.all({image:c._imageEditService.imageFromUrl(e.mediaLink),mediaLink:e.mediaLink,newElementId:e.newElementId})}).then(function(i){var r=new C["default"](i.image.naturalWidth,i.image.naturalHeight),l=e.isManipulative?P["default"]:S["default"];return new l(i.newElementId,n.copy(),c._getLocation(s,o,t,r,a),r,1,0,i.mediaLink)}).then(function(e){return c.createElement(e,i,r)})}},{key:"_getLocation",value:function(e,t,n,i,r){var s=t.has(n)?t.get(n):this._cascadeStart;t.set(n,s+this._cascadeIncrement);return r?new k["default"](.5*_["default"].INITIAL_WIDTH,e.elementOffset(new k["default"](0,s)).y+.5*i.height):new k["default"](.5*_["default"].INITIAL_WIDTH,s+.5*i.height)}},{key:"_removeScoreFromQuestion",value:function(e,t){if(angular.isNumber(e.points)&&angular.isNumber(t)){e.points=parseFloat((e.points-t).toFixed(2));e.points<0&&(e.points=0);this._assignmentWorkService.updateQuestion(this.assignment.id,this.assignmentWork.id,e)}}},{key:"undoCreate",value:function(e,t){this._removeElementSideEffects(e,t);this._removeElement(e,t)}},{key:"undoRemove",value:function(e,t){this._restoreElementSideEffects(e,t);this._restoreElement(e,t)}},{key:"_restoreElement",value:function(e,t){return t.isParentManipulative?this._manipulativeElementService.restoreParent(this.assignment.id,e.id,t.id):t.isChildManipulative?void 0:e.saveElement(t)}},{key:"_restoreElementSideEffects",value:function(e,t){t.type===S["default"].type||t.type===I["default"].type||t.type===P["default"].type?this._mediaService.restore(t.id,t.url,e.elementListId):t.type===x["default"].type&&this._addScoreToQuestion(e,t.score)}},{key:"_addScoreToQuestion",value:function(e,t){if(angular.isNumber(e.points)&&angular.isNumber(t)){e.points=Math.min(e.points+t,E.GradeInputDirectiveController.MAX_GRADE);this._assignmentWorkService.updateQuestion(this.assignment.id,this.assignmentWork.id,e)}}},{key:"undoChange",value:function(e,t){this._saveElement(e,t)}},{key:"target",set:function(e){var t=this;this._init(function(){t._target=e;if(e&&e.isWork){t._assignment=e.assignment;t._assignmentWork=e}else{t._assignment=e;t._assignmentWork=null}})},get:function(){return this._target}},{key:"previewModified",get:function(){return this._previewModified}},{key:"modified",get:function(){return this._modified}},{key:"undoStackUpdated",get:function(){return this._undoStackUpdated}},{key:"assignment",get:function(){return this._assignment}},{key:"assignmentWork",get:function(){return this._assignmentWork}},{key:"MODIFICATION_CREATE",get:function(){return"create"}},{key:"MODIFICATION_UPDATE",get:function(){return"update"}},{key:"MODIFICATION_DELETE",get:function(){return"delete"}}]);return e}();t["default"]=L;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(117),l=a(c),u=function(e){function t(e,n,r){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._service=e;this._index=n;this._isWork=r}r(t,e);s(t,[{key:"onAdded",value:function(e){e.deleted.subscribe(this._elementChanged,this);e.changed.subscribe(this._elementChanged,this);e.previewChanged.subscribe(this._previewElementChanged,this)}},{key:"onRemoved",value:function(e){e.deleted.unsubscribe(this._elementChanged,this);e.changed.unsubscribe(this._elementChanged,this);e.previewChanged.unsubscribe(this._previewElementChanged,this)}},{key:"onChanged",value:function(e,t){this.onRemoved(t);this.onAdded(e)}},{key:"_elementChanged",value:function(e){this._service._elementChanged(e,this._index,this._isWork)}},{key:"_previewElementChanged",value:function(e){this._service._previewElementChanged(e)}},{key:"start",value:function(e){e.elements.subscribe(this)}},{key:"stop",value:function(e){var t=this;e.elements.unsubscribe(this);e.elements.forEach(function(e){t.onRemoved(e)});this._service=null}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=25,a=function(){function e(t,n,i,o){r(this,e);this._id=t;this._undoCreate=n;this._undoRemove=i;this._undoChange=o;this._undo=new s;this._redo=new s}i(e,[{key:"push",value:function(e,t){this._undo.has(t.id)||this._undo.set(t.id,[]);this._undo.get(t.id).push(e);this._redo.set(t.id,[]);this._undo.get(t.id).length>o&&this._undo.get(t.id).splice(0,1)}},{key:"undo",value:function(e){if(!this.isUndoEmpty(e)){var t=this._undo.get(e.id).pop(),n=t.undo(e,this._undoCreate,this._undoRemove,this._undoChange);this._redo.get(e.id).push(n);return n}}},{key:"redo",value:function(e){if(!this.isRedoEmpty(e)){var t=this._redo.get(e.id).pop(),n=t.undo(e,this._undoCreate,this._undoRemove,this._undoChange);this._undo.get(e.id).push(n);return n}}},{key:"isUndoEmpty",value:function(e){return!this._undo.has(e.id)||0===this._undo.get(e.id).length}},{key:"isRedoEmpty",value:function(e){return!this._redo.has(e.id)||0===this._redo.get(e.id).length}},{key:"id",get:function(){return this._id}}]);return e}();t["default"]=a;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){r(this,e);this._changes=t;this._deleted=t.every(function(e){return e.deleted})}i(e,[{key:"undo",value:function(t,n,i,r){var s=this._changes.map(function(e){return e.undo(t,n,i,r)});return new e(s)}},{key:"deleted",get:function(){return this._deleted}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(417),l=a(c),u=n(117),d=a(u),h=n(234),f=a(h),g=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.service=e}r(t,e);s(t,[{key:"onAdded",value:function(e){e.focused.subscribe(this.service._focus,this.service);e.deleted.subscribe(this.service._deleted,this.service);e.focusNextElement.subscribe(this.service._focusNextElement,this.service);e.focusPrevElement.subscribe(this.service._focusPreviousElement,this.service)}},{key:"onRemoved",value:function(e){e.focused.unsubscribe(this.service._focus,this.service);e.deleted.unsubscribe(this.service._deleted,this.service);e.focusNextElement.unsubscribe(this.service._focusNextElement,this.service);e.focusPrevElement.unsubscribe(this.service._focusPreviousElement,this.service)}},{key:"onChanged",value:function(){}}]);return t}(d["default"]),p=function(){function e(t){"ngInject";var n=this;o(this,e);this._toolbarService=t;this._inputPipe=new l["default"];this._focusedElement=void 0;this._elementList=void 0;this._elementListObserver=new g(this);this._anonHandleClick=function(e){return n._handleClick(e)};this._body=angular.element("body");this._body.on("click",this._anonHandleClick)}e.$inject=["ToolbarService"];s(e,[{key:"_focus",value:function(e,t){this.focusedElement=t}},{key:"_deleted",value:function(e,t){this.focusedElement&&this.focusedElement.id===t.id&&(this.focusedElement=void 0)}},{key:"_focusNextElement",value:function(e,t){this._moveFocus(t,1,0)}},{key:"_focusPreviousElement",value:function(e,t){this._moveFocus(t,-1,this._elementList.size-1)}},{key:"_moveFocus",value:function(e,t,n){var i=this._elementList.indexOf(e),r=this._elementList.valueAtIndex(i+t)||this._elementList.valueAtIndex(n);r&&r.focus()}},{key:"_handleClick",value:function(e){e.originalEvent&&(e.target instanceof SVGElement||e.originalEvent.preventElementBlur?e.originalEvent.preventElementBlur&&this._isTextbox(this.focusedElement)&&this.refocusInput():this.focusedElement=void 0)}},{key:"refocusElement",value:function(){this.focusedElement=this.focusedElement}},{key:"refocusInput",value:function(){this._inputPipe.focusInput()}},{key:"_isTextbox",value:function(e){return e&&e instanceof f["default"]}},{key:"elementList",set:function(e){var t=this;if(this._elementList){this._elementList.unsubscribe(this._elementListObserver);this._elementList.forEach(function(e){t._elementListObserver.onRemoved(e)})}this._elementList=e;this._elementList?this._elementList.subscribe(this._elementListObserver):this.focusedElement=void 0}},{key:"focusedElement",set:function(e){this._elementList&&this._elementList.forEach(function(t){e&&t.id===e.id||angular.isDefined(t.blur)&&t.blur()});this._isTextbox(this.focusedElement)&&this._inputPipe.blur();this._isTextbox(e)&&this._inputPipe.focus(e);this._focusedElement=e;this._toolbarService.focusedElement=e},get:function(){return this._focusedElement}}]);return e}();t["default"]=p;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(418),a=s(o),c=n(18),l=s(c),u=n(233),d=s(u),h=function(){function e(){var t=this;r(this,e);this._input=null;this._textbox=null;this._body=angular.element("body");this._anonHandleInput=function(e){return t._handleInput(e)};this._anonHandleKeydown=function(e){return t._handleKeydown(e)};this._anonHandleSelect=function(e){return t._handleSelect(e)}}i(e,[{key:"focus",value:function(e){this._input=e.hiddenTextInput;this._textbox=e;this._syncVisibleToHidden(this._input,this._textbox);this._moveHiddenInput(this._input,this._textbox);this._input.on("input",this._anonHandleInput);this._input.on("select",this._anonHandleSelect);this._body.on("keydown",this._anonHandleKeydown);this._textbox.selectionChanged.subscribe(this._handleSelectionChanged,this);this.focusInput()}},{key:"blur",value:function(){if(this._input){this._input.off("input",this._anonHandleInput);this._input.off("select",this._anonHandleSelect);this._body.off("keydown",this._anonHandleKeydown);this._textbox.selectionChanged.unsubscribe(this._handleSelectionChanged,this);this._input.val("");this._input.blur()}}},{key:"_handleInput",value:function(){this._syncHiddenToVisible(this._input,this._textbox);this._moveHiddenInput(this._input,this._textbox)}},{key:"_handleSelect",value:function(){this._syncHiddenToVisibleSelection(this._input,this._textbox);this._moveHiddenInput(this._input,this._textbox)}},{key:"_handleKeydown",value:function(e){if(this._isArrow(e)){e.preventDefault();e.shiftKey?this._textbox.shiftArrowPressed(e.which):this._textbox.arrowPressed(e.which);this._syncVisibleToHidden(this._input,this._textbox);this._textbox.setActiveColor(this._startIndex)}else if(this._isTab(e)){e.preventDefault();e.shiftKey&&this._textbox.shiftTabPressed?this._textbox.shiftTabPressed():this._textbox.tabPressed&&this._textbox.tabPressed()}}},{key:"_handleSelectionChanged",value:function(){this._syncVisibleToHidden(this._input,this._textbox);this._textbox.setActiveColor(this._startIndex)}},{key:"_syncVisibleToHidden",value:function(e,t){e.val(t.text);a["default"].selectRange(e[0],t.startIndex,t.endIndex)}},{key:"_syncHiddenToVisible",value:function(e,t){this._syncHiddenToVisibleInput(e,t);this._syncHiddenToVisibleSelection(e,t)}},{key:"_syncHiddenToVisibleInput",value:function(e,t){var n=e.val();n.length<=d["default"].CHARACTER_LIMIT?t.setText(n,this._startIndex,this._endIndex):this._syncVisibleToHidden(e,t)}},{key:"_syncHiddenToVisibleSelection",value:function(e,t){var n=e.prop("selectionStart"),i=e.prop("selectionEnd");t.setSelection(n,i)}},{key:"_moveHiddenInput",value:function(e,t){e.css({top:t.cursorLocation.y});angular.isFunction(e[0].scrollIntoViewIfNeeded)&&!this._isMobileSafari?e[0].scrollIntoViewIfNeeded(!0):angular.isFunction(e[0].scrollIntoView)&&this._isMobile&&e[0].scrollIntoView()}},{key:"focusInput",value:function(){this._input.focus()}},{key:"_isArrow",value:function(e){return 37===e.which||39===e.which||38===e.which||40===e.which}},{key:"_isTab",value:function(e){return 9===e.which}},{key:"_isMobile",get:function(){return l["default"].get.isMobile}},{key:"_isMobileSafari",get:function(){return this._isMobile&&l["default"].get.isSafari}},{key:"_startIndex",get:function(){return this._input&&this._input.prop("selectionStart")}},{key:"_endIndex",get:function(){return this._input&&this._input.prop("selectionEnd")}}]);return e}();t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"selectRange",value:function(e,t,n){angular.isUndefined(n)&&(n=t);if("selectionStart"in e){e.selectionStart=t;e.selectionEnd=n}else if(e.setSelectionRange)e.setSelectionRange(t,n);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0);i.moveEnd("character",n);i.moveStart("character",t);i.select()}}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(420),a=s(o),c=n(191),l=s(c),u=n(202),d=s(u),h=function(){function e(t,n,i,s,o,c){"ngInject";r(this,e);this.$q=t;this._httpService=n;this._firebaseService=o;this._authService=c;this._environment=i;this._notificationService=s;this._helpRequestCodec=new a["default"]}e.$inject=["$q","HttpService","environment","NotificationService","FirebaseService","AuthService"];i(e,[{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/help-requests/"+e).then(function(e){return t._helpRequestCodec.decode(e)})}},{key:"create",value:function(e,t,n,i){var r=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/help-requests",{roster_id:e,assignment_id:t,question_id:n,request_type:i}).then(function(e){return r._helpRequestCodec.decode(e)})}},{key:"cancel",value:function(e){var t=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/help-requests/"+e+"/cancel",{}).then(function(e){return t._helpRequestCodec.decode(e)})}},{key:"resolve",value:function(e){var t=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/help-requests/"+e+"/resolve",{}).then(function(e){return t._helpRequestCodec.decode(e)})}},{key:"getHelpRequestsForAssignment",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/help-requests/assignments/"+e).then(function(e){return e.help_requests.map(function(e){return t._helpRequestCodec.decode(e)})})}},{key:"getHelpRequestsForRoster",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/help-requests/rosters/"+e).then(function(e){return e.help_requests.map(function(e){return t._helpRequestCodec.decode(e)})})}},{key:"getHelpRequestsForPeers",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return this._httpService.authGet(this._environment.serverUrlBase+"/v1/help-requests/assignments/"+e+"/rosters/"+t,{params:{includeResolved:i}}).then(function(e){return e.help_requests.map(function(e){return n._helpRequestCodec.decode(e)})})}},{key:"getHelpRequestSetForPeers",value:function(e,t,n){var i=this,r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return this.getHelpRequestsForPeers(t,n,r).then(function(s){var o=i._notificationService.getHelpRequestNotificationForPeers(e,t,n,!1);o.helpRequestService=i;var a=r?l["default"].FILTER_FUNC_ALL:l["default"].FILTER_FUNC_UNRESOLVED;return new l["default"](s,o,a)})}},{key:"getHelpRequestSetForAssignment",
value:function(e,t){var n=this;return this.getHelpRequestsForAssignment(t).then(function(i){var r=n._notificationService.getHelpRequestNotificationForAssignment(e,t,!1);r.helpRequestService=n;return new l["default"](i,r,l["default"].FILTER_FUNC_UNRESOLVED)})}},{key:"getHelpRequestSetForRoster",value:function(e,t){var n=this;return this.getHelpRequestsForRoster(t).then(function(i){var r=n._notificationService.getHelpRequestNotificationForRoster(e,t,!1);r.helpRequestService=n;return new l["default"](i,r,l["default"].FILTER_FUNC_UNRESOLVED)})}},{key:"combineHelpRequestSets",value:function(e){return l["default"].combine(e)}},{key:"lowerHand",value:function(e,t,n){var i=this;this.resolve(e.id).then(function(){var e=new d["default"](i._firebaseService.newId(),u.ChatMessageTypes.HAND_DOWN,n.id,n.name,"",moment());return t.messages.save(e)})}}]);return e}();t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(189),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return e?{id:e.id,helpee_id:e.helpeeId,roster_id:e.rosterId,assignment_id:e.assignmentId,question_id:e.questionId,request_type:e.requestType,created:e.created&&e.created.toISOString(),resolved:e.resolved&&e.resolved.toISOString(),helper_id:e.helperId,helper_role:e.helperRole}:null}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.helpee_id,e.roster_id,e.assignment_id,e.question_id,e.request_type,e.created,e.resolved,e.helper_id,e.helper_role):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(422),a=s(o),c=n(424),l=s(c),u=n(149),d=(s(u),function(){function e(t,n,i,s,o){"ngInject";r(this,e);this.$q=t;this._environment=n;this._firebaseService=s;this._httpService=i;this._authService=o;this._rosterCodec=new a["default"];this._userCodec=new l["default"]}e.$inject=["$q","environment","HttpService","FirebaseService","AuthService"];i(e,[{key:"getUserRosters",value:function(){var e=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/users/"+this._authService.authData.id+"/rosters").then(function(t){return t.rosters.map(function(t){return e._rosterCodec.decode(t)})})}},{key:"create",value:function(e){var t=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/rosters",{name:e.name,color:e.color,allow_peer_help:e.allowPeerHelp,allow_new_members:e.allowNewMembers,allow_multi_login:e.allowMultiLogin}).then(function(e){return t._rosterCodec.decode(e)})}},{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/rosters/"+e).then(function(e){return t._rosterCodec.decode(e)})}},{key:"update",value:function(e){return this._httpService.authPut(this._environment.serverUrlBase+"/v1/rosters/"+e.id,this._rosterCodec.encode(e))}},{key:"delete",value:function(e){return this._httpService.authDelete(this._environment.serverUrlBase+"/v1/rosters/"+e)}},{key:"getUsersForRoster",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users").then(function(e){return e.users.map(function(e){return t._userCodec.decode(e)})})}},{key:"getUserForRoster",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users/"+t).then(function(e){return n._userCodec.decode(e)})}},{key:"addMember",value:function(e,t){return this._httpService.authPost(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users",{user_id:t})}},{key:"removeMember",value:function(e,t){return this._httpService.authDelete(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users/"+t)}},{key:"addAnonymousMember",value:function(e,t){return this._httpService.authPost(this._environment.serverUrlBase+"/v1/rosters/"+e+"/anonymous-student",{name:t})}},{key:"getUserMemberRosters",value:function(){var e=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/users/"+this._authService.authData.id+"/member-rosters").then(function(t){return{rosterOwners:t.roster_owners.map(function(t){return e._userCodec.decode(t)}),rosters:t.rosters.map(function(t){return e._rosterCodec.decode(t)})}})}},{key:"addSelf",value:function(e){return this._httpService.authPost(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users/self",{})}},{key:"createGoogleRoster",value:function(e){var t=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/rosters/google",e).then(function(e){return t._rosterCodec.decode(e)})}},{key:"updateClasskickRosterWithGoogleStudents",value:function(e,t){return this._httpService.authPut(this._environment.serverUrlBase+"/v1/rosters/"+e+"/google-sync",{students:t})}}]);return e}());t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(423),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{id:e.id,owner_id:e.ownerId,name:e.name,color:e.color,allow_peer_help:e.allowPeerHelp,allow_new_members:e.allowNewMembers,allow_multi_login:e.allowMultiLogin,properties:e.properties}}},{key:"decode",value:function(e){return new d["default"](e.id,e.owner_id,e.name,e.color,e.allow_peer_help,e.allow_new_members,e.allow_multi_login,e.properties)}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"PROVIDER",get:function(){return"provider"}},{key:"GOOGLE",get:function(){return"google"}},{key:"PROVIDER_DATA",get:function(){return"provider_data"}},{key:"GOOGLE_COURSE_ID",get:function(){return"course_id"}},{key:"STUDENT_ACCOUNT_PREFERENCE",get:function(){return"student_account_preference"}}]);return e}();t.RosterProperties=s;var o=function(){function e(){r(this,e)}i(e,null,[{key:"BASIC",get:function(){return"basic"}},{key:"PORTFOLIO",get:function(){return"portfolio"}}]);return e}();t.RosterStudentAccountPreferenceOptions=o;var a=function(){function e(t,n,i,s,o,a,c,l){r(this,e);this._id=t;this._ownerId=n;this._name=i;this._color=s;this._allowPeerHelp=o;this._allowNewMembers=a;this._allowMultiLogin=c;this._properties=l||{}}i(e,[{key:"_setProperty",value:function(e,t){this._properties[e]=t||null}},{key:"id",get:function(){return this._id}},{key:"ownerId",get:function(){return this._ownerId}},{key:"name",get:function(){return this._name},set:function(e){this._name=e?e:""}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"allowPeerHelp",get:function(){return this._allowPeerHelp},set:function(e){this._allowPeerHelp=e}},{key:"allowNewMembers",get:function(){return this._allowNewMembers},set:function(e){this._allowNewMembers=e}},{key:"allowMultiLogin",get:function(){return this._allowMultiLogin},set:function(e){this._allowMultiLogin=e}},{key:"properties",get:function(){return this._properties},set:function(e){this._properties=e}},{key:"disallowMultiLogin",get:function(){return!this._allowMultiLogin},set:function(e){this._allowMultiLogin=!e}},{key:"isRosterLocked",get:function(){return!this._allowNewMembers},set:function(e){this._allowNewMembers=!e}},{key:"isGoogleRoster",get:function(){return this.provider===s.GOOGLE}},{key:"provider",get:function(){return this.properties[s.PROVIDER]},set:function(e){return this._setProperty(s.PROVIDER,e)}},{key:"providerData",get:function(){return this.properties[s.PROVIDER_DATA]},set:function(e){this._setProperty(s.PROVIDER_DATA,e)}},{key:"studentAccountPreference",get:function(){return this.properties[s.STUDENT_ACCOUNT_PREFERENCE]},set:function(e){this._setProperty(s.STUDENT_ACCOUNT_PREFERENCE,e)}},{key:"googleCourseId",get:function(){var e=this.providerData&&angular.fromJson(this.providerData);return e[s.GOOGLE_COURSE_ID]}},{key:"locked",get:function(){return!this._allowNewMembers||!this._allowMultiLogin}}],[{key:"LOCK_ROSTER_EXPLANATION",get:function(){return"This prevents new students from logging in. It's helpful when you are happy with your current roster and don't want more students logging in with goofy names."}},{key:"LOCK_DEVICE_EXPLANATION",get:function(){return"This prevents students from using the same account at the same time. It's helpful if a student is logging into a classmate's account and misbehaving."}}]);return e}();t["default"]=a},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(425)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(164),u=c(l),d=n(185),h=c(d),f=n(428),g=c(f),p=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._contractMemberCodec=new g["default"]}r(t,e);s(t,[{key:"encode",value:function(e){var t=[];if(e.contractMembers)for(var n in e.contractMembers)t.push(this._contractMemberCodec.encode(n));return{id:e.id,username:e.username,email:e.email,first_name:e.firstName,last_name:e.lastName,display_name:e.displayName,properties:e.properties,contract_ids:t,auth_types:e.authTypes}}},{key:"decode",value:function(e){var t=[];if(e.contract_ids){var n=!0,i=!1,r=void 0;try{for(var s,o=a(e.contract_ids);!(n=(s=o.next()).done);n=!0){var c=s.value;t.push(this._contractMemberCodec.decode(c))}}catch(l){i=!0;r=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw r}}}return new h["default"](e.id,e.username,e.email,e.first_name,e.last_name,e.display_name,e.created,e.properties,e.roles,t,e.auth_types)}}]);return t}(u["default"]);t["default"]=p;e.exports=t["default"]},function(e,t,n){e.exports={"default":n(426),__esModule:!0}},function(e,t,n){n(98);n(89);e.exports=n(427)},function(e,t,n){var i=n(31),r=n(127);e.exports=n(26).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(429),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"decode",value:function(e){return new d["default"](e.contract_id,e.admin)}},{key:"encode",value:function(e){return{contract_id:e.contractId,admin:e.admin}}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,e);this._contractId=t;this._admin=n}i(e,[{key:"contractId",get:function(){return this._contractId}},{key:"admin",get:function(){return this._admin}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(185),o=function(){function e(t,n,i,s){"ngInject";r(this,e);this._environment=s;this.$location=t;this.$http=i;this._host=t.host();this._platform=platform.description;this._version=n.version}e.$inject=["$location","constants","$http","environment"];i(e,[{key:"studentFeedback",value:function(e,t){return this._post(this.STUDENT_FEEDBACK_ID,{"entry.1850468403":t,"entry.733385003":e,"entry.755902075":this.location,"entry.339612821":this._platform,"entry.496736929":this._version})}},{key:"sendTeacherFeedback",value:function(e,t,n,i){var r=n&&n.name,o=n&&n.properties&&n.properties[s.UserProperties.JOB_TITLE],a=n&&n.school,c=n&&n.properties&&n.properties[s.UserProperties.STUDENT_AGE];return this._post(this.TEACHER_FEEDBACK_ID,{"entry.570244920":e,"entry.1171669438":i||"n/a","entry.390531121":t||"support@classkick.com","entry.867689693":r||t||"n/a","entry.1413261050":o||"n/a","entry.2134405296":a||"n/a","entry.79933580":platform.description||"n/a","entry.2012391473":c||"n/a"})}},{key:"sendDeleteReason",value:function(e,t){return this._post(this.DELETE_REASON_ID,{"entry.1564290030":t,"entry.1101783008":e.name,"entry.1461305748":e.email,"entry.1267441565":e.isTeacher?"teacher":"student"})}},{key:"sendCancelSubscriptionReason",value:function(e,t,n){return this._post(this.CANCEL_SUBSCRIPTION_REASON_ID,{"entry.719056737":e.name,"entry.1797035728":e.email,"entry.72751111":e.id,"entry.1213307834":t.id,"entry.712072495":t.contractId,"entry.1143721576":n})}},{key:"_post",value:function(e,t){var n=this._environment.serverUrlBase+"/v1/google-form/submit";return this.$http.post(n,{id:e,params:t})}},{key:"STUDENT_FEEDBACK_ID",get:function(){return"1avJdMjXrY56a71Kg7Cj913f5ToauMhXA03sK3VY_XVE"}},{key:"TEACHER_FEEDBACK_ID",get:function(){return"1vINV6bEqF7smNpCFk3MtTkQ4NtNZYc6S5CH9MWD69qU"}},{key:"DELETE_REASON_ID",get:function(){return"1oSpPziYI0zDASaEEZYayVdwrZ3EspxLwtFT9rVXWTvk"}},{key:"CANCEL_SUBSCRIPTION_REASON_ID",get:function(){return"1BN44MbOops-zPianTuH2u_rf9AIhQu5pC0JUhXvTm40"}},{key:"location",get:function(){return[this._host,this.$location.url()].join(" ")}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(432),a=s(o),c=n(192),l=s(c),u=n(435),d=s(u),h=n(436),f=s(h),g=n(437),p=s(g),m=n(438),v=s(m),_=n(439),y=s(_),k=n(441),b=s(k),S=n(442),w=s(S),C=n(443),E=s(C),T=n(444),I=s(T),A=n(445),x=s(A),O=function(){function e(t,n,i){"ngInject";r(this,e);this._firebaseService=t;this._authService=n;this._notificationShardKeyFactory=i}e.$inject=["FirebaseService","AuthService","NotificationShardKeyFactory"];i(e,[{key:"getHelpRequestNotificationForAssignment",value:function(e,t,n){var i=this._notificationShardKeyFactory.forHelpRequestForAssignment(e,t);return l["default"].forAssignment(i,t,this._firebaseService,n)}},{key:"getHelpRequestNotificationForRoster",value:function(e,t,n){var i=this._notificationShardKeyFactory.forHelpRequestForRoster(e,t);return l["default"].forRoster(i,t,this._firebaseService,n)}},{key:"getHelpRequestNotificationForPeers",value:function(e,t,n,i){var r=this._notificationShardKeyFactory.forHelpRequestForPeers(e,t);return l["default"].forPeers(r,t,n,this._firebaseService,i)}},{key:"getRosterNotification",value:function(e){var t=this._notificationShardKeyFactory.forRoster(e);return new d["default"](t,e.id,this._firebaseService)}},{key:"getUserStatusNotification",value:function(e,t){var n=this._notificationShardKeyFactory.forUserStatus(e);return new f["default"](n,e,this._firebaseService,t)}},{key:"getAssignmentStatusNotification",value:function(e,t){var n=this._notificationShardKeyFactory.forAssignment(e);return new p["default"](n,e.id,this._firebaseService,t)}},{key:"getAssignmentWorkNotification",value:function(e,t){var n=this._notificationShardKeyFactory.forAssignmentWork(e);return new v["default"](n,e.assignmentId,e.id,this._firebaseService,t)}},{key:"getAssignmentRosterNotification",value:function(e,t,n){var i=this._notificationShardKeyFactory.forAssignmentRoster(e);return new I["default"](i,e.id,t,this._firebaseService,n)}},{key:"getNewMessageNotificationForCurrentUser",value:function(){var e=this._authService.authData.id,t=this._notificationShardKeyFactory.forUserNewMessage(e);return new y["default"](t,e,this._firebaseService,!1)}},{key:"getHelpersNotification",value:function(e,t){var n=this._notificationShardKeyFactory.forQuestionHelpers(e,t);return new b["default"](n,t,this._firebaseService)}},{key:"getUserStatusEditor",value:function(e){var t=this._notificationShardKeyFactory.forUserStatus(e);return new w["default"](t,e,this._firebaseService)}},{key:"getActiveHelper",value:function(e,t){var n=this._notificationShardKeyFactory.forQuestionHelpers(e,t.helpeeId);return new a["default"](n,t,this._firebaseService)}},{key:"getUserRosterNotification",value:function(e){var t=this._notificationShardKeyFactory.forUserRoster(e);return new E["default"](t,e,this._firebaseService)}},{key:"getAccountNotification",value:function(e){var t=this._notificationShardKeyFactory.forAccount(e);return new x["default"](t,e,this._firebaseService)}}]);return e}();t["default"]=O;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(194),u=c(l),d=n(196),h=c(d),f=n(197),g=c(f),p=n(433),m=c(p),v=n(200),_=(c(v),new h["default"]("/notifications/v3/users/{helpeeId}/helpers/{helperId}",{update:new g["default"]("",function(){return!0},function(e){return e._value},function(e,t){e._value=t},new m["default"])})),y=function(e){function t(e,n,r){o(this,t);var s=r.firebaseNotificationInstanceIdForShardKey(e),c="ActiveHelper[instance="+s+", "+e+"]";i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(new a).set("helpeeId",n.helpeeId).set("helperId",n.id),_,s,r,void 0,!0,c);this._helper=n;this._firebaseService=r;this._logTrace("cstr complete")}r(t,e);s(t,[{key:"start",value:function(){this._logTrace("start");i(Object.getPrototypeOf(t.prototype),"start",this).call(this);this._firebaseService.connectedEvent.subscribe(this._onConnected,this);this._setupOnDisconnect();return this}},{key:"stop",value:function(){this._logTrace("stop");this._setStatusOffline();this._firebaseService.connectedEvent.unsubscribe(this._onConnected,this);i(Object.getPrototypeOf(t.prototype),"stop",this).call(this);return this}},{key:"_setupOnDisconnect",value:function(){this.firebase.onDisconnectSet(_.properties.update,null)}},{key:"_onConnected",value:function(e){if(e&&e.connected){this._logTrace("_onConnected");this._setupOnDisconnect();this.setHelper(this._helper)}}},{key:"_setStatusOffline",value:function(){this._logTrace("_setStatusOffline");this.firebase.removeValue(_.properties.update)}},{key:"setHelper",value:function(){this._logTrace("setHelper");this._helper.resetTime();this.firebase.setValue(_.properties.update,this._helper)}}]);return t}(u["default"]);t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(434),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{name:e.name,role:e.role,helpee_id:e.helpeeId,assignment_id:e.assignmentId,question_id:e.questionId,t:e.time&&e.time.toISOString()}}},{key:"decode",value:function(e,t){return e?new d["default"](t,e.name,e.role,e.helpee_id,e.assignment_id,e.question_id,e.t):void 0}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a,c){r(this,e);this._id=t;this._name=n;this._role=i;this._helpeeId=s;this._assignmentId=o;this._questionId=a;this._time=moment(c)}i(e,[{key:"resetTime",value:function(){this._time=moment()}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"role",get:function(){return this._role}},{key:"helpeeId",get:function(){return this._helpeeId}},{key:"assignmentId",get:function(){return this._assignmentId}},{key:"questionId",get:function(){return this._questionId}},{key:"time",get:function(){return this._time}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(200),d=(a(u),n(147)),h=a(d),f=function(){function e(t,n,i){r(this,e);this._change=t;this._userId=n;this._time=moment(i)}i(e,[{key:"change",get:function(){return this._change}},{key:"userId",get:function(){return this._userId}},{key:"time",get:function(){return this._time}}],[{key:"apply",value:function(t){return t?new e(t.change,t.user_id,t.t):null}}]);return e}(),g=function(e){function t(e,n,i){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"rosters/"+n+"/status",i,!1,"RosterNotification");this._userAdded=new h["default"](this);this._userRemoved=new h["default"](this);this._metadata=new h["default"](this);this._deleted=new h["default"](this);this._logTrace("cstr complete")}o(t,e);i(t,[{key:"_changed",value:function(e){this._value=f.apply(e);if(e){this._logTrace("_changed change="+this._value.change+", userId="+this._value.userId);e.change===t.USER_ADDED?this._userAdded.raise(this._value):e.change===t.USER_REMOVED?this._userRemoved.raise(this._value):e.change===t.METADATA?this._metadata.raise(this._value):e.change===t.DELETED&&this._deleted.raise(this._value)}}},{key:"userAdded",get:function(){return this._userAdded}},{key:"userRemoved",get:function(){return this._userRemoved}},{key:"metadata",get:function(){return this._metadata}},{key:"deleted",get:function(){return this._deleted}},{key:"value",get:function(){return this._value}}],[{key:"USER_ADDED",get:function(){return"userAdded"}},{key:"USER_REMOVED",get:function(){return"userRemoved"}},{key:"METADATA",get:function(){return"metadata"}},{key:"DELETED",get:function(){return"deleted"}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(200),d=(a(u),n(147)),h=a(d),f=function(){function e(t,n,i,s,o,a,c,l){r(this,e);this._userId=t;this._online=n;this._activity=i;this._assignmentId=s;this._questionId=o;this._helpeeId=a;this._platform=c;this._time=moment(l)}i(e,[{key:"userId",get:function(){return this._userId}},{key:"online",get:function(){return this._online}},{key:"activity",get:function(){return this._activity}},{key:"assignmentId",get:function(){return this._assignmentId}},{key:"questionId",get:function(){return this._questionId}},{key:"helpeeId",get:function(){return this._helpeeId}},{key:"platform",get:function(){return this._platform}},{key:"time",get:function(){return this._time}}],[{key:"apply",value:function(t,n){return t?new e(n,t.online,t.activity,t.assignment_id,t.question_id,t.helpee_id,t.platform,t.t):null}}]);return e}(),g=function(e){function t(e,n,i,o){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"users/"+n+"/status",i,o,"UserStatusNotification");this._userId=n;this._updated=new h["default"](this);this._status=null;this._oldStatus=null;this._logTrace("cstr complete")}o(t,e);i(t,[{key:"_changed",value:function(e){this._oldStatus=this._status;this._status=f.apply(e,this._userId);if(e){this._logTrace("_changed userId="+this._userId+", value="+angular.toJson(this._status));this._updated.raise(this._status)}}},{key:"userId",get:function(){return this._userId}},{key:"updated",get:function(){return this._updated}},{key:"status",get:function(){return this._status}},{key:"oldStatus",get:function(){return this._oldStatus}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(147),d=a(u),h=n(200),f=(a(h),function(){function e(t,n,i,s,o){r(this,e);this._change=t;this._questionId=n;this._beforeQuestionId=i;this._time=moment(s);this._points=o}i(e,[{key:"change",get:function(){return this._change}},{key:"questionId",get:function(){return this._questionId}},{key:"beforeQuestionId",get:function(){return this._beforeQuestionId}},{key:"time",get:function(){return this._time}},{key:"points",get:function(){return this._points}}],[{key:"apply",value:function(t){return t?new e(t.change,t.question_id,t.before_question_id,t.t,t.points):null}}]);return e}()),g=function(e){function t(e,n,i){var o=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"assignments/"+n+"/status",i,o,"AssignmentStatusNotification");this._questionAdded=new d["default"](this);this._questionRemoved=new d["default"](this);this._questionUpdated=new d["default"](this);this._assignmentUpdated=new d["default"](this);this._assignmentDeleted=new d["default"](this);this._logTrace("cstr complete")}o(t,e);i(t,[{key:"_changed",value:function(e){this._value=f.apply(e);if(this._value){this._logTrace("_changed change="+this._value.change+", questionId="+this._value.question_id);this._value.change===t.QUESTION_ADDED?this._questionAdded.raise(this._value):this._value.change===t.QUESTION_REMOVED?this._questionRemoved.raise(this._value):this._value.change===t.QUESTION_UPDATED?this._questionUpdated.raise(this._value):this._value.change===t.ASSIGNMENT_UPDATED?this._assignmentUpdated.raise(this._value):this._value.change===t.ASSIGNMENT_DELETED&&this._assignmentDeleted.raise(this._value)}}},{key:"questionAdded",get:function(){return this._questionAdded}},{key:"questionRemoved",get:function(){return this._questionRemoved}},{key:"questionUpdated",get:function(){return this._questionUpdated}},{key:"assignmentUpdated",get:function(){return this._assignmentUpdated}},{key:"assignmentDeleted",get:function(){return this._assignmentDeleted}},{key:"value",get:function(){return this._value}}],[{key:"QUESTION_ADDED",get:function(){return"questionAdded"}},{key:"QUESTION_REMOVED",get:function(){return"questionRemoved"}},{key:"QUESTION_UPDATED",get:function(){return"questionUpdated"}},{key:"ASSIGNMENT_UPDATED",get:function(){return"metadata"}},{key:"ASSIGNMENT_DELETED",get:function(){return"assignmentDeleted"}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(147),d=a(u),h=function(){function e(t,n,i,s,o){r(this,e);this._questionId=t;this._score=n;this._time=moment(i);this._answer=s;this._startedAt=o?moment(o):void 0}i(e,[{key:"questionId",get:function(){return this._questionId}},{key:"score",get:function(){return this._score}},{key:"time",get:function(){return this._time}},{key:"answer",get:function(){return this._answer}},{key:"startedAt",get:function(){return this._startedAt}}],[{key:"apply",value:function(t){if(t){var n={correct:t.answer&&t.answer.hasOwnProperty("correct")?t.answer.correct:null,value:t.answer&&t.answer.value};return new e(t.question_id,t.score,t.t,n,t.started_at)}return null}}]);return e}(),f=function(e){function t(e,n,i,o,a){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"assignments/"+n+"/grades/assignment_work/"+i,o,a,"AssignmentWorkNotification");this._scoreUpdated=new d["default"](this);this._logTrace("cstr complete")}o(t,e);i(t,[{key:"_changed",value:function(e){this._value=h.apply(e);if(this._value){this._logTrace("_changed questionId="+this._value.questionId+", value="+angular.toJson(e));this._scoreUpdated.raise(this._value)}}},{key:"scoreUpdated",get:function(){return this._scoreUpdated}},{key:"value",get:function(){return this._value}}]);return t}(l["default"]);t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(147),d=a(u),h=n(440),f=a(h),g=function(e){function t(e,n,r,s){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"users/"+n+"/messages",r,s,"UserNewMessageNotification");this._updated=new d["default"](this);this._value=null;this._logTrace("cstr complete")}r(t,e);s(t,[{key:"_changed",value:function(e){if(angular.isDefined(e)){this._value=f["default"].apply(e);this._logTrace("_changed senderId="+this._value.senderId);this._updated.raise(this._value)}}},{key:"updated",get:function(){return this._updated}},{key:"value",get:function(){return this._value}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"TYPE",get:function(){return"type"}},{key:"ACCEPT_ASSIGNMENT_SHARE",get:function(){return"accept_assignment_share"}},{key:"ASSIGNMENT_ID",get:function(){return"assignment_id"}}]);return e}();t.MessageActions=s;var o=function(){function e(t,n,i,s,o,a,c,l){r(this,e);this._id=t;this._senderId=n;this._recipientId=i;this._text=s;this._actions=o;this._createdDate=a?moment(a):void 0;this._seenDate=c?moment(c):void 0;this._deletedDate=l?moment(l):void 0}i(e,[{key:"id",get:function(){return this._id}},{key:"senderId",get:function(){return this._senderId}},{key:"recipientId",get:function(){return this._recipientId}},{key:"text",get:function(){return this._text}},{key:"actions",get:function(){return this._actions}},{key:"createdDate",get:function(){return this._createdDate}},{key:"seenDate",get:function(){return this._seenDate},set:function(e){this._seenDate=e}},{key:"deletedDate",get:function(){return this._deletedDate}},{key:"createdDateFromNow",get:function(){return this.createdDate.fromNow()}}],[{key:"apply",value:function(t,n){return t?new e(t.message_id,t.sender_id,n,t.text,t.actions,t.created,void 0,void 0):null}}]);return e}();t["default"]=o},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(194),u=c(l),d=n(409),h=c(d),f=n(196),g=c(f),p=n(411),m=c(p),v=n(433),_=c(v),y=n(200),k=(c(y),new g["default"]("/notifications/v3/users/{userId}",{helpers:new m["default"]("/helpers",function(e){return e._listen},function(e){return e.helpers},new _["default"])})),b=function(e){function t(e,n,r){var s=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];o(this,t);var c=r.firebaseNotificationInstanceIdForShardKey(e),l="HelpersNotification[instance="+c+", "+e+", helpeeId="+n+"]";i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(new a).set("userId",n),k,c,r,s,void 0,l);this._helpers=new h["default"];this._logTrace("cstr complete")}r(t,e);s(t,[{key:"helpers",get:function(){return this._helpers}}]);return t}(u["default"]);t["default"]=b;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(194),u=c(l),d=n(196),h=c(d),f=n(197),g=c(f),p=n(199),m=c(p),v=n(200),_=(c(v),function(){function e(){r(this,e)}i(e,null,[{key:"WORKING",get:function(){return"working"}},{key:"HELPING",get:function(){return"helping"}}]);return e}());t.StatusActivities=_;var y=function(){function e(){r(this,e)}i(e,null,[{key:"WEB",get:function(){return"web"}},{key:"IPAD",get:function(){return"iPad"}}]);return e}();t.StatusPlatforms=y;var k=function(){function e(){r(this,e)}i(e,null,[{key:"UNIT_OF_TIME",get:function(){return"hours"}},{key:"DURATION",get:function(){return 2}}]);return e}();t.StatusIdleTimes=k;
var b=new h["default"]("/notifications/v3/users/{userId}/status",{online:new g["default"]("/online",u["default"].defaultListenIndicator,function(e){return e._online},function(e,t){e._online=t},new m["default"]),assignment_id:new g["default"]("/assignment_id",u["default"].defaultListenIndicator,function(e){return e._assignment_id},function(e,t){e._assignment_id=t},new m["default"]),question_id:new g["default"]("/question_id",u["default"].defaultListenIndicator,function(e){return e._question_id},function(e,t){e._question_id=t},new m["default"]),activity:new g["default"]("/activity",u["default"].defaultListenIndicator,function(e){return e._activity},function(e,t){e._activity=t},new m["default"]),platform:new g["default"]("/platform",u["default"].defaultListenIndicator,function(e){return e._platform},function(e,t){e._platform=t},new m["default"]),helpee_id:new g["default"]("/helpee_id",u["default"].defaultListenIndicator,function(e){return e._helpee_id},function(e,t){e._helpee_id=t},new m["default"]),t:new g["default"]("/t",u["default"].defaultListenIndicator,function(e){return e._t},function(e,t){e._t=t},new m["default"])}),S=function(e){function t(e,n,i){r(this,t);var o=i.firebaseNotificationInstanceIdForShardKey(e),c="UserStatusEditor[instance="+o+", "+e+"]";s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(new a).set("userId",n),b,o,i,void 0,!0,c);this._userId=n;this._online=!1;this._assignment_id=null;this._question_id=null;this._activity=null;this._platform=null;this._helpee_id=null;this._t=null;this._firebaseService=i;this._logTrace("cstr complete")}o(t,e);i(t,[{key:"start",value:function(){this._logTrace("start");s(Object.getPrototypeOf(t.prototype),"start",this).call(this);this.setupOnConnected();this.setupOnDisconnect();return this}},{key:"stop",value:function(){this._logTrace("stop");this.setStatusOffline();this._firebaseService.connectedEvent.unsubscribe(this.onConnected,this);s(Object.getPrototypeOf(t.prototype),"stop",this).call(this);return this}},{key:"onConnected",value:function(e){if(e){this._logTrace("onConnected");this.setupOnDisconnect();this.setStatus(!0,this.assignmentId,this.questionId,this.activity,this.helpeeId)}}},{key:"setupOnConnected",value:function(){this._firebaseService.connectedEvent.subscribe(this.onConnected,this)}},{key:"setupOnDisconnect",value:function(){this.firebase.onDisconnectSet(b.properties.online,!1)}},{key:"setStatus",value:function(e,t,n,i,r){this.online=!!e;this.assignmentId=t;this.questionId=n;this.activity=i;this.helpeeId=r||null;this.platform=y.WEB;this._setT()}},{key:"setStatusOffline",value:function(){this.online=!1;this._setT()}},{key:"_setT",value:function(){this._t=moment();this.firebase.setValue(b.properties.t,this._t.toISOString())}},{key:"online",set:function(e){this._online=e;this.firebase.setValue(b.properties.online,e)},get:function(){return this._online}},{key:"assignmentId",set:function(e){this._assignment_id=e;this.firebase.setValue(b.properties.assignment_id,e)},get:function(){return this._assignment_id}},{key:"questionId",set:function(e){this._question_id=e;this.firebase.setValue(b.properties.question_id,e)},get:function(){return this._question_id}},{key:"activity",set:function(e){this._activity=e;this.firebase.setValue(b.properties.activity,e)},get:function(){return this._activity}},{key:"platform",set:function(e){this._platform=e;this.firebase.setValue(b.properties.platform,e)},get:function(){return this._platform}},{key:"helpeeId",set:function(e){this._helpee_id=e;this.firebase.setValue(b.properties.helpee_id,e)},get:function(){return this._helpee_id}},{key:"userId",get:function(){return this._userId}},{key:"t",get:function(){return this._t}}]);return t}(u["default"]);t["default"]=S},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(147),d=a(u),h=function(e){function t(e,n,r){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"users/"+n+"/rosters",r,!1,"UserRosterNotification");this._userId=n;this._updated=new d["default"](this);this._changes={USER_ADDED:"userAdded",USER_REMOVED:"userRemoved",METADATA:"metadata",DELETED:"deleted"};this._logTrace("cstr complete")}r(t,e);s(t,[{key:"_changed",value:function(e){this._logTrace("_changed change="+e.change+", rosterId="+e.roster_id);this._updated.raise({rosterId:e.roster_id,change:e.change,t:moment(e.t)})}},{key:"userId",get:function(){return this._userId}},{key:"updated",get:function(){return this._updated}},{key:"CHANGES",get:function(){return this._changes}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(48)["default"],o=n(68)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(200),d=(a(u),n(147)),h=a(d),f=function(){function e(t,n,i,s,o){r(this,e);this._id=t;this._showStudentScores=n;this._lockStudentWork=i;this._hideStudentWork=s;this._time=o?moment(o):void 0}i(e,[{key:"id",get:function(){return this._id}},{key:"showStudentScores",get:function(){return this._showStudentScores}},{key:"lockStudentWork",get:function(){return this._lockStudentWork}},{key:"hideStudentWork",get:function(){return this._hideStudentWork}},{key:"time",get:function(){return this._time}}],[{key:"apply",value:function(t){return t?new e(t.id,t.show_student_scores,t.lock_student_work,t.hide_student_work,t.t):null}}]);return e}(),g=function(e){function t(e,n,i,o,a){r(this,t);s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"assignments/"+n+"/rosters/"+i,o,a,"AssignmentRosterNotification");this._metadata=new h["default"](this);this._logTrace("cstr complete")}o(t,e);i(t,[{key:"_changed",value:function(e){this._logTrace("_changed");this._value=f.apply(e);e&&this._metadata.raise(this._value)}},{key:"metadata",get:function(){return this._metadata}},{key:"value",get:function(){return this._value}}]);return t}(l["default"]);t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(193),l=a(c),u=n(147),d=a(u),h=function(e){function t(e,n,r){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].V3,e,"users/"+n+"/account",r,!0,"AccountNotification");this._accountInitialized=new d["default"](this);this._logTrace("cstr complete")}r(t,e);s(t,[{key:"_changed",value:function(e){if(e&&e.change===t.ACCOUNT_INITIALIZED){this._logTrace("_changed");this._accountInitialized.raise(this._value)}}},{key:"accountInitialized",get:function(){return this._accountInitialized}}],[{key:"ACCOUNT_INITIALIZED",get:function(){return"accountInitialized"}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(211),a=s(o),c=n(292),l=n(420),u=s(l),d=n(447),h=s(d),f=n(147),g=s(f),p=n(448),m=s(p),v=n(450),_=s(v),y=function(){function e(t,n,i){var s=this;r(this,e);this.$window=t;this.$timeout=n;this.$log=i;this._rememberMe=new a["default"];this._helpRequestCodec=new u["default"];this._ckRedirectCodec=new h["default"];this._copyAssignmentRequestCodec=new m["default"];this._copyQuestionsRequestCodec=new _["default"];var o=function(e){return s._transferSessionUser(e)};t.addEventListener?t.addEventListener("storage",o,!1):t.attachEvent("onstorage",o);this.rememberMe||sessionStorage.getItem(e.UserInfo)||this._triggerEvent(this._GET_SESSION_USER,"retrieve");this._remoteLogOut=new g["default"](this)}e.$inject=["$window","$timeout","$log"];i(e,null,[{key:"RememberMe",get:function(){return"persist_info"}},{key:"UserInfo",get:function(){return"user_info"}},{key:"HasRecommendedBroswer",get:function(){return"has_recommended_browser"}},{key:"HelpRequest",get:function(){return"help_request"}},{key:"CkRedirect",get:function(){return"ck_redirect"}},{key:"StudentFolderStatus",get:function(){return"ck_student_folder_status"}},{key:"SessionSort",get:function(){return"session_sort"}},{key:"HideUnstartedThumbnails",get:function(){return"hide_unstarted_thumbnails"}},{key:"HideOfflineStudents",get:function(){return"hide_offline_students"}},{key:"HideUnstartedAssignmentWorks",get:function(){return"hide_unstarted_assignment_works"}},{key:"HideStudentNames",get:function(){return"hide_student_names"}},{key:"AssignmentsListColumn",get:function(){return"assignments_list_column"}},{key:"AssignmentsListAsc",get:function(){return"assignments_list_asc"}},{key:"CopyAssignmentRequest",get:function(){return"copy_assignment_request"}},{key:"CopyQuestionsRequest",get:function(){return"copy_questions_request"}}]);i(e,[{key:"_triggerEvent",value:function(e,t){localStorage.setItem(e,t);localStorage.removeItem(e)}},{key:"_write",value:function(e,t,n){n=n||this._storage;n.setItem(e,angular.toJson(t))}},{key:"_read",value:function(e,t){try{t=t||this._storage;return angular.fromJson(t.getItem(e))}catch(n){this.$log.error(n)}}},{key:"_transferSessionUser",value:function(t){var n=this;t||(t=this.$window.event);if(t.newValue)if(t.key===this._GET_SESSION_USER&&sessionStorage.getItem(e.UserInfo)&&!this.rememberMe){localStorage.setItem(this._TRANSFER_SESSION_USER,sessionStorage.getItem(e.UserInfo));this.$timeout(function(){localStorage.removeItem(n._TRANSFER_SESSION_USER)},100)}else t.key!==this._TRANSFER_SESSION_USER||sessionStorage.getItem(e.UserInfo)?t.key===this._LOG_OUT&&(this.userInfo&&t.newValue!==this.userInfo.id||this.onRemoteLogOut.raise(t.newValue)):sessionStorage.setItem(e.UserInfo,t.newValue)}},{key:"setUserInfo",value:function(t,n){var i=this.userInfo;this.rememberMe=n;localStorage.removeItem(e.UserInfo);sessionStorage.removeItem(e.UserInfo);this._write(e.UserInfo,t);!t&&i&&this._triggerEvent(this._LOG_OUT,i.id)}},{key:"_storage",get:function(){return this.rememberMe?localStorage:sessionStorage}},{key:"_LOG_OUT",get:function(){return"logOut"}},{key:"_GET_SESSION_USER",get:function(){return"getSessionUser"}},{key:"_TRANSFER_SESSION_USER",get:function(){return"transferSessionUser"}},{key:"onRemoteLogOut",get:function(){return this._remoteLogOut}},{key:"rememberMe",get:function(){var t=this;return this._rememberMe.value(function(){return!!t._read(e.RememberMe,localStorage)})},set:function(t){this._write(e.RememberMe,t,localStorage);this._rememberMe.clear();t||localStorage.removeItem(e.UserInfo)}},{key:"userInfo",get:function(){var t=this._read(e.UserInfo);return t?new c.UserTokenInfo(t.id,t.name,t.email,t.username,t.authType,t.roles,t.plans,t.contracts,t.firebaseToken,t.token):null}},{key:"hasRecommendedBrowser",get:function(){return!!this._read(e.HasRecommendedBroswer,sessionStorage)},set:function(t){this._write(e.HasRecommendedBroswer,t,sessionStorage)}},{key:"feedbackHelpRequest",get:function(){return this._helpRequestCodec.decode(this._read(e.HelpRequest,sessionStorage))},set:function(t){if(t){var n=this._helpRequestCodec.encode(t);this._write(e.HelpRequest,n,sessionStorage)}else sessionStorage.removeItem(e.HelpRequest)}},{key:"ckRedirect",get:function(){return this._ckRedirectCodec.decode(this._read(e.CkRedirect,sessionStorage))},set:function(t){if(t){var n=this._ckRedirectCodec.encode(t);this._write(e.CkRedirect,n,sessionStorage)}else sessionStorage.removeItem(e.CkRedirect)}},{key:"studentFolderStatus",set:function(t){this._write(e.StudentFolderStatus,t)},get:function(){return this._read(e.StudentFolderStatus)}},{key:"sessionSort",set:function(t){this._write(e.SessionSort,t,sessionStorage)},get:function(){return this._read(e.SessionSort,sessionStorage)}},{key:"hideUnstartedThumbnails",get:function(){return this._read(e.HideUnstartedThumbnails,sessionStorage)},set:function(t){this._write(e.HideUnstartedThumbnails,t,sessionStorage)}},{key:"hideOfflineStudents",get:function(){return this._read(e.HideOfflineStudents,sessionStorage)},set:function(t){this._write(e.HideOfflineStudents,t,sessionStorage)}},{key:"hideUnstartedAssignmentWorks",get:function(){return this._read(e.HideUnstartedAssignmentWorks,sessionStorage)},set:function(t){this._write(e.HideUnstartedAssignmentWorks,t,sessionStorage)}},{key:"hideStudentNames",get:function(){return this._read(e.HideStudentNames,sessionStorage)},set:function(t){this._write(e.HideStudentNames,t,sessionStorage)}},{key:"assignmentsListColumn",get:function(){return this._read(e.AssignmentsListColumn,sessionStorage)},set:function(t){angular.isDefined(t)?this._write(e.AssignmentsListColumn,t,sessionStorage):sessionStorage.removeItem(e.AssignmentsListColumn)}},{key:"assignmentsListAsc",get:function(){return this._read(e.AssignmentsListAsc,sessionStorage)},set:function(t){angular.isDefined(t)?this._write(e.AssignmentsListAsc,!!t,sessionStorage):sessionStorage.removeItem(e.AssignmentsListAsc)}},{key:"copyAssignmentRequest",get:function(){return this._copyAssignmentRequestCodec.decode(this._read(e.CopyAssignmentRequest,sessionStorage))},set:function(t){if(t){var n=this._copyAssignmentRequestCodec.encode(t);this._write(e.CopyAssignmentRequest,n,sessionStorage)}else sessionStorage.removeItem(e.CopyAssignmentRequest)}},{key:"copyQuestionsRequest",get:function(){return this._copyQuestionsRequestCodec.decode(this._read(e.CopyQuestionsRequest,sessionStorage))},set:function(t){if(t){var n=this._copyQuestionsRequestCodec.encode(t);this._write(e.CopyQuestionsRequest,n,sessionStorage)}else sessionStorage.removeItem(e.CopyQuestionsRequest)}}]);return e}();t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(302),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{to:e.to,params:e.params,url:e.url}}},{key:"decode",value:function(e){return e?new d["default"](e.to,e.params,e.url):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(449),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{id:e.id,name:e.name,t:e.t&&e.t.toISOString()}}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.name,e.t):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){r(this,e);this.id=t;this.name=n;this.t=angular.isDefined(i)?moment(i):moment()}i(e,[{key:"isValid",get:function(){var e=moment().diff(this.t,"minutes");return 1>e}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(451),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{from_assignment_id:e.from_assignment_id,question_ids:e.question_ids}}},{key:"decode",value:function(e){return e?new d["default"](e.from_assignment_id,e.question_ids):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=function s(e,t){i(this,s);this.from_assignment_id=e;this.question_ids=t};t["default"]=r;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(424),a=s(o),c=n(185),l=n(365),u=s(l),d=n(406),h=s(d),f=function(){function e(t,n,i,s,o,c,l,u){"ngInject";r(this,e);this.$q=t;this.$state=n;this._environment=i;this._httpService=s;this._authService=o;this._storageService=c;this._notificationService=l;this._firebaseService=u;this._userCodec=new a["default"];this._assignmentCodec=new h["default"](this._firebaseService)}e.$inject=["$q","$state","environment","HttpService","AuthService","StorageService","NotificationService","FirebaseService"];i(e,[{key:"getUser",value:function(e){var t=this;!e&&this._authService.authData&&(e=this._authService.authData.id);return this._httpService.authGet(this._environment.serverUrlBase+"/v1/users/"+e).then(function(e){return t._userCodec.decode(e)})}},{key:"getUserForContract",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/contracts/"+e+"/users/"+t).then(function(e){return n._userCodec.decode(e)})}},{key:"updateUser",value:function(e){return this._httpService.authPut(this._environment.serverUrlBase+"/v1/users/"+e.id,this._userCodec.encode(e))}},{key:"updateAnonStudent",value:function(e,t,n){return this._httpService.authPost(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users/"+t+"/update-name",{name:n})}},{key:"updateContractUser",value:function(e,t){return this._httpService.authPut(this._environment.serverUrlBase+"/v1/contracts/"+t+"/users/"+e.id+"/",this._userCodec.encode(e))}},{key:"updateContractUserPassword",value:function(e,t,n){return this._httpService.authPut(this._environment.serverUrlBase+"/v1/contracts/"+t+"/users/"+e+"/password",{password:n})}},{key:"getStudentOnRoster",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users/"+t).then(function(e){return n._userCodec.decode(e)})}},{key:"getQuestionHelpers",value:function(e,t){var n=this._notificationService.getHelpersNotification(e,t);return new u["default"](n)}},{key:"getPeerQuestionHelpers",value:function(e,t){var n=this._notificationService.getHelpersNotification(e,t);return new u["default"](n,function(e){return e.role!==c.UserRoles.TEACHER})}},{key:"getContractUsers",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/contracts/"+e+"/users").then(function(e){return e.users.map(function(e){return t._userCodec.decode(e)})})}},{key:"getProfileInfo",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/public-assignments/"+e).then(function(e){return{username:e.name,assignments:e.assignments.map(function(e){return t._assignmentCodec.decode(e)})}})}},{key:"find",value:function(e){var t=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/users/find",{id:e}).then(function(e){return t._userCodec.decode(e)})}},{key:"delete",value:function(e){return this._httpService.authDelete(this._environment.serverUrlBase+"/v1/users/"+e)}},{key:"changeAuthEmail",value:function(e,t,n){var i={old_email:e,new_password:t};n&&(i.new_email=n);return this._httpService.authPost(this._environment.serverUrlBase+"/v1/users/change-auth-email",i)}},{key:"setPassword",value:function(e,t){return this._httpService.authPost(this._environment.serverUrlBase+"/v1/users/set-password",{id:e,password:t})}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(206)["default"],a=n(293)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(211),u=c(l),d=n(454),h=c(d),f=n(455),g=c(f),p=n(434),m=c(p),v=n(458),_=n(459),y=c(_),k=n(357),b=function(){function e(t,n,i,s,o,a,c,l,u,d,h,f,g,p,m,v,_,y,k,b,S,w,C){"ngInject";r(this,e);this.$q=t;this.$timeout=n;this._bootstrapService=i;this._mixpanelService=s;this._assignmentService=o;this._assignmentWorkService=a;this._rosterService=c;this._classCodeService=l;this._userService=u;this._authService=d;this._messageService=h;this._notificationService=f;this._helpRequestService=g;this._stickerService=p;this._contractService=m;this._studentCacheService=v;this._subscriptionService=_;this._abTestService=y;this._storageService=k;this._feedbackService=b;this._firebaseService=S;this._organizationService=w;this._helpArticleService=C;this.reset();this._authService.userAuthenticated.subscribe(this._registerUser,this);this._authService.dataCleared.subscribe(this.reset,this)}e.$inject=["$q","$timeout","BootstrapService","MixpanelService","AssignmentService","AssignmentWorkService","RosterService","ClassCodeService","UserService","AuthService","MessageService","NotificationService","HelpRequestService","StickerService","ContractService","StudentCacheService","SubscriptionService","ABTestService","StorageService","FeedbackService","FirebaseService","OrganizationService","HelpArticleService"];i(e,[{key:"_registerUser",value:function(e){var t=this;e.isTeacher?this._bootstrapService.whenReady.then(function(){return t.getTestSegmentsForUser()}).then(function(n){return t._mixpanelService.identify(e,n)}):this._mixpanelService.identify(e)}},{key:"getUser",value:function(e){var t=this;e&&this._user.clear();return this._user.value(function(){return t._userService.getUser()["catch"](function(e){t._user.clear();throw new Error(e)})})}},{key:"updateUser",value:function(e){var t=this;return this._userService.updateUser(e).then(function(n){return n.token?t._authService.processTokenResult(n.token,t._authService.rememberMe).then(function(){t.reset()}).then(function(){return t._user.set(t.$q.resolve(e))}):void 0})}},{key:"getAssignmentsForUser",value:function(e){var t=this;e&&this._assignments.clear();return this._assignments.value(function(){return t._assignmentService.getForCurrentUser().then(function(e){return new s(e.map(function(e){return[e.id,e]}))})["catch"](function(e){t._assignments.clear();throw e})})}},{key:"getAssignmentForUser",value:function(e,t){var n=this;return this.getAssignmentsForUser().then(function(i){return t||!i.has(e)?n._assignmentService.get(e).then(function(t){if(t.ownerId===n._authService.currentUserId){i.set(e,t);return t}throw new Error("Assignment "+e+" is not available")})["catch"](function(t){i["delete"](e);throw t}):i.get(e)})}},{key:"addAssignmentForUser",value:function(e){return this.getAssignmentsForUser().then(function(t){t.set(e.id,e);return e})}},{key:"updateAssignmentForUser",value:function(e){var t=this;return this._assignmentService.update(e).then(function(){t.getAssignmentsForUser().then(function(t){t.set(e.id,e)})})}},{key:"deleteAssignment",value:function(e){var t=this;return this._assignmentService["delete"](e).then(function(){return t.getAssignmentsForUser().then(function(t){t["delete"](e)})})}},{key:"deleteFolder",value:function(e){var t=this;return this._assignmentService.deleteFolder(e).then(function(){t.deleteFolderFromCache(e)})}},{key:"deleteFolderFromCache",value:function(e){var t=this;return this.getAssignmentsForUser().then(function(n){n["delete"](e);n.forEach(function(i){i.folder===e&&(i.isFolder?t.deleteFolderFromCache(i.id):n["delete"](i.id))})})}},{key:"getAssignment",value:function(e,t){var n=this;(t||e!==this._cachedAssignmentId)&&this._assignment.clear();this._cachedAssignmentId=e;return this._assignment.value(function(){return n._assignmentService.get(e)["catch"](function(e){n._assignment.clear();n._cachedAssignmentId=null;throw e})})}},{key:"getAssignmentWork",value:function(e,t,n){var i=this,r=e.id+"|"+t;(n||r!==this._cachedAssignmentWorkId)&&this._assignmentWork.clear();this._cachedAssignmentWorkId=r;return this._assignmentWork.value(function(){return i._assignmentWorkService.getForAssignment(e,t)["catch"](function(e){i._assignmentWork.clear();i._cachedAssignmentWorkId=null;throw e})})}},{key:"getRosterWorks",value:function(e,t,n){var i=this,r=""+(e.id|t);(n||r!==this._cachedAssignmentRosterId)&&this._assignmentWorks.clear();this._cachedAssignmentRosterId=r;return this._assignmentWorks.value(function(){return i._assignmentWorkService.getAllForAssignmentRoster(e,t).then(function(e){var t=new s,n=new o;e.forEach(function(e){if(!n.has(e.ownerId)){t.set(e.id,e);n.add(e.ownerId)}});return t})["catch"](function(e){i._assignmentWorks.clear();i._cachedAssignmentRosterId=null;throw e})})}},{key:"getRostersForUser",value:function(e){var t=this;e&&this._rosters.clear();return this._rosters.value(function(){return t._rosterService.getUserRosters().then(function(e){return new s(e.map(function(e){return[e.id,e]}))})["catch"](function(e){t._rosters.clear();throw e})})}},{key:"addRosterForUser",value:function(e){return this.getRostersForUser().then(function(t){t.set(e.id,e);return e})}},{key:"updateRosterForUser",value:function(e){this.getRostersForUser().then(function(t){t.has(e.id)&&t.set(e.id,e)})}},{key:"deleteRoster",value:function(e){var t=this;return this._rosterService["delete"](e).then(function(){return t.getRostersForUser().then(function(t){t["delete"](e)})})}},{key:"getClassCodesForUserAssignment",value:function(e,t){var n=this;if(t)this._classCodes["delete"](e);else if(this._classCodes.has(e))return this._classCodes.get(e);return this._classCodeService.getForCurrentUserAssignment(e).then(function(t){n._classCodes.set(e,t);return n._classCodes.get(e)})["catch"](function(e){n._classCodes=new s;throw e})}},{key:"getRosterUsers",value:function(e,t){var n=this;(t||this._rosterUsers.rosterId!==e)&&this._rosterUsers.clear();this._rosterUsers.rosterId=e;return this._rosterUsers.value(function(){return n._rosterService.getUsersForRoster(e).then(function(e){return new s(e.map(function(e){return[e.id,e]}))})["catch"](function(e){n._rosterUsers.rosterId=null;n._rosterUsers.clear();throw e})})}},{key:"getRosterUser",value:function(e,t,n){var i=this;return this.getRosterUsers(e).then(function(r){return n?i._rosterService.getUserForRoster(e,t).then(function(e){r.set(e.id,e);return e})["catch"](function(e){r["delete"](t);throw e}):r.get(t)})}},{key:"updateUserForRosterUsers",value:function(e,t){this._rosterUsers.rosterId===e&&this.getRosterUsers(e).then(function(e){e.has(t.id)&&e.set(t.id,t)})}},{key:"removeUserForRosterUsers",value:function(e,t){this._rosterUsers.rosterId===e&&this.getRosterUsers(e).then(function(e){e["delete"](t.id)})}},{key:"getMessagesForUser",value:function(){var e=this;return this._messages.value(function(){return e._messageService.getReceivedMessagesForCurrentUser().then(function(t){var n=new h["default"](t,e._notificationService.getNewMessageNotificationForCurrentUser(),e._messageService);n.start();return n})["catch"](function(t){e._clearMessages();throw t})})}},{key:"_clearMessages",value:function(){this._messages&&this._messages.clear(function(e){return e.then(function(e){return e.destroy()})})}},{key:"getSessionData",value:function(e,t,n,i){var r=this;(n||this._sessionData.assignmentId!==e||this._sessionData.rosterId!==t)&&this.clearSessionData();if(this._sessionData.isSet)return this._sessionData.value().then(function(e){return i?e:e.refreshData()});this._sessionData.assignmentId=e;this._sessionData.rosterId=t;return this._sessionData.value(function(){return g["default"].fetch(e,t,r.$q,r.$timeout,r,r._helpRequestService,r._assignmentWorkService,r._userService,r._notificationService,r._assignmentService,r._storageService,r._feedbackService,r._firebaseService,r._mixpanelService).then(function(e){e.isComplete||r.clearSessionData();return e})["catch"](function(e){r.clearSessionData();throw e})})}},{key:"setUserStatus",value:function(e,t,n,i){this._userStatus&&this._userStatus.userId!==this._authService.currentUserId&&this.clearUserStatus();this._userStatus||(this._userStatus=this._notificationService.getUserStatusEditor(this._authService.currentUserId).start());this._userStatus.setStatus(!0,e,t,n,i)}},{key:"clearUserStatus",value:function(){if(this._userStatus){this._userStatus.stop();this._userStatus=null}}},{key:"clearUserStatusDetails",value:function(){if(this._userStatus){this._userStatus.assignmentId=null;this._userStatus.questionId=null;this._userStatus.activity=null}}},{key:"startHelping",value:function(e,t,n,i,r,s,o){this.stopHelping();var a=new m["default"](t,n,i,r,s,o);this._helper=this._notificationService.getActiveHelper(e,a).start();this._helper.setHelper()}},{key:"stopHelping",value:function(){if(this._helper){this._helper.stop();this._helper=null}}},{key:"getStickersForUser",value:function(e){var t=this;e&&this._stickers.clear();return this._stickers.value(function(){return t._stickerService.getForUser(t._authService.currentUserId)["catch"](function(e){t._stickers.clear();throw e})})}},{key:"createSticker",value:function(e,t,n){var i=this;return this._stickerService.create(e,t,n).then(function(e){i.getStickersForUser(!1).then(function(t){t.push(e)});return e})}},{key:"updateSticker",value:function(e,t){return this._stickerService.update(e,t)}},{key:"deleteSticker",value:function(e){var t=this;return this._stickerService["delete"](e).then(function(){return t.getStickersForUser(!1).then(function(t){var n=t.map(function(e){return e.id}).indexOf(e);n>-1&&t.splice(n,1)})})}},{key:"getAdminContracts",value:function(){var e=this;return this._adminContracts.value(function(){var t=e._authService.authData.contracts;return e.$q.all(a(t).filter(function(e){return t[e].admin===!0}).map(function(t){return e._contractService.get(t)}))["catch"](function(t){e._adminContracts.clear();throw t})})}},{key:"getContracts",value:function(e){var t=this;e&&this._contracts.clear();return this._contracts.value(function(){return t._contractService.getContractsForUser(t._authService.currentUserId)["catch"](function(e){t._contracts.clear();throw e})})}},{key:"getProInfo",value:function(e){var t=this;e&&this._proInfo.clear();return this._proInfo.value(function(){return t.$q.all({features:t.getFeatures(e),contracts:t.getContracts(e)}).then(function(e){var t=e.features,n=e.contracts;return new y["default"](t,n)})["catch"](function(e){t._proInfo.clear();throw e})})}},{key:"getUsersForContract",value:function(e,t){var n=this;this._contractIdToUsers[e]||(this._contractIdToUsers[e]=new u["default"]);var i=this._contractIdToUsers[e];t&&i.clear();return i.value(function(){return n._contractService.getUsers(e).then(function(e){return new s(e.map(function(e){return[e.id,e]}))})["catch"](function(e){i.clear();throw e})})}},{key:"getUsersForContracts",value:function(e){var t=this,n=this._authService.authData.contractIds,i=n.map(function(n){return t.getUsersForContract(n,e)});return this.$q.all(i).then(function(e){return new s(n.map(function(t,n){return[t,e[n]]}))})}},{key:"getFeatures",value:function(e){var t=this;e&&this._features.clear();return this._features.value(function(){return t._contractService.getFeatures().then(function(e){return new o(e.features)})["catch"](function(e){t._features.clear();throw e})})}},{key:"getTestSegmentsForUser",value:function(){var e=this;this._testSegments.userId!==this._authService.currentUserId&&this._testSegments.clear();this._testSegments.userId=this._authService.currentUserId;return this._testSegments.value(function(){return e._abTestService.getTestSegmentsForUser(e._authService.currentUserId)["catch"](function(t){e._testSegments.clear();throw t})})}},{key:"getTestSegment",value:function(e){var t=this;return this.getTestSegmentsForUser().then(function(t){return t.get(e)===v.ABTestVariable.B})["catch"](function(e){t._testSegments.clear();throw e})}},{key:"clearSessionData",value:function(){if(this._sessionData){this._sessionData.assignmentId=null;this._sessionData.rosterId=null;this._sessionData.clear(function(e){return e.then(function(e){return e.destroy()})})}}},{key:"getSubscriptions",value:function(e){var t=this;e&&this._subscriptions.clear();return this._subscriptions.value(function(){var e=t._authService.currentUserId;return t._subscriptionService.getSubscriptions(e)["catch"](function(e){
t._subscriptions.clear();throw e})})}},{key:"getOrganizations",value:function(e){var t=this;e&&this._organizations.clear();return this._organizations.value(function(){return t.$q.all({organizations:t._organizationService.getForUser(t._authService.currentUserId),contracts:t.getContracts(e)}).then(function(e){var n=e.organizations,i=e.contracts;return n.map(function(e){e.contract=i.find(function(t){return e.contractId&&t.id===e.contractId});e.admin=t._authService.authData&&t._authService.authData.isContractAdmin(e.contractId);return e})})["catch"](function(e){t._organizations.clear();throw e})})}},{key:"getSchools",value:function(e){return this.getOrganizations(e).then(function(e){return e.filter(function(e){return e.type===k.OrganizationTypes.School})})}},{key:"getArticles",value:function(e){var t=this;e&&this._helpArticles.clear();return this._helpArticles.value(function(){return t._helpArticleService.getAll()["catch"](function(e){t._helpArticles.clear();throw e})})}},{key:"getArticle",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return this.getArticles(n).then(function(n){var i=n.find(function(t){return t.id===e});return i?i:t.getArticles(!0).then(function(t){return t.find(function(t){return t.id===e})})})}},{key:"createArticle",value:function(e,t,n,i,r){var s=this;return this._helpArticleService.create(e,t,n,i,r).then(function(e){s._helpArticles.clear();return e})}},{key:"reset",value:function(){this._assignment=new u["default"];this._assignmentWork=new u["default"];this._assignmentWorks=new u["default"];this._assignments=new u["default"];this._rosters=new u["default"];this._classCodes=new s;this._user=new u["default"];this._cachedAssignmentId=null;this._cachedAssignmentWorkId=null;this._rosterUsers=new u["default"];this.clearSessionData();this._sessionData=new u["default"];this._clearMessages();this._messages=new u["default"];this._stickers=new u["default"];this._adminContracts=new u["default"];this._contracts=new u["default"];this._proInfo=new u["default"];this._contractIdToUsers={};this._testSegments=new u["default"];this._features=new u["default"];this.stopHelping();this._helper=null;this.clearUserStatus();this._userStatus=null;this._subscriptions=new u["default"];this._organizations=new u["default"];this._helpArticles=new u["default"];this._studentCacheService.reset()}}]);return e}();t["default"]=b;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(147),a=s(o),c=n(211),l=s(c),u=function(){function e(t,n,i){r(this,e);this._messages=t.filter(function(e){return!e.deletedDate});this._notification=n;this._messageService=i;this._hasUnseenMessages=new l["default"];this._updated=new a["default"](this);this._notification.updated.subscribe(this._messageAdded,this)}i(e,[{key:"start",value:function(){this._notification.start()}},{key:"stop",value:function(){this._notification.stop()}},{key:"delete",value:function(e){var t=this;return this._messageService["delete"](e).then(function(){var n=t.messages.findIndex(function(t){return t.id===e});if(n>=0){var i=t._messages[n];t._messages.splice(n,1);t._hasUnseenMessages.clear();t._raiseUpdated(t.DELETE,i)}})}},{key:"markAsSeen",value:function(e){var t=this;return this._messageService.markAsSeen(e).then(function(){var n=t.messages.findIndex(function(t){return t.id===e});if(n>=0){t._messages[n].seenDate=moment();t._hasUnseenMessages.clear();t._raiseUpdated(t.UPDATE,t._messages[n])}})}},{key:"_messageAdded",value:function(e){if(e){this._messages.push(e);this._hasUnseenMessages.set(!0);this._raiseUpdated(this.ADD,e)}}},{key:"_raiseUpdated",value:function(e,t){this.updated.raise({change:e,message:t})}},{key:"destroy",value:function(){this.stop();this._notification.updated.unsubscribe(this._messageAdded,this)}},{key:"messages",get:function(){return this._messages}},{key:"updated",get:function(){return this._updated}},{key:"hasUnseenMessages",get:function(){var e=this;return this._hasUnseenMessages.value(function(){return e._messages.findIndex(function(e){return!e.seenDate})>=0})}},{key:"ADD",get:function(){return"add"}},{key:"DELETE",get:function(){return"delete"}},{key:"UPDATE",get:function(){return"update"}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(119)["default"],a=n(172)["default"],c=n(425)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(191),d=l(u),h=n(375),f=n(147),g=l(f),p=n(372),m=l(p),v=n(211),_=l(v),y=n(18),k=l(y),b=n(47),S=n(442),w=n(185),C=n(434),E=l(C),T=n(186),I=l(T),A=n(151),x=l(A),O=n(149),P=l(O),R=n(190),D=l(R),M=n(249),N=l(M),L=n(291),F=n(153),U=l(F),$=n(144),q=l($),H=n(456),j=l(H),B=n(385),W=n(457),V=function(){function e(){r(this,e)}i(e,null,[{key:"ROSTER_MEMBER",get:function(){return"roster-member"}},{key:"STUDENT_SORT",get:function(){return"student-sort"}},{key:"STUDENT_HIDE_OFFLINE",get:function(){return"student-hide-offline"}},{key:"STUDENT_HIDE_UNSTARTED",get:function(){return"student-hide-unstarted"}},{key:"STUDENT_STATUS",get:function(){return"student-status"}},{key:"MISC",get:function(){return"misc"}}]);return e}();t.SessionDataCodes=V;var z=function(){function e(){r(this,e)}i(e,null,[{key:"NameAsc",get:function(){return"Students A-Z"}},{key:"NameDesc",get:function(){return"Students Z-A"}},{key:"LastNameAsc",get:function(){return"Last Name A-Z"}},{key:"LastNameDesc",get:function(){return"Last Name Z-A"}},{key:"GradesDesc",get:function(){return"Grades High to Low"}},{key:"GradesAsc",get:function(){return"Grades Low to High"}}]);return e}();t.StudentSortOptions=z;var G=function(){function e(t,n){r(this,e);this.$timeout=n;this._sortedStudents=t;this._hasFetchStarted=!1;this._hasFetchFinished=!1}i(e,[{key:"getLength",value:function(){return this._sortedStudents.length}},{key:"getItemAtIndex",value:function(e){var t=this;if(!this._hasFetchFinished){if(!this._hasFetchStarted){this.$timeout(function(){t._hasFetchFinished=!0},50);this._hasFetchStarted=!0}return null}return this._sortedStudents[e]}},{key:"sortedStudents",set:function(e){this._sortedStudents=e}}]);return e}(),Q=function(){function e(t,n,i,s,c,l,u,f,p,m,v,y,k,b,S,w,C,E,T,A,O,P,R){var D=this;r(this,e);this._updated=new g["default"](this);this._teacher=t;this._assignment=n;this._roster=i;this._students=s;this._userRosters=c;this._userClassCodes=l;this._assignmentHelpRequests=u;this._allHelpRequests=f;this._works=p;this._proInfo=m;this._stickers=v;this._placingSticker=void 0;this.$q=y;this.$timeout=k;this._userService=b;this._assignmentWorkService=S;this._notificationService=w;this._cacheService=C;this._assignmentService=E;this._storageService=T;this._helpRequestService=A;this._feedbackService=O;this._firebaseService=P;this._mixpanelService=R;this._assignmentSheetConfigs=new a;this._assignmentThumbnailConfigs=new a;this._assignmentWorkThumbnailConfigs=new a;this._sessionQuestionNumber=void 0;this._started=!1;this._assignmentRosters=this._assignment.rosters.map(function(e){return D._userRosters.get(e)}).filter(function(e){return!!e});this._sortedStudents=[];this._virtualRepeatSortedStudents=new G([],this.$timeout);this._anonStudentNames=[];this._anonStudentNamesMap=new a;this._questionIndices=new _["default"];this._studentStatuses=new a;this._activeHelpers=new a;this._workQuestionSets=new a;this._studentSortOptions=[{name:z.NameAsc,sort:function(e,t){return I["default"].NAME_ASC(D.realOrAnonNameForStudent(e),D.realOrAnonNameForStudent(t))}},{name:z.NameDesc,sort:function(e,t){return I["default"].NAME_DESC(D.realOrAnonNameForStudent(e),D.realOrAnonNameForStudent(t))}},{name:z.LastNameAsc,sort:function(e,t){return I["default"].NAME_ASC(D.realOrAnonLastNameForStudent(e),D.realOrAnonLastNameForStudent(t))}},{name:z.LastNameDesc,sort:function(e,t){return I["default"].NAME_DESC(D.realOrAnonLastNameForStudent(e),D.realOrAnonLastNameForStudent(t))}},{name:z.GradesDesc,sort:function(e,t){return D.studentTotalScore(e.id)<D.studentTotalScore(t.id)?1:-1}},{name:z.GradesAsc,sort:function(e,t){return D.studentTotalScore(e.id)<D.studentTotalScore(t.id)?-1:1}}];this._studentSortDebounce=new x["default"](1e3,3e3,function(){return D.sortStudents()});if(this.isComplete){this._rosterNotification=w.getRosterNotification(i);this._classCode=this._userClassCodes.find(function(e){return e.rosterId===i.id});this._openHelpRequests=this._allHelpRequests.createChild(d["default"].FILTER_FUNC_UNRESOLVED,d["default"].INDEX_FUNC_HELPEE_QUESTION);this._studentHelpRequestHistory=new a([].concat(o(this.students.values())).map(function(e){return[e.id,D._helpRequestHistoryForStudent(e.id)]}));this._assignmentHelpRequestsByRoster=new a(this._assignmentRosters.map(function(e){return[e.id,D._assignmentHelpRequestChild(e)]}));this._worksByStudent=new a([].concat(o(this._works.values())).map(function(e){return[e.ownerId,e]}));this._helpInboxMetadata=new h.HelpInboxMetadata(this._openHelpRequests,this._students,this._worksByStudent,h.HelpInboxType.TEACHER);this.studentSort=this._studentSortOptions[0]}this._init()}i(e,[{key:"_init",value:function(){var e=this;if(this.isComplete){this._rosterNotification.userAdded.subscribe(this._onStudentAddedToRoster,this);this._rosterNotification.userRemoved.subscribe(this._onStudentRemovedFromRoster,this);this._rosterNotification.start();this._openHelpRequests.created.subscribe(this._onMiscUpdate,this);this._openHelpRequests.resolved.subscribe(this._onMiscUpdate,this);this._openHelpRequests.canceled.subscribe(this._onMiscUpdate,this);this._allHelpRequests.start();this._assignmentHelpRequests.start();this._works.forEach(function(t){return e._configureStudentWork(t,!1)});this._studentStatuses=new a([].concat(o(this._students.keys())).map(function(t){var n=e._notificationService.getUserStatusNotification(t,!0);n.updated.subscribe(e._onStudentStatusUpdated,e);n.start();return[t,n]}));this._activeHelpers=new a([].concat(o(this._students.keys())).map(function(t){var n=e._userService.getPeerQuestionHelpers(e._assignment,t);n.updated.subscribe(e._onMiscUpdate,e);n.start();return[t,n]}))}}},{key:"destroy",value:function(){var e=this;if(this.isComplete){this._rosterNotification.userAdded.unsubscribe(this._onStudentAddedToRoster,this);this._rosterNotification.userRemoved.unsubscribe(this._onStudentRemovedFromRoster,this);this._rosterNotification.stop();this._allHelpRequests.stop();this._allHelpRequests.created.unsubscribe(this._onMiscUpdate,this);this._allHelpRequests.resolved.unsubscribe(this._onMiscUpdate,this);this._allHelpRequests.canceled.unsubscribe(this._onMiscUpdate,this);this._assignmentHelpRequests.stop();var t=!0,n=!1,i=void 0;try{for(var r,s=c(this._studentStatuses.values());!(t=(r=s.next()).done);t=!0){var o=r.value;o.updated.unsubscribe(this._onStudentStatusUpdated,this);o.stop()}}catch(a){n=!0;i=a}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw i}}var l=!0,u=!1,d=void 0;try{for(var h,f=c(this._activeHelpers.values());!(l=(h=f.next()).done);l=!0){var g=h.value;g.updated.unsubscribe(this._onMiscUpdate,this);g.stop()}}catch(a){u=!0;d=a}finally{try{!l&&f["return"]&&f["return"]()}finally{if(u)throw d}}this.assignment.questions.forEach(function(e){return e.stop()});this._works.forEach(function(t){return e._configureStudentWork(t,!0)})}}},{key:"refreshData",value:function(){var e=this;return this.$q.all({assignment:this._cacheService.getAssignmentForUser(this.assignment.id,!0),rosters:this._cacheService.getRostersForUser(),classCodes:this._cacheService.getClassCodesForUserAssignment(this.assignment.id),students:this._cacheService.getRosterUsers(this.roster.id)}).then(function(t){e._assignment=t.assignment.mergeFrom(e._assignment);e._userRosters=t.rosters;e._roster=t.rosters.get(e._roster.id)||e._roster;e._students=t.students;e.sortStudents();e._questionIndices.clear();e._assignmentRosters=e._assignment.rosters.map(function(t){return e._userRosters.get(t)});var n=!0,i=!1,r=void 0;try{for(var s,o=c(e._assignmentRosters);!(n=(s=o.next()).done);n=!0){var a=s.value;e._assignmentHelpRequestsByRoster.has(a.id)||e._assignmentHelpRequestsByRoster.set(a.id,e._assignmentHelpRequestChild(a))}}catch(l){i=!0;r=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw r}}e._userClassCodes=t.classCodes;return e._cacheService.getRosterWorks(e.assignment,e.roster.id,!0)}).then(function(t){e._started&&e.assignment.questions.forEach(function(e){return e.start()});t.forEach(function(t){return e._configureStudentWork(t,!1)});return e})}},{key:"fetchDataForStudent",value:function(e){var t=this;return this.$q.all({user:this.student(e)||this._userService.getStudentOnRoster(this.roster.id,e),work:this.workForStudent(e)||this.$timeout(function(){},1e3,!1).then(function(){return t._assignmentWorkService.getOrCreateForOther(t._assignment,t.roster.id,e)})}).then(function(n){t._students.has(e)||t._students.set(e,n.user);if(!t._studentStatuses.has(e)){var i=t._notificationService.getUserStatusNotification(e,!0);i.updated.subscribe(t._onStudentStatusUpdated,t);t._studentStatuses.set(e,i);i.start()}if(!t._activeHelpers.has(e)){var r=t._userService.getPeerQuestionHelpers(t._assignment,e);t._activeHelpers.set(e,r);r.updated.subscribe(t._onMiscUpdate,t);r.start()}t._studentHelpRequestHistory.has(e)||t._studentHelpRequestHistory.set(e,t._helpRequestHistoryForStudent(e));t._configureStudentWork(n.work,!1);return t})["catch"](function(e){k["default"].get.$log.error(e)})}},{key:"_assignmentHelpRequestChild",value:function(e){return this._assignmentHelpRequests.createChild(function(t){return t.rosterId===e.id})}},{key:"_configureStudentWork",value:function(e,t){var n=this,i=this._works.get(e.id);if(t&&i){i.questions.forEach(function(e){e.stop();e.messages.stop()});this._works["delete"](e.id);this._worksByStudent["delete"](e.ownerId)}else i&&e.mergeFrom(i,!0);var r=this._workQuestionSets.get(e.ownerId);if(t&&r){r.stop();r.updated.unsubscribe(this._onWorkSetUpdated,this);this._workQuestionSets["delete"](e.ownerId)}else if(r)r.assignmentWork=e;else if(!t){r=this._assignmentWorkService.getAssignmentWorkQuestionSet(e);r.updated.subscribe(this._onWorkSetUpdated,this);r.start()}e.questions.forEach(function(t){n._assignmentSheetConfigs["delete"](n._assignmentSheetConfigIndex(e.ownerId,t.id));n._assignmentThumbnailConfigs["delete"](n._assignmentThumbnailConfigIndex(e.assignmentId,t.id));n._assignmentWorkThumbnailConfigs["delete"](n._assignmentWorkThumbnailConfigIndex(e.ownerId,t.id))});i&&i.questions.forEach(function(t){n._assignmentSheetConfigs["delete"](n._assignmentSheetConfigIndex(e.ownerId,t.id));n._assignmentThumbnailConfigs["delete"](n._assignmentThumbnailConfigIndex(e.assignmentId,t.id));n._assignmentWorkThumbnailConfigs["delete"](n._assignmentWorkThumbnailConfigIndex(e.ownerId,t.id))});if(!t){this._works.set(e.id,e);this._worksByStudent.set(e.ownerId,e);this._workQuestionSets.set(e.ownerId,r)}}},{key:"_onWorkSetUpdated",value:function(e,t){var n=t.assignmentWork.ownerId;e.startedAt&&e.questionId&&n&&this._assignmentWorkThumbnailConfigs["delete"](this._assignmentWorkThumbnailConfigIndex(n,e.questionId))}},{key:"_onStudentAddedToRoster",value:function(e){var t=this;this.fetchDataForStudent(e.userId).then(function(){t._raiseUpdated(V.ROSTER_MEMBER)})}},{key:"_onStudentRemovedFromRoster",value:function(e){this._students.has(e.userId)&&this._students["delete"](e.userId);var t=this.workForStudent(e.userId);t&&this._configureStudentWork(t,!0);if(this._studentStatuses.has(e.userId)){this._studentStatuses.get(e.userId).stop();this._studentStatuses["delete"](e.userId)}if(this._activeHelpers.has(e.userId)){this._activeHelpers.get(e.userId).stop();this._activeHelpers.get(e.userId).updated.unsubscribe(this._onMiscUpdate,this);this._activeHelpers["delete"](e.userId)}this._studentHelpRequestHistory.has(e.userId)&&this._studentHelpRequestHistory["delete"](e.userId);this._raiseUpdated(V.ROSTER_MEMBER)}},{key:"_onStudentStatusUpdated",value:function(e){var t=this,n=this.$q.resolve({}),i=this.studentStatus(e.userId),r=i&&i.oldStatus,s=e.assignmentId===this.assignment.id,o=!r||r.online!==e.online,a=e.online&&s&&!this.studentHasStarted(e.userId);a&&(n=this.fetchDataForStudent(e.userId));n.then(function(){t._raiseUpdated(V.STUDENT_STATUS,{userIsNowOnline:o,userIsLoggingOnForFirstTime:a})})}},{key:"_helpRequestHistoryForStudent",value:function(e){var t=this;return this._allHelpRequests.createChild(function(n){return!!n.resolved&&t.students.get(n.helpeeId)&&t.students.get(n.helperId)&&n.helpeeId!==n.helperId&&(n.helpeeId===e||n.helperId===e)})}},{key:"_raiseUpdated",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this._updated.raise(s({code:e},t))}},{key:"_onMiscUpdate",value:function(){this._raiseUpdated(V.MISC)}},{key:"start",value:function(){var e=this;this._started=!0;this.assignment.questions.forEach(function(e){return e.start()});this._works.forEach(function(t){return e._configureStudentWork(t,!1)})}},{key:"questionNumber",value:function(e){return this.assignment.questionNumberForId(e)}},{key:"rosterById",value:function(e){return this._userRosters.get(e)}},{key:"_updateClassCodeMetadata",value:function(e,t,n){var i=this;this._assignmentService.addOrUpdateRoster(this.assignment.id,this.roster.id,e,t,n).then(function(e){i._classCode=e;return i._cacheService.getClassCodesForUserAssignment(i.assignment.id,!0)}).then(function(e){i._userClassCodes=e})["catch"](function(e){k["default"].get.$log.error(e)})}},{key:"realOrAnonNameForStudent",value:function(e){return this.hideStudentNames?this.anonNameForStudent(e):e.name}},{key:"realOrAnonLastNameForStudent",value:function(e){return this.hideStudentNames?(0,W.parseFullName)(this.anonNameForStudent(e)).last:e.lastName||(0,W.parseFullName)(e.name).last}},{key:"anonNameForStudent",value:function(e){if(!this._anonStudentNamesMap.has(e.id)){var t=""+e.id+this.sessionId,n=D["default"].hashFunc(t,this.anonStudentNames.length),i=this.anonStudentNames.splice(n,1)[0];this._anonStudentNamesMap.set(e.id,i.displayWithoutArticle)}return this._anonStudentNamesMap.get(e.id)}},{key:"sortStudents",value:function(){this._sortedStudents=this.filterStudents([].concat(o(this.students.values()))).sort(this.studentSort.sort);this._virtualRepeatSortedStudents.sortedStudents=this._sortedStudents}},{key:"filterStudents",value:function(e){var t=this;return this.hideOfflineStudents||this.hideUnstartedAssignmentWorks?e.filter(function(e){return t.hideOfflineStudents&&t.hideUnstartedAssignmentWorks?t.studentIsOnline(e.id)&&t.studentHasStarted(e.id):t.hideOfflineStudents?t.studentIsOnline(e.id):t.hideUnstartedAssignmentWorks?t.studentHasStarted(e.id):void 0}):e}},{key:"showHiddenStudents",value:function(){this.hideOfflineStudents=!1;this.hideUnstartedAssignmentWorks=!1}},{key:"configureSortFromStorage",value:function(){var e=this,t=this.studentSortOptions.find(function(t){return t.name===e._storageService.sessionSort});t&&(this.studentSort=t)}},{key:"student",value:function(e){return this._students.get(e)}},{key:"studentStatus",value:function(e){return this._studentStatuses.get(e)}},{key:"studentIsOnline",value:function(e){var t=this.studentStatus(e);return t&&t.status&&t.status.online&&t.status.assignmentId===this.assignment.id}},{key:"studentHasStarted",value:function(e){var t=this.workForStudent(e);return angular.isDefined(t)&&!!t.hasStarted}},{key:"studentHasStartedQuestion",value:function(e,t){var n=this.workForStudent(e),i=angular.isDefined(n)&&n.questionForId(t);return i&&!!i.startedAt}},{key:"studentIsHelpingPeer",value:function(e){var t=this.studentStatus(e);return this.studentIsOnline(e)&&t.status.activity===S.StatusActivities.HELPING}},{key:"studentLastSeen",value:function(e){var t=this.studentStatus(e);if(t&&t.status){var n=this.studentIsOnline(e);return n?"Currently Online":"Last seen "+this.formatTime(t.status.time)}return""}},{key:"formatTime",value:function(e){return moment().to(e)}},{key:"studentIsCurrentLocation",value:function(e,t){var n=this.studentStatus(e);return this.studentIsOnline(e)&&n.status&&n.status.questionId===t&&n.status.activity===S.StatusActivities.WORKING}},{key:"assignmentHelpRequestsForRoster",value:function(e){return this._assignmentHelpRequestsByRoster&&this._assignmentHelpRequestsByRoster.get(e)}},{key:"findOpenHelpRequest",value:function(e,t){return this.openHelpRequests.get(d["default"]._INDEX_HELPEE_QUESTION(e,t))}},{key:"hasOpenHelpRequestOrHelpers",value:function(e,t){return this.studentHasPeerHelpersForQuestion(e,t)||this.hasOpenHelpRequest(e,t)}},{key:"findOpenHelpRequestType",value:function(e,t){if(this.studentHasActiveHelpersForQuestion(e,t))return"active-helper";var n=this.findOpenHelpRequest(e,t);return n?n.requestType:""}},{key:"hasOpenHelpRequest",value:function(e,t){return!!this.findOpenHelpRequest(e,t)}},{key:"studentHelpHistory",value:function(e){return this._studentHelpRequestHistory.get(e).requests}},{key:"studentHelpHistorySortedChronologically",value:function(e){return this.studentHelpHistory(e).sort(function(e,t){return e.resolved.isSame(t.resolved)?0:e.resolved.isBefore(t.resolved)?1:-1})}},{key:"studentHasHelpHistory",value:function(e){var t=this.studentHelpHistory(e);return t&&t.length>0}},{key:"checkForHands",value:function(e,t,n){var i=this.findOpenHelpRequest(e,t.id);i&&(i.isCheck||i.isHelp)&&this._helpRequestService.lowerHand(i,t,n)}},{key:"activeHelpersForStudent",value:function(e){return this._activeHelpers.get(e)}},{key:"studentHasActiveHelpers",value:function(e){return this.activeHelpersForStudent(e).hasHelpers}},{key:"studentHasActiveHelpersForQuestion",value:function(e,t){var n=this.activeHelpersForStudent(e),i=n&&n.helpers[t];return i&&i.list.length>0}},{key:"studentHasPeerHelpersForQuestion",value:function(e,t){var n=this.activeHelpersForStudent(e),i=n&&n.helpers[t];return i&&i.list.filter(function(e){return e!==n.selfHelper}).length>0}},{key:"studentActiveHelpers",value:function(e){var t=this.activeHelpersForStudent(e);if(this.studentIsHelpingPeer(e)){var n=this.student(e),i=this.studentStatus(e).status;t.selfHelper=new E["default"](n.id,n.name,w.UserRoles.STUDENT,i.helpeeId,i.assignmentId,i.questionId,i.time.valueOf())}else t.selfHelper=null;return t.helpers}},{key:"studentHasActiveHelpOrHistory",value:function(e){return this.studentHasHelpHistory(e)||this.studentHasActiveHelpers(e)}},{key:"studentActiveHelpOrHistoryCount",value:function(e){var t=this.studentHelpHistory(e),n=t?t.length:0,i=this.activeHelpersForStudent(e);return n+i.helpersHelpCount}},{key:"placeSticker",value:function(e,t,n,i){var r=this,s=arguments.length<=4||void 0===arguments[4]?L.StickerSources.SESSION_QUESTION:arguments[4],o=e.questionForId(n);this.$q.all([this.createSticker(this.teacher.id,o),this.addScore(e.assignmentId,e.id,o,i.score)]).then(function(){r.checkForHands(t,o,r.teacher);r._feedbackService.give(t,e.id,n,r.teacher.id,r.teacher.name);r._mixpanelService.stickerPlaced(s,i.imageType,i.imageName)})}},{key:"addScore",value:function(e,t,n,i){var r=n.addScore(i);return r!==n.points&&this._assignmentWorkService.updateQuestionScore(r,n,e,t)}},{key:"updateScore",value:function(e,t,n,i){var r=this,s=e.questionForId(n);return this._assignmentWorkService.updateQuestionScore(i,s,e.assignmentId,e.id).then(function(){r.checkForHands(t,s,r.teacher);r._feedbackService.give(t,e.id,n,r.teacher.id,r.teacher.name)})}},{key:"createSticker",value:function(e,t){var n=this._getPlacementPosition(t.elements,N["default"].InitialStickerPosition),i=new N["default"](this._firebaseService.newId(),new U["default"](e,w.UserRoles.TEACHER,F.ElementIntents.FEEDBACK),n,void 0,this.placingSticker.text,this.placingSticker.imageUrl,this.placingSticker.score,!1);return t.saveElement(i)}},{key:"_getPlacementPosition",value:function(e,t){if(this._positionIsClear(e,t))return t;var n=t.plus(new q["default"](0,50));return this._getPlacementPosition(e,n)}},{key:"_positionIsClear",value:function(e,t){return!e.some(function(e){return e.type===N["default"].type&&e.location.y===t.y})}},{key:"studentQuestionAnswer",value:function(e,t){if(!this.hasWorkForStudent(e))return void 0;var n=this.workForStudent(e),i=n.questionForId(t);return i&&i.answer}},{key:"studentQuestionAnswerValue",value:function(e,t){var n=this.studentQuestionAnswer(e,t);return n&&n.value}},{key:"studentQuestionAnswerClass",value:function(e,t){var n=this.studentQuestionAnswer(e,t),i=n&&n.correct,r=n&&n.value;return n&&r?i===!0?"correct":i===!1?"incorrect":"no-correct":"hide"}},{key:"studentQuestionScore",value:function(e,t){if(!this.hasWorkForStudent(e))return void 0;var n=this.workForStudent(e),i=n.questionForId(t),r=i&&i.points;return angular.isNumber(r)?r:void 0}},{key:"studentQuestionScoreDisplay",value:function(e,t){var n=this.studentQuestionScore(e,t);return angular.isNumber(n)?n:""}},{key:"studentQuestionScoreColor",value:function(e,t){var n=this.studentQuestionScore(e,t),i=this.assignment.questionForId(t).points;return 0===n&&0===i?P["default"].CK_HEADER_GREY:m["default"].colorForScore(n/i)}},{key:"studentQuestionScoreClass",value:function(e,t){var n=this.studentQuestionScore(e,t),i=this.assignment.questionForId(t).points,r=n/i;if(angular.isUndefined(n)||0===n&&0===i){var s=this.studentQuestionAnswer(e,t),o=s&&s.correct;return o===!0?"score-meets":o===!1?"score-below":this.studentHasStartedQuestion(e,t)||!this.hideUnstartedThumbnails?"score-started":"score-none"}0===i&&(r=1);return"score-"+(m["default"].colorClassForScore(r)||(this.studentHasStartedQuestion(e,t)?"started":"none"))}},{key:"studentTotalScore",value:function(e){var t=this.workQuestionSet(e);return t?t.totalPoints:0}},{key:"studentTotalScoreDisplay",value:function(e){var t=this.studentTotalScore(e),n=this._assignment.totalPotentialPoints();return 0===t&&0===n?"":t+"/"+n+" Pts"}},{key:"workQuestionSet",value:function(e){return this._workQuestionSets.get(e)}},{key:"workById",value:function(e){return this._works.get(e)}},{key:"workForStudent",value:function(e){return this._worksByStudent.get(e)}},{key:"hasWorkForStudent",value:function(e){return this._worksByStudent.has(e)}},{key:"formatTooltipMessageForQuestionWork",value:function(e,t){return"Click to see "+e.name+"'s work on slide "+this.assignment.questionNumberForId(t)}},{key:"_assignmentSheetConfigIndex",value:function(e,t){return e+"|"+t}},{key:"_assignmentThumbnailConfigIndex",value:function(e,t){return e+"|"+t}},{key:"_assignmentWorkThumbnailConfigIndex",value:function(e,t){return e+"|"+t}},{key:"assignmentSheetConfig",value:function(e,t){if(!this.isComplete||this.hideUnstartedThumbnails&&!this.studentHasStartedQuestion(e,t))return null;var n=this._assignmentSheetConfigIndex(e,t);this._assignmentSheetConfigs.has(n)||this._assignmentSheetConfigs.set(n,new b.AssignmentSheetMetadata(this.workForStudent(e)||this.assignment,t,!0,!0,null,w.UserRoles.TEACHER,null,null,.25));return this._assignmentSheetConfigs.get(n)}},{key:"assignmentThumbnailConfig",value:function(e,t){if(!this.isComplete||this.hideUnstartedThumbnails&&!this.studentHasStartedQuestion(e,t))return null;var n=this._assignmentThumbnailConfigIndex(this.assignment.id,t);this._assignmentThumbnailConfigs.has(n)||this._assignmentThumbnailConfigs.set(n,new B.AssignmentThumbnailMetadata(this.assignment,t,null,w.UserRoles.TEACHER,null,.25,1,B.AssignmentThumbnailMetadata.NonManipulativeParents));return this._assignmentThumbnailConfigs.get(n)}},{key:"assignmentWorkThumbnailConfig",value:function(e,t){if(!this.isComplete||this.hideUnstartedThumbnails&&!this.studentHasStartedQuestion(e,t))return null;var n=this.workForStudent(e),i=this._assignmentWorkThumbnailConfigIndex(e,t);if(!this._assignmentWorkThumbnailConfigs.has(i)){var r=n&&!this.studentHasStartedQuestion(e,t),s=n?B.AssignmentThumbnailMetadata.NonManipulativeParents:B.AssignmentThumbnailMetadata.ManipulativeParents;this._assignmentWorkThumbnailConfigs.set(i,new B.AssignmentThumbnailMetadata(n||this.assignment,t,null,w.UserRoles.TEACHER,null,r?1:.25,r?.25:1,s))}return this._assignmentWorkThumbnailConfigs.get(i)}},{key:"makeClassCodePulse",value:function(){j["default"].makeElementPulse(".session .md-button.class-code")}},{key:"makeRosterSelectPulse",value:function(){j["default"].makeElementPulse(".session .select-roster md-select .md-select-value")}},{key:"sessionQuestionNumber",get:function(){return this._sessionQuestionNumber},set:function(e){this._sessionQuestionNumber=e}},{key:"ViewAllSlides",get:function(){return"view-all-slides"}},{key:"teacher",get:function(){return this._teacher}},{key:"isComplete",get:function(){return!!this._roster}},{key:"updated",get:function(){return this._updated}},{key:"assignment",get:function(){return this._assignment}},{key:"assignmentName",get:function(){return this.assignment?this.assignment.name:"Loading..."}},{key:"questions",get:function(){var e=this;return this.assignment?this._questionIndices.value(function(){return e.assignment.questions.map(function(e,t){return{question:e,index:t,number:t+1}})}):[]}},{key:"roster",get:function(){return this._roster}},{key:"rosterIsEmpty",get:function(){return this._students&&0===this._students.size}},{key:"rosterNotification",get:function(){return this._rosterNotification}},{key:"hasRosters",get:function(){return!!this.assignmentRosters&&this.assignmentRosters.length>0}},{key:"userRosters",get:function(){return this._userRosters}},{key:"assignmentRosters",get:function(){return this._assignmentRosters}},{key:"classCode",get:function(){return this._classCode},set:function(e){this._classCode=e}},{key:"showStudentScores",get:function(){return this.classCode.showStudentScores},set:function(e){this._updateClassCodeMetadata(e,this.lockStudentWork,this.hideStudentWork)}},{key:"lockStudentWork",get:function(){return this.classCode.lockStudentWork},set:function(e){this._updateClassCodeMetadata(this.showStudentScores,e,this.hideStudentWork)}},{key:"hideStudentWork",get:function(){return this.classCode.hideStudentWork},set:function(e){this._updateClassCodeMetadata(this.showStudentScores,this.lockStudentWork,e)}},{key:"classCodes",get:function(){return this._userClassCodes}},{key:"hideUnstartedThumbnails",get:function(){var e=this._storageService.hideUnstartedThumbnails;return null===e||angular.isUndefined(e)?!0:e},set:function(e){this._storageService.hideUnstartedThumbnails=e}},{key:"hideOfflineStudents",get:function(){return this._storageService.hideOfflineStudents},set:function(e){this._storageService.hideOfflineStudents=e;this.sortStudents();this._raiseUpdated(V.STUDENT_HIDE_OFFLINE)}},{key:"hideUnstartedAssignmentWorks",get:function(){return this._storageService.hideUnstartedAssignmentWorks},set:function(e){this._storageService.hideUnstartedAssignmentWorks=e;this.sortStudents();this._raiseUpdated(V.STUDENT_HIDE_UNSTARTED)}},{key:"hideStudentNames",get:function(){return this._storageService.hideStudentNames},set:function(e){this._storageService.hideStudentNames=e;this.sortStudents()}},{key:"sessionId",get:function(){return""+this.assignment.id+(this.hasRosters&&this.roster.id)}},{key:"anonStudentNames",get:function(){0===this._anonStudentNames.length&&(this._anonStudentNames=D["default"].combinationsForHelperWithoutColors.slice());return this._anonStudentNames}},{key:"studentSortOptions",get:function(){return this._studentSortOptions}},{key:"studentSort",get:function(){return this._studentSort},set:function(e){this._studentSort=e;this.sortStudents();this._raiseUpdated(V.STUDENT_SORT)}},{key:"sortedAndUnfilteredStudents",get:function(){return[].concat(o(this.students.values())).sort(this.studentSort.sort)}},{key:"studentSortDebounce",get:function(){return this._studentSortDebounce}},{key:"filteredStudentsCount",get:function(){return this.students?this.students.size-this._sortedStudents.length:void 0}},{key:"showClassCodeHelpText",get:function(){return this.filteredStudentsCount<=2&&this.students.size<4}},{key:"showFeedbackHelpText",get:function(){return this.filteredStudentsCount<=2&&this.students.size>=4;
}},{key:"showStudentsAreHiddenHelpText",get:function(){return this.filteredStudentsCount>2}},{key:"students",get:function(){return this._students}},{key:"sortedStudents",get:function(){return this._sortedStudents}},{key:"virtualRepeatSortedStudents",get:function(){return this._virtualRepeatSortedStudents}},{key:"studentLoggedInCount",get:function(){var e=0;if(this._students){var t=!0,n=!1,i=void 0;try{for(var r,s=c(this._students.keys());!(t=(r=s.next()).done);t=!0){var o=r.value;this.studentIsOnline(o)&&e++}}catch(a){n=!0;i=a}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw i}}}return e}},{key:"allHelpRequests",get:function(){return this._allHelpRequests}},{key:"openHelpRequests",get:function(){return this._openHelpRequests}},{key:"hasOpenHelpRequests",get:function(){return this._openHelpRequests&&this._openHelpRequests.size>0}},{key:"assignmentHelpRequests",get:function(){return this._assignmentHelpRequests}},{key:"helpInboxMetadata",get:function(){return this._helpInboxMetadata}},{key:"activeHelpers",get:function(){return this._activeHelpers}},{key:"stickers",get:function(){return this._stickers}},{key:"placingSticker",get:function(){return this._placingSticker},set:function(e){this._placingSticker=e}},{key:"workQuestionSets",get:function(){return this._workQuestionSets}},{key:"works",get:function(){return this._works}},{key:"worksByStudent",get:function(){return this._worksByStudent}},{key:"pro",get:function(){return this._proInfo}},{key:"features",get:function(){return this.pro&&this.pro.features}}],[{key:"fetch",value:function(t,n,i,r,s,o,a,c,l,u,d,h,f,g){return i.all({assignment:s.getAssignmentForUser(t),rosters:s.getRostersForUser(),classCodes:s.getClassCodesForUserAssignment(t),teacher:s.getUser(),proInfo:s.getProInfo(),stickers:s.getStickersForUser()}).then(function(e){var r={assignment:e.assignment,userRosters:e.rosters,userClassCodes:e.classCodes,teacher:e.teacher,proInfo:e.proInfo,stickers:e.stickers};if(n){r.roster=r.userRosters.get(n);r.rosterMembers=s.getRosterUsers(n,!0);r.allHelpRequests=o.getHelpRequestSetForPeers(r.assignment.ownerId,t,n,!0);r.assignmentHelpRequests=o.getHelpRequestSetForAssignment(e.assignment.ownerId,t);r.works=s.getRosterWorks(r.assignment,n,!0)}return i.all(r)}).then(function(t){return t.roster?new e(t.teacher,t.assignment,t.roster,t.rosterMembers,t.userRosters,t.userClassCodes,t.assignmentHelpRequests,t.allHelpRequests,t.works,t.proInfo,t.stickers,i,r,c,a,l,s,u,d,o,h,f,g):new e(t.teacher,t.assignment,null,null,t.userRosters,t.userClassCodes,void 0,void 0,void 0,t.proInfo)})}}]);return e}();t["default"]=Q},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"makeElementPulse",value:function(e,t){var n=angular.element(e),i=t?"ck-pulse-infinite":"ck-pulse",r=function s(){n.removeClass(i);n.off("animationend",s)};n.on("animationend",r);n.addClass(i)}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t){t.parseFullName=function(e,t,n,i,r){"use strict";function s(e){if(i)throw"Error: "+e;I.error.push("Error: "+e)}function o(e,t){var n,i,r=["e","y","av","af","da","dal","de","del","der","di","la","le","van","der","den","vel","von","II","III","IV","J.D.","LL.M.","M.D.","D.O.","D.C.","Ph.D."],s=[];if(t){s=Object.keys(I).filter(function(e){return"error"!==e});for(a=0,l=s.length;l>a;a++)if(e[s[a]]){i=(e[s[a]]+"").split(" ");for(c=0,u=i.length;u>c;c++){n=r.map(function(e){return e.toLowerCase()}).indexOf(i[c].toLowerCase());n>-1?i[c]=r[n]:1===i[c].length?i[c]=i[c].toUpperCase():i[c].length>2&&i[c].slice(0,1)===i[c].slice(0,1).toUpperCase()&&i[c].slice(1,2)===i[c].slice(1,2).toLowerCase()&&i[c].slice(2)===i[c].slice(2).toUpperCase()?i[c]=i[c].slice(0,3)+i[c].slice(3).toLowerCase():"suffix"!==s[c]||"."===w[c].slice(-1)||p.indexOf(w[c].toLowerCase())?i[c]=i[c].slice(0,1).toUpperCase()+i[c].slice(1).toLowerCase():i[c]===i[c].toLowerCase()&&(i[c]=i[c].toUpperCase())}e[s[a]]=i.join(" ")}}return e}e&&(e=e.trim());var a,c,l,u,d,h,f,g,p,m,v,_,y,k,b,S,w=[],C=[null],E=[],T=["&","and","et","e","of","the","und","y"],I={title:"",first:"",middle:"",last:"",nick:"",suffix:"",error:[]};t=t&&["title","first","middle","last","nick","suffix","error"].indexOf(t.toLowerCase())>-1?t.toLowerCase():"all";n===!1&&(n=0);n===!0&&(n=1);n="undefined"===n||0!==n&&1!==n?-1:n;i===!0&&(i=1);i=i&&1===i?1:0;r===!0&&(r=1);r=r&&1===r?1:0;if(!e||"string"!=typeof e){s("No input");I=o(I,n);return"all"===t?I:I[t]}-1===n&&(n=e===e.toUpperCase()||e===e.toLowerCase()?1:0);if(r){p=["esq","esquire","jr","jnr","sr","snr","2","ii","iii","iv","v","clu","chfc","cfp","md","phd","j.d.","ll.m.","m.d.","d.o.","d.c.","p.c.","ph.d."];m=["a","ab","antune","ap","abu","al","alm","alt","bab","bck","bar","bath","bat","beau","beck","ben","berg","bet","bin","bint","birch","bjrk","bjrn","bjur","da","dahl","dal","de","degli","dele","del","della","der","di","dos","du","e","ek","el","escob","esch","fleisch","fitz","fors","gott","griff","haj","haug","holm","ibn","kauf","kil","koop","kvarn","la","le","lind","lnn","lund","mac","mhic","mic","mir","na","naka","neder","nic","ni","nin","nord","norr","ny","o","ua","ui'","fver","ost","ver","z","papa","pour","quarn","skog","skoog","sten","stor","strm","sder","ter","ter","tre","trk","van","vst","vster","vest","von"];g=["mr","mrs","ms","miss","dr","herr","monsieur","hr","frau","a v m","admiraal","admiral","air cdre","air commodore","air marshal","air vice marshal","alderman","alhaji","ambassador","baron","barones","brig","brig gen","brig general","brigadier","brigadier general","brother","canon","capt","captain","cardinal","cdr","chief","cik","cmdr","coach","col","col dr","colonel","commandant","commander","commissioner","commodore","comte","comtessa","congressman","conseiller","consul","conte","contessa","corporal","councillor","count","countess","crown prince","crown princess","dame","datin","dato","datuk","datuk seri","deacon","deaconess","dean","dhr","dipl ing","doctor","dott","dott sa","dr","dr ing","dra","drs","embajador","embajadora","en","encik","eng","eur ing","exma sra","exmo sr","f o","father","first lieutient","first officer","flt lieut","flying officer","fr","frau","fraulein","fru","gen","generaal","general","governor","graaf","gravin","group captain","grp capt","h e dr","h h","h m","h r h","hajah","haji","hajim","her highness","her majesty","herr","high chief","his highness","his holiness","his majesty","hon","hr","hra","ing","ir","jonkheer","judge","justice","khun ying","kolonel","lady","lcda","lic","lieut","lieut cdr","lieut col","lieut gen","lord","m","m l","m r","madame","mademoiselle","maj gen","major","master","mevrouw","miss","mlle","mme","monsieur","monsignor","mr","mrs","ms","mstr","nti","pastor","president","prince","princess","princesse","prinses","prof","prof dr","prof sir","professor","puan","puan sri","rabbi","rear admiral","rev","rev canon","rev dr","rev mother","reverend","rva","senator","sergeant","sheikh","sheikha","sig","sig na","sig ra","sir","sister","sqn ldr","sr","sr d","sra","srta","sultan","tan sri","tan sri dato","tengku","teuku","than puying","the hon dr","the hon justice","the hon miss","the hon mr","the hon mrs","the hon ms","the hon sir","the very rev","toh puan","tun","vice admiral","viscount","viscountess","wg cdr","ind","misc","mx"]}else{p=["esq","esquire","jr","jnr","sr","snr","2","ii","iii","iv","md","phd","j.d.","ll.m.","m.d.","d.o.","d.c.","p.c.","ph.d."];m=["ab","bar","bin","da","dal","de","de la","del","della","der","di","du","ibn","l'","la","le","san","st","st.","ste","ter","van","van de","van der","van den","vel","ver","vere","von"];g=["dr","miss","mr","mrs","ms","prof","sir","frau","herr","hr","monsieur","captain","doctor","judge","officer","professor","ind","misc","mx"]}v=/\s(?:[']([^']+)[']|["]([^"]+)["]|\[([^\]]+)\]|\(([^\)]+)\)),?\s/g;y=(" "+e+" ").match(v);y&&(E=E.concat(y));k=E.length;if(1===k){I.nick=E[0].slice(2).slice(0,-2);","===I.nick.slice(-1)&&(I.nick=I.nick.slice(0,-1));e=(" "+e+" ").replace(E[0]," ").trim();E=[]}else if(k>1){s(k+" nicknames found");for(a=0;k>a;a++){e=(" "+e+" ").replace(E[a]," ").trim();E[a]=E[a].slice(2).slice(0,-2);","===E[a].slice(-1)&&(E[a]=E[a].slice(0,-1))}I.nick=E.join(", ");E=[]}if(!e.trim().length){I=o(I,n);return"all"===t?I:I[t]}for(a=0,d=e.split(" "),l=d.length;l>a;a++){h=d[a];f=null;if(","===h.slice(-1)){f=",";h=h.slice(0,-1)}w.push(h);C.push(f)}for(l=w.length,a=l-1;a>0;a--){_="."===w[a].slice(-1)?w[a].slice(0,-1).toLowerCase():w[a].toLowerCase();if(p.indexOf(_)>-1||p.indexOf(_+".")>-1){E=w.splice(a,1).concat(E);","===C[a]?C.splice(a+1,1):C.splice(a,1)}}k=E.length;if(1===k){I.suffix=E[0];E=[]}else if(k>1){s(k+" suffixes found");I.suffix=E.join(", ");E=[]}if(!w.length){I=o(I,n);return"all"===t?I:I[t]}for(l=w.length,a=l-1;a>=0;a--){_="."===w[a].slice(-1)?w[a].slice(0,-1).toLowerCase():w[a].toLowerCase();if(g.indexOf(_)>-1||g.indexOf(_+".")>-1){E=w.splice(a,1).concat(E);","===C[a]?C.splice(a+1,1):C.splice(a,1)}}k=E.length;if(1===k){I.title=E[0];E=[]}else if(k>1){s(k+" titles found");I.title=E.join(", ");E=[]}if(!w.length){I=o(I,n);return"all"===t?I:I[t]}if(w.length>1)for(a=w.length-2;a>=0;a--)if(m.indexOf(w[a].toLowerCase())>-1){w[a]=w[a]+" "+w[a+1];w.splice(a+1,1);C.splice(a+1,1)}if(w.length>2)for(a=w.length-3;a>=0;a--)if(T.indexOf(w[a+1].toLowerCase())>-1){w[a]=w[a]+" "+w[a+1]+" "+w[a+2];w.splice(a+1,2);C.splice(a+1,2);a--}C.pop();b=C.indexOf(",");S=C.filter(function(e){return null!==e}).length;if(b>1||S>1)for(a=w.length-1;a>=2&&","===C[a];a--){E=w.splice(a,1).concat(E);C.splice(a,1);S--}if(E.length){I.suffix&&(E=[I.suffix].concat(E));I.suffix=E.join(", ");E=[]}if(S>0){S>1&&s(S-1+" extra commas found");if(C.indexOf(",")){I.last=w.splice(0,C.indexOf(",")).join(" ");C.splice(0,C.indexOf(","))}}else I.last=w.pop();if(!w.length){I=o(I,n);return"all"===t?I:I[t]}I.first=w.shift();if(!w.length){I=o(I,n);return"all"===t?I:I[t]}w.length>2&&s(w.length+" middle names");I.middle=w.join(" ");I=o(I,n);return"all"===t?I:I[t]}},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(293)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){r(this,e)}i(e,null,[{key:"ConfirmSchool",get:function(){return"confirm-school"}}]);return e}();t.ABTest=a;var c=function(){function e(){r(this,e)}i(e,null,[{key:"A",get:function(){return"A"}},{key:"B",get:function(){return"B"}}]);return e}();t.ABTestVariable=c;var l=function(){function e(t,n){"ngInject";r(this,e);this._httpService=t;this._environment=n}e.$inject=["HttpService","environment"];i(e,[{key:"getTestSegmentsForUser",value:function(e){return this._httpService.authGet(this._environment.serverUrlBase+"/v1/users/"+e+"/ab-test").then(function(e){return new s(o(e).map(function(t){return[t,e[t]]}))})}}]);return e}();t["default"]=l},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(281),a=s(o),c=function(){function e(t,n){r(this,e);this._features=t;this._contracts=n;this._isPro=void 0;this._isTrial=void 0;this._isTrialExpired=void 0;this._activeTrialContract=void 0}i(e,[{key:"features",get:function(){return this._features}},{key:"contracts",get:function(){return this._contracts}},{key:"isFree",get:function(){return!this.isPro&&!this.isTrial}},{key:"isPro",get:function(){angular.isUndefined(this._isPro)&&(this._isPro=this._contracts.some(function(e){return!e.isExpired&&e.isPro}));return this._isPro}},{key:"isTrial",get:function(){angular.isUndefined(this._isTrial)&&(this._isTrial=this._contracts.some(function(e){return!e.isExpired&&e.isTrial}));return this._isTrial}},{key:"activeTrialContract",get:function(){angular.isUndefined(this._activeTrialContract)&&(this._activeTrialContract=this._contracts.find(function(e){return!e.isExpired&&e.isTrial}));return this._activeTrialContract}},{key:"isTrialExpired",get:function(){angular.isUndefined(this._isTrialExpired)&&(this._isTrialExpired=this._contracts.some(function(e){return e.isExpired&&e.isTrial}));return this._isTrialExpired}},{key:"hasFoldersFeature",get:function(){return this._features.has(a["default"].FOLDERS)}},{key:"hasGradeExport",get:function(){return this._features.has(a["default"].GRADE_EXPORT)}},{key:"hasStudentAccounts",get:function(){return this._features.has(a["default"].STUDENT_ACCOUNTS)}},{key:"hasUnlimitedAssignments",get:function(){return this._features.has(a["default"].UNLIMITED_ASSIGNMENTS)}},{key:"hasExportStudentWork",get:function(){return this._features.has(a["default"].EXPORT_STUDENT_WORK)}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(355),a=s(o),c=function(){function e(t,n,i){"ngInject";r(this,e);this._environment=i;this._httpService=t;this._authService=n;this._classCodeCodec=new a["default"]}e.$inject=["HttpService","AuthService","environment"];i(e,[{key:"getForCurrentUserAssignment",value:function(e){return this.getForUserAssignment(this._authService.authData.id,e)}},{key:"getForUserAssignment",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/users/"+e+"/class-codes/"+t).then(function(e){return e.class_codes.map(function(e){return n._classCodeCodec.decode(e)})})}},{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/class-codes/"+e).then(function(e){return t._classCodeCodec.decode(e)})}},{key:"getForAssignmentAndRoster",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/assignments/"+e+"/rosters/"+t+"/class-code").then(function(e){return n._classCodeCodec.decode(e.class_code)})}},{key:"getUsernames",value:function(e){return this._httpService.get(this._environment.serverUrlBase+"/v1/class-codes/"+e+"/usernames").then(function(e){return{names:e.names,allowNewMembers:e.allow_new_members,pro:e.pro,hideStudentWork:e.hide_student_work}})}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(462),c=o(a),l=n(406),u=o(l),d=n(467),h=o(d),f=n(271),g=o(f),p=n(355),m=o(p),v=n(468),_=o(v),y=function(){function e(t,n,i,s,o,a){"ngInject";r(this,e);this._environment=t;this.$q=n;this._authService=i;this._httpService=s;this._firebaseService=o;this._notificationService=a;this._assignmentCodec=new u["default"](this._firebaseService);this._assignmentWorkCodec=new c["default"](this._firebaseService);this._classCodeCodec=new m["default"];this._assignmentRosterCodec=new _["default"]}e.$inject=["environment","$q","AuthService","HttpService","FirebaseService","NotificationService"];i(e,[{key:"getOrCreateForSelf",value:function(e,t){var n=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/assignment-works",{assignment_id:e,roster_id:t}).then(function(e){return n.$q.all({assignment:n.getAssignment(e.id),assignmentWork:e})}).then(function(e){return n._assignmentWorkCodec.decode(e.assignment,e.assignmentWork)})}},{key:"getOrCreateForSelfWithAssignment",value:function(e,t){var n=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/assignment-works",{assignment_id:e.id,roster_id:t}).then(function(t){return n._assignmentWorkCodec.decode(e,t)})}},{key:"getOrCreateForOther",value:function(e,t,n){var i=this;return this._httpService.authPost(this._environment.serverUrlBase+"/v1/assignments/"+e.id+"/assignment-works",{roster_id:t,user_id:n}).then(function(t){return i._assignmentWorkCodec.decode(e,t)})}},{key:"get",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/assignment-works/"+t).then(function(t){return n._assignmentWorkCodec.decode(e,t)})}},{key:"getForPeer",value:function(e,t,n){var i=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/rosters/"+t+"/users/"+n+"/assignments/"+e.id+"/assignment-work").then(function(t){return i._assignmentWorkCodec.decode(e,t)})}},{key:"getForCurrentUser",value:function(){var e=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/users/"+this._authService.authData.id+"/assignment-works").then(function(t){var n=new s(t.assignments.map(function(t){return[t.id,e._assignmentCodec.decode(t)]})),i=new s(t.assignment_rosters.map(function(t){var n=e._assignmentRosterCodec.decode(t);return[n.assignmentId+n.rosterId,n]})),r=t.assignment_works.map(function(t){var r=e._assignmentWorkCodec.decode(n.get(t.assignment_id),t);r.assignmentRoster=i.get(t.assignment_id+r.rosterId);return r});return{works:r,assignments:n,assignmentRosters:i}})}},{key:"delete",value:function(e){return this._httpService.authDelete(this._environment.serverUrlBase+"/v1/assignment-works/"+e)}},{key:"getForAssignment",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/assignments/"+e.id+"/assignment-works/"+t).then(function(t){return n._assignmentWorkCodec.decode(e,t)})}},{key:"getAllForAssignment",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/assignments/"+e.id+"/assignment-works").then(function(n){return n.assignment_works.map(function(n){return t._assignmentWorkCodec.decode(e,n)})})}},{key:"getAllForAssignmentRoster",value:function(e,t){var n=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/assignments/"+e.id+"/rosters/"+t+"/assignment-works").then(function(t){return t.assignment_works.map(function(t){return n._assignmentWorkCodec.decode(e,t)})})}},{key:"getForRosterAssignmentUser",value:function(e,t,n){var i=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/rosters/"+e+"/users/"+n+"/assignments/{"+t.id+"/assignment-works").then(function(e){return i._assignmentWorkCodec.decode(t,e)})}},{key:"getAssignment",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/assignment-works/"+e+"/assignment").then(function(e){return t._assignmentCodec.decode(e)})}},{key:"updateQuestion",value:function(e,t,n){return this._httpService.authPut(this._environment.serverUrlBase+"/v1/assignments/"+e+"/assignment-works/"+t+"/questions/"+n.id,{scored_points:n.points===g["default"].UNGRADED?null:n.points,started_at:n.startedAt})}},{key:"updateQuestionScore",value:function(e,t,n,i){var r=t.points;t.points=e;return this.updateQuestion(n,i,t)["catch"](function(){t.points=r})}},{key:"getAssignmentWorkQuestionSet",value:function(e){return new h["default"](e,this._notificationService.getAssignmentWorkNotification(e,!1))}}]);return e}();t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(164),u=c(l),d=n(463),h=c(d),f=n(271),g=c(f),p=n(408),m=c(p),v=n(464),_=c(v),y=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._firebaseService=e}r(t,e);s(t,[{key:"encode",value:function(e){var t={};e.questions.forEach(function(e,n){t[n]={element_list_id:e.elementListId,element_list_db:e.elementListDb,chat_id:e.chatId,scored_points:e.points,started_at:e.startedAt&&e.startedAt.toISOString()}});return{id:e.id,owner_id:e.ownerId,roster_id:e.rosterId,questions:t}}},{key:"decode",value:function(e,t){var n=this,i=new a;angular.forEach(t.question_works,function(e,t){i.set(t,new g["default"](t,new m["default"](e.element_list_id,e.element_list_db,n._firebaseService,"AssignmentWorkQuestionElementList"),new _["default"](e.chat_id,e.element_list_db,n._firebaseService),e.scored_points,e.answer,e.started_at))});return new h["default"](e,t.id,t.owner_id,t.roster_id,i)}}]);return t}(u["default"]);t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(133)["default"],o=n(121)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t,n,i,s,o){r(this,e);this._assignment=t;this._id=n;this._ownerId=i;this._rosterId=s;this._questions=o;this._classCode=void 0;this._assignmentRoster=void 0}i(e,[{key:"stop",value:function(){this._assignment.stop();this._questions.forEach(function(e){return e.stop()})}},{key:"questionForIndex",value:function(e){if(!this._assignment.questions[e])return null;var t=this._assignment.questions[e].id;return this._questions.get(t)}},{key:"questionForId",value:function(e){return this._questions.get(e)}},{key:"indexForQuestionId",value:function(e){return this._assignment.indexForQuestionId(e)}},{key:"questionIdForIndex",value:function(e){return this._assignment.questionIdForIndex(e)}},{key:"questionNumberForId",value:function(e){return this._assignment.questionNumberForId(e)}},{key:"totalPoints",value:function(){var e=0;this.questions.forEach(function(t){angular.isNumber(t.points)&&(e+=100*t.points)});return e/100}},{key:"totalPotentialPoints",value:function(){return this.assignment.totalPotentialPoints()}},{key:"mergeFrom",value:function(e,t){var n=this;if(e===this)return this;e.questions.forEach(function(e){n.questions.has(e.id)?n.questions.get(e.id).mergeFrom(e):t&&e.stop()});return this}},{key:"initialElementCountForId",value:function(e){var t=this._assignment.questionForId(e),n=this.questionForId(e);return s.all([t.elementCount,n.elementCount]).then(function(e){return e.reduce(function(e,t){return e+t},0)})}},{key:"initialElementCountForIndex",value:function(e){var t=this.questionIdForIndex(e);return this.initialElementCountForId(t)}},{key:"isWork",get:function(){return!0}},{key:"assignment",get:function(){return this._assignment}},{key:"id",get:function(){return this._id}},{key:"ownerId",get:function(){return this._ownerId}},{key:"rosterId",get:function(){return this._rosterId}},{key:"assignmentId",get:function(){return this._assignment.id}},{key:"questions",get:function(){return this._questions}},{key:"hasScore",get:function(){var e=!1;this.questions.forEach(function(t){e=e||angular.isNumber(t.points)});return e}},{key:"classCode",set:function(e){this._classCode=e},get:function(){return this._classCode}},{key:"assignmentRoster",set:function(e){this._assignmentRoster=e},get:function(){return this._assignmentRoster}},{key:"hasStarted",get:function(){return o(this.questions.values()).some(function(e){return!!e.startedAt})}}]);return e}();t["default"]=a;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(196),u=c(l),d=n(465),h=c(d),f=n(411),g=c(f),p=n(194),m=c(p),v=n(409),_=c(v),y=n(466),k=c(y),b=new u["default"]("/chats/{id}",{messages:new g["default"]("/msgs",function(e){return e._listen},function(e){return e.messages},new h["default"]),messagesRead:new g["default"]("/msg_read",function(e){return e._listen},function(e){return e.messagesRead},new k["default"])}),S=function(e){function t(e,n,r){var s=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];o(this,t);var c="ChatMessageList[instance="+n+", id="+e+"]";i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(new a).set("id",e),b,n,r,s,void 0,c);this._messages=new _["default"];this._messagesRead=new _["default"];this._logTrace("cstr complete")}r(t,e);s(t,[{key:"save",value:function(e){this._logTrace("save id="+e.id);this._listen&&!this.messages.has(e.id)&&this.messages._remoteAdd(e);return this.firebase.upsertChild(this.mapping.properties.messages,e)}},{key:"remove",value:function(e){this._logTrace("remove id="+e.id);return this.firebase.removeChild(this.mapping.properties.messages,e)}},{key:"markRead",value:function(e){this._logTrace("markRead id="+e.id);this.messagesRead._remoteAdd(e);return this.firebase.upsertChild(this.mapping.properties.messagesRead,e)}},{key:"id",get:function(){return this.ids.get("id")}},{key:"messages",get:function(){return this._messages}},{key:"messagesRead",get:function(){return this._messagesRead}}]);return t}(m["default"]);t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(202),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return{type:e.type,user_id:e.userId,display_name:e.displayName,text:e.text,timestamp:e.timestamp&&e.timestamp.toISOString()}}},{key:"decode",value:function(e,t){return e?new d["default"](t,e.type,e.user_id,e.display_name,e.text,e.timestamp):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(203),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return{message_id:e.messageId,timestamp:e.timestamp&&e.timestamp.toISOString()}}},{key:"decode",value:function(e,t){return e?new d["default"](t,e.message_id,e.timestamp):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(147),a=s(o),c=function(){function e(t,n){r(this,e);this._assignmentWork=t;this._assignmentWorkNotification=n;this._totalPointsCache=void 0;this._totalPercentageCache=void 0;this._hasScoreCache=void 0;this._updated=new a["default"](this)}i(e,[{key:"start",value:function(){this._assignmentWorkNotification.scoreUpdated.subscribe(this._handleUpdated,this);this._assignmentWorkNotification.start()}},{key:"stop",value:function(){this._assignmentWorkNotification.scoreUpdated.unsubscribe(this._handleUpdated,this);this._assignmentWorkNotification.stop()}},{key:"_handleUpdated",value:function(e){var t=this.questions.get(e.questionId);t.points=e.score;t.answer=e.answer;t.startedAt=e.startedAt;this._totalPointsCache=void 0;this._totalPercentageCache=void 0;this._hasScoreCache=void 0;this._updated.raise(e)}},{key:"assignmentWork",get:function(){return this._assignmentWork},set:function(e){this._assignmentWork=e}},{key:"questions",get:function(){return this._assignmentWork.questions}},{key:"assignmentWorkNotification",get:function(){return this._assignmentWorkNotification}},{key:"updated",get:function(){return this._updated}},{key:"hasScore",get:function(){angular.isUndefined(this._hasScoreCache)&&(this._hasScoreCache=this._assignmentWork.hasScore);return this._hasScoreCache}},{key:"totalPoints",get:function(){angular.isUndefined(this._totalPointsCache)&&(this._totalPointsCache=this._assignmentWork.totalPoints());return this._totalPointsCache}},{key:"totalPercentage",get:function(){if(angular.isUndefined(this._totalPercentageCache)){var e=this.totalPoints,t=this._assignmentWork.assignment.totalPotentialPoints();0===e&&0===t?this._totalPercentageCache=0:this._totalPercentageCache=e/t}return this._totalPercentageCache}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(469),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return e?{roster_id:e.rosterId,assignment_id:e.assignmentId,show_student_scores:e.showStudentScores,lock_student_work:e.lockStudentWork,hide_student_work:e.hideStudentWork}:null}},{key:"decode",value:function(e){return e?new d["default"](e.assignment_id,e.roster_id,e.show_student_scores,e.lock_student_work,e.hide_student_work):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o){r(this,e);this._assignmentId=t;this._rosterId=n;this._showStudentScores=i;this._lockStudentWork=s;this._hideStudentWork=o}i(e,[{key:"rosterId",get:function(){return this._rosterId}},{key:"assignmentId",get:function(){return this._assignmentId}},{key:"showStudentScores",get:function(){return this._showStudentScores},set:function(e){this._showStudentScores=e}},{key:"lockStudentWork",get:function(){return this._lockStudentWork},set:function(e){this._lockStudentWork=e}},{key:"hideStudentWork",get:function(){return this._hideStudentWork},set:function(e){this._hideStudentWork=e}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(425)["default"],a=n(293)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(t,n,i,s){"ngInject";r(this,e);this.$state=t;this.$window=n;this.$location=i;this.$transitions=s;this._stack=[];this._maxStackSize=10;this._direction=this._none;this._init()}e.$inject=["$state","$window","$location","$transitions"];i(e,[{key:"_init",value:function(){this.$transitions.onStart({},this._beforeStateChange.bind(this));this.$transitions.onSuccess({},this._onStateChange.bind(this))}},{key:"_beforeStateChange",value:function(e){if(this._direction===this._none&&this.$window.history.state===this._replace&&this._stack.length>0){this._direction=this._back;var t=this._stack[this._stack.length-1];return e.router.stateService.target(t.to,t.params)}}},{key:"_onStateChange",value:function(e){var t=e.to(),n=e.params(),i=e.from(),r=e.params("from"),s=this._stateObject(t.name,n);if(i.name)if(this._direction===this._back||this._direction===this._none&&this._stack.length>0&&s.to===this._stack[this._stack.length-1].to){this._fromState=i;this._stack.pop()}else if(this._direction===this._replace||t.name===i.name);else{this._stack.push(this._stateObject(i.name,r));this._fromState=i;this._stack.length>this._maxStackSize&&this._stack.shift()}else;this._direction=this._none}},{key:"_stateObject",value:function(e,t){return{to:e,params:t?s({},t):void 0}}},{key:"go",value:function(e,t,n,i){this._direction=n?this._replace:this._forward;this.$state.go(e,t,i);n&&this.$window.history.replaceState(this._replace,"")}},{key:"goUrl",value:function(e,t){this._direction=t?this._replace:this._forward;this.$location.url(e);t&&this.$window.history.replaceState(this._replace,"")}},{key:"goBack",value:function(e,t,n){var i=this._stateObject(e,t);if(this._stack.length>0){i=this._stack[this._stack.length-1];if(n){var r=!0,s=!1,c=void 0;try{for(var l,u=o(a(t));!(r=(l=u.next()).done);r=!0){var d=l.value;i.params[d]=t[d]}}catch(h){s=!0;c=h}finally{try{!r&&u["return"]&&u["return"]()}finally{if(s)throw c}}}}this._direction=this._back;this.$state.go(i.to,i.params)}},{key:"goToTestSegment",value:function(e,t,n,i,r){var s=this;i.getTestSegment(e).then(function(i){r.experiment(e);i?s.go(n,{},!0):s.go(t,{},!0)})}},{key:"clear",value:function(){this._stack=[]}},{key:"fromState",get:function(){return this._fromState}},{key:"canGoBack",get:function(){return this._stack.length>0}},{key:"lastState",get:function(){return this._stack.length>0?this._stack[this._stack.length-1].to:null}},{key:"_forward",get:function(){return"forward"}},{key:"_replace",get:function(){return"replace"}},{key:"_none",get:function(){return null}},{key:"_back",get:function(){return"back"}}]);return e}();t["default"]=c;e.exports=t["default"];
},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){"ngInject";r(this,e);this._environment=t;this._httpService=n;this._firebaseService=i}e.$inject=["environment","HttpService","FirebaseService"];i(e,[{key:"create",value:function(e,t,n){var i=this._firebaseService.newId(),r=new FormData;r.append("file",e);r.append("intent",t);r.append("element_list_id",n);return this._httpService.authPost(this._environment.serverUrlBase+"/v1/media/"+i,r,{headers:{"Content-Type":void 0},transformRequest:angular.identify}).then(function(e){return{mediaLink:e.media_link,newElementId:i}})}},{key:"delete",value:function(e,t,n){return this._httpService.authDelete(this._environment.serverUrlBase+"/v1/media/"+e,{data:{media_link:t,element_list_id:n}})}},{key:"restore",value:function(e,t,n){return this._httpService.authPut(this._environment.serverUrlBase+"/v1/media/"+e+"/restore",{media_link:t,element_list_id:n})}},{key:"copy",value:function(e,t,n){return this._httpService.authPost(this._environment.serverUrlBase+"/v1/media/"+e+"/copy",{media_link:t,element_list_id:n}).then(function(e){return e.media_link})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(133)["default"],o=n(172)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(146),l=a(c),u=n(154),d=a(u),h=function(){function e(t){var n=this;r(this,e);this.url=t;this.started=!1;this.promise=new s(function(e,t){n.resolve=e;n.reject=t})}i(e,[{key:"run",value:function(){var e=this;if(!this.started){var t=function(){e.started=!0;var t=new Image,n=new s(function(e){t.onload=function(){e(t)}});t.src=e.url;return{v:n.then(function(){return e._extractExif(t)}).then(function(n){e.resolve({image:t,orientation:n})})}}();if("object"==typeof t)return t.v}return this.promise}},{key:"_extractExif",value:function(t){return new s(function(n){EXIF.getData(t,function(){var t=EXIF.getTag(this,"Orientation")|e.DefaultOrientation;9===t?t=8:7===t&&(t=6);n(t)})})}}],[{key:"DefaultOrientation",get:function(){return 1}}]);return e}(),f=function(){function e(t,n,i){"ngInject";r(this,e);this.$document=t;this.$q=n;this.$log=i;this._pdfjs=PDFJS;this._pdfjs.workerSrc="/app/pdf.worker.js";this._canvasFitScale=.9;this._canvasFitSize=new l["default"](d["default"].INITIAL_WIDTH*this._canvasFitScale,d["default"].INITIAL_HEIGHT*this._canvasFitScale);this._imageCache=new o;this._imageAge=[];this._imageQueue=[]}e.$inject=["$document","$q","$log"];i(e,[{key:"_fromBlob",value:function(e,t){return this._blobToDataUrl(e).then(function(e){return t(e)})}},{key:"_blobToDataUrl",value:function(e){var t=this.$q.defer(),n=new FileReader;n.onload=function(e){t.resolve(e.target.result)};n.onerror=function(e){t.reject(e)};n.readAsDataURL(e);return t.promise}},{key:"pdfFromUrl",value:function(e){return this.$q.resolve(this._pdfjs.getDocument(e))}},{key:"pdfFromFile",value:function(e){var t=this;return this._fromBlob(e,function(e){return t.pdfFromUrl(e)})}},{key:"releasePdf",value:function(e){e.clean();e.destroy()}},{key:"imageLoaded",value:function(e){var t=this.$q.defer();if(e.src&&e.complete)t.resolve(e);else{e.onload=function(){t.resolve(e)};e.onerror=function(){t.reject()}}return t.promise}},{key:"imageFromUrl",value:function(e){var t=new Image,n=this.imageLoaded(t);t.src=e;return n}},{key:"imageFromFile",value:function(e){var t=this;return this._fromBlob(e,function(e){return t.imageFromUrl(e)})}},{key:"imageFromCanvas",value:function(e){return this.imageFromUrl(this.dataURLFromCanvas(e))}},{key:"dataURLFromCanvas",value:function(e){return e.toDataURL("image/png")}},{key:"dataUrlFromPdfPage",value:function(e,t){var n=this;return e.getPage(t).then(function(e){var t=e.getViewport(1),i=n.canvasFitSize.fit(new l["default"](t.width,t.height));return n.newCanvas(i.width,i.height)}).then(function(i){return n.drawPdfPage(e,t,i)}).then(function(e){return n.dataURLFromCanvas(e)})}},{key:"imageFromPdfPage",value:function(e,t){var n=this;return this.dataUrlFromPdfPage(e,t).then(function(e){return n.imageFromUrl(e)})}},{key:"drawPdfPage",value:function(e,t,n){return e.getPage(t).then(function(e){var t=e.getViewport(1),i=new l["default"](n.width,n.height).fitScale(new l["default"](t.width,t.height));return e.render({canvasContext:n.getContext("2d"),viewport:e.getViewport(i)})}).then(function(){return n})}},{key:"newCanvas",value:function(e,t){var n=this.$document[0].createElement("canvas");n.width=e;n.height=t;return n}},{key:"drawImage",value:function(e,t,n,i){var r=t.getContext("2d"),s=new l["default"](e.width,e.height).times(i||1);r.drawImage(e,n.x,n.y,s.width,s.height)}},{key:"crop",value:function(e,t,n,i){var r=this.newCanvas(n.width,n.height);this.drawImage(e,r,t.times(-1),i);return this.dataURLFromCanvas(r)}},{key:"dataURItoBlob",value:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})}},{key:"objectUrlToBlob",value:function(e){var t=this.$q.defer(),n=new XMLHttpRequest;n.open("GET",e,!0);n.responseType="blob";n.onload=function(){if(200===this.status){var e=this.response;t.resolve(e)}};n.send();return t.promise}},{key:"loadImage",value:function(e){var t=this;if(!this._imageCache.has(e)){for(;this._imageAge.length>=100&&!this._imageQueue.find(function(e){return e.url===t._imageAge[0]});){var n=this._imageAge.shift();this._imageCache["delete"](n)}this._imageAge.push(e);var i=new h(e);this._imageQueue.push(i);this._imageCache.set(e,i.promise);this._touchImageQueue()}return this._imageCache.get(e)}},{key:"_touchImageQueue",value:function(){var e=this;this._imageQueue.length>0&&!this._imageQueue[0].started&&!function(){var t=function(){e._imageQueue.shift();e._touchImageQueue()};e._imageQueue[0].run().then(function(){t()})["catch"](function(n){t();e.$log.warn("#_touchImageQueue catch",n)})}()}},{key:"canvasFitSize",get:function(){return this._canvasFitSize}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(474),a=s(o),c=function(){function e(t,n,i,s,o){"ngInject";r(this,e);this.$q=n;this.$log=o;this._environment=i;this._httpService=t;this._authService=s;this._messageCodec=new a["default"]}e.$inject=["HttpService","$q","environment","AuthService","$log"];i(e,[{key:"getReceivedMessagesForCurrentUser",value:function(){return this.getReceivedMessagesForUser(this._authService.authData.id)}},{key:"getReceivedMessagesForUser",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/users/"+e+"/received-messages")).then(function(e){return e.messages.map(function(e){return t._messageCodec.decode(e)})})}},{key:"getSentMessagesForCurrentUser",value:function(){return this.getSentMessagesForUser(this._authService.authData.id)}},{key:"getSentMessagesForUser",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/users/"+e+"/sent-messages")).then(function(e){return e.messages.map(function(e){return t._messageCodec.decode(e)})})}},{key:"delete",value:function(e){return this._httpService.authDelete(this._uri("/v1/messages/"+e))}},{key:"markAsSeen",value:function(e){return this._httpService.authPost(this._uri("/v1/messages/"+e+"/mark-as-seen"),{})}},{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/messages/"+e)).then(function(e){return t._messageCodec.decode(e)})}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(440),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return e?{id:e.id,sender_id:e.senderId,recipient_id:e.recipientId,text:e.text,actions:e.actions,created:e.createdDate,seen:e.seenDate,deleted:e.deletedDate}:null}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.sender_id,e.recipient_id,e.text,e.actions,e.created,e.seen,e.deleted):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(476),c=o(a),l=function(){function e(t,n){"ngInject";r(this,e);this._environment=t;this._httpService=n;this._userStickerCodec=new c["default"]}e.$inject=["environment","HttpService"];i(e,[{key:"getForUser",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/users/"+e+"/stickers")).then(function(e){return e.stickers.map(function(e){return t._userStickerCodec.decode(e)})})}},{key:"create",value:function(e,t,n){var i=this;return this._httpService.authPost(this._uri("/v1/stickers"),{image_url:e,text:t,tags:n}).then(function(e){return i._userStickerCodec.decode(e)})}},{key:"update",value:function(e,t){var n=this;return this._httpService.authPut(this._uri("/v1/stickers/"+e.id),s({},this._userStickerCodec.encode(e),{before_sticker_id:t})).then(function(e){return n._userStickerCodec.decode(e)})}},{key:"delete",value:function(e){return this._httpService.authDelete(this._uri("/v1/stickers/"+e))}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(250),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{id:e.id,text:e.text,owner_id:e.ownerId,image_url:e.imageUrl,created:e.created&&e.created.toISOString(),tags:e.tags}}},{key:"decode",value:function(e){return new d["default"](e.id,e.text,e.owner_id,e.image_url,e.created,e.tags)}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(133)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(478),c=o(a),l=function(){function e(t){"ngInject";r(this,e);this.$document=t;this._XMLSerializer=new XMLSerializer}e.$inject=["$document"];i(e,[{key:"createAssignmentExports",value:function(e,t,n,i,r){return t.map(function(t){var s=e.get(t.id);return new c["default"](s||i,t,n,void 0,r)})}},{key:"svgDOMtoString",value:function(e){return this._XMLSerializer.serializeToString(e)}},{key:"svgStringToDataURL",value:function(e,t,n){var i=this;t=t||2008;n=n||1004;return new s(function(r){var s=i.$document[0].createElement("canvas");s.height=t;s.width=n;var o=s.getContext("2d");return o.drawSvg(e,0,0,n,t,{useCORS:!0,renderCallback:function(){var e=s.toDataURL("image/png");r(e)}})})}},{key:"workToPDF",value:function(e){return this.workToPDFWorker(e.questionDataURLs,e.studentDisplay,e.assignmentDisplay,e.scoreDisplays,e.classCodeDisplay,e.fileName,e.showMetadata,e.showScore)}},{key:"toZip",value:function(e){var t=new JSZip;e.forEach(function(e){t.file(e.name,e,{base64:!0})});return t.generateAsync({type:"blob"})}},{key:"workToPDFWorker",get:function(){this._workToPDFWorker||(this._workToPDFWorker=operative(function(e,t,n,i,r,s,o,a){var c=this.deferred(),l=new PDFDocument,u=l.pipe(blobStream()),d=!0;e.forEach(function(e,s){d?d=!1:l.addPage();if(o){l.image(e,200,0,{scale:.39});var c=i[s],u="Page "+(s+1)+" / "+i.length,h=l.fontSize(10).text(t,15,20).moveDown().text(n).moveDown().text(u).moveDown();c&&a&&(h=h.text(c).moveDown());h.text(r);l.fontSize(8).text("Printed from Classkick",15,700)}else l.image(e,0,0,{scale:.6})});l.end();u.on("finish",function(){var e=u.toBlob("application/pdf"),t=new File([e],s);c.fulfill(t)})},["app/pdfkit.js","app/blob-stream-v0.1.3.js"]));return this._workToPDFWorker}}]);return e}();t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(479),o=function(){function e(t,n,i,s){var o=arguments.length<=4||void 0===arguments[4]?!0:arguments[4];r(this,e);this._assignment=t;this._user=n;this._classCode=i;this._questionDataURLs=s;this._showScore=o}i(e,[{key:"assignment",get:function(){return this._assignment}},{key:"user",get:function(){return this._user}},{key:"questionDataURLs",get:function(){return this._questionDataURLs},set:function(e){this._questionDataURLs=e}},{key:"showMetadata",set:function(e){this._showMetadata=e},get:function(){return this._showMetadata}},{key:"assignmentName",get:function(){return this._assignment.isWork?this._assignment.assignment.name:this._assignment.name}},{key:"classCode",get:function(){return this._classCode}},{key:"isWork",get:function(){return this.assignment.isWork}},{key:"questions",get:function(){return this.isWork?this.assignment.assignment.questions:this.assignment.questions}},{key:"exportingMessage",get:function(){return this.user?"Exporting "+this.user.name+"'s work to PDF":"Exporting "+this.assignment.name+" to PDF"}},{key:"content",get:function(){return this.isWork?this.assignment.assignment:this.assignment}},{key:"work",get:function(){return this.isWork?this.assignment:void 0}},{key:"scoreDisplays",get:function(){var e=this;return this.content.questions.map(function(t,n){if(e.work){var i=e.work.questionForIndex(n);return i.isGraded?"Score: "+i.points+" / "+t.points:""}})}},{key:"assignmentDisplay",get:function(){return"Assignment: "+this.content.name}},{key:"studentDisplay",get:function(){return this.user?"Student: "+this.user.name:""}},{key:"classCodeDisplay",get:function(){return this.classCode?"Class Code: "+this.classCode.format():""}},{key:"fileName",get:function(){var e=this.content.name;this.user?e=e+" - "+this.user.name+".pdf":e+=".pdf";return s.FileUtil.removeForbiddenCharacters(e)}},{key:"zipFileName",get:function(){var e=moment().format("YYYY-MM-DD");return s.FileUtil.removeForbiddenCharacters(this.content.name+" "+e+".zip")}},{key:"showScore",get:function(){return this._showScore}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),a=s(o),c=function(){function e(){r(this,e)}i(e,null,[{key:"removeForbiddenCharacters",value:function(t){return a["default"].get.isWindows?t.replace(/(?!\.[^.]+$)\.|[^\w.]+/g,"-"):e.removeSlashes(t)}},{key:"removeSlashes",value:function(e){return e.replace(/\//,"-")}}]);return e}();t.FileUtil=c},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(481),a=s(o),c=n(482),l=s(c),u=n(424),d=s(u),h=function(){function e(t,n,i,s){"ngInject";r(this,e);this._environment=t;this._httpService=n;this.$log=i;this.$q=s;this._contractCodec=new a["default"];this._newContractStudentCodec=new l["default"];this._userCodec=new d["default"]}e.$inject=["environment","HttpService","$log","$q"];i(e,[{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/contracts/"+e)).then(function(e){return t._contractCodec.decode(e)})}},{key:"getContractsForUser",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/users/"+e+"/contracts")).then(function(e){var n=e.contracts;return n.map(function(e){return t._contractCodec.decode(e)})})}},{key:"getUsers",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/contracts/"+e+"/users")).then(function(e){return e.users.map(function(e){return t._userCodec.decode(e)})})}},{key:"removeUser",value:function(e,t){return this._httpService.authDelete(this._uri("/v1/contracts/"+e+"/users/"+t))}},{key:"getFeatures",value:function(){return this._httpService.authGet(this._uri("/v1/features")).then(function(e){return{features:e.features,contractExpires:moment(e.contract_expires)}})}},{key:"validateStudents",value:function(e,t){var n=this;return this._httpService.authPost(this._uri("/v1/contracts/"+e+"/validate-students"),{students:t.map(function(e){return n._newContractStudentCodec.encode(e)})}).then(function(e){return e.errors})}},{key:"addStudents",value:function(e,t){var n=this;return this._httpService.authPost(this._uri("/v1/contracts/"+e+"/students"),{students:t.map(function(e){return n._newContractStudentCodec.encode(e)})}).then(function(e){return e.users.map(function(e){return n._userCodec.decode(e)})})}},{key:"makeUserContractAdmin",value:function(e,t,n){var i=this;return this._httpService.authPut(this._uri("/v1/contracts/"+e+"/users/"+t+"/admin"),{admin:n}).then(function(e){return{code:e.code,contractId:e.contract_id,rosterId:e.roster_id}})["catch"](function(e){i.$log.error(e)})}},{key:"createTrial",value:function(e,t){return e?this._httpService.authPost(this._uri("/v1/contracts/trial"),{user_id:e,name:t}):this.$q.reject("Could not start trial. userId is null or undefined.")}},{key:"getExpiration",value:function(){return this._httpService.authGet(this._uri("/v1/contracts/trial/expiration")).then(function(e){var t=e.expiration;return moment(t)})}},{key:"deleteContract",value:function(e){return this._httpService.authDelete(this._uri("/v1/contracts/"+e))}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(296),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"decode",value:function(e){return new d["default"](e.id,e.name,e.plan,e.created,e.expires,e.is_trial)}},{key:"encode",value:function(e){return{id:e.id,name:e.name,plan:e.plan,created:e.created&&e.created.toISOString(),expires:e.expires&&e.expires.toISOString(),is_trial:e.isTrial}}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(483),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return e?{first_name:e.firstName,last_name:e.lastName,id:e.id,password:e.password}:null}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.first_name,e.last_name,e.password):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(390),a=s(o),c=function(){function e(t,n,i,s){var o=arguments.length<=4||void 0===arguments[4]?!0:arguments[4],a=arguments.length<=5||void 0===arguments[5]?!0:arguments[5];r(this,e);this._id=t;this._firstName=n;this._lastName=i;this._password=s;this._isIdValid=o;this._isNotDuplicate=a}i(e,[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"firstName",get:function(){return this._firstName},set:function(e){this._firstName=e}},{key:"lastName",get:function(){return this._lastName},set:function(e){this._lastName=e}},{key:"password",get:function(){return this._password},set:function(e){this._password=e}},{key:"isIdValid",get:function(){return this._isIdValid},set:function(e){this._isIdValid=e}},{key:"isNotDuplicate",get:function(){return this._isNotDuplicate},set:function(e){this._isNotDuplicate=e}},{key:"isFirstNameValid",get:function(){return this._firstName?this._firstName.length<=a["default"].UserFirstNameMaxSize:!0}},{key:"isLastNameValid",get:function(){return this._lastName?this._lastName.length<=a["default"].UserLastNameMaxSize:!0}},{key:"valid",get:function(){return!!this.password&&!!this.id&&this.isIdValid&&this.isFirstNameValid&&this.isLastNameValid&&this.isNotDuplicate}},{key:"errorMessage",get:function(){var e=[],t="Invalid ";this.isFirstNameValid||e.push("first name");this.isLastNameValid||e.push("last name");this.isIdValid&&this.id||e.push("username or email");this.isNotDuplicate||e.push("username or email. Username/email is taken, please enter another");this.password||e.push("password");return e.length>1?t+" "+e.slice(0,e.length-1).join(", ")+", and "+e.pop():1===e.length?t+" "+e[0]:""}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(211),c=o(a),l=n(147),u=o(l),d=n(485),h=o(d),f=function(){function e(t,n,i,s,o,a,c,l,u,d){r(this,e);this.$q=t;this._authService=n;this._userService=i;this._rosterService=s;this._assignmentService=o;this._assignmentWorkService=a;this._notificationService=c;this._helpRequestService=l;this._classCodeService=u;this._feedbackService=d;this.reset();this._authService.dataCleared.subscribe(this.reset,this)}e.$inject=["$q","AuthService","UserService","RosterService","AssignmentService","AssignmentWorkService","NotificationService","HelpRequestService","ClassCodeService","FeedbackService"];i(e,[{key:"reset",value:function(){this._rostersAndOwners=new c["default"];this._assignmentsAndWorks=new c["default"];this._works=new c["default"];this._classCode=new c["default"];this._assignmentWork=new c["default"];if(this._userRosterNotification&&this._userRosterNotification.isSet){var e=this._initUserRosterNotification();e.updated.unsubscribe(this._onUserRosterUpdate,this);e.stop()}this._userRosterNotification=new c["default"];this._userRosterUpdated&&this._userRosterUpdated.clear();this._userRosterUpdated=new u["default"](this);this._clearStudentSessionData();this._studentSessionData=new c["default"]}},{key:"getUserRostersAndOwners",value:function(e){var t=this;e&&this._rostersAndOwners.clear();this._initUserRosterNotification();return this._rostersAndOwners.value(function(){return t._rosterService.getUserMemberRosters().then(function(e){return{rosterOwners:new s(e.rosterOwners.map(function(e){return[e.id,e]})),rosters:new s(e.rosters.map(function(e){return[e.id,e]}))}})["catch"](function(e){t._rostersAndOwners.clear();throw e})})}},{key:"getClassCodeForAssignmentAndRoster",value:function(e,t,n){var i=this;(n||e!==this._classCode.assignmentId||t!==this._classCode.rosterId)&&this._classCode.clear();return this._classCode.value(function(){return i._classCodeService.getForAssignmentAndRoster(e,t)["catch"](function(e){i._classCode.clear();throw e})})}},{key:"getUserAssignmentsAndWorks",value:function(e){var t=this;e&&this._assignmentsAndWorks.clear();return this._assignmentsAndWorks.value(function(){return t._assignmentWorkService.getForCurrentUser().then(function(e){var t=e.works,n=e.assignments,i=e.assignmentRosters;return{works:new s(t.map(function(e){return[e.id,e]})),assignments:n,assignmentRosters:i}})["catch"](function(e){t._assignmentsAndWorks.clear();throw e})})}},{key:"getUserWork",value:function(e,t){var n=this;return this.getUserAssignmentsAndWorks(!1).then(function(e){return e.works}).then(function(i){return t||!i.has(e)?n._assignmentWorkService.getAssignment(e).then(function(t){return n._assignmentWorkService.get(t,e)}).then(function(t){i.set(e,t);return t})["catch"](function(t){i["delete"](e);throw t}):i.get(e)})}},{key:"createWork",value:function(e,t){return this.$q.all({cache:this.getUserAssignmentsAndWorks(),work:this._assignmentWorkService.getOrCreateForSelfWithAssignment(e,t.id)}).then(function(e){if(e.cache.works.has(e.work.id))return e.cache.works.get(e.work.id);e.cache.works.set(e.work.id,e.work);return e.work})}},{key:"_initUserRosterNotification",value:function(){var e=this;return this._userRosterNotification.value(function(){var t=e._notificationService.getUserRosterNotification(e._authService.authData.id);t.start();t.updated.subscribe(e._onUserRosterUpdate,e);return t})}},{key:"_onUserRosterUpdate",value:function(e){var t=this;this.getUserRostersAndOwners(!0).then(function(){return t.getUserAssignmentsAndWorks(!0)}).then(function(){return t.userRosterUpdated.raise(e)})}},{key:"getSessionData",value:function(e,t,n){var i=this;(n||this._studentSessionData.assignmentWorkId!==e.id)&&this._clearStudentSessionData();this._studentSessionData.assignmentWorkId=e.id;return this._studentSessionData.value(function(){return h["default"].fetch(e,i.$q,i,i._notificationService,i._assignmentWorkService,i._helpRequestService,i._feedbackService,t).then(function(e){return i.$q.all({check:e.validate(),session:e})}).then(function(e){return e.session})["catch"](function(e){i._clearStudentSessionData();throw e})})}},{key:"_clearStudentSessionData",value:function(){if(this._studentSessionData){this._studentSessionData.assignmentWorkId=null;this._studentSessionData.clear(function(e){return e.then(function(e){return e.destroy()})})}}},{key:"getOrCreateWorkForSelf",value:function(e,t){var n=this;if(this._assignmentWork.assignmentId!==e||this._assignmentWork.rosterId!==t){this._assignmentWork.clear();this._assignmentWork.assignmentId=e;this._assignmentWork.rosterId=t}return this._assignmentWork.value(function(){return n._assignmentWorkService.getOrCreateForSelf(e,t)})}},{key:"userRosterUpdated",get:function(){return this._userRosterUpdated}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(293)["default"],o=n(172)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(442),l=n(191),u=a(l),d=n(375),h=n(364),f=n(185),g=n(153),p=n(47),m=n(214),v=a(m),_=n(286),y=a(_),k=n(18),b=a(k),S=function(){function e(t,n,i,s,o,a,c,l,u,d,h,f,g){r(this,e);this.$q=u;this._studentCacheService=d;this._cacheService=h;this._assignmentWork=t;this._classCode=f;this._assignmentWork.classCode=this._classCode;this._questionFeedbackList=n;this._assignmentNotification=i;this._assignmentRosterNotification=s;this._workQuestionSet=o;this._roster=a;this._userStatus=c;this._helpRequestSet=l;this._user=g;this._init()}i(e,[{key:"_init",value:function(){if(this._assignmentNotification){this._assignmentNotification.questionUpdated.subscribe(this._handleQuestionUpdated,this);this._assignmentNotification.questionAdded.subscribe(this._handleAssignmentUpdated,this);this._assignmentNotification.questionRemoved.subscribe(this._handleAssignmentUpdated,this);this._assignmentNotification.start()}if(this._assignmentRosterNotification){this._assignmentRosterNotification.metadata.subscribe(this._handleAssignmentRosterUpdated,this);this._assignmentRosterNotification.start()}this._workQuestionSet&&this._workQuestionSet.start();this._questionFeedbackList&&this._questionFeedbackList.start();this._studentCacheService&&this._studentCacheService.userRosterUpdated.subscribe(this._handleRosterUpdated,this)}},{key:"destroy",value:function(){if(this._assignmentNotification){this._assignmentNotification.questionUpdated.unsubscribe(this._handleQuestionUpdated,this);this._assignmentNotification.stop()}this._workQuestionSet&&this._workQuestionSet.stop();if(this._assignmentRosterNotification){this._assignmentRosterNotification.metadata.unsubscribe(this._handleAssignmentRosterUpdated,this);this._assignmentRosterNotification.stop()}this._questionFeedbackList&&this._questionFeedbackList.stop();this._studentCacheService&&this._studentCacheService.userRosterUpdated.unsubscribe(this._handleRosterUpdated,this)}},{key:"validate",value:function(){return this.$q.all([this.validateStatus(),this.validateAssignmentRoster()])}},{key:"validateStatus",value:function(){var t=this;return this._getStatus().then(function(e){return t._validateStatus(e)})["catch"](function(t){if(t.message===e.singleDeviceLoginError)throw t;b["default"].get.$log.error(t)})}},{key:"_getStatus",value:function(){return this._userStatus.loadOnce().then(function(e){var t=s(e)[0],n=e[t];return n})}},{key:"_validateStatus",value:function(t){if(t&&this.roster&&!this.roster.allowMultiLogin&&this._alreadyWorkingOnAssignment(t)&&!this._isIdle(t)){var n=new Error(e.singleDeviceLoginError);return this.$q.reject(n)}return this.$q.resolve({})}},{key:"_alreadyWorkingOnAssignment",value:function(e){return e&&e.online&&e.assignment_id&&e.assignment_id===this.assignment.id}},{key:"_isIdle",value:function(e){var t=moment(e.t),n=moment(),i=n.diff(t,c.StatusIdleTimes.UNIT_OF_TIME);return i>c.StatusIdleTimes.DURATION}},{key:"validateAssignmentRoster",value:function(){if(this.classCode&&this.classCode.hideStudentWork){var t=new Error(e.assignmentHiddenError);return this.$q.reject(t)}return this.$q.resolve()}},{key:"_handleQuestionUpdated",value:function(e){if(angular.isNumber(e.points)){var t=this._assignmentWork.assignment.questionForId(e.questionId);t.points=e.points}}},{key:"_handleAssignmentRosterUpdated",value:function(e){this._classCode.showStudentScores=e.showStudentScores;this._classCode.lockStudentWork=e.lockStudentWork;if(this._assignmentWork.assignmentRoster){this._assignmentWork.assignmentRoster.showStudentScores=e.showStudentScores;this._assignmentWork.assignmentRoster.lockStudentWork=e.lockStudentWork}}},{key:"_handleAssignmentUpdated",value:function(){var e=this;this._studentCacheService.getUserWork(this._assignmentWork.id,!0).then(function(t){e._assignmentWork=t})}},{key:"_handleRosterUpdated",value:function(){var e=this;this._studentCacheService.getUserRostersAndOwners(!1).then(function(t){e._roster=t.rosters.get(e.assignmentWork.rosterId)})}},{key:"createQuestionConfig",value:function(e,t,n){return new h.AssignmentQuestionMetadata(this.assignmentWork,e,t,!1,this.userId,f.UserRoles.STUDENT,g.ElementIntents.WORK,n,this._helpRequestSet,this._questionFeedbackList)}},{key:"createSheetConfig",value:function(e){return new p.AssignmentSheetMetadata(this.assignmentWork,e,!0,!0,this.userId,f.UserRoles.STUDENT,g.ElementIntents.WORK)}},{key:"helpInboxMetadata",value:function(e){this._helpInboxMetadata||(this._helpInboxMetadata=new d.HelpInboxMetadata(this._helpRequestSet.createChild(u["default"].FILTER_FUNC_STUDENT_UNRESOLVED(this.userId)),null,new o([[this.userId,this.assignmentWork]]),e||d.HelpInboxType.STUDENT_ACCOUNT));return this._helpInboxMetadata}},{key:"setUserStatus",value:function(e){this._cacheService.setUserStatus(this.assignment.id,e,c.StatusActivities.WORKING)}},{key:"questionForId",value:function(e){return this.assignment.questionForId(e)}},{key:"workQuestionForId",value:function(e){return this.assignmentWork.questionForId(e)}},{key:"showStudentScore",value:function(e){if(this.classCode&&!this.classCode.showStudentScores)return!1;var t=this.questionForId(e),n=this.workQuestionForId(e);return!!(t.points||angular.isNumber(n.points)&&n.points)}},{key:"assignmentWork",get:function(){return this._assignmentWork}},{key:"assignment",get:function(){return this._assignmentWork&&this._assignmentWork.assignment}},{key:"assignmentNotification",get:function(){return this._assignmentNotification}},{key:"assignmentRosterNotification",get:function(){return this._assignmentRosterNotification}},{key:"questionFeedbackList",get:function(){return this._questionFeedbackList}},{key:"userId",get:function(){return this._assignmentWork.ownerId}},{key:"user",get:function(){return this._user}},{key:"roster",get:function(){return this._roster}},{key:"classCode",get:function(){return this._classCode}},{key:"helpRequestSet",get:function(){return this._helpRequestSet}}],[{key:"fetch",
value:function(t,n,i,r,s,o,a,c){return n.all({assignmentWork:t,rostersAndOwners:i.getUserRostersAndOwners(),user:c.getUser()}).then(function(e){var t=e.assignmentWork,c=t.assignment.id,l=t.rosterId,u=t.ownerId,d=a.getQuestionFeedbackList(u,t),h=r.getAssignmentStatusNotification(t.assignment,!1),f=r.getAssignmentRosterNotification(t.assignment,l,!0),g=s.getAssignmentWorkQuestionSet(t),p=i.getClassCodeForAssignmentAndRoster(c,l,!0),m=o.getHelpRequestSetForPeers(t.assignment.ownerId,c,l),v=e.rostersAndOwners.rosters.get(l),_=r.getUserStatusNotification(u),y=e.user;return n.all({assignmentWork:t,questionFeedbackList:d,assignmentNotification:h,assignmentRosterNotification:f,workQuestionSet:g,helpRequestSet:m,roster:v,userStatus:_,classCode:p,user:y})}).then(function(t){return new e(t.assignmentWork,t.questionFeedbackList,t.assignmentNotification,t.assignmentRosterNotification,t.workQuestionSet,t.roster,t.userStatus,t.helpRequestSet,n,i,c,t.classCode,t.user)})}},{key:"launchSingleDeviceErrorDialog",value:function(e,t){return v["default"].show(e,"Sorry, your work is open on another device.","Your teacher only allows your work to be open on one device at a time. Please close your work on the other device to view it here.",[{text:"Try Again",action:v["default"].CANCEL},{text:t?"Go to Assignments":"Go to Login",action:v["default"].CONFIRM}])}},{key:"launchAssignmentHiddenErrorDialog",value:function(e,t){return v["default"].show(e,"This assignment is hidden.","Please ask your teacher to un-hide it so you can continue.",[{text:"Try Again",action:v["default"].CANCEL},{text:t?"Go to Assignments":"Go to Login",action:v["default"].CONFIRM}])}},{key:"launchAssignmentUpdatedDialog",value:function(e){e.cancel();var t="Your teacher updated the assignment. Would you like to refresh to get the updated version?";return y["default"].show(e,t)}},{key:"singleDeviceLoginError",get:function(){return"singleDeviceLoginError"}},{key:"assignmentHiddenError",get:function(){return"assignmentHiddenError"}}]);return e}();t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(487),a=s(o),c=function(){function e(t,n){r(this,e);this._environment=t;this._httpService=n;this._inviteCodeCodec=new a["default"]}e.$inject=["environment","HttpService"];i(e,[{key:"createInviteCode",value:function(e,t){return this._httpService.authPost(this._uri("/v1/invite-codes"),{contract_id:e,roster_id:t}).then(function(e){return{code:e.code,contractId:e.contract_id,rosterId:e.roster_id}})}},{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/invite-codes/"+e)).then(function(e){return t._inviteCodeCodec.decode(e)})}},{key:"submit",value:function(e){return this._httpService.authPost(this._uri("/v1/invite-codes/"+e+"/submit"),{}).then(function(e){return e.token})}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(488),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){return e?{code:e.code,contract_id:e.contractId,owner_id:e.ownerId}:null}},{key:"decode",value:function(e){return e?new d["default"](e.code,e.contract_id,e.owner_id):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){r(this,e);this._code=t;this._contractId=n;this._ownerId=i}i(e,[{key:"code",get:function(){return this._code}},{key:"contractId",get:function(){return this._contractId}},{key:"ownerId",get:function(){return this._ownerId}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(293)["default"],a=n(121)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(482),u=c(l),d=n(365),h=n(271),f=c(h),g=n(262),p=c(g),m=n(264),v=c(m),_=n(171),y=c(_),k=n(255),b=c(k),S=n(479),w=n(186),C=c(w),E=function(){function e(){r(this,e)}i(e,null,[{key:"FirstName",get:function(){return"first_name"}},{key:"LastName",get:function(){return"last_name"}},{key:"Id",get:function(){return"id"}},{key:"Password",get:function(){return"password"}},{key:"All",get:function(){return[e.FirstName,e.LastName,e.Id,e.Password]}}]);return e}(),T=function(){function e(t){r(this,e);this.$q=t;this._newContractStudentCodec=new u["default"]}e.$inject=["$q"];i(e,[{key:"extractCSVData",value:function(e){var t=this;return this.$q(function(n,i){var r=new FileReader;r.onload=function(e){var r=t._makeQuotesDumb(e.target.result);r=Papa.parse(r,{header:!0}).data.filter(function(e){return e.id||e.first_name||e.last_name});if(r[0]&&!r[0].hasOwnProperty(E.Id)){var s=new Error('Please include an "id" header in your .CSV file.');i(s)}r=t._convertHeadersToLowercase(r);var o=t._getDuplicates(r);if(o.length>0){var s=new Error(t._createDuplicateError(o));i(s)}r=r.map(function(e){return t._newContractStudentCodec.decode(e)});n(r)};r.readAsText(e)})}},{key:"_makeQuotesDumb",value:function(e){return e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"')}},{key:"_convertHeadersToLowercase",value:function(e){return e.map(function(e){o(e).forEach(function(t){var n=t.toLowerCase();e[n]=e[t]});var t={};E.All.forEach(function(n){t[n]=angular.isDefined(e[n])?(""+e[n]).trim():""});return t})}},{key:"_getDuplicates",value:function(e){var t=e.map(function(e){return{id:e.id.toLowerCase(),count:1}}).reduce(function(e,t){e[t.id]=(e[t.id]||0)+t.count;return e},{}),n=[];angular.forEach(t,function(e,t){e>1&&n.push(t)});return n}},{key:"_createDuplicateError",value:function(e){var t=e.length>1?"s are":" is",n=d.Helpers.formatHelpersList(e);return"The following id"+t+" duplicated in your .CSV file: "+n}},{key:"downloadCsv",value:function(e){var t=this,n=e.map(function(e){return t._newContractStudentCodec.encode(e)}),i=[Papa.unparse(n,{cast:!1,header:!0})],r=moment().format("YYYY-MM-DD"),s=new File(i,"new students "+r+".csv",{type:"text/csv;charset=utf-8"});saveAs(s)}},{key:"exportAnswersByAssignment",value:function(e,t,n){var i=this,r=["student","first name","last name","roster"],s=["ANSWER KEY","","",""];return this.$q.all(e.questions.map(function(e){return e.allElements})).then(function(o){o.forEach(function(e,t){var n=e.filter(function(e){return e.type===p["default"].type||e.type===y["default"].type}),i=(t+1).toString();n.length>1?r=r.concat(n.map(function(e,t){var n=String.fromCharCode(97+t);return"#"+i+n})):r.push("#"+i);n.length>0?s=s.concat(n.map(function(e){return e.answerDisplay})):s.push("")});var c=t.map(function(t){var r=t.members,s=t.roster,o=a(r.values()).sort(function(e,t){return C["default"].NAME_ASC(e.name,t.name)});return i.$q.all(o.map(function(t){var r=n.find(function(e){return e.ownerId===t.id&&e.rosterId===s.id});return i._createUserRowForAssignmentAnswers(t,s,e,r)}))});return i.$q.all(c)}).then(function(t){var n=t.reduce(function(e,t){return e.concat(t)},[]);n.unshift(s);i._downloadExport(r,n,e.name+"_answers_")})}},{key:"_createUserRowForAssignmentAnswers",value:function(e,t,n,i){var r=this,o=n.questions.map(function(e,t){var n=i&&i.questionForIndex(t);return n?n.allElements:r.$q.resolve([])});return this.$q.all(o).then(function(n){return[e.name||"no name",e.firstName||"--",e.lastName||"--",t.name||"no roster name"].concat(s(n.map(function(e){var t=e.filter(function(e){return e.type===v["default"].type||e.type===b["default"].type});return t.length>0?t.map(function(e){return e.answerDisplay}):["--"]}).flat()))})}},{key:"exportGradesByAssignment",value:function(e,t,n){var i=this,r=["student","first name","last name","roster","total","possible","percentage"].concat(s(e.questions.map(function(e,t){var n=(t+1).toString();return"#"+n+" - "+e.points+" pts"}))),o=t.map(function(t){var r=t.members,s=t.roster,o=a(r.values()).sort(function(e,t){return C["default"].NAME_ASC(e.name,t.name)});return o.map(function(t){var r=n.find(function(e){return e.ownerId===t.id&&e.rosterId===s.id});return i._createUserRowForAssignmentGrade(t,s,e,r)})}),c=o.reduce(function(e,t){return e.concat(t)},[]);this._downloadExport(r,c,e.name+"_grades_")}},{key:"_createUserRowForAssignmentGrade",value:function(e,t,n,i){var r=i?i.totalPoints():0,o=n.totalPotentialPoints(),a=r/o,c=n.questions.map(function(e,t){return i&&i.questionForIndex(t)});return[e.name||"no name",e.firstName||"--",e.lastName||"--",t.name||"no roster name",angular.isNumber(r)?r:"--",angular.isNumber(o)?o:"--",this._formatPercentage(a)].concat(s(c.map(function(e){return e&&e.points!==f["default"].UNGRADED?e.points:"--"})))}},{key:"_formatPercentage",value:function(e){return isNaN(e)?"--":Math.round(1e4*e)/100}},{key:"exportGradesByRoster",value:function(e,t,n){var i=this,r=["student name"].concat(s(e.map(function(e){var t=e.assignment;return t.name}))),o=["assignment total"].concat(s(e.map(function(e){var t=e.assignment;return t.totalPotentialPoints()}))),a=t.map(function(t){return i._createUserRow(t,e)});this._downloadExport(r,[o].concat(s(a)),n+"_grades_")}},{key:"_createUserRow",value:function(e,t){var n=this;return[e.name].concat(s(t.map(function(t){var i=t.works,r=n._workForUser(i,e.id);return angular.isDefined(r)?r.totalPoints():""})))}},{key:"_workForUser",value:function(e,t){return e.find(function(e){return e.ownerId===t})}},{key:"_downloadExport",value:function(e,t,n){var i=this._unparse(e,t),r=this._createCsvFile(i,S.FileUtil.removeForbiddenCharacters(n));saveAs(r)}},{key:"_unparse",value:function(e,t){return Papa.unparse({fields:e,data:t})}},{key:"_createCsvFile",value:function(e,t){var n=moment().format("YYYY-MM-DD");return new File([e],""+t+n+".csv",{type:"text/csv;charset=utf-8"})}}]);return e}();t["default"]=T;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(293)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(215),c=o(a),l=n(301),u=function(){function e(t,n){"ngInject";r(this,e);this._environment=n;this._httpService=t;this._elementCodec=new c["default"];this._httpRetry=new l.HttpRetry(void 0,void 0,void 0,function(e){if(!(e.status>=500&&e.status<600))throw e})}e.$inject=["HttpService","environment"];i(e,[{key:"createParent",value:function(e,t,n){var i=this;return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/questions/"+t+"/manipulatives"),this._elementCodec.encode(n),void 0,this._httpRetry).then(function(e){var t=s(e)[0];return i._elementCodec.decode(e[t],t)})}},{key:"updateParent",value:function(e,t,n){return this._httpService.authPut(this._uri("/v1/assignments/"+e+"/questions/"+t+"/manipulatives/"+n.id),this._elementCodec.encode(n),void 0,this._httpRetry)}},{key:"deleteParent",value:function(e,t,n){return this._httpService.authDelete(this._uri("/v1/assignments/"+e+"/questions/"+t+"/manipulatives/"+n))}},{key:"restoreParent",value:function(e,t,n){return this._httpService.authPost(this._uri("/v1/assignments/"+e+"/questions/"+t+"/manipulatives/"+n+"/restore"),{})}},{key:"updateChild",value:function(e,t,n){return this._httpService.authPut(this._uri("/v1/assignment-works/"+e+"/questions/"+t+"/manipulatives/"+n.id),this._elementCodec.encode(n))}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(492),a=s(o),c=n(481),l=s(c),u=function(){function e(t,n){r(this,e);this._environment=t;this._httpService=n;this._subscriptionCodec=new a["default"];this._contractCodec=new l["default"]}e.$inject=["environment","HttpService"];i(e,[{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/subscriptions/"+e)).then(function(e){return t._subscriptionCodec.decode(e)})}},{key:"getSubscriptions",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/users/"+e+"/subscriptions")).then(function(e){var n=e.subscriptions;return n.map(function(e){return t._subscriptionCodec.decode(e)})})}},{key:"create",value:function(e,t){var n=this;return this._httpService.authPost(this._uri("/v1/subscriptions"),{subscription_plan:e,contract_id:t}).then(function(e){var t=e.subscription,i=e.contract;return{subscription:n._subscriptionCodec.decode(t),contract:n._contractCodec.decode(i)}})}},{key:"activate",value:function(e,t,n){var i=this;return this._httpService.authPost(this._uri("/v1/subscriptions/"+e),{billing_email:t,stripe_token:n}).then(function(e){var t=e.subscription,n=e.contract,r=e.token;return{subscription:i._subscriptionCodec.decode(t),contract:i._contractCodec.decode(n),token:r}})}},{key:"cancel",value:function(e){var t=this;return this._httpService.authPost(this._uri("/v1/subscriptions/"+e+"/cancel"),{}).then(function(e){var n=e.subscription,i=e.contract;return{subscription:t._subscriptionCodec.decode(n),contract:t._contractCodec.decode(i)}})}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(299),l=a(c),u=n(164),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return e?{id:e.id,owner_id:e.ownerId,contract_id:e.contractId,status:e.status,provider:e.provider,active:e.active,created:e.created&&e.created.toISOString(),updated:e.updated&&e.updated.toISOString(),subscription_plan:e.subscriptionPlan,coupon:e.coupon}:null}},{key:"decode",value:function(e){return e?new l["default"](e.id,e.owner_id,e.contract_id,e.status,e.provider,e.active,e.created,e.updated,e.subscription_plan,e.coupon):null}}]);return t}(d["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n){r(this,e);this._stripe=new n(t.stripeKey)}e.$inject=["environment","Stripe"];i(e,[{key:"createToken",value:function(e,t){return this._stripe.createToken(e,t)}},{key:"stripe",get:function(){return this._stripe}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(495),a=s(o),c=n(497),l=s(c),u=n(499),d=s(u),h=function(){function e(t,n,i,s,o,a,c,l,u,d,h,f,g,p,m,v){r(this,e);this.$q=t;this.$timeout=n;this.$state=i;this.$stateParams=s;this.$mdDialog=o;this._assignmentWorkService=a;this._cacheService=c;this._assignmentTrackingService=l;this._breadcrumbService=u;this._storageService=d;this._studentCacheService=h;this._toolbarService=f;this._mixpanelService=g;this._exportService=p;this._feedbackService=m;this._platformHeaderService=v}e.$inject=["$q","$timeout","$state","$stateParams","$mdDialog","AssignmentWorkService","CacheService","AssignmentTrackingService","BreadcrumbService","StorageService","StudentCacheService","ToolbarService","MixpanelService","ExportService","FeedbackService","PlatformHeaderService"];i(e,[{key:"getStudentAssignmentFeedback",value:function(){return new a["default"](this.$q,this.$timeout,this.$stateParams,this._assignmentWorkService,this._cacheService,this._assignmentTrackingService,this._breadcrumbService,this._storageService,this._studentCacheService,this._toolbarService,this._feedbackService)}},{key:"getStudentAssignmentOverview",value:function(e){return new l["default"](this.$timeout,this.$state,this.$stateParams,this.$mdDialog,this._studentCacheService,this._cacheService,this._breadcrumbService,this._exportService,this._platformHeaderService,e)}},{key:"getStudentAssignmentWork",value:function(e,t){return new d["default"](this.$timeout,this.$state,this.$mdDialog,this._studentCacheService,this._assignmentTrackingService,this._cacheService,this._mixpanelService,this._assignmentWorkService,this._exportService,this._feedbackService,this._platformHeaderService,e,t)}}]);return e}();t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(285),a=n(496),c=s(a),l=n(442),u=n(364),d=n(153),h=n(185),f=function(){function e(t,n,i,s,a,l,u,d,h,f,g){r(this,e);this.$q=t;this.$timeout=n;this.$stateParams=i;this._assignmentWorkService=s;this._cacheService=a;this._assignmentTrackingService=l;this._breadcrumbService=u;this._storageService=d;this._studentCacheService=h;this._toolbarService=f;this._feedbackService=g;this._firstFeedback=!0;this._assignmentQuestionConfig=void 0;this._savingIndicator=new c["default"](this.$timeout,this._assignmentTrackingService);this._toolbarOptions=new o.AssignmentToolbarConfig;this._request=this.$stateParams.request||this._storageService.feedbackHelpRequest;this._storageService.feedbackHelpRequest=this._request;this._error=this._request?null:new Error(this.CANNOT_ACCESS_HELP_REQUEST_ERROR);this._assignmentTrackingService.previewModified.subscribe(this._handleFeedback,this)}i(e,[{key:"init",value:function(e){var t=this;this.assignmentWorkId=e.id;return this._studentCacheService.getSessionData(e,this._cacheService).then(function(e){t._helperSessionData=e;return t.$q.all({helpeeAssignmentWork:t._assignmentWorkService.getForPeer(t.data.assignment,t.data.roster.id,t._request.helpeeId),helper:t._cacheService.getUser()})}).then(function(n){t._helper=n.helper;t._helpeeAssignmentWork=n.helpeeAssignmentWork;t._configureAssignmentQuestionConfig();t._cacheService.startHelping(e.assignment,t.data.userId,t._helper.name,h.UserRoles.STUDENT,t._request.helpeeId,t.data.assignment.id,t._request.questionId);t._cacheService.setUserStatus(t.data.assignment.id,t._request.questionId,l.StatusActivities.HELPING,t._helpeeAssignmentWork.ownerId);t.data.classCode.lockStudentWorkUpdated.subscribe(t._handleLockStudentWork,t)})["catch"](function(e){t._error=e})}},{key:"_configureAssignmentQuestionConfig",value:function(){this._assignmentQuestionConfig=new u.AssignmentQuestionMetadata(this._helpeeAssignmentWork,this._request.questionId,this.lockStudentWork,!1,this.data.userId,h.UserRoles.STUDENT,d.ElementIntents.FEEDBACK,void 0,this.data.helpRequestSet)}},{key:"_handleLockStudentWork",value:function(){this._configureAssignmentQuestionConfig()}},{key:"_handleFeedback",value:function(e){if(this._isStudentFeedback(e.element)){if(this._firstFeedback){this._firstFeedback=!1;this._toolbarService.helpCenter.helpRequestManager.currentHelpRequest&&this._toolbarService.helpCenter.lowerHelpRequest()}this._feedbackService.give(this._request.helpeeId,this._helpeeAssignmentWork,this._request.questionId,this._helper.id,this._helper.name)}}},{key:"_isStudentFeedback",value:function(e){return e.metadata&&e.metadata.intent===d.ElementIntents.FEEDBACK&&e.metadata.role===h.UserRoles.STUDENT}},{key:"destroy",value:function(){this._assignmentTrackingService&&this._assignmentTrackingService.previewModified.unsubscribe(this._handleFeedback,this);this.data&&this.data.classCode&&this.data.classCode.lockStudentWorkUpdated.unsubscribe(this._handleLockStudentWork,this);this._cacheService.stopHelping()}},{key:"CANNOT_ACCESS_HELP_REQUEST_ERROR",get:function(){return"cannot_access_help_request"}},{key:"assignmentQuestionConfig",get:function(){return this._assignmentQuestionConfig}},{key:"error",get:function(){return this._error}},{key:"toolbarOptions",get:function(){return this._toolbarOptions}},{key:"saveState",get:function(){return this._savingIndicator&&this._savingIndicator.saveState}},{key:"title",get:function(){if(!this._helpeeAssignmentWork)return"Loading...";var e=this._request.anonAnimalNameForHelpee,t=this.data.assignmentWork.questionNumberForId(this._request.questionId);return"You are helping "+e.toLowerCase()+" on question "+t}},{key:"data",get:function(){return this._helperSessionData}},{key:"lockStudentWork",get:function(){return this.data&&this.data.classCode&&angular.isDefined(this.data.classCode.lockStudentWork)?this.data.classCode.lockStudentWork:!1}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(367),a=s(o),c=function(){function e(t,n){r(this,e);this.$timeout=t;this._assignmentTrackingService=n;this._saveState="";this._assignmentTrackingService.previewModified.subscribe(this._handlePreviewModified,this);this._assignmentTrackingService.modified.subscribe(this._handleModified,this)}i(e,[{key:"_handlePreviewModified",value:function(){this._saveState=a["default"].UNSAVED;this.$timeout(function(){})}},{key:"_handleModified",value:function(){this._saveState=a["default"].SAVED;this.$timeout(function(){})}},{key:"destroy",value:function(){this._assignmentTrackingService.previewModified.unsubscribe(this._handlePreviewModified,this);this._assignmentTrackingService.modified.unsubscribe(this._handleModified,this)}},{key:"saveState",get:function(){return this._saveState},set:function(e){this._saveState=e}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(485),c=o(a),l=n(498),u=o(l),d=n(153),h=n(185),f=function(){function e(t,n,i,o,a,c,l,d,h,f){r(this,e);this.$timeout=t;this.$state=n;this.$stateParams=i;this.$mdDialog=o;this._studentCacheService=a;this._cacheService=c;this._breadcrumbService=l;this._exportService=d;this._platformHeaderService=h;this._studentSessionData=void 0;this._assignmentSheetConfigs=new s;this._loading=!1;this._helpInboxType=f;this._thumbnails=[];this._showExportAssignmentDialog=u["default"].show}i(e,[{key:"assignmentSheetConfig",value:function(e){this._assignmentSheetConfigs.has(e)||this._assignmentSheetConfigs.set(e,this.data.createSheetConfig(e));return this._assignmentSheetConfigs.get(e)}},{key:"init",value:function(e){var t=this;this.assignmentWorkId=e.id;return this._studentCacheService.getSessionData(e,this._cacheService).then(function(e){t._studentSessionData=e;t._platformHeaderService.setAssignmentId(t._studentSessionData.assignment.id);t._platformHeaderService.setRosterId(t._studentSessionData.roster.id);t.data.assignmentNotification.questionAdded.subscribe(t._handleAssignmentUpdated,t);t.data.assignmentNotification.questionRemoved.subscribe(t._handleAssignmentUpdated,t);t.data.assignmentNotification.questionUpdated.subscribe(t._handleQuestionUpdated,t);t.data.questionFeedbackList.updated.subscribe(t._handleFeedbackGivenUpdate,t);t._thumbnails=t.data.assignment.questions.map(function(e){return new g(t.data.assignmentWork,e.id)});t._loading=!1})}},{key:"destroy",value:function(){this._platformHeaderService.setAssignmentId(void 0);this._platformHeaderService.setRosterId(void 0);if(this.data&&this.data.assignmentNotification){this.data.assignmentNotification.questionAdded.unsubscribe(this._handleAssignmentUpdated,this);this.data.assignmentNotification.questionRemoved.unsubscribe(this._handleAssignmentUpdated,this);this.data.assignmentNotification.questionUpdated.unsubscribe(this._handleQuestionUpdated,this)}this.data&&this.data.questionFeedbackList&&this.data.questionFeedbackList.updated.unsubscribe(this._handleFeedbackGivenUpdate,this)}},{key:"_handleQuestionUpdated",value:function(e){var t=this.data.assignment.indexForQuestionId(e.questionId),n=this.data.assignment.indexForQuestionId(e.beforeQuestionId);t!==n-1&&this._handleAssignmentUpdated()}},{key:"_handleAssignmentUpdated",value:function(){var e=this;c["default"].launchAssignmentUpdatedDialog(this.$mdDialog).then(function(){e.$state.reload()})}},{key:"_handleFeedbackGivenUpdate",value:function(){this.$timeout(function(){})}},{key:"exportToPDF",value:function(){var e=(new s).set(this.data.userId,this.data.assignmentWork),t=[{name:this.data.user.name,id:this.data.userId}],n=this._exportService.createAssignmentExports(e,t,this.data.classCode,this.data.assignment,this.data.classCode.showStudentScores);this._showExportAssignmentDialog(this.$mdDialog,n,d.ElementIntents.WORK,h.UserRoles.STUDENT,!0)}},{key:"loading",get:function(){return this._loading}},{key:"allowPeerHelp",get:function(){return this.roster&&this.roster.allowPeerHelp}},{key:"roster",get:function(){return this.data&&this.data.roster}},{key:"data",get:function(){return this._studentSessionData}},{key:"thumbnails",get:function(){return this._thumbnails}},{key:"helpInboxMetadata",get:function(){return this.data&&this.data.helpInboxMetadata(this._helpInboxType)}},{key:"assignmentTitle",get:function(){return this.data&&this.data.assignment?this.data.assignment.name:"Loading..."}},{key:"lockStudentWork",get:function(){return this.data&&this.data.classCode&&angular.isDefined(this.data.classCode.lockStudentWork)?this.data.classCode.lockStudentWork:!1}}]);return e}();t["default"]=f;var g=function(){function e(t,n){r(this,e);this._assignmentWork=t;this._questionId=n;this._question=void 0;this._questionWork=void 0}i(e,[{key:"question",get:function(){this._question||(this._question=this._assignmentWork.assignment.questionForId(this._questionId));return this._question}},{key:"questionWork",get:function(){this._questionWork||(this._questionWork=this._assignmentWork.questionForId(this._questionId));return this._questionWork}},{key:"currentPoints",get:function(){return this.questionWork.points},set:function(e){this.questionWork.points=e}},{key:"potentialScore",get:function(){return this.question.points},set:function(e){this.question.points=e}}]);return e}();e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(133)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(47),l=n(214),u=a(l),d=function(){function e(t,n,i,s,o,a,c,l,d,h){r(this,e);this.$q=t;this.$timeout=n;this.$scope=i;this.$document=s;this.$mdDialog=o;this._exportService=a;this._assignmentExports=c;this._skipStudentSelector=l;this._intent=d;this._userRole=h;this._state=this.LOADING;this._exportingMessage="";this._assignmentsToExport=[];this._exportingCount=void 0;this._exportingCountTotal=c.length;this._configMessage="Include extra information (name, assignment name, slide number and classcode)";this._zipFileName=this._assignmentExports[0].zipFileName;this._currentConfig=void 0;this._cancelRemaining=!1;this._showMetadata=!0;this._errorDialog=u["default"].show}e.$inject=["$q","$timeout","$scope","$document","$mdDialog","ExportService","assignmentExports","skipStudentSelector","intent","userRole"];i(e,[{key:"loadCanvg",value:function(){return this.$q.all([this._addScript("https://cdnjs.cloudflare.com/ajax/libs/canvg/1.4/rgbcolor.min.js"),this._addScript("https://cdnjs.cloudflare.com/ajax/libs/stackblur-canvas/1.4.1/stackblur.min.js"),this._addScript("https://cdn.jsdelivr.net/npm/canvg/dist/browser/canvg.min.js")])}},{key:"_addScript",value:function(e){var t=this;return new o(function(n,i){var r=t.$document[0].createElement("script");r.setAttribute("src",e);r.onload=function(){return n()};r.onerror=function(){return i()};var s=angular.element(".assignment-export-dialog");s[0]?s[0].appendChild(r):i()})}},{key:"init",value:function(){this.skipSelect?this.selectAll():this._state=this.SELECT}},{key:"configureSelect",value:function(){this._state=this.SELECT}},{key:"exportAssignments",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];this._state=this.EXPORTING;if(this._cancelRemaining)this.$mdDialog.cancel();else if(e.length>0){var i=e.pop();i.showMetadata=this.showMetadata;this.renderAssignment(i).then(function(e){i.questionDataURLs=e;return t._exportService.workToPDF(i)}).then(function(i){t._exportingCount+=1;t.exportAssignments(e,[].concat(s(n),[i]))})["catch"](function(){t.$mdDialog.cancel()})}else n.length>1?this.saveAsZip(n):this.saveAsFile(n[0])}},{key:"saveAsZip",value:function(e){var t=this;this._exportService.toZip(e).then(function(e){saveAs(e,t._zipFileName);t.$mdDialog.hide()})}},{key:"saveAsFile",value:function(e){saveAs(e,e.name);this.$mdDialog.hide()}},{key:"renderAssignment",value:function(e){var t=this;this._exportingMessage=e.exportingMessage;return e.questions.reduce(function(n,i){return n.then(function(){return t.renderQuestion(e.assignment,i.id)}).then(function(){return t.checkCancel()}).then(function(){return t.extractSVGString()}).then(function(e){return t._exportService.svgStringToDataURL(e)}).then(function(e){return o.all([n,e])}).then(function(e){return[].concat(s(e[0]),[e[1]])})},o.resolve([]))}},{key:"renderQuestion",value:function(e,t){var n=this;return new o(function(i){var r=n.assignmentSheetConfig(e,t,function(){i()});n._currentConfig=r;n.$scope.$apply()})}},{key:"extractSVGString",value:function(){var e=".assignment-export-hidden assignment-sheet svg",t=angular.element(e)[0];return this._exportService.svgDOMtoString(t)}},{key:"assignmentSheetConfig",value:function(e,t,n){return new c.AssignmentSheetMetadata(e,t,!0,!0,null,this._userRole,this._intent,null,1,n)}},{key:"selectAll",value:function(){this._exportingCount=0;this._assignmentsToExport=this.assignmentExports;this._state=this.CONFIG}},{key:"selectStudent",value:function(e){this._exportingCount=0;this._exportingCountTotal=1;this._assignmentsToExport=[e];this._state=this.CONFIG}},{key:"performExport",value:function(){this.exportAssignments(this._assignmentsToExport,[])}},{key:"checkCancel",value:function(e){return this._cancelRemaining?o.reject():o.resolve(e)}},{key:"cancelExport",value:function(){this._cancelRemaining=!0;this.$mdDialog.cancel()}},{key:"showErrorDialog",value:function(){this._errorDialog(this.$mdDialog,"Uh oh! An error occurred","Please send an email to support@classkick.com")}},{key:"LOADING",get:function(){return"loading"}},{key:"EXPORTING",get:function(){return"exporting"}},{key:"SELECT",get:function(){return"select"}},{key:"CONFIG",get:function(){return"config"}},{key:"state",get:function(){return this._state}},{key:"exportingMessage",get:function(){return this._exportingMessage}},{key:"exportingCountMessage",get:function(){return angular.isDefined(this._exportingCount)&&this._assignmentExports&&this._assignmentExports.length>1?this._exportingCount+" / "+this._exportingCountTotal+" student works exported":""}},{key:"configMessage",get:function(){return this._configMessage}},{key:"assignmentExports",get:function(){return this._assignmentExports}},{key:"skipStudentSelector",get:function(){return this._skipStudentSelector}},{key:"element",get:function(){return this._element},set:function(e){this._element=e}},{key:"showMetadata",get:function(){return this._showMetadata},set:function(e){this._showMetadata=e}},{key:"currentConfig",get:function(){return this._currentConfig}},{key:"skipSelect",get:function(){return 1===this.assignmentExports.length||this.skipStudentSelector}}],[{key:"show",value:function(t,n,i,r){var s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4];return t.show({controller:e,templateUrl:"app/components/assignment-export-dialog/assignment-export-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!0,locals:{assignmentExports:n,skipStudentSelector:s,intent:i,userRole:r},onComplete:e.onComplete})}},{key:"onComplete",value:function(e,t){var n=e.ctrl;n.element=t;n.hidden=t.find(".assignment-export-hidden");n.loadCanvg().then(function(){
n.init()})["catch"](function(){n.cancelExport();n.showErrorDialog()})}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(496),c=o(a),l=n(485),u=o(l),d=n(285),h=n(364),f=n(498),g=o(f),p=n(153),m=n(185),v=function(){function e(t,n,i,s,o,a,l,u,d,h,f,p,m){r(this,e);this.$timeout=t;this.$state=n;this.$mdDialog=i;this._studentCacheService=s;this._assignmentTrackingService=o;this._cacheService=a;this._mixpanelService=l;this._assignmentWorkService=u;this._exportService=d;this._feedbackService=h;this._platformHeaderService=f;this._subscriptionData=void 0;this._coreData=void 0;this._assignmentQuestionConfig=void 0;this._savingIndicator=new c["default"](this.$timeout,this._assignmentTrackingService);this._helpInboxType=p;this._pager=m;this._calledOnPreviewModified=!1;this._showExportAssignmentDialog=g["default"].show;this._assignmentTrackingService.previewModified.subscribe(this._onPreviewModified,this)}i(e,[{key:"initCoreData",value:function(e,t){var n=this;this.setupCanvasDisplay(e,t);var i=e.assignment.id,r=e.rosterId,s=e.ownerId;this._platformHeaderService.setAssignmentId(i);this._platformHeaderService.setRosterId(r);var o=this._feedbackService.getQuestionFeedbackList(s,e);return this._studentCacheService.getClassCodeForAssignmentAndRoster(i,r,!0).then(function(t){var i=new u["default"](e,o,null,null,null,null,null,null,null,null,null,t,null);n._coreData=i;var r=new h.AssignmentQuestionMetadata(e,n.questionId,n.lockStudentWork,!1,s,m.UserRoles.STUDENT,p.ElementIntents.WORK,n._pager,null,o);n._assignmentQuestionConfig=r;return e})}},{key:"setupCanvasDisplay",value:function(e,t){this.assignmentWorkId=e.id;this.questionId=t;this.questionId||(this.questionId=e.assignment.questionIdForIndex(0));this.toolbarOptions=new d.AssignmentToolbarConfig;this.toolbarOptions.requestHelp=!0;this.toolbarOptions.toggleFeedback=!0;this.toolbarOptions.viewScore=!0}},{key:"initSubscriptionData",value:function(e,t){var n=this;return this._studentCacheService.getSessionData(e,this._cacheService).then(function(e){n._subscriptionData=e;n._assignmentQuestionConfig=n.subscriptionData.createQuestionConfig(n.questionId,n.lockStudentWork,n._pager);n.subscriptionData.assignmentNotification.questionAdded.subscribe(n._handleAssignmentUpdated,n);n.subscriptionData.assignmentNotification.questionRemoved.subscribe(n._handleAssignmentUpdated,n);n.subscriptionData.assignmentNotification.questionUpdated.subscribe(n._handleQuestionUpdated,n);n.subscriptionData.questionFeedbackList.updated.subscribe(n._handleFeedbackGivenUpdate,n);n.subscriptionData.classCode.lockStudentWorkUpdated.subscribe(n._handleLockStudentWork,n);if(n.questionId){n.subscriptionData.setUserStatus(n.questionId);n._feedbackService.view(n.subscriptionData.userId,n.subscriptionData.assignmentWork,n.questionId);var t=n.subscriptionData.assignmentWork.questionForId(n.questionId);if(!t.startedAt){t.startedAt=moment();n._assignmentWorkService.updateQuestion(n.subscriptionData.assignment.id,n.subscriptionData.assignmentWork.id,t)}}})}},{key:"destroy",value:function(){this._platformHeaderService.setAssignmentId(void 0);this._platformHeaderService.setRosterId(void 0);if(this.subscriptionData&&this.subscriptionData.assignmentNotification){this.subscriptionData.assignmentNotification.questionAdded.unsubscribe(this._handleAssignmentUpdated,this);this.subscriptionData.assignmentNotification.questionRemoved.unsubscribe(this._handleAssignmentUpdated,this);this.subscriptionData.assignmentNotification.questionUpdated.unsubscribe(this._handleQuestionUpdated,this)}this.subscriptionData&&this.subscriptionData.questionFeedbackList&&this.subscriptionData.questionFeedbackList.updated.unsubscribe(this._handleFeedbackGivenUpdate,this);this.subscriptionData&&this.subscriptionData.classCode&&this.subscriptionData.classCode.lockStudentWorkUpdated&&this.subscriptionData.classCode.lockStudentWorkUpdated.unsubscribe(this._handleLockStudentWork,this);this._assignmentTrackingService.previewModified.unsubscribe(this._onPreviewModified,this);this._savingIndicator&&this._savingIndicator.destroy()}},{key:"_handleQuestionUpdated",value:function(e){var t=this.subscriptionData.assignment.indexForQuestionId(e.questionId),n=this.subscriptionData.assignment.indexForQuestionId(e.beforeQuestionId);t!==n-1&&this._handleAssignmentUpdated()}},{key:"_handleAssignmentUpdated",value:function(){var e=this;u["default"].launchAssignmentUpdatedDialog(this.$mdDialog).then(function(){e._studentCacheService.reset();e.$state.reload()})}},{key:"_handleLockStudentWork",value:function(){this._assignmentQuestionConfig=this.subscriptionData.createQuestionConfig(this.questionId,this.lockStudentWork,this._pager)}},{key:"_handleFeedbackGivenUpdate",value:function(e){this.questionId===e.id&&this._feedbackService.view(this.subscriptionData.userId,this.subscriptionData.assignmentWork,this.questionId);this.$timeout(function(){})}},{key:"_onPreviewModified",value:function(e){this._calledOnPreviewModified||(this._calledOnPreviewModified=!0)}},{key:"exportToPDF",value:function(){var e=(new s).set(this.subscriptionData.userId,this.subscriptionData.assignmentWork),t=[{name:this.subscriptionData.user.name,id:this.subscriptionData.userId}],n=this._exportService.createAssignmentExports(e,t,this.subscriptionData.classCode,this.subscriptionData.assignment,this.subscriptionData.classCode.showStudentScores);this._showExportAssignmentDialog(this.$mdDialog,n,p.ElementIntents.WORK,m.UserRoles.STUDENT,!0)}},{key:"saveState",get:function(){return this._savingIndicator&&this._savingIndicator.saveState}},{key:"allowPeerHelp",get:function(){return this.roster&&this.roster.allowPeerHelp}},{key:"roster",get:function(){return this.subscriptionData&&this.subscriptionData.roster}},{key:"subscriptionData",get:function(){return this._subscriptionData}},{key:"coreData",get:function(){return this._subscriptionData?this._subscriptionData:this._coreData}},{key:"assignmentQuestionConfig",get:function(){return this._assignmentQuestionConfig}},{key:"lockStudentWork",get:function(){return this.coreData&&this.coreData.classCode&&angular.isDefined(this.coreData.classCode.lockStudentWork)?this.coreData.classCode.lockStudentWork:!1}},{key:"showStudentScore",get:function(){return this.coreData?this.coreData.showStudentScore(this.questionId):!1}},{key:"helpInboxMetadata",get:function(){return this.subscriptionData&&this.subscriptionData.helpInboxMetadata(this._helpInboxType)}},{key:"assignmentTitle",get:function(){return this.subscriptionData&&this.subscriptionData.assignment?this.subscriptionData.assignment.name:"Loading..."}},{key:"disablePDFExport",get:function(){return!this.subscriptionData||this.lockStudentWork}}]);return e}();t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(501),a=s(o),c=function(){function e(){r(this,e)}i(e,null,[{key:"PROFILE_AND_EMAIL",get:function(){return"profile email"}},{key:"READ_COURSES_AND_STUDENT_EMAIL",get:function(){return"https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.rosters.readonly https://www.googleapis.com/auth/classroom.profile.emails"}}]);return e}(),l=function(){function e(){r(this,e)}i(e,null,[{key:"CLASSROOM_DISCOVERY_DOC",get:function(){return"https://www.googleapis.com/discovery/v1/apis/classroom/v1/rest"}}]);return e}(),u=function(){function e(t,n,i,s){"ngInject";r(this,e);this.$q=t;this.$log=n;this._environment=i;this._gapi=s;this._googleAuth=null;this._initGoogleAuth()}e.$inject=["$q","$log","environment","gapi"];i(e,[{key:"_initGoogleAuth",value:function(){var e=this,t=l.CLASSROOM_DISCOVERY_DOC,n=c.PROFILE_AND_EMAIL;this._gapi.load("client:auth2",function(){e._gapi.client.init({apiKey:e._environment.google.auth.apiKey,discoveryDocs:[t],client_id:e._environment.google.auth.clientId,scope:n}).then(function(){e._googleAuth=e._gapi.auth2.getAuthInstance()})})}},{key:"signIn",value:function(){if(!this.googleAuth){var e=new Error(a["default"].GOOGLE_AUTH_SETUP_FAILED);e.code=a["default"].GOOGLE_AUTH_SETUP_FAILED;return this.$q.reject(e)}var t=this.$q.defer();this.googleAuth.signIn().then(function(e){t.resolve({idToken:e.getAuthResponse().id_token,firstName:e.getBasicProfile().getGivenName(),lastName:e.getBasicProfile().getFamilyName(),email:e.getBasicProfile().getEmail()})},function(e){var n=new Error(e.error);n.code=e.error;t.reject(n)});return t.promise}},{key:"signOut",value:function(){this.googleAuth&&this.googleAuth.signOut()}},{key:"grantCourseAndStudentPermissions",value:function(){var e=this,t=this.$q.defer();this.googleAuth.currentUser.get().grant({scope:c.READ_COURSES_AND_STUDENT_EMAIL}).then(function(){t.resolve()})["catch"](function(n){e.$log.error(n);t.reject(n)});return t.promise}},{key:"getCourses",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i={pageSize:20,teacherId:this.userId};e&&(i.pageToken=e);return this._gapi.client.classroom.courses.list(i).then(function(e){var i=e.result.nextPageToken,r=e.result.courses||[];return i?t.getCourses(i,r.concat(n)):r.concat(n)})["catch"](function(){t.$log.error("Could not get Google courses.")})}},{key:"getGoogleCourseStudents",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return this._getGoogleCourseStudents(e,t).then(function(t){var r=t.result.nextPageToken,s=t.result.students||[];return r?n.getGoogleCourseStudents(e,r,s.concat(i)):s.concat(i)})}},{key:"_getGoogleCourseStudents",value:function(e,t){var n="https://classroom.googleapis.com/v1/courses/"+e+"/students";t&&(n=n+"?pageToken="+t);return this._gapi.client.request({path:n})}},{key:"hasCourseAndStudentPermissions",get:function(){var e=this.googleAuth,t=e&&e.currentUser.get();return t&&t.hasGrantedScopes(c.READ_COURSES_AND_STUDENT_EMAIL)}},{key:"userId",get:function(){var e=this.googleAuth.currentUser.get();return e&&e.getId()}},{key:"googleAuth",get:function(){return this._googleAuth}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"DUPLICATE_EMAIL",get:function(){return"duplicate-email"}},{key:"DUPLICATE_USERNAME",get:function(){return"duplicate-username"}},{key:"DUPLICATE_PHONE_NUMBER",get:function(){return"duplicate-phone"}},{key:"ROSTER_LOCKED",get:function(){return"roster-locked"}},{key:"CANT_CREATE_CLASS_CODE",get:function(){return"cant-create-classcode"}},{key:"CANT_CREATE_INVITE_CODE",get:function(){return"cant-create-invite-code"}},{key:"BAD_INVITE_CODE",get:function(){return"bad-invite-code"}},{key:"INVITE_CODE_REQUIRED",get:function(){return"invite-code-required"}},{key:"INVITE_CODE_OR_CLASS_CODE_REQUIRED",get:function(){return"invite-code-or-class-code-required"}},{key:"UNSUPPORTED_UPDATE_ANON_STUDENT_ACCOUNT",get:function(){return"unsupported-update-anon-student-account"}},{key:"UNSUPPORTED_UPDATE_EMAIL",get:function(){return"unsupported-update-email"}},{key:"UNSUPPORTED_UPDATE_PHONE",get:function(){return"unsupported-update-phone-number"}},{key:"UNSUPPORTED_UPDATE_USERNAME",get:function(){return"unsupported-update-username"}},{key:"INVALID_AUTHORIZATION",get:function(){return"invalid-authorization"}},{key:"NOT_READABLE",get:function(){return"not-readable"}},{key:"INVALID_ARGUMENTS",get:function(){return"invalid-arguments"}},{key:"NOT_FOUND",get:function(){return"not-found"}},{key:"INSUFFICIENT_PERMISSIONS",get:function(){return"insufficient-permissions"}},{key:"INVALID_CREDENTIALS",get:function(){return"invalid-credentials"}},{key:"TOO_MANY_REQUESTS",get:function(){return"too-many-requests"}},{key:"PAYMENT_FAILED",get:function(){return"payment-failed"}},{key:"INVALID_POINT_EMAIL",get:function(){return"invalid-point-email"}},{key:"INTERNAL_SERVER_ERROR",get:function(){return"internal-server-error"}},{key:"UNKNOWN",get:function(){return"unknown"}},{key:"GOOGLE_AUTH_SETUP_FAILED",get:function(){return"google-auth-setup-failed"}},{key:"GOOGLE_POPUP_CLOSED_BY_USER",get:function(){return"popup_closed_by_user"}},{key:"GOOGLE_ACCESS_DENIED",get:function(){return"access_denied"}},{key:"PASSWORD_NOT_CONFIGURED",get:function(){return"password-not-configured"}},{key:"CLEVER_EMAIL_NOT_SET",get:function(){return"clever-email-not-set"}},{key:"FIREBASE_AUTH_INVALID_CUSTOM_TOKEN",get:function(){return"auth/invalid-custom-token"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a){"ngInject";r(this,e);this.$q=t;this.$log=n;this._environment=i;this._googleClientService=s;this._rosterService=o;this._mixpanelService=a}e.$inject=["$q","$log","environment","GoogleClientService","RosterService","MixpanelService"];i(e,[{key:"getCourses",value:function(){return this._googleClientService.getCourses()}},{key:"grantCourseAndStudentPermissions",value:function(){return this._googleClientService.grantCourseAndStudentPermissions()}},{key:"syncGoogleRoster",value:function(e){var t=this;if(!e.googleCourseId)return this.$q.reject();var n=function(){var n=t.$q.defer();t._googleClientService.getGoogleCourseStudents(e.googleCourseId).then(function(n){return t._rosterService.updateClasskickRosterWithGoogleStudents(e.id,n)}).then(function(){n.resolve(e)})["catch"](function(e){n.reject(e)});return{v:n.promise}}();return"object"==typeof n?n.v:void 0}},{key:"importGoogleCourses",value:function(e){var t=this;return e.reduce(function(e,n){return e.then(function(){return t._rosterService.createGoogleRoster(n).then(function(e){return t.syncGoogleRoster(e)})["catch"](function(e){t.$log.error("Error importing Google Rosters:",e)})})},this.$q.resolve())}},{key:"hasCourseAndStudentPermissions",get:function(){return this._googleClientService.hasCourseAndStudentPermissions}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,[{key:"survey",value:function(e,t){delighted.survey({email:e.email,name:e.name,properties:{id:e.id,isPro:t}})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(505),a=s(o),c=function(){function e(t,n,i,s){r(this,e);this.$q=t;this.$log=n;this._staticContentService=i;this._constants=s;this._initialized=!1;this._identifiedUserId=""}e.$inject=["$q","$log","StaticContentService","constants"];i(e,[{key:"init",value:function(){a["default"].init("c9mpx9/classkick-web-production",{release:this._constants.version})}},{key:"identify",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=arguments.length<=3||void 0===arguments[3]?"":arguments[3],r=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],s=arguments.length<=5||void 0===arguments[5]?!1:arguments[5];if(s||e!==this._identifiedUserId){this._identifiedUserId=e;if(s||this.isSelectedUser(this.DefaultPercentage)){if(!this._initialized){this.init();this._initialized=!0}this.$log.info("sending to logRocket! : "+e);a["default"].identify(e,{name:t,email:n,username:i,isPro:r})}}}},{key:"track",value:function(e){a["default"].track(e)}},{key:"isSelectedUser",value:function(e){var t=Math.floor(100*Math.random());return e>t}},{key:"handleError",value:function(e){this._initialized&&a["default"].captureException(e)}},{key:"initialized",get:function(){return this._initialized}},{key:"DefaultPercentage",get:function(){return 25}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};e[i].call(r.exports,r,r.exports,t);r.l=!0;return r.exports}var n={};t.m=e;t.c=n;t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})};t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};t.t=function(e,n){1&n&&(e=t(e));if(8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);t.r(i);Object.defineProperty(i,"default",{enumerable:!0,value:e});if(2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(t){return e[t]}.bind(null,r));return i};t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};t.d(n,"a",n);return n};t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.p="";return t(t.s=8)}([function(e,t,n){"use strict";function i(e,t){if(null==e)return{};var n={};Object.keys(e).forEach(function(i){n[i]=t(e[i])});return n}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){u=e}function s(e){var t=e.addRequest,n=e.addResponse,i=XMLHttpRequest,r=new WeakMap,s=!1,o="xhr-";window._lrXMLHttpRequest=XMLHttpRequest;XMLHttpRequest=function(e,c){var h=new i(e,c);if(!u)return h;r.set(h,{xhrId:++d,headers:{}});(0,l["default"])(h,"open",function(e,t){if(!s){var n=r.get(h);n.method=e;n.url=t}});(0,l["default"])(h,"send",function(e){if(!s){var n=r.get(h);if(n){var i={url:n.url,method:n.method&&n.method.toUpperCase(),headers:(0,a["default"])(n.headers||{},function(e){return e.join(", ")}),body:e};t(""+o+n.xhrId,i)}}});(0,l["default"])(h,"setRequestHeader",function(e,t){if(!s){var n=r.get(h);if(n){n.headers=n.headers||{};n.headers[e]=n.headers[e]||[];n.headers[e].push(t)}}});var f={readystatechange:function(){if(!s&&4===h.readyState){var e=r.get(h);if(!e)return;var t=h.getAllResponseHeaders(),i=t.split(/[\r\n]+/).reduce(function(e,t){var n=e,i=t.split(": ");if(i.length>0){var r=i.shift(),s=i.join(": ");e[r]?n[r]+=", "+s:n[r]=s}return n},{}),a=void 0;try{switch(h.responseType){case"json":case"arraybuffer":case"blob":a=h.response;break;case"document":a=h.responseXML;break;case"text":case"":a=h.responseText;break;default:a=""}}catch(c){a="LogRocket: Error accessing response."}var l={url:e.url,status:h.status,headers:i,body:a,method:(e.method||"").toUpperCase()};n(""+o+e.xhrId,l)}}};Object.keys(f).forEach(function(e){h.addEventListener(e,f[e])});return h};XMLHttpRequest.prototype=i.prototype;["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(e){XMLHttpRequest[e]=i[e]});return function(){s=!0;XMLHttpRequest=i}}Object.defineProperty(t,"__esModule",{value:!0});t.setActive=r;t["default"]=s;var o=n(0),a=i(o),c=n(2),l=i(c),u=!0,d=0},function(e,t,n){"use strict";function i(e,t,n){function i(){for(var e=void 0,t=arguments.length,i=Array(t),s=0;t>s;s++)i[s]=arguments[s];r&&(e=r.apply(this,i));n.apply(this,i);return e}var r=e[t];e[t]=i;return function(){e[t]=r}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t["default"]=e;return t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});t.Capture=t.registerExceptions=void 0;var s=n(16),o=r(s),a=n(6),c=i(a);t.registerExceptions=o["default"];t.Capture=c},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(1,eval)("this")}catch(i){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(t){function n(){return"undefined"==typeof document||"undefined"==typeof document.location?"":document.location.href}/*
	 TraceKit - Cross brower stack traces - github.com/occ/TraceKit

	 This was originally forked from github.com/occ/TraceKit, but has since been
	 largely re-written and is now maintained as part of raven-js.  Tests for
	 this are in test/vendor.

	 MIT license
	*/
var i={collectWindowErrors:!0,debug:!1},r="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},s=[].slice,o="?",a=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;i.report=function(){function e(e){d();v.push(e)}function t(e){for(var t=v.length-1;t>=0;--t)v[t]===e&&v.splice(t,1)}function c(){h();v=[]}function l(e,t){var n=null;if(!t||i.collectWindowErrors){for(var r in v)if(v.hasOwnProperty(r))try{v[r].apply(null,[e].concat(s.call(arguments,2)))}catch(o){n=o}if(n)throw n}}function u(e,t,r,s,c){var u=null;if(k){i.computeStackTrace.augmentStackTraceWithInitialElement(k,t,r,e);f()}else if(c){u=i.computeStackTrace(c);l(u,!0)}else{var d,h={url:t,line:r,column:s},g=void 0,m=e;if("[object String]"==={}.toString.call(e)){var d=e.match(a);if(d){g=d[1];m=d[2]}}h.func=o;u={name:g,message:m,url:n(),stack:[h]};l(u,!0)}return p?p.apply(this,arguments):!1}function d(){if(!m){p=r.onerror;r.onerror=u;m=!0}}function h(){if(m){r.onerror=p;m=!1;p=void 0}}function f(){var e=k,t=_;_=null;k=null;y=null;l.apply(null,[e,!1].concat(t))}function g(e,t){var n=s.call(arguments,1);if(k){if(y===e)return;f()}var r=i.computeStackTrace(e);k=r;y=e;_=n;setTimeout(function(){y===e&&f()},r.incomplete?2e3:0);if(t!==!1)throw e}var p,m,v=[],_=null,y=null,k=null;g.subscribe=e;g.unsubscribe=t;g.uninstall=c;return g}();i.computeStackTrace=function(){function e(e){if("undefined"!=typeof e.stack&&e.stack){for(var t,i,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=e.stack.split("\n"),l=[],u=(/^(.*) is undefined$/.exec(e.message),0),d=c.length;d>u;++u){if(t=r.exec(c[u])){var h=t[2]&&-1!==t[2].indexOf("native");i={url:h?null:t[2],func:t[1]||o,args:h?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=a.exec(c[u]))i={url:t[2],func:t[1]||o,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=s.exec(c[u])))continue;i={url:t[3],func:t[1]||o,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}!i.func&&i.line&&(i.func=o);l.push(i)}if(!l.length)return null;l[0].column||"undefined"==typeof e.columnNumber||(l[0].column=e.columnNumber+1);return{name:e.name,message:e.message,url:n(),stack:l}}}function t(e,t,n,i){var r={url:t,line:n};if(r.url&&r.line){e.incomplete=!1;r.func||(r.func=o);if(e.stack.length>0&&e.stack[0].url===r.url){if(e.stack[0].line===r.line)return!1;if(!e.stack[0].line&&e.stack[0].func===r.func){e.stack[0].line=r.line;return!1}}e.stack.unshift(r);e.partial=!0;return!0}e.incomplete=!0;return!1}function r(e,a){for(var c,l,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,d=[],h={},f=!1,g=r.caller;g&&!f;g=g.caller)if(g!==s&&g!==i.report){l={url:null,func:o,line:null,column:null};g.name?l.func=g.name:(c=u.exec(g.toString()))&&(l.func=c[1]);if("undefined"==typeof l.func)try{l.func=c.input.substring(0,c.input.indexOf("{"))}catch(p){}h[""+g]?f=!0:h[""+g]=!0;d.push(l)}a&&d.splice(0,a);var m={name:e.name,message:e.message,url:n(),stack:d};t(m,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description);return m}function s(t,s){var o=null;s=null==s?0:+s;try{o=e(t);if(o)return o}catch(a){if(i.debug)throw a}try{o=r(t,s+1);if(o)return o}catch(a){if(i.debug)throw a}return{name:t.name,message:t.message,url:n()}}s.augmentStackTraceWithInitialElement=t;s.computeStackTraceFromStackProp=e;return s}();e.exports=i}).call(this,n(4))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return/boolean|number|string/.test("undefined"==typeof e?"undefined":c(e))}function s(e,t){if(t){var n=["level","logger"],i=!0,s=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var l=a.value,u=t[l];r(u)&&(e[l]=u.toString())}}catch(d){s=!0;o=d}finally{try{!i&&c["return"]&&c["return"]()}finally{if(s)throw o}}var h=["tags","extra"],f=!0,g=!1,p=void 0;try{for(var m,v=h[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var _=m.value,y=t[_]||{},k={},b=!0,S=!1,w=void 0;try{for(var C,E=Object.keys(y)[Symbol.iterator]();!(b=(C=E.next()).done);b=!0){var T=C.value,I=y[T];r(I)&&(k[T.toString()]=I.toString())}}catch(d){S=!0;w=d}finally{try{!b&&E["return"]&&E["return"]()}finally{if(S)throw w}}e[_]=k}}catch(d){g=!0;p=d}finally{try{!f&&v["return"]&&v["return"]()}finally{if(g)throw p}}}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1,r={exceptionType:i?"CONSOLE":"MESSAGE",message:t,browserHref:window.location.href};s(r,n);e.addEvent("lr.core.Exception",function(){return r})}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=i||u["default"].computeStackTrace(t),o={exceptionType:"WINDOW",errorType:r.name,message:r.message,browserHref:window.location.href};s(o,n);var a={_stackTrace:(0,h["default"])(r)};e.addEvent("lr.core.Exception",function(){return o},a)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.captureMessage=o;t.captureException=a;var l=n(5),u=i(l),d=n(18),h=i(d)},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Date.now.bind(Date),i=n();t["default"]="undefined"!=typeof performance&&performance.now?performance.now.bind(performance):function(){return n()-i};e.exports=t["default"]},function(e,t,n){e.exports=n(9)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),s=i(r),o=(0,s["default"])();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enterpriseServer,n=r(e,["enterpriseServer"]),i=n.sdkServer||t,s=n.ingestServer||t,o=(0,a["default"])(function(){var e=document.createElement("script");if(s){"undefined"==typeof window.__SDKCONFIG__&&(window.__SDKCONFIG__={});window.__SDKCONFIG__.serverURL=s+"/i";window.__SDKCONFIG__.statsURL=s+"/s"}i?e.src=i+"/logger.min.js":window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?e.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?e.src=window._lrAsyncScript:e.src="https://cdn.logrocket.io/logger.min.js";e.async=!0;document.head.appendChild(e);e.onload=function(){o.onLogger(new window._LRLogger({sdkVersion:"0.6.21"}))};e.onerror=function(){console.warn("LogRocket: script could not load. Check that you have a valid network connection.");o.uninstall()}});return o}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=s;var o=n(11),a=i(o);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)throw new Error(a);if("undefined"!=typeof window){if(window._disableLogRocket)return c();if(window.MutationObserver){window._lrMutationObserver=window.MutationObserver;var t=new o["default"];e(t);return t}}return c()}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=r;var s=n(12),o=i(s),a="LogRocket does not yet support React Native.",c=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(e){return function(){return e.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(e){return function(t){return e(t)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}};e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}Object.defineProperty(t,"__esModule",{value:!0});t.MAX_QUEUE_SIZE=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(e,i.key,i)}}return function(t,n,i){n&&e(t.prototype,n);i&&e(t,i);return t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=n(13),l=i(c),u=n(3),d=n(19),h=i(d),f=n(21),g=t.MAX_QUEUE_SIZE=1e3,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ingestServer,n=s(e,["ingestServer"]);return t?a({serverURL:t+"/i",statsURL:t+"/s"},n):n},m=function(){function e(){var t=this;r(this,e);this._buffer=[];["log","info","warn","error","debug"].forEach(function(e){t[e]=function(){for(var n=arguments.length,i=Array(n),r=0;n>r;r++)i[r]=arguments[r];t.addEvent("lr.core.LogEvent",function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"error"===e&&n.shouldAggregateConsoleErrors&&u.Capture.captureMessage(t,i[0],{},!0);return{logLevel:e.toUpperCase(),args:i}},{shouldCaptureStackTrace:!0})}});this._isInitialized=!1;this._installed=[]}o(e,[{key:"addEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Date.now();this._run(function(r){r.addEvent(e,t,a({},n,{timeOverride:i}))})}},{key:"onLogger",value:function(e){this._logger=e;for(;this._buffer.length>0;){var t=this._buffer.shift();t(this._logger)}}},{key:"_run",value:function(e){if(!this._isDisabled)if(this._logger)e(this._logger);else{if(this._buffer.length>=g){this._isDisabled=!0;console.warn("LogRocket: script did not load. Check that you have a valid network connection.");this.uninstall();return}this._buffer.push(e.bind(this))}}},{key:"init",value:function(e,t){if(!this._isInitialized){this._installed.push((0,u.registerExceptions)(this));this._installed.push((0,l["default"])(this));this._installed.push((0,h["default"])(this));this._isInitialized=!0;this._run(function(n){n.init(e,p(t))})}}},{key:"start",value:function(){this._run(function(e){e.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(e){return e()});this._buffer=[];this._run(function(e){e.uninstall()})}},{key:"identify",value:function(e,t){this._run(function(n){n.identify(e,t)})}},{key:"startNewSession",value:function(){this._run(function(e){e.startNewSession()})}},{key:"track",value:function(e){this._run(function(t){t.track(e)})}},{key:"getSessionURL",value:function(e){if("function"!=typeof e)throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(t){t.getSessionURL?t.getSessionURL(e):e(t.recordingURL)})}},{key:"getVersion",value:function(e){this._run(function(t){e(t.version)})}},{key:"startTransaction",value:function(e){this.addEvent("lr.transaction.Start",function(){return{id:e}})}},{key:"endTransaction",value:function(e){this.addEvent("lr.transaction.End",function(){return{id:e}})}},{key:"captureMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.Capture.captureMessage(this,e,t)}},{key:"captureException",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.Capture.captureException(this,e,t)}},{key:"reduxEnhancer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.createEnhancer)(this,e)}},{key:"reduxMiddleware",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.createMiddleware)(this,e)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}}]);return e}();t["default"]=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t={},n=function(e){var t=4096e3,n=e;if("object"===("undefined"==typeof e?"undefined":s(e))&&null!=e){var i=Object.getPrototypeOf(e);(i===Object.prototype||null===i)&&(n=JSON.stringify(e))}if(n&&n.length&&n.length>t&&"string"==typeof n){var r=n.substring(0,1e3);return r+" ... LogRocket truncating to first 1000 characters.\n      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference#network"}return e},i=function(i,r){var s=r.method;e.addEvent("lr.network.RequestEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.isEnabled,a=void 0===o?!0:o,c=e.requestSanitizer,l=void 0===c?function(e){return e}:c;if(!a)return null;var u=null;try{u=l(r)}catch(h){console.error(h)}if(u){var f=document.createElement("a");f.href=u.url;return{reqId:i,url:f.href,headers:(0,d["default"])(u.headers,function(e){return""+e}),body:n(u.body),method:s,referrer:u.referrer||void 0,mode:u.mode||void 0,credentials:u.credentials||void 0}}t[i]=!0;return null})},r=function(i,r){var s=r.method,o=r.status;e.addEvent("lr.network.ResponseEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.isEnabled,c=void 0===a?!0:a,l=e.responseSanitizer,u=void 0===l?function(e){return e}:l;if(!c)return null;if(t[i]){delete t[i];return null}var h=null;try{h=u(r)}catch(f){console.error(f)}return h?{reqId:i,status:h.status,headers:(0,d["default"])(h.headers,function(e){return""+e}),body:n(h.body),method:s}:{reqId:i,status:o,headers:{},body:null,method:s}})},o=(0,a["default"])({addRequest:i,addResponse:r}),c=(0,l["default"])({addRequest:i,addResponse:r});return function(){o();c()}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=r;var o=n(14),a=i(o),c=n(1),l=i(c),u=n(0),d=i(u)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(null==e||"function"!=typeof e.forEach)return e;var t={};e.forEach(function(e,n){t[n]?t[n]=t[n]+","+e:t[n]=""+e});return t}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:e.url,headers:h(e.headers),method:e.method&&e.method.toUpperCase(),referrer:e.referrer||void 0,mode:e.mode||void 0,credentials:e.credentials||void 0}}function o(e){var t=e.addRequest,n=e.addResponse,i="fetch-",r={},o=d["default"].register({request:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),c=1;n>c;c++)o[c-1]=arguments[c];var l=void 0;l="undefined"!=typeof Request&&o[0]instanceof Request?o[0].clone().text().then(function(e){return a({},s(o[0]),{body:e})}):Promise.resolve(a({},s(o[1]),{url:""+o[0],body:(o[1]||{}).body}));return l.then(function(n){r[e]=n.method;t(""+i+e,n);return o})},requestError:function(e,t){return Promise.reject(t)},response:function(e,t){var s=void 0;try{s=t.clone().text()}catch(o){s=Promise.resolve("LogRocket fetch error: "+o.message)}return s.then(function(s){var o={url:t.url,status:t.status,headers:h(t.headers),body:s,method:r[e]};delete r[e];n(""+i+e,o);return t})},responseError:function(e,t){var r={url:void 0,status:0,headers:{},body:""+t};n(""+i+e,r);return Promise.reject(t)}});return o}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t["default"]=o;var c=n(0),l=i(c),u=n(15),d=i(u),h=function(e){return(0,l["default"])(r(e),function(e){return""+e})}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),s=2;n>s;s++)r[s-2]=arguments[s];var c=a.reduce(function(e,t){return[t].concat(e)},[]),l=Promise.resolve(r);c.forEach(function(e){var n=e.request,r=e.requestError;(n||r)&&(l=l.then(function(e){return n.apply(void 0,[t].concat(i(e)))},function(e){return r.apply(void 0,[t].concat(i(e)))}))});l=l.then(function(t){(0,o.setActive)(!1);var n=void 0,r=void 0;try{n=e.apply(void 0,i(t))}catch(s){r=s}(0,o.setActive)(!0);if(r)throw r;return n});c.forEach(function(e){var n=e.response,i=e.responseError;(n||i)&&(l=l.then(function(e){return n(t,e)},function(e){return i&&i(t,e)}))});return l}function s(e){if(e.fetch&&e.Promise){var t=e.fetch.polyfill;e.fetch=function(e){var t=0;return function(){for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];return r.apply(void 0,[e,t++].concat(i))}}(e.fetch);t&&(e.fetch.polyfill=t)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=[],c=!1;t["default"]={register:function(e){if(!c){c=!0;s(window)}a.push(e);return function(){var t=a.indexOf(e);t>=0&&a.splice(t,1)}},clear:function(){a=[]}}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t["default"]=e;return t}function r(e){return e&&e.__esModule?e:{"default":e}}function s(e){var t=new a["default"]({captureException:function(t){l.captureException(e,null,null,t)}}),n=function(t){e.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:t.reason||"Unhandled Promise rejection"}})};window.addEventListener("unhandledrejection",n);return function(){window.removeEventListener("unhandledrejection",n);t.uninstall()}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=s;var o=n(17),a=r(o),c=n(6),l=i(c)},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return void 0===e}function o(e){return"function"==typeof e}function a(e,t){return h.hasOwnProperty.call(e,t)}function c(e,t,n,i){var r=e[t];e[t]=n(r);i&&i.push([e,t,r])}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(e,i.key,i)}}return function(t,n,i){n&&e(t.prototype,n);i&&e(t,i);return t}}(),u=n(5),d=i(u),h=Object.prototype,f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},g=(f.document,function(){function e(t){var n=t.captureException;r(this,e);this._errorHandler=this._errorHandler.bind(this);this._ignoreOnError=0;this._wrappedBuiltIns=[];this.captureException=n;d["default"].report.subscribe(this._errorHandler);this._instrumentTryCatch()}l(e,[{key:"uninstall",value:function(){d["default"].report.unsubscribe(this._errorHandler);for(var e;this._wrappedBuiltIns.length;){e=this._wrappedBuiltIns.shift();var t=e[0],n=e[1],i=e[2];t[n]=i}}},{key:"_errorHandler",value:function(e){this._ignoreOnError||this.captureException(e)}},{key:"_ignoreNextOnError",value:function(){var e=this;this._ignoreOnError+=1;setTimeout(function(){e._ignoreOnError-=1})}},{key:"context",value:function(e,t,n){if(o(e)){n=t||[];t=e;e=void 0}return this.wrap(e,t).apply(this,n)}},{key:"wrap",value:function(e,t,n){function i(){var i=[],s=arguments.length,a=!e||e&&e.deep!==!1;n&&o(n)&&n.apply(this,arguments);for(;s--;)i[s]=a?r.wrap(e,arguments[s]):arguments[s];try{return t.apply(this,i)}catch(c){r._ignoreNextOnError();r.captureException(d["default"].computeStackTrace(c),e);throw c}}var r=this;if(s(t)&&!o(e))return e;if(o(e)){t=e;e=void 0}if(!o(t))return t;try{if(t.__lr__)return t;if(t.__lr_wrapper__)return t.__lr_wrapper__}catch(c){return t}for(var l in t)a(t,l)&&(i[l]=t[l]);i.prototype=t.prototype;t.__lr_wrapper__=i;i.__lr__=!0;i.__inner__=t;return i}},{key:"_instrumentTryCatch",value:function(){function e(e){return function(t,i){for(var r=new Array(arguments.length),s=0;s<r.length;++s)r[s]=arguments[s];var a=r[0];o(a)&&(r[0]=n.wrap(a));return e.apply?e.apply(this,r):e(r[0],r[1])}}function t(e){var t=f[e]&&f[e].prototype;if(t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")){c(t,"addEventListener",function(e){return function(t,i,r,s){try{i&&i.handleEvent&&(i.handleEvent=n.wrap(i.handleEvent))}catch(o){}var a;return e.call(this,t,n.wrap(i,void 0,a),r,s)}},i);c(t,"removeEventListener",function(e){return function(t,n,i,r){try{n=n&&(n.__lr_wrapper__?n.__lr_wrapper__:n)}catch(s){}return e.call(this,t,n,i,r)}},i)}}var n=this,i=n._wrappedBuiltIns;c(f,"setTimeout",e,i);c(f,"setInterval",e,i);f.requestAnimationFrame&&c(f,"requestAnimationFrame",function(e){return function(t){return e(n.wrap(t))}},i);for(var r=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],s=0;s<r.length;s++)t(r[s]);var a=f.jQuery||f.$;a&&a.fn&&a.fn.ready&&c(a.fn,"ready",function(e){return function(t){return e.call(this,n.wrap(t))}},i)}}]);return e}());t["default"]=g}).call(this,n(4))},function(e,t,n){"use strict";function i(e){function t(e){return null===e?void 0:e}return e.stack?e.stack.map(function(e){return{lineNumber:t(e.line),columnNumber:t(e.column),fileName:t(e.url),functionName:t(e.func)}}):void 0}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),s=i(r);t["default"]=s["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=[],n=["log","warn","info","error","debug"];n.forEach(function(n){t.push((0,a["default"])(console,n,function(){for(var t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];e.addEvent("lr.core.LogEvent",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.isEnabled;if("object"===("undefined"==typeof r?"undefined":s(r))&&r[n]===!1||r===!1)return null;"error"===n&&t.shouldAggregateConsoleErrors&&c.Capture.captureMessage(e,i[0],{},!0);return{logLevel:n.toUpperCase(),args:i}})}))});return function(){t.forEach(function(e){return e()})}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=r;var o=n(2),a=i(o),c=n(3)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});t.createEnhancer=t.createMiddleware=void 0;var r=n(22),s=i(r),o=n(23),a=i(o);t.createMiddleware=a["default"];t.createEnhancer=s["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.stateSanitizer,i=void 0===n?function(e){return e}:n,r=t.actionSanitizer,o=void 0===r?function(e){return e}:r;return function(t){return function(n,r,l){var u=t(n,r,l),d=u.dispatch,h=c++;e.addEvent("lr.redux.InitialState",function(){var e=void 0;try{e=i(u.getState())}catch(t){console.error(t.toString())}return{state:e,storeId:h}});var f=function(t){var n=(0,a["default"])(),r=void 0,s=void 0;try{s=d(t)}catch(c){r=c}finally{var l=(0,a["default"])()-n;e.addEvent("lr.redux.ReduxAction",function(){var e=null,n=null;try{e=i(u.getState());n=o(t)}catch(r){console.error(r.toString())}return e&&n?{storeId:h,action:n,duration:l,stateDelta:e}:null})}if(r)throw r;return s};return s({},u,{dispatch:f})}}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t["default"]=r;var o=n(7),a=i(o),c=0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.stateSanitizer,i=void 0===n?function(e){return e}:n,r=t.actionSanitizer,s=void 0===r?function(e){return e}:r;return function(t){var n=a++;e.addEvent("lr.redux.InitialState",function(){var e=void 0;try{e=i(t.getState())}catch(r){console.error(r.toString())}return{state:e,storeId:n}});return function(r){return function(a){var c=(0,o["default"])(),l=void 0,u=void 0;try{u=r(a)}catch(d){l=d}finally{var h=(0,o["default"])()-c;e.addEvent("lr.redux.ReduxAction",function(){var e=null,r=null;try{e=i(t.getState());r=s(a)}catch(o){console.error(o.toString())}return e&&r?{storeId:n,action:r,duration:h,stateDelta:e}:null})}if(l)throw l;return u}}}}Object.defineProperty(t,"__esModule",{value:!0});t["default"]=r;var s=n(7),o=i(s),a=0}])})},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s){r(this,e);this.$q=t;this._cacheService=n;this._assignmentWorkService=i;this._csvService=s}e.$inject=["$q","CacheService","AssignmentWorkService","CsvService"];i(e,[{key:"byAssignment",value:function(e,t,n){var i=this,r=this.$q.defer(),s=this._filterByIds(e,t),o=s.map(function(e){return i.$q.all({members:i._cacheService.getRosterUsers(e.id,!0),roster:e})});this.$q.all({userRosterMaps:this.$q.all(o),works:this._assignmentWorkService.getAllForAssignment(n)}).then(function(e){var t=e.userRosterMaps,s=e.works;i._csvService.exportGradesByAssignment(n,t,s);r.resolve()})["catch"](function(e){r.reject(e)});return r.promise}},{key:"_filterByIds",value:function(e,t){return e.filter(function(e){return t.some(function(t){return t===e.id})})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(508),a=s(o),c=function(){function e(t,n,i,s,o,c){r(this,e);this.$window=t;this.$location=n;this.$log=i;this.$http=s;this._environment=o;this._platformHeaderService=c;this._cleverInfoCodec=new a["default"]}e.$inject=["$window","$location","$log","$http","environment","PlatformHeaderService"];i(e,[{key:"linkToCleverAuth",value:function(e){try{this.$window.location.href=this._cleverAuthUrl(e)}catch(t){this.$log.error(t)}}},{key:"getInfo",value:function(e){var t=this,n=this._environment.serverUrlBase+"/v1/clever/"+e,i=this._platformHeaderService.addHeaders(n,{});return this.$http.get(n,i).then(function(e){return t._cleverInfoCodec.decode(e.data)})}},{key:"_cleverAuthUrl",value:function(e){var t=this._environment.clever.clientId,n=angular.toJson({classCode:e,redirectUri:this.redirectUri}),i="?response_type=code&client_id="+t+"&redirect_uri="+this.redirectUri+"&state="+n;return"https://clever.com/oauth/authorize"+i}},{key:"goToLogin",value:function(){try{this.$window.location.href="https://clever.com/login"}catch(e){this.$log.error(e)}}},{key:"redirectUri",get:function(){return this._environment.serverUrlBase+"/v1/clever/auth"}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(509),d=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}r(t,e);s(t,[{key:"encode",value:function(e){}},{key:"decode",value:function(e){return e?new u.CleverInfo(e.access_token,e.email,e.clever_username,e.first_name,e.last_name,e.user_type,e.exists):null}}]);return t}(l["default"]);t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a,c){r(this,e);this._accessToken=t;this._email=n;this._cleverUsername=i;this._firstName=s;this._lastName=o;this._userType=a;this._exists=c}i(e,[{key:"accessToken",get:function(){return this._accessToken}},{key:"email",get:function(){return this._email}},{key:"cleverUsername",get:function(){return this._cleverUsername}},{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"userType",get:function(){return this._userType}},{key:"exists",get:function(){return this._exists}}]);return e}();t.CleverInfo=s},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s){r(this,e);this.$q=t;this._cacheService=n;this._assignmentWorkService=i;this._csvService=s}e.$inject=["$q","CacheService","AssignmentWorkService","CsvService"];i(e,[{key:"byAssignment",value:function(e,t,n){var i=this,r=this._filterByIds(e,t),s=r.map(function(e){return i.$q.all({members:i._cacheService.getRosterUsers(e.id,!0),roster:e})});return this.$q.all({userRosterMaps:this.$q.all(s),works:this._assignmentWorkService.getAllForAssignment(n)}).then(function(e){var t=e.userRosterMaps,r=e.works;return i._csvService.exportAnswersByAssignment(n,t,r)})}},{key:"_filterByIds",value:function(e,t){return e.filter(function(e){return t.some(function(t){return t===e.id})})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(512),a=s(o),c=function(){function e(t,n){r(this,e);this._firebaseService=t;this._authService=n;this._userSlideBackgroundCodec=new a["default"]}e.$inject=["FirebaseService","AuthService"];i(e,[{key:"getStockUrls",value:function(){var e=this;return this._firebaseService.ref("slide_backgrounds/"+this.StockSlideBackgroundIdentifier,this._firebaseService.DefaultInstanceId).$once("value").then(function(t){return t.exists()?e._formatUserSlideBackgrounds(t.val()):[]})}},{key:"getCustomUrls",value:function(){var e=this;return this._firebaseService.ref("slide_backgrounds/"+this._authService.currentUserId,this._firebaseService.DefaultInstanceId).$once("value").then(function(t){return t.exists()?e._formatUserSlideBackgrounds(t.val()):[]})}},{key:"_formatUserSlideBackgrounds",value:function(e){var t=this,n=[];angular.forEach(e,function(e,i){n.push(t._userSlideBackgroundCodec.decode(e,i))});return n}},{key:"setCustomUrl",value:function(e){return this._firebaseService.ref("slide_backgrounds/"+this._authService.currentUserId+"/"+e.id,this._firebaseService.DefaultInstanceId).update(this._userSlideBackgroundCodec.encode(e))}},{key:"deleteCustomUrl",value:function(e){return this._firebaseService.ref("slide_backgrounds/"+this._authService.currentUserId+"/"+e,this._firebaseService.DefaultInstanceId).remove();
}},{key:"StockSlideBackgroundIdentifier",get:function(){return"stock_slide_background_identifier"}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(275),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{id:e.id,type:e.type,url:e.url}}},{key:"decode",value:function(e,t){return new d["default"](t,e.type,e.url)}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a){r(this,e);this.$window=t;this.$rootScope=n;this.$transitions=i;this.$log=s;this.$location=o;this._environment=a;this._initialized=!1}e.$inject=["$window","$rootScope","$transitions","$log","$location","environment"];i(e,[{key:"init",value:function(){var e=this;if(!this._initialized){if(this.$window.ga&&this._environment.googleAnalyticsIds){var t=this.$window.location.hostname,n=this._environment.googleAnalyticsIds[t];if(n){this.$window.ga("create",n,"auto");var i=this.$transitions.onSuccess({},function(){e.$window.ga("send","pageview",{page:e.$location.path()})});this.$rootScope.$on("$destroy",i);this.$log.debug("google analytics configured")}}this._initialized=!0}}},{key:"sendException",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this._initialized&&this.$window.ga&&this._environment.googleAnalyticsIds&&this.$window.ga("send","exception",{exDescription:e,exFatal:t})}},{key:"formatExceptionDescriptionError",value:function(e){return e?angular.toJson(e):"no description"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(515),a=s(o),c=n(518),l=(s(c),function(){function e(t,n){r(this,e);this._firebaseService=t;this._notificationShardKeyFactory=n}e.$inject=["FirebaseService","NotificationShardKeyFactory"];i(e,[{key:"getQuestionFeedbackList",value:function(e,t){var n=this._notificationShardKeyFactory.forQuestionFeedbackList(e,t);return new a["default"](n,e,t,this._firebaseService)}},{key:"give",value:function(e,t,n,i,r){var s=this._notificationShardKeyFactory.forQuestionFeedbackList(e,t),o=this._firebaseService.firebaseNotificationInstanceIdForShardKey(s);this._firebaseService.ref("/notifications/v3/users/"+e+"/feedbacks/receivers/works/"+t.id+"/questions/"+n+"/givers/"+i,o).update({t:moment().toISOString(),n:r})}},{key:"view",value:function(e,t,n){var i=this._notificationShardKeyFactory.forQuestionFeedbackList(e,t),r=this._firebaseService.firebaseNotificationInstanceIdForShardKey(i);this._firebaseService.ref("/notifications/v3/users/"+e+"/feedbacks/receivers/works/"+t.id+"/questions/"+n,r).remove()}}]);return e}());t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(172)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(194),u=c(l),d=n(196),h=c(d),f=n(411),g=c(f),p=n(409),m=c(p),v=n(516),_=c(v),y=n(517),k=c(y),b=n(117),S=c(b),w=n(200),C=(c(w),n(147)),E=c(C),T=new h["default"]("/notifications/v3/users/{receiverId}/feedbacks/receivers/works/{assignmentWorkId}",{questions:new g["default"]("/questions",function(e){return e._listen},function(e){return e.feedbacks},new _["default"])}),I=function(e){function t(e){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._feedbackList=e}r(t,e);s(t,[{key:"onAdded",value:function(e){this._feedbackList.handleUpdate(e)}},{key:"onRemoved",value:function(e){this._feedbackList.handleUpdate(e)}},{key:"onChanged",value:function(e){this._feedbackList.handleUpdate(e)}}]);return t}(S["default"]),A=function(e){function t(e,n,r,s){var c=arguments.length<=4||void 0===arguments[4]?!0:arguments[4];o(this,t);var l=s.firebaseNotificationInstanceIdForShardKey(e),u="QuestionFeedbackList[instance="+l+", "+e+"]";i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(new a).set("receiverId",n).set("assignmentWorkId",r.id),T,l,s,c,void 0,u);this._assignmentWork=r;this._updated=new E["default"](this);this._feedbacks=new m["default"](k["default"].merge);this._feedbacks.subscribe(new I(this));this._logTrace("cstr complete")}r(t,e);s(t,[{key:"handleUpdate",value:function(e){this._logTrace("handleUpdate questionId="+e.questionId);this._assignmentWork.questionForId(e.questionId)&&this.updated.raise(e)}},{key:"updated",get:function(){return this._updated}},{key:"feedbacks",get:function(){return this._feedbacks}},{key:"validFeedbacks",get:function(){var e=this;return this._feedbacks.filter(function(t){return!!e._assignmentWork.questionForId(t.questionId)})}},{key:"feedbackCount",get:function(){return this.validFeedbacks.length}}]);return t}(u["default"]);t["default"]=A;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(517),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){}},{key:"decode",value:function(e,t){return e?new d["default"](t,e.givers,e.t):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(365),o=function(){function e(t,n){r(this,e);this._questionId=t;this._givers=n}i(e,[{key:"mapGivers",value:function(e){var t=[];angular.forEach(this._givers,function(n){t.push(e(n))});return t}},{key:"merge",value:function(e){this._givers=e.givers;this._giverNames=void 0;this._mostRecent=void 0}},{key:"id",get:function(){return this._questionId}},{key:"questionId",get:function(){return this._questionId}},{key:"givers",get:function(){return this._givers}},{key:"giverTimes",get:function(){return this.mapGivers(function(e){return moment(e.t)})}},{key:"giverNames",get:function(){this._giverNames||(this._giverNames=this.mapGivers(function(e){return e.n}));return this._giverNames}},{key:"mostRecent",get:function(){this._mostRecent||(this._mostRecent=this.giverTimes.sort(function(e,t){return e.isBefore(t)?1:-1})[0]);return this._mostRecent}},{key:"mostRecentDisplay",get:function(){return this.mostRecent?moment().to(this.mostRecent):void 0}},{key:"formatNames",get:function(){return this.giverNames?s.Helpers.formatHelpersList(this.giverNames):void 0}}],[{key:"merge",value:function(e,t){e.merge(t)}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(200),a=s(o),c=function(){function e(t){"ngInject";r(this,e);this._firebaseService=t}e.$inject=["FirebaseService"];i(e,[{key:"forAssignment",value:function(e){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("assignmentOwnerId",e.ownerId):new a["default"]("assignmentId",e.id)}},{key:"forAssignmentWork",value:function(e){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("assignmentOwnerId",e.assignment.ownerId):new a["default"]("assignmentId",e.assignment.id)}},{key:"forAssignmentRoster",value:function(e){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("assignmentOwnerId",e.ownerId):new a["default"]("assignmentId",e.id)}},{key:"forAccount",value:function(e){return new a["default"]("userId",e)}},{key:"forUserRoster",value:function(e){return new a["default"]("userId",e)}},{key:"forRoster",value:function(e){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("rosterOwnerId",e.ownerId):new a["default"]("rosterId",e.id)}},{key:"forUserNewMessage",value:function(e){return new a["default"]("userId",e)}},{key:"forUserStatus",value:function(e){return new a["default"]("userId",e)}},{key:"forQuestionFeedbackList",value:function(e,t){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("assignmentOwnerId",t.assignment.ownerId):new a["default"]("receiverId",e)}},{key:"forHelpRequestForAssignment",value:function(e,t){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("assignmentOwnerId",e):new a["default"]("assignmentId",t)}},{key:"forHelpRequestForRoster",value:function(e,t){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("rosterOwnerId",e):new a["default"]("rosterId",t)}},{key:"forHelpRequestForPeers",value:function(e,t){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("assignmentOwnerId",e):new a["default"]("assignmentId",t)}},{key:"forQuestionHelpers",value:function(e,t){return this._firebaseService.getReduceNotificationShardConnections()?new a["default"]("assignmentOwnerId",e.ownerId):new a["default"]("helpeeId",t)}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(520),a=s(o),c=n(424),l=s(c),u=n(521),d=s(u),h=function(){function e(t,n){r(this,e);this._httpService=t;this._environment=n;this._organizationCodec=new a["default"];this._userCodec=new l["default"];this._organizationOverviewCodec=new d["default"]}e.$inject=["HttpService","environment"];i(e,[{key:"getAll",value:function(){var e=this;return this._httpService.authGet(this._uri("/v1/organizations")).then(function(t){return t.organizations.map(function(t){return e._organizationCodec.decode(t)})})}},{key:"get",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/organizations/"+e)).then(function(e){return t._organizationCodec.decode(e)})}},{key:"create",value:function(e,t,n,i,r,s,o,a,c){var l=this;return this._httpService.authPost(this._uri("/v1/organizations"),{org_type:e,name:t,lat:n,lng:i,properties:{zip:r,city:s,state:o,country:a,user_defined_org_type:c}}).then(function(e){return l._organizationCodec.decode(e)})}},{key:"update",value:function(e){return this._httpService.put(this._uri("/v1/organizations/"+e.id),this._organizationCodec.encode(e))}},{key:"addSelf",value:function(e){return this._httpService.authPost(this._uri("/v1/organizations/"+e+"/users/self"),{}).then(function(e){return e.token})}},{key:"verifyMember",value:function(e,t,n){return this._httpService.authPost(this._uri("/v1/organizations/"+e+"/users/"+t+"/verify"),n)}},{key:"removeMember",value:function(e,t){return this._httpService.authDelete(this._uri("/v1/organizations/"+e+"/users/"+t))}},{key:"removeSelf",value:function(e){return this._httpService.authDelete(this._uri("/v1/organizations/"+e+"/users/self"))}},{key:"addAdmin",value:function(e,t,n,i){return this._httpService.authPost(this._uri("/v1/organizations/"+e+"/admins"),{name:t,email:n,role:i})}},{key:"search",value:function(e,t,n,i){var r=this;return this._httpService.get(this._uri("/v1/organizations/search?org_type="+e+"&lat="+t+"&lng="+n+"&query="+i)).then(function(e){return e.organizations.map(function(e){return r._organizationCodec.decode(e)})})}},{key:"getForUser",value:function(e){var t=this;return this._httpService.authGet(this._uri("/v1/users/"+e+"/organizations")).then(function(e){return e.organizations.map(function(e){return t._organizationCodec.decode(e)})})}},{key:"getUsers",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/organizations/"+e+"/users").then(function(e){return e.users.map(function(e){return t._userCodec.decode(e)})})}},{key:"getOverview",value:function(e){var t=this;return this._httpService.authGet(this._environment.serverUrlBase+"/v1/organizations/"+e+"/overview").then(function(e){return t._organizationOverviewCodec.decode(e)})}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(357),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{id:e.id,org_type:e.type,name:e.name,lat:e.lat,lng:e.lng,contract_id:e.contractId,properties:e.properties,member_ids:e.members,unverified_member_ids:e.unverifiedMembers}}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.org_type,e.name,e.lat,e.lng,e.contract_id,e.properties,e.member_ids,e.unverified_member_ids):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(522),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{organization_id:e.organizationId,assignment_count:e.assignmentCount,assignment_work_count:e.assignmentWorkCount,student_count:e.studentCount,teacher_count:e.teacherCount}}},{key:"decode",value:function(e){return e?new d["default"](e.organization_id,e.assignment_count,e.assignment_work_count,e.student_count,e.teacher_count):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o){r(this,e);this._organizationId=t;this._assignmentCount=n;this._assignmentWorkCount=i;this._studentCount=s;this._teacherCount=o}i(e,[{key:"organizationId",get:function(){return this._organizationId}},{key:"assignmentCount",get:function(){return this._assignmentCount}},{key:"assignmentWorkCount",get:function(){return this._assignmentWorkCount}},{key:"studentCount",get:function(){return this._studentCount}},{key:"teacherCount",get:function(){return this._teacherCount}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(211),a=s(o),c=function(){function e(t,n){r(this,e);this._httpService=t;this._environment=n;this._coordinates=new a["default"]}e.$inject=["HttpService","environment"];i(e,[{key:"getLocation",value:function(){var e=this;return this._coordinates.value(function(){return e._httpService.get("https://api.ipstack.com/check?access_key="+e._environment.ipstack).then(function(e){return{lat:e.latitude,lng:e.longitude}})})}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(133)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(211),l=a(c),u=function(){function e(){r(this,e)}i(e,null,[{key:"INVALID_REQUEST",get:function(){return"INVALID_REQUEST"}},{key:"NOT_FOUND",get:function(){return"NOT_FOUND"}},{key:"OK",get:function(){return"OK"}},{key:"OVER_QUERY_LIMIT",get:function(){return"OVER_QUERY_LIMIT"}},{key:"REQUEST_DENIED",get:function(){return"REQUEST_DENIED"}},{key:"UNKNOWN_ERROR",get:function(){return"UNKNOWN_ERROR"}},{key:"ZERO_RESULTS",get:function(){return"ZERO_RESULTS"}}]);return e}(),d=function(){function e(t,n,i,s){r(this,e);this.$q=t;this.$log=n;this.$document=i;this._environment=s;this._load=new l["default"];this._places=new l["default"];this._autocomplete=new l["default"];this._sessionToken=new l["default"]}e.$inject=["$q","$log","$document","environment"];i(e,[{key:"getPlaceDetails",value:function(e){var t=this;return this.$q.all({service:this.places,sessionToken:this.sessionToken}).then(function(n){var i=n.service,r=n.sessionToken,s=t.$q.defer();i.getDetails({placeId:e,sessionToken:r,fields:["address_component","geometry","name","place_id","types"]},t._logResponseStatus(function(e){return s.resolve(e)}));return s.promise}).then(function(n){t._sessionToken.clear();return f.decode(e,n)})}},{key:"searchNearby",value:function(e,t,n,i){var r=this;return this.places.then(function(i){var s=r.$q.defer();i.nearbySearch({keyword:e,name:"school",type:"school",bounds:{east:t.lng+n,west:t.lng-n,north:t.lat+n,south:t.lat-n}},r._logResponseStatus(function(e){return s.resolve(e)}));return s.promise}).then(function(e){return e.map(function(e){return f.decode(e.place_id,e)}).filter(function(e){return!e.name.match(i)})})}},{key:"getPredictions",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.$q.all({service:this.autocomplete,sessionToken:this.sessionToken}).then(function(i){var r=i.service,o=i.sessionToken,a=t.$q.defer();r.getPlacePredictions(s({input:e,sessionToken:o,types:["(cities)"]},n),t._logResponseStatus(function(e){return a.resolve(e||[])}));return a.promise}).then(function(e){return e.map(function(e){return h.decode(e)})})}},{key:"_logResponseStatus",value:function(e){var t=this;return function(n,i){if(i===u.OVER_QUERY_LIMIT||i===u.INVALID_REQUEST||i===u.REQUEST_DENIED||i===u.UNKNOWN_ERROR){t.$log.error("Google Places API responded with the following status: "+i);e([])}else e(n)}}},{key:"_loadScript",value:function(e){var t=this;return new o(function(n,i){var r=t.$document[0].createElement("script");r.setAttribute("src",e);r.onload=function(){return n()};r.onerror=function(){return i()};var s=angular.element("body");s[0]?s[0].appendChild(r):i()})}},{key:"load",get:function(){var e=this;return this._load.value(function(){return e._loadScript("https://maps.googleapis.com/maps/api/js?key="+e._environment.google.auth.apiKey+"&libraries=places")["catch"](function(t){e.$log.error(t);e._load.clear()})})}},{key:"places",get:function(){var e=this;return this._places.value(function(){return e.load.then(function(){var e=angular.element("<div>test</div>")[0],t=new google.maps.Map(e);return new google.maps.places.PlacesService(t)})})}},{key:"autocomplete",get:function(){var e=this;return this._autocomplete.value(function(){return e.load.then(function(){return new google.maps.places.AutocompleteService})})}},{key:"sessionToken",get:function(){var e=this;return this._sessionToken.value(function(){return e.load.then(function(){return new google.maps.places.AutocompleteSessionToken})})}}]);return e}();t["default"]=d;var h=function(){function e(t,n){r(this,e);this._placeId=t;this._description=n}i(e,[{key:"placeId",get:function(){return this._placeId}},{key:"description",get:function(){return this._description}}],[{key:"decode",value:function(t){return new e(t.place_id,t.description)}}]);return e}(),f=function(){function e(t,n,i,s,o,a,c,l,u,d){r(this,e);this._id=t;this._name=n;this._lat=i;this._lng=s;this._street=o;this._zip=a;this._city=c;this._state=l;this._country=u;this._vicinity=d}i(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"lat",get:function(){return this._lat}},{key:"lng",get:function(){return this._lng}},{key:"street",get:function(){return this._street}},{key:"zip",get:function(){return this._zip}},{key:"city",get:function(){return this._city}},{key:"state",get:function(){return this._state}},{key:"country",get:function(){return this._country}},{key:"vicinity",get:function(){return this._vicinity}}],[{key:"decode",value:function(t,n){return new e(t,n.name,n.geometry.location.lat(),n.geometry.location.lng(),e.extractAddressComponent(n.address_components,e.StreetNumber)+" "+e.extractAddressComponent(n.address_components,e.Route),e.extractAddressComponent(n.address_components,e.PostalCode),e.extractAddressComponent(n.address_components,e.Locality),e.extractAddressComponent(n.address_components,e.AdministrativeAreaLevel1),e.extractAddressComponent(n.address_components,e.Country),n.vicinity)}},{key:"extractAddressComponent",value:function(e,t){if(angular.isDefined(e)){var n=e.find(function(e){return e.types.some(function(e){return e===t})});return n&&n.short_name}}},{key:"StreetAddress",get:function(){return"street_address"}},{key:"StreetNumber",get:function(){return"street_number"}},{key:"Route",get:function(){return"route"}},{key:"PostalCode",get:function(){return"postal_code"}},{key:"Locality",get:function(){return"locality"}},{key:"AdministrativeAreaLevel1",get:function(){return"administrative_area_level_1"}},{key:"Country",get:function(){return"country"}}]);return e}();t.GooglePlace=f},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(526),c=o(a),l=n(528),u=o(l),d=n(530),h=o(d),f=n(532),g=o(f),p=n(211),m=o(p),v=function(){function e(t,n,i){r(this,e);this.$q=t;this._httpService=n;this._environment=i;this._orderCodec=new c["default"];this._orderPlanCodec=new u["default"];this._orderCouponCodec=new h["default"];this._orderPriceCodec=new g["default"];this._orderDetails=new m["default"]}e.$inject=["$q","HttpService","environment"];i(e,[{key:"get",value:function(e){return this.$q.all({order:this._get(e),details:this.getDetails()}).then(function(e){var t=e.order,n=e.details;t.activePlans=n.plans;t.activeCoupons=n.coupons;return t})}},{key:"_get",value:function(e){var t=this;return this._httpService.get(this._uri("/v1/orders/"+e)).then(function(e){return t._orderCodec.decode(e)})}},{key:"create",value:function(e,t,n,i,r,s,o,a,c,l){return this.$q.all({order:this._create(e,t,n,i,r,s,o,a,c,l),details:this.getDetails()}).then(function(e){var t=e.order,n=e.details;t.activePlans=n.plans;t.activeCoupons=n.coupons;return t})}},{key:"_create",value:function(e,t,n,i,r,s,o,a,c,l){var u=this;return this._httpService.post(this._uri("/v1/orders"),{organization_id:e,plan:t,start:n.toISOString(),end:i.toISOString(),renewal:r,quantity:s,coupons:o,creator_id:a,creator_name:c,creator_email:l}).then(function(e){return u._orderCodec.decode(e)})}},{key:"update",value:function(e){return this._httpService.put(this._uri("/v1/orders/"+e.id),this._orderCodec.encode(e))}},{key:"cancel",value:function(e){return this._httpService.post(this._uri("/v1/orders/"+e+"/cancel"),{})}},{key:"share",value:function(e,t,n,i,r){return this._httpService.post(this._uri("/v1/orders/"+e+"/email"),{from:t,to:n,subject:i,body:r})}},{key:"submit",value:function(e,t){return this._httpService.post(this._uri("/v1/orders/"+e.id+"/submit"),s({},this._orderCodec.encode(e),{stripe_token:t}))}},{key:"getForOrganization",value:function(e){return this.$q.all({orders:this._getForOrganization(e),details:this.getDetails()}).then(function(e){var t=e.orders,n=e.details;return t.map(function(e){e.activePlans=n.plans;e.activeCoupons=n.coupons;return e})})}},{key:"_getForOrganization",value:function(e){var t=this;return this._httpService.get(this._uri("/v1/organizations/"+e+"/orders")).then(function(e){return e.orders.map(function(e){return t._orderCodec.decode(e)})})}},{key:"getDetails",value:function(e){var t=this;e&&this._orderDetails.clear();return this._orderDetails.value(function(){return t._getDetails()["catch"](function(e){t._orderDetails.clear();throw e})})}},{key:"_getDetails",value:function(){var e=this;return this._httpService.get(this._uri("/v1/orders/details")).then(function(t){return{plans:t.plans.map(function(t){return e._orderPlanCodec.decode(t)}),coupons:t.coupons.map(function(t){return e._orderCouponCodec.decode(t)})}})}},{key:"getPrices",value:function(e,t,n,i){var r=this;return this._httpService.get(this._uri("/v1/orders/prices?org_type="+e+"&renewal="+t+"&virtual="+n+"&date="+i.toISOString())).then(function(e){return e.prices.map(function(e){return r._orderPriceCodec.decode(e)})})}},{key:"getCouponIds",value:function(e,t,n,i,r,s,o){return this._httpService.get(this._uri("/v1/orders/coupons?org_type="+e+"&renewal="+t+"&financial_aid="+n+"&virtual="+i+"&start="+r.toISOString()+"&end="+s.toISOString()+"&date="+o.toISOString())).then(function(e){return e.coupons})}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(527),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{id:e.id,quote:e.quote,organization_id:e.organizationId,plan:e.planId,start:e.start&&e.start.toISOString(),end:e.end&&e.end.toISOString(),renewal:e.renewal,financial_aid:e.financialAid,quantity:e.quantity,coupons:e.couponIds,status:e.status,creator_id:e.creatorId,creator_name:e.creatorName,creator_email:e.creatorEmail,created:e.created&&e.created.toISOString(),expires:e.expires&&e.expires.toISOString(),billing_name:e.billingName,billing_email:e.billingEmail,billing_phone:e.billingPhone,point_email:e.pointEmail,point_id:e.pointId,purchase_order:e.purchaseOrder}}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.quote,e.organization_id,e.plan,e.start,e.end,e.renewal,e.financial_aid,e.quantity,e.coupons,e.status,e.creator_id,e.creator_name,e.creator_email,e.created,e.expires,e.billing_name,e.billing_email,e.billing_phone,e.point_email,e.point_id,e.purchase_order):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(300),o=function(){function e(){r(this,e)}i(e,null,[{key:"Created",get:function(){return"created"}},{key:"Invoiced",get:function(){return"invoiced"}},{key:"Paid",get:function(){return"paid"}},{key:"PastDue",get:function(){return"past_due"}},{key:"Canceled",get:function(){return"canceled"}}]);return e}();t.OrderStatus=o;var a=function(){function e(t,n,i,s,o,a,c,l,u,d,h,f,g,p,m,v,_,y,k,b,S,w){r(this,e);this._id=t;this._quote=n;this._organizationId=i;this._planId=s;this._start=o?moment(o):void 0;this._end=a?moment(a):void 0;this._renewal=c;this._financialAid=l;this._quantity=u;this._couponIds=d;this._status=h;this._creatorId=f;this._creatorName=g;this._creatorEmail=p;this._created=m?moment(m):void 0;this._expires=v?moment(v):void 0;this._billingName=_;this._billingEmail=y;this._billingPhone=k;this._pointEmail=b;this._pointId=S;this._purchaseOrder=w}i(e,[{key:"id",get:function(){return this._id}},{key:"quote",get:function(){return this._quote}},{key:"organizationId",get:function(){return this._organizationId}},{key:"planId",get:function(){return this._planId},set:function(e){this._planId=e}},{key:"plan",get:function(){var e=this;return this._activePlans&&this._activePlans.find(function(t){return t.id===e._planId})}},{key:"activePlans",set:function(e){this._activePlans=e}},{key:"start",get:function(){return this._start},set:function(e){this._start=e}},{key:"end",get:function(){return this._end},set:function(e){this._end=e}},{key:"duration",get:function(){return this.end.year()-this.start.year()}},{key:"renewal",get:function(){return this._renewal},set:function(e){this._renewal=e}},{key:"financialAid",get:function(){return this._financialAid},set:function(e){this._financialAid=e}},{key:"quantity",get:function(){return this._quantity}},{key:"couponIds",get:function(){return this._couponIds},set:function(e){this._couponIds=e}},{key:"coupons",get:function(){var e=this,t=this._couponIds.map(function(t){return e._activeCoupons.find(function(e){return t===e.id})}).filter(function(e){return!!e});return t}},{key:"activeCoupons",set:function(e){this._activeCoupons=e}},{key:"unitDiscount",get:function(){return this.coupons.reduce(function(e,t){"free-trial-for-v5-plans"!==t.id&&"free-trial-for-v6-plans"!==t.id&&(e+=t.discount);return e},0)}},{key:"totalDiscount",get:function(){return this.unitDiscount*this.quantity}},{key:"planPrice",get:function(){return this.plan&&this.plan.price}},{key:"unitPrice",get:function(){return this._couponIds.includes("free-trial-for-v5-plans")||this._couponIds.includes("free-trial-for-v6-plans")?this.planPrice*(this.duration-1):this.planPrice*this.duration}},{key:"totalPrice",get:function(){return this.unitPrice*this.quantity}},{key:"total",get:function(){return this.totalPrice-this.totalDiscount}},{key:"status",get:function(){return this._status}},{key:"creatorId",get:function(){return this._creatorId}},{key:"creatorName",get:function(){return this._creatorName}},{key:"creatorEmail",get:function(){return this._creatorEmail}},{key:"created",get:function(){return this._created}},{key:"createdAsDate",get:function(){return this.created.format("MM/DD/YYYY")}},{key:"expires",get:function(){return this._expires}},{key:"expiresAsDate",get:function(){return this.expires.format("MM/DD/YYYY")}},{key:"billingName",get:function(){return this._billingName},set:function(e){this._billingName=e}},{key:"billingEmail",get:function(){return this._billingEmail},set:function(e){this._billingEmail=e}},{key:"billingPhone",get:function(){return this._billingPhone}},{key:"pointEmail",get:function(){return this._pointEmail},set:function(e){this._pointEmail=e}},{key:"pointId",get:function(){return this._pointId}},{key:"purchaseOrder",get:function(){return this._purchaseOrder},set:function(e){this._purchaseOrder=e}}],[{key:"findActiveOrder",value:function(e){var t=moment();return e.find(function(e){return e.expires.isAfter(t)&&e.status===o.Created})}},{key:"findSubmittedOrder",value:function(t){var n=e.getSubmittedOrders(t)[0];return n?n.end>=moment(new Date(2021,6,30)):void 0}},{key:"getSubmittedOrders",value:function(e){return e.filter(function(e){return e.status===o.Paid||e.status===o.Invoiced||e.status===o.PastDue})}},{key:"hasAlreadyPurchasedThisYear",value:function(t){return e.getSubmittedOrders(t).some(function(e){return e.end>=Date.now()})}},{key:"hasSubmittedOrder",value:function(t){return!!e.findSubmittedOrder(t)}},{key:"getDefaultStart",value:function(){arguments.length<=0||void 0===arguments[0]?[]:arguments[0],arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return s.OrderPurchasePeriod.ThisYearStart}},{key:"getDefaultEnd",value:function(){var e=(arguments.length<=0||void 0===arguments[0]?[]:arguments[0],arguments.length<=1||void 0===arguments[1]?!1:arguments[1],s.OrderPurchasePeriod.ThisYearEnd);return s.OrderPurchasePeriod.forStage(e,e,s.OrderPurchasePeriod.NextYearEnd,moment())}}]);return e}();t["default"]=a},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(529),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(){}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.description,e.price,e.available):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"PrometheusV1",get:function(){return"prometheus-v1"}},{key:"PrometheusV3",get:function(){return"prometheus-v3"}},{key:"PrometheusV4",get:function(){return"prometheus-v4"}},{key:"PrometheusV5",get:function(){return"prometheus-v5"}},{key:"PrometheusV6",get:function(){return"prometheus-v6"}},{key:"PrometheusVirtualV1",get:function(){
return"prometheus-virtual-v1"}},{key:"PrometheusVirtualV3",get:function(){return"prometheus-virtual-v3"}},{key:"PrometheusVirtualV4",get:function(){return"prometheus-virtual-v4"}},{key:"PrometheusVirtualV5",get:function(){return"prometheus-virtual-v5"}},{key:"PrometheusVirtualV6",get:function(){return"prometheus-virtual-v6"}},{key:"Prometheus20192020V1",get:function(){return"prometheus-2019-2020-v1"}},{key:"Invincible20192020V1",get:function(){return"invincible-2019-2020-v1"}},{key:"InvincibleV1",get:function(){return"invincible-v1"}},{key:"InvincibleVirtualV1",get:function(){return"invincible-virtual-v1"}},{key:"InvincibleV3",get:function(){return"invincible-v3"}},{key:"InvincibleV4",get:function(){return"invincible-v4"}},{key:"InvincibleV5",get:function(){return"invincible-v5"}},{key:"InvincibleV6",get:function(){return"invincible-v6"}},{key:"InvincibleVirtualV3",get:function(){return"invincible-virtual-v3"}},{key:"InvincibleVirtualV4",get:function(){return"invincible-virtual-v4"}},{key:"InvincibleVirtualV5",get:function(){return"invincible-virtual-v5"}},{key:"InvincibleVirtualV6",get:function(){return"invincible-virtual-v6"}}]);return e}();t.OrderPlans=s;var o=function a(e,t,n,i){r(this,a);this.id=e;this.description=t;this.price=n;this.available=i};t["default"]=o},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(531),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(){}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.discount,e.description,e.available):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=function s(e,t,n,r){i(this,s);this.id=e;this.discount=t;this.description=n;this.available=r};t["default"]=r;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(529),d=(a(u),n(533)),h=n(528),f=a(h),g=n(530),p=a(g),m=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this._orderPlanCodec=new f["default"];this._orderCouponCodec=new p["default"]}r(t,e);s(t,[{key:"encode",value:function(){}},{key:"decode",value:function(e){return e?new d.OrderPrice(e.start,e.end,this._orderPlanCodec.decode(e.plan),this._orderCouponCodec.decode(e.coupon)):null}}]);return t}(l["default"]);t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s){r(this,e);this._start=t?moment(t):void 0;this._end=n?moment(n):void 0;this._plan=i;this._coupon=s}i(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"plan",get:function(){return this._plan}},{key:"coupon",get:function(){return this._coupon}},{key:"total",get:function(){return this.plan.price-this.coupon.discount}}]);return e}();t.OrderPrice=s},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(535),a=s(o),c=function(){function e(t,n){r(this,e);this._httpService=t;this._environment=n;this._helpArticleCodec=new a["default"]}e.$inject=["HttpService","environment"];i(e,[{key:"getAll",value:function(){var e=this;return this._httpService.get(this._uri("/v1/help-articles")).then(function(t){return t.help_articles.map(function(t){return e._helpArticleCodec.decode(t)})})}},{key:"create",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"default title":arguments[2],i=this,r=arguments.length<=3||void 0===arguments[3]?"default body":arguments[3],s=arguments.length<=4||void 0===arguments[4]?1:arguments[4];return this._httpService.authPost(this._uri("/v1/help-articles"),{category_id:e,section_id:t,title:n,body:r,priority:s}).then(function(e){return i._helpArticleCodec.decode(e)})}},{key:"get",value:function(e){var t=this;return this._httpService.get(this._uri("/v1/help-articles/"+e)).then(function(e){return t._helpArticleCodec.decode(e)})}},{key:"update",value:function(e){return this._httpService.authPut(this._uri("/v1/help-articles/"+e.id),this._helpArticleCodec.encode(e))}},{key:"search",value:function(e){var t=this;return this._httpService.get(this._uri("/v1/help-articles/search?query="+e)).then(function(e){return e.help_articles.map(function(e){return t._helpArticleCodec.decode(e)})})}},{key:"delete",value:function(e){return this._httpService.authDelete(this._uri("/v1/help-articles/"+e))}},{key:"_uri",value:function(e){return""+this._environment.serverUrlBase+e}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(164),l=a(c),u=n(536),d=a(u),h=function(e){function t(){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}r(t,e);s(t,[{key:"encode",value:function(e){return{id:e.id,category_id:e.categoryId,section_id:e.sectionId,title:e.title,body:e.body,priority:e.priority,owner_id:e.ownerId}}},{key:"decode",value:function(e){return e?new d["default"](e.id,e.category_id,e.section_id,e.title,e.body,e.priority,e.owner_id,e.created,e.modified):null}}]);return t}(l["default"]);t["default"]=h;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){r(this,e)}i(e,null,[{key:"isValid",value:function(t){return e.All.some(function(e){return e===t})}},{key:"WhatIsClasskick",get:function(){return"what-is-classkick"}},{key:"GettingStarted",get:function(){return"getting-started"}},{key:"BeyondTheBasics",get:function(){return"beyond-the-basics"}},{key:"Troubleshooting",get:function(){return"troubleshooting"}},{key:"ConnectWithTeacher",get:function(){return"connect-with-teacher"}},{key:"ProfessionalDevelopment",get:function(){return"professional-development"}},{key:"LearnAboutFeatures",get:function(){return"learn-about-features"}},{key:"ClasskickProUsers",get:function(){return"classkick-pro-users"}},{key:"All",get:function(){return[e.WhatIsClasskick,e.GettingStarted,e.BeyondTheBasics,e.Troubleshooting,e.ConnectWithTeacher,e.ProfessionalDevelopment,e.LearnAboutFeatures,e.ClasskickProUsers]}}]);return e}();t.HelpArticleCategories=s;var o={};t.HelpArticleCategoriesDisplayMap=o;o[s.WhatIsClasskick]="What is Classkick?";o[s.GettingStarted]="Getting Started";o[s.BeyondTheBasics]="Beyond the Basics";o[s.Troubleshooting]="Troubleshooting";o[s.ConnectWithTeacher]="Connect with a Classkick Teacher";o[s.ProfessionalDevelopment]="Professional Development Resources";o[s.LearnAboutFeatures]="Learn about Features";o[s.ClasskickProUsers]="Classkick Pro";var a=function(){function e(){r(this,e)}i(e,null,[{key:"isValid",value:function(t){return e.All.some(function(e){return e===t})}},{key:"WhatIsClasskick_Default",get:function(){return"what-is-classkick-default"}},{key:"WhatIsClasskick_Secondary",get:function(){return"what-is-classkick-secondary"}},{key:"GettingStarted_Edit",get:function(){return"getting-started-edit"}},{key:"GettingStarted_Assign",get:function(){return"getting-started-assign"}},{key:"GettingStarted_View",get:function(){return"getting-started-view"}},{key:"BeyondTheBasics_DeeperFeedback",get:function(){return"beyond-the-basics-deeper-feedback"}},{key:"BeyondTheBasics_MeaningfulAssignments",get:function(){return"beyond-the-basics-meaningful-assignments"}},{key:"BeyondTheBasics_AnalyzeData",get:function(){return"beyond-the-basics-analyze-data"}},{key:"BeyondTheBasics_Collaboration",get:function(){return"beyond-the-basics-collaboration"}},{key:"BeyondTheBasics_Grading",get:function(){return"beyond-the-basics-grading"}},{key:"Troubleshooting_Default",get:function(){return"troubleshooting-default"}},{key:"Troubleshooting_Secondary",get:function(){return"troubleshooting-secondary"}},{key:"ConnectWithTeacher_K_2",get:function(){return"k-2"}},{key:"ConnectWithTeacher_3_5",get:function(){return"3-5"}},{key:"ConnectWithTeacher_6_8",get:function(){return"6-8"}},{key:"ConnectWithTeacher_9_12",get:function(){return"9-12"}},{key:"ProfessionalDevelopment_PresentationMaterials",get:function(){return"professional-development-presentation-materials"}},{key:"ProfessionalDevelopment_BrandAssets",get:function(){return"professional-development-brand-assets"}},{key:"LearnAboutFeatures_Toolbar",get:function(){return"learn-about-features-toolbar"}},{key:"LearnAboutFeatures_GradingAndFeedback",get:function(){return"learn-about-features-grading-and-feedback"}},{key:"LearnAboutFeatures_Filters",get:function(){return"learn-about-features-filters"}},{key:"LearnAboutFeatures_Export",get:function(){return"learn-about-features-export"}},{key:"LearnAboutFeatures_More",get:function(){return"learn-about-features-more"}},{key:"ClasskickProUsers_WhatIsPro",get:function(){return"classkick-pro-users-what-is-pro"}},{key:"ClasskickProUsers_Admins",get:function(){return"classkick-pro-users-admins"}},{key:"ClasskickProUsers_Teachers",get:function(){return"classkick-pro-users-teachers"}},{key:"ClasskickProUsers_Students",get:function(){return"classkick-pro-users-students"}},{key:"All",get:function(){return[e.WhatIsClasskick_Default,e.WhatIsClasskick_Secondary,e.GettingStarted_Edit,e.GettingStarted_Assign,e.GettingStarted_View,e.BeyondTheBasics_DeeperFeedback,e.BeyondTheBasics_MeaningfulAssignments,e.BeyondTheBasics_AnalyzeData,e.BeyondTheBasics_Collaboration,e.BeyondTheBasics_Grading,e.Troubleshooting_Default,e.Troubleshooting_Secondary,e.ConnectWithTeacher_K_2,e.ConnectWithTeacher_3_5,e.ConnectWithTeacher_6_8,e.ConnectWithTeacher_9_12,e.ProfessionalDevelopment_PresentationMaterials,e.ProfessionalDevelopment_BrandAssets,e.LearnAboutFeatures_Toolbar,e.LearnAboutFeatures_GradingAndFeedback,e.LearnAboutFeatures_Filters,e.LearnAboutFeatures_Export,e.LearnAboutFeatures_More,e.ClasskickProUsers_WhatIsPro,e.ClasskickProUsers_Admins,e.ClasskickProUsers_Teachers,e.ClasskickProUsers_Students]}}]);return e}();t.HelpArticleSections=a;var c={};t.HelpArticleSectionsDisplayMap=c;c[a.WhatIsClasskick_Default]="";c[a.WhatIsClasskick_Secondary]="";c[a.GettingStarted_Edit]="Create and edit your Assignment";c[a.GettingStarted_Assign]="Assign a roster to get your students working";c[a.GettingStarted_View]="See students work and provide real-time feedback";c[a.BeyondTheBasics_DeeperFeedback]="Deeper Feedback";c[a.BeyondTheBasics_MeaningfulAssignments]="Create more meaningful assignments";c[a.BeyondTheBasics_AnalyzeData]="Analyze data in-the-moment";c[a.BeyondTheBasics_Collaboration]="Collaboration";c[a.BeyondTheBasics_Grading]="Grade Faster";c[a.Troubleshooting_Default]="";c[a.Troubleshooting_Secondary]="";c[a.ConnectWithTeacher_K_2]="K-2";c[a.ConnectWithTeacher_3_5]="3-5";c[a.ConnectWithTeacher_6_8]="6-8";c[a.ConnectWithTeacher_9_12]="9-12";c[a.ProfessionalDevelopment_PresentationMaterials]="Presentation Materials";c[a.ProfessionalDevelopment_BrandAssets]="Brand Assets";c[a.LearnAboutFeatures_Toolbar]="Toolbar";c[a.LearnAboutFeatures_GradingAndFeedback]="Grading & Feedback Tools";c[a.LearnAboutFeatures_Filters]="Filters";c[a.LearnAboutFeatures_Export]="Export Tools";c[a.LearnAboutFeatures_More]="More Features";c[a.ClasskickProUsers_WhatIsPro]="What is Pro?";c[a.ClasskickProUsers_Admins]="School and District Admin";c[a.ClasskickProUsers_Teachers]="Teachers";c[a.ClasskickProUsers_Students]="Students";var l=function(){function e(t,n,i,s,o,a,c,l,u){r(this,e);this._id=t;this._categoryId=n;this._sectionId=i;this._title=s;this._body=o;this._priority=a;this._ownerId=c;this._created=l?moment(l):void 0;this._modified=u?moment(u):void 0}i(e,[{key:"id",get:function(){return this._id}},{key:"categoryId",get:function(){return this._categoryId}},{key:"sectionId",get:function(){return this._sectionId}},{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"body",get:function(){return this._body},set:function(e){this._body=e}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e}},{key:"ownerId",get:function(){return this._ownerId}},{key:"created",get:function(){return this._created}},{key:"modified",get:function(){return this._modified}},{key:"categoryDisplay",get:function(){return o[this._categoryId]}}]);return e}();t["default"]=l},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n){"ngInject";r(this,e);this._environment=t;this._constants=n;this._headers=new s;this.init()}e.$inject=["environment","constants"];i(e,[{key:"init",value:function(){this._headers.set("X-CK-PLATFORM","web");this._headers.set("X-CK-VERSION",this._constants.version);this._headers.set("X-CK-USER",void 0);this._headers.set("X-CK-ASSIGNMENT",void 0);this._headers.set("X-CK-ROSTER",void 0)}},{key:"setUserInfo",value:function(e){this._headers.set("X-CK-USER",e.id)}},{key:"clearUserInfo",value:function(){this._headers.set("X-CK-USER",void 0)}},{key:"setAssignmentId",value:function(e){this._headers.set("X-CK-ASSIGNMENT",e)}},{key:"setRosterId",value:function(e){this._headers.set("X-CK-ROSTER",e)}},{key:"addHeaders",value:function(e,t){if(e.includes(this._environment.serverUrlBase)){t||(t={});t.headers||(t.headers={});this._headers.forEach(function(e,n){return t.headers[n]=e})}return t}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(539),o=function(){function e(t,n,i){"ngInject";r(this,e);this.$log=t;this._environment=n;this._constants=i;this._initialized=!1;this._environment.dataDog.enabled?this.init():this.logTrace("disabled")}e.$inject=["$log","environment","constants"];i(e,[{key:"init",value:function(){if(!this._initialized){s.datadogRum.init({beforeSend:function(e){e.view.url=e.view.url.replace("/#","")},clientToken:this._environment.dataDog.clientToken,applicationId:this._environment.dataDog.applicationId,site:this._environment.dataDog.site,service:this._environment.dataDog.service,env:this._environment.dataDog.env,version:this._constants.version,sampleRate:this._environment.dataDog.sampleRate,trackInteractions:this._environment.dataDog.trackInteractions,silentMultipleInit:!0});this._initialized=!0;this.logTrace("initialized")}}},{key:"addTiming",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];angular.isUndefined(DD_RUM)||(angular.isUndefined(t)?DD_RUM.addTiming(e):DD_RUM.addTiming(e,t))}},{key:"logTrace",value:function(){if(this._environment.dataDog.traceLogging){for(var e,t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];(e=this.$log).debug.apply(e,["DataDog:"].concat(n))}}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.datadogRum=void 0;var i=n(540);Object.defineProperty(t,"datadogRum",{enumerable:!0,get:function(){return i.datadogRum}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.datadogRum=void 0;var i=n(541),r=n(569);t.datadogRum=r.makeRumPublicApi(r.startRum);i.defineGlobal(i.getGlobalObject(),"DD_RUM",t.datadogRum)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Datacenter=t.limitModification=t.createContextManager=t.catchUserErrors=t.BoundedBuffer=t.resetFetchProxy=t.startFetchProxy=t.resetXhrProxy=t.startXhrProxy=t.COOKIE_ACCESS_DELAY=t.setCookie=t.getCookie=t.areCookiesAuthorized=t.createHandlingStack=t.formatUnknownError=t.ErrorHandling=t.ErrorSource=t.Batch=t.HttpRequest=t.stopSessionManagement=t.SESSION_COOKIE_NAME=t.SESSION_TIME_OUT_DELAY=t.startSessionManagement=t.Observable=t.setDebugMode=t.addErrorToMonitoringBatch=t.addMonitoringMessage=t.callMonitored=t.monitor=t.monitored=t.checkIsNotLocalFile=t.checkCookiesAuthorized=t.commonInit=t.makePublicApi=t.defineGlobal=t.BuildMode=t.computeStackTrace=t.trackRuntimeError=t.trackNetworkError=t.trackConsoleError=t.buildCookieOptions=t.DEFAULT_CONFIGURATION=void 0;var i=n(7),r=n(542);Object.defineProperty(t,"DEFAULT_CONFIGURATION",{enumerable:!0,get:function(){return r.DEFAULT_CONFIGURATION}});Object.defineProperty(t,"buildCookieOptions",{enumerable:!0,get:function(){return r.buildCookieOptions}});var s=n(555);Object.defineProperty(t,"trackConsoleError",{enumerable:!0,get:function(){return s.trackConsoleError}});var o=n(557);Object.defineProperty(t,"trackNetworkError",{enumerable:!0,get:function(){return o.trackNetworkError}});var a=n(561);Object.defineProperty(t,"trackRuntimeError",{enumerable:!0,get:function(){return a.trackRuntimeError}});var c=n(548);Object.defineProperty(t,"computeStackTrace",{enumerable:!0,get:function(){return c.computeStackTrace}});var l=n(554);Object.defineProperty(t,"BuildMode",{enumerable:!0,get:function(){return l.BuildMode}});Object.defineProperty(t,"defineGlobal",{enumerable:!0,get:function(){return l.defineGlobal}});Object.defineProperty(t,"makePublicApi",{enumerable:!0,get:function(){return l.makePublicApi}});Object.defineProperty(t,"commonInit",{enumerable:!0,get:function(){return l.commonInit}});Object.defineProperty(t,"checkCookiesAuthorized",{enumerable:!0,get:function(){return l.checkCookiesAuthorized}});Object.defineProperty(t,"checkIsNotLocalFile",{enumerable:!0,get:function(){return l.checkIsNotLocalFile}});var u=n(546);Object.defineProperty(t,"monitored",{enumerable:!0,get:function(){return u.monitored}});Object.defineProperty(t,"monitor",{enumerable:!0,get:function(){return u.monitor}});Object.defineProperty(t,"callMonitored",{enumerable:!0,get:function(){return u.callMonitored}});Object.defineProperty(t,"addMonitoringMessage",{enumerable:!0,get:function(){return u.addMonitoringMessage}});Object.defineProperty(t,"addErrorToMonitoringBatch",{enumerable:!0,get:function(){return u.addErrorToMonitoringBatch}});Object.defineProperty(t,"setDebugMode",{enumerable:!0,get:function(){return u.setDebugMode}});var d=n(562);Object.defineProperty(t,"Observable",{enumerable:!0,get:function(){return d.Observable}});var h=n(563);Object.defineProperty(t,"startSessionManagement",{enumerable:!0,get:function(){return h.startSessionManagement}});Object.defineProperty(t,"SESSION_TIME_OUT_DELAY",{enumerable:!0,get:function(){return h.SESSION_TIME_OUT_DELAY}});Object.defineProperty(t,"SESSION_COOKIE_NAME",{enumerable:!0,get:function(){return h.SESSION_COOKIE_NAME}});Object.defineProperty(t,"stopSessionManagement",{enumerable:!0,get:function(){return h.stopSessionManagement}});var f=n(551);Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return f.HttpRequest}});Object.defineProperty(t,"Batch",{enumerable:!0,get:function(){return f.Batch}});i.__exportStar(n(544),t);i.__exportStar(n(559),t);i.__exportStar(n(556),t);i.__exportStar(n(545),t);i.__exportStar(n(565),t);var g=n(547);Object.defineProperty(t,"ErrorSource",{enumerable:!0,get:function(){return g.ErrorSource}});Object.defineProperty(t,"ErrorHandling",{enumerable:!0,get:function(){return g.ErrorHandling}});Object.defineProperty(t,"formatUnknownError",{enumerable:!0,get:function(){return g.formatUnknownError}});Object.defineProperty(t,"createHandlingStack",{enumerable:!0,get:function(){return g.createHandlingStack}});var p=n(543);Object.defineProperty(t,"areCookiesAuthorized",{enumerable:!0,get:function(){return p.areCookiesAuthorized}});Object.defineProperty(t,"getCookie",{enumerable:!0,get:function(){return p.getCookie}});Object.defineProperty(t,"setCookie",{enumerable:!0,get:function(){return p.setCookie}});Object.defineProperty(t,"COOKIE_ACCESS_DELAY",{enumerable:!0,get:function(){return p.COOKIE_ACCESS_DELAY}});var m=n(560);Object.defineProperty(t,"startXhrProxy",{enumerable:!0,get:function(){return m.startXhrProxy}});Object.defineProperty(t,"resetXhrProxy",{enumerable:!0,get:function(){return m.resetXhrProxy}});var v=n(558);Object.defineProperty(t,"startFetchProxy",{enumerable:!0,get:function(){return v.startFetchProxy}});Object.defineProperty(t,"resetFetchProxy",{enumerable:!0,get:function(){return v.resetFetchProxy}});var _=n(566);Object.defineProperty(t,"BoundedBuffer",{enumerable:!0,get:function(){return _.BoundedBuffer}});var y=n(552);Object.defineProperty(t,"catchUserErrors",{enumerable:!0,get:function(){return y.catchUserErrors}});var k=n(567);Object.defineProperty(t,"createContextManager",{enumerable:!0,get:function(){return k.createContextManager}});var b=n(568);Object.defineProperty(t,"limitModification",{enumerable:!0,get:function(){return b.limitModification}});var S=n(553);Object.defineProperty(t,"Datacenter",{enumerable:!0,get:function(){return S.Datacenter}})},function(e,t,n){"use strict";function i(e,n){var i=Array.isArray(e.enableExperimentalFeatures)?e.enableExperimentalFeatures:[],s=o.__assign(o.__assign({beforeSend:e.beforeSend&&c.catchUserErrors(e.beforeSend,"beforeSend threw an error:"),cookieOptions:r(e),isEnabled:function(e){return l.includes(i,e)},service:e.service},u.computeTransportConfiguration(e,n)),t.DEFAULT_CONFIGURATION);"allowedTracingOrigins"in e&&(s.allowedTracingOrigins=e.allowedTracingOrigins);"sampleRate"in e&&(s.sampleRate=e.sampleRate);"resourceSampleRate"in e&&(s.resourceSampleRate=e.resourceSampleRate);"trackInteractions"in e&&(s.trackInteractions=!!e.trackInteractions);"trackViewsManually"in e&&(s.trackViewsManually=!!e.trackViewsManually);"actionNameAttribute"in e&&(s.actionNameAttribute=e.actionNameAttribute);return s}function r(e){var t={};t.secure=s(e);t.crossSite=!!e.useCrossSiteSessionCookie;e.trackSessionAcrossSubdomains&&(t.domain=a.getCurrentSite());return t}function s(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}Object.defineProperty(t,"__esModule",{value:!0});t.buildCookieOptions=t.buildConfiguration=t.DEFAULT_CONFIGURATION=void 0;var o=n(7),a=n(543),c=n(552),l=n(545),u=n(553);t.DEFAULT_CONFIGURATION={allowedTracingOrigins:[],maxErrorsByMinute:3e3,maxInternalMonitoringMessagesPerPage:15,resourceSampleRate:100,sampleRate:100,silentMultipleInit:!1,trackInteractions:!1,trackViewsManually:!1,requestErrorResponseLengthLimit:32*l.ONE_KILO_BYTE,flushTimeout:30*l.ONE_SECOND,maxBatchSize:50,maxMessageSize:256*l.ONE_KILO_BYTE,batchBytesLimit:16*l.ONE_KILO_BYTE};t.buildConfiguration=i;t.buildCookieOptions=r},function(e,t,n){"use strict";function i(e,n){var i,o,a=!1,c=function(){a=!0;clearTimeout(i);i=setTimeout(function(){a=!1},t.COOKIE_ACCESS_DELAY)};return{get:function(){if(a)return o;o=s(e);c();return o},set:function(t,i){r(e,t,i,n);o=t;c()}}}function r(e,t,n,i){var r=new Date;r.setTime(r.getTime()+n);var s="expires="+r.toUTCString(),o=i&&i.crossSite?"none":"strict",a=i&&i.domain?";domain="+i.domain:"",c=i&&i.secure?";secure":"";document.cookie=e+"="+t+";"+s+";path=/;samesite="+o+a+c}function s(e){return u.findCommaSeparatedValue(document.cookie,e)}function o(e,t){r(e,"",0,t)}function a(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_"+u.generateUUID(),n="test";r(t,n,u.ONE_SECOND,e);var i=s(t)===n;o(t,e);return i}catch(a){l.display.error(a);return!1}}function c(){if(void 0===d){for(var e="dd_site_test_"+u.generateUUID(),t="test",n=window.location.hostname.split("."),i=n.pop();n.length&&!s(e);){i=n.pop()+"."+i;r(e,t,u.ONE_SECOND,{domain:i})}o(e,{domain:i});d=i}return d}Object.defineProperty(t,"__esModule",{value:!0});t.getCurrentSite=t.areCookiesAuthorized=t.deleteCookie=t.getCookie=t.setCookie=t.cacheCookieAccess=t.COOKIE_ACCESS_DELAY=void 0;var l=n(544),u=n(545);t.COOKIE_ACCESS_DELAY=u.ONE_SECOND;t.cacheCookieAccess=i;t.setCookie=r;t.getCookie=s;t.deleteCookie=o;t.areCookiesAuthorized=a;var d;t.getCurrentSite=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.display=void 0;t.display={log:console.log.bind(console),warn:console.warn.bind(console),error:console.error.bind(console)}},function(e,t,n){"use strict";function i(e,t,n){var i,r,s=n&&void 0!==n.leading?n.leading:!0,o=n&&void 0!==n.trailing?n.trailing:!0,a=!1;return{throttled:function(){for(var n=[],c=0;c<arguments.length;c++)n[c]=arguments[c];if(a)i=n;else{s?e.apply(void 0,n):i=n;a=!0;r=setTimeout(function(){o&&i&&e.apply(void 0,i);a=!1;i=void 0},t)}},cancel:function(){clearTimeout(r);a=!1;i=void 0}}}function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})}function s(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):(1e7+"-1000-4000-8000-100000000000").replace(/[018]/g,s)}function o(e){return 0!==e&&100*Math.random()<=e}function a(e,t){return+e.toFixed(t)}function c(){}function l(e,t,n){if(null===e||void 0===e)return JSON.stringify(e);var i=[!1,void 0];if(u(e)){i=[!0,e.toJSON];delete e.toJSON}var r,s=[!1,void 0];if("object"==typeof e){r=Object.getPrototypeOf(e);if(u(r)){s=[!0,r.toJSON];delete r.toJSON}}var o;try{o=JSON.stringify(e,t,n)}catch(a){o="<error: unable to serialize object>"}finally{i[0]&&(e.toJSON=i[1]);s[0]&&(r.toJSON=s[1])}return o}function u(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("toJSON")}function d(e,t){return-1!==e.indexOf(t)}function h(e,t){for(var n=0;n<e.length;n+=1){var i=e[n];if(t(i,n,e))return i}return void 0}function f(e){return g(e)&&e>=0&&100>=e}function g(e){return"number"==typeof e}function p(e){var t=[];Object.keys(e).forEach(function(n){t.push(e[n])});return t}function m(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function v(e){return 0===Object.keys(e).length}function _(e,t){for(var n={},i=0,r=Object.keys(e);i<r.length;i++){var s=r[i];n[s]=t(e[s])}return n}function y(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;delete Object.prototype._dd_temp_;"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{});return e}function k(){return b(window.location)}function b(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+t}function S(e,t){var n=new RegExp("(?:^|;)\\s*"+t+"\\s*=\\s*([^;]+)"),i=n.exec(e);return i?i[1]:void 0}function w(e,t){var n=e.charCodeAt(t-1);return n>=55296&&56319>=n?e.slice(0,t+1):e.slice(0,t)}function C(e,t,n,i){return E(e,[t],n,i)}function E(e,t,n,i){var r=void 0===i?{}:i,s=r.once,o=r.capture,a=r.passive,c=R.monitor(s?function(e){u();n(e)}:n),l=a?{capture:o,passive:a}:o;t.forEach(function(t){return e.addEventListener(t,c,l)});var u=function(){return t.forEach(function(t){return e.removeEventListener(t,c,l)})};return{stop:u}}function T(e,t){if(document.readyState===e||"complete"===document.readyState)t();else{var n="complete"===e?"load":"DOMContentLoaded";C(window,n,t,{once:!0})}}function I(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function A(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);n||e.add(t);return n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;n||t.push(e);return n}}}function x(e,t,n){void 0===n&&(n=A());if(void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var i=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,i)}if(n.hasAlreadyBeenSeen(t))return void 0;if(Array.isArray(t)){for(var r=Array.isArray(e)?e:[],s=0;s<t.length;++s)r[s]=x(r[s],t[s],n);return r}var o="object"===I(e)?e:{};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(o[a]=x(o[a],t[a],n));return o}function O(e){return x(void 0,e)}function P(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,i=0,r=e;i<r.length;i++){var s=r[i];void 0!==s&&null!==s&&(n=x(n,s))}return n}Object.defineProperty(t,"__esModule",{value:!0});t.combine=t.deepClone=t.mergeInto=t.getType=t.runOnReadyState=t.addEventListeners=t.addEventListener=t.safeTruncate=t.findCommaSeparatedValue=t.getLinkElementOrigin=t.getLocationOrigin=t.getGlobalObject=t.mapValues=t.isEmptyObject=t.objectEntries=t.objectValues=t.isNumber=t.isPercentage=t.find=t.includes=t.jsonStringify=t.noop=t.round=t.performDraw=t.generateUUID=t.assign=t.throttle=t.RequestType=t.ResourceType=t.ONE_KILO_BYTE=t.ONE_DAY=t.ONE_HOUR=t.ONE_MINUTE=t.ONE_SECOND=void 0;var R=n(546);t.ONE_SECOND=1e3;t.ONE_MINUTE=60*t.ONE_SECOND;t.ONE_HOUR=60*t.ONE_MINUTE;t.ONE_DAY=24*t.ONE_HOUR;t.ONE_KILO_BYTE=1024;var D;!function(e){e.DOCUMENT="document";e.XHR="xhr";e.BEACON="beacon";e.FETCH="fetch";e.CSS="css";e.JS="js";e.IMAGE="image";e.FONT="font";e.MEDIA="media";e.OTHER="other"}(D=t.ResourceType||(t.ResourceType={}));var M;!function(e){e.FETCH="fetch";e.XHR="xhr"}(M=t.RequestType||(t.RequestType={}));t.throttle=i;t.assign=r;t.generateUUID=s;t.performDraw=o;t.round=a;t.noop=c;t.jsonStringify=l;t.includes=d;t.find=h;t.isPercentage=f;t.isNumber=g;t.objectValues=p;t.objectEntries=m;t.isEmptyObject=v;t.mapValues=_;t.getGlobalObject=y;t.getLocationOrigin=k;t.getLinkElementOrigin=b;t.findCommaSeparatedValue=S;t.safeTruncate=w;t.addEventListener=C;t.addEventListeners=E;t.runOnReadyState=T;t.getType=I;t.mergeInto=x;t.deepClone=O;t.combine=P},function(e,t,n){"use strict";function i(e){if(e.internalMonitoringEndpoint){var t=r(e);k.assign(C,{batch:t,maxMessagesPerPage:e.maxInternalMonitoringMessagesPerPage,sentMessageCount:0})}return{setExternalContextProvider:function(e){w=e}}}function r(e){function t(t){return new b.Batch(new b.HttpRequest(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}function n(e){return k.combine({date:(new Date).getTime(),view:{referrer:document.referrer,url:window.location.href}},void 0!==w?w():{},e)}var i,r=t(e.internalMonitoringEndpoint);void 0!==e.replica&&(i=t(e.replica.internalMonitoringEndpoint));return{add:function(e){var t=n(e);r.add(t);i&&i.add(t)}}}function s(){C.batch=void 0}function o(e,t,n){var i=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=C.batch?a(i):i;return n.apply(this,e)}}function a(e){return function(){return c(e,this,arguments)}}function c(e,t,n){try{return e.apply(t,n)}catch(i){g(i);try{u(i)}catch(i){g(i)}}}function l(e,t){p(e);d(v.__assign(v.__assign({message:e},t),{status:m.info}))}function u(e){d(v.__assign(v.__assign({},h(e)),{status:m.error}))}function d(e){if(C.batch&&C.sentMessageCount<C.maxMessagesPerPage){C.sentMessageCount+=1;C.batch.add(e)}}function h(e){if(e instanceof Error){var t=S.computeStackTrace(e);return{error:{kind:t.name,stack:y.toStackTraceString(t)},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught "+k.jsonStringify(e)}}function f(e){C.debugMode=e}function g(e){C.debugMode&&_.display.error("[INTERNAL ERROR]",e)}function p(e){C.debugMode&&_.display.log("[MONITORING MESSAGE]",e)}Object.defineProperty(t,"__esModule",{value:!0});t.setDebugMode=t.addErrorToMonitoringBatch=t.addMonitoringMessage=t.callMonitored=t.monitor=t.monitored=t.resetInternalMonitoring=t.startInternalMonitoring=void 0;var m,v=n(7),_=n(544),y=n(547),k=n(545),b=n(551),S=n(548);!function(e){e.info="info";e.error="error"}(m||(m={}));var w,C={maxMessagesPerPage:0,sentMessageCount:0};t.startInternalMonitoring=i;t.resetInternalMonitoring=s;t.monitored=o;t.monitor=a;t.callMonitored=c;t.addMonitoringMessage=l;t.addErrorToMonitoringBatch=u;t.setDebugMode=f},function(e,t,n){"use strict";function i(e,t,n,i){return e&&(void 0!==e.message||t instanceof Error)?{
message:e.message||"Empty message",stack:r(e),handlingStack:i,type:e.name}:{message:n+" "+l.jsonStringify(t),stack:"No stack, consider using an instance of Error",handlingStack:i,type:e&&e.name}}function r(e){var t=s(e);e.stack.forEach(function(e){var n="?"===e.func?"<anonymous>":e.func,i=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",r=e.line?":"+e.line:"",s=e.line&&e.column?":"+e.column:"";t+="\n  at "+n+i+" @ "+e.url+r+s});return t}function s(e){return(e.name||"Error")+": "+e.message}function o(){var e,t=2,n=new Error;if(!n.stack)try{throw n}catch(i){l.noop()}a.callMonitored(function(){var i=c.computeStackTrace(n);i.stack=i.stack.slice(t);e=r(i)});return e}Object.defineProperty(t,"__esModule",{value:!0});t.createHandlingStack=t.formatErrorMessage=t.toStackTraceString=t.formatUnknownError=t.ErrorHandling=t.ErrorSource=void 0;var a=n(546),c=n(548),l=n(545);t.ErrorSource={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source"};var u;!function(e){e.HANDLED="handled";e.UNHANDLED="unhandled"}(u=t.ErrorHandling||(t.ErrorHandling={}));t.formatUnknownError=i;t.toStackTraceString=r;t.formatErrorMessage=s;t.createHandlingStack=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.unsubscribe=t.subscribe=t.report=t.computeStackTrace=void 0;var i=n(549);Object.defineProperty(t,"computeStackTrace",{enumerable:!0,get:function(){return i.computeStackTrace}});var r=n(550);Object.defineProperty(t,"report",{enumerable:!0,get:function(){return r.report}});Object.defineProperty(t,"subscribe",{enumerable:!0,get:function(){return r.subscribe}});Object.defineProperty(t,"unsubscribe",{enumerable:!0,get:function(){return r.unsubscribe}})},function(e,t,n){"use strict";function i(e,t){var n,i=void 0===t?0:+t;try{n=s(e);if(n)return n}catch(a){if(p)throw a}try{n=r(e);if(n)return n}catch(a){if(p)throw a}try{n=o(e);if(n)return n}catch(a){if(p)throw a}try{n=c(e,i+1);if(n)return n}catch(a){if(p)throw a}return{message:l(e,"message"),name:l(e,"name"),stack:[]}}function r(e){var t=l(e,"stack");if(t){for(var n,i,r,s,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/,f=t.split("\n"),p=[],m=0,v=f.length;v>m;m+=1){if(o.exec(f[m])){r=o.exec(f[m]);var _=r[2]&&0===r[2].indexOf("native");n=r[2]&&0===r[2].indexOf("eval");i=d.exec(r[2]);if(n&&i){r[2]=i[1];r[3]=i[2];r[4]=i[3]}s={args:_?[r[2]]:[],column:r[4]?+r[4]:void 0,func:r[1]||g,line:r[3]?+r[3]:void 0,url:_?void 0:r[2]}}else if(c.exec(f[m])){r=c.exec(f[m]);s={args:[],column:r[4]?+r[4]:void 0,func:r[1]||g,line:+r[3],url:r[2]}}else{if(!a.exec(f[m]))continue;r=a.exec(f[m]);n=r[3]&&r[3].indexOf(" > eval")>-1;i=u.exec(r[3]);if(n&&i){r[3]=i[1];r[4]=i[2];r[5]=void 0}else 0!==m||r[5]||h(e.columnNumber)||(p[0].column=e.columnNumber+1);s={args:r[2]?r[2].split(","):[],column:r[5]?+r[5]:void 0,func:r[1]||g,line:r[4]?+r[4]:void 0,url:r[3]}}!s.func&&s.line&&(s.func=g);p.push(s)}if(p.length)return{stack:p,message:l(e,"message"),name:l(e,"name")}}}function s(e){var t=l(e,"stacktrace");if(t){for(var n,i=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,s=t.split("\n"),o=[],a=0;a<s.length;a+=2){var c=void 0;if(i.exec(s[a])){n=i.exec(s[a]);c={args:[],column:void 0,func:n[3],line:+n[1],url:n[2]}}else if(r.exec(s[a])){n=r.exec(s[a]);c={args:n[5]?n[5].split(","):[],column:+n[2],func:n[3]||n[4],line:+n[1],url:n[6]}}if(c){!c.func&&c.line&&(c.func=g);c.context=[s[a+1]];o.push(c)}}if(o.length)return{stack:o,message:l(e,"message"),name:l(e,"name")}}}function o(e){var t=l(e,"message");if(t){var n=t.split("\n");if(!(n.length<4)){var i,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,a=[],c=window&&window.document&&window.document.getElementsByTagName("script"),u=[];for(var h in c)d(c,h)&&!c[h].src&&u.push(c[h]);for(var f=2;f<n.length;f+=2){var p=void 0;if(r.exec(n[f])){i=r.exec(n[f]);p={args:[],column:void 0,func:i[3],line:+i[1],url:i[2]}}else if(s.exec(n[f])){i=s.exec(n[f]);p={args:[],column:void 0,func:i[4],line:+i[1],url:i[3]}}else if(o.exec(n[f])){i=o.exec(n[f]);var m=window.location.href.replace(/#.*$/,"");p={url:m,args:[],column:void 0,func:"",line:+i[1]}}if(p){p.func||(p.func=g);p.context=[n[f+1]];a.push(p)}}if(a.length)return{stack:a,message:n[0],name:l(e,"name")}}}}function a(e,t,n){var i={url:t,line:n?+n:void 0};if(i.url&&i.line){e.incomplete=!1;var r=e.stack;if(r.length>0&&r[0].url===i.url){if(r[0].line===i.line)return!1;if(!r[0].line&&r[0].func===i.func){r[0].line=i.line;r[0].context=i.context;return!1}}r.unshift(i);e.partial=!0;return!0}e.incomplete=!0;return!1}function c(e,t){for(var n,r,s=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,o=[],u={},d=!1,h=c.caller;h&&!d;h=h.caller)if(h!==i&&h!==f.report){r={args:[],column:void 0,func:g,line:void 0,url:void 0};n=s.exec(h.toString());h.name?r.func=h.name:n&&(r.func=n[1]);"undefined"==typeof r.func&&(r.func=n?n.input.substring(0,n.input.indexOf("{")):void 0);u[h.toString()]?d=!0:u[h.toString()]=!0;o.push(r)}t&&o.splice(0,t);var p={stack:o,message:l(e,"message"),name:l(e,"name")};a(p,l(e,"sourceURL")||l(e,"fileName"),l(e,"line")||l(e,"lineNumber"));return p}function l(e,t){if(!("object"==typeof e&&e&&t in e))return void 0;var n=e[t];return"string"==typeof n?n:void 0}function u(e){var t=(void 0===e?0:+e)+1;try{throw new Error}catch(n){return i(n,t+1)}}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e){return"undefined"==typeof e}Object.defineProperty(t,"__esModule",{value:!0});t.computeStackTraceOfCaller=t.augmentStackTraceWithInitialElement=t.computeStackTraceFromStackProp=t.computeStackTrace=void 0;var f=n(550),g="?";t.computeStackTrace=i;var p=!1;t.computeStackTraceFromStackProp=r;t.augmentStackTraceWithInitialElement=a;t.computeStackTraceOfCaller=u},function(e,t,n){"use strict";function i(e){if(_){if(v===e)return;f()}var t=p.computeStackTrace(e);_=t;v=e;setTimeout(g.monitor(function(){v===e&&f()}),t.incomplete?2e3:0);throw e}function r(e){l();d();y.push(e)}function s(e){for(var t=y.length-1;t>=0;t-=1)y[t]===e&&y.splice(t,1);if(0===y.length){u();h()}}function o(e,t,n){var i;y.forEach(function(r){try{r(e,t,n)}catch(s){i=s}});if(i)throw i}function a(e,t,n,i,r){var s;if(_){p.augmentStackTraceWithInitialElement(_,t,n);f()}else if(r){s=p.computeStackTrace(r);o(s,!0,r)}else{var a,c={url:t,column:i,line:n},l=e;if("[object String]"==={}.toString.call(e)){var u=m.exec(l);if(u){a=u[1];l=u[2]}}s={name:a,message:"string"==typeof l?l:void 0,stack:[c]};o(s,!0,e)}return k?k.apply(this,arguments):!1}function c(e){var t=e.reason||"Empty reason",n=p.computeStackTrace(t);o(n,!0,t)}function l(){if(!b){k=window.onerror;window.onerror=g.monitor(a);b=!0}}function u(){if(b){window.onerror=k;b=!1}}function d(){if(!w){S=null!==window.onunhandledrejection?window.onunhandledrejection:void 0;window.onunhandledrejection=g.monitor(c);w=!0}}function h(){if(w){window.onunhandledrejection=S;w=!1}}function f(){var e=_,t=v;_=void 0;v=void 0;o(e,!1,t)}Object.defineProperty(t,"__esModule",{value:!0});t.traceKitWindowOnError=t.unsubscribe=t.subscribe=t.report=void 0;var g=n(546),p=n(549),m=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;t.report=i;var v,_,y=[];t.subscribe=r;t.unsubscribe=s;var k,b,S,w;t.traceKitWindowOnError=a},function(e,t,n){"use strict";function i(e){return""+e+(-1===e.indexOf("?")?"?":"&")+"batch_time="+(new Date).getTime()}function r(e){if(!h){h=!0;c.addErrorToMonitoringBatch(e)}}Object.defineProperty(t,"__esModule",{value:!0});t.Batch=t.HttpRequest=void 0;var s=n(7),o=n(544),a=n(545),c=n(546),l=/[^\u0000-\u007F]/,u=!1,d=function(){function e(e,t,n){void 0===n&&(n=!1);this.endpointUrl=e;this.bytesLimit=t;this.withBatchTime=n}e.prototype.send=function(e,t){var n=this.withBatchTime?i(this.endpointUrl):this.endpointUrl,s=!!navigator.sendBeacon&&t<this.bytesLimit;if(s)try{var o=navigator.sendBeacon(n,e);if(o)return}catch(a){r(a)}var l=function(e){var i=null===e||void 0===e?void 0:e.currentTarget;if(!(i.status>=200&&i.status<300||u)){u=!0;c.addMonitoringMessage("XHR fallback failed",{on_line:navigator.onLine,size:t,url:n,try_beacon:s,event:{is_trusted:e.isTrusted,total:e.total,loaded:e.loaded},request:{status:i.status,ready_state:i.readyState,response_text:i.responseText.slice(0,64)}})}},d=new XMLHttpRequest;d.addEventListener("loadend",c.monitor(function(e){return l(e)}));d.open("POST",n,!0);d.send(e)};return e}();t.HttpRequest=d;var h=!1,f=function(){function e(e,t,n,i,r,s){void 0===s&&(s=a.noop);this.request=e;this.maxSize=t;this.bytesLimit=n;this.maxMessageSize=i;this.flushTimeout=r;this.beforeUnloadCallback=s;this.pushOnlyBuffer=[];this.upsertBuffer={};this.bufferBytesSize=0;this.bufferMessageCount=0;this.flushOnVisibilityHidden();this.flushPeriodically()}e.prototype.add=function(e){this.addOrUpdate(e)};e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)};e.prototype.flush=function(){if(0!==this.bufferMessageCount){var e=s.__spreadArrays(this.pushOnlyBuffer,a.objectValues(this.upsertBuffer));this.request.send(e.join("\n"),this.bufferBytesSize);this.pushOnlyBuffer=[];this.upsertBuffer={};this.bufferBytesSize=0;this.bufferMessageCount=0}};e.prototype.sizeInBytes=function(e){return l.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length};e.prototype.addOrUpdate=function(e,t){var n=this.process(e),i=n.processedMessage,r=n.messageBytesSize;if(r>=this.maxMessageSize)o.display.warn("Discarded a message whose size was bigger than the maximum allowed size "+this.maxMessageSize+"KB.");else{this.hasMessageFor(t)&&this.remove(t);this.willReachedBytesLimitWith(r)&&this.flush();this.push(i,r,t);this.isFull()&&this.flush()}};e.prototype.process=function(e){var t=a.jsonStringify(e),n=this.sizeInBytes(t);return{processedMessage:t,messageBytesSize:n}};e.prototype.push=function(e,t,n){this.bufferMessageCount>0&&(this.bufferBytesSize+=1);void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e);this.bufferBytesSize+=t;this.bufferMessageCount+=1};e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.sizeInBytes(t);this.bufferBytesSize-=n;this.bufferMessageCount-=1;this.bufferMessageCount>0&&(this.bufferBytesSize-=1)};e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]};e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesSize+e+1>=this.bytesLimit};e.prototype.isFull=function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit};e.prototype.flushPeriodically=function(){var e=this;setTimeout(c.monitor(function(){e.flush();e.flushPeriodically()}),this.flushTimeout)};e.prototype.flushOnVisibilityHidden=function(){var e=this;if(navigator.sendBeacon){a.addEventListener(window,"beforeunload",this.beforeUnloadCallback);a.addEventListener(document,"visibilitychange",function(){"hidden"===document.visibilityState&&e.flush()});a.addEventListener(window,"beforeunload",function(){return e.flush()})}};return e}();t.Batch=f},function(e,t,n){"use strict";function i(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return e.apply(void 0,n)}catch(s){r.display.error(t,s)}}}Object.defineProperty(t,"__esModule",{value:!0});t.catchUserErrors=void 0;var r=n(544);t.catchUserErrors=i},function(e,t,n){"use strict";function i(e,n){var i={buildMode:n.buildMode,clientToken:e.clientToken,env:e.env,proxyHost:e.proxyHost,sdkVersion:n.sdkVersion,service:e.service,site:e.site||t.INTAKE_SITE[e.datacenter||n.datacenter],version:e.version},o=r(i.site,e),a=s(o,i,void 0!==e.replica),c={isIntakeUrl:function(e){return a.some(function(t){return 0===e.indexOf(t)})},logsEndpoint:l(o,"logs",i),rumEndpoint:l(o,"rum",i),sessionReplayEndpoint:l(o,"sessionReplay",i),traceEndpoint:l(o,"trace",i)};e.internalMonitoringApiKey&&(c.internalMonitoringEndpoint=l(o,"logs",i,"browser-agent-internal-monitoring"));if(i.buildMode===h.BuildMode.E2E_TEST){c.internalMonitoringEndpoint="<<< E2E INTERNAL MONITORING ENDPOINT >>>";c.logsEndpoint="<<< E2E LOGS ENDPOINT >>>";c.rumEndpoint="<<< E2E RUM ENDPOINT >>>";c.sessionReplayEndpoint="<<< E2E SESSION REPLAY ENDPOINT >>>"}if(i.buildMode===h.BuildMode.STAGING&&void 0!==e.replica){var u=d.__assign(d.__assign({},i),{applicationId:e.replica.applicationId,clientToken:e.replica.clientToken,site:t.INTAKE_SITE[t.Datacenter.US]});c.replica={applicationId:e.replica.applicationId,internalMonitoringEndpoint:l(o,"logs",u,"browser-agent-internal-monitoring"),logsEndpoint:l(o,"logs",u),rumEndpoint:l(o,"rum",u)}}return c}function r(e,t){return!t.useAlternateIntakeDomains&&f.includes(p,e)?"classic":"alternate"}function s(e,n,i){if(n.proxyHost)return["https://"+n.proxyHost+"/v1/input/"];var r=[n.site];n.buildMode===h.BuildMode.STAGING&&i&&r.push(t.INTAKE_SITE[t.Datacenter.US]);for(var s=[],a=Object.keys(g[e]),c=0,l=r;c<l.length;c++)for(var u=l[c],d=0,f=a;d<f.length;d++){var p=f[d];s.push("https://"+o(e,p,u)+"/v1/input/")}return s}function o(e,t,n){return"classic"===e&&a(t,n)||c(t,n)}function a(e,t){var n=g.classic[e];return n&&n+"-http-intake.logs."+t}function c(e,t){var n=g.alternate[e],i=t.split("."),r=i.pop(),s=i.join("-")+"."+r;return n+".browser-intake-"+s}function l(e,t,n,i){var r="sdk_version:"+n.sdkVersion+(""+(n.env?",env:"+n.env:""))+(""+(n.service?",service:"+n.service:""))+(""+(n.version?",version:"+n.version:"")),s=o(e,t,n.site),a=n.proxyHost?n.proxyHost:s,c=n.proxyHost?"ddhost="+s+"&":"",l=c+"ddsource="+(i||"browser")+"&ddtags="+encodeURIComponent(r);return"https://"+a+"/v1/input/"+n.clientToken+"?"+l}var u;Object.defineProperty(t,"__esModule",{value:!0});t.computeTransportConfiguration=t.INTAKE_SITE=t.Datacenter=void 0;var d=n(7),h=n(554),f=n(545),g={alternate:{logs:"logs",rum:"rum",sessionReplay:"session-replay",trace:"trace"},classic:{logs:"browser",rum:"rum",sessionReplay:void 0,trace:"public-trace"}};t.Datacenter={EU:"eu",US:"us"};t.INTAKE_SITE=(u={},u[t.Datacenter.EU]="datadoghq.eu",u[t.Datacenter.US]="datadoghq.com",u);var p=[t.INTAKE_SITE[t.Datacenter.US],t.INTAKE_SITE[t.Datacenter.EU]];t.computeTransportConfiguration=i},function(e,t,n){"use strict";function i(e){var t=l.__assign(l.__assign({},e),{onReady:function(e){e()}});Object.defineProperty(t,"_setDebug",{get:function(){return h.setDebugMode},enumerable:!1});return t}function r(e,t,n){var i=e[t];e[t]=n;i&&i.q&&i.q.forEach(function(e){return f.catchUserErrors(e,"onReady callback threw an error:")()})}function s(e,t){var n=d.buildConfiguration(e,t),i=h.startInternalMonitoring(n);return{configuration:n,internalMonitoring:i}}function o(e){if(!u.areCookiesAuthorized(e)){g.display.warn("Cookies are not authorized, we will not send any data.");return!1}return!0}function a(){if(c()){g.display.error("Execution is not allowed in the current context.");return!1}return!0}function c(){return"file:"===window.location.protocol}Object.defineProperty(t,"__esModule",{value:!0});t.checkIsNotLocalFile=t.checkCookiesAuthorized=t.commonInit=t.BuildMode=t.defineGlobal=t.makePublicApi=void 0;var l=n(7),u=n(543),d=n(542),h=n(546),f=n(552),g=n(544);t.makePublicApi=i;t.defineGlobal=r;var p;!function(e){e.RELEASE="release";e.STAGING="staging";e.E2E_TEST="e2e-test"}(p=t.BuildMode||(t.BuildMode={}));t.commonInit=s;t.checkCookiesAuthorized=o;t.checkIsNotLocalFile=a},function(e,t,n){"use strict";function i(e){o=console.error;console.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=c.createHandlingStack();d.callMonitored(function(){o.apply(console,t);e.notify(a.__assign(a.__assign({},r(t,i)),{source:c.ErrorSource.CONSOLE,startClocks:l.clocksNow(),handling:c.ErrorHandling.HANDLED}))})};return{stop:function(){console.error=o}}}function r(e,t){var n=u.find(e,function(e){return e instanceof Error});return{message:a.__spreadArrays(["console error:"],e).map(function(e){return s(e)}).join(" "),stack:n?c.toStackTraceString(h.computeStackTrace(n)):void 0,handlingStack:t}}function s(e){return"string"==typeof e?e:e instanceof Error?c.formatErrorMessage(h.computeStackTrace(e)):u.jsonStringify(e,void 0,2)}Object.defineProperty(t,"__esModule",{value:!0});t.trackConsoleError=void 0;var o,a=n(7),c=n(547),l=n(556),u=n(545),d=n(546),h=n(548);t.trackConsoleError=i},function(e,t,n){"use strict";function i(e){return{relative:e,timeStamp:r(e)}}function r(e){var t=Date.now()-performance.now();return t>g()?Math.round(t+e):f(e)}function s(){return Math.round(Date.now()-(g()+performance.now()))}function o(e){return m.isNumber(e)?m.round(1e6*e,0):e}function a(){return Date.now()}function c(){return performance.now()}function l(){return{relative:c(),timeStamp:a()}}function u(){return{relative:0,timeStamp:g()}}function d(e,t){return t-e}function h(e){return e-g()}function f(e){return Math.round(g()+e)}function g(){void 0===v&&(v=performance.timing.navigationStart);return v}function p(){v=void 0}Object.defineProperty(t,"__esModule",{value:!0});t.resetNavigationStart=t.getTimeStamp=t.getRelativeTime=t.elapsed=t.clocksOrigin=t.clocksNow=t.relativeNow=t.timeStampNow=t.toServerDuration=t.currentDrift=t.relativeToClocks=void 0;var m=n(545);t.relativeToClocks=i;t.currentDrift=s;t.toServerDuration=o;t.timeStampNow=a;t.relativeNow=c;t.clocksNow=l;t.clocksOrigin=u;t.elapsed=d;t.getRelativeTime=h;t.getTimeStamp=f;var v;t.resetNavigationStart=p},function(e,t,n){"use strict";function i(e,t,n){function i(i,c){e.isIntakeUrl(c.url)||!n&&c.isAborted||!r(c)&&!s(c)||t.notify({message:a(i)+" error "+c.method+" "+c.url,resource:{method:c.method,statusCode:c.status,url:c.url},source:u.ErrorSource.NETWORK,stack:o(c.responseText,e)||"Failed to load",startClocks:c.startClocks})}void 0===n&&(n=!0);l.startXhrProxy().onRequestComplete(function(e){return i(d.RequestType.XHR,e)});c.startFetchProxy().onRequestComplete(function(e){return i(d.RequestType.FETCH,e)});return{stop:function(){l.resetXhrProxy();c.resetFetchProxy()}}}function r(e){return 0===e.status&&"opaque"!==e.responseType}function s(e){return e.status>=500}function o(e,t){return e&&e.length>t.requestErrorResponseLengthLimit?e.substring(0,t.requestErrorResponseLengthLimit)+"...":e}function a(e){return d.RequestType.XHR===e?"XHR":"Fetch"}Object.defineProperty(t,"__esModule",{value:!0});t.trackNetworkError=void 0;var c=n(558),l=n(560),u=n(547),d=n(545);t.trackNetworkError=i},function(e,t,n){"use strict";function i(){if(!c){s();c={beforeSend:function(e){m.push(e)},onRequestComplete:function(e){v.push(e)}}}return c}function r(){if(c){c=void 0;m.splice(0,m.length);v.splice(0,v.length);window.fetch=l}}function s(){if(window.fetch){l=window.fetch;window.fetch=function(e,t){var n,i=d.callMonitored(o,null,[e,t]);if(i){n=l.call(this,i.input,i.init);d.callMonitored(a,null,[n,i])}else n=l.call(this,e,t);return n}}}function o(e,t){var n=t&&t.method||"object"==typeof e&&e.method||"GET",i=p.normalizeUrl("object"==typeof e&&e.url||e),r=g.clocksNow(),s={init:t,input:e,method:n,startClocks:r,url:i};m.forEach(function(e){return e(s)});return s}function a(e,t){var n=this,i=function(e){return u.__awaiter(n,void 0,void 0,function(){var n,i;return u.__generator(this,function(r){switch(r.label){case 0:t.duration=g.elapsed(t.startClocks.timeStamp,g.timeStampNow());if(!("stack"in e||e instanceof Error))return[3,1];t.status=0;t.responseText=f.toStackTraceString(h.computeStackTrace(e));t.isAborted=e instanceof DOMException&&e.code===DOMException.ABORT_ERR;t.error=e;v.forEach(function(e){return e(t)});return[3,6];case 1:if(!("status"in e))return[3,6];n=void 0;r.label=2;case 2:r.trys.push([2,4,,5]);return[4,e.clone().text()];case 3:n=r.sent();return[3,5];case 4:i=r.sent();n="Unable to retrieve response: "+i;return[3,5];case 5:t.response=e;t.responseText=n;t.responseType=e.type;t.status=e.status;t.isAborted=!1;v.forEach(function(e){return e(t)});r.label=6;case 6:return[2]}})})};e.then(d.monitor(i),d.monitor(i))}Object.defineProperty(t,"__esModule",{value:!0});t.resetFetchProxy=t.startFetchProxy=void 0;var c,l,u=n(7),d=n(546),h=n(548),f=n(547),g=n(556),p=n(559),m=[],v=[];t.startFetchProxy=i;t.resetFetchProxy=r},function(e,t,n){"use strict";function i(e){return u(e,h.getLocationOrigin()).href}function r(e){try{return!!u(e)}catch(t){return!1}}function s(e,t){return o(e)===o(t)}function o(e){return h.getLinkElementOrigin(u(e))}function a(e){var t=u(e).pathname;return"/"===t[0]?t:"/"+t}function c(e){return u(e).search}function l(e){return u(e).hash}function u(e,t){if(d())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '"+e+"'");var n=document,i=n.createElement("a");if(void 0!==t){n=document.implementation.createHTMLDocument("");var r=n.createElement("base");r.href=t;n.head.appendChild(r);n.body.appendChild(i)}i.href=e;return i}function d(){if(void 0!==f)return f;try{var e=new URL("http://test/path");f="http://test/path"===e.href;return f}catch(t){f=!1}return f}Object.defineProperty(t,"__esModule",{value:!0});t.buildUrl=t.getHash=t.getSearch=t.getPathName=t.getOrigin=t.haveSameOrigin=t.isValidUrl=t.normalizeUrl=void 0;var h=n(545);t.normalizeUrl=i;t.isValidUrl=r;t.haveSameOrigin=s;t.getOrigin=o;t.getPathName=a;t.getSearch=c;t.getHash=l;t.buildUrl=u;var f},function(e,t,n){"use strict";function i(){if(!l){u=XMLHttpRequest.prototype.open;d=XMLHttpRequest.prototype.send;h=XMLHttpRequest.prototype.abort;XMLHttpRequest.prototype.open=s;XMLHttpRequest.prototype.send=o;XMLHttpRequest.prototype.abort=a;l={beforeSend:function(e){v.push(e)},onRequestComplete:function(e){_.push(e)}}}return l}function r(){if(l){l=void 0;v.length=0;_.length=0;XMLHttpRequest.prototype.open=u;XMLHttpRequest.prototype.send=d;XMLHttpRequest.prototype.abort=h}}function s(e,t){var n=this;g.callMonitored(function(){n._datadog_xhr={method:e,url:m.normalizeUrl(t)}});return u.apply(this,arguments)}function o(){var e=this;g.callMonitored(function(){if(e._datadog_xhr){e._datadog_xhr.startTime=p.relativeNow();e._datadog_xhr.startClocks=p.clocksNow();e._datadog_xhr.isAborted=!1;var t=!1,n=e.onreadystatechange,i=function(){this.readyState===XMLHttpRequest.DONE&&r();n&&n.apply(this,arguments)},r=g.monitor(function(){e.removeEventListener("loadend",r);e.onreadystatechange===i&&(e.onreadystatechange=n);if(!t){t=!0;c(e)}});e.onreadystatechange=i;e.addEventListener("loadend",r);v.forEach(function(t){return t(e._datadog_xhr,e)})}});return d.apply(this,arguments)}function a(){var e=this;g.callMonitored(function(){e._datadog_xhr&&(e._datadog_xhr.isAborted=!0)});return h.apply(this,arguments)}function c(e){e._datadog_xhr.duration=p.elapsed(e._datadog_xhr.startClocks.timeStamp,p.timeStampNow());e._datadog_xhr.responseText=e.response;e._datadog_xhr.status=e.status;e._datadog_xhr.xhr=e;_.forEach(function(t){return t(f.__assign({},e._datadog_xhr))})}Object.defineProperty(t,"__esModule",{value:!0});t.resetXhrProxy=t.startXhrProxy=void 0;var l,u,d,h,f=n(7),g=n(546),p=n(556),m=n(559),v=[],_=[];t.startXhrProxy=i;t.resetXhrProxy=r},function(e,t,n){"use strict";function i(e){r=function(t,n,i){var r=s.formatUnknownError(t,i,"Uncaught"),a=r.stack,c=r.message,l=r.type;e.notify({message:c,stack:a,type:l,source:s.ErrorSource.SOURCE,startClocks:o.clocksNow(),originalError:i,handling:s.ErrorHandling.UNHANDLED})};a.subscribe(r);return{stop:function(){a.unsubscribe(r)}}}Object.defineProperty(t,"__esModule",{value:!0});t.trackRuntimeError=void 0;var r,s=n(547),o=n(556),a=n(548);t.trackRuntimeError=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Observable=void 0;var n=function(){function e(){this.observers=[]}e.prototype.subscribe=function(e){var t=this;this.observers.push(e);return{unsubscribe:function(){t.observers=t.observers.filter(function(t){return e!==t})}}};e.prototype.notify=function(e){this.observers.forEach(function(t){return t(e)})};return e}();t.Observable=n},function(e,t,n){"use strict";function i(e,n,i){var r=g.cacheCookieAccess(t.SESSION_COOKIE_NAME,e);_.tryOldCookiesMigration(r);var o=new p.Observable,a=s(r).id,l=m.throttle(v.monitor(function(){var e=s(r),t=i(e[n]),l=t.trackingType,u=t.isTracked;e[n]=l;if(u&&!e.id){e.id=m.generateUUID();e.created=String(Date.now())}c(e,r);if(u&&a!==e.id){a=e.id;o.notify()}}),g.COOKIE_ACCESS_DELAY).throttled,u=function(){var e=s(r);c(e,r)};l();d(l);h(u);return{getId:function(){return s(r).id},getTrackingType:function(){return s(r)[n]},renewObservable:o}}function r(e){return void 0!==e&&(-1!==e.indexOf(k)||y.test(e))}function s(e){var t=a(e);if(o(t))return t;l(e);return{}}function o(e){return(void 0===e.created||Date.now()-Number(e.created)<t.SESSION_TIME_OUT_DELAY)&&(void 0===e.expire||Date.now()<Number(e.expire))}function a(e){var t=e.get(),n={};r(t)&&t.split(k).forEach(function(e){var t=y.exec(e);if(null!==t){var i=t[1],r=t[2];n[i]=r}});return n}function c(e,n){if(m.isEmptyObject(e))l(n);else{e.expire=String(Date.now()+t.SESSION_EXPIRATION_DELAY);var i=m.objectEntries(e).map(function(e){var t=e[0],n=e[1];return t+"="+n}).join(k);n.set(i,t.SESSION_EXPIRATION_DELAY)}}function l(e){e.set("",0)}function u(){b.forEach(function(e){return e()});b=[]}function d(e){var t=m.addEventListeners(window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop;b.push(t)}function h(e){var n=v.monitor(function(){"visible"===document.visibilityState&&e()}),i=m.addEventListener(document,"visibilitychange",n).stop;b.push(i);var r=setInterval(n,t.VISIBILITY_CHECK_DELAY);b.push(function(){clearInterval(r)})}Object.defineProperty(t,"__esModule",{value:!0});t.trackActivity=t.stopSessionManagement=t.persistSession=t.isValidSessionString=t.startSessionManagement=t.VISIBILITY_CHECK_DELAY=t.SESSION_TIME_OUT_DELAY=t.SESSION_EXPIRATION_DELAY=t.SESSION_COOKIE_NAME=void 0;var f=n(7),g=n(543),p=n(562),m=f.__importStar(n(545)),v=n(546),_=n(564);t.SESSION_COOKIE_NAME="_dd_s";t.SESSION_EXPIRATION_DELAY=15*m.ONE_MINUTE;t.SESSION_TIME_OUT_DELAY=4*m.ONE_HOUR;t.VISIBILITY_CHECK_DELAY=m.ONE_MINUTE;t.startSessionManagement=i;var y=/^([a-z]+)=([a-z0-9-]+)$/,k="&";t.isValidSessionString=r;t.persistSession=c;t.stopSessionManagement=u;var b=[];t.trackActivity=d},function(e,t,n){"use strict";function i(e){var n=e.get(),i=r.getCookie(t.OLD_SESSION_COOKIE_NAME),o=r.getCookie(t.OLD_RUM_COOKIE_NAME),a=r.getCookie(t.OLD_LOGS_COOKIE_NAME);if(!n){var c={};i&&(c.id=i);a&&/^[01]$/.test(a)&&(c[t.LOGS_SESSION_KEY]=a);o&&/^[012]$/.test(o)&&(c[t.RUM_SESSION_KEY]=o);s.persistSession(c,e)}}Object.defineProperty(t,"__esModule",{value:!0});t.tryOldCookiesMigration=t.LOGS_SESSION_KEY=t.RUM_SESSION_KEY=t.OLD_LOGS_COOKIE_NAME=t.OLD_RUM_COOKIE_NAME=t.OLD_SESSION_COOKIE_NAME=void 0;var r=n(543),s=n(563);t.OLD_SESSION_COOKIE_NAME="_dd";t.OLD_RUM_COOKIE_NAME="_dd_r";t.OLD_LOGS_COOKIE_NAME="_dd_l";t.RUM_SESSION_KEY="rum";t.LOGS_SESSION_KEY="logs";t.tryOldCookiesMigration=i},function(e,t,n){"use strict";function i(e,t){var n=0,i=!1;return{isLimitReached:function(){0===n&&setTimeout(function(){n=0},o.ONE_MINUTE);n+=1;if(n<=e.maxErrorsByMinute||i){i=!1;return!1}if(n===e.maxErrorsByMinute+1){i=!0;try{t({message:"Reached max number of errors by minute: "+e.maxErrorsByMinute,source:r.ErrorSource.AGENT,startClocks:s.clocksNow()})}finally{i=!1}}return!0}}}Object.defineProperty(t,"__esModule",{value:!0});t.createErrorFilter=void 0;var r=n(547),s=n(556),o=n(545);t.createErrorFilter=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BoundedBuffer=void 0;var n=1e4,i=function(){function e(e){void 0===e&&(e=n);this.limit=e;this.buffer=[]}e.prototype.add=function(e){var t=this.buffer.push(e);t>this.limit&&this.buffer.splice(0,1)};e.prototype.drain=function(){this.buffer.forEach(function(e){return e()});this.buffer.length=0};return e}();t.BoundedBuffer=i},function(e,t){"use strict";function n(){var e={};return{get:function(){return e},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},set:function(t){e=t}}}Object.defineProperty(t,"__esModule",{value:!0});t.createContextManager=void 0;t.createContextManager=n},function(e,t,n){"use strict";function i(e,t,n){var i=a.deepClone(e),o=n(i);t.forEach(function(t){var n=r(e,t),o=r(i,t),c=a.getType(n),l=a.getType(o);l===c?s(e,t,o):"object"!==c||"undefined"!==l&&"null"!==l||s(e,t,{})});return o}function r(e,t){for(var n=e,i=0,r=t.split(".");i<r.length;i++){var s=r[i];if(!o(n,s))return;n=n[s]}return n}function s(e,t,n){for(var i=e,r=t.split("."),s=0;s<r.length;s+=1){var a=r[s];if(!o(i,a))return;s!==r.length-1?i=i[a]:i[a]=n}}function o(e,t){return"object"==typeof e&&null!==e&&t in e}Object.defineProperty(t,"__esModule",{value:!0});t.limitModification=void 0;var a=n(545);t.limitModification=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getMutationObserverConstructor=t.LifeCycleEventType=t.LifeCycle=t.startRum=t.makeRumPublicApi=void 0;var i=n(570);Object.defineProperty(t,"makeRumPublicApi",{enumerable:!0,get:function(){return i.makeRumPublicApi}});var r=n(573);Object.defineProperty(t,"startRum",{enumerable:!0,get:function(){return r.startRum}});var s=n(576);Object.defineProperty(t,"LifeCycle",{enumerable:!0,get:function(){return s.LifeCycle}});Object.defineProperty(t,"LifeCycleEventType",{enumerable:!0,get:function(){return s.LifeCycleEventType}});var o=n(574);Object.defineProperty(t,"getMutationObserverConstructor",{enumerable:!0,get:function(){return o.getMutationObserverConstructor}})},function(e,t,n){"use strict";function i(e){function t(){return r.deepClone({context:l.get(),user:u})}function n(t){function n(n){var i;i=e(t,s,_,function(){return{user:u,context:l.get()}},n),p=i.startView,m=i.addAction,v=i.addError,g=i.addTiming,d=i.getInternalContext;f.drain()}if(r.checkCookiesAuthorized(r.buildCookieOptions(t))&&r.checkIsNotLocalFile()&&a(t)){t.publicApiKey&&(t.clientToken=t.publicApiKey);var i=r.commonInit(t,o.buildEnv),s=i.configuration,_=i.internalMonitoring;if(s.trackViewsManually){var y=f;f=new r.BoundedBuffer;p=function(e){n(e)};y.drain()}else n();h=function(){return r.deepClone(t)};c=!0}}function i(e){if("object"==typeof e&&e){var t=r.deepClone(e);"id"in t&&(t.id=String(t.id));"name"in t&&(t.name=String(t.name));"email"in t&&(t.email=String(t.email));return t}}function a(e){if(c){e.silentMultipleInit||r.display.error("DD_RUM is already initialized.");return!1}if(!e||!e.clientToken&&!e.publicApiKey){r.display.error("Client Token is not configured, we will not send any data.");return!1}if(!e.applicationId){r.display.error("Application ID is not configured, no RUM data will be collected.");return!1}if(void 0!==e.sampleRate&&!r.isPercentage(e.sampleRate)){r.display.error("Sample Rate should be a number between 0 and 100");return!1}if(void 0!==e.resourceSampleRate&&!r.isPercentage(e.resourceSampleRate)){r.display.error("Resource Sample Rate should be a number between 0 and 100");return!1}if(Array.isArray(e.allowedTracingOrigins)&&0!==e.allowedTracingOrigins.length&&void 0===e.service){r.display.error("Service need to be configured when tracing is enabled");return!1}return!0}var c=!1,l=r.createContextManager(),u={},d=function(){return void 0},h=function(){return void 0},f=new r.BoundedBuffer,g=function(e,t){void 0===t&&(t=r.timeStampNow());f.add(function(){return g(e,t)})},p=function(e,t){void 0===t&&(t=r.clocksNow());f.add(function(){return p(e,t)})},m=function(e,n){void 0===n&&(n=t());f.add(function(){return m(e,n)})},v=function(e,n){void 0===n&&(n=t());f.add(function(){
return v(e,n)})},_=r.makePublicApi({init:r.monitor(n),addRumGlobalContext:r.monitor(l.add),removeRumGlobalContext:r.monitor(l.remove),getRumGlobalContext:r.monitor(l.get),setRumGlobalContext:r.monitor(l.set),getInternalContext:r.monitor(function(e){return d(e)}),getInitConfiguration:r.monitor(function(){return h()}),addAction:r.monitor(function(e,t){m({name:e,context:r.deepClone(t),startClocks:r.clocksNow(),type:s.ActionType.CUSTOM})}),addUserAction:function(e,t){_.addAction(e,t)},addError:function(e,t,n){void 0===n&&(n=r.ErrorSource.CUSTOM);var i=r.createHandlingStack();r.callMonitored(function(){var s;if(n===r.ErrorSource.CUSTOM||n===r.ErrorSource.NETWORK||n===r.ErrorSource.SOURCE)s=n;else{r.display.error("DD_RUM.addError: Invalid source '"+n+"'");s=r.ErrorSource.CUSTOM}v({error:e,handlingStack:i,context:r.deepClone(t),source:s,startClocks:r.clocksNow()})})},addTiming:r.monitor(function(e){g(e)}),setUser:r.monitor(function(e){var t=i(e);t?u=t:r.display.error("Unsupported user:",e)}),removeUser:r.monitor(function(){u={}}),startView:r.monitor(function(e){p(e)})});return _}Object.defineProperty(t,"__esModule",{value:!0});t.makeRumPublicApi=void 0;var r=n(541),s=n(571),o=n(572);t.makeRumPublicApi=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ActionType=t.ViewLoadingType=t.RumEventType=void 0;var n;!function(e){e.ACTION="action";e.ERROR="error";e.LONG_TASK="long_task";e.VIEW="view";e.RESOURCE="resource"}(n=t.RumEventType||(t.RumEventType={}));var i;!function(e){e.INITIAL_LOAD="initial_load";e.ROUTE_CHANGE="route_change"}(i=t.ViewLoadingType||(t.ViewLoadingType={}));var r;!function(e){e.CLICK="click";e.CUSTOM="custom"}(r=t.ActionType||(t.ActionType={}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.buildEnv=void 0;t.buildEnv={buildMode:"release",datacenter:"us",sdkVersion:"2.18.0"}},function(e,t,n){"use strict";function i(e,t,n,i,c){var l=new d.LifeCycle,h=y.startRumSession(t,l),k=o.createDOMMutationObservable();n.setExternalContextProvider(function(){return s.combine({application_id:e.applicationId},S.findView(),i().context)});var b=r(e.applicationId,l,t,h,i),S=b.parentContexts,w=b.foregroundContexts;m.startLongTaskCollection(l);v.startResourceCollection(l,h);var C=_.startViewCollection(l,t,location,k,w,c),E=C.addTiming,T=C.startView,I=p.startErrorCollection(l,t,w).addError,A=g.startActionCollection(l,k,t,w).addAction;f.startRequestCollection(l,t);a.startPerformanceCollection(l,t);var x=u.startInternalContext(e.applicationId,h,S);return{addAction:A,addError:I,addTiming:E,startView:T,lifeCycle:l,parentContexts:S,session:h,getInternalContext:x.get}}function r(e,t,n,i,r){var s=h.startParentContexts(t,i),o=l.startForegroundContexts(n),a=k.startRumBatch(n,t);c.startRumAssembly(e,n,t,i,s,r);return{parentContexts:s,foregroundContexts:o,stop:function(){a.stop();s.stop();o.stop()}}}Object.defineProperty(t,"__esModule",{value:!0});t.startRumEventCollection=t.startRum=void 0;var s=n(541),o=n(574),a=n(575),c=n(579),l=n(580),u=n(581),d=n(576),h=n(582),f=n(583),g=n(585),p=n(590),m=n(591),v=n(592),_=n(594),y=n(600),k=n(601);t.startRum=i;t.startRumEventCollection=r},function(e,t,n){"use strict";function i(){function e(){i.forEach(function(e){return e()})}function t(){a&&a.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}function n(){a&&a.disconnect()}var i=[],o=r(),a=o?new o(s.monitor(e)):void 0;return{subscribe:function(e){i.length||t();i.push(e);return{unsubscribe:function(){i=i.filter(function(t){return e!==t});i.length||n()}}}}}function r(){var e,t=window;if(t.Zone){var n=t.Zone.__symbol__("MutationObserver");e=t[n]}e||(e=t.MutationObserver);return e}Object.defineProperty(t,"__esModule",{value:!0});t.getMutationObserverConstructor=t.createDOMMutationObservable=void 0;var s=n(541);t.createDOMMutationObservable=i;t.getMutationObserverConstructor=r},function(e,t,n){"use strict";function i(){return void 0!==window.performance&&"getEntries"in performance}function r(e){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(e)}function s(){return"function"==typeof PerformanceEntry}function o(e,t){a(function(n){h(e,t,n)});i()&&d(e,t,performance.getEntries());if(window.PerformanceObserver){var n=new PerformanceObserver(m.monitor(function(n){return d(e,t,n.getEntries())})),s=["resource","navigation","longtask","paint","largest-contentful-paint","first-input","layout-shift"];n.observe({entryTypes:s});i()&&"addEventListener"in performance&&performance.addEventListener("resourcetimingbufferfull",function(){performance.clearResourceTimings()})}r("navigation")||c(function(n){h(e,t,n)});r("first-input")||l(function(n){h(e,t,n)})}function a(e){m.runOnReadyState("interactive",function(){var t,n={entryType:"resource",initiatorType:_.FAKE_INITIAL_DOCUMENT,traceId:y.getDocumentTraceId(document)};if(r("navigation")&&performance.getEntriesByType("navigation").length>0){var i=performance.getEntriesByType("navigation")[0];t=p.__assign(p.__assign({},i.toJSON()),n)}else{var s=u();t=p.__assign(p.__assign(p.__assign({},s),{decodedBodySize:0,duration:s.responseEnd,name:window.location.href,startTime:0}),n)}e(t)})}function c(e){function t(){e(p.__assign(p.__assign({},u()),{entryType:"navigation"}))}m.runOnReadyState("complete",function(){setTimeout(m.monitor(t))})}function l(e){function t(e){m.addEventListeners(window,["pointerup","pointercancel"],function(t){"pointerup"===t.type&&n(e)},{once:!0})}function n(t){if(!r){r=!0;s();var n=t.processingStart-t.startTime;n>=0&&n<Date.now()-i&&e(t)}}var i=Date.now(),r=!1,s=m.addEventListeners(window,["click","mousedown","keydown","touchstart","pointerdown"],function(e){if(e.cancelable){var i={entryType:"first-input",processingStart:m.relativeNow(),startTime:e.timeStamp};"pointerdown"===e.type?t(i):n(i)}},{passive:!0,capture:!0}).stop}function u(){var e={},t=performance.timing;for(var n in t)if(m.isNumber(t[n])){var i=n,r=t[i];e[i]=0===r?0:m.getRelativeTime(r)}return e}function d(e,t,n){n.forEach(function(n){("resource"===n.entryType||"navigation"===n.entryType||"paint"===n.entryType||"longtask"===n.entryType||"largest-contentful-paint"===n.entryType||"first-input"===n.entryType||"layout-shift"===n.entryType)&&h(e,t,n)})}function h(e,t,n){f(n)||g(t,n)||e.notify(v.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,n)}function f(e){return"navigation"===e.entryType&&e.loadEventEnd<=0}function g(e,t){return"resource"===t.entryType&&!_.isAllowedRequestUrl(e,t.name)}Object.defineProperty(t,"__esModule",{value:!0});t.retrieveInitialDocumentResourceTiming=t.startPerformanceCollection=t.supportPerformanceEntry=t.supportPerformanceTimingEvent=void 0;var p=n(7),m=n(541),v=n(576),_=n(577),y=n(578);t.supportPerformanceTimingEvent=r;t.supportPerformanceEntry=s;t.startPerformanceCollection=o;t.retrieveInitialDocumentResourceTiming=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LifeCycle=t.LifeCycleEventType=void 0;var n;!function(e){e[e.PERFORMANCE_ENTRY_COLLECTED=0]="PERFORMANCE_ENTRY_COLLECTED";e[e.AUTO_ACTION_CREATED=1]="AUTO_ACTION_CREATED";e[e.AUTO_ACTION_COMPLETED=2]="AUTO_ACTION_COMPLETED";e[e.AUTO_ACTION_DISCARDED=3]="AUTO_ACTION_DISCARDED";e[e.VIEW_CREATED=4]="VIEW_CREATED";e[e.VIEW_UPDATED=5]="VIEW_UPDATED";e[e.VIEW_ENDED=6]="VIEW_ENDED";e[e.REQUEST_STARTED=7]="REQUEST_STARTED";e[e.REQUEST_COMPLETED=8]="REQUEST_COMPLETED";e[e.SESSION_RENEWED=9]="SESSION_RENEWED";e[e.BEFORE_UNLOAD=10]="BEFORE_UNLOAD";e[e.RAW_RUM_EVENT_COLLECTED=11]="RAW_RUM_EVENT_COLLECTED";e[e.RUM_EVENT_COLLECTED=12]="RUM_EVENT_COLLECTED";e[e.RECORD_STARTED=13]="RECORD_STARTED";e[e.RECORD_STOPPED=14]="RECORD_STOPPED";e[e.RAW_ERROR_COLLECTED=15]="RAW_ERROR_COLLECTED"}(n=t.LifeCycleEventType||(t.LifeCycleEventType={}));var i=function(){function e(){this.callbacks={}}e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach(function(e){return e(t)})};e.prototype.subscribe=function(e,t){var n=this;this.callbacks[e]||(this.callbacks[e]=[]);this.callbacks[e].push(t);return{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter(function(e){return t!==e})}}};return e}();t.LifeCycle=i},function(e,t,n){"use strict";function i(e){var t=e.name;if(!g.isValidUrl(t)){g.addMonitoringMessage('Failed to construct URL for "'+e.name+'"');return g.ResourceType.OTHER}for(var n=g.getPathName(t),i=0,r=p;i<r.length;i++){var s=r[i],o=s[0],a=s[1];if(a(e.initiatorType,n))return o}return g.ResourceType.OTHER}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1;n<e.length;n+=1)if(e[n-1]>e[n])return!1;return!0}function s(e){return"xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType}function o(e){var t=e.duration,n=e.startTime,i=e.responseEnd;if(0===t&&i>n)return g.toServerDuration(g.elapsed(n,i));t>g.ONE_DAY&&g.addMonitoringMessage("resource duration > 1 day",{debug:{type:e.initiatorType,name:e.name,startTime:Math.round(n),responseEnd:Math.round(i),duration:Math.round(t),relativeNow:Math.round(g.relativeNow()),timeStampNow:g.timeStampNow()}});return g.toServerDuration(t)}function a(e){var t=c(e);if(!t)return void 0;var n=t.startTime,i=t.fetchStart,s=t.redirectStart,o=t.redirectEnd,a=t.domainLookupStart,d=t.domainLookupEnd,h=t.connectStart,f=t.secureConnectionStart,g=t.connectEnd,p=t.requestStart,m=t.responseStart,v=t.responseEnd,_={download:u(n,m,v),first_byte:u(n,p,m)};if(g!==i){_.connect=u(n,h,g);r(h,f,g)&&(_.ssl=u(n,f,g))}d!==i&&(_.dns=u(n,a,d));l(e)&&(_.redirect=u(n,s,o));return _}function c(e){if(!r(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd))return void 0;if(!l(e))return e;var t=e.redirectStart,n=e.redirectEnd;t<e.startTime&&(t=e.startTime);n<e.startTime&&(n=e.fetchStart);return r(e.startTime,t,n,e.fetchStart)?f.__assign(f.__assign({},e),{redirectEnd:n,redirectStart:t}):void 0}function l(e){return e.fetchStart!==e.startTime}function u(e,t,n){return{duration:g.toServerDuration(g.elapsed(t,n)),start:g.toServerDuration(g.elapsed(e,t))}}function d(e){return e.startTime<e.responseStart?e.decodedBodySize:void 0}function h(e,t){return t&&!e.isIntakeUrl(t)}Object.defineProperty(t,"__esModule",{value:!0});t.isAllowedRequestUrl=t.computeSize=t.toValidEntry=t.computePerformanceResourceDetails=t.computePerformanceResourceDuration=t.isRequestKind=t.computeResourceKind=t.FAKE_INITIAL_DOCUMENT=void 0;var f=n(7),g=n(541);t.FAKE_INITIAL_DOCUMENT="initial_document";var p=[[g.ResourceType.DOCUMENT,function(e){return t.FAKE_INITIAL_DOCUMENT===e}],[g.ResourceType.XHR,function(e){return"xmlhttprequest"===e}],[g.ResourceType.FETCH,function(e){return"fetch"===e}],[g.ResourceType.BEACON,function(e){return"beacon"===e}],[g.ResourceType.CSS,function(e,t){return/\.css$/i.test(t)}],[g.ResourceType.JS,function(e,t){return/\.js$/i.test(t)}],[g.ResourceType.IMAGE,function(e,t){return g.includes(["image","img","icon"],e)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(t)}],[g.ResourceType.FONT,function(e,t){return null!==/\.(woff|eot|woff2|ttf)$/i.exec(t)}],[g.ResourceType.MEDIA,function(e,t){return g.includes(["audio","video"],e)||null!==/\.(mp3|mp4)$/i.exec(t)}]];t.computeResourceKind=i;t.isRequestKind=s;t.computePerformanceResourceDuration=o;t.computePerformanceResourceDetails=a;t.toValidEntry=c;t.computeSize=d;t.isAllowedRequestUrl=h},function(e,t,n){"use strict";function i(e){var n=r(e)||s(e);return!n||n.traceTime<=Date.now()-t.INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD?void 0:n.traceId}function r(e){var t=e.querySelector("meta[name=dd-trace-id]"),n=e.querySelector("meta[name=dd-trace-time]");return o(t&&t.content,n&&n.content)}function s(e){var t=a(e);return t?o(d.findCommaSeparatedValue(t,"trace-id"),d.findCommaSeparatedValue(t,"trace-time")):void 0}function o(e,t){var n=t&&Number(t);return e&&n?{traceId:e,traceTime:n}:void 0}function a(e){for(var t=0;t<e.childNodes.length;t+=1){var n=c(e.childNodes[t]);if(n)return n}if(e.body)for(var t=e.body.childNodes.length-1;t>=0;t-=1){var i=e.body.childNodes[t],n=c(i);if(n)return n;if(!u(i))break}}function c(e){if(e&&l(e)){var t=/^\s*DATADOG;(.*?)\s*$/.exec(e.data);if(t)return t[1]}}function l(e){return"#comment"===e.nodeName}function u(e){return"#text"===e.nodeName}Object.defineProperty(t,"__esModule",{value:!0});t.findTraceComment=t.createDocumentTraceData=t.getDocumentTraceDataFromComment=t.getDocumentTraceDataFromMeta=t.getDocumentTraceId=t.INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD=void 0;var d=n(541);t.INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD=2*d.ONE_MINUTE;t.getDocumentTraceId=i;t.getDocumentTraceDataFromMeta=r;t.getDocumentTraceDataFromComment=s;t.createDocumentTraceData=o;t.findTraceComment=a},function(e,t,n){"use strict";function i(e,t,n,i,a,c){var u=l.createErrorFilter(t,function(e){n.notify(d.LifeCycleEventType.RAW_ERROR_COLLECTED,{error:e})});n.subscribe(d.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,function(h){var f=h.startTime,g=h.rawRumEvent,p=h.domainContext,m=h.savedCommonContext,v=h.customerContext,_=a.findView(f),y=i.getPlan();if(y&&_&&_.session.id===i.getId()){var k=a.findAction(f),b=m||c(),S={_dd:{format_version:2,drift:l.currentDrift(),session:{plan:y}},application:{id:e},date:l.timeStampNow(),service:t.service,session:{type:o()}},w=s(g)?l.combine(S,_,k,g):l.combine(S,_,g);w.context=l.combine(b.context,v);"has_replay"in w.session||(w.session.has_replay=b.hasReplay);l.isEmptyObject(b.user)||(w.usr=b.user);if(r(w,t.beforeSend,p,u)){l.isEmptyObject(w.context)&&delete w.context;"number"!=typeof w.date&&l.addMonitoringMessage("invalid date",{debug:{eventType:w.type,eventTimeStamp:w.date,eventRelativeTime:Math.round(f),timeStampNow:l.timeStampNow(),relativeNow:Math.round(l.relativeNow()),drift:l.currentDrift()}});n.notify(d.LifeCycleEventType.RUM_EVENT_COLLECTED,w)}}})}function r(e,t,n,i){if(t){var r=l.limitModification(e,e.type===u.RumEventType.VIEW?h:f,function(e){return t(e,n)});if(r===!1&&e.type!==u.RumEventType.VIEW)return!1;r===!1&&l.display.warn("Can't dismiss view events using beforeSend!")}return e.type===u.RumEventType.ERROR?!i.isLimitReached():!0}function s(e){return-1!==[u.RumEventType.ERROR,u.RumEventType.RESOURCE,u.RumEventType.LONG_TASK].indexOf(e.type)}function o(){return void 0===window._DATADOG_SYNTHETICS_BROWSER?a.USER:a.SYNTHETICS}Object.defineProperty(t,"__esModule",{value:!0});t.startRumAssembly=void 0;var a,c=n(7),l=n(541),u=n(571),d=n(576);!function(e){e.SYNTHETICS="synthetics";e.USER="user"}(a||(a={}));var h=["view.url","view.referrer","action.target.name","error.message","error.stack","error.resource.url","resource.url"],f=c.__spreadArrays(h,["context"]);t.startRumAssembly=i},function(e,t,n){"use strict";function i(e){if(!e.isEnabled("track-foreground"))return{getInForeground:function(){return void 0},getInForegroundPeriods:function(){return void 0},stop:u.noop};document.hasFocus()&&r();var t=o(r).stop,n=a(s).stop;return{getInForeground:c,getInForegroundPeriods:l,stop:function(){d=[];t();n()}}}function r(){if(d.length>t.MAX_NUMBER_OF_FOCUSED_TIME)u.addMonitoringMessage("Reached maximum of foreground time");else{var e=d[d.length-1];void 0===e||void 0!==e.end?d.push({start:u.relativeNow()}):u.addMonitoringMessage("Previous foreground periods not closed. Continuing current one",{inForegroundPeriodsCount:d.length,currentForegroundPeriodStart:e.start})}}function s(){if(0!==d.length){var e=d[d.length-1];void 0===e.end?e.end=u.relativeNow():u.addMonitoringMessage("Current foreground period already closed",{inForegroundPeriodsCount:d.length,currentForegroundPeriodStart:e.start,currentForegroundPeriodEnd:e.end})}else u.addMonitoringMessage("No foreground period")}function o(e){return u.addEventListener(window,"focus",function(){return e()})}function a(e){return u.addEventListener(window,"blur",function(){return e()})}function c(e){for(var t=d.length-1;t>=0;t--){var n=d[t];if(void 0!==n.end&&e>n.end)break;if(e>n.start&&(void 0===n.end||e<n.end))return!0}return!1}function l(e,t){for(var n=e+t,i=[],r=d.length-1;r>=0;r--){var s=d[r];if(void 0!==s.end&&e>s.end)break;if(!(n<s.start)){var o=e>s.start?e:s.start,a=u.elapsed(e,o),c=void 0===s.end||n<s.end?n:s.end,l=u.elapsed(o,c);i.unshift({start:u.toServerDuration(a),duration:u.toServerDuration(l)})}}return i}Object.defineProperty(t,"__esModule",{value:!0});t.startForegroundContexts=t.MAX_NUMBER_OF_FOCUSED_TIME=void 0;var u=n(541);t.MAX_NUMBER_OF_FOCUSED_TIME=500;var d=[];t.startForegroundContexts=i},function(e,t){"use strict";function n(e,t,n){return{get:function(i){var r=n.findView(i);if(t.isTracked()&&r&&r.session.id){var s=n.findAction(i);return{application_id:e,session_id:r.session.id,user_action:s?{id:s.action.id}:void 0,view:r.view}}}}}Object.defineProperty(t,"__esModule",{value:!0});t.startInternalContext=void 0;t.startInternalContext=n},function(e,t,n){"use strict";function i(e,n){function i(e,t){for(var n=r.relativeNow()-t;e.length>0&&e[e.length-1].startTime<n;)e.pop()}function o(){return{session:{id:d},view:{id:l.id,name:l.name,referrer:l.referrer,url:l.location.href}}}function a(){return{action:{id:u.id}}}function c(e,t,n,i){if(void 0===i)return n?e():void 0;if(n&&i>=n.startClocks.relative)return e();for(var r=0,s=t;r<s.length;r++){var o=s[r];if(i>o.endTime)break;if(i>=o.startTime)return o.context}return void 0}var l,u,d,h=[],f=[];e.subscribe(s.LifeCycleEventType.VIEW_CREATED,function(e){l=e;d=n.getId()});e.subscribe(s.LifeCycleEventType.VIEW_UPDATED,function(e){l&&l.id===e.id&&(l=e)});e.subscribe(s.LifeCycleEventType.VIEW_ENDED,function(e){var t=e.endClocks;if(l){h.unshift({endTime:t.relative,context:o(),startTime:l.startClocks.relative});l=void 0}});e.subscribe(s.LifeCycleEventType.AUTO_ACTION_CREATED,function(e){u=e});e.subscribe(s.LifeCycleEventType.AUTO_ACTION_COMPLETED,function(e){u&&f.unshift({context:a(),endTime:u.startClocks.relative+e.duration,startTime:u.startClocks.relative});u=void 0});e.subscribe(s.LifeCycleEventType.AUTO_ACTION_DISCARDED,function(){u=void 0});e.subscribe(s.LifeCycleEventType.SESSION_RENEWED,function(){h=[];f=[];l=void 0;u=void 0});var g=setInterval(r.monitor(function(){i(h,t.VIEW_CONTEXT_TIME_OUT_DELAY);i(f,t.ACTION_CONTEXT_TIME_OUT_DELAY)}),t.CLEAR_OLD_CONTEXTS_INTERVAL);return{findAction:function(e){return c(a,f,u,e)},findView:function(e){return c(o,h,l,e)},stop:function(){clearInterval(g)}}}Object.defineProperty(t,"__esModule",{value:!0});t.startParentContexts=t.CLEAR_OLD_CONTEXTS_INTERVAL=t.ACTION_CONTEXT_TIME_OUT_DELAY=t.VIEW_CONTEXT_TIME_OUT_DELAY=void 0;var r=n(541),s=n(576);t.VIEW_CONTEXT_TIME_OUT_DELAY=r.SESSION_TIME_OUT_DELAY;t.ACTION_CONTEXT_TIME_OUT_DELAY=5*r.ONE_MINUTE;t.CLEAR_OLD_CONTEXTS_INTERVAL=r.ONE_MINUTE;t.startParentContexts=i},function(e,t,n){"use strict";function i(e,t){var n=u.startTracer(t);r(e,t,n);s(e,t,n)}function r(e,t,n){var i=a.startXhrProxy();i.beforeSend(function(i,r){if(l.isAllowedRequestUrl(t,i.url)){n.traceXhr(i,r);i.requestIndex=o();e.notify(c.LifeCycleEventType.REQUEST_STARTED,{requestIndex:i.requestIndex})}});i.onRequestComplete(function(i){if(l.isAllowedRequestUrl(t,i.url)){n.clearTracingIfNeeded(i);e.notify(c.LifeCycleEventType.REQUEST_COMPLETED,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,responseText:i.responseText,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,type:a.RequestType.XHR,url:i.url,xhr:i.xhr})}});return i}function s(e,t,n){var i=a.startFetchProxy();i.beforeSend(function(i){if(l.isAllowedRequestUrl(t,i.url)){n.traceFetch(i);i.requestIndex=o();e.notify(c.LifeCycleEventType.REQUEST_STARTED,{requestIndex:i.requestIndex})}});i.onRequestComplete(function(i){if(l.isAllowedRequestUrl(t,i.url)){n.clearTracingIfNeeded(i);e.notify(c.LifeCycleEventType.REQUEST_COMPLETED,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,responseText:i.responseText,responseType:i.responseType,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,type:a.RequestType.FETCH,url:i.url,response:i.response,init:i.init,input:i.input})}});return i}function o(){var e=d;d+=1;return e}Object.defineProperty(t,"__esModule",{value:!0});t.trackFetch=t.trackXhr=t.startRequestCollection=void 0;var a=n(541),c=n(576),l=n(577),u=n(584),d=1;t.startRequestCollection=i;t.trackXhr=r;t.trackFetch=s},function(e,t,n){"use strict";function i(e){if(0===e.status&&!e.isAborted){e.traceId=void 0;e.spanId=void 0}}function r(e){return{clearTracingIfNeeded:i,traceFetch:function(t){return s(e,t,function(e){var n;if(t.input instanceof Request&&!(null===(n=t.init)||void 0===n?void 0:n.headers)){t.input=new Request(t.input);Object.keys(e).forEach(function(n){t.input.headers.append(n,e[n])})}else{t.init=u.__assign({},t.init);var i=[];t.init.headers instanceof Headers?t.init.headers.forEach(function(e,t){i.push([t,e])}):Array.isArray(t.init.headers)?t.init.headers.forEach(function(e){i.push(e)}):t.init.headers&&Object.keys(t.init.headers).forEach(function(e){i.push([e,t.init.headers[e]])});t.init.headers=i.concat(d.objectEntries(e))}})},traceXhr:function(t,n){return s(e,t,function(e){Object.keys(e).forEach(function(t){n.setRequestHeader(t,e[t])})})}}}function s(e,t,n){if(a()&&o(e,t.url)){t.traceId=new h;t.spanId=new h;n(l(t.traceId,t.spanId))}}function o(e,t){for(var n=d.getOrigin(t),i=0,r=e.allowedTracingOrigins;i<r.length;i++){var s=r[i];if(n===s||s instanceof RegExp&&s.test(n))return!0}return!1}function a(){return void 0!==c()}function c(){return window.crypto||window.msCrypto}function l(e,t){return{"x-datadog-origin":"rum","x-datadog-parent-id":t.toDecimalString(),"x-datadog-sampled":"1","x-datadog-sampling-priority":"1","x-datadog-trace-id":e.toDecimalString()}}Object.defineProperty(t,"__esModule",{value:!0});t.TraceIdentifier=t.isTracingSupported=t.startTracer=t.clearTracingIfNeeded=void 0;var u=n(7),d=n(541);t.clearTracingIfNeeded=i;t.startTracer=r;t.isTracingSupported=a;var h=function(){function e(){this.buffer=new Uint8Array(8);c().getRandomValues(this.buffer);this.buffer[0]=127&this.buffer[0]}e.prototype.toString=function(e){for(var t=this.readInt32(0),n=this.readInt32(4),i="";;){var r=t%e*4294967296+n;t=Math.floor(t/e);n=Math.floor(r/e);i=(r%e).toString(e)+i;if(!t&&!n)break}return i};e.prototype.toDecimalString=function(){return this.toString(10)};e.prototype.readInt32=function(e){return 16777216*this.buffer[e]+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]};return e}();t.TraceIdentifier=h},function(e,t,n){"use strict";function i(e,t,n,i){e.subscribe(l.LifeCycleEventType.AUTO_ACTION_COMPLETED,function(t){return e.notify(l.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,r(t,i))});n.trackInteractions&&u.trackActions(e,t,n);return{addAction:function(t,n){e.notify(l.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,o.__assign({savedCommonContext:n},r(t,i)))}}}function r(e,t){var n=s(e)?{action:{error:{count:e.counts.errorCount},id:e.id,loading_time:a.toServerDuration(e.duration),long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}}}:void 0,i=s(e)?void 0:e.context,r=a.combine({action:{id:a.generateUUID(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:c.RumEventType.ACTION},n),o=t.getInForeground(e.startClocks.relative);void 0!==o&&(r.view={in_foreground:o});return{customerContext:i,rawRumEvent:r,startTime:e.startClocks.relative,domainContext:s(e)?{event:e.event}:{}}}function s(e){return e.type!==c.ActionType.CUSTOM}Object.defineProperty(t,"__esModule",{value:!0});t.startActionCollection=void 0;var o=n(7),a=n(541),c=n(571),l=n(576),u=n(586);t.startActionCollection=i},function(e,t,n){"use strict";function i(e,t,n){var i=n.actionNameAttribute,c=r(e,t);e.subscribe(a.LifeCycleEventType.VIEW_CREATED,function(){c.discardCurrent()});var l=s.addEventListener(window,"click",function(e){if(e.target instanceof Element){var t=u.getActionNameFromElement(e.target,i);t&&c.create(o.ActionType.CLICK,t,e)}},{capture:!0}).stop;return{stop:function(){c.discardCurrent();l()}}}function r(e,t){var n,i;return{create:function(r,s,o){if(!n){var a=new d(e,r,s,o);n=a;i=l.waitIdlePageActivity(e,t,function(e){e.hadActivity?a.complete(e.endTime):a.discard();n=void 0})}},discardCurrent:function(){if(n){i.stop();n.discard();n=void 0}}}}Object.defineProperty(t,"__esModule",{value:!0});t.trackActions=void 0;var s=n(541),o=n(571),a=n(576),c=n(587),l=n(588),u=n(589);t.trackActions=i;var d=function(){function e(e,t,n,i){this.lifeCycle=e;this.type=t;this.name=n;this.event=i;this.id=s.generateUUID();this.startClocks=s.clocksNow();this.eventCountsSubscription=c.trackEventCounts(e);this.lifeCycle.notify(a.LifeCycleEventType.AUTO_ACTION_CREATED,{id:this.id,startClocks:this.startClocks})}e.prototype.complete=function(e){var t=this.eventCountsSubscription.eventCounts;this.lifeCycle.notify(a.LifeCycleEventType.AUTO_ACTION_COMPLETED,{counts:{errorCount:t.errorCount,longTaskCount:t.longTaskCount,resourceCount:t.resourceCount},duration:s.elapsed(this.startClocks.timeStamp,e),id:this.id,name:this.name,startClocks:this.startClocks,type:this.type,event:this.event});this.eventCountsSubscription.stop()};e.prototype.discard=function(){this.lifeCycle.notify(a.LifeCycleEventType.AUTO_ACTION_DISCARDED);this.eventCountsSubscription.stop()};return e}()},function(e,t,n){"use strict";function i(e,t){void 0===t&&(t=r.noop);var n={errorCount:0,longTaskCount:0,resourceCount:0,userActionCount:0},i=e.subscribe(o.LifeCycleEventType.RUM_EVENT_COLLECTED,function(e){var i=e.type;switch(i){case s.RumEventType.ERROR:n.errorCount+=1;t(n);break;case s.RumEventType.ACTION:n.userActionCount+=1;t(n);break;case s.RumEventType.LONG_TASK:n.longTaskCount+=1;t(n);break;case s.RumEventType.RESOURCE:n.resourceCount+=1;t(n)}});return{stop:function(){i.unsubscribe()},eventCounts:n}}Object.defineProperty(t,"__esModule",{value:!0});t.trackEventCounts=void 0;var r=n(541),s=n(571),o=n(576);t.trackEventCounts=i},function(e,t,n){"use strict";function i(e,t,n){var i=r(e,t),o=i.observable,a=i.stop,c=s(o,a,n).stop,l=function(){c();a()};return{stop:l}}function r(e,t){function n(){r.notify({isBusy:c>0})}var i,r=new o.Observable,s=[],c=0;s.push(t.subscribe(function(){return n()}));s.push(e.subscribe(a.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(e){"resource"===e.entryType&&n()}));s.push(e.subscribe(a.LifeCycleEventType.REQUEST_STARTED,function(e){void 0===i&&(i=e.requestIndex);c+=1;n()}));s.push(e.subscribe(a.LifeCycleEventType.REQUEST_COMPLETED,function(e){if(!(void 0===i||e.requestIndex<i)){c-=1;n()}}));return{observable:r,stop:function(){s.forEach(function(e){return e.unsubscribe()})}}}function s(e,n,i){function r(e){if(!a){u();i(e)}}var s,a=!1,c=setTimeout(o.monitor(function(){return r({hadActivity:!1})}),t.PAGE_ACTIVITY_VALIDATION_DELAY),l=setTimeout(o.monitor(function(){return r({hadActivity:!0,endTime:o.timeStampNow()})}),t.PAGE_ACTIVITY_MAX_DURATION);e.subscribe(function(e){var n=e.isBusy;clearTimeout(c);clearTimeout(s);var i=o.timeStampNow();n||(s=setTimeout(o.monitor(function(){return r({hadActivity:!0,endTime:i})}),t.PAGE_ACTIVITY_END_DELAY))});var u=function(){a=!0;clearTimeout(c);clearTimeout(s);clearTimeout(l);n()};return{stop:u}}Object.defineProperty(t,"__esModule",{value:!0});t.waitPageActivitiesCompletion=t.trackPageActivities=t.waitIdlePageActivity=t.PAGE_ACTIVITY_MAX_DURATION=t.PAGE_ACTIVITY_END_DELAY=t.PAGE_ACTIVITY_VALIDATION_DELAY=void 0;var o=n(541),a=n(576);t.PAGE_ACTIVITY_VALIDATION_DELAY=100;t.PAGE_ACTIVITY_END_DELAY=100;t.PAGE_ACTIVITY_MAX_DURATION=1e4;t.waitIdlePageActivity=i;t.trackPageActivities=r;t.waitPageActivitiesCompletion=s},function(e,t,n){"use strict";function i(e,t){return r(e,g)||t&&r(e,t)||s(e,_)||s(e,y)||""}function r(e,t){var n;if(h())n=e.closest("["+t+"]");else for(var i=e;i;){if(i.hasAttribute(t)){n=i;break}i=i.parentElement}if(n){var r=n.getAttribute(t);return a(o(r.trim()))}}function s(e,t){for(var n=e,i=0;k>=i&&n&&"BODY"!==n.nodeName&&"HTML"!==n.nodeName&&"HEAD"!==n.nodeName;){for(var r=0,s=t;r<s.length;r++){var c=s[r],l=c(n);if("string"==typeof l){var u=l.trim();if(u)return a(o(u))}}if("FORM"===n.nodeName)break;n=n.parentElement;i+=1}}function o(e){return e.replace(/\s+/g," ")}function a(e){return e.length>100?f.safeTruncate(e,100)+" [...]":e}function c(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}function l(e){if(!e.isContentEditable){if("innerText"in e){var t=e.innerText;if(!u())for(var n=e.querySelectorAll("script, style"),i=0;i<n.length;i+=1){var r=n[i].innerText;r.trim().length>0&&(t=t.replace(r,""))}return t}return e.textContent}}function u(){if(void 0===p){var e=document.createElement("style");e.textContent="*";var t=document.createElement("div");t.appendChild(e);document.body.appendChild(t);p=""===t.innerText;document.body.removeChild(t)}return p}function d(){void 0===m&&(m="labels"in HTMLInputElement.prototype);return m}function h(){void 0===v&&(v="closest"in HTMLElement.prototype);return v}Object.defineProperty(t,"__esModule",{value:!0});t.getActionNameFromElement=void 0;var f=n(541),g="data-dd-action-name";t.getActionNameFromElement=i;var p,m,v,_=[function(e){if(d()){if("labels"in e&&e.labels&&e.labels.length>0)return l(e.labels[0])}else if(e.id){var t=e.ownerDocument&&e.ownerDocument.querySelector('label[for="'+e.id.replace('"','\\"')+'"]');return t&&l(t)}},function(e){if("INPUT"===e.nodeName){var t=e,n=t.getAttribute("type");if("button"===n||"submit"===n||"reset"===n)return t.value}},function(e){return"BUTTON"===e.nodeName||"LABEL"===e.nodeName||"button"===e.getAttribute("role")?l(e):void 0},function(e){return e.getAttribute("aria-label")},function(e){var t=e.getAttribute("aria-labelledby");return t?t.split(/\s+/).map(function(t){return c(e,t)}).filter(function(e){return Boolean(e)}).map(l).join(" "):void 0},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e){return"options"in e&&e.options.length>0?l(e.options[0]):void 0}],y=[function(e){return l(e)}],k=10},function(e,t,n){"use strict";function i(e,t,n){var i=new c.Observable;c.trackConsoleError(i);c.trackRuntimeError(i);t.isEnabled("remove-network-errors")||c.trackNetworkError(t,i);i.subscribe(function(t){return e.notify(u.LifeCycleEventType.RAW_ERROR_COLLECTED,{error:t})});return r(e,n)}function r(e,t){e.subscribe(u.LifeCycleEventType.RAW_ERROR_COLLECTED,function(n){var i=n.error,r=n.customerContext,s=n.savedCommonContext;e.notify(u.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,a.__assign({customerContext:r,savedCommonContext:s},o(i,t)))});return{addError:function(t,n){var i=t.error,r=t.handlingStack,o=t.startClocks,a=t.context,c=t.source,l=s(i,r,o,c);e.notify(u.LifeCycleEventType.RAW_ERROR_COLLECTED,{customerContext:a,savedCommonContext:n,error:l})}}}function s(e,t,n,i){var r=e instanceof Error?c.computeStackTrace(e):void 0;return a.__assign(a.__assign({startClocks:n,source:i,originalError:e},c.formatUnknownError(r,e,"Provided",t)),{handling:c.ErrorHandling.HANDLED})}function o(e,t){var n={date:e.startClocks.timeStamp,error:{id:c.generateUUID(),message:e.message,resource:e.resource?{method:e.resource.method,status_code:e.resource.statusCode,url:e.resource.url}:void 0,source:e.source,stack:e.stack,handling_stack:e.handlingStack,type:e.type,handling:e.handling},type:l.RumEventType.ERROR},i=t.getInForeground(e.startClocks.relative);void 0!==i&&(n.view={in_foreground:i});return{rawRumEvent:n,startTime:e.startClocks.relative,domainContext:{error:e.originalError}}}Object.defineProperty(t,"__esModule",{value:!0});t.doStartErrorCollection=t.startErrorCollection=void 0;var a=n(7),c=n(541),l=n(571),u=n(576);t.startErrorCollection=i;t.doStartErrorCollection=r},function(e,t,n){"use strict";function i(e){e.subscribe(o.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(t){if("longtask"===t.entryType){var n=r.relativeToClocks(t.startTime),i={date:n.timeStamp,long_task:{id:r.generateUUID(),duration:r.toServerDuration(t.duration)},type:s.RumEventType.LONG_TASK};e.notify(o.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,{
rawRumEvent:i,startTime:n.relative,domainContext:{performanceEntry:t.toJSON()}})}})}Object.defineProperty(t,"__esModule",{value:!0});t.startLongTaskCollection=void 0;var r=n(541),s=n(571),o=n(576);t.startLongTaskCollection=i},function(e,t,n){"use strict";function i(e,t){e.subscribe(g.LifeCycleEventType.REQUEST_COMPLETED,function(n){t.isTrackedWithResource()&&e.notify(g.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,r(n))});e.subscribe(g.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(n){t.isTrackedWithResource()&&"resource"===n.entryType&&!m.isRequestKind(n)&&e.notify(g.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,s(n))})}function r(e){var t=e.type===d.RequestType.XHR?d.ResourceType.XHR:d.ResourceType.FETCH,n=p.matchRequestTiming(e),i=n?d.relativeToClocks(n.startTime):e.startClocks,r=n?o(n):void 0,s=a(e),c=d.combine({date:i.timeStamp,resource:{id:d.generateUUID(),type:t,duration:d.toServerDuration(e.duration),method:e.method,status_code:e.status,url:e.url},type:f.RumEventType.RESOURCE},s,r);return{startTime:i.relative,rawRumEvent:c,domainContext:{performanceEntry:n&&l(n),xhr:e.xhr,response:e.response,requestInput:e.input,requestInit:e.init,error:e.error}}}function s(e){var t=m.computeResourceKind(e),n=o(e),i=c(e),r=d.relativeToClocks(e.startTime),s=d.combine({date:r.timeStamp,resource:{id:d.generateUUID(),type:t,url:e.name},type:f.RumEventType.RESOURCE},i,n);return{startTime:r.relative,rawRumEvent:s,domainContext:{performanceEntry:l(e)}}}function o(e){return{resource:u.__assign({duration:m.computePerformanceResourceDuration(e),size:m.computeSize(e)},m.computePerformanceResourceDetails(e))}}function a(e){var t=e.traceId&&e.spanId;return t?{_dd:{span_id:e.spanId.toDecimalString(),trace_id:e.traceId.toDecimalString()}}:void 0}function c(e){return e.traceId?{_dd:{trace_id:e.traceId}}:void 0}function l(e){h.supportPerformanceEntry()&&e instanceof PerformanceEntry&&e.toJSON();return e}Object.defineProperty(t,"__esModule",{value:!0});t.startResourceCollection=void 0;var u=n(7),d=n(541),h=n(575),f=n(571),g=n(576),p=n(593),m=n(577);t.startResourceCollection=i},function(e,t,n){"use strict";function i(e){if(performance&&"getEntriesByName"in performance){var t=performance.getEntriesByName(e.url,"resource");if(t.length&&"toJSON"in t[0]){var n=t.map(function(e){return e.toJSON()}).filter(a.toValidEntry).filter(function(t){return o(t,e.startClocks.relative,s({startTime:e.startClocks.relative,duration:e.duration}))});return 1===n.length?n[0]:2===n.length&&r(n)?n[1]:void 0}}}function r(e){return s(e[0])<=e[1].startTime}function s(e){return e.startTime+e.duration}function o(e,t,n){var i=1;return e.startTime>=t-i&&s(e)<=n+i}Object.defineProperty(t,"__esModule",{value:!0});t.matchRequestTiming=void 0;var a=n(577);t.matchRequestTiming=i},function(e,t,n){"use strict";function i(e,t,n,i,s,o){e.subscribe(a.LifeCycleEventType.VIEW_UPDATED,function(t){return e.notify(a.LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,r(t,s))});return c.trackViews(n,e,i,!t.trackViewsManually,o)}function r(e,t){var n={_dd:{document_version:e.documentVersion},date:e.startClocks.timeStamp,type:o.RumEventType.VIEW,view:{action:{count:e.eventCounts.userActionCount},cumulative_layout_shift:e.cumulativeLayoutShift,dom_complete:s.toServerDuration(e.timings.domComplete),dom_content_loaded:s.toServerDuration(e.timings.domContentLoaded),dom_interactive:s.toServerDuration(e.timings.domInteractive),error:{count:e.eventCounts.errorCount},first_contentful_paint:s.toServerDuration(e.timings.firstContentfulPaint),first_input_delay:s.toServerDuration(e.timings.firstInputDelay),first_input_time:s.toServerDuration(e.timings.firstInputTime),is_active:e.isActive,name:e.name,largest_contentful_paint:s.toServerDuration(e.timings.largestContentfulPaint),load_event:s.toServerDuration(e.timings.loadEvent),loading_time:s.toServerDuration(e.loadingTime),loading_type:e.loadingType,long_task:{count:e.eventCounts.longTaskCount},resource:{count:e.eventCounts.resourceCount},time_spent:s.toServerDuration(e.duration),in_foreground_periods:t.getInForegroundPeriods(e.startClocks.relative,e.duration)},session:{has_replay:e.hasReplay||void 0}};s.isEmptyObject(e.customTimings)||(n.view.custom_timings=s.mapValues(e.customTimings,s.toServerDuration));return{rawRumEvent:n,startTime:e.startClocks.relative,domainContext:{location:e.location}}}Object.defineProperty(t,"__esModule",{value:!0});t.startViewCollection=void 0;var s=n(541),o=n(571),a=n(576),c=n(595);t.startViewCollection=i},function(e,t,n){"use strict";function i(e,n,i,s,o){function h(t){var s=r(n,i,e,v,c.ViewLoadingType.INITIAL_LOAD,document.referrer,a.clocksOrigin(),t),o=u.trackInitialViewTimings(n,function(e){s.updateTimings(e);s.scheduleUpdate()}).stop;return{initialView:s,stop:o}}function f(t,s){return r(n,i,e,v,c.ViewLoadingType.ROUTE_CHANGE,b.url,t,s)}function g(){n.subscribe(l.LifeCycleEventType.SESSION_RENEWED,function(){b.end();b=f(void 0,b.name)});n.subscribe(l.LifeCycleEventType.BEFORE_UNLOAD,function(){b.end();b.triggerUpdate()});n.subscribe(l.LifeCycleEventType.RECORD_STARTED,function(){v=!0;b.updateHasReplay(!0)});n.subscribe(l.LifeCycleEventType.RECORD_STOPPED,function(){v=!1});var e=window.setInterval(a.monitor(function(){b.triggerUpdate()}),t.SESSION_KEEP_ALIVE_INTERVAL);return{stop:function(){clearInterval(e)}}}function p(){return d.trackLocationChanges(function(){if(d.areDifferentLocation(b.getLocation(),e)){b.end();b.triggerUpdate();b=f()}else{b.updateLocation(e);b.triggerUpdate()}})}function m(){return d.trackLocationChanges(function(){b.updateLocation(e);b.triggerUpdate()})}var v=!1,_=h(o),y=_.stop,k=_.initialView,b=k,S=g().stop,w=(s?p():m()).stop;return{addTiming:function(e,t){void 0===t&&(t=a.timeStampNow());b.addTiming(e,t);b.triggerUpdate()},startView:function(e,t){b.end(t);b.triggerUpdate();b=f(t,e)},stop:function(){w();y();S();b.end()}}}function r(e,n,i,r,c,u,d,f){function g(){y+=1;var t=void 0===p?a.timeStampNow():p.timeStamp;e.notify(l.LifeCycleEventType.VIEW_UPDATED,o.__assign(o.__assign({},A),{customTimings:_,documentVersion:y,id:m,name:f,loadingType:c,location:k,hasReplay:b,referrer:u,startClocks:d,timings:v,duration:a.elapsed(d.timeStamp,t),isActive:void 0===p}))}void 0===d&&(d=a.clocksNow());var p,m=a.generateUUID(),v={},_={},y=0,k=o.__assign({},i),b=r;e.notify(l.LifeCycleEventType.VIEW_CREATED,{id:m,name:f,startClocks:d,location:k,referrer:u});var S=a.throttle(a.monitor(g),t.THROTTLE_VIEW_UPDATE_PERIOD,{leading:!1}),w=S.throttled,C=S.cancel,E=h.trackViewMetrics(e,n,w,c),T=E.setLoadEvent,I=E.stop,A=E.viewMetrics;g();return{name:f,scheduleUpdate:w,end:function(t){void 0===t&&(t=a.clocksNow());p=t;I();e.notify(l.LifeCycleEventType.VIEW_ENDED,{endClocks:p})},getLocation:function(){return k},triggerUpdate:function(){C();g()},updateTimings:function(e){v=e;void 0!==e.loadEvent&&T(e.loadEvent)},addTiming:function(e,t){_[s(e)]=a.elapsed(d.timeStamp,t)},updateLocation:function(e){k=o.__assign({},e)},updateHasReplay:function(e){b=e},get url(){return k.href}}}function s(e){var t=e.replace(/[^a-zA-Z0-9-_.@$]/g,"_");t!==e&&a.display.warn("Invalid timing name: "+e+", sanitized to: "+t);return t}Object.defineProperty(t,"__esModule",{value:!0});t.trackViews=t.SESSION_KEEP_ALIVE_INTERVAL=t.THROTTLE_VIEW_UPDATE_PERIOD=void 0;var o=n(7),a=n(541),c=n(571),l=n(576),u=n(596),d=n(598),h=n(599);t.THROTTLE_VIEW_UPDATE_PERIOD=3e3;t.SESSION_KEEP_ALIVE_INTERVAL=5*a.ONE_MINUTE;t.trackViews=i},function(e,t,n){"use strict";function i(e,t){function n(e){i=c.__assign(c.__assign({},i),e);t(i)}var i,l=r(e,n).stop,u=s(e,function(e){return n({firstContentfulPaint:e})}).stop,d=o(e,window,function(e){n({largestContentfulPaint:e})}).stop,h=a(e,function(e){var t=e.firstInputDelay,i=e.firstInputTime;n({firstInputDelay:t,firstInputTime:i})}).stop;return{stop:function(){l();u();d();h()}}}function r(e,t){var n=e.subscribe(u.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(e){"navigation"===e.entryType&&t({domComplete:e.domComplete,domContentLoaded:e.domContentLoadedEventEnd,domInteractive:e.domInteractive,loadEvent:e.loadEventEnd})}).unsubscribe;return{stop:n}}function s(e,t){var n=d.trackFirstHidden(),i=e.subscribe(u.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(e){if("paint"===e.entryType&&"first-contentful-paint"===e.name&&e.startTime<n.timeStamp){e.startTime>l.ONE_DAY&&l.addMonitoringMessage("FCP > 1 day",{debug:{fcp:Math.round(e.startTime),relativeNow:Math.round(l.relativeNow()),timeStampNow:l.timeStampNow()}});t(e.startTime)}}).unsubscribe;return{stop:i}}function o(e,t,n){var i=d.trackFirstHidden(),r=1/0,s=l.addEventListeners(t,["pointerdown","keydown"],function(e){r=e.timeStamp},{capture:!0,once:!0}).stop,o=e.subscribe(u.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(e){if("largest-contentful-paint"===e.entryType&&e.startTime<r&&e.startTime<i.timeStamp){e.startTime>l.ONE_DAY&&l.addMonitoringMessage("LCP > 1 day",{debug:{lcp:Math.round(e.startTime),relativeNow:Math.round(l.relativeNow()),timeStampNow:l.timeStampNow()}});n(e.startTime)}}).unsubscribe;return{stop:function(){s();o()}}}function a(e,t){var n=d.trackFirstHidden(),i=e.subscribe(u.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(e){if("first-input"===e.entryType&&e.startTime<n.timeStamp){var i=l.elapsed(e.startTime,e.processingStart);t({firstInputDelay:i>=0?i:0,firstInputTime:e.startTime})}}).unsubscribe;return{stop:i}}Object.defineProperty(t,"__esModule",{value:!0});t.trackFirstInputTimings=t.trackLargestContentfulPaint=t.trackFirstContentfulPaint=t.trackNavigationTimings=t.trackInitialViewTimings=void 0;var c=n(7),l=n(541),u=n(576),d=n(597);t.trackInitialViewTimings=i;t.trackNavigationTimings=r;t.trackFirstContentfulPaint=s;t.trackLargestContentfulPaint=o;t.trackFirstInputTimings=a},function(e,t,n){"use strict";function i(e){void 0===e&&(e=window);if(!s)if("hidden"===document.visibilityState)s={timeStamp:0};else{s={timeStamp:1/0};o=a.addEventListener(e,"pagehide",function(e){var t=e.timeStamp;s.timeStamp=t},{capture:!0,once:!0}).stop}return s}function r(){o&&o();s=void 0}Object.defineProperty(t,"__esModule",{value:!0});t.resetFirstHidden=t.trackFirstHidden=void 0;var s,o,a=n(541);t.trackFirstHidden=i;t.resetFirstHidden=r},function(e,t,n){"use strict";function i(e){var t=s(e).stop,n=o(e).stop;return{stop:function(){t();n()}}}function r(e,t){return e.pathname!==t.pathname||!a(t.hash)&&c(t.hash)!==c(e.hash)}function s(e){var t=history.pushState;history.pushState=l.monitor(function(){t.apply(this,arguments);e()});var n=history.replaceState;history.replaceState=l.monitor(function(){n.apply(this,arguments);e()});var i=l.addEventListener(window,"popstate",e).stop,r=function(){i();history.pushState=t;history.replaceState=n};return{stop:r}}function o(e){return l.addEventListener(window,"hashchange",e)}function a(e){var t=e.substr(1);return!!document.getElementById(t)}function c(e){var t=e.indexOf("?");return 0>t?e:e.slice(0,t)}Object.defineProperty(t,"__esModule",{value:!0});t.areDifferentLocation=t.trackLocationChanges=void 0;var l=n(541);t.trackLocationChanges=i;t.areDifferentLocation=r},function(e,t,n){"use strict";function i(e,t,n,i){var l,u={eventCounts:{errorCount:0,longTaskCount:0,resourceCount:0,userActionCount:0}},d=h.trackEventCounts(e,function(e){u.eventCounts=e;n()}).stop,f=r(i,function(e){u.loadingTime=e;n()}),g=f.setActivityLoadingTime,p=f.setLoadEvent,m=s(e,t,g).stop;if(a()){u.cumulativeLayoutShift=0;l=o(e,function(e){u.cumulativeLayoutShift=c.round(u.cumulativeLayoutShift+e,4);n()}).stop}else l=c.noop;return{stop:function(){d();m();l()},setLoadEvent:p,viewMetrics:u}}function r(e,t){function n(){!r&&!i&&s.length>0&&t(Math.max.apply(Math,s))}var i=e===u.ViewLoadingType.INITIAL_LOAD,r=!0,s=[];return{setLoadEvent:function(e){if(i){i=!1;s.push(e);n()}},setActivityLoadingTime:function(e){if(r){r=!1;void 0!==e&&s.push(e);n()}}}}function s(e,t,n){var i=c.timeStampNow(),r=f.waitIdlePageActivity(e,t,function(e){n(e.hadActivity?c.elapsed(i,e.endTime):void 0)}).stop;return{stop:r}}function o(e,t){var n=e.subscribe(d.LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED,function(e){"layout-shift"!==e.entryType||e.hadRecentInput||t(e.value)}).unsubscribe;return{stop:n}}function a(){return l.supportPerformanceTimingEvent("layout-shift")}Object.defineProperty(t,"__esModule",{value:!0});t.trackViewMetrics=void 0;var c=n(541),l=n(575),u=n(571),d=n(576),h=n(587),f=n(588);t.trackViewMetrics=i},function(e,t,n){"use strict";function i(e,n){var i=l.startSessionManagement(e.cookieOptions,t.RUM_SESSION_KEY,function(t){return o(e,t)});i.renewObservable.subscribe(function(){n.notify(u.LifeCycleEventType.SESSION_RENEWED)});return{getId:i.getId,getPlan:function(){return s(i)},isTracked:function(){return r(i)},isTrackedWithResource:function(){return void 0!==i.getId()&&i.getTrackingType()===h.TRACKED_WITH_RESOURCES}}}function r(e){return void 0!==e.getId()&&c(e.getTrackingType())}function s(e){return r(e)?d.REPLAY:void 0}function o(e,t){var n;n=a(t)?t:l.performDraw(e.sampleRate)?l.performDraw(e.resourceSampleRate)?h.TRACKED_WITH_RESOURCES:h.TRACKED_WITHOUT_RESOURCES:h.NOT_TRACKED;return{trackingType:n,isTracked:c(n)}}function a(e){return e===h.NOT_TRACKED||e===h.TRACKED_WITH_RESOURCES||e===h.TRACKED_WITHOUT_RESOURCES}function c(e){return e===h.TRACKED_WITH_RESOURCES||e===h.TRACKED_WITHOUT_RESOURCES}Object.defineProperty(t,"__esModule",{value:!0});t.startRumSession=t.RumTrackingType=t.RumSessionPlan=t.RUM_SESSION_KEY=void 0;var l=n(541),u=n(576);t.RUM_SESSION_KEY="rum";var d;!function(e){e[e.LITE=1]="LITE";e[e.REPLAY=2]="REPLAY"}(d=t.RumSessionPlan||(t.RumSessionPlan={}));var h;!function(e){e.NOT_TRACKED="0";e.TRACKED_WITH_RESOURCES="1";e.TRACKED_WITHOUT_RESOURCES="2"}(h=t.RumTrackingType||(t.RumTrackingType={}));t.startRumSession=i},function(e,t,n){"use strict";function i(e,t){var n=r(e,t);t.subscribe(o.LifeCycleEventType.RUM_EVENT_COLLECTED,function(e){e.type===a.RumEventType.VIEW?n.upsert(e,e.view.id):n.add(e)});return{stop:function(){n.stop()}}}function r(e,t){function n(t,n){return new s.Batch(new s.HttpRequest(t,e.batchBytesLimit,!0),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout,n)}function i(e){return s.combine(e,{application:{id:c.applicationId}})}var r,a=n(e.rumEndpoint,function(){return t.notify(o.LifeCycleEventType.BEFORE_UNLOAD)}),c=e.replica;void 0!==c&&(r=n(c.rumEndpoint));var l=!1;return{add:function(e){if(!l){a.add(e);r&&r.add(i(e))}},stop:function(){l=!0},upsert:function(e,t){if(!l){a.upsert(e,t);r&&r.upsert(i(e),t)}}}}Object.defineProperty(t,"__esModule",{value:!0});t.startRumBatch=void 0;var s=n(541),o=n(576),a=n(571);t.startRumBatch=i},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a,c){"ngInject";r(this,e);this.$log=o;this.$document=t;this.$window=n;this.$timeout=i;this.$rootScope=s;this._environment=a;if(this._environment.observability.enabled)if(angular.isUndefined(this.$window.MutationObserver))this.logTrace("MutationObserver API unavailable");else{this._domWaitTimer=void 0;this._millisWaitTimeout=500;this._rumService=c;this._targetNode=this.$document[0].body;this._config={attributes:!1,childList:!0,subtree:!0};this._observer=new MutationObserver(this.measureDomMutation.bind(this));this.restartObserver();this.$rootScope.$on("$locationChangeSuccess",this.locationChangeSuccess.bind(this));this.$rootScope.$on("$locationChangeStart",this.locationChangeStart.bind(this))}else this.logTrace("disabled")}e.$inject=["$document","$window","$timeout","$rootScope","$log","environment","DatadogRumService"];i(e,[{key:"locationChangeSuccess",value:function(e,t,n){if(t!==n){this.logTrace("location change success",t,n);this.addTiming("dom_render_location_change_success")}}},{key:"locationChangeStart",value:function(e,t,n){if(t!==n){this.logTrace("location change start",t,n);this.restartObserver();this.addTiming("dom_render_location_change_start")}}},{key:"measureDomMutation",value:function(){this.logTrace("measuring dom render");angular.isDefined(this._domWaitTimer)&&this.$timeout.cancel(this._domWaitTimer);this.addTiming("dom_rendering");this._domWaitTimer=this.$timeout(this.approximateFirstDomMutation.bind(this),this._millisWaitTimeout)}},{key:"approximateFirstDomMutation",value:function(){angular.isFunction(this.$window.performance.measure)&&this.$window.performance.measure("route_change","route_change_mark");var e=Date.now(),t=e-1e3*this._millisWaitTimeout;this.addTiming("dom_approximately_rendered",t);this._observer.disconnect();this.logTrace("approximate last dom render measurement")}},{key:"restartObserver",value:function(){angular.isFunction(this.$window.performance.mark)&&this.$window.performance.mark("route_change_mark");if(angular.isDefined(this._domWaitTimer)){this.$timeout.cancel(this._domWaitTimer);this._domWaitTimer=void 0}this.logTrace("start the mutation observer");this._observer.observe(this._targetNode,this._config)}},{key:"addTiming",value:function(){var e;(e=this._rumService).addTiming.apply(e,arguments)}},{key:"logTrace",value:function(){if(this._environment.observability.traceLogging){for(var e,t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];(e=this.$log).debug.apply(e,["Observability:"].concat(n))}}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(397),a=s(o),c=n(604),l=(s(c),function(){function e(t,n,i,s,o,c,l,u){"ngInject";var d=this;r(this,e);this.$log=t;this.$state=i;this._bootstrapService=n;this._staticContentService=u;s.$on(a["default"].EVENT_STATE,function(){d._stateUpdated()});this._staticContentService.recommendBestBrowser()}e.$inject=["$log","BootstrapService","$state","$scope","FirebaseService","$mdToast","$timeout","StaticContentService"];i(e,[{key:"_stateUpdated",value:function(){"ready"===this.state&&this.$state.go(this.$state.current,{},{reload:this._firstChild(this.$state.current.name)})}},{key:"_firstChild",value:function(e){var t=e.indexOf(".");t=e.indexOf(".",t+1);return 0>t?e:e.substring(0,t)}},{key:"state",get:function(){return this._bootstrapService.state}},{key:"errorMessage",get:function(){return this._bootstrapService.errorMessage}}]);return e}());t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(358),a=s(o),c=function(){function e(t,n,i,s,o){"ngInject";var a=this;r(this,e);this._firebaseService=t;this._bootstrapService=n;this._showOfflinePromise=void 0;this._firebaseConnected=this._firebaseService.connected;this._hasBeenOnline=this._firebaseService.connected;this._bootstrapReady=this._bootstrapService.ready;this.$mdToast=s;this.$timeout=o;i.$on("$destroy",function(){return a._destroy()})}e.$inject=["FirebaseService","BootstrapService","$scope","$mdToast","$timeout"];i(e,[{key:"start",value:function(){this._firebaseService.connectedEvent.subscribe(this._onFirebaseConnectionChanged,this);this._bootstrapService.stateChanged.subscribe(this._onBootstrapStateChanged,this)}},{key:"stop",value:function(){this._firebaseService.connectedEvent.unsubscribe(this._onFirebaseConnectionChanged,this);this._bootstrapService.stateChanged.unsubscribe(this._onBootstrapStateChanged,this)}},{key:"_onFirebaseConnectionChanged",value:function(){this._stateChanged(this._firebaseService.connected,this._bootstrapReady)}},{key:"_onBootstrapStateChanged",value:function(){this._stateChanged(this._firebaseConnected,this._bootstrapService.ready)}},{key:"_stateChanged",value:function(e,t){var n=this;this._bootstrapReady=t;if(this._bootstrapReady&&this._hasBeenOnline)if(e)if(this._showOfflinePromise){this.$timeout.cancel(this._showOfflinePromise);this._showOfflinePromise=null}else a["default"].show(this.$mdToast,"The internet connection has been reestablished.",!0);else this._showOfflinePromise||(this._showOfflinePromise=this.$timeout(function(){n._showOffline()},2e3));this._hasBeenOnline=this._hasBeenOnline||t&&e;this._firebaseConnected=e}},{key:"_showOffline",value:function(){a["default"].show(this.$mdToast,"The internet connection appears to be offline. Classkick will not function normally and any additional work will not be saved until you reconnect.",!1);this._showOfflinePromise=null}},{key:"_destroy",value:function(){this.stop()}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(206)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),c=o(a),l=function(){function e(){r(this,e)}i(e,null,[{key:"LOGIN",get:function(){return"Login"}},{key:"SIGN_UP",get:function(){return"Sign up"}}]);return e}();t.LoginSources=l;var u=function(){function e(t,n,i,o,a,c,l,u,d,h,f,g,p,m,v){"ngInject";var _=this;r(this,e);this.$q=t;this.$log=n;this.$timeout=i;this.$state=o;this.$stateParams=a;this.$scope=c;this.$mdDialog=l;this.$document=u;this._classCodeService=d;this._breadcrumbService=h;this._authService=f;this._toolbarService=g;this._cacheService=p;this._rosterService=m;this._storageService=v;this._isLoading=!1;this._nameTimeout=null;this._focusClassCode=!0;this._focusName=!1;this._errorMessage="";this._allowNewMembers=!1;this._classCode=a.classCode;this._checkingClassCode="";this._name=a.name;this._classCodePattern="^[a-zA-Z\\d\\s]+$";this._classCodeRegex=new RegExp(this._classCodePattern);this._classCodeIsValid=!1;this._studentNames=new s;this._nameIsValid=!1;i(function(){return _.classCodeUpdated()})}e.$inject=["$q","$log","$timeout","$state","$stateParams","$scope","$mdDialog","$document","ClassCodeService","BreadcrumbService","AuthService","ToolbarService","CacheService","RosterService","StorageService"];i(e,[{key:"classCodeUpdated",value:function(){if(this.$scope.anonStudentLoginForm){this.$scope.anonStudentLoginForm.classCode.$touched=!0;this.$scope.anonStudentLoginForm.name.$touched=!0;this.$scope.anonStudentLoginForm.classCode.$setValidity("bad-ccode",!0);this.$scope.anonStudentLoginForm.classCode.$setValidity("pattern",!0)}this._studentNames=new s;this.nameUpdated();this._classCodeIsValid=!1;var e=this._classCode.indexOf(" ")>-1?7:6;this._classCode=this._classCode.toUpperCase().slice(0,e);if(this._classCode)if(this._classCodeRegex.test(this._classCode)){var t=this._removeSpaces(this._classCode);if(6===t.length){if(this._checkingClassCode!==t){this._isLoading=!0;this._checkingClassCode=t;this._loadClassCodeData(t)}}else this._checkingClassCode=""}else this.$scope.anonStudentLoginForm&&this.$scope.anonStudentLoginForm.classCode.$setValidity("pattern",!1)}},{key:"_removeSpaces",value:function(e){return e.replace(/[\s]/g,"")}},{key:"_loadClassCodeData",value:function(e){var t=this;this._classCodeService.getUsernames(e).then(function(n){t._isLoading=!1;if(t._removeSpaces(t._classCode)!==e)throw new Error("class Code was modified");t.$scope.anonStudentLoginForm.classCode.$setValidity("bad-ccode",!0);t._allowNewMembers=n.allowNewMembers;t._classCodeIsValid=!0;t._focusName=!0;t._isPro=n.pro;t._hideStudentWork=n.hideStudentWork;t._studentNames=new s(n.names.map(function(e){return e.toLowerCase()}));t.nameUpdated()})["catch"](function(e){t.$scope.anonStudentLoginForm&&t.$scope.anonStudentLoginForm.classCode.$setValidity("bad-ccode",!1);t.$log.debug("_loadClassCodeData error",e);t._isLoading=!1})}},{key:"nameUpdated",value:function(){var e=this;if(this.$scope.anonStudentLoginForm){this.$scope.anonStudentLoginForm.classCode.$touched=!0;this.$scope.anonStudentLoginForm.name.$touched=!0}this.$timeout.cancel(this._nameTimeout);this._nameIsValid=!1;this._nameIsPresent=!1;if(this._name){this._nameIsValid=this._studentNames.has(this._name.toLowerCase());this._nameIsPresent=this._nameIsValid||this._allowNewMembers;this._nameIsPresent?this.$scope.anonStudentLoginForm.name.$setValidity("no-student",!0):this._nameTimeout=this.$timeout(function(){e.$scope.anonStudentLoginForm.name.$setValidity("no-student",!1)},500)}}},{key:"login",value:function(){if(this.canStartNew||this.canResume){this._toolbarService.reset();this._cacheService.reset();this.$state.go("root.anon-student-assignment-work",{classCode:this._removeSpaces(this._classCode),name:this._name,source:this.canStartNew?l.SIGN_UP:l.LOGIN,question:1})}}},{key:"goToAccountLogin",value:function(){this.classCodeValid&&(this._storageService.ckRedirect=new c["default"]("root.account.home",{classCode:this._removeSpaces(this.classCode)}));this._breadcrumbService.go("root.account-login",{classCode:this._removeSpaces(this._classCode)})}},{key:"goToCreateAccountChoice",value:function(){this._breadcrumbService.go("root.signup-choice")}},{key:"showClassCodeModal",value:function(){var e=this;this.$mdDialog.show({contentElement:"#"+this.whatIsAClassCodeModalId,parent:angular.element(this.$document[0].body),onRemoving:function(){e._focusClassCode=!0}})}},{key:"goToCreateStudentAccount",value:function(){var e=this._removeSpaces(this.classCode);this._storageService.ckRedirect=new c["default"]("root.account.home",{classCode:e});this._breadcrumbService.go("root.signup-student",{classCode:e})}},{key:"goBack",value:function(){this.classCode="";this.classCodeUpdated()}},{key:"isLoading",get:function(){return this._isLoading}},{key:"focusClassCode",get:function(){return this._focusClassCode},set:function(e){this._focusClassCode=e}},{key:"focusName",get:function(){return this._focusName},set:function(e){this._focusName=e}},{key:"errorMessage",get:function(){return this._errorMessage},set:function(e){this._errorMessage=e}},{key:"anonStudentLoginButtonMessage",get:function(){return this.canResume?"Continue":"Go"}},{key:"needClassCode",get:function(){return!this._classCode||6!==this._removeSpaces(this._classCode).length||!this._classCodeIsValid}},{key:"needName",get:function(){return!(this.needClassCode||this._name&&(this._nameIsValid||this._allowNewMembers))}},{key:"canStart",get:function(){return!this.needClassCode&&!this.needName}},{key:"canResume",get:function(){return this.canStart&&this._nameIsValid}},{key:"canStartNew",get:function(){return!this.canResume&&!this.needClassCode&&!this.needName}},{key:"classCodeMinLength",get:function(){return this._name?6:0}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"classCode",get:function(){return this._classCode},set:function(e){this._classCode=e}},{key:"classCodePattern",get:function(){return this._classCodePattern}},{key:"whatIsAClassCodeModalId",get:function(){return"what-is-a-class-code"}},{key:"classCodeValid",get:function(){return this._classCodeIsValid}},{key:"showPro",get:function(){return this._classCodeIsValid&&this._isPro===!0&&!this._hideStudentWork}},{key:"hideStudentWork",get:function(){return this._hideStudentWork}},{key:"title",get:function(){return this.showPro?"Classkick Pro":"Start Working"}}]);return e}();t["default"]=u},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(501),a=s(o),c=function(){function e(t,n,i,s,o,a,c,l,u,d,h,f,g,p){"ngInject";r(this,e);this.$log=o;this.$q=a;this.$state=t;this.$stateParams=n;this.$interval=i;this.$mdDialog=s;this._environment=c;this._authService=l;this._cacheService=u;this._breadcrumbService=d;this._storageService=h;this._rosterService=f;this._classCodeService=g;this._toolbarService=p;this._isLoading=!1;this._ckRedirect=this._storageService.ckRedirect;this._emailOrUsername="";this._password="";this._rememberMe=!1;this._errorMessage="";if(this._authService.isLoggedIn){this._emailOrUsername=this._authService.authData.login;this._rememberMe=!0}this._classCode=this.$stateParams.classCode||""}e.$inject=["$state","$stateParams","$interval","$mdDialog","$log","$q","environment","AuthService","CacheService","BreadcrumbService","StorageService","RosterService","ClassCodeService","ToolbarService"];i(e,[{key:"goToCreateAccountChoice",value:function(){this._breadcrumbService.go("root.signup-choice");this.$mdDialog.hide()}},{key:"goBack",value:function(){this._breadcrumbService.go("root.login")}},{key:"goToResetPassword",value:function(){this._breadcrumbService.go("root.forgot-password")}},{key:"loginToAccount",value:function(){var e=this;this._isLoading=!0;return this._authService.authUserWithPassword(this.emailOrUsername,this.password,this.rememberMe).then(function(){e._cacheService.reset();return e._cacheService.getUser(!0)}).then(function(){return e._addStudentToRoster()}).then(function(){e._loginSuccess()})["catch"](function(t){t.code===a["default"].ROSTER_LOCKED?e._errorMessage="Whoops! Looks like the roster associated with the given class code is locked.":t.code===a["default"].PASSWORD_NOT_CONFIGURED?e._errorMessage='Whoops! You are trying to use a password to access a google authenticated account. Please click "continue with google" to log in.':e._errorMessage="Whoops! Looks like your email and/or password are incorrect.";e._isLoading=!1;e.password=""})}},{key:"_addStudentToRoster",value:function(){var e=this;return this._classCode?this._classCodeService.get(this._classCode).then(function(t){return e._rosterService.addSelf(t.rosterId)}):void 0}},{key:"_loginSuccess",value:function(){this._toolbarService.reset();this._breadcrumbService.clear();if(this._ckRedirect){this._ckRedirect.redirect(this._breadcrumbService);this._storageService.ckRedirect=null}else this._breadcrumbService.go("root.account.home",{},!0)}},{key:"googleSignIn",value:function(){var e=this;this._isLoading=!0;this._errorMessage="";this._authService.authUserWithGoogle().then(function(){return e._addStudentToRoster()}).then(function(){e._loginSuccess()})["catch"](function(t){e._isLoading=!1;if(t.code===a["default"].GOOGLE_POPUP_CLOSED_BY_USER||t.code===a["default"].GOOGLE_ACCESS_DENIED);else if(t.code===a["default"].INVALID_CREDENTIALS){e.notFoundLoginId=t.config.data.id;e._noAccountExistsDialog()}else if(t.code===a["default"].GOOGLE_AUTH_SETUP_FAILED)e._errorMessage="Whoops, there was a problem configuring Google Auth. Please turn off any browser plugins that might interfere.";else if(t.code===a["default"].ROSTER_LOCKED)e._errorMessage="Whoops! Looks like the roster associated with the given class code is locked.";else{e.$log.error("googleSignIn error",t,angular.toJson(t));e._errorMessage="Whoops, there was a problem logging in with Google Auth. Please try again later or email support@classkick.com."}})}},{key:"_noAccountExistsDialog",value:function(){this.$mdDialog.show({clickOutsideToClose:!0,escapeToClose:!0,contentElement:".account-login .no-account"})}},{key:"linkToCleverAuth",value:function(){this._authService.linkToCleverAuth(this.$stateParams.classCode)}},{key:"isLoading",get:function(){return this._isLoading}},{key:"emailOrUsername",get:function(){return this._emailOrUsername},set:function(e){this._emailOrUsername=e}},{key:"password",get:function(){return this._password},set:function(e){this._password=e}},{key:"rememberMe",get:function(){return this._rememberMe},set:function(e){this._rememberMe=e}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"classCode",set:function(e){this._classCode=e}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(501),a=s(o),c=function(){function e(){r(this,e)}i(e,null,[{key:"Success",get:function(){return"password_reset_success"}},{key:"Start",get:function(){return"password_reset_start"}},{key:"Loading",get:function(){return"password_reset_loading"}}]);return e}(),l=function(){function e(t,n,i){"ngInject";r(this,e);this.$scope=t;this._breadcrumbService=n;this._authService=i;this._email="";this._status=c.Start;this._emailPattern=".+@.+\\..+";this._errorMessage=""}e.$inject=["$scope","BreadcrumbService","AuthService"];i(e,[{key:"goBack",value:function(){this._breadcrumbService.goBack("root.account-login")}
},{key:"resetPassword",value:function(){var e=this;this.status=c.Loading;this._authService.requestPasswordReset(this.email).then(function(){e.status=c.Success})["catch"](function(t){e._handleError(t)})}},{key:"_handleError",value:function(e){var t=e.data;e.code===a["default"].PASSWORD_NOT_CONFIGURED?this._errorMessage="Please try logging in with Google. No password is set up for this account.":t&&404===t.status?this._errorMessage="Whoops! The email you provided was not found":t&&429===t.status&&(this._errorMessage="Whoops! Too many reset requests");this.$scope.resetPasswordForm.emailInput.$setValidity("error",!1);this.status=c.Start}},{key:"email",get:function(){return this._email},set:function(e){this._email=e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"emailPattern",get:function(){return this._emailPattern}},{key:"isPasswordResetStart",get:function(){return this.status===c.Start}},{key:"isPasswordResetSuccess",get:function(){return this.status===c.Success}},{key:"isLoading",get:function(){return this.status===c.Loading}},{key:"errorMessage",get:function(){return this._errorMessage}}]);return e}();t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){"ngInject";r(this,e);this._breadcrumbService=t;this._isLoading=!1}e.$inject=["BreadcrumbService"];i(e,[{key:"goBack",value:function(){this._breadcrumbService.goBack("root.login")}},{key:"goToCreateTeacherAccount",value:function(){this._breadcrumbService.go("root.signup-teacher")}},{key:"goToProInviteStudent",value:function(){this._breadcrumbService.go("root.signup-student")}},{key:"isLoading",get:function(){return this._isLoading}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(291),a=n(390),c=s(a),l=n(185),u=n(501),d=s(u),h=n(292),f=n(286),g=s(f),p=n(302),m=s(p),v=function(){function e(t,n,i,s,o,a,l,u,d,h,f,p,m,v,_){"ngInject";var y=this;r(this,e);this.$q=t;this.$scope=n;this.$stateParams=i;this.$log=s;this.$mdDialog=o;this.$mdMedia=a;this.$timeout=l;this._environment=u;this._breadcrumbService=d;this._staticContentService=h;this._authService=f;this._mixpanelService=p;this._staticService=m;this._classCodeService=v;this._storageService=_;this._state=this.Choice;this._classCodeText=this.$stateParams.classCode||"";this._email="";this._emailOrUsername="";this._password="";this._showPassword=!1;this._rememberMe=!0;this._emailPattern=c["default"].EmailPattern;this._confirmDialog=g["default"].show;if(this.isTeacher&&this._staticService.isMobile&&this.$mdMedia("xs")){var k="There is no Classkick phone app for teachers. <br><br> The Classkick app is available on iPad or on any computer in a Google Chrome browser.";this._confirmDialog(this.$mdDialog,k,void 0,!0,!0)}else this.isStudent&&this._classCodeText&&l(function(){return y.classCodeUpdated()})}e.$inject=["$q","$scope","$stateParams","$log","$mdDialog","$mdMedia","$timeout","environment","BreadcrumbService","StaticContentService","AuthService","MixpanelService","StaticService","ClassCodeService","StorageService"];i(e,[{key:"goBack",value:function(){this.isPassword?this.state=this.Choice:this._breadcrumbService.goBack("root.signup-choice")}},{key:"goToTermsOfServicePage",value:function(){this._staticContentService.goToTermsOfServicePage()}},{key:"goToPrivacyPolicyPage",value:function(){this._staticContentService.goToPrivacyPolicyPage()}},{key:"createAccount",value:function(){this.$stateParams.isTeacher?this.createTeacherAccount():this.createStudentAccount()}},{key:"createTeacherAccount",value:function(){var e=this;this._state=this.Loading;this._authService.signUpTeacherWithEmail(this.email,this.password,this.rememberMe).then(function(){e._mixpanelService.createAccountProgress(o.AccountCreationStep.STARTED);e._breadcrumbService.go("root.signup-teacher-name")})["catch"](function(t){e._handleSignupError(t)})}},{key:"_handleSignupError",value:function(e){var t=e&&e.data&&e.data.message;this.servicesErrorMessage=t;this.isTeacher&&this.$scope.createAccountForm.emailInput?this.$scope.createAccountForm.emailInput.$setValidity("services-error",!1):this.isStudent&&this.$scope.createAccountForm.emailOrUsernameInput&&this.$scope.createAccountForm.emailOrUsernameInput.$setValidity("services-error",!1);this._state=this.Password}},{key:"emailOrUsernameUpdated",value:function(){this._setValidity("email-format",!0);this._setValidity("email-length",!0);this._setValidity("username-format",!0);this._setValidity("username-length",!0)}},{key:"createStudentAccount",value:function(){var e=this,t=c["default"].validateUsernameOrEmail(this.emailOrUsername);if(t)this._setValidity(t,!1);else{this._state=this.Loading;var n=void 0,i=this._removeSpaces(this._classCodeText);n=c["default"].hasAtSign(this.emailOrUsername)?this._authService.signupStudentWithEmail(i,this.emailOrUsername,this.password,this.rememberMe):this._authService.signupStudentWithUsername(i,this.emailOrUsername,this.password,this.rememberMe);n.then(function(){e._mixpanelService.createAccountProgress(o.AccountCreationStep.STARTED);e._storageService.ckRedirect=new m["default"]("root.account.home",{classCode:i});e._breadcrumbService.go("root.signup-student-name")})["catch"](function(t){e._handleSignupError(t)})}}},{key:"_setValidity",value:function(e,t){this.$scope.createAccountForm.emailOrUsernameInput.$setValidity(e,t)}},{key:"googleSignUp",value:function(){this._state=this.Loading;this.$stateParams.isTeacher?this.googleSignUpForTeacher():this.googleSignUpForStudent()}},{key:"googleSignUpForTeacher",value:function(){var e=this;return this._authService.googleSignIn().then(function(t){return e.$q.all({signUpWithGoogle:e._authService.signUpWithGoogle(t,l.UserRoles.TEACHER),googleAuthInfo:t})}).then(function(t){e._mixpanelService.createAccountProgress(o.AccountCreationStep.STARTED);e._breadcrumbService.go("root.signup-teacher-name",{firstName:t.googleAuthInfo.firstName,lastName:t.googleAuthInfo.lastName})})["catch"](function(t){e._handleGoogleSignUpError(t)})}},{key:"googleSignUpForStudent",value:function(){var e=this,t=this._removeSpaces(this._classCodeText);return this._authService.googleSignIn().then(function(n){return e.$q.all({signUpWithGoogle:e._authService.signUpWithGoogle(n,l.UserRoles.STUDENT,t),googleAuthInfo:n})}).then(function(n){e._mixpanelService.createAccountProgress(o.AccountCreationStep.STARTED);e._storageService.ckRedirect=new m["default"]("root.account.home",{classCode:t});e._breadcrumbService.go("root.signup-student-name",{firstName:n.googleAuthInfo.firstName,lastName:n.googleAuthInfo.lastName})})["catch"](function(t){e._handleGoogleSignUpError(t)})}},{key:"_handleGoogleSignUpError",value:function(e){if(e.code===d["default"].GOOGLE_POPUP_CLOSED_BY_USER||e.code===d["default"].GOOGLE_ACCESS_DENIED)this._state=this.Choice;else if(e.code===d["default"].DUPLICATE_EMAIL){var t=e.config.data.email,n=e.config.data.auth.token;this._logInUserWithGoogle(t,n)}else if(e.code===d["default"].GOOGLE_AUTH_SETUP_FAILED){this._state=this.Choice;this._errorMessage="Whoops, there was a problem configuring Google Auth. Please turn off any browser plugins that might interfere."}else{this._state=this.Choice;this.$log.warn("googleSignIn error",e,angular.toJson(e));this._errorMessage="Whoops, there was a problem signing up with Google Auth. Please try again later or email support@classkick.com."}}},{key:"_logInUserWithGoogle",value:function(e,t){var n=this;this._authService.authUserWithGoogle({email:e,idToken:t}).then(function(){n._goToAssignments(h.AuthType.GOOGLE)})["catch"](function(){n._errorMessage="Whoops, there was a problem signing in with Google Auth. Please try again later or email support@classkick.com."})}},{key:"_goToAssignments",value:function(){var e=arguments.length<=0||void 0===arguments[0]?h.AuthType.PASSWORD:arguments[0];this._breadcrumbService.clear();this._breadcrumbService.go("root.account.home",{authType:e},!0)}},{key:"linkToCleverAuth",value:function(){this._authService.linkToCleverAuth(this._removeSpaces(this._classCodeText))}},{key:"classCodeUpdated",value:function(){this._errorMessage="";this.$scope.createAccountForm.classCodeInput.$setValidity("npro",!0);this.$scope.createAccountForm.classCodeInput.$setValidity("nccode",!0);this.$scope.createAccountForm.classCodeInput.$setValidity("locked",!0);this._classCodeData=void 0;var e=this._classCodeText.indexOf(" ")>-1?7:6;this._classCodeText=this._classCodeText.toUpperCase().slice(0,e);var t=this._removeSpaces(this._classCodeText);6===t.length&&this._loadClassCodeData(t)}},{key:"_loadClassCodeData",value:function(e){var t=this;this._classCodeService.getUsernames(e).then(function(n){if(t._removeSpaces(t._classCodeText)!==e)throw new Error("class Code was modified");t._classCodeData=n;t._classCodeData&&!t._classCodeData.pro&&t.$scope.createAccountForm.classCodeInput.$setValidity("npro",!1);t._classCodeData&&!t._classCodeData.allowNewMembers&&t.$scope.createAccountForm.classCodeInput.$setValidity("locked",!1)})["catch"](function(e){t.$scope.createAccountForm.classCodeInput.$setValidity("nccode",!1);t.$log.debug("_loadClassCodeData error",e)})}},{key:"_removeSpaces",value:function(e){return e.replace(/[\s]/g,"")}},{key:"isTeacher",get:function(){return this.$stateParams.isTeacher}},{key:"isStudent",get:function(){return this.$stateParams.isStudent}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"Loading",get:function(){return"loading"}},{key:"Choice",get:function(){return"signup_choice"}},{key:"Password",get:function(){return"signup_password"}},{key:"isLoading",get:function(){return this._state===this.Loading}},{key:"isChoice",get:function(){return this._state===this.Choice}},{key:"isPassword",get:function(){return this._state===this.Password}},{key:"email",get:function(){return this._email},set:function(e){this._email=e}},{key:"emailOrUsername",get:function(){return this._emailOrUsername},set:function(e){this._emailOrUsername=e}},{key:"password",get:function(){return this._password},set:function(e){this._password=e}},{key:"showPassword",get:function(){return this._showPassword},set:function(e){this._showPassword=e}},{key:"rememberMe",get:function(){return this._rememberMe},set:function(e){this._rememberMe=e}},{key:"emailPattern",get:function(){return this._emailPattern}},{key:"servicesErrorMessage",get:function(){return this._servicesErrorMessage},set:function(e){this._servicesErrorMessage=e}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"disabled",get:function(){return this.isStudent&&(!this._classCodeData||!this._classCodeData.allowNewMembers||!this._classCodeData.pro)}},{key:"showClassCodeError",get:function(){return this.$scope.createAccountForm.classCodeInput.$invalid}},{key:"classCodePattern",get:function(){return"^[a-zA-Z\\d\\s]+$"}},{key:"classCodeText",get:function(){return this._classCodeText},set:function(e){angular.isDefined(e)&&(this._classCodeText=e)}}]);return e}();t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(185),o=n(291),a=function(){function e(t,n,i,o,a,c,l,u,d,h,f,g,p,m){"ngInject";r(this,e);this.$q=t;this.$stateParams=n;this.$timeout=i;this.$log=o;this._breadcrumbService=a;this._mixpanelService=c;this._cacheService=l;this._authService=u;this._staticContentService=d;this._rosterService=h;this._assignmentService=f;this._toolbarService=g;this._contractService=p;this._storageService=m;this._isLoading=!1;this.prefix=null;this._firstName=this.$stateParams.firstName||"";this._lastName=this.$stateParams.lastName||"";this.prefixOptions=s.UserProperties.PREFIX_OPTIONS;this._onboardingTest=void 0;this._ckRedirect=this._storageService.ckRedirect;this._authService.isLoggedIn||this.goBack()}e.$inject=["$q","$stateParams","$timeout","$log","BreadcrumbService","MixpanelService","CacheService","AuthService","StaticContentService","RosterService","AssignmentService","ToolbarService","ContractService","StorageService"];i(e,[{key:"autocompleteFilter",value:function(e,t){return e?t.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())}):t}},{key:"saveName",value:function(){var e=this;this._isLoading=!0;this._mixpanelService.createAccountProgress(o.AccountCreationStep.NAME);this._cacheService.getUser(!1).then(function(t){t.firstName=e._firstName;t.lastName=e._lastName;t.displayName=e.prefix?e.prefix+" "+e._lastName:null;return e._cacheService.updateUser(t)}).then(function(){e.go()})["catch"](function(t){e.$log.error(t);e.go()})}},{key:"go",value:function(){if(this.isStudent){this._mixpanelService.createAccountProgress(o.AccountCreationStep.COMPLETE);this._breadcrumbService.clear();if(this._ckRedirect){this._ckRedirect.redirect(this._breadcrumbService);this._storageService.ckRedirect=null}else this._breadcrumbService.go("root.account.home",{},!0)}else this._breadcrumbService.go("root.signup-school",{},this.isStudent)}},{key:"goBack",value:function(){var e=this.isStudent?"root.signup-student":"root.signup-teacher";this._breadcrumbService.goBack(e)}},{key:"isStudent",get:function(){return this.$stateParams.isStudent}},{key:"isLoading",get:function(){return this._isLoading}},{key:"firstName",get:function(){return this._firstName},set:function(e){this._firstName=e}},{key:"lastName",get:function(){return this._lastName},set:function(e){this._lastName=e}}]);return e}();t["default"]=a;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=function s(e,t,n,r,o){"ngInject";i(this,s);this.$log=e;this.$timeout=t;this.$q=n;this.$state=r;this.$stateParams=o};r.$inject=["$log","$timeout","$q","$state","$stateParams"];t["default"]=r;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a){"ngInject";r(this,e);this.$log=t;this.$scope=n;this._breadcrumbService=a;this._token=i.token;this._moment=s;this._authService=o;var c=this.validateToken(this._token);this.state=c.valid?"form":"error";this._info=c.info;this.errorMessage=c.message}e.$inject=["$log","$scope","$stateParams","moment","AuthService","BreadcrumbService"];i(e,[{key:"goToLogin",value:function(){this._breadcrumbService.go("root.account-login",{},!0)}},{key:"validateToken",value:function(e){var t=e.split(".");if(3!==t.length)return{valid:!1,message:"Sorry, but it looks like your reset link got messed up somehow (invalid format)"};var n=null;try{n=angular.fromJson(Base64.decode(t[1]))}catch(i){}if(!n)return{valid:!1,message:"Sorry, but it looks like your reset link got messed up somehow"};var r=this._moment(1e3*n.exp);return this._moment().isAfter(r)?{valid:!1,message:"Sorry, but it looks like your reset link expired on "+r.format("MMMM Do YYYY, h:mm a"),info:n}:{valid:!0,info:n}}},{key:"sendEmail",value:function(){var e=this;this.loadingMessage="your email is being sent";this.state="loading";this._authService.requestPasswordReset(this._info.email).then(function(){e.finishedMessage="Your email is sent, it should be arriving any moment";e.state="finished"})["catch"](function(){e.state="error";e.errorMessage="Sorry, we had some trouble sending your email. Please try again in a few minutes."})}},{key:"submit",value:function(){var e=this;this.loadingMessage="Your new password is being set";this.state="loading";this._authService.resetPassword(this._token,this.password).then(function(){e.finishedMessage="Your new password is ready to go";e.state="finished"})["catch"](function(){e.state="error";e.errorMessage="Sorry, we had some trouble setting your password. Please try again in a few minutes."})}},{key:"hasInfo",get:function(){return!!this._info}},{key:"passwordRegex",get:function(){return this.password?"^"+this.password+"$":"^.*$"}},{key:"username",get:function(){return this._info.name}},{key:"isForm",get:function(){return"form"===this.state}},{key:"isLoading",get:function(){return"loading"===this.state}},{key:"isError",get:function(){return"error"===this.state}},{key:"isFinished",get:function(){return"finished"===this.state}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"],r=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(302),o=r(s),a=function c(e,t,n,r,s,a,l){"ngInject";i(this,c);this.$state=e;this.$stateParams=t;this.$location=n;this._bootstrapService=r;this._authService=s;this._storageService=l;if(this._bootstrapService.ready&&!this._authService.isLoggedIn){this._storageService.ckRedirect=new o["default"](null,null,this.$location.url());this.$state.go("root.account-login")}};a.$inject=["$state","$stateParams","$location","BootstrapService","AuthService","MixpanelService","StorageService"];t["default"]=a;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(291),a=n(359),c=s(a),l=n(296),u=s(l),d=n(615),h=s(d),f=n(620),g=n(300),p=n(274),m=s(p),v=function(){function e(t,n,i,s,o,a,l,u,d,h,g,p,v,_,y,k,b,S){"ngInject";var w=this;r(this,e);this.$scope=t;this.$state=n;this.$mdSidenav=i;this.$mdDialog=s;this.$q=o;this.$timeout=a;this.$location=l;this.$window=u;this._environment=d;this._authService=h;this._cacheService=g;this._delightedService=p;this._mixpanelService=v;this._staticContentService=_;this._logRocketService=y;this._orderService=k;this._helpDialog=c["default"].show;this._loadingDialog=m["default"].show;this._user=null;this._messages=null;this.adminContracts=[];this.isAdmin=!1;this._orderManager=new f.OrderManager(o,s,l,k,b,S);this._unseenLatestFeatures=!1;this.$scope.$on(e.UPDATE_LEFT_NAV,function(){return w._onUpdate()});this.$scope.$on("$destroy",function(){return w._destroy()});this.$scope.hideAdminTabText=!1;this.init()}e.$inject=["$scope","$state","$mdSidenav","$mdDialog","$q","$timeout","$location","$window","environment","AuthService","CacheService","DelightedService","MixpanelService","StaticContentService","LogRocketService","OrderService","OrganizationService","BreadcrumbService"];i(e,[{key:"init",value:function(){this._onUpdate()}},{key:"_onUpdate",value:function(){var e=this;if(this._authService.authData){this.isStudent=this._authService.authData.isStudent;this.isTeacher=this._authService.authData.isTeacher;this.isFreeUser=this._authService.authData.isFree;this.isProUser=this._authService.authData.isPro}this.$q.all({user:this._cacheService.getUser(),messages:this._cacheService.getMessagesForUser(),contracts:this._cacheService.getContracts(),schools:this._cacheService.getSchools(!1)}).then(function(t){var n=t.user,i=t.messages,r=t.contracts,s=t.schools;e._user=n;e._messages=i;e._messages.updated.subscribe(e._onMessagesUpdated,e);e.contracts=r;e.activeContract=u["default"].ActiveContract(r);e.adminContracts=r.filter(function(t){return t.isPro&&e._authService.authData.isContractAdmin(t.id)});e.isAdmin=e.adminContracts.length;e.school=s.find(function(t){return e.activeContract&&t.contractId===e.activeContract.id});e.isSchoolClosed=e.school&&!!e.school.closedEnd;e._environment.delighted&&e._user&&e.isTeacher&&e._delightedService.survey(e._user,e.isProUser);e._resetLatestFeatures()})}},{key:"goToAssignments",value:function(){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.assignments",{source:""})}},{key:"goToRosters",value:function(){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.rosters")}},{key:"goToNotifications",value:function(){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.notifications")}},{key:"goToProfile",value:function(){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.profile",{tab:h["default"].BasicInfoTab})}},{key:"goToAdmin",value:function(){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.admin")}},{key:"goToContractUsers",value:function(e){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.contract-users",{contractId:e})}},{key:"goToMetrics",value:function(e){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.metrics",{contractId:e})}},{key:"goToStudentAssignments",value:function(){this.isNavOpen&&this.$mdSidenav("nav").close();this.$state.go("^.student-assignments-list")}},{key:"getOrCreateRenewalOrder",value:function(){var e=this,t=this._cacheService.getSchools(!1).then(function(t){var n=t.find(function(t){return t.contractId===e.activeContract.id});return e.$q.all({school:n,orders:e._orderService.getForOrganization(n.id)})})["catch"](function(){e.goToOrderPage()});this._loadingDialog(this.$mdDialog,t);t.then(function(t){return e._orderManager.startSchoolOrder(e._user,t.school,t.orders)})}},{key:"goToOrderPage",value:function(){this._mixpanelService.subscriptionFunnel(o.SubscriptionFunnel.LEARN_MORE,void 0,void 0,o.PaywallSources.SIDEBAR_BUTTON);this._staticContentService.goToOrdersPage(this._logRocketService.initialized)}},{key:"signOut",value:function(){this._authService.signOut()}},{key:"viewingContractUsers",value:function(e){return this.$state.is("root.account.nav.contract-users")&&this.$state.params.contractId===e}},{key:"viewingMetrics",value:function(e){return this.$state.is("root.account.nav.metrics")&&this.$state.params.contractId===e}},{key:"_resetLatestFeatures",value:function(){var e=angular.isUndefined(this._user.lastViewedLatestFeatures),t=moment().format("MM-YYYY")!==moment(this._user.lastViewedLatestFeatures).format("MM-YYYY");this._unseenLatestFeatures=e||t}},{key:"openLatestFeaturesDialog",value:function(){var e=this;this._mixpanelService.latestFeaturesOpened();this._helpDialog(this.$mdDialog,a.ViewHelps.LatestFeatures);if(this._unseenLatestFeatures){this._user.lastViewedLatestFeatures=moment().toISOString();this._cacheService.updateUser(this._user).then(function(){e._resetLatestFeatures()})}}},{key:"goToTeacherHelpCenter",value:function(){this._staticContentService.goToTeacherHelpCenter(!0)}},{key:"_onMessagesUpdated",value:function(){this.$timeout(function(){})}},{key:"_destroy",value:function(){this._messages&&this._messages.updated.unsubscribe(this._onMessagesUpdated,this)}},{key:"greeting",get:function(){return this._user?"Hello, "+this._user.name+"!":e.GREETING}},{key:"isNavOpen",get:function(){return this.$mdSidenav("nav").isOpen()}},{key:"unseenNotifications",get:function(){return this._messages?this._messages.hasUnseenMessages:!1}},{key:"proUserType",get:function(){return this.isProClassroom?"Teacher":this.isProSchool?"School":this.isProDistrict?"District":void 0}},{key:"isContractAdmin",get:function(){return this.adminContracts&&this.adminContracts.length>0}},{key:"isProClassroom",get:function(){return this.activeContract&&this.activeContract.isProClassroom}},{key:"isProSchool",get:function(){return this.activeContract&&this.activeContract.isProSchool}},{key:"isProDistrict",get:function(){return this.activeContract&&this.activeContract.isProDistrict}},{key:"isExpiringThisYear",get:function(){return this.activeContract&&this.activeContract.expiresThisSchoolYear}},{key:"isRenewalTime",get:function(){var e=moment().month();return e>=0&&6>=e}},{key:"renewalPromotionCopy",get:function(){return g.OrderPurchasePeriod.forStage("","Before prices increase July 1st!","Before prices increase July 1st!")}},{key:"viewingAssignments",get:function(){return this.$state.is("root.account.nav.assignments")||this.$state.is("root.account.nav.folder")}},{key:"viewingRosters",get:function(){return this.$state.is("root.account.nav.rosters")}},{key:"viewingNotifications",get:function(){return this.$state.is("root.account.nav.notifications")}},{key:"viewingProfile",get:function(){return this.$state.is("root.account.nav.profile")}},{key:"viewingAdmin",get:function(){return this.$state.is("root.account.nav.admin")}},{key:"viewingStudentAssignments",get:function(){return this.$state.is("root.account.nav.student-assignments-list")}},{key:"unseenLatestFeatures",get:function(){return this._unseenLatestFeatures}},{key:"userIsAdmin",get:function(){return this._authService.adminAuthData||this._authService.authData&&this._authService.authData.isAdmin}}],[{key:"GREETING",get:function(){return"Welcome back!"}},{key:"UPDATE_LEFT_NAV",get:function(){return"UPDATE_LEFT_NAV"}}]);return e}();t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(121)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(151),c=o(a),l=n(367),u=o(l),d=n(185),h=o(d),f=n(274),g=o(f),p=n(292),m=n(390),v=o(m),_=n(286),y=o(_),k=n(614),b=o(k),S=n(616),w=o(S),C=n(617),E=o(C),T=n(618),I=o(T),A=n(619),x=o(A),O=n(214),P=o(O),R=function(){function e(t,n,i,s,o,a,c,l,u,h,f,p,m,_,k,b,S,C){"ngInject";var T=this;r(this,e);this.$q=t;this.$scope=s;this.$rootScope=o;this.$state=n;this.$stateParams=i;this.$mdSidenav=c;this.$window=l;this.$log=u;this.$mdToast=h;this.$mdDialog=f;this.$document=p;this._cacheService=m;this._studentCacheService=_;this._authService=a;this._inviteCodeService=k;this._subscriptionService=b;this._breadcrumbService=S;this._organizationService=C;this._loadingDialog=g["default"].show;this._confirmDialog=y["default"].show;this._deleteAccountDialog=w["default"].show;this._state=this.$stateParams.tab||e.BasicInfoTab;this.saveState=null;this.prefixOptions=d.UserProperties.PREFIX_OPTIONS;this.jobTitleOptions=d.UserProperties.JOB_TITLE_OPTIONS;this.subjectOptions=d.UserProperties.SUBJECT_OPTIONS;this.studentAgeOptions=d.UserProperties.STUDENT_AGE_OPTIONS;this.referralOptions=d.UserProperties.REFERRAL_OPTIONS;this.oldPassword="";this.newPassword="";this.prefix=null;this.firstName=null;this.lastName=null;this.username=null;this.email=null;this.jobTitle=null;this.referral=null;this.studentAge=null;this.subject=null;this._user=null;this._contracts=null;this._subscriptions=null;this._schools=null;this._assignmentsUsedCount=0;this._inviteCodePattern=v["default"].InviteCodePattern;this._inviteCodeRegex=v["default"].InviteCodeRegex;this._inviteCode="";this._inviteCodeError=!1;this._updateUserSchoolDialog=E["default"].show;this._assignmentsLimitPaywallDialog=I["default"].show;this._cancelSubscriptionDialog=x["default"].show;this._errorDialog=P["default"].show;this._usernameError=null;this._emailError=null;s.$on("$destroy",function(){return T._destroy()});if(l){this._anonBeforeUnload=function(e){return T._onBeforeUnload(e)};l.onbeforeunload.add(this._anonBeforeUnload)}this.init()}e.$inject=["$q","$state","$stateParams","$scope","$rootScope","AuthService","$mdSidenav","$window","$log","$mdToast","$mdDialog","$document","CacheService","StudentCacheService","InviteCodeService","SubscriptionService","BreadcrumbService","OrganizationService"];i(e,[{key:"init",value:function(){var e=this;this._debouncer=new c["default"](3e3,5e3,function(){e._commit()},this.$scope,this.$window);this.$q.all({user:this._cacheService.getUser(!0),proInfo:this._cacheService.getProInfo(),subscriptions:this._cacheService.getSubscriptions(),schools:this._cacheService.getSchools()}).then(function(t){var n=t.user,i=t.proInfo,r=t.subscriptions,s=t.schools;e.user=n;e._proInfo=i;e._contracts=i.contracts;e._subscriptions=r;e._schools=s;e.isTeacher&&e._proInfo.isFree&&e._initPlans()})["catch"](function(t){e.error=t;e.$log.error(t.message)})}},{key:"_initPlans",value:function(){var e=this;this._cacheService.getAssignmentsForUser(!1).then(function(t){var n=s(t,function(e){return e[1]}).filter(function(e){return!e.isFolder});e._assignmentsUsedCount=n.length})}},{key:"_onBeforeUnload",value:function(){this._commit()}},{key:"goToProfileInfo",value:function(){this.$state.go(this.$state.current.name,{tab:e.BasicInfoTab});this._state=e.BasicInfoTab}},{key:"goToProfileSchool",value:function(){this.$state.go(this.$state.current.name,{tab:e.SchoolTab});this._state=e.SchoolTab}},{key:"goToProfilePlan",value:function(){this.$state.go(this.$state.current.name,{tab:e.PlanTab});this._state=e.PlanTab}},{key:"openAssignmentsLimitPaywallDialog",value:function(){return this._assignmentsLimitPaywallDialog(this.$mdDialog,this.assignmentsUsedCount,this.assignmentsLimit)}},{key:"contractHasSubscription",value:function(e){return this._subscriptions.some(function(t){return t.contractId===e})}},{key:"updatePaymentInfo",value:function(e){var t=this._subscriptions.find(function(t){return t.contractId===e.id});this._breadcrumbService.go("root.account.update-payment",{subscriptionPlan:t.subscriptionPlan})}},{key:"cancelSubscription",value:function(e){var t=this,n=this._subscriptions.find(function(t){return t.contractId===e.id});this._cancelSubscriptionDialog(this.$mdDialog,this._user,n,e).then(function(){var e=t._subscriptionService.cancel(n.id).then(function(){return t._cacheService.getSubscriptions(!0)}).then(function(e){t._subscriptions=e;t.showToast("Subscription cancelled")})["catch"](function(){t._errorDialog(t.$mdDialog,"There was a problem canceling your subscription please reach out to support@classkick.com","")});t._loadingDialog(t.$mdDialog,e)})}},{key:"recurringStatusDisplay",value:function(e){return this.contractHasSubscription(e.id)?"Renews "+e.subscriptionRenewsDisplay:e.isExpired?"Expired "+e.expiresDisplay:"Expires "+e.expiresDisplay}},{key:"changeSchool",value:function(){var e=this;this._updateUserSchoolDialog(this.$mdDialog,"Change Organization").then(function(t){return e._changeSchool(t)})}},{key:"_changeSchool",value:function(e){var t=this;this.saveState=this.UNSAVED;if(this._schools.some(function(t){return t.id===e.id}))this.saveState=this.SAVED;else{var n=this._leaveNonAdminSchools().then(function(){return t._organizationService.addSelf(e.id)}).then(function(e){t._cacheService.reset();return t._authService.processTokenResult(e,t._authService.rememberMe)}).then(function(){t.$state.reload()})["catch"](function(){t.saveState=t.SAVE_ERROR});this._loadingDialog(this.$mdDialog,n)}}},{key:"_leaveNonAdminSchools",value:function(){var e=this,t=this._schools.filter(function(e){return!e.contractId||!e.admin});return this.$q.all(t.map(function(t){return e._organizationService.removeSelf(t.id)}))}},{key:"fieldUpdated",value:function(e,t,n){if(!n){e.$touched=!0;var i=t.$valid;if(!this.email&&!this.username){this._emailError=this.isStudent?"You must set an email or username":"You must set an email";t.email.$setValidity("required",!0)}this._debouncer.tick();this._debouncer.valid=i;i?this.saveState=this.UNSAVED:this.saveState=this.SAVE_ERROR}}},{key:"changePassword",value:function(e){var t=this,n=this._authService.updatePassword(this.oldPassword,this.newPassword).then(function(n){if(n){t.showToast("Your password was updated successfully!");t.resetUpdatePasswordForm(e)}else e.oldPassword.$setValidity("invalid-password",!1)});return this._loadingDialog(this.$mdDialog,n,this.$document,".user-profile .update-password-form")}},{key:"resetUpdatePasswordForm",value:function(e){this.oldPassword="";this.newPassword="";this.showNewPassword=!1;e.oldPassword.$setValidity("required",!0);e.oldPassword.$setValidity("invalid-password",!0);e.newPassword.$setValidity("required",!0);e.$setUntouched();e.$setPristine()}},{key:"oldPasswordUpdated",value:function(e){e.oldPassword.$setValidity("invalid-password",!0)}},{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"resetInviteCodeForm",value:function(e){this._inviteCode="";e.inviteCode.$setValidity("invalid-code",!0);e.inviteCode.$setValidity("too-long",!0);e.inviteCode.$setValidity("pattern",!0);e.$setUntouched();e.$setPristine();this._inviteCodeError=!1}},{key:"inviteCodeUpdated",value:function(e){e.inviteCode.$setValidity("invalid-code",!0);e.inviteCode.$setValidity("too-long",!0);e.inviteCode.$setValidity("pattern",!0);this._inviteCodeError=!1;this._inviteCode=this._inviteCode.replace(/[\s]/g,"").slice(0,6).toUpperCase();
if(this._inviteCode)if(this._inviteCode.length>5){e.inviteCode.$setValidity("too-long",!1);this._inviteCodeError=!0}else if(!this._inviteCodeRegex.test(this._inviteCode)){e.inviteCode.$setValidity("pattern",!1);this._inviteCodeError=!0}}},{key:"enterProInvite",value:function(e){var t=this;this._inviteCodeError=!1;e.inviteCode.$setValidity("invalid-code",!0);var n=this._inviteCodeService.submit(this.inviteCode).then(function(e){return t._authService.processTokenResult(e,t._authService.rememberMe)}).then(function(){t._cacheService.reset();t.showToast("You have been added to the organization successfully!");t.resetInviteCodeForm(e);t._updateLeftNav()})["catch"](function(n){t._inviteCodeError=!0;e.inviteCode.$setValidity("invalid-code",!1);t.$log.error(n)});this._loadingDialog(this.$mdDialog,n,this.$document,".user-profile .pro-invite-form")}},{key:"deleteAccountDialog",value:function(){var e=this;if(this.isTeacher)this._deleteAccountDialog(this.$mdDialog,this.user);else{var t=this._studentCacheService.getUserAssignmentsAndWorks(!0);this._loadingDialog(this.$mdDialog,t);t.then(function(t){var n=t.works;e._worksStarted(n)>w["default"].AssignmentsWorkedOnThreshold?e._confirmDialog(e.$mdDialog,"Uh oh. It looks like you've already done quite a bit of work. If you are sure you want to delete your account, please email support@classkick.com",void 0,!0):e._deleteAccountDialog(e.$mdDialog,e.user)})}}},{key:"_worksStarted",value:function(e){return s(e.values()).filter(function(e){return e.hasStarted}).length}},{key:"_commit",value:function(){var e=this;this._usernameError=!1;this._emailError=!1;this.user.displayName=this.prefix?this.prefix+" "+this.lastName:null;this.user.firstName=this.firstName;this.user.lastName=this.lastName;this.user.username=this.username;this.user.email=this.email;this.user.jobTitle=this.jobTitle;this.user.referral=this.referral;this.user.studentAge=this.studentAge;this.user.subject=this.subject;return this._cacheService.updateUser(this.user).then(function(){e.saveState=e.SAVED;e._updateLeftNav()})["catch"](function(t){t.data&&t.data.message&&(-1!==t.data.message.indexOf("Duplicate entry")?e._emailError="Email is already in use":-1!==t.data.message.indexOf("well-formed")&&(e._emailError="Not a valid email address"));e.$log.error(t);e.saveState=e.SAVE_ERROR})}},{key:"autocompleteFilter",value:function(e,t){return e?t.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())}):t}},{key:"_destroy",value:function(){this._debouncer.destroy()}},{key:"showToast",value:function(e){this.$mdToast.show(this.$mdToast.simple().textContent(e).position("bottom right"))}},{key:"_updateLeftNav",value:function(){this.$rootScope.$broadcast(b["default"].UPDATE_LEFT_NAV,{})}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"viewingInfo",get:function(){return this._state===e.BasicInfoTab}},{key:"viewingSchool",get:function(){return this._state===e.SchoolTab}},{key:"viewingPlan",get:function(){return this._state===e.PlanTab}},{key:"assignmentsUsedCount",get:function(){return this._assignmentsUsedCount}},{key:"assignmentsLimit",get:function(){return this.user&&this.user.assignmentsLimit||h["default"].DefaultAssignmentsLimit}},{key:"assignmentsUsedWidth",get:function(){var e=Math.round(this.assignmentsUsedCount/this.assignmentsLimit*100);return 5*Math.min(e,100)}},{key:"contracts",get:function(){return this._contracts}},{key:"activeContracts",get:function(){return this._contracts.filter(function(e){return!e.isExpired})}},{key:"expiredContracts",get:function(){return this._contracts.filter(function(e){return e.isExpired})}},{key:"hasContract",get:function(){return this._contracts&&1===this.activeContracts.length}},{key:"hasContracts",get:function(){return this._contracts&&this.activeContracts.length>1}},{key:"showTrialExplanationText",get:function(){return this._contracts.some(function(e){return e.isTrial===!0&&!e.isExpired})&&this.isTeacher}},{key:"subscriptions",get:function(){return this._subscriptions}},{key:"schools",get:function(){return this._schools}},{key:"hasSchool",get:function(){return this._schools&&this._schools.length>0}},{key:"hasSchools",get:function(){return this._schools&&this._schools.length>1}},{key:"user",get:function(){return this._user},set:function(e){e.displayName&&e.displayName.includes(" ")&&(this.prefix=e.displayName.split(" ")[0]);this.firstName=e.firstName;this.lastName=e.lastName;this.username=e.username;this.email=e.email;this.jobTitle=e.jobTitle||null;this.referral=e.referral||null;this.studentAge=e.studentAge;this.subject=e.subject||null;this._user=e}},{key:"inviteCode",get:function(){return this._inviteCode},set:function(e){this._inviteCode=e}},{key:"inviteCodeError",get:function(){return this._inviteCodeError}},{key:"emailError",get:function(){return this._emailError}},{key:"usernameError",get:function(){return this._usernameError}},{key:"inviteCodePattern",get:function(){return this._inviteCodePattern}},{key:"SAVED",get:function(){return u["default"].SAVED}},{key:"UNSAVED",get:function(){return u["default"].UNSAVED}},{key:"SAVE_ERROR",get:function(){return u["default"].SAVE_ERROR}},{key:"isTeacher",get:function(){return this._authService.authData&&this._authService.authData.isTeacher}},{key:"isStudent",get:function(){return this._authService.authData&&this._authService.authData.isStudent}},{key:"isPasswordAuthed",get:function(){return this.user.authTypes.includes(p.AuthType.PASSWORD)}},{key:"isGoogleAuthed",get:function(){return this.user.authTypes.includes(p.AuthType.GOOGLE)}},{key:"isCleverAuthed",get:function(){return this.user.authTypes.includes(p.AuthType.CLEVER)}}],[{key:"BasicInfoTab",get:function(){return"info"}},{key:"SchoolTab",get:function(){return"school"}},{key:"PlanTab",get:function(){return"plan"}}]);return e}();t["default"]=R;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(274),a=s(o),c=n(214),l=s(c),u=function(){function e(t,n,i,s,o,c,u,d){"ngInject";r(this,e);this.$mdDialog=t;this.$location=n;this.$mdToast=i;this._loadingDialog=a["default"].show;this._errorDialog=l["default"].show;this.user=d;this._userService=s;this._authService=o;this._googleFormService=c;this._mixpanelService=u;this.deleteOptions=["Wrong Account Type","Pro Expired","Don't Like Classkick"];this.deleteReason=null}e.$inject=["$mdDialog","$location","$mdToast","UserService","AuthService","GoogleFormService","MixpanelService","user"];i(e,[{key:"autocompleteFilter",value:function(e,t){return e?t.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())}):t}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"_logDeleteReason",value:function(){this._googleFormService.sendDeleteReason(this.user,this.deleteReason)}},{key:"deleteAccount",value:function(){var e=this;this._mixpanelService.userDeleted();this._logDeleteReason();var t=this._userService["delete"](this.user.id).then(function(){return e.user});this._loadingDialog(this.$mdDialog,t).then(function(){var t=e.$mdToast.simple().textContent("Deleted Account").position("bottom right");e.$mdToast.show(t)}).then(function(){e._authService.signOut()})["catch"](function(){e._errorDialog(e.$mdDialog,"There was a problem deleting your account.")})}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/delete-account-dialog/delete-account-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{user:n},focusOnOpen:!1})}},{key:"AssignmentsWorkedOnThreshold",get:function(){return 5}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(357),c=o(a),l=function(){function e(t,n,i,s,o,c,l,u){r(this,e);this.$mdDialog=t;this._googlePlacesService=n;this._organizationService=i;this._ipStackService=s;this._state=this.JoinSchool;this._loading=!1;this._schoolName=l?l.name:"";this._school=l;this._newSchoolName="";this._newSchoolLocationDisplay="";this._newSchoolLocation=void 0;this._title=o;this._explanation=c;this._preventClose=u;this.organizationType=a.OrganizationTypes.UserDefinedOrganizationTypes[0]}e.$inject=["$mdDialog","GooglePlacesService","OrganizationService","IPStackService","title","explanation","defaultOrganization","preventClose"];i(e,[{key:"joinSchool",value:function(e){if(!e.joinSchoolForm.$invalid){this._loading=!0;this.$mdDialog.hide(this.school)}}},{key:"addSchool",value:function(e){var t=this;if(!e.enterSchoolDetailsForm.$invalid){this._loading=!0;this._createSchool(this.newSchoolLocation.placeId,this.newSchoolName).then(function(e){t.$mdDialog.hide(e)})}}},{key:"_createSchool",value:function(e,t){var n=this;return this._googlePlacesService.getPlaceDetails(e).then(function(e){return n._organizationService.create(a.OrganizationTypes.School,t,e.lat,e.lng,e.zip,e.city,e.state,e.country,n.organizationType.value)})}},{key:"autocompleteLocation",value:function(e){var t=this;if(!e||e.length<2)return[];this._loadingAutocompleteLocation=!0;return this._googlePlacesService.getPredictions(e).then(function(e){t._loadingAutocompleteLocation=!1;return e})}},{key:"autocompleteSchool",value:function(e){var t=this;this._loadingAutocompleteSchool=!0;return this._ipStackService.getLocation().then(function(n){return t._organizationService.search(a.OrganizationTypes.School,n.lat,n.lng,e)}).then(function(e){t._loadingAutocompleteSchool=!1;return[].concat(s(e),[{}])})}},{key:"isOrganization",value:function(e){return e instanceof c["default"]}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"organizationOptions",get:function(){return a.OrganizationTypes.UserDefinedOrganizationTypes}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"JoinSchool",get:function(){return"join_school"}},{key:"AddSchool",get:function(){return"add_school"}},{key:"loading",get:function(){return this._loading}},{key:"title",get:function(){return this._title}},{key:"explanation",get:function(){return this._explanation}},{key:"preventClose",get:function(){return this._preventClose}},{key:"schoolName",get:function(){return this._schoolName},set:function(e){this._schoolName=e}},{key:"school",get:function(){return this._school},set:function(e){this._school=e}},{key:"newSchoolName",get:function(){return this._newSchoolName},set:function(e){this._newSchoolName=e}},{key:"newSchoolLocationDisplay",get:function(){return this._newSchoolLocationDisplay},set:function(e){this._newSchoolLocationDisplay=e}},{key:"newSchoolLocation",get:function(){return this._newSchoolLocation},set:function(e){this._newSchoolLocation=e}},{key:"loadingAutocompleteLocation",get:function(){return this._loadingAutocompleteLocation}},{key:"loadingAutocompleteSchool",get:function(){return this._loadingAutocompleteSchool}}],[{key:"show",value:function(t,n,i,r){var s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4];return t.show({controller:e,templateUrl:"app/components/update-user-school-dialog/update-user-school-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!s,locals:{title:n,explanation:i,defaultOrganization:r,preventClose:s}})}}]);return e}();t["default"]=l;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(291),o=function(){function e(t,n,i,o,a,c){r(this,e);this.$mdDialog=t;this._mixpanelService=n;this._staticContentService=i;this._logRocketService=o;this._used=a;this._limit=c;this._percentage=Math.round(this._used/this._limit*100);this._percentageToNearest5=Math.min(5*Math.ceil(this._percentage/5),100)||5;this._mixpanelService.subscriptionFunnel(s.SubscriptionFunnel.PAYWALL,void 0,void 0,s.PaywallSources.ASSIGNMENTS_LIMIT_PAYWALL_DIALOG)}e.$inject=["$mdDialog","MixpanelService","StaticContentService","LogRocketService","used","limit"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"goToOrderPage",value:function(){this._mixpanelService.subscriptionFunnel(s.SubscriptionFunnel.LEARN_MORE,void 0,void 0,s.PaywallSources.ASSIGNMENTS_LIMIT_PAYWALL_DIALOG);this.$mdDialog.hide();this._staticContentService.goToOrdersPage(this._logRocketService.initialized)}},{key:"percentageToNearest5",get:function(){return this._percentageToNearest5}},{key:"used",get:function(){return this._used}},{key:"limit",get:function(){return this._limit}},{key:"title",get:function(){return"You've used "+this._percentage+"% of your assignment limit!"}},{key:"topMessage",get:function(){return"You have used "+this._used+" of the "+this._limit+" free assignments you get as a Classkick Basic user."}},{key:"bottomMessage",get:function(){return"Upgrade to one of our Classkick Pro plans to get unlimited assignments as well as tons of additional Pro features!"}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/components/assignments-limit-paywall-dialog/assignments-limit-paywall-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,locals:{used:n,limit:i}})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(291),o=function(){function e(t,n,i,s,o,a){"ngInject";r(this,e);this.$mdDialog=t;this._googleFormService=n;this._mixpanelService=i;this._user=s;this._subscription=o;this._contract=a;this._cancelOptions=["I don't like Classkick","I can't afford it","My school upgraded to Pro","Other"];this._cancelReason=""}e.$inject=["$mdDialog","GoogleFormService","MixpanelService","user","subscription","contract"];i(e,[{key:"autocompleteFilter",value:function(e,t){return e?t.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())}):t}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"cancelSubscription",value:function(){this._mixpanelService.subscriptionFunnel(s.SubscriptionFunnel.CANCEL,this._subscription.subscriptionPlan,this._contract.planType);this._googleFormService.sendCancelSubscriptionReason(this._user,this._subscription,this._cancelReason);this.$mdDialog.hide()}},{key:"cancelOptions",get:function(){return this._cancelOptions}},{key:"cancelReason",get:function(){return this._cancelReason},set:function(e){this._cancelReason=e}}],[{key:"show",value:function(t,n,i,r){return t.show({controller:e,templateUrl:"app/components/cancel-subscription-dialog/cancel-subscription-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{user:n,subscription:i,contract:r},focusOnOpen:!1})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(527),a=s(o),c=n(357),l=n(529),u=n(621),d=s(u),h=n(622),f=s(h),g=n(274),p=s(g),m=n(214),v=s(m),_=function(){function e(t,n,i,s,o,a){r(this,e);this.$q=t;this.$mdDialog=n;this.$location=i;this._orderService=s;this._organizationService=o;this._breadcrumbService=a;this._createOrderDialog=d["default"].show;this._loadingDialog=p["default"].show;this._shareOrderDialog=f["default"].show;this._errorDialog=v["default"].show}i(e,[{key:"shareSchoolOrder",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r=a["default"].findActiveOrder(i),s=this.$q.resolve(r);r||(s=this.getOrCreateSchoolOrder(e,t,i));s.then(function(t){return n.shareOrder(t,e)})}},{key:"startSchoolOrder",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r=a["default"].findActiveOrder(i);r?this._goToOrder(r.id):this.getOrCreateSchoolOrder(e,t,i).then(function(e){n._goToOrder(e.id)})}},{key:"getOrCreateSchoolOrder",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r=a["default"].findActiveOrder(i),s=e?e.id:"",o=e?e.name:"",l=e?e.email:"",u=e&&e.isTeacher;return!r&&u&&t?this._getOrCreateOrder(t,this._getPlanId(t.type,t.virtual),a["default"].getDefaultStart(i),a["default"].getDefaultEnd(i,!1,!0),a["default"].hasAlreadyPurchasedThisYear(i),t.virtual,1,s,o,l):this._createOrderDialog(this.$mdDialog,c.OrganizationTypes.School,1,o,l).then(function(e){var t=e.organization,i=e.quantity,r=e.name,o=e.email,a=e.start,c=e.end,l=e.renewal,u=e.virtual;return n._getOrCreateOrder(t,n._getPlanId(t.type,u),a,c,l,u,i,s,r,o)})}},{key:"startDistrictOrder",value:function(e,t){var n=this;this.getOrCreateDistrictOrder(e,t).then(function(e){n._goToOrder(e.id)})}},{key:"getOrCreateDistrictOrder",value:function(e,t){var n=this,i=e?e.id:"",r=e?e.name:"",s=e?e.email:"";return this._createOrderDialog(this.$mdDialog,c.OrganizationTypes.District,t,r,s).then(function(e){var t=e.organization,r=e.quantity,s=e.name,o=e.email,a=e.start,c=e.end,l=e.renewal,u=e.virtual;return n._getOrCreateOrder(t,n._getPlanId(t.type,u),a,c,l,u,r,i,s,o)})}},{key:"shareOrder",value:function(e,t){var n=this,i=t&&t.id,r=t?t.email:"";return this.$q.all({order:e,members:this._organizationService.getUsers(e.organizationId),organization:this._organizationService.get(e.organizationId)}).then(function(e){var t=e.order,s=e.members,o=e.organization,a=s.filter(function(e){return e.id!==i&&!!e.displayName}).map(function(e){return e.displayName}),c=f["default"].whoIsAtSchool(a),l="$"+(t.unitPrice-t.unitDiscount)+(o.isDistrict?"/school, with each school getting":" for");n._shareOrderDialog(n.$mdDialog,t,r,void 0,f["default"].DefaultTitle,f["default"].formatDefaultMessage(t.id,o.name,o.type,c,l,n.$location))})["catch"](function(){n._errorDialog(n.$mdDialog,"Whoops, it looks like there was an issue forwarding this info","Please try again and if you continue to have issues send us an email at support@classkick.com")})}},{key:"_getOrCreateOrder",value:function(e,t,n,i,r,s,o,c,l,u){var d=this,h=this._orderService.getForOrganization(e.id).then(function(h){var f=a["default"].findActiveOrder(h);return f?f:d._orderService.getCouponIds(e.type,r,!1,s,n,i,moment()).then(function(s){return d._orderService.create(e.id,t,n,i,r,o||1,s,c,l,u)})})["catch"](function(){d._errorDialog(d.$mdDialog,"Whoops, it looks like there was an issue creating your "+e.type+"'s order","Please try again and if you continue to have issues send us an email at support@classkick.com")});this._loadingDialog(this.$mdDialog,h);return h}},{key:"_goToOrder",value:function(e){this._breadcrumbService.go("root.order-detail",{orderId:e})}},{key:"_getPlanId",value:function(e,t){return e===c.OrganizationTypes.School&&t?l.OrderPlans.PrometheusVirtualV6:e!==c.OrganizationTypes.School||t?e===c.OrganizationTypes.District&&t?l.OrderPlans.InvincibleVirtualV6:e!==c.OrganizationTypes.District||t?void 0:l.OrderPlans.InvincibleV6:l.OrderPlans.PrometheusV6}}]);return e}();t.OrderManager=_},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(357),c=o(a),l=n(527),u=o(l),d=n(390),h=o(d),f=function(){function e(t,n,i,s,o,a,c,l,u){r(this,e);this.$mdDialog=t;this._googlePlacesService=n;this._organizationService=i;this._ipStackService=s;this._orderService=o;this._state=this.IdentifyOrganization;this._orgType=a;this._organization=void 0;this._organizationName="";this._quantity=c||1;this._positiveIntegerRegEx=/^[0-9]*[1-9]+$|^[1-9]+[0-9]*$/;this._name=l||"";this._email=u||"";this._hideThisYear=void 0;this._hideFirstYearCheckbox=void 0;this._renewal=!1;this._prices=void 0;this._selectedStart=void 0;this._selectedEnd=void 0;this._isValidPurchasePeriod=void 0;this._newOrganizationName="";this._newOrganizationLocationDisplay="";this._newOrganizationLocation=void 0}e.$inject=["$mdDialog","GooglePlacesService","OrganizationService","IPStackService","OrderService","orgType","quantity","name","email"];i(e,[{key:"incrementQuantity",value:function(){this.quantity=this._quantity+1}},{key:"decrementQuantity",value:function(){this.quantity=this._quantity-1}},{key:"addOrganization",value:function(e){var t=this;if(!e.enterOrganizationDetailsForm.$invalid){this.state=this.Loading;this._createOrganization(this.newOrganizationLocation.placeId,this.newOrganizationName).then(function(e){t._organization=e;t._organizationName=e.name;t._hideThisYear=!1;t._hideFirstYearCheckbox=!0;t._renewal=!1;t._selectedStart=u["default"].getDefaultStart();t._selectedEnd=u["default"].getDefaultEnd();t._state=t.IdentifyPerson})}}},{key:"identifyOrganization",value:function(e){var t=this;if(!e.identifyOrganizationForm.$invalid){this.state=this.Loading;this._organization=this.organization;this._orderService.getForOrganization(this._organization.id).then(function(e){var n=u["default"].findActiveOrder(e),i=u["default"].hasAlreadyPurchasedThisYear(e);if(n)t.$mdDialog.hide({organization:t._organization,quantity:n.quantity,name:n.creatorName,email:n.creatorEmail});else{t._hideThisYear=i;t._hideFirstYearCheckbox=i;t._renewal=i||!!t.organization.contractId;t._selectedStart=u["default"].getDefaultStart(e);t._selectedEnd=u["default"].getDefaultEnd(e);t._state=t.IdentifyPerson}})}}},{key:"_createOrganization",value:function(e,t){var n=this;return this._googlePlacesService.getPlaceDetails(e).then(function(e){return n._organizationService.create(n._orgType,t,e.lat,e.lng,e.zip,e.city,e.state,e.country)})}},{key:"autocompleteLocation",value:function(e){var t=this;if(!e||e.length<2)return[];this._loadingAutocompleteLocation=!0;return this._googlePlacesService.getPredictions(e).then(function(e){t._loadingAutocompleteLocation=!1;return e})}},{key:"autocompleteOrganization",value:function(e){var t=this;this._loadingAutocompleteOrganization=!0;return this._ipStackService.getLocation().then(function(n){return t._organizationService.search(t._orgType,n.lat,n.lng,e)}).then(function(e){t._loadingAutocompleteOrganization=!1;return[].concat(s(e),[{}])})}},{key:"isOrganization",value:function(e){return e instanceof c["default"]}},{key:"identifyPerson",value:function(e){var t=this;if(!e.identifyPersonForm.$invalid){this.state=this.Loading;this._orderService.getPrices(this.orgType,this.renewal,this.virtual,moment()).then(function(e){t._prices=e;t.state=t.IdentifyPurchasePeriod});this._organizationService.update(this.organization)}}},{key:"submitPurchasePeriod",value:function(e){e.selectPurchasePeriodForm.$invalid||(this.isValidPurchasePeriod?this.$mdDialog.hide({organization:this._organization,quantity:this._quantity,name:this._name,email:this._email,start:this.renewal?u["default"].getDefaultStart([],this._renewal):this.selectedStart,end:this.selectedEnd,renewal:this.renewal,virtual:this.virtual}):this._errorMessage="Invalid purchase period. Please select one or more consecutive years.")}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"Loading",get:function(){return"loading"}},{key:"IdentifyOrganization",get:function(){return"identify_organization"}},{key:"IdentifyPerson",get:function(){return"identify_person"}},{key:"IdentifyPurchasePeriod",get:function(){return"identify_purchase_period"}},{key:"AddOrganization",get:function(){return"add_organization"}},{key:"orgType",get:function(){return this._orgType}},{key:"School",get:function(){return a.OrganizationTypes.School}},{key:"District",get:function(){return a.OrganizationTypes.District}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"email",get:function(){return this._email},set:function(e){this._email=e}},{key:"emailPattern",get:function(){return h["default"].EmailPattern}},{key:"renewal",get:function(){return this._renewal}},{key:"virtual",get:function(){return this._organization&&this._organization.virtual},set:function(e){this._organization&&(this._organization.virtual=e)}},{key:"prices",get:function(){return this._prices}},{key:"organizationName",get:function(){return this._organizationName},set:function(e){this._organizationName=e}},{key:"organization",get:function(){return this._organization},set:function(e){this._organization=e}},{key:"quantity",get:function(){return this._quantity},set:function(e){(null===e||angular.isUndefined(e))&&(e="");this._quantity=angular.isNumber(e)?Math.abs(parseInt(e)):e}},{key:"positiveIntegerRegEx",get:function(){return this._positiveIntegerRegEx}},{key:"newOrganizationName",get:function(){return this._newOrganizationName},set:function(e){this._newOrganizationName=e}},{key:"newOrganizationLocationDisplay",get:function(){return this._newOrganizationLocationDisplay},set:function(e){this._newOrganizationLocationDisplay=e}},{key:"newOrganizationLocation",get:function(){return this._newOrganizationLocation},set:function(e){this._newOrganizationLocation=e}},{key:"loadingAutocompleteLocation",get:function(){return this._loadingAutocompleteLocation}},{key:"loadingAutocompleteOrganization",get:function(){return this._loadingAutocompleteOrganization}},{key:"hideThisYear",get:function(){return this._hideThisYear}},{key:"hideFirstYearCheckbox",get:function(){return this._hideFirstYearCheckbox}},{key:"isRenewal",get:function(){return this._renewal}},{key:"firstYear",get:function(){return!this._renewal},set:function(e){this._renewal=!e}},{key:"selectedStart",get:function(){return this._selectedStart},set:function(e){this._selectedStart=e}},{key:"selectedEnd",get:function(){return this._selectedEnd},set:function(e){this._selectedEnd=e}},{key:"isValidPurchasePeriod",get:function(){return this._isValidPurchasePeriod},set:function(e){this._errorMessage="";this._isValidPurchasePeriod=e}},{key:"errorMessage",get:function(){return this._errorMessage}}],[{key:"show",value:function(t,n,i,r,s){return t.show({controller:e,templateUrl:"app/components/create-order-dialog/create-order-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,locals:{orgType:n,quantity:i,name:r,email:s}})}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(425)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(390),c=o(a),l=n(404),u=o(l),d=function(){function e(t,n,i,s,o,a,l){r(this,e);this.$mdDialog=t;this._orderService=n;this._state=this.DraftEmail;this._order=i;this._from=s||"";this._to=o||"";this.emailRegex=c["default"].EmailRegex;this._subject=a||"";this._body=l||""}e.$inject=["$mdDialog","OrderService","order","from","to","subject","body"];i(e,[{key:"shareOrder",value:function(e){var t=this;if(this.isEmailListValid){if(this.body){this._state=this.Loading;this._orderService.share(this._order.id,this._from,this._to.split(",").map(function(e){return e.trim()}),this._subject,this._body.split("\n").join("<br>")).then(function(){t._state=t.EmailSent;if(!t._order.billingEmail){t._order.billingEmail=t.to;t._orderService.update(t._order)}})["catch"](function(){t._state=t.EmailError})}}else e.shareOrderForm.toInput.$setValidity("pattern",!1)}},{key:"setEmailValidity",value:function(e){e.shareOrderForm.toInput.$setValidity("pattern",this.isEmailListValid)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"Loading",get:function(){return"loading"}},{key:"DraftEmail",get:function(){return"draft_email"}},{key:"EmailSent",get:function(){return"email_sent"}},{key:"EmailError",get:function(){return"email_error"}},{key:"from",get:function(){return this._from},set:function(e){this._from=e}},{key:"to",get:function(){return this._to},set:function(e){this._to=e}},{key:"isEmailListValid",get:function(){var e=this.to.split(",");if(e.length>10)return!1;var t=void 0,n=!0,i=!1,r=void 0;try{for(var o,a=s(e);!(n=(o=a.next()).done);n=!0){var c=o.value;c=c.trim();t=this.emailRegex.test(c);if(!t)return!1}}catch(l){i=!0;r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return!0}},{key:"subject",get:function(){return this._subject},set:function(e){this._subject=e}},{key:"body",get:function(){return this._body},set:function(e){this._body=e}}],[{key:"show",value:function(t,n,i,r,s,o){return t.show({controller:e,templateUrl:"app/components/share-order-dialog/share-order-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,locals:{order:n,from:i,to:r,subject:s,body:o}})}},{key:"whoIsAtSchool",value:function(e){var t=e.join(", ")+" and I",n="my colleagues and I";return e.length>0&&t.length<400?t:n}},{key:"formatDefaultMessage",value:function(e,t,n,i,r,s){return"Hi, \n\nI've been using Classkick in my classroom this year and my students love it! \n\nIf our "+n+" upgrades to Classkick Pro then "+i+" can use it to help us improve student learning and engagement at "+t+". \n\nClasskick is offering a special promotion of 60% off. Well only pay $200/mo+ billed annually for unlimited teacher accounts. We can explore more options at https://app.classkick.com/#/order. \n\nCan we take advantage of this promotion which expires on July 31, 2021? \n\nHere's a link to a quote: \n"+u["default"].absRootUrl(s)+"/#/order/"+e+" \n\nThank you!\n"}},{key:"DefaultTitle",get:function(){return"I found a great opportunity to get Classkick!"}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(121)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(624),l=a(c),u=n(625),d=a(u),h=n(286),f=a(h),g=n(214),p=a(g),m=n(291),v=n(205),_=a(v),y=n(185),k=a(y),b=n(153),S=a(b),w=n(274),C=a(w),E=n(407),T=(a(E),n(626)),I=a(T),A=n(627),x=a(A),O=n(628),P=a(O),R=n(359),D=a(R),M=n(629),N=a(M),L=(n(458),n(617)),F=a(L),U=n(357),$=n(630),q=a($),H=function(){function e(){r(this,e)}i(e,null,[{key:"NAME",get:function(){return"name"}},{key:"LAST_MODIFIED",get:function(){return"last_modified"}},{key:"HELPS",get:function(){return"helps"}}]);return e}();t.AssignmentsTableColumns=H;var j=function(){function e(t,n,i,s,o,a,c,l,u,h,g,m,v,y,k,b,S,w,E,T,A,O,P){"ngInject";var R=this;r(this,e);if(m.authData.isTeacher){this.$log=h;this.$scope=t;this.$q=n;this.$document=i;this.$state=s;this.$stateParams=o;this.$mdSidenav=a;this.$mdDialog=c;this.$mdPanel=l;this.$mdToast=u;this.$timeout=g;this._authService=m;this._rosterService=v;this._assignmentService=y;this._helpRequestService=k;this._cacheService=b;this._mixpanelService=S;this._assignmentTrackingService=w;this._breadcrumbService=E;this._staticContentService=T;this._storageService=A;this._ipStackService=O;this._organizationService=P;this._assignmentManager=new q["default"](this.$q,this.$mdDialog,this.$mdToast,this._cacheService,this._assignmentService,this._breadcrumbService,void 0,void 0,this._mixpanelService,void 0);this._loadingDialog=C["default"].show;this._shareDialog=d["default"].show;this._imageImportDialog=_["default"].show;this._helpDialog=D["default"].show;this._folderNameDialog=I["default"].show;this._moveAssignmentDialog=x["default"].show;this._confirmDialog=f["default"].show;this._contextualPaywallDialog=N["default"].show;this._errorDialog=p["default"].show;this._updateUserSchoolDialog=F["default"].show;this._showName=!0;this._showHelps=!0;this._showLastModified=!0;this._orderBy=this._storageService.assignmentsListColumn||H.LAST_MODIFIED;this._isAscending=angular.isDefined(this._storageService.assignmentsListAsc)?this._storageService.assignmentsListAsc:!0;this._query="";this._assignmentListItems=[];this._folders=[];this._loading=!0;t.$on("$destroy",function(){return R._destroy()});var M=this._storageService.copyAssignmentRequest,L=M&&M.isValid;this.init().then(function(){L&&R._checkAssignmentLimit(function(){R.copyPublicAssignment(M.id,M.name)})})}else E.go("root.account.home")}e.$inject=["$scope","$q","$document","$state","$stateParams","$mdSidenav","$mdDialog","$mdPanel","$mdToast","$log","$timeout","AuthService","RosterService","AssignmentService","HelpRequestService","CacheService","MixpanelService","AssignmentTrackingService","BreadcrumbService","StaticContentService","StorageService","IPStackService","OrganizationService"];
i(e,[{key:"init",value:function(){var e=this;return this.$q.all({assignmentsMap:this._cacheService.getAssignmentsForUser(),proInfo:this._cacheService.getProInfo(),user:this._cacheService.getUser()}).then(function(t){var n=t.assignmentsMap,i=t.proInfo,r=t.user;e._assignmentsMap=n;e._pro=i;e._user=r;var s=o(n,function(e){return e[1]});e._assignmentListItems=s.filter(function(e){return!e.isFolder}).map(function(e){return new l["default"](e,!1)});e._folders=s.filter(function(e){return e.isFolder}).map(function(e){return new P["default"](e,!1)});e._breadcrumbs=e.getBreadcrumbs(e.currentFolderId,e._folders.map(function(e){return e.assignment}),[]);e._loading=!1;return e.$timeout(function(){})}).then(function(){return e._assignmentsMap.size<250?e._initItemHelpRequests():void 0}).then(function(){return e._handleConfirmSchool()})["catch"](function(t){e.$log.error("#init",t);e._error=!0})}},{key:"_initItemHelpRequests",value:function(){var e=this;return this.$q.all(this._assignmentListItems.map(function(t){return e._initAssignmentHelpRequests(t)})).then(function(){return e._folders.map(function(t){return e._initFolderHelpRequests(t)})})}},{key:"_initAssignmentHelpRequests",value:function(e){return this._helpRequestService.getHelpRequestSetForAssignment(e.assignment.ownerId,e.assignment.id).then(function(t){e.helpRequests=t;t.start();return e})}},{key:"_initFolderHelpRequests",value:function(e){var t=this._helpRequestSetsForFolder(e.folder.id);e.helpRequests=this._helpRequestService.combineHelpRequestSets(t);return e}},{key:"_helpRequestSetsForFolder",value:function(e){var t=this,n=this._assignmentsForFolder(e).map(function(e){return e.helpRequests});this._foldersInFolder(e).forEach(function(e){var i=t._helpRequestSetsForFolder(e.assignment.id);n=[].concat(s(n),s(i))});return n}},{key:"_foldersInFolder",value:function(e){return this._folders.filter(function(t){return t.assignment.folder===e})}},{key:"_assignmentsForFolder",value:function(e){return this._assignmentListItems.filter(function(t){return t.assignment.folder&&t.assignment.folder===e})}},{key:"_handleConfirmSchool",value:function(){var e=this;return this._cacheService.getSchools().then(function(t){if(0===t.length){var n=e.$q.resolve();e._user.school&&(n=e._searchForSchool(e._user.school));return n.then(function(t){e._mixpanelService.userOrgConfirmed();return e._updateUserSchoolDialog(e.$mdDialog,"Confirm Organization",'Please start typing the name of your organization. If you see your organization, click it and press "join organization." If you do not see your organization, click "add organization" and enter your organization\'s details.',t,!0).then(function(t){return e._joinSchool(t)})})}})["catch"](function(t){e.$log.error("#_handleConfirmSchool",t)})}},{key:"_joinSchool",value:function(e){var t=this,n=this._organizationService.addSelf(e.id).then(function(e){t._cacheService.reset();return t._authService.processTokenResult(e,t._authService.rememberMe)}).then(function(){t.$state.reload()});this._loadingDialog(this.$mdDialog,n);return n.then(function(){t._toast("You are now a member of "+e.name)})}},{key:"_searchForSchool",value:function(e){var t=this;return this._ipStackService.getLocation().then(function(n){return t._organizationService.search(U.OrganizationTypes.School,n.lat,n.lng,e)}).then(function(e){return e[0]})}},{key:"_destroy",value:function(){this._assignmentListItems.forEach(function(e){e.helpRequests&&e.helpRequests.stop()})}},{key:"_missingFolder",value:function(e){return e&&!this._folders.some(function(t){var n=t.folder;return n.id===e})}},{key:"setOrToggle",value:function(e,t){if(this._orderBy!==e){this._orderBy=e;this._isAscending=t}else this._isAscending=!this._isAscending;this._storageService.assignmentsListColumn=this._orderBy;this._storageService.assignmentsListAsc=this._isAscending}},{key:"setOrToggleName",value:function(){this.setOrToggle(H.NAME,!0)}},{key:"setOrToggleModified",value:function(){this.setOrToggle(H.LAST_MODIFIED,!1)}},{key:"setOrToggleHelps",value:function(){this.setOrToggle(H.HELPS,!1)}},{key:"orderBy",value:function t(){var t=this._orderBy;return function(e){var n=e.folder||e.assignment;return H.NAME===t?n.name:H.LAST_MODIFIED===t?n.lastModified:H.HELPS===t&&e.helpRequests?e.helpRequests.total:void 0}}},{key:"searchFilter",value:function(){var e=this.query;return function(t){if(e.length>0){var n=t.folder||t.assignment;return n.name.toLowerCase().indexOf(e.toLowerCase())>-1}return!0}}},{key:"create",value:function(){var e=this;this._checkAssignmentLimit(function(){var t=e._assignmentManager.create(e.newAssignment).then(function(t){e.$state.go("root.account.assignment",{assignmentId:t.id,isNew:!0})});e._loadingDialog(e.$mdDialog,t)})}},{key:"createFromFile",value:function(){var e=this;this._checkAssignmentLimit(function(){e._imageImportDialog(e.$q,e.$mdDialog,[],!0,!0).then(function(t){return e._handleImageImport(t)})})}},{key:"_handleImageImport",value:function(e){var t=this,n=this._assignmentManager.create(this.newAssignment,0).then(function(n){var i=new S["default"](n.ownerId,y.UserRoles.TEACHER,b.ElementIntents.CONTENT);return t._assignmentTrackingService.importImages(e,n,i)}).then(function(e){t.$state.go("root.account.assignment",{assignmentId:e.id,isNew:!0})});this._loadingDialog(this.$mdDialog,n);return n}},{key:"share",value:function(e){this._shareDialog(this.$mdDialog,e,m.Locations.ASSIGNMENT_LIST)}},{key:"duplicate",value:function(e,t){var n=this;this._checkAssignmentLimit(function(){n._assignmentManager.duplicate(e,t,!1)})}},{key:"copyPublicAssignment",value:function(e,t){var n=this,i=this._assignmentService.duplicate(e,t).then(function(e){n._storageService.copyAssignmentRequest=null;return n._cacheService.addAssignmentForUser(e)}).then(function(e){var t=new l["default"](e,!0);return n._initAssignmentHelpRequests(t)}).then(function(e){n._assignmentListItems.push(e)});this._loadingDialog(this.$mdDialog,i);i["catch"](function(){n._storageService.copyAssignmentRequest=null;n._errorDialog(n.$mdDialog,"Oops! Something went wrong copying "+t+" to your account. Please try again and if you continue to have problems please reach out to support@classkick.com")})}},{key:"delete",value:function(e){var t=this;this._assignmentManager["delete"](e).then(function(){t._assignmentListItems=t._assignmentListItems.filter(function(t){return t.assignment.id!==e.id})})}},{key:"deleteFolder",value:function(e){var t=this;if(!angular.isUndefined(e)){var n="Deleting this folder will delete all assignments contained in this folder.\n                         Are you sure youd like to continue?";this._confirmDialog(this.$mdDialog,n).then(function(){var n=t._cacheService.deleteFolder(e);t._loadingDialog(t.$mdDialog,n);return n}).then(function(){t._folders=t._folders.filter(function(t){return t.folder.id!==e});t._toast("Folder deleted")})}}},{key:"watchAssignment",value:function(e){this.$state.go("root.account.session.work",{assignmentId:e});this._mixpanelService.tappedViewStudentWork(e,m.Locations.ASSIGNMENT_LIST)}},{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"showFirstSuccessHelp",value:function(){this._helpDialog(this.$mdDialog,R.ViewHelps.FirstSuccess)}},{key:"showHelp",value:function(){this._helpDialog(this.$mdDialog,R.ViewHelps.AssignmentsList)}},{key:"goToPremade",value:function(){this._breadcrumbService.go("root.public-assignments-library",{})}},{key:"createFolder",value:function(){var e=this;this.hasFoldersFeature?this._folderNameDialog(this.$mdDialog).then(function(t){var n={name:t};e.currentFolderId&&(n.tags=[{name:E.AssignmentTags.FOLDER,data:{parent:e.currentFolderId}}]);return e._assignmentService.createFolder(n)}).then(function(t){return e._cacheService.addAssignmentForUser(t)}).then(function(t){var n=new P["default"](t,!0);e._initFolderHelpRequests(n);e._folders=[].concat(s(e._folders),[n]);e._toast("New folder created")}):this._contextualPaywallDialog(this.$mdDialog,M.ContextualPaywalls.Folders,m.PaywallSources.NEW_FOLDER)}},{key:"renameFolder",value:function(e){var t=this;this._folderNameDialog(this.$mdDialog,e.name,"Rename Folder").then(function(n){e.name=n;return t._cacheService.updateAssignmentForUser(e)}).then(function(){t._toast("Folder name updated")})}},{key:"moveAssignmentToFolder",value:function(e){var t=this,n=this._folders.map(function(e){return e.folder});this._moveAssignmentDialog(this.$mdDialog,n,e).then(function(n){return t._moveAssignmentToFolder(e,n)})}},{key:"_moveAssignmentToFolder",value:function(e,t){var n=this;e.folder=x["default"].RootDirectory===t.id?void 0:t.id;return this._cacheService.updateAssignmentForUser(e).then(function(){n._toast(e.name+" has been moved to "+t.name)})}},{key:"goToFolder",value:function(e){this.$state.go("root.account.nav.folder",{folderId:e.id})}},{key:"getBreadcrumbs",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];if(!e)return n;var i=t.find(function(t){return t.id===e});return i?this.getBreadcrumbs(i.folder,t,[i].concat(s(n))):this.getBreadcrumbs(void 0,t,n)}},{key:"_toast",value:function(e){var t=this.$mdToast.simple().textContent(e).position("bottom right");this.$mdToast.show(t)}},{key:"_isOverLimit",value:function(e){return this.assignmentsUsedCount/this.assignmentsLimit>=e}},{key:"_isAtLimit",value:function(e){return this.assignmentsUsedCount/this.assignmentsLimit===e}},{key:"_willBeOverLimit",value:function(e){return(this.assignmentsUsedCount+1)/this.assignmentsLimit>=e}},{key:"_willBeAtLimit",value:function(e){return(this.assignmentsUsedCount+1)/this.assignmentsLimit===e}},{key:"openAssignmentLimitPaywall",value:function(e,t){return this._assignmentManager.openAssignmentLimitPaywall(e,t)}},{key:"_checkAssignmentLimit",value:function(e){this.pro.hasUnlimitedAssignments||!this._willBeAtLimit(.5)&&!this._willBeAtLimit(1)?!this.pro.hasUnlimitedAssignments&&this.willBeOverAssignmentLimit?this.openAssignmentLimitPaywall(this.assignmentsUsedCount,this.assignmentsLimit):e():this.openAssignmentLimitPaywall(this.assignmentsUsedCount+1,this.assignmentsLimit)["finally"](function(){e()})}},{key:"goToAssignment",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];t?this._breadcrumbService.go("root.account.assignment-rosters",{assignmentId:e}):this._breadcrumbService.go("root.account.assignment",{assignmentId:e})}},{key:"onDragStart",value:function(e,t){var n=angular.element("#"+t);n.addClass("dragging");var i=angular.element("#"+t+" .md-list-item-inner");e.dataTransfer.setDragImage(i[0],25,25);e.dataTransfer.setData("classkick/assignmentId",t)}},{key:"onDragEnd",value:function(e,t){var n=angular.element("#"+t);n.removeClass("dragging");this._currentFolderId=""}},{key:"onDragOver",value:function(e){e.preventDefault();var t=e.target.parentElement.parentElement;if(this._currentFolderId!==t.id){this._currentFolderId=t.id;angular.element(t).addClass("drag-over")}}},{key:"onDragLeave",value:function(e){var t=e.target.parentElement.parentElement;angular.element(t).removeClass("drag-over");this._currentFolderId=""}},{key:"onDrop",value:function(e){var t=this,n=e.dataTransfer.getData("classkick/assignmentId"),i=this._assignmentListItems.map(function(e){return e.assignment}).find(function(e){return e.id===n}),r=this._folders.map(function(e){return e.folder}).filter(function(e){return e.id!==t.currentFolderId}),s=r.find(function(t){return t.id===e.target.parentElement.parentElement.id});this._moveAssignmentToFolder(i,s);angular.element("#"+s.id).removeClass("drag-over")}},{key:"onDropMyAssignments",value:function(e){var t=e.dataTransfer.getData("classkick/assignmentId"),n=this._assignmentListItems.find(function(e){return e.assignment.id===t}),i=n&&n.assignment;this._moveAssignmentToFolder(i,x["default"].rootDirectoryObject)}},{key:"pro",get:function(){return this._pro}},{key:"showName",get:function(){return this._showName}},{key:"showHelps",get:function(){return this._showHelps&&this.hasRequests}},{key:"showLastModified",get:function(){return this._showLastModified}},{key:"query",get:function(){return this._query},set:function(e){this._query=e}},{key:"assignmentListItems",get:function(){var e=this;return this.query||!this.hasFoldersFeature?this._assignmentListItems:this.currentFolderId?this._assignmentsForFolder(this.currentFolderId):this._assignmentListItems.filter(function(t){var n=!t.assignment.folder,i=!1;n||(i=e._missingFolder(t.assignment.folder));return n||i})}},{key:"loading",get:function(){return this._loading&&!this._error}},{key:"error",get:function(){return this._error}},{key:"hasRequests",get:function(){return this.totalRequests>0}},{key:"totalRequests",get:function(){return[].concat(s(this.folders),s(this.assignmentListItems)).reduce(function(e,t){return e+(t.helpRequests?t.helpRequests.total:0)},0)}},{key:"isAscending",get:function(){return this._isAscending}},{key:"showNameCarrot",get:function(){return this._orderBy===H.NAME}},{key:"showModifiedCarrot",get:function(){return this._orderBy===H.LAST_MODIFIED}},{key:"showHelpsCarrot",get:function(){return this._orderBy===H.HELPS}},{key:"newAssignment",get:function(){var e={name:"New Assignment"};this.currentFolderId&&(e.tags=[{name:E.AssignmentTags.FOLDER,data:{parent:this.currentFolderId}}]);return e}},{key:"ASSIGNMENTS_HELPER_LIMIT",get:function(){return 5}},{key:"showHelperMessage",get:function(){if(!this._showHelperMessage&&this._assignmentsMap&&this._user){var e=this._assignmentsMap&&this._assignmentsMap.size<=this.ASSIGNMENTS_HELPER_LIMIT,t=this._user&&this._user.isNewUser;this._showHelperMessage=e||t}return this._showHelperMessage}},{key:"currentFolderId",get:function(){return this.$stateParams.folderId}},{key:"showBreadcrumbs",get:function(){return this.currentFolderId&&!this.query}},{key:"currentFolder",get:function(){var e=this;return this._folders.map(function(e){return e.folder}).find(function(t){return t.id===e.currentFolderId})}},{key:"hasFoldersFeature",get:function(){return this.pro&&this.pro.hasFoldersFeature}},{key:"folders",get:function(){var e=this;return this._folders.filter(function(t){var n=t.folder.folder===e.currentFolderId,i=!1;n||e.currentFolderId||(i=e._missingFolder(t.folder.folder));return n||i})}},{key:"breadcrumbs",get:function(){return this._breadcrumbs}},{key:"assignmentsListTitle",get:function(){return!this.loading&&this.currentFolderId?this.currentFolder.name:"Assignments"}},{key:"showAssignmentLimit",get:function(){return this._isOverLimit(.5)&&!this.pro.hasUnlimitedAssignments}},{key:"assignmentLimitCopy",get:function(){return this.loading?"":this.assignmentsUsedCount+" of "+this.assignmentsLimit+" assignments used"}},{key:"assignmentsUsedCount",get:function(){return this._assignmentsMap&&this._folders&&this._assignmentsMap.size-this._folders.length}},{key:"assignmentsLimit",get:function(){return this._user&&this._user.assignmentsLimit||k["default"].DefaultAssignmentsLimit}},{key:"willBeOverAssignmentLimit",get:function(){return this._willBeOverLimit(1)}}]);return e}();t["default"]=j},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n){r(this,e);this._assignment=t;this._newlyCopied=n;this._helpRequestView=void 0}i(e,[{key:"assignment",get:function(){return this._assignment}},{key:"newlyCopied",get:function(){return this._newlyCopied}},{key:"helpRequests",get:function(){return this._helpRequestView},set:function(e){this._helpRequestView=e}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(425)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(214),c=o(a),l=n(291),u=n(390),d=o(u),h=n(407),f=function(){function e(){r(this,e)}i(e,null,[{key:"TEACHER_OR_STUDENT",get:function(){return"teacher-or-student"}},{key:"TEACHER",get:function(){return"teacher"}},{key:"EMAIL_SUCCESS",get:function(){return"email-success"}},{key:"LOADING",get:function(){return"loading"}}]);return e}();t.ShareDialogStates=f;var g=function(){function e(t,n,i,s,o,a,u,h,g,p,m,v,_){"ngInject";r(this,e);this.$mdDialog=t;this.$mdToast=n;this.$location=i;this.$window=s;this._clipboard=o;this._assignmentService=a;this._authService=u;this._mixpanelService=m;this._breadcrumbService=v;this._cacheService=_;this._errorDialog=c["default"].show;this.$state=h;this.clipboardIsSupported=o.supported;this.assignment=g;this.shareWithTeacher=!0;this._location=p;this.emailRegex=d["default"].EmailRegex;this.emails="";this.error=!1;this.state=this._authService.isLoggedIn?f.TEACHER_OR_STUDENT:f.TEACHER;var y=i.host(),k="";80!==i.port()&&443!==i.port()&&(k=":"+i.port());var b="/#/assignments/"+this.assignment.id;this._link=""+y+k+b;this._mixpanelService.shareAssignmentWorkflow(this.assignment.id,this._location,l.ShareWorkflowSteps.STARTED)}e.$inject=["$mdDialog","$mdToast","$location","$window","clipboard","AssignmentService","AuthService","$state","assignment","location","MixpanelService","BreadcrumbService","CacheService"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"chooseTeacher",value:function(){var e=this;"public"!==this.assignment.access?this.setAssignmentToPublic().then(function(){e.state=f.TEACHER})["catch"](function(){e.cancel();e._errorDialog(e.$mdDialog,"Uh oh! Something went wrong setting your assignment to public","Check your connection and try again")}):this.state=f.TEACHER;this._mixpanelService.shareAssignmentWorkflow(this.assignment.id,this._location,l.ShareWorkflowSteps.WITH_COLLEAGUES)}},{key:"setAssignmentToPublic",value:function(){this.assignment.access=h.AssignmentAccess.PUBLIC;return this._assignmentService.update(this.assignment)}},{key:"chooseStudent",value:function(){this.cancel();this._breadcrumbService.go("root.account.assignment-rosters",{assignmentId:this.assignment.id},!0);this._mixpanelService.shareAssignmentWorkflow(this.assignment.id,this._location,l.ShareWorkflowSteps.WITH_STUDENTS)}},{key:"preview",value:function(){this.$window.open("http://"+this.link,"_blank")}},{key:"sendEmails",value:function(){var e=this;if(this.isEmailListValid){this.state=f.LOADING;this._mixpanelService.shareAssignmentWorkflow(this.assignment.id,this._location,l.ShareWorkflowSteps.VIA_EMAIL);var t=this.emails.split(",");this._assignmentService.shareAssignment(this.assignment.id,t).then(function(){e.state=f.EMAIL_SUCCESS})["catch"](function(){e._errorDialog(e.$mdDialog,"Whoops! There was an error sharing this assignment.","Please try again and if you continue to have issues send us an email at support@classkick.com.")})}}},{key:"setEmailValidity",value:function(e){e.emailShareForm.emails.$setValidity("pattern",this.isEmailListValid)}},{key:"select",value:function(){angular.element("#link-input").select()}},{key:"copy",value:function(){if(this.clipboardIsSupported){this._clipboard.copyText(this.link);this.$mdToast.show(this.$mdToast.simple().textContent("Link copied to clipboard").position("bottom right"))}this.select();this._mixpanelService.shareAssignmentWorkflow(this.assignment.id,this._location,l.ShareWorkflowSteps.VIA_LINK)}},{key:"addSocialMediaButtons",value:function(){angular.element(".share-dialog .social-media").jsSocials({url:this.fullLinkUrl,showLabel:!1,showCount:!1,shares:["facebook","twitter","pinterest"],text:this.socialMediaTextPreview,on:{click:this._handleSocialClick.bind(this)}})}},{key:"_handleSocialClick",value:function(e){var t=e.target,n=t.className,i=n.match(/(google|pinterest|facebook|twitter)/),r=i&&i[0],s=void 0;"google"===r?s=l.ShareWorkflowSteps.VIA_GOOGLE_PLUS:"pinterest"===r?s=l.ShareWorkflowSteps.VIA_PINTEREST:"facebook"===r?s=l.ShareWorkflowSteps.VIA_FACEBOOK:"twitter"===r&&(s=l.ShareWorkflowSteps.VIA_TWITTER);s&&this._mixpanelService.shareAssignmentWorkflow(this.assignment.id,this._location,s)}},{key:"addToSharedAssignmentsPage",value:function(){var e=this;this.setAssignmentToPublic().then(function(){e._mixpanelService.shareAssignmentWorkflow(e.assignment.id,e._location,l.ShareWorkflowSteps.PUBLIC_PAGE);return e._cacheService.getUser()}).then(function(t){e.cancel();e._breadcrumbService.go("root.public-assignments-list",{userId:t.email||t.username})})}},{key:"currentUserIsAssignmentOwner",get:function(){return this._authService.currentUserId===this.assignment.ownerId}},{key:"isEmailListValid",get:function(){var e=this.emails.split(",");if(e.length>10)return!1;var t=void 0,n=!0,i=!1,r=void 0;try{for(var o,a=s(e);!(n=(o=a.next()).done);n=!0){var c=o.value;c=c.trim();t=this.emailRegex.test(c);if(!t)return!1}}catch(l){i=!0;r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return!0}},{key:"isTeacherOrStudent",get:function(){return this.state===f.TEACHER_OR_STUDENT}},{key:"isTeacher",get:function(){return this.state===f.TEACHER}},{key:"isEmailSuccess",get:function(){return this.state===f.EMAIL_SUCCESS}},{key:"isLoading",get:function(){return this.state===f.LOADING}},{key:"link",get:function(){return this._link}},{key:"fullLinkUrl",get:function(){return"https://"+this.link}},{key:"socialMediaTextPreview",get:function(){return'I created an assignment called "'+this.assignment.name+'" with Classkick! Check it out here:'}}],[{key:"show",value:function(t,n,i){var r={controller:e,templateUrl:"app/components/share-dialog/share-dialog.html",controllerAs:"ctrl",autoWrap:!1,clickOutsideToClose:!0,focusOnOpen:!1,locals:{assignment:n,location:i}};return t.show(r)}}]);return e}();t["default"]=g},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){r(this,e);this.$mdDialog=t;this._name=n;this._title=i}e.$inject=["$mdDialog","name","title"];i(e,[{key:"submitName",value:function(){this.$mdDialog.hide(this.name)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"title",get:function(){return this._title}}],[{key:"show",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1],i=arguments.length<=2||void 0===arguments[2]?"Create New Folder":arguments[2];return t.show({controller:e,templateUrl:"app/components/folder-name-dialog/folder-name-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{name:n,title:i}})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s){r(this,e);this.$mdDialog=t;this._folders=n;this._assignmentToMove=i;this._currentFolder=s}e.$inject=["$mdDialog","folders","assignment","currentFolder"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"_missingFolder",value:function(e){return e&&!this._folders.some(function(t){return t.id===e})}},{key:"prev",value:function(){this.selectFolder(this.folderForFolderId(this._currentFolder.folder))}},{key:"selectFolder",value:function(e){this._currentFolder=e}},{key:"submit",value:function(){this.$mdDialog.hide(this._currentFolder?this._currentFolder:e.rootDirectoryObject)}},{key:"folderForFolderId",value:function(e){return this._folders.find(function(t){return t.id===e})}},{key:"folders",get:function(){var e=this;return this._folders.filter(function(t){var n=t.folder===e.currentFolderId,i=!1;n||e.currentFolderId||(i=e._missingFolder(t.folder));var r=t.id===e._assignmentToMove.id;return(n||i)&&!r})}},{key:"hasFolders",get:function(){return this._folders&&this._folders.length>0}},{key:"inFolder",get:function(){return angular.isDefined(this._currentFolder)}},{key:"allowMoveHere",get:function(){return this.currentFolderId!==this._assignmentToMove.folder}},{key:"assignmentToMoveName",get:function(){return this._assignmentToMove.name}},{key:"currentFolderName",get:function(){return this._currentFolder?this._currentFolder.name:"Assignments Dashboard"}},{key:"currentFolderId",get:function(){return this._currentFolder?this._currentFolder.id:void 0}}],[{key:"show",value:function(t,n,i){var r=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3];return t.show({controller:e,templateUrl:"app/components/move-assignment-dialog/move-assignment-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{folders:n,assignment:i,currentFolder:r}})}},{key:"RootDirectory",get:function(){return"root_directory"}},{key:"rootDirectoryObject",get:function(){return{id:e.RootDirectory,name:"My Assignments (remove from folder)"}}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(48)["default"],r=n(68)["default"],s=n(19)["default"],o=n(39)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(624),l=a(c),u=function(e){function t(e,n){o(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}r(t,e);s(t,[{key:"folder",get:function(){return this.assignment}}]);return t}(l["default"]);t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(291),o=function(){function e(){r(this,e)}i(e,null,[{key:"Folders",get:function(){return"folders"}},{key:"StudentWorkExport",get:function(){return"student_work_export"}},{key:"GradeExport",get:function(){return"grade_export"}},{key:"AnswerExport",get:function(){return"answer_export"}},{key:"SQVStickers",get:function(){return"sqv_stickers"}},{key:"StudentAccounts",get:function(){return"student_accounts"}}]);return e}();t.ContextualPaywalls=o;var a=function(){function e(t,n,i,s,o,a){r(this,e);this.$mdDialog=t;this._mixpanelService=n;this._staticContentService=i;this._logRocketService=s;this._paywalls=[];this._currentPaywallId=o;this._currentIndex=0;this._source=a;this._loading=!0;this._init()}e.$inject=["$mdDialog","MixpanelService","StaticContentService","LogRocketService","paywallId","source"];i(e,[{key:"_init",value:function(){var e=this;this._mixpanelService.subscriptionFunnel(s.SubscriptionFunnel.PAYWALL,void 0,void 0,this._source);this._staticContentService.getContextualPaywalls().then(function(t){e._paywalls=t;e._currentIndex=e.indexForId(e._currentPaywallId);e._loading=!1})}},{key:"indexForId",value:function(e){var t=0;this._paywalls.forEach(function(n,i){n.id===e&&(t=i)});return t}},{key:"prev",value:function(){var e=this._currentIndex-1;this._currentIndex=0>e?this._paywalls.length-1:e;var t=this._paywalls[this._currentIndex];this._currentPaywallId=t.id}},{key:"next",value:function(){var e=this._currentIndex+1;this._currentIndex=this._paywalls.length>e?e:0;var t=this._paywalls[this._currentIndex];this._currentPaywallId=t.id}},{key:"goTo",value:function(e){this._currentPaywallId=e.id;this._currentIndex=this.indexForId(this._currentPaywallId)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"goToOrderPage",value:function(){this._mixpanelService.subscriptionFunnel(s.SubscriptionFunnel.LEARN_MORE,void 0,void 0,this._source);this.$mdDialog.hide();this._staticContentService.goToOrdersPage(this._logRocketService.initialized)}},{key:"loading",get:function(){return this._loading}},{key:"currentTitle",get:function(){var e=this.paywalls[this.currentIndex];return e&&e.text}},{key:"currentIndex",get:function(){return this._currentIndex}},{key:"paywalls",get:function(){return this._paywalls}},{key:"ImageHeight",get:function(){return 304}},{key:"imagesStyle",get:function(){return{transform:"translateY("+this.ImageHeight*this._currentIndex*-1+"px)"}}},{key:"onFirst",get:function(){return 0===this._currentIndex}},{key:"onLast",get:function(){return this._paywalls&&this._currentIndex===this._paywalls.length-1}}],[{key:"show",value:function(t,n,i){return t.show({clickOutsideToClose:!0,escapeToClose:!0,templateUrl:"app/components/contextual-paywall-dialog/contextual-paywall-dialog.html",controller:e,controllerAs:"ctrl",locals:{paywallId:n,source:i}})}}]);return e}();t["default"]=a},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(121)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(627),c=o(a),l=n(625),u=o(l),d=n(291),h=n(478),f=o(h),g=n(498),p=o(g),m=n(407),v=o(m),_=n(274),y=o(_),k=n(286),b=o(k),S=n(629),w=o(S),C=n(631),E=o(C),T=n(214),I=o(T),A=n(618),x=o(A),O=n(185),P=o(O),R=n(153),D=function(){function e(t,n,i,s,o,a,l,d,h,f){r(this,e);this.$q=t;this.$mdDialog=n;this.$mdToast=i;this._cacheService=s;this._assignmentService=o;this._breadcrumbService=a;this._gradeExportService=l;this._answerExportService=d;this._mixpanelService=h;this._exportService=f;this._shareDialog=u["default"].show;this._showExportAssignmentDialog=p["default"].show;this._moveAssignmentDialog=c["default"].show;this._loadingDialog=y["default"].show;this._confirmDialog=b["default"].show;this._contextualPaywallDialog=w["default"].show;this._showRosterSelectionDialog=E["default"].show;this._errorDialog=I["default"].show;this._assignmentsLimitPaywallDialog=x["default"].show}i(e,[{key:"create",value:function(e,t){var n=this;return this._assignmentService.create(e,t).then(function(e){return n._cacheService.addAssignmentForUser(e)})}},{key:"share",value:function(e){return this._shareDialog(this.$mdDialog,e,d.Locations.ASSIGNMENT_EDIT)}},{key:"exportContentToPDF",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=new f["default"](e);n.showMetadata=t;this._showExportAssignmentDialog(this.$mdDialog,[n],R.ElementIntents.CONTENT,O.UserRoles.TEACHER)}},{key:"exportWorkToPDF",value:function(e,t,n,i,r){if(r.hasExportStudentWork){var s=this._exportService.createAssignmentExports(e,t,n,i);this._showExportAssignmentDialog(this.$mdDialog,s,R.ElementIntents.FEEDBACK,O.UserRoles.TEACHER)}else this._contextualPaywallDialog(this.$mdDialog,S.ContextualPaywalls.StudentWorkExport,d.PaywallSources.STUDENT_EXPORT)}},{key:"moveAssignmentToFolder",value:function(e){var t=this;this._cacheService.getAssignmentsForUser().then(function(n){var i=s(n.values()).filter(function(t){return t.isFolder&&(e.folder?e.folder!==t.id:!0)});t._moveAssignmentDialog(t.$mdDialog,i,e).then(function(n){return t._moveAssignmentToFolder(e,n)})})}},{key:"_moveAssignmentToFolder",value:function(e,t){var n=this;e.folder=c["default"].RootDirectory===t.id?void 0:t.id;return this._cacheService.updateAssignmentForUser(e).then(function(){n._toast(e.name+" has been moved to "+t.name)})}},{key:"duplicate",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],r=t+" copy";r.length>v["default"].ASSIGNMENT_TITLE_MAX_LENGTH&&(r=t);var s=this._assignmentService.duplicate(e,r);this._loadingDialog(this.$mdDialog,s);s.then(function(e){return n._cacheService.addAssignmentForUser(e)}).then(function(e){n._breadcrumbService.go("root.account.assignment",{assignmentId:e.id},i)})}},{key:"delete",value:function(e){var t=this,n="Are you sure you want to delete "+e.name+"?",i="Once you delete this assignment, you will not have a way to view the work your students have completed.";return this._confirmDialog(this.$mdDialog,n,i).then(function(){var n=t._cacheService.deleteAssignment(e.id);t._loadingDialog(t.$mdDialog,n);return n}).then(function(){t._toast("Deleted "+e.name)})}},{key:"_toast",value:function(e){var t=this.$mdToast.simple().textContent(e).position("bottom right");this.$mdToast.show(t)}},{key:"exportGrades",value:function(e,t,n){var i=this;n.hasGradeExport?this._showRosterSelectionDialog(this.$mdDialog,t).then(function(n){return i._exportGrades(t,n,e)}):this._contextualPaywallDialog(this.$mdDialog,S.ContextualPaywalls.GradeExport,d.PaywallSources.GRADE_EXPORT)}},{key:"_exportGrades",value:function(e,t,n){var i=this,r=this._gradeExportService.byAssignment(e,t,n);this._loadingDialog(this.$mdDialog,r);return r.then(function(){i._mixpanelService.assignmentGradeExported()})["catch"](function(){i._errorDialog(i.$mdDialog,"Whoops! There was an error exporting grades for "+n.name,"Please try again and if the issue persists reach out to support@classkick.com");
})}},{key:"exportAnswers",value:function(e,t,n){var i=this;n.hasGradeExport?this._showRosterSelectionDialog(this.$mdDialog,t,"Select Roster Answers to Export").then(function(n){return i._exportAnswers(t,n,e)}):this._contextualPaywallDialog(this.$mdDialog,S.ContextualPaywalls.AnswerExport,d.PaywallSources.ANSWER_EXPORT)}},{key:"_exportAnswers",value:function(e,t,n){var i=this,r=this._answerExportService.byAssignment(e,t,n);this._loadingDialog(this.$mdDialog,r);return r.then(function(){i._mixpanelService.assignmentAnswerExported()})["catch"](function(){i._errorDialog(i.$mdDialog,"Whoops! There was an error exporting answers for "+n.name,"Please try again and if the issue persists reach out to support@classkick.com")})}},{key:"checkAssignmentLimit",value:function(e,t){var n=this;return this.$q.all({pro:this._cacheService.getProInfo(!1),total:this._getAssignmentsTotal(),user:this._cacheService.getUser()}).then(function(e){var i=e.pro,r=e.total,s=e.user,o=s&&s.assignmentsLimit||P["default"].DefaultAssignmentsLimit,a=(r+1)/o>1;!i.hasUnlimitedAssignments&&a?n.openAssignmentLimitPaywall(r,o):t()})}},{key:"_getAssignmentsTotal",value:function(){return this._cacheService.getAssignmentsForUser(!1).then(function(e){var t=s(e,function(e){return e[1]}).filter(function(e){return!e.isFolder});return t.length})}},{key:"openAssignmentLimitPaywall",value:function(e,t){return this._assignmentsLimitPaywallDialog(this.$mdDialog,e,t)}}]);return e}();t["default"]=D;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(206)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i,o,a,c,l){r(this,e);this.$q=t;this.$mdDialog=n;this.$window=i;this._cacheService=o;this._staticContentService=a;this._rosters=c.sort(this._sortFunc);this._title=l||"Select Roster Grades to Export";this.searchTerm=null;this._filteredRosters=null;this._selectedRosterIds=new s;this._loading=!1}e.$inject=["$q","$mdDialog","$window","CacheService","StaticContentService","rosters","title"];i(e,[{key:"search",value:function(){var e=this;this.searchTerm&&this._rosters?!function(){var t=e.searchTerm.toLowerCase();e._filteredRosters=e._rosters.filter(function(e){return e.name.toLowerCase().includes(t)})}():this._filteredRosters=null}},{key:"toggleRoster",value:function(e){this._selectedRosterIds.has(e.id)?this._selectedRosterIds["delete"](e.id):this._selectedRosterIds.add(e.id)}},{key:"export",value:function(){var e=this,t=this._rosters.filter(function(t){return e._selectedRosterIds.has(t.id)}).sort(this._sortFunc).map(function(e){return e.id});this._cleanRosters();this.$mdDialog.hide(t)}},{key:"_cleanRosters",value:function(){this._rosters.forEach(function(e){delete e.toggled})}},{key:"_sortFunc",value:function(e,t){var n=e.name.toUpperCase(),i=t.name.toUpperCase();return n.localeCompare(i)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"rosters",get:function(){return this._filteredRosters||this._rosters}},{key:"title",get:function(){return this._title}},{key:"loading",get:function(){return this._loading&&!this._rosters}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/components/roster-selection-dialog/roster-selection-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!0,locals:{rosters:n,title:i}})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(633),a=s(o),c=n(286),l=s(c),u=n(291),d=n(162),h=n(359),f=s(h),g=n(634),p=s(g),m=n(635),v=function(){function e(){r(this,e)}i(e,null,[{key:"NAME",get:function(){return"name"}},{key:"HELPS",get:function(){return"helps"}}]);return e}();t.RostersTableColumns=v;var _=function(){function e(t,n,i,s,o,a,c,u,d,h,g,_,y,k){"ngInject";var b=this;r(this,e);if(h.authData.isTeacher){this.$log=t;this.$q=n;this.$scope=i;this.$state=s;this.$mdSidenav=o;this.$mdDialog=a;this.$mdToast=c;this._rosterService=u;this._helpRequestService=d;this._authService=h;this._cacheService=g;this._mixpanelService=_;this._breadcrumbService=y;this._googleClassroomService=k;this._googleClassroom=new m.GoogleClassroom(this.$q,this.$mdDialog,this.$mdToast,this._authService,this._googleClassroomService);this._showName=!0;this._showChecks=!0;this._showHelps=!0;this._helpDialog=f["default"].show;this._confirmDialog=l["default"].show;this._proInfoDialog=p["default"].show;this._orderBy=v.NAME;this._isAscending=!0;this._query="";this._list=[];this._loading=!0;this._error=void 0;i.$on("$destroy",function(){return b._destroy()});this._init()}else s.go("^.student-assignments-list")}e.$inject=["$log","$q","$scope","$state","$mdSidenav","$mdDialog","$mdToast","RosterService","HelpRequestService","AuthService","CacheService","MixpanelService","BreadcrumbService","GoogleClassroomService"];i(e,[{key:"_init",value:function(){var e=this;this._loading=!0;return this.$q.all({rosters:this._cacheService.getRostersForUser(!0),proInfo:this._cacheService.getProInfo()}).then(function(t){var n=t.rosters,i=t.proInfo;e._proInfo=i;var r=[];angular.forEach(n,function(t){r.push(e._helpRequestService.getHelpRequestSetForRoster(e._authService.currentUserId,t.id).then(function(e){var n=new a["default"](t,e);n.helpRequests.start();return n}))});return e.$q.all(r)}).then(function(t){e._list=t;e._loading=!1})["catch"](function(t){e._error=t})}},{key:"_destroy",value:function(){this.list.forEach(function(e){e.helpRequests.stop()})}},{key:"setOrToggle",value:function(e,t){if(this._orderBy!==e){this._orderBy=e;this._isAscending=t}else this._isAscending=!this._isAscending}},{key:"setOrToggleName",value:function(){this.setOrToggle(v.NAME,!0)}},{key:"setOrToggleHelps",value:function(){this.setOrToggle(v.HELPS,!1)}},{key:"orderBy",value:function t(){var t=this._orderBy;return function(e){return v.NAME===t?e.roster.name:v.HELPS===t?e.helpRequests.total:void 0}}},{key:"searchFilter",value:function(){var e=this.query;return function(t){return e.length>0?t.roster.name.toLowerCase().indexOf(e.toLowerCase())>-1:!0}}},{key:"create",value:function(){var e=this;this._rosterService.create({name:"New Roster",color:d.Colors.ROSTER_COLORS[Math.floor(12*Math.random())].hex,allowPeerHelp:!1,allowNewMembers:!0,allowMultiLogin:!0}).then(function(t){e.$state.go("root.account.roster",{rosterId:t.id,isNew:!0})});this._mixpanelService.rosterCreatedFrom(u.Locations.ROSTER_LIST)}},{key:"delete",value:function(e,t){var n=this,i="All work for all of the students in this roster will be deleted. This cannot be undone. <br> Are you sure you want to delete "+t+"?";this._confirmDialog(this.$mdDialog,i,"").then(function(){n._cacheService.deleteRoster(e).then(function(){n._list=n.list.filter(function(t){return t.roster.id!==e})})})}},{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"showHelp",value:function(){this._helpDialog(this.$mdDialog,h.ViewHelps.RostersList)}},{key:"goToRoster",value:function(e){this._breadcrumbService.go("root.account.roster",{rosterId:e.roster.id})}},{key:"importFromGoogleClassroom",value:function(){var e=this;return this.hasStudentAccounts?this._googleClassroom.isGoogleAuthed?this._googleClassroom["import"]().then(function(){return e._init()}):this._googleClassroom.showNoGoogleAuthError():this._proInfoDialog(this.$mdDialog,u.PaywallSources.IMPORT_GOOGLE_ROSTERS)}},{key:"syncGoogleRoster",value:function(e){this.hasStudentAccounts?this._googleClassroom.isGoogleAuthed?this._googleClassroom.sync(e):this._googleClassroom.showNoGoogleAuthError():this._proInfoDialog(this.$mdDialog,u.PaywallSources.IMPORT_GOOGLE_ROSTERS)}},{key:"showName",get:function(){return this._showName}},{key:"showChecks",get:function(){return this._showChecks&&this.hasRequests}},{key:"showHelps",get:function(){return this._showHelps&&this.hasRequests}},{key:"query",get:function(){return this._query},set:function(e){this._query=e}},{key:"list",get:function(){return this._list}},{key:"loading",get:function(){return this._loading}},{key:"error",get:function(){return this._error}},{key:"hasRequests",get:function(){return this.totalRequests>0}},{key:"totalRequests",get:function(){return this._list.reduce(function(e,t){return e+t.helpRequests.total},0)}},{key:"isAscending",get:function(){return this._isAscending}},{key:"showNameCarrot",get:function(){return this._orderBy===v.NAME}},{key:"showHelpsCarrot",get:function(){return this._orderBy===v.HELPS}},{key:"pro",get:function(){return this._proInfo}},{key:"hasStudentAccounts",get:function(){return this.pro&&this.pro.hasStudentAccounts}}]);return e}();t["default"]=_},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n){r(this,e);this._helpRequestView=n;this._roster=t}i(e,[{key:"roster",get:function(){return this._roster}},{key:"helpRequests",get:function(){return this._helpRequestView}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(291),o=function(){function e(t,n,i,o,a){r(this,e);this.$mdDialog=t;this._mixpanelService=n;this._staticContentService=i;this._logRocketService=o;this._loading=!1;this._source=a;this._mixpanelService.subscriptionFunnel(s.SubscriptionFunnel.PAYWALL,void 0,void 0,this._source)}e.$inject=["$mdDialog","MixpanelService","StaticContentService","LogRocketService","source"];i(e,[{key:"goToOrderPage",value:function(){this._mixpanelService.subscriptionFunnel(s.SubscriptionFunnel.LEARN_MORE,void 0,void 0,this._source);this.$mdDialog.hide();this._staticContentService.goToOrdersPage(this._logRocketService.initialized)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"loading",get:function(){return this._loading}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/pro-info-dialog/pro-info-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,locals:{source:n}})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(286),a=s(o),c=n(274),l=s(c),u=n(636),d=s(u),h=n(214),f=s(h),g=n(501),p=s(g),m=function(){function e(t,n,i,s,o){r(this,e);this.$q=t;this.$mdDialog=n;this.$mdToast=i;this._authService=s;this._googleClassroomService=o;this._confirmDialog=a["default"].show;this._loadingDialog=l["default"].show;this._importGoogleRostersDialog=d["default"].show;this._errorDialog=f["default"].show}i(e,[{key:"import",value:function(){var e=this;return this.getCourses().then(function(t){return e.selectCourses(t)}).then(function(t){var n=e.importCourses(t);e._loadingDialog(e.$mdDialog,n);return n}).then(function(){e._showToast("Imported courses from Google Classroom")})["catch"](function(){e._showError("importing your students from Google Classroom")})}},{key:"getCourses",value:function(){var e=this;return this._checkAuth().then(function(){return e._googleClassroomService.getCourses()})}},{key:"selectCourses",value:function(e){return this._importGoogleRostersDialog(this.$mdDialog,e)}},{key:"importCourses",value:function(e){return e?this._googleClassroomService.importGoogleCourses(e):this.$q.resolve()}},{key:"sync",value:function(e){var t=this;return this._checkAuth().then(function(){var n=t._googleClassroomService.syncGoogleRoster(e);t._loadingDialog(t.$mdDialog,n);return n}).then(function(){t._showToast("Synced "+e.name)})["catch"](function(n){n.code===p["default"].ROSTER_LOCKED?t._errorDialog(t.$mdDialog,"Whoops! Your "+e.name+" roster is locked ","Please unlock your roster and try again"):t._showError("syncing your students from Google Classroom")})}},{key:"_checkAuth",value:function(){if(this._googleClassroomService.hasCourseAndStudentPermissions)return this.$q.resolve();var e=this._googleClassroomService.grantCourseAndStudentPermissions();this._loadingDialog(this.$mdDialog,e);return e}},{key:"_showError",value:function(e){this._errorDialog(this.$mdDialog,"Whoops! There was an error "+e,"Please try again and if the issue persists send us a message at support@classkick.com")}},{key:"showNoGoogleAuthError",value:function(){this._confirmDialog(this.$mdDialog,"Uh oh! It doesn't look like you are logged in with a Google Account",'To use this feature, make sure you click the "Log in with Google" button when you log in',!0)}},{key:"_showToast",value:function(e){this.$mdToast.show(this.$mdToast.simple().textContent(e).position("bottom right"))}},{key:"isGoogleAuthed",get:function(){return this._authService.authData.isGoogleAuthed}}]);return e}();t.GoogleClassroom=m},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){"ngInject";r(this,e);this.$mdDialog=t;this._rosterService=n;this.rosters=i}e.$inject=["$mdDialog","RosterService","rosters"];i(e,[{key:"cancel",value:function(){return this.$mdDialog.hide([])}},{key:"importRosters",value:function(e){return this.$mdDialog.hide(e)}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/import-google-rosters-dialog/import-google-rosters-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,locals:{rosters:n}})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(151),c=o(a),l=n(286),u=o(l),d=n(638),h=o(d),f=n(274),g=o(f),p=n(291),m=n(367),v=o(m),_=n(359),y=o(_),k=n(456),b=o(k),S=n(407),w=o(S),C=n(630),E=o(C),T=[{value:void 0,option:"Private - Only your students can access"},{value:"public",option:"Shared - Colleagues can view and make a copy"}],I=function(){function e(t,n,i,o,a,l,d,f,p,m,v,_,k,b,S,w,C){"ngInject";var I=this;r(this,e);this._cacheService=m;this._assignmentService=v;this._breadcrumbService=l;this._mixpanelService=_;this._gradeExportService=k;this._answerExportService=b;this._exportService=S;this._storageService=w;this._platformHeaderService=C;this.$scope=f;this.$stateParams=t;this.$q=n;this.$log=i;this.$mdDialog=d;this.$document=o;this.$mdToast=p;this._confirmDialog=u["default"].show;this._moveQuestionDialog=h["default"].show;this._loadingDialog=g["default"].show;this._helpDialog=y["default"].show;this._assignmentManager=new E["default"](this.$q,this.$mdDialog,this.$mdToast,this._cacheService,this._assignmentService,this._breadcrumbService,this._gradeExportService,this._answerExportService,this._mixpanelService,this._exportService);this._assignmentId=t.assignmentId;this._lastRosterId=t.lastRosterId;this.focusName=!1;this._platformHeaderService.setAssignmentId(this._assignmentId);this._rosters=void 0;this._assignment=void 0;this._changeDebouncer=new c["default"](1e3,5e3,function(){return I._commit()},f,a);this._assignmentSheetConfigMap=new s;this.name="";this.description="";this.access=T[0];this.grades=[];this.subjects=[];this.saveState=null;this.questionScores=[];this.privateAccessConfirmationMessage="Are you sure you want to set this assignment to private? <br> <br> Anyone you shared it with previously will no longer be able to view your copy.";this._moveQuestionManager=new A(this);f.$on("$destroy",function(){return I._destroy()});this._init()}e.$inject=["$stateParams","$q","$log","$document","$window","BreadcrumbService","$mdDialog","$scope","$mdToast","CacheService","AssignmentService","MixpanelService","GradeExportService","AnswerExportService","ExportService","StorageService","PlatformHeaderService"];i(e,[{key:"_init",value:function(){var e=this;this.$q.all({user:this._cacheService.getUser(),assignment:this._cacheService.getAssignmentForUser(this._assignmentId),rosters:this._cacheService.getRostersForUser(),proInfo:this._cacheService.getProInfo()}).then(function(t){e._initData(t.assignment,t.rosters);e.focusName=e.$stateParams.isNew?"select":!1;e._assignmentService.get(e._assignmentId);e._user=t.user;e._proInfo=t.proInfo})["catch"](function(t){e._error=t;e.$log.error("error",t);return e.$q.reject(t)})}},{key:"_initData",value:function(e,t){var n=this;this._assignment=e;this.name=this._assignment.name;this.description=this._assignment.brief;this.access=T.find(function(e){return e.value===n._assignment.access});this.grades=this._assignment.grades.filter(function(e){return w["default"].Grades.some(function(t){return t===e})});this.subjects=this._assignment.subjects.filter(function(e){return w["default"].Subjects.some(function(t){return t===e})});this.questionScores=this._assignment.questions.map(function(e){return e.points});t&&(this._rosters=this._assignment.rosters.map(function(e){return t.get(e)}).filter(function(e){return angular.isDefined(e)}));this._assignmentSheetConfigMap.clear()}},{key:"_destroy",value:function(){this._platformHeaderService.setAssignmentId(void 0)}},{key:"warnPrivateAccess",value:function(e){var t=this;"public"!==this.access.value?this._confirmDialog(this.$mdDialog,this.privateAccessConfirmationMessage).then(function(){t.fieldUpdated(e)})["catch"](function(){t.access=T.find(function(e){return"public"===e.value})}):this.fieldUpdated(e)}},{key:"fieldUpdated",value:function(e){e&&(e.$touched=!0);var t=this.$scope.metadataForm.$valid&&this.$scope.questionScores.$valid;this._changeDebouncer.tick();this._changeDebouncer.valid=t;t?this.saveState=this.UNSAVED:this.saveState=this.SAVE_ERROR}},{key:"navigate",value:function(e,t,n,i){var r=this;if(this.saveState===this.SAVE_ERROR)this._confirmDialog(this.$mdDialog,"<p>Some of your changes have not been saved.</p><div>Are you sure you want to leave?</div>").then(function(){r._go(e,t,n,i)});else{this._changeDebouncer.flush();this._go(e,t,n,i)}}},{key:"_go",value:function(e,t,n,i){n?this._breadcrumbService.goBack(e,t,angular.isUndefined(i)?!0:i):this._breadcrumbService.go(e,t,i)}},{key:"navToEditQuestion",value:function(e){this.navigate("root.account.assignment-question",{assignmentId:this.assignment.id,questionId:e})}},{key:"navToAssignmentRosters",value:function(){this.navigate("root.account.assignment-rosters",{assignmentId:this._assignmentId},void 0,!0)}},{key:"navToSessionWork",value:function(e){e||(e=this._lastRosterId||this.defaultRosterId);this.navigate("root.account.session.work",{assignmentId:this.assignment.id,rosterId:e},void 0,!0);e?this._mixpanelService.tappedViewStudentWork(this._assignmentId,p.Locations.ASSIGNMENT_EDIT_ROSTER):this._mixpanelService.tappedViewStudentWork(this._assignmentId,p.Locations.ASSIGNMENT_EDIT_TOP)}},{key:"_commit",value:function(){var e=this;this._assignment.name=this.name;this._assignment.access=this.access.value;this._assignment.grades=this.grades;this._assignment.subjects=this.subjects;this._assignment.brief=this.description;var t=this._assignment.questions.map(function(t,n,i){if(t.points===e.questionScores[n])return null;e.questionScores[n]=t.points;var r=n<i.length-1?i[n+1].id:null;return e._assignmentService.updateQuestion(e._assignment.id,t,r)});this.$q.all(t.concat([this._cacheService.updateAssignmentForUser(this._assignment)])).then(function(){e.saveState=e.SAVED})["catch"](function(t){e.saveState=e.SAVE_ERROR;throw t})}},{key:"assignmentSheetConfigForIndex",value:function(e){this._assignmentSheetConfigMap.has(e)||this._assignmentSheetConfigMap.set(e,{readonly:!0,thumbnail:!0,index:e,target:this.assignment});return this._assignmentSheetConfigMap.get(e)}},{key:"chooseMoveQuestion",value:function(e){var t=this;this._moveQuestionDialog(this.$mdDialog,this.assignment,e.id).then(function(n){t.moveQuestion(e,n)})}},{key:"chooseCopyQuestion",value:function(e){this._storageService.copyQuestionsRequest={from_assignment_id:this._assignment.id,question_ids:[e.id]};var t=this._assignment.indexForQuestionId(e.id);this.$mdToast.show(this.$mdToast.simple().textContent("Slide "+(t+1)+" copied to the clipboard").position("bottom right"))}},{key:"chooseCopyAllQuestions",value:function(){this._storageService.copyQuestionsRequest={from_assignment_id:this._assignment.id,question_ids:this._assignment.questions.map(function(e){return e.id})};this.$mdToast.show(this.$mdToast.simple().textContent("All slides copied to the clipboard").position("bottom right"))}},{key:"choosePasteAllQuestions",value:function(){var e=this;if(this.hasCopiedQuestions){var t=this._storageService.copyQuestionsRequest,n=t.from_assignment_id,i=t.question_ids,r=i.length>1?"s":"",s=this._modify(function(){return e._assignmentService.duplicateQuestionsAcrossAssigments(n,e.assignment.id,i)}).then(function(){e._cacheService.clearSessionData();e.$mdToast.show(e.$mdToast.simple().textContent(i.length+" slide"+r+" copied to end of "+e.assignment.name).position("bottom right"))})["catch"](function(){e.$mdToast.show(e.$mdToast.simple().textContent("something went wrong").position("bottom right"))});this.loadingDialog(".assignment-edit .questions",s)}}},{key:"share",value:function(){var e=this;this._changeDebouncer.flush();this._assignmentManager.share(this.assignment)["catch"](function(){e.access=T.find(function(t){return t.value===e._assignment.access})})}},{key:"exportContentToPDF",value:function(){this._assignmentManager.exportContentToPDF(this.assignment)}},{key:"moveAssignmentToFolder",value:function(e){this._assignmentManager.moveAssignmentToFolder(this.assignment)}},{key:"duplicate",value:function(){var e=this;this._assignmentManager.checkAssignmentLimit(this.pro,function(){e._assignmentManager.duplicate(e.assignment.id,e.assignment.name)})}},{key:"delete",value:function(){var e=this;this._assignmentManager["delete"](this.assignment).then(function(){e.navigate("root.account.home",{source:""},!1,!0)})}},{key:"loadingDialog",value:function(e,t){this._loadingDialog(this.$mdDialog,t,this.$document,e)}},{key:"_modify",value:function(e){var t=this;this._changeDebouncer.flush();this.saveState=this.UNSAVED;var n=e();n&&angular.isFunction(n.then)||(n=this.$q.resolve());return n.then(function(){return t._cacheService.getAssignmentForUser(t._assignmentId,!0)}).then(function(e){t._initData(e);t.saveState=t.SAVED})["catch"](function(e){t.saveState=t.SAVE_ERROR;throw e})}},{key:"addQuestion",value:function(){var e=this,t=this._modify(function(){return e._assignmentService.addQuestion(e.assignment.id)}).then(function(){e._cacheService.clearSessionData()});this.loadingDialog(".assignment-edit .questions",t)}},{key:"deleteQuestion",value:function(e){var t=this,n=this._assignment.questionNumberForId(e.id),i="All work for all of the students on slide "+n+" will be deleted. This cannot be undone. Are you sure you want to continue?";this._confirmDialog(this.$mdDialog,i).then(function(){var n=t._modify(function(){return t._assignmentService.removeQuestion(t.assignment.id,e.id)}).then(function(){t._cacheService.clearSessionData()});t.loadingDialog(".assignment-edit .questions",n)})}},{key:"duplicateQuestion",value:function(e){var t=this,n=this.assignment.questionAfter(e.id);this.loadingDialog(".assignment-edit .questions",this._modify(function(){return t._assignmentService.duplicateQuestion(t.assignment.id,e.id,n?n.id:null)}))}},{key:"moveQuestion",value:function(e,t){var n=this;this.loadingDialog(".assignment-edit .questions",this._modify(function(){return n._assignmentService.updateQuestion(n.assignment.id,e,t)}))}},{key:"exportGrades",value:function(){this._assignmentManager.exportGrades(this.assignment,this._rosters,this.pro)}},{key:"exportAnswers",value:function(){this._assignmentManager.exportAnswers(this.assignment,this._rosters,this.pro)}},{key:"showHelp",value:function(){this._helpDialog(this.$mdDialog,_.ViewHelps.AssignmentEdit)}},{key:"makeAddSlidePulse",value:function(){b["default"].makeElementPulse(".assignment-edit .questions-container .add-question")}},{key:"makeEditSlidePulse",value:function(){b["default"].makeElementPulse(".assignment-edit .questions-container .question-shell .question")}},{key:"makeAssignRosterPulse",value:function(){b["default"].makeElementPulse(".assignment-edit .nav-toggle .middle")}},{key:"moveQuestionManager",get:function(){return this._moveQuestionManager}},{key:"defaultRosterId",get:function(){return this.rosters&&this.rosters[0]&&this.rosters[0].id}},{key:"assignment",get:function(){return this._assignment}},{key:"rosters",get:function(){return this._rosters}},{key:"error",get:function(){return this._error}},{key:"loading",get:function(){return!this.assignment&&!this.error}},{key:"gradeOptions",get:function(){return w["default"].Grades}},{key:"subjectOptions",get:function(){return w["default"].Subjects}},{key:"accessOptions",get:function(){return T}},{key:"SAVED",get:function(){return v["default"].SAVED}},{key:"UNSAVED",get:function(){return v["default"].UNSAVED}},{key:"SAVE_ERROR",get:function(){return v["default"].SAVE_ERROR}},{key:"pro",get:function(){return this._proInfo}},{key:"hasGradeExport",get:function(){return this.pro&&this.pro.hasGradeExport}},{key:"hasFoldersFeature",get:function(){return this.pro&&this.pro.hasFoldersFeature}},{key:"hasCopiedQuestions",get:function(){return this._storageService.copyQuestionsRequest}},{key:"showHelpMessage",get:function(){!this._showHelpMessage&&this._user&&(this._showHelpMessage=this._user.isNewUser);return this._showHelpMessage}}]);return e}();t["default"]=I;var A=function(){function e(t){r(this,e);this._ctrl=t;this._draggingOverQuestionId=void 0;this._draggingOverQuestionSide=void 0}i(e,[{key:"onDragStart",value:function(e,t){var n=angular.element("#"+t+" .question");e.dataTransfer.setDragImage(n[0],e.offsetX-12,e.offsetY-12);e.dataTransfer.setData("classkick/questionId",t)}},{key:"onDragOver",value:function(e,t){e.preventDefault();var n=this._determineSide(e.originalEvent);if(this._draggingOverQuestionId!==t||this._draggingOverQuestionSide!==n){this._draggingOverQuestionId=t;this._draggingOverQuestionSide=n;this._addBarTo(n,t)}}},{key:"onDragLeave",value:function(e,t){this._draggingOverQuestionId===t&&(this._draggingOverQuestionId=void 0);this._removeBarFrom(t)}},{key:"onDrop",value:function(e,t){var n=e.dataTransfer.getData("classkick/questionId"),i=this._ctrl.assignment.questions.find(function(e){return e.id===n}),r=this._ctrl.assignment.indexForQuestionId(t.id),s=r+1,o=this._ctrl.assignment.questionForIndex(s),a=this._determineSide(e);n!==t.id&&"left"===a?this._ctrl.moveQuestion(i,t.id):o&&n!==o.id&&"right"===a?this._ctrl.moveQuestion(i,o.id):o||"right"!==a||this._ctrl.moveQuestion(i,null);this._removeBarFrom(t.id)}},{key:"_determineSide",value:function(e){return e.offsetX<this.thumbnailMiddleX?"left":"right"}},{key:"_addBarTo",value:function(e,t){var n=angular.element("#"+t+" .move-question-bar");if("right"===e){n.removeClass("left");n.addClass("right")}else{n.removeClass("right");n.addClass("left")}}},{key:"_removeBarFrom",value:function(e){var t=angular.element("#"+e+" .move-question-bar");t.removeClass("left");t.removeClass("right")}},{key:"thumbnailMiddleX",get:function(){if(!this._thumbnailMiddleX){var e=angular.element(".question");this._thumbnailMiddleX=e.outerWidth()/2}return this._thumbnailMiddleX}}]);return e}();e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(121)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i){"ngInject";r(this,e);this.$mdDialog=t;this._assignment=n;var o=s(this._assignment.questions.entries());this.positions=o.map(function(e){return e[0]+1});this.currentPosition=o.find(function(e){return e[1].id===i})[0]+1||1}e.$inject=["$mdDialog","assignment","questionId"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"confirm",value:function(e){var t=null,n=parseInt(e);if(n!==this.currentPosition){if(n!==this._assignment.questions.length){n<this.currentPosition&&(n-=1);t=this._assignment.questions[n].id}this.$mdDialog.hide(t)}else this.cancel()}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/controllers/assignment-edit/move-question-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{assignment:n,questionId:i}})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(625),c=o(a),l=n(640),u=o(l),d=n(47),h=n(291),f=n(185),g=n(153),p=n(302),m=o(p),v=n(449),_=o(v),y=function(){function e(t,n,i,o,a,l,d,h,f,g,p,m,v,_){"ngInject";var y=this;r(this,e);this.$state=t;this.$stateParams=n;this.$q=i;this.$log=o;this.$mdPanel=h;this.$mdDialog=f;this.$window=g;this.$document=p;this._assignmentService=a;this._authService=l;this._cacheService=d;this._mixpanelService=m;this._breadcrumbService=v;this._storageService=_;this._showSignupDialog=u["default"].show;this._shareDialog=c["default"].show;this.showAccountButton=this._authService.isLoggedIn;this.showAccountButton&&this._cacheService.getUser().then(function(e){y.userName=e.name});this._configMap=new s;this.name="";this.description="";this._assignmentId=n.assignmentId;this._init()}e.$inject=["$state","$stateParams","$q","$log","AssignmentService","AuthService","CacheService","$mdPanel","$mdDialog","$window","$document","MixpanelService","BreadcrumbService","StorageService"];i(e,[{key:"_init",value:function(){var e=this;return this._assignmentService.get(this._assignmentId).then(function(t){e.assignment=t;e.name=t.name;e.description=t.brief;e._mixpanelService.publicAssignmentViewed(e._assignmentId)})["catch"](function(t){e.error=t})}},{key:"assignmentSheetConfig",value:function(e){if(angular.isNumber(e)&&this.assignment){var t=this._configMap.get(e);if(t)return t;var n=new d.AssignmentSheetMetadata(this.assignment,this.assignment.questionIdForIndex(e),!0,!0,this.assignment.ownerId,f.UserRoles.TEACHER,g.ElementIntents.CONTENT);this._configMap.set(e,n);return n}return null}},{key:"copyAssignment",value:function(){if(this._authService.isLoggedIn){this._storageService.copyAssignmentRequest=new _["default"](this._assignmentId,this.assignment.name);this._breadcrumbService.go("root.account.nav.assignments",{})}else this.showSignupDialog();this._mixpanelService.publicAssignmentCopyClicked(this._assignmentId)}},{key:"showSignupDialog",value:function(){var e=this;this._showSignupDialog(this.$mdDialog).then(function(t){e._storageService.ckRedirect=new m["default"]("root.public-assignment",{assignmentId:e._assignmentId});e.$state.go(t,{referral:h.Locations.PUBLIC_ASSIGNMENT})})}},{key:"whatIsClasskick",value:function(){this.$window.open("https://www.youtube.com/watch?v=BwnwaLkQgmg","_blank")}},{key:"showShareDialog",value:function(){this._shareDialog(this.$mdDialog,this.assignment,h.Locations.PUBLIC_ASSIGNMENT)}},{key:"navigate",value:function(e,t){this._breadcrumbService.go(e,t)}},{key:"navToQuestion",value:function(e){this._breadcrumbService.go("root.public-assignment-question",{assignmentId:this._assignmentId,questionId:e})}},{key:"navToLogin",value:function(){this._breadcrumbService.go("root.account-login",{})}},{key:"goBack",value:function(){this._breadcrumbService.goBack("root.account.home")}},{key:"loading",get:function(){return!this.assignment&&!this.error}},{key:"canGoBack",get:function(){return this._breadcrumbService.canGoBack}}]);return e}();t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n){"ngInject";r(this,e);this.$mdDialog=t;this.$window=n}e.$inject=["$mdDialog","$window"];i(e,[{key:"whatIsClasskick",value:function(){this.$window.open("https://www.youtube.com/watch?v=BwnwaLkQgmg","_blank")}},{key:"goToSignup",value:function(){this.$mdDialog.hide("root.signup-teacher")}},{key:"goToLogin",value:function(){this.$mdDialog.hide("root.account-login")}},{key:"cancel",value:function(){this.$mdDialog.cancel()}}],[{
key:"show",value:function(t){return t.show({controller:e,templateUrl:"app/components/signup-dialog/signup-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!1})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(640),a=s(o),c=n(291),l=n(364),u=n(302),d=s(u),h=n(449),f=s(h),g=function(){function e(t,n,i,s,o,c,l,u){"ngInject";r(this,e);this.$stateParams=n;this.$window=i;this.$mdDialog=s;this._breadcrumbService=t;this._authService=o;this._cacheService=c;this._mixpanelService=l;this._storageService=u;this._assignmentQuestionConfig=void 0;this._showSignupDialog=a["default"].show;this._init()}e.$inject=["BreadcrumbService","$stateParams","$window","$mdDialog","AuthService","CacheService","MixpanelService","StorageService"];i(e,[{key:"_init",value:function(){var e=this;this._cacheService.getAssignment(this.assignmentId,!1).then(function(t){e.assignmentName=t.name;e._assignmentQuestionConfig=new l.AssignmentQuestionMetadata(t,e.questionId,!0,!1);e._mixpanelService.publicAssignmentQuestionViewed(e.assignmentId,e.questionId)})["catch"](function(t){e.error=t})}},{key:"showSignupDialog",value:function(){var e=this;this._showSignupDialog(this.$mdDialog).then(function(t){e._storageService.ckRedirect=new d["default"]("root.public-assignment",{assignmentId:e.assignmentId});e._breadcrumbService.go(t,{referral:c.Locations.PUBLIC_ASSIGNMENT})})}},{key:"whatIsClasskick",value:function(){this.$window.open("https://www.youtube.com/watch?v=BwnwaLkQgmg","_blank")}},{key:"copyAssignment",value:function(){if(this.isLoggedIn){this._storageService.copyAssignmentRequest=new f["default"](this.assignmentId,this.assignmentName);this._breadcrumbService.go("root.account.nav.assignments",{})}else this.showSignupDialog();this._mixpanelService.publicAssignmentCopyClicked(this.assignmentId)}},{key:"goBack",value:function(){this._breadcrumbService.goBack("root.public-assignment",{assignmentId:this.assignmentId})}},{key:"assignmentQuestionConfig",get:function(){return this._assignmentQuestionConfig}},{key:"isLoggedIn",get:function(){return this._authService.isLoggedIn}},{key:"assignmentId",get:function(){return this.$stateParams.assignmentId}},{key:"questionId",get:function(){return this.$stateParams.questionId}},{key:"userId",get:function(){return this._authService.authData?this._authService.authData.id:""}}]);return e}();t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(364),a=n(496),c=s(a),l=n(185),u=n(153),d=n(156),h=n(367),f=s(h),g=n(285),p=function(){function e(t,n,i,s,o,a,l,u,d,h,f,p){"ngInject";var m=this;r(this,e);this.$stateParams=t;this.$timeout=n;this._cacheService=s;this._authService=o;this._breadcrumbService=a;this._assignmentTrackingService=l;this._mixpanelService=u;this._toolbarService=d;this._assignmentService=h;this._notificationService=f;this._platformHeaderService=p;this._assignmentQuestionConfig=void 0;this.toolbarOptions=new g.AssignmentToolbarConfig;this.toolbarOptions.editPoints=!0;this.toolbarOptions.addMultipleChoice=!0;this.toolbarOptions.addManipulativeImage=!0;this.toolbarOptions.addFillInTheBlank=!0;this.toolbarOptions.editSticker=!0;this.toolbarOptions.editBackground=!0;this._savingIndicator=new c["default"](this.$timeout,this._assignmentTrackingService);i.$on("$destroy",function(){return m._destroy()});this._init()}e.$inject=["$stateParams","$timeout","$scope","CacheService","AuthService","BreadcrumbService","AssignmentTrackingService","MixpanelService","ToolbarService","AssignmentService","NotificationService","PlatformHeaderService"];i(e,[{key:"_init",value:function(){var e=this;this._cacheService.getAssignmentForUser(this.assignmentId).then(function(t){e._assignment=t;e.assignmentName=t.name;e._platformHeaderService.setAssignmentId(e._assignment.id);e._assignmentQuestionConfig=new o.AssignmentQuestionMetadata(t,e.questionId,!1,!1,e.userId,l.UserRoles.TEACHER,u.ElementIntents.CONTENT);e._toolbarService.notification.subscribe(e._handleToolbarNotification,e);e._assignmentNotification=e._notificationService.getAssignmentStatusNotification(e._assignment);e._assignmentNotification.questionUpdated.subscribe(e._onQuestionUpdated,e);e._assignmentNotification.start()})["catch"](function(t){e.error=t})}},{key:"_handleToolbarNotification",value:function(e){var t=this;if(e.type===d.Notifications.UPDATE_POINT_VALUE){this._savingIndicator.saveState=f["default"].UNSAVED;var n=this._assignment.questionForId(this.questionId),i=this._assignment.beforeQuestionId(this.questionId);this._assignmentService.updateQuestion(this._assignment.id,n,i).then(function(){t._savingIndicator.saveState=f["default"].SAVED})["catch"](function(){t._savingIndicator.saveState=f["default"].SAVE_ERROR});this._cacheService.reset()}}},{key:"_onQuestionUpdated",value:function(e){var t=this._assignment.questionForId(e.questionId);t.points=e.points}},{key:"_destroy",value:function(){this._platformHeaderService.setAssignmentId(void 0);this._savingIndicator.destroy();this._toolbarService.notification&&this._toolbarService.notification.unsubscribe(this._handleToolbarNotification,this);if(this._assignmentNotification){this._assignmentNotification.questionUpdated.unsubscribe(this._onQuestionUpdated,this);this._assignmentNotification.stop()}}},{key:"goBack",value:function(){this._breadcrumbService.goBack("root.account.assignment",{assignmentId:this.assignmentId})}},{key:"assignmentQuestionConfig",get:function(){return this._assignmentQuestionConfig}},{key:"assignmentId",get:function(){return this.$stateParams.assignmentId}},{key:"questionId",get:function(){return this.$stateParams.questionId}},{key:"userId",get:function(){return this._authService.authData?this._authService.authData.id:""}},{key:"saveState",get:function(){return this._savingIndicator&&this._savingIndicator.saveState}}]);return e}();t["default"]=p;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(274),c=o(a),l=n(455),u=n(644),d=n(645),h=o(d),f=n(646),g=n(359),p=o(g),m=function(){function e(t,n,i,s,o,a,l,d,g,m,v,_,y){"ngInject";var k=this;r(this,e);this.$q=t;this.$state=i;this.$stateParams=s;this.$document=o;this.$timeout=a;this.$mdDialog=l;this.$mdPanel=d;this._window=angular.element(g);this._cacheService=m;this._breadcrumbService=v;this._platformHeaderService=y;this._assignmentId=s.assignmentId;this._rosterId=s.rosterId;this._platformHeaderService.setAssignmentId(this._assignmentId);this._platformHeaderService.setRosterId(this._rosterId);this._error=null;this._sessionData=null;this._loadingDialog=c["default"].show;this._showPeerHelpInbox=u.PeerHelpInboxController.show;this._scrollSpacerWidth="0px";this._nullMethod=function(){};this._scrollTop=0;this._scrollLeft=0;this._scrollItems=3;this._scrollPeriod=300;this._showStudentInfoMenu=f.StudentInfoMenuController.show;this._showStudentAccountHelpDialog=h["default"].show;this._helpDialog=p["default"].show;this._anonOnResize=function(){return k._debounceApply()};n.$on("$destroy",function(){return k._destroy()});this._initHotkeys(n,_);this._init()}e.$inject=["$q","$scope","$state","$stateParams","$document","$timeout","$mdDialog","$mdPanel","$window","CacheService","BreadcrumbService","hotkeys","PlatformHeaderService"];i(e,[{key:"_initHotkeys",value:function(e,t){var n=this;t.bindTo(e).add({combo:"left",description:"Scroll Left",callback:function(){n.canScrollLeft&&n.scrollLeft()}}).add({combo:"right",description:"Scroll Right",callback:function(){n.canScrollRight&&n.scrollRight()}})}},{key:"_init",value:function(){var e=this;this._cacheService.getSessionData(this._assignmentId,this._rosterId,!1,!0).then(function(t){e._sessionData=t;if(!e.data.isComplete){if(e.data.hasRosters){e.goToNewRoster(e.data.assignmentRosters[0].id);e._sessionData=null;return void 0}e._error=new Error("There are no rosters associated with this assignment.");e._error.noRosters=!0;e._sessionData=null;return void 0}if(e.data.teacher.sessionViewShowWork){e.goToWorkView();e._sessionData=null;return void 0}e._sessionData.updated.subscribe(e._onSessionDataUpdated,e);e.data.configureSortFromStorage();e._fixFFLayout();e._initScrollSync()})["catch"](function(t){e._error=t;throw t})}},{key:"_destroy",value:function(){this._platformHeaderService.setAssignmentId(void 0);this._platformHeaderService.setRosterId(void 0);this._window.off("resize",this._anonOnResize)}},{key:"_initScrollSync",value:function(){var e=this;this._window.on("resize",this._anonOnResize);this._scrollLeftButton=angular.element(".session-watch .body-head .horizontal-scroll-button");this._mainScroller=angular.element(".session-watch .body-head .horizontal-scroll");this._studentScroller=angular.element(".session-watch .body-content .horizontal-scroll");this._verticalScroller=angular.element(".session-watch .body-content");this._anonOnHScroll=this._onHScroll.bind(this);this._anonOnVScroll=this._onVScroll.bind(this);this._mainScroller.on("scroll",this._anonOnHScroll);this._studentScroller.on("scroll",this._anonOnHScroll);this._verticalScroller.on("scroll",this._anonOnVScroll);this.$timeout(function(){},0,!1).then(function(){return e.$timeout(function(){e._scrollSpacerWidth=e._studentScroller.outerWidth()-e._mainScroller.width()-e._scrollLeftButton.width()+"px"})})}},{key:"_fixFFLayout",value:function(){var e=this;this.$timeout(function(){},0,!1).then(function(){return e.$timeout(function(){var t=angular.element(".session-watch .body-content .horizontal-scroll-content"),n=t.outerHeight();e.studentContentHeight=n+"px";var i=e._verticalScroller.outerHeight(),r=angular.element(".session-watch .body-content .class-code-tip"),s=Math.max(i,n+r.height());e.studentInfoHeight=s+"px";e._cellWidth=angular.element(".session-watch .body-head .question-cell-header").outerWidth(!0)})})}},{key:"_debounceApply",value:function(){this._debounceApplyPromise&&this.$timeout.cancel(this._debounceApplyPromise);this._debounceApplyPromise=this.$timeout(this._nullMethod,200)}},{key:"_onVScroll",value:function(e){var t=angular.element(e.target);this._scrollTop=t.scrollTop()}},{key:"_scrollVertical",value:function(e){this._verticalScroller.scrollTop(e)}},{key:"_onHScroll",value:function(e){var t=angular.element(e.target);if(t.scrollLeft()!==this._scrollLeft){this._scrollHorizontal(t.scrollLeft());this._debounceApply()}}},{key:"_scrollHorizontal",value:function(e){var t=this;this._scrollLeft=e;this._mainScroller.scrollLeft(e);this._studentScroller.scrollLeft(e);0===this._studentScroller.scrollLeft()&&this._studentScroller.scrollLeft()!==e&&this.$timeout(function(){return t._scrollHorizontal(e)},10,!1)}},{key:"_animateScrollHorizontal",value:function(e){this._mainScroller.animate({scrollLeft:e},this._scrollPeriod)}},{key:"scrollLeft",value:function(){var e=Math.max(0,this._mainScroller.scrollLeft()-this._scrollItems*this._cellWidth),t=e%this._cellWidth;0!==t&&(e=e-t+this._cellWidth);this._animateScrollHorizontal(e)}},{key:"scrollRight",value:function(){var e=Math.min(this.scrollWidth,this._mainScroller.scrollLeft()+this._scrollItems*this._cellWidth),t=e%this._cellWidth;e!==this.scrollWidth&&0!==t&&(e-=t);this._animateScrollHorizontal(e)}},{key:"_onSessionDataUpdated",value:function(e){var t=e.code,n=e.userIsNowOnline,i=e.userIsLoggingOnForFirstTime;if(t===l.SessionDataCodes.ROSTER_MEMBER){this.data.studentSortDebounce.tick();this._fixFFLayout()}else t===l.SessionDataCodes.STUDENT_HIDE_OFFLINE||t===l.SessionDataCodes.STUDENT_HIDE_UNSTARTED?this._fixFFLayout():t===l.SessionDataCodes.STUDENT_STATUS&&(n||i)&&this.data.studentSortDebounce.tick();this._debounceApply()}},{key:"goToEditQuestion",value:function(e,t){t.stopPropagation();this._breadcrumbService.go("root.account.assignment-question",{assignmentId:this._assignmentId,questionId:e.id})}},{key:"goToWorkView",value:function(){this._breadcrumbService.go("root.account.session.work",s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:this._rosterId}),!0)}},{key:"goToNewRoster",value:function(e){this._breadcrumbService.go(this.$state.current.name,s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:e}),!0)}},{key:"goToRosterEdit",value:function(){this._breadcrumbService.go("root.account.roster",{rosterId:this._rosterId})}},{key:"goToFeedbackQuestion",value:function(e,t,n){var i=this;if(this.data.workForStudent(e))this._navToFeedbackQuestion(e,t);else{var r=this.data.fetchDataForStudent(e);this._loadingDialog(this.$mdDialog,r,this.$document,".session-watch .body-content",n).then(function(){i._navToFeedbackQuestion(e,t)})}}},{key:"_navToFeedbackQuestion",value:function(e,t){this._breadcrumbService.go("root.account.session.watch.feedback",{assignmentId:this._assignmentId,questionId:t,assignmentWorkId:this.data.workForStudent(e).id})}},{key:"openPeerHelpInbox",value:function(e,t){var n=this,i=this.data.studentHelpHistorySortedChronologically(t.id),r=this.data.studentActiveHelpers(t.id);this._showPeerHelpInbox(this.$mdPanel,this.$q,e,t,i,r,this.data.students,this.data.assignment).then(function(e){var t=e.userId,i=e.questionId,r=e.event;n.goToFeedbackQuestion(t,i,r)})}},{key:"showStudentInfoMenu",value:function(e,t){this._showStudentInfoMenu(this.$mdPanel,this.$q,e,t,this.data.studentLastSeen(t.id),this.data.pro)}},{key:"openStudentAccountHelpDialog",value:function(){this._showStudentAccountHelpDialog(this.$mdDialog,this.data.pro)}},{key:"openGivingFeedbackHelp",value:function(){this._helpDialog(this.$mdDialog,g.ViewHelps.GivingFeedback)}},{key:"scrollSpacerWidth",get:function(){return this._scrollSpacerWidth}},{key:"canScrollLeft",get:function(){return this._scrollLeft>0}},{key:"cannotScrollLeft",get:function(){return!this.canScrollLeft}},{key:"canScrollRight",get:function(){return this._scrollLeft<=this.scrollWidth-2}},{key:"cannotScrollRight",get:function(){return!this.canScrollRight}},{key:"scrollWidth",get:function(){return this._mainScroller?this._mainScroller[0].scrollWidth-this._mainScroller.width():0}},{key:"scrollHeight",get:function(){return this._verticalScroller?this._verticalScroller[0].scrollHeight-this._verticalScroller.height():0}},{key:"data",get:function(){return this._sessionData}},{key:"error",get:function(){return this._error}},{key:"loaded",get:function(){return!this.error&&!this.loading}},{key:"loading",get:function(){return!this.data&&!this.error}}]);return e}();t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(293)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n){r(this,e);this._mdPanelRef=t;this._deferred=n}e.$inject=["mdPanelRef","deferred"];i(e,[{key:"peer",value:function(e){return this.peers.get(e)}},{key:"questionNumber",value:function(e){return this.assignment.questionNumberForId(e)}},{key:"formatHelpHistoryItem",value:function(e){var t=this.peers.get(e.helperId),n=this.peers.get(e.helpeeId),i=this.assignment.questionNumberForId(e.questionId);return t.name+" helped "+n.name+" on question #"+i}},{key:"formatTime",value:function(e){return moment().to(e)}},{key:"goToFeedbackQuestion",value:function(e,t,n){this._deferred.resolve({userId:e,questionId:t,event:n});this._mdPanelRef.hide()}},{key:"hasHelpers",get:function(){return s(this.helpers).length}},{key:"hasHelpHistory",get:function(){return this.helpHistory.length>0}}],[{key:"show",value:function(t,n,i,r,s,o,a,c){var l=t.newPanelPosition().relativeTo(i.currentTarget).addPanelPosition(t.xPosition.ALIGN_START,t.yPosition.ALIGN_TOPS),u=n.defer();t.open({position:l,animation:t.newPanelAnimation().openFrom(i.currentTarget).duration(100).withAnimation(t.animation.SCALE),templateUrl:"app/components/peer-help-inbox/peer-help-inbox.html",controller:e,controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,panelClass:"peer-help-inbox",locals:{deferred:u,user:r,helpHistory:s,helpers:o,peers:a,assignment:c},onRemoving:function(){u.reject()}});return u.promise}}]);return e}();t.PeerHelpInboxController=o},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(291),a=n(359),c=s(a),l=n(629),u=s(l),d=function(){function e(t,n,i){r(this,e);this.$q=t;this.$mdDialog=n;this._pro=i;this._helpDialog=c["default"].show;this._contextualPaywallDialog=u["default"].show}e.$inject=["$q","$mdDialog","pro"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"learnMorePortfolio",value:function(){this.pro.hasStudentAccounts&&!this.pro.isTrial?this._helpDialog(this.$mdDialog,a.ViewHelps.StudentAccountPortfolio):this._contextualPaywallDialog(this.$mdDialog,l.ContextualPaywalls.StudentAccounts,o.PaywallSources.STUDENT_ACCOUNTS_HELP_DIALOG)}},{key:"learnMoreBasic",value:function(){this._helpDialog(this.$mdDialog,a.ViewHelps.StudentAccountBasic)}},{key:"pro",get:function(){return this._pro},set:function(e){this._pro=e}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/student-account-help-dialog/student-account-help-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!1,locals:{pro:n}})}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(645),a=s(o),c=function(){function e(t,n,i){r(this,e);this.$mdDialog=t;this._mdPanelRef=n;this._deferred=i;this._showStudentAccountHelpDialog=a["default"].show}e.$inject=["$mdDialog","mdPanelRef","deferred"];i(e,[{key:"showAccountTypeHelp",value:function(){this.cancel();this._showStudentAccountHelpDialog(this.$mdDialog,this.pro)}},{key:"cancel",value:function(){this._deferred.reject();this._mdPanelRef.hide()}},{key:"lastSeenDisplay",get:function(){return this._lastSeenDisplay},set:function(e){this._lastSeenDisplay=e}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"pro",get:function(){return this._pro},set:function(e){this._pro=e}},{key:"isBasic",get:function(){return!!this._user.displayName}}],[{key:"show",value:function(t,n,i,r,s,o){var a=t.newPanelPosition().relativeTo(i.currentTarget).addPanelPosition(t.xPosition.ALIGN_START,t.yPosition.ALIGN_TOPS),c=n.defer();t.open({position:a,animation:t.newPanelAnimation().openFrom(i.currentTarget).duration(100).withAnimation(t.animation.SCALE),templateUrl:"app/components/student-info-menu/student-info-menu.html",controller:e,controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,panelClass:"student-info-menu",locals:{deferred:c,user:r,lastSeenDisplay:s,pro:o},onRemoving:function(){c.reject()}});return c.promise}}]);return e}();t.StudentInfoMenuController=c},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(274),c=o(a),l=n(455),u=n(644),d=n(646),h=n(645),f=o(h),g=n(359),p=o(g),m=function(){function e(t,n,i,s,o,a,l,h,g,m,v,_,y){"ngInject";var k=this;r(this,e);this.$q=t;this.$state=i;this.$stateParams=s;this.$document=o;this.$timeout=a;this.$mdDialog=l;this.$mdPanel=h;this._window=angular.element(g);this._cacheService=m;this._breadcrumbService=v;this._platformHeaderService=y;this._assignmentId=s.assignmentId;this._rosterId=s.rosterId;this._platformHeaderService.setAssignmentId(this._assignmentId);this._platformHeaderService.setRosterId(this._rosterId);this._error=null;this._sessionData=null;this._loadingDialog=c["default"].show;this._showPeerHelpInbox=u.PeerHelpInboxController.show;this._showStudentInfoMenu=d.StudentInfoMenuController.show;this._showStudentAccountHelpDialog=f["default"].show;this._helpDialog=p["default"].show;this._nullMethod=function(){};this._scrollLeft=0;this._cellWidth=0;this._resetScrollElementValues();n.$on("$destroy",function(){return k._destroy()});this._initHotkeys(n,_);this._init()}e.$inject=["$q","$scope","$state","$stateParams","$document","$timeout","$mdDialog","$mdPanel","$window","CacheService","BreadcrumbService","hotkeys","PlatformHeaderService"];i(e,[{key:"_initHotkeys",value:function(e,t){var n=this;t.bindTo(e).add({combo:"left",description:"Scroll Left",callback:function(){n.canScrollLeft&&n.scrollLeft()}}).add({combo:"right",description:"Scroll Right",callback:function(){n.canScrollRight&&n.scrollRight()}})}},{key:"_init",value:function(){var e=this;this._cacheService.getSessionData(this._assignmentId,this._rosterId,!1,!0).then(function(t){e._sessionData=t;if(!e.data.isComplete){if(e.data.hasRosters){e.goToNewRoster(e.data.assignmentRosters[0].id);return void 0}e._error=new Error("There are no rosters associated with this assignment.");e._error.noRosters=!0;return void 0}if(!e.data.teacher.sessionViewShowWork){e.goToWatchView();e._sessionData=null;return void 0}e.data.updated.subscribe(e._onSessionDataUpdated,e);e.data.start();e.data.configureSortFromStorage();e._initScrollSync();var n=angular.element(".session-work .body-content .student-info"),i=angular.element(".session-work .body-content .virtual-container .md-virtual-repeat-scroller");i.prepend(n)})["catch"](function(t){e._error=t;throw t})}},{key:"_destroy",value:function(){this._platformHeaderService.setAssignmentId(void 0);this._platformHeaderService.setRosterId(void 0);this._window.off("resize",this._anonOnResize)}},{key:"_initScrollSync",value:function(){this._anonOnResize=this._onResize.bind(this);this._window.on("resize",this._anonOnResize);this._mainScroller=angular.element(".session-work .body-head .horizontal-scroll");this._studentScroller=angular.element(".session-work .body-content .horizontal-scroll");this._anonOnHScroll=this._onHScroll.bind(this);this._mainScroller.on("scroll",this._anonOnHScroll);this._studentScroller.on("scroll",this._anonOnHScroll)}},{key:"_onResize",value:function(){this._resetScrollElementValues();this._debounceApply()}},{key:"_resetScrollElementValues",value:function(){this._mainScrollerWidth=void 0;this._mainScrollerScrollWidth=void 0}},{key:"_debounceApply",value:function(){this._debounceApplyPromise&&this.$timeout.cancel(this._debounceApplyPromise);this._debounceApplyPromise=this.$timeout(this._nullMethod,200)}},{key:"_onHScroll",value:function(e){var t=angular.element(e.target).scrollLeft();if(t!==this._scrollLeft){this._scrollHorizontal(t);this._debounceApply()}}},{key:"_scrollHorizontal",value:function(e){var t=this;this._scrollLeft=e;this._mainScroller.scrollLeft(e);this._studentScroller.scrollLeft(e);var n=this._studentScroller.scrollLeft();0===n&&n!==e&&this.$timeout(function(){return t._scrollHorizontal(e)},10,!1)}},{key:"_animateScrollHorizontal",value:function(e){this._mainScroller.animate({scrollLeft:e},this.ScrollPeriod);this._studentScroller.animate({scrollLeft:e},this.ScrollPeriod)}},{key:"scrollLeft",value:function(){var e=Math.max(0,this._mainScroller.scrollLeft()-this.ScrollItems*this.cellWidth),t=e%this.cellWidth;0!==t&&(e=e-t+this.cellWidth);this._animateScrollHorizontal(e)}},{key:"scrollRight",value:function(){var e=Math.min(this.remainingHScrollableSpace,this._mainScroller.scrollLeft()+this.ScrollItems*this.cellWidth),t=e%this.cellWidth;e!==this.remainingHScrollableSpace&&0!==t&&(e-=t);this._animateScrollHorizontal(e)}},{key:"_onSessionDataUpdated",value:function(e){var t=e.code,n=e.userIsNowOnline,i=e.userIsLoggingOnForFirstTime;t===l.SessionDataCodes.ROSTER_MEMBER?this.data.studentSortDebounce.tick():t===l.SessionDataCodes.STUDENT_STATUS&&(n||i)&&this.data.studentSortDebounce.tick();this._debounceApply()}},{key:"assignmentThumbnailConfig",value:function(e,t){return this.loaded?this.data.assignmentThumbnailConfig(e,t):null}},{key:"assignmentWorkThumbnailConfig",value:function(e,t){return this.loaded?this.data.assignmentWorkThumbnailConfig(e,t):null}},{key:"goToWatchView",value:function(){this._breadcrumbService.go("root.account.session.watch",s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:this._rosterId}),!0)}},{key:"goToNewRoster",value:function(e){this._breadcrumbService.go(this.$state.current.name,s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:e}),!0)}},{key:"goToRosterEdit",value:function(){this._breadcrumbService.go("root.account.roster",{rosterId:this._rosterId})}},{key:"goToEditQuestion",value:function(e,t){t.stopPropagation();this._breadcrumbService.go("root.account.assignment-question",{assignmentId:this._assignmentId,questionId:e.id})}},{key:"handleThumbnailClicked",value:function(e,t,n){n.stopPropagation();this.data.placingSticker?this.placeSticker(e,t,this.data.placingSticker):this.goToFeedbackQuestion(e,t)}},{key:"goToFeedbackQuestion",value:function(e,t){var n=this;this.getOrCreateWork(e).then(function(e){n._navToFeedbackQuestion(e.id,t)})}},{key:"_navToFeedbackQuestion",value:function(e,t){this._breadcrumbService.go("root.account.session.work.feedback",{assignmentId:this._assignmentId,assignmentWorkId:e,questionId:t},!1,{reload:!1})}},{key:"placeSticker",value:function(e,t,n){var i=this;this.getOrCreateWork(e).then(function(r){i.data.placeSticker(r,e,t,n)})}},{key:"getOrCreateWork",value:function(e){var t=this.data.workForStudent(e);return t?this.$q.resolve(t):this.fetchDataForStudent(e)}},{key:"fetchDataForStudent",value:function(e){var t=this,n=this.data.fetchDataForStudent(e).then(function(){return t.data.workForStudent(e)});this._loadingDialog(this.$mdDialog,n,this.$document,".session-work .body-content");return n}},{key:"openPeerHelpInbox",value:function(e,t){var n=this,i=this.data.studentHelpHistorySortedChronologically(t.id),r=this.data.studentActiveHelpers(t.id);this._showPeerHelpInbox(this.$mdPanel,this.$q,e,t,i,r,this.data.students,this.data.assignment).then(function(e){var t=e.userId,i=e.questionId;n.goToFeedbackQuestion(t,i)})}},{key:"showStudentInfoMenu",value:function(e,t){this._showStudentInfoMenu(this.$mdPanel,this.$q,e,t,this.data.studentLastSeen(t.id),this.data.pro)}},{key:"openStudentAccountHelpDialog",value:function(){this._showStudentAccountHelpDialog(this.$mdDialog,this.data.pro)}},{key:"openGivingFeedbackHelp",value:function(){this._helpDialog(this.$mdDialog,g.ViewHelps.GivingFeedback)}},{key:"ScrollItems",get:function(){return 3}},{key:"ScrollPeriod",get:function(){return 300}},{key:"canScrollLeft",get:function(){return this._scrollLeft>0}},{key:"cannotScrollLeft",get:function(){return!this.canScrollLeft}},{key:"canScrollRight",get:function(){return this._scrollLeft<=this.remainingHScrollableSpace-2}},{key:"cannotScrollRight",get:function(){return!this.canScrollRight}},{key:"cellWidth",get:function(){if(!this._cellWidth){var e=angular.element(".session-work .body-head .question-cell-header");this._cellWidth=e?e.outerWidth(!0):0}return this._cellWidth}},{key:"remainingHScrollableSpace",get:function(){return this._mainScroller?this.mainScrollerScrollWidth-this.mainScrollerWidth:0}},{key:"mainScrollerWidth",get:function(){this._mainScrollerWidth||(this._mainScrollerWidth=this._mainScroller?this._mainScroller.width():0);return this._mainScrollerWidth}},{key:"mainScrollerScrollWidth",get:function(){this._mainScrollerScrollWidth||(this._mainScrollerScrollWidth=this._mainScroller?this._mainScroller[0].scrollWidth:0);return this._mainScrollerScrollWidth}},{key:"data",get:function(){return this._sessionData}},{key:"error",get:function(){return this._error}},{key:"loaded",get:function(){return!this.error&&!this.loading}},{key:"loading",get:function(){return!this.data&&!this.error}}]);return e}();t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(121)["default"],a=n(206)["default"],c=n(293)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(649),d=l(u),h=n(151),f=l(h),g=n(650),p=l(g),m=n(651),v=l(m),_=n(286),y=l(_),k=n(423),b=l(k),S=n(367),w=l(S),C=n(274),E=l(C),T=n(652),I=l(T),A=n(214),x=l(A),O=n(654),P=l(O),R=n(661),D=l(R),M=n(634),N=l(M),L=n(291),F=n(653),U=l(F),$=n(292),q=(l($),n(361)),H=l(q),j=function(){function e(){r(this,e)}i(e,null,[{key:"NAME",get:function(){return"name"}},{key:"ACCOUNT_TYPE",get:function(){return"account_type"}},{key:"EMAIL",get:function(){return"email"}},{key:"STATUS",get:function(){return"status"}},{key:"HELPS",get:function(){return"helps"}}]);return e}();t.RosterEditTableColumns=j;var B=function(){function e(t,n,i,s,o,a,c,l,u,d,h,g,m,v,_,k,S,w,C,T,A,O){"ngInject";var R=this;r(this,e);this.$q=t;this.$timeout=o;this.$state=i;this.$stateParams=a;this.$mdPanel=c;this.$mdDialog=l;this.$document=u;this.$log=d;this._rosterService=h;this._notificationService=g;this._assignmentService=m;this._helpRequestService=v;this._cacheService=_;this._userService=k;this._mixpanelService=S;this._breadcrumbService=w;this._contractService=C;this._csvService=T;this._assignmentWorkService=A;this._authService=O;this._saveMessage="";this._lockRosterExplanation=b["default"].LOCK_ROSTER_EXPLANATION;this._lockDeviceExplanation=b["default"].LOCK_DEVICE_EXPLANATION;this._orderBy=j.NAME;this._isAscending=!0;this._roster=null;this._assignments=null;this._rosterNotification=null;this._helpRequestSet=null;this._list={};this._loading=!0;this._errorMessage=null;this._showLoadingDialog=E["default"].show;this._showAddStudentDialog=I["default"].show;this._showAddProStudentsDialog=P["default"].show;this._showAssignmentSelectionDialog=D["default"].show;this._showErrorDialog=x["default"].show;this._confirmDialog=y["default"].show;this._lockRosterDialog=p["default"].show;this._proInfoDialog=N["default"].show;this._showStudentAccountChoice=U["default"].show;this.focusName=!1;this._saveRoster=new f["default"](1e3,5e3,function(){R._roster.name.length>0?R._rosterService.update(R._roster).then(function(){R._cacheService.updateRosterForUser(R._roster);R._saveMessage=R.SAVED;R.saveMessageTimeout()})["catch"](function(){R._saveMessage=R.SAVE_ERROR}):R._saveMessage=R.SAVE_ERROR},n,s);this._saveName=new f["default"](250,5e3,function(e){e.displayName&&e.displayName.length>0?R._userService.updateAnonStudent(R._roster.id,e.id,e.displayName).then(function(){R._cacheService.updateUserForRosterUsers(R._roster.id,e);R._saveMessage=R.SAVED;R.saveMessageTimeout()})["catch"](function(){R._saveMessage=R.SAVE_ERROR}):R._saveMessage=R.SAVE_ERROR},n,s);n.$on("$destroy",function(){return R._destroy()});this.init()}e.$inject=["$q","$scope","$state","$window","$timeout","$stateParams","$mdPanel","$mdDialog","$document","$log","RosterService","NotificationService","AssignmentService","HelpRequestService","CacheService","UserService","MixpanelService","BreadcrumbService","ContractService","CsvService","AssignmentWorkService","AuthService"];i(e,[{key:"init",value:function(){var e=this;this.$q.all({assignments:this._cacheService.getAssignmentsForUser(),roster:this._rosterService.get(this.$stateParams.rosterId),users:this._cacheService.getRosterUsers(this.$stateParams.rosterId,!0),helpRequestSet:this._helpRequestService.getHelpRequestSetForRoster(this._authService.currentUserId,this.$stateParams.rosterId),proInfo:this._cacheService.getProInfo()}).then(function(t){e._assignments=t.assignments;e._users=t.users;e._helpRequestSet=t.helpRequestSet;e._roster=t.roster;e._proInfo=t.proInfo;e._users.forEach(function(t){return e._createUserItem(t)});e._rosterNotification=e._notificationService.getRosterNotification(e._roster);e._rosterNotification.userAdded.subscribe(function(t){return e._handleUserAdded(t)});e._rosterNotification.userRemoved.subscribe(function(t){return e._handleUserRemoved(t)});e._rosterNotification.start();e._loading=!1;e.focusName=e.$stateParams.isNew?"select":!1})["catch"](function(t){e.$log.error(t);e._errorMessage="Sorry, there was a problem loading this roster"})}},{key:"_createUserItem",value:function(e){if(!this._list[e.id]){
var t=this._notificationService.getUserStatusNotification(e.id);this._list[e.id]=new d["default"](e,t,this._helpRequestSet,this._assignments,this._assignmentService).start()}return this._list[e.id]}},{key:"userIsAnonymous",value:function(e){return/[A-Z\d]{20,50}\|.+/g.test(e)}},{key:"editUser",value:function(e){var t=this;this._loading=!0;this._cacheService.getUsersForContracts().then(function(n){var i=t._userIsInContracts(n,e);return i?i:t._cacheService.getUsersForContracts(!0).then(function(n){return t._userIsInContracts(n,e)})}).then(function(n){if(n)t._breadcrumbService.go("root.account.contract-user",{contractId:n,userId:e});else{t._loading=!1;t._confirmDialog(t.$mdDialog,"Sorry, that user isn't a member of your organization.",void 0,!0)}})["catch"](function(e){t._loading=!1;t._confirmDialog(t.$mdDialog,"Sorry, there was a problem loading this user.",void 0,!0);t.$log.error(e)})}},{key:"_userIsInContracts",value:function(e,t){return o(e.keys()).find(function(n){return e.get(n).has(t)})}},{key:"_handleUserAdded",value:function(e){var t=this;this._cacheService.getRosterUser(this.$stateParams.rosterId,e.userId,!0).then(function(e){return t._createUserItem(e)}).then(function(e){t.$timeout(function(){var n=angular.element("#"+e.user.id);if(n){(0,H["default"])(n[0],!1);n.addClass("highlight");t.$timeout(function(){n.removeClass("highlight")},4e3)}},0,!1)})}},{key:"_handleUserRemoved",value:function(e){delete this._list[e.userId]}},{key:"_destroy",value:function(){this._rosterNotification&&this._rosterNotification.stop();this._list&&angular.forEach(this._list,function(e){e.stop()})}},{key:"togglePeerHelp",value:function(){this.roster.allowPeerHelp=!this.roster.allowPeerHelp;this._saveRoster.tick()}},{key:"deleteRoster",value:function(){var e=this,t="WAIT! Are you sure you would like to delete "+this.roster.name+"? Once deleted, ALL WORK for the students on this roster will also be deleted, and this CAN NOT be recovered.";this._confirmDialog(this.$mdDialog,t).then(function(){e._cacheService.deleteRoster(e.roster.id).then(function(){e.goBack()})})}},{key:"setOrToggle",value:function(e,t){if(this._orderBy!==e){this._orderBy=e;this._isAscending=t}else this._isAscending=!this._isAscending}},{key:"setOrToggleName",value:function(){this.setOrToggle(j.NAME,!0)}},{key:"setOrToggleAccountType",value:function(){this.setOrToggle(j.ACCOUNT_TYPE,!0)}},{key:"setOrToggleEmail",value:function(){this.setOrToggle(j.EMAIL,!0)}},{key:"setOrToggleStatus",value:function(){this.setOrToggle(j.STATUS,!0)}},{key:"setOrToggleHelps",value:function(){this.setOrToggle(j.HELPS,!1)}},{key:"orderBy",value:function t(){var t=this._orderBy,e=this._isAscending,n=this.userIsAnonymous;return function(i){return j.NAME===t?i.user.name.toLowerCase():j.ACCOUNT_TYPE===t?n(i.user.username):j.EMAIL===t?n(i.user.username)?e?"!":"~":i.user.email?i.user.email.toLowerCase():i.user.username.toLowerCase():j.HELPS===t?i.helpRequests.total:j.STATUS===t?i.status&&!i.status.online?e?"!":"~":i.displayStatus.toLowerCase():void 0}}},{key:"save",value:function(e){e&&(e.$touched=!0);this._saveMessage=this.UNSAVED;this._saveRoster.tick()}},{key:"removeMember",value:function(e){var t=this,n="Are you sure you want to remove "+e.name+" from this roster?",i="\n        Note: This will not delete "+e.name+'\'s account.\n        To delete their account, have them log in, go to their profile, and click "delete account"\n    ';this._confirmDialog(this.$mdDialog,n,this.userIsAnonymous(e.username)?"":i).then(function(){t._rosterService.removeMember(t.$stateParams.rosterId,e.id).then(function(){delete t._list[e.id];t._cacheService.removeUserForRosterUsers(t.roster.id,e)})})}},{key:"saveName",value:function(e,t){t.$touched=!0;this._saveMessage=this.UNSAVED;this._saveName.tick(e)}},{key:"showColorMenu",value:function(){var e=this;v["default"].show(this.$q,this.$mdPanel,this.$mdMedia,"#ck-color-menu").then(function(t){e._roster.color=t.hex;e.save()})}},{key:"showLockMenu",value:function(){var e=this;this._lockRosterDialog(this.$q,this.$mdDialog,this.$document,this._roster,this._lockRosterExplanation,this._lockDeviceExplanation).then(function(){return e.save()})}},{key:"saveMessageTimeout",value:function(){var e=this;this.$timeout(function(){e._saveMessage=""},3e3)}},{key:"navigate",value:function(e){var t=this;this._saveMessage===this.SAVE_ERROR?this._confirmDialog(this.$mdDialog,"<p>Some of your changes have not been saved.</p><div>Are you sure you want to leave?</div>").then(function(){t.$state.go(e)}):this.$state.go(e)}},{key:"toAssignmentList",value:function(){this.navigate("root.account.nav.assignments");this._mixpanelService.rosterToAssignments()}},{key:"goBack",value:function(){this._breadcrumbService.goBack("root.account.nav.rosters")}},{key:"addNewStudent",value:function(){angular.isUndefined(this._roster.studentAccountPreference)?this._showStudentAccountChoice(this.$mdDialog,this.pro,this.roster,new a(this.usersOnRoster)):this._roster.studentAccountPreference===k.RosterStudentAccountPreferenceOptions.PORTFOLIO?this._showAddProStudentsDialog(this.$mdDialog,this.$q,this.pro,this.roster,this.usersOnRoster):this._roster.studentAccountPreference===k.RosterStudentAccountPreferenceOptions.BASIC&&this._showAddStudentDialog(this.$mdDialog,this.roster,this.usersOnRoster,this.pro)}},{key:"_worksForSelectedAssignments",value:function(e,t){var n=this,i=e.map(function(e){return n._assignmentWorkService.getAllForAssignmentRoster(e,t).then(function(t){return{assignment:e,works:t}})});return this.$q.all(i)}},{key:"exportGrades",value:function(){var e=this;this.hasGradeExport?this._showAssignmentSelectionDialog(this.$mdDialog,this.assignmentsForRoster).then(function(t){e._selectedAssignments=t.map(function(t){return e._assignments.get(t)});var n=e._worksForSelectedAssignments(e._selectedAssignments,e.$stateParams.rosterId);e._showLoadingDialog(e.$mdDialog,n);return n}).then(function(t){e._csvService.exportGradesByRoster(t,e.usersOnRoster,e._roster.name);e._mixpanelService.rosterGradeExported()}):this._proInfoDialog(this.$mdDialog,L.PaywallSources.ROSTER_GRADE_EXPORT)}},{key:"lockDeviceExplanation",get:function(){return this._lockDeviceExplanation}},{key:"lockRosterExplanation",get:function(){return this._lockRosterExplanation}},{key:"roster",get:function(){return this._roster}},{key:"list",get:function(){return this._list}},{key:"hasRequests",get:function(){return this._helpRequestSet&&this._helpRequestSet.total>0}},{key:"loading",get:function(){return this._loading}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"isAscending",get:function(){return this._isAscending}},{key:"showNameCarrot",get:function(){return this._orderBy===j.NAME}},{key:"showAccountTypeCarrot",get:function(){return this._orderBy===j.ACCOUNT_TYPE}},{key:"showEmailCarrot",get:function(){return this._orderBy===j.EMAIL}},{key:"showStatusCarrot",get:function(){return this._orderBy===j.STATUS}},{key:"showHelpsCarrot",get:function(){return this._orderBy===j.HELPS}},{key:"saveMessage",get:function(){return this._saveMessage}},{key:"SAVED",get:function(){return w["default"].SAVED}},{key:"UNSAVED",get:function(){return w["default"].UNSAVED}},{key:"SAVE_ERROR",get:function(){return w["default"].SAVE_ERROR}},{key:"STUDENTS_HELPER_LIMIT",get:function(){return 7}},{key:"pro",get:function(){return this._proInfo}},{key:"hasGradeExport",get:function(){return this.pro&&this.pro.hasGradeExport}},{key:"assignmentsForRoster",get:function(){var e=this;return[].concat(s(this._assignments.keys())).map(function(t){return e._assignments.get(t)}).filter(function(t){return t.rosters.some(function(t){return t===e.$stateParams.rosterId})})}},{key:"usersOnRoster",get:function(){var e=this;return c(this._list).map(function(t){return e._list[t]}).map(function(e){return e.user}).sort(function(e,t){return e.name.localeCompare(t.name)})}}]);return e}();t["default"]=B},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o){var a=this;r(this,e);this._user=t;this._userNotification=n;this._helpRequestSet=i;this._assignmentsCache=s;this._assignmentService=o;this._status=null;this._activeAssignment=null;this._userNotification.updated.subscribe(function(e){!e.online||!e.assignmentId||a.activeAssignment&&a.activeAssignmentId===e.assignmentId?e.online&&e.assignmentId||(a._activeAssignment=null):a._assignmentsCache.has(e.assignmentId)?a._activeAssignment=a._assignmentsCache.get(e.assignmentId):a._assignmentService.get(e.assignmentId).then(function(e){a._activeAssignment=e});a._status=e});this._helpRequestView=this._helpRequestSet.createChild(function(e){return e.helpeeId===a._user.id})}i(e,[{key:"start",value:function(){this._userNotification.start();this._helpRequestSet.start();return this}},{key:"stop",value:function(){this._userNotification.stop();this._helpRequestSet.stop();return this}},{key:"user",get:function(){return this._user}},{key:"userId",get:function(){return this.user&&this.user.id}},{key:"userNotification",get:function(){return this._userNotification}},{key:"assignmentsCache",get:function(){return this._assignmentsCache}},{key:"activeAssignment",get:function(){return this._activeAssignment},set:function(e){this._activeAssignment=e}},{key:"activeAssignmentId",get:function(){return this.activeAssignment&&this.activeAssignment.id}},{key:"helpRequests",get:function(){return this._helpRequestView}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"displayStatus",get:function(){return this._activeAssignment&&this._activeAssignment.name||"Inactive"}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){r(this,e);this.$mdDialog=t}e.$inject=["$mdDialog"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}}],[{key:"show",value:function(t,n,i,r,s,o){return t(function(t){var i={clickOutsideToClose:!0,clickEscapeToClose:!0,controller:e,controllerAs:"ctrl",templateUrl:"app/components/roster-lock-dialog/roster-lock-dialog.html",locals:{roster:r,lockRosterExplanation:s,lockDeviceExplanation:o},bindToController:!0,onRemoving:function(){return t()}};n.show(i)})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(162),o=function(){function e(t,n,i){"ngInject";r(this,e);this._mdPanelRef=t;this._result=n;this._colors=i}e.$inject=["mdPanelRef","result","colors"];i(e,[{key:"style",value:function(e){return{"background-color":e.hex,border:"white"===e.name?"1px solid #eeeeef":""}}},{key:"select",value:function(e){this._result.resolve(e);this._mdPanelRef.hide(e)}},{key:"colors",get:function(){return this._colors},set:function(e){this._colors=e}}],[{key:"show",value:function(t,n,i,r,o,a){o=o||s.Colors.ROSTER_COLORS;var c=a?e.SELECTOR_WIDE:e.SELECTOR,l=t.defer(),u=n.newPanelPosition().relativeTo(r);u=a&&i("max-width: 800px")?u.addPanelPosition(n.xPosition.ALIGN_END,n.yPosition.BELOW):u.addPanelPosition(n.xPosition.ALIGN_START,n.yPosition.BELOW);var d=n.newPanelAnimation().openFrom(r).closeTo(r).withAnimation(n.animation.FADE),h={position:u,animation:d,controller:e,controllerAs:"ctrl",templateUrl:"app/components/color-menu/color-menu.html",panelClass:c,clickOutsideToClose:!0,clickEscapeToClose:!0,focusOnOpen:!0,locals:{result:l,colors:o},onRemoving:function(){l.reject()}};n.open(h);return l.promise}},{key:"SELECTOR",get:function(){return"ck-color-menu"}},{key:"SELECTOR_WIDE",get:function(){return"ck-color-menu-wide"}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(274),c=o(a),l=n(653),u=o(l),d=function(){function e(t,n,i,o,a,l){"ngInject";r(this,e);this.$q=t;this.$mdDialog=n;this._rosterService=i;this._names="";this._roster=o;this._rosterMembers=a;this._rosterMemberNames=[].concat(s(a)).map(function(e){return e.displayName});this._pro=l;this._showLoadingDialog=c["default"].show;this._showStudentAccountChoice=u["default"].show}e.$inject=["$q","$mdDialog","RosterService","roster","rosterMembers","pro"];i(e,[{key:"goBackToSelection",value:function(){this._showStudentAccountChoice(this.$mdDialog,this._pro,this._roster,this._rosterMembers)}},{key:"submit",value:function(){var e=this,t=this.$q.all(this._names.split(",").map(function(e){return e.trim()}).filter(function(t){return!e._hasName(t)}).map(function(t){return e._rosterService.addAnonymousMember(e._roster.id,t)}));this._showLoadingDialog(this.$mdDialog,t);this.$mdDialog.hide()}},{key:"_hasName",value:function(e){return this._rosterMemberNames.some(function(t){return t===e})}},{key:"rosterName",get:function(){return this._roster&&this._roster.name}},{key:"pro",get:function(){return this._pro},set:function(e){this._pro=e}},{key:"names",get:function(){return this._names},set:function(e){this._names=e}}],[{key:"show",value:function(t,n,i,r){return t.show({controller:e,templateUrl:"app/components/add-anon-student-dialog/add-anon-student-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,locals:{roster:n,rosterMembers:i,pro:r}})}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(654),a=s(o),c=n(652),l=s(c),u=n(291),d=n(423),h=n(634),f=s(h),g=function(){function e(t,n,i,s,o,c){r(this,e);this.$q=t;this.$mdDialog=n;this._rosterService=i;this._pro=s;this._roster=o;this._rosterMembers=c;this._rememberSelection=!1;this._showAddProStudentsDialog=a["default"].show;this._showAddStudentDialog=l["default"].show;this._proInfoDialog=f["default"].show}e.$inject=["$q","$mdDialog","RosterService","pro","roster","rosterMembers"];i(e,[{key:"selectBasic",value:function(){if(this.rememberSelection){this._roster.studentAccountPreference=d.RosterStudentAccountPreferenceOptions.BASIC;this._rosterService.update(this._roster)}this._showAddStudentDialog(this.$mdDialog,this.roster,this._rosterMembers,this.pro)}},{key:"selectPortfolio",value:function(){if(this.pro.isPro){if(this.rememberSelection){this._roster.studentAccountPreference=d.RosterStudentAccountPreferenceOptions.PORTFOLIO;this._rosterService.update(this._roster)}this._showAddProStudentsDialog(this.$mdDialog,this.$q,this.pro,this.roster,this._rosterMembers)}else this._proInfoDialog(this.$mdDialog,u.PaywallSources.STUDENT_ACCOUNTS_ADD_STUDENTS_DIALOG)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"pro",get:function(){return this._pro},set:function(e){this._pro=e}},{key:"roster",get:function(){return this._roster},set:function(e){this._roster=e}},{key:"rememberSelection",get:function(){return this._rememberSelection},set:function(e){this._rememberSelection=e}}],[{key:"show",value:function(t,n,i,r){return t.show({controller:e,templateUrl:"app/components/student-account-choice-dialog/student-account-choice-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!1,locals:{pro:n,roster:i,rosterMembers:r}})}}]);return e}();t["default"]=g;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(206)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(185),l=a(c),u=n(655),d=a(u),h=n(274),f=a(h),g=n(652),p=a(g),m=n(653),v=a(m),_=n(214),y=a(_),k=n(296),b=a(k),S=function(){function e(t,n,i,a,c,l,u,h,g,m,_){r(this,e);this.$q=t;this.$mdDialog=n;this._userService=i;this._authService=a;this._rosterService=c;this._cacheService=l;this._pro=u;this._roster=h;this._rosterMembers=g;this._rosterMemberIds=new o([].concat(s(g.values())).map(function(e){return e.id}));this._selectedUserIds=m;this._deferred=_;this._students=null;this._verifiedContracts=[];this.searchTerm=null;this._filteredStudents=null;this._noStudentMessage="";this._createContractStudentsDialog=d["default"].show;this._showLoadingDialog=f["default"].show;this._errorDialog=y["default"].show;this._showAddStudentDialog=p["default"].show;this._showStudentAccountChoice=v["default"].show;this.init()}e.$inject=["$q","$mdDialog","UserService","AuthService","RosterService","CacheService","pro","roster","rosterMembers","selectedUserIds","deferred"];i(e,[{key:"init",value:function(){var e=this;this.$q.all({schools:this._cacheService.getSchools(!1),contracts:this._cacheService.getContracts(!1)}).then(function(t){var n=t.schools,i=t.contracts;e._schools=n;e._contracts=i;e._verifiedContracts=e._getVerifiedContracts(e._contracts,e._schools,e._authService.currentUserId);return e.$q.all(e._verifiedContracts.map(function(t){return e._userService.getContractUsers(t.id)}))}).then(function(t){var n=new o;e._students=t.reduce(function(e,t){return e.concat(t)},[]).filter(function(t){if(!t.isStudent||n.has(t.id)||e._rosterMemberIds.has(t.id))return!1;n.add(t.id);e._selectedUserIds.has(t.id)&&(t.toggled=!0);return!0}).sort(l["default"].SORT_NAME_ASC);e._selectedUserIds.forEach(function(t){n.has(t)||e._selectedUserIds["delete"](t)});e.search()})}},{key:"_getVerifiedContracts",value:function(e,t,n){return e&&t?e.filter(function(e){var i=t.find(function(t){return t.contractId===e.id}),r=i&&i.isVerifiedFor(n);return!i||r}):[]}},{key:"search",value:function(){var e=this;this.searchTerm&&this._students?!function(){var t=e.searchTerm.toLowerCase();e._filteredStudents=e._students.filter(function(e){return e.name.toLowerCase().includes(t)||e.login.includes(t)})}():this._filteredStudents=null}},{key:"toggleStudent",value:function(e){if(this._selectedUserIds.has(e.id)){e.toggled=!1;this._selectedUserIds["delete"](e.id)}else{e.toggled=!0;this._selectedUserIds.add(e.id)}}},{key:"complete",value:function(){var e=this;this.$mdDialog.hide();if(0!==this._selectedUserIds.size){var t=this.$q.all([].concat(s(this._selectedUserIds.values())).map(function(t){return e._rosterService.addMember(e._roster.id,t)}));this._showLoadingDialog(this.$mdDialog,t);t.then(function(){e.deferred.resolve(e._selectedUserIds)})["catch"](function(t){e._errorDialog(e.$mdDialog,"Oops! Something went wrong adding students to "+e._roster.name,"Please try again and if you continue to have problems send us an email at support@classkick.com")})}}},{key:"cancel",value:function(){this.$mdDialog.cancel();this.deferred.reject()}},{key:"goBackToSelection",value:function(){this._showStudentAccountChoice(this.$mdDialog,this._pro,this._roster,this._rosterMembers)}},{key:"createStudentAccounts",value:function(){var e=this;this.$mdDialog.cancel();this._createContractStudentsDialog(this.$mdDialog).then(function(t){e.reopenCallback(t)})}},{key:"listMessage",get:function(){var e=this;if(!(this.loading||this.students.length>0)){if(this.cantViewStudents){var t=this._schools.filter(function(t){return!t.isVerifiedFor(e._authService.currentUserId)}).map(function(e){return e.name}).join(",");return"To ensure student data privacy at "+t+", Portfolio students can only be accessed by current and verified teachers. Please contact your school's admin to verify your teacher account. If you are unsure who your school admin is, you can reach out to pro@classkick.com."}return this.searchTerm?this.searchTerm?"No students match the search term '"+this.searchTerm+"'":void 0:this.noStudentsMessage}}},{key:"cantViewStudents",get:function(){return!this.loading&&this._contracts.length!==this._verifiedContracts.length}},{key:"noStudentsMessage",get:function(){if(!this._noStudentMessage&&this._contracts){var e=b["default"].ActiveContract(this._contracts),t=e&&(e.isProSchool||e.isProDistrict)?"school":"classroom";this._noStudentMessage="There are no students in your "+t+"."}return this._noStudentMessage}},{key:"loading",get:function(){return!this._students}},{key:"deferred",get:function(){return this._deferred}},{key:"students",get:function(){return this._filteredStudents||this._students}},{key:"rosterName",get:function(){return this._roster.name}},{key:"reopenCallback",get:function(){var t=this;return function(n){n&&n.forEach(function(e){t._selectedUserIds.add(e)});return e.show(t.$mdDialog,t.$q,t._pro,t._roster,t._rosterMembers,t._selectedUserIds,t._deferred)}}}],[{key:"show",value:function(t,n,i,r,s,a,c){c||(c=n.defer());t.show({controller:e,templateUrl:"app/components/add-pro-students-dialog/add-pro-students-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!0,locals:{pro:i,roster:r,rosterMembers:s||new o,selectedUserIds:a||new o,deferred:c}});return c.promise}}]);return e}();t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(206)["default"],a=n(172)["default"],c=n(121)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(483),d=l(u),h=n(656),f=l(h),g=n(390),p=l(g),m=n(210),v=l(m),_=n(186),y=l(_),k=function(){function e(t,n,i,s,o,a,c,l,u){var h=this;r(this,e);this.$q=t;this.$mdDialog=n;this.$timeout=i;this._contractService=s;this._authService=o;this._staticContentService=a;this._cacheService=c;this._csvService=l;this._state=this.Loading;this._stateStack=[];this._newStudents=[];this._duplicates=[];this._createdStudentIds=[];this._duplicateIds=[];this._validStudents=[];this._originalFile=void 0;this._newContractStudent=new d["default"];this._newContractStudent.password=f["default"].generateRandomString(6,""+f["default"].LowercaseLetters+f["default"].Digits);this._oldContractStudent=void 0;this._contracts=[];this._contract=void 0;this._emailOrUsernameInputError=!1;this._selectIsError=!1;this._errorMessage="";this._cacheService.getContracts().then(function(e){h._state=h.Select;h._contracts=e.filter(function(e){return e.isPro&&!e.isExpired});if(h.hasMultipleContracts&&!u)h._showContractSelector=!0;else if(u){h._contract=h._contracts.find(function(e){return e.id===u});h._showContractSelector=!1}else{h._contract=h._contracts[0];h._showContractSelector=!1}})}e.$inject=["$q","$mdDialog","$timeout","ContractService","AuthService","StaticContentService","CacheService","CsvService","contractId"];i(e,[{key:"go",value:function(e){this._state!==this.RemovedDuplicates&&this._stateStack.push(this._state);this._state=e}},{key:"goToImport",value:function(e){if(this._contract)this.go(this.ImportCsv);else{this._selectIsError=!0;e.selectForm.contracts.$setValidity("required",!1)}}},{key:"goToManualAdd",value:function(e){if(this._contract)this.go(this.ManualAdd);else{this._selectIsError=!0;e.selectForm.contracts.$setValidity("required",!1)}}},{key:"resetSelectForm",value:function(e){this._selectIsError=!1;e.selectForm.contracts.$setValidity("required",!0)}},{key:"goBack",value:function(){if(this._oldContractStudent){this.newStudents=[].concat(s(this._newStudents),[this._oldContractStudent]);this._clearNewStudent()}else this._state===this.ManualAdd&&this._clearNewStudent();this._stateStack.length>0?this._state=this._stateStack.pop():this.$mdDialog.hide();this._state===this.Select&&(this._newStudents=[])}},{key:"goToTermsOfServicePage",value:function(){this._staticContentService.goToTermsOfServicePage()}},{key:"goToPrivacyPolicyPage",value:function(){this._staticContentService.goToPrivacyPolicyPage()}},{key:"clearStack",value:function(){this._stateStack=[]}},{key:"emailOrUsernameUpdated",value:function(e){if(this.newContractStudent.id){this._emailOrUsernameInputError=!1;this._setValidity(e,"taken",!0);this._setValidity(e,"email-format",!0);this._setValidity(e,"email-length",!0);this._setValidity(e,"username-format",!0);this._setValidity(e,"username-length",!0)}else e.manualForm.emailOrUsernameInput.$pristine||(this._emailOrUsernameInputError=!0)}},{key:"saveStudent",value:function(e){var t=this;if(!e.manualForm.firstNameInput.$invalid&&!e.manualForm.lastNameInput.$invalid){var n=p["default"].validateUsernameOrEmail(this.newContractStudent.id);if(n){this._emailOrUsernameInputError=!0;this._setValidity(e,n,!1)}else if(this._isStudentOnList(this.newContractStudent.id)){this._emailOrUsernameInputError=!0;this._setValidity(e,"taken",!1)}else this._contractService.validateStudents(this._contract.id,[this.newContractStudent]).then(function(n){if(n[0]){t._emailOrUsernameInputError=!0;t._setValidity(e,"taken",!1)}else{t.newContractStudent.isIdValid=!0;t.newContractStudent.isNotDuplicate=!0;t.newStudents.push(t.newContractStudent);t._clearNewStudent(e);t._state=t.Review;t._isPreviousState(t.Review)?t.goBack():t._state=t.Review}})}}},{key:"_isPreviousState",value:function(e){return this._stateStack.length>0&&this._stateStack[this._stateStack.length-1]===e}},{key:"_setValidity",value:function(e,t,n){e.manualForm.emailOrUsernameInput.$setValidity(t,n)}},{key:"_isStudentOnList",value:function(e){return this._newStudents.some(function(t){return t.id===e})}},{key:"_clearNewStudent",value:function(e){e&&(e.manualForm.emailOrUsernameInput.$pristine=!0);this._newContractStudent=new d["default"];this._newContractStudent.password=f["default"].generateRandomString(6,""+f["default"].LowercaseLetters+f["default"].Digits);this._oldContractStudent=void 0;this._emailOrUsernameInputError=!1}},{key:"editAccount",value:function(e){this._newStudents=this._newStudents.filter(function(t){return t.id!==e.id});this._newContractStudent=e;this._oldContractStudent=new d["default"](e.id,e.firstName,e.lastName,e.password,e.isIdValid,e.isNotDuplicate);this.go(this.ManualEdit)}},{key:"create",value:function(){var e=this;this._state=this.Loading;this._validStudents=this._newStudents.filter(function(e){return e.valid});this._contractService.addStudents(this._contract.id,this._validStudents).then(function(t){e._createdStudentIds=t.map(function(e){return e.id});e.downloadCsv();e.go(e.Created)})["catch"](function(){e._errorMessage="Oops! There was an error creating your students";e.go(e.Error)})}},{key:"downloadCsv",value:function(){this._csvService.downloadCsv(this._validStudents)}},{key:"downloadErrorCsv",value:function(){var e=this._newStudents.filter(function(e){return!e.valid});this._csvService.downloadCsv(e)}},{key:"close",value:function(){var e=new o(this._createdStudentIds),t=new o(this._duplicateIds),n=new o([].concat(s(e),s(t)));this.$mdDialog.hide(n)}},{key:"chooseFile",value:function(){angular.element("input.csv-input").click()}},{key:"fileChanged",value:function(){var e=this;this._state=this.Loading;this._csvService.extractCSVData(this._originalFile).then(function(t){e._originalFile=void 0;e.newStudents=t;return e._contractService.validateStudents(e._contract.id,t.filter(function(e){return e.valid})).then(function(t){var n=new a(t.map(function(e){return[e.object_name,e.field]})),i=e.$q.resolve(new o);n.size>0&&(i=e._cacheService.getUsersForContract(e._contract.id,!0).then(function(t){return c(t.values()).filter(function(e){return e.isStudent}).reduce(function(t,i){if(i.username&&n.has(i.username)){t.add(i.username);e._duplicateIds.push(i.id)}if(i.email&&n.has(i.email)){t.add(i.email);e._duplicateIds.push(i.id)}return t},new o)}));return e.$q.all({errorMap:n,duplicates:i})})}).then(function(t){var n=e._newStudents.reduce(function(e,n){t.errorMap.has(n.id)&&("id"===t.errorMap.get(n.id)?n.isIdValid=!1:"duplicate"===t.errorMap.get(n.id)&&(n.isNotDuplicate=!1));t.duplicates.has(n.id)?e.duplicates.push(n):e.newStudents.push(n);return e},{newStudents:[],duplicates:[]});e.newStudents=n.newStudents;e._duplicates=n.duplicates;e._duplicates.length>0?e.go(e.RemovedDuplicates):e.go(e.Review)})["catch"](function(t){e._errorMessage=t.message||"Oops! There was an error importing your CSV.";e.go(e.Error)})}},{key:"removeStudent",value:function(e){this._newStudents=this._newStudents.filter(function(t){return t.id!==e.id})}},{key:"state",get:function(){return this._state}},{key:"Select",get:function(){return"select"}},{key:"ManualAdd",get:function(){return"manualAdd"}},{key:"ManualEdit",get:function(){return"ManualEdit"}},{key:"ImportCsv",get:function(){return"ImportCsv"}},{key:"RemovedDuplicates",get:function(){return"RemovedDuplicates"}},{key:"Review",get:function(){return"Review"}},{key:"Created",get:function(){return"Created"}},{key:"Error",get:function(){return"Error"}},{key:"Loading",get:function(){return"Loading"}},{key:"TextCsv",get:function(){return v["default"].TEXT_CSV}},{key:"UserFirstNameMaxSize",get:function(){return p["default"].UserFirstNameMaxSize}},{key:"UserLastNameMaxSize",get:function(){return p["default"].UserLastNameMaxSize}},{key:"contracts",get:function(){return this._contracts}},{key:"contract",get:function(){return this._contract},set:function(e){this._contract=e}},{key:"hasMultipleContracts",get:function(){return this.contracts&&this.contracts.length>1}},{key:"showContractSelector",get:function(){return this._showContractSelector}},{key:"newContractStudent",get:function(){return this._newContractStudent}},{key:"newStudents",get:function(){return this._newStudents},set:function(e){var t=e.filter(function(e){return!e.valid}).sort(function(e,t){return y["default"].NAME_ASC(e.lastName,t.lastName)}),n=e.filter(function(e){return e.valid}).sort(function(e,t){return y["default"].NAME_ASC(e.lastName,t.lastName)});this._newStudents=[].concat(s(t),s(n))}},{key:"validStudents",get:function(){return this._validStudents}},{key:"originalFile",get:function(){return this._originalFile},set:function(e){this._originalFile=e}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"selectIsError",get:function(){return this._selectIsError}},{key:"emailOrUsernameInputError",get:function(){return this._emailOrUsernameInputError}},{key:"duplicateCount",get:function(){return this._duplicates.length}},{key:"studentsAreInvalid",get:function(){return this._newStudents.length>0&&this._newStudents.some(function(e){return!e.valid})}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/create-contract-students-dialog/create-contract-students-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!0,locals:{contractId:n}})}}]);return e}();t["default"]=k;e.exports=t["default"]},function(e,t,n){"use strict";function i(e){for(var t=arguments,n=!0;n;){var i=e;n=!1;var r=t.length<=1||void 0===t[1]?[]:t[1],s=o(i);for(var a in s)angular.isFunction(s[a].value)&&r.push(a);var c=Object.getPrototypeOf(i);if(!c||c===Object.prototype)return jasmine.createSpyObj(i.constructor.name,r);t=[e=c,r];n=!0;r=s=a=c=void 0}}var r=n(19)["default"],s=n(39)["default"],o=n(657)["default"],a=n(121)["default"],c=n(172)["default"],l=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});t.createMock=i;var u=n(461),d=l(u),h=n(397),f=l(h),g=n(453),p=l(g),m=n(470),v=l(m),_=n(419),y=l(_),k=n(291),b=l(k),S=n(431),w=l(S),C=n(403),E=l(C),T=n(452),I=l(T),A=n(407),x=l(A),O=n(272),P=l(O),R=n(408),D=l(R),M=n(463),N=l(M),L=n(423),F=l(L),U=n(356),$=l(U),q=n(185),H=n(189),j=l(H),B=l(q),W=n(191),V=l(W),z=n(192),G=l(z),Q=n(147),K=l(Q),Y=n(435),X=l(Y),J=n(437),Z=l(J),ee=n(467),te=l(ee),ne=n(438),ie=l(ne),re=n(436),se=l(re),oe=n(365),ae=l(oe),ce=n(441),le=l(ce),ue=n(409),de=l(ue),he=n(292),fe=l(he),ge=n(412),pe=l(ge),me=n(446),ve=l(me),_e=n(250),ye=l(_e),ke=n(156),be=l(ke),Se=n(405),we=l(Se),Ce=n(398),Ee=l(Ce),Te=n(416),Ie=l(Te),Ae=n(478),xe=l(Ae),Oe=n(473),Pe=l(Oe),Re=n(440),De=l(Re),Me=n(421),Ne=l(Me),Le=n(302),Fe=l(Le),Ue=n(475),$e=l(Ue),qe=n(480),He=l(qe),je=n(460),Be=l(je),We=n(301),Ve=l(We),ze=n(484),Ge=l(ze),Qe=n(18),Ke=l(Qe),Ye=n(444),Xe=l(Ye),Je=n(472),Ze=l(Je),et=n(222),tt=l(et),nt=n(153),it=l(nt),rt=n(144),st=l(rt),ot=n(146),at=l(ot),ct=n(299),lt=l(ct),ut=n(296),dt=l(ut),ht=n(493),ft=l(ht),gt=n(491),pt=l(gt),mt=n(202),vt=l(mt),_t=n(464),yt=l(_t),kt=n(203),bt=l(kt),St=n(451),wt=l(St),Ct=n(458),Et=l(Ct),Tt=n(430),It=l(Tt),At=n(494),xt=l(At),Ot=n(262),Pt=l(Ot),Rt=n(271),Dt=l(Rt),Mt=n(500),Nt=l(Mt),Lt=n(502),Ft=l(Lt),Ut=n(489),$t=l(Ut),qt=n(503),Ht=l(qt),jt=n(504),Bt=l(jt),Wt=n(477),Vt=l(Wt),zt=n(507),Gt=l(zt),Qt=n(513),Kt=l(Qt),Yt=n(514),Xt=l(Yt),Jt=n(519),Zt=l(Jt),en=n(537),tn=l(en),nn=function(){
function e(){s(this,e)}r(e,[{key:"mockStaticService",value:function(e){var t=i(Ke["default"].prototype);t.ImageEditService=this.ImageEditService;e&&(t.$timeout=e);Ke["default"]._testInstance=t;return t}},{key:"$location",get:function(){return jasmine.createSpyObj("$location",["absUrl","url"])}},{key:"$log",get:function(){return jasmine.createSpyObj("$log",["log","warn","error"])}},{key:"$state",get:function(){return jasmine.createSpyObj("$state",["go","is"])}},{key:"$mdDialog",get:function(){return jasmine.createSpyObj("$mdDialog",["show"])}},{key:"AuthService",get:function(){var e=i(fe["default"].prototype);e.userAuthenticated=new K["default"](e);e.dataCleared=new K["default"](e);return e}},{key:"AssignmentService",get:function(){return i(we["default"].prototype)}},{key:"AssignmentTrackingService",get:function(){var e=i(pe["default"].prototype);e.undoStackUpdated=new K["default"](e);return e}},{key:"AssignmentWorkService",get:function(){return i(d["default"].prototype)}},{key:"BootstrapService",get:function(){return i(f["default"].prototype)}},{key:"BreadcrumbService",get:function(){return i(v["default"].prototype)}},{key:"CacheService",get:function(){return i(p["default"].prototype)}},{key:"ClassCodeService",get:function(){return i(Be["default"].prototype)}},{key:"CleverService",get:function(){return i(Gt["default"].prototype)}},{key:"ContractService",get:function(){return i(He["default"].prototype)}},{key:"CsvService",get:function(){return i($t["default"].prototype)}},{key:"DelightedService",get:function(){return i(Ht["default"].prototype)}},{key:"ExportService",get:function(){return i(Vt["default"].prototype)}},{key:"FeedbackService",get:function(){return i(Xt["default"].prototype)}},{key:"FirebaseService",get:function(){return i(Ee["default"].prototype)}},{key:"FocusManagerService",get:function(){return i(Ie["default"].prototype)}},{key:"GoogleAnalyticsService",get:function(){return i(Kt["default"].prototype)}},{key:"GoogleFormService",get:function(){return i(It["default"].prototype)}},{key:"GoogleClassroomService",get:function(){return i(Ft["default"].prototype)}},{key:"GoogleClientService",get:function(){return i(Nt["default"].prototype)}},{key:"HelpRequestService",get:function(){return i(y["default"].prototype)}},{key:"HttpService",get:function(){return i(Ve["default"].prototype)}},{key:"ImageEditService",get:function(){return i(Ze["default"].prototype)}},{key:"LogRocketService",get:function(){return i(Bt["default"].prototype)}},{key:"MediaService",get:function(){return i(b["default"].prototype)}},{key:"MessageService",get:function(){return i(Pe["default"].prototype)}},{key:"MixpanelService",get:function(){return i(b["default"].prototype)}},{key:"NotificationService",get:function(){return i(w["default"].prototype)}},{key:"OrganizationService",get:function(){return i(Zt["default"].prototype)}},{key:"RosterService",get:function(){return i(Ne["default"].prototype)}},{key:"StaticContentService",get:function(){return i(E["default"].prototype)}},{key:"StickerService",get:function(){return i($e["default"].prototype)}},{key:"StorageService",get:function(){var e=i(ve["default"].prototype);e.onRemoteLogOut=new K["default"](e);return e}},{key:"StripeService",get:function(){return i(ft["default"].prototype)}},{key:"StudentAssignmentService",get:function(){return i(xt["default"].prototype)}},{key:"StudentCacheService",get:function(){var e=i(Ge["default"].prototype);e.userRosterUpdated=new K["default"](e);return e}},{key:"SubscriptionService",get:function(){return i(pt["default"].prototype)}},{key:"ToolbarService",get:function(){return i(be["default"].prototype)}},{key:"UserService",get:function(){return i(I["default"].prototype)}},{key:"ABTestService",get:function(){return i(Et["default"].prototype)}},{key:"PlatformHeaderService",get:function(){var e=i(tn["default"].prototype);return e}}]);return e}();t.MockServices=nn;var rn=new nn,sn=function(){function e(){s(this,e)}r(e,null,[{key:"mockApp",value:function(){angular.mock.module("classkickApp",{BootstrapService:e.mockServices.BootstrapService,gapi:jasmine.createSpyObj("gapi",["load"])})}},{key:"createMock",value:function(e){return i(e)}},{key:"sequence",value:function(e){return a(new Array(e))}},{key:"randomInt",value:function(e,t){e=Math.ceil(e);t=Math.floor(t);return Math.floor(Math.random()*(t-e))+e}},{key:"generateRandomString",value:function(t,n){for(var i="",r=n||""+e.UppercaseLetters+e.LowercaseLetters+e.Digits,s=0;t>s;s++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}},{key:"randomElement",value:function(t,n){var i=void 0;if(0===t.length)return i;do i=t[e.randomInt(0,t.length)];while(t.length>1&&n&&n===i);return i}},{key:"assignment",value:function(t,n,i,r,s){return new x["default"](t||e.randomString,r||e.randomString,e.randomString,e.sequence(n||e.randomInt(2,5)).map(function(){return e.assignmentQuestion()}),e.randomString,void 0,moment(),i||e.sequence(e.randomInt(2,5)).map(function(){return e.randomString}),s||[],null,null)}},{key:"assignmentWork",value:function(t,n,i,r,s){var o=t||e.assignment();return new N["default"](o,n||e.randomString,i||e.randomString,r||e.randomString,s||new c(o.questions.map(function(t){return[t.id,e.assignmentWorkQuestion()]})))}},{key:"assignmentQuestion",value:function(t,n){return new P["default"](t||e.randomString,i(D["default"].prototype),n||e.randomInt(0,10))}},{key:"assignmentWorkQuestion",value:function(t,n,r){return new Dt["default"](t||e.randomString,i(D["default"].prototype),e.chatMessageList(),n||e.randomInt(0,10),void 0,r)}},{key:"assignmentWorkQuestionSet",value:function(t,n){return new te["default"](t,n||e.assignmentWorkNotification())}},{key:"assignmentWorkNotification",value:function(){var e=i(ie["default"].prototype);e.scoreUpdated=new K["default"](e);return e}},{key:"chatMessageList",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=i(yt["default"].prototype);n.messages=new de["default"];e.forEach(function(e){return n.messages._remoteAdd(e)});n.messagesRead=new de["default"];t.forEach(function(e){return n.messagesRead._remoteAdd(e)});return n}},{key:"roster",value:function(t,n,i,r,s,o,a){return new F["default"](t||e.randomString,n||e.randomString,i||e.randomString,e.randomString,angular.isDefined(r)?r:Math.random()<.5,angular.isDefined(s)?s:Math.random()<.5,angular.isDefined(o)?o:Math.random()<.5,a||{})}},{key:"googleCourse",value:function(){return{alternateLink:"http://classroom.google.com/c/MTE0NDY4NDA3NjBa",calendarId:"classroom108340530029797342260@group.calendar.google.com",courseGroupEmail:"Howdy_3_a42db900@classroom.google.com",courseState:"ACTIVE",creationTime:"2018-02-06T19:45:31.566Z",descriptionHeading:" Howdy  3",enrollmentCode:"sawamyk",guardiansEnabled:!1,id:"11446840760",name:" Howdy ",ownerId:"107054874837644759644",section:"3",teacherFolder:{id:"0B55R2l9QqgiNfkxOeERWN2NFYjRrZ25Tdml4UDVXTmF6OFduUzl6TldteDdzYkN2d2V5cUE",title:" Howdy  3",alternateLink:"https://drive.google.com/drive/folders/0B55R2l9QqgNFYjRrZ25Tdml4UDVXTmF6OFduUzl6TldteDdzYkN2d2V5cUE"},teacherGroupEmail:"Howdy_3_profesores_e19f13b0@classroom.google.com",updateTime:"2018-02-06T19:45:30.695Z"}}},{key:"googleStudents",value:function(){return{students:[{courseId:"10466681435",userId:"114935563174311379235",profile:{id:"114935563174311379235",name:{givenName:"Classkick",familyName:"Test",fullName:"Classkick Test"},emailAddress:"ckpdtest@gmail.com",permissions:[{permission:"CREATE_COURSE"}]}}]}}},{key:"classCode",value:function(t,n,i,r,s){return new $["default"](i||e.randomString,t||e.randomString,n||e.randomString,r||!0,s||!1)}},{key:"user",value:function(t,n,i,r,s,o,a){return new B["default"](t||e.randomString,n||e.randomString,i||e.randomString,r||e.randomString,s||e.randomString,o||e.randomString,moment().toISOString(),a,void 0,void 0,void 0)}},{key:"userStatusNotification",value:function(t,n){var r=i(se["default"].prototype);r.userId=t||e.randomString;r.status={};r.updated=new K["default"](r);r.loadOnce=function(){return n||{}};return r}},{key:"questionHelpers",value:function(t){return new ae["default"](e.helpersNotification(t))}},{key:"helpersNotification",value:function(t){var n=i(le["default"].prototype);n.ids=[t||e.randomString];n.helpers=new de["default"];return n}},{key:"helpRequests",value:function(t,n,i,r,s){return e.sequence(t).map(function(){var t=s;angular.isUndefined(t)&&(t=Math.random()<.5);var o=e.randomElement(n),a=e.randomElement(i),c=r?e.randomElement(r):void 0,l=c?c.id:void 0,u=t?{}:!1;if(t){var d=r?e.randomElement(r,c):void 0;u.helperId=s&&s.helperId||(d?d.id:void 0)}return e.helpRequest(o.id,e.randomElement(o.questions).id,a.id,l,void 0,u)})}},{key:"helpRequest",value:function(t,n,i,r,s,o){var a=o;angular.isUndefined(a)&&(a=Math.random()<.5);var c=void 0,l=void 0,u=void 0;if(o){c=o.time;l=o.helperId;u=o.helperRole}return new j["default"](e.randomString,r||e.randomString,i||e.randomString,t||e.randomString,n||e.randomString,s||Math.random()<.5?H.HelpRequestTypes.HELP:H.HelpRequestTypes.CHECK,moment(),c||a?moment():void 0,l||a?e.randomString:void 0,u||a?Math.random()<.5?q.UserRoles.STUDENT:q.UserRoles.TEACHER:void 0)}},{key:"rosterNotification",value:function(){var e=i(X["default"].prototype);e.userAdded=new K["default"](e);e.userRemoved=new K["default"](e);e.metadata=new K["default"](e);e.deleted=new K["default"](e);return e}},{key:"assignmentRosterNotification",value:function(){var e=i(Xe["default"].prototype);e.metadata=new K["default"](this);return e}},{key:"assignmentNotification",value:function(){var e=i(Z["default"].prototype);e.questionAdded=new K["default"](this);e.questionRemoved=new K["default"](this);e.questionUpdated=new K["default"](this);e.assignmentUpdated=new K["default"](this);e.assignmentDeleted=new K["default"](this);return e}},{key:"helpRequestSet",value:function(t,n,i){return new V["default"](t||[],e.helpRequestNotification(),n,i)}},{key:"helpRequestNotification",value:function(){var e=i(G["default"].prototype);e.created=new K["default"](e);e.resolved=new K["default"](e);e.canceled=new K["default"](e);return e}},{key:"userSticker",value:function(t,n,i,r,s){return new ye["default"](t||e.randomString,n||e.randomString,i||e.randomString,r||e.randomString,moment().toISOString(),s||[])}},{key:"assignmentExport",value:function(t,n,i){return new xe["default"](t||e.assignmentWork(),n||e.user(),i||e.classCode(),e.sequence(e.randomInt(2,5)).map(function(){return e.randomString}))}},{key:"userMessage",value:function(t,n,i,r,s,o,a,c){return new De["default"](t||e.randomString,n||e.randomString,i||e.randomString,r||e.randomString,s||e.randomString,o,a,c)}},{key:"ckRedirect",value:function(e,t){return new Fe["default"](e,t)}},{key:"rawNewContractStudents",value:function(){var t=arguments.length<=0||void 0===arguments[0]?5:arguments[0];return e.sequence(t).map(function(){return e.rawNewContractStudent()})}},{key:"rawNewContractStudent",value:function(t,n,i,r){return{id:t||e.randomString,password:n||e.randomString,first_name:i||e.randomString,last_name:r||e.randomString}}},{key:"contract",value:function(t,n,i,r,s){return new dt["default"](t||e.randomString,n||e.randomString,i||ut.ContractPlans.All[e.randomInt(0,1)],r||void 0,s||void 0)}},{key:"folder",value:function(t,n){return e.assignment(t,0,void 0,n)}},{key:"ckImageElement",value:function(t,n,i,r,s,o,a){return new tt["default"](t||e.randomString,n||e.elementMetadata(),i||e.point(),r||e.size(),s||1,o||0,a||e.randomString)}},{key:"fillInTheBlankParent",value:function(t,n,i,r,s){return new Pt["default"](t||e.randomString,n||e.elementMetadata(),i||e.point(),r||e.size(),s||e.sequence(3).map(function(){return e.fillInTheBlankAnswer()}))}},{key:"fillInTheBlankAnswer",value:function(t,n,i){return new Ot.FillInTheBlankAnswer(t||e.randomString,n||e.randomInt,i)}},{key:"elementMetadata",value:function(t,n,i){return new it["default"](t||e.randomString,n||q.UserRoles.TEACHER,i||nt.ElementIntents.CONTENT)}},{key:"point",value:function(t,n){return new st["default"](t||e.randomInt(0,1004),n||e.randomInt(0,2008))}},{key:"size",value:function(t,n){return new at["default"](t||e.randomInt(0,100),n||e.randomInt(0,100))}},{key:"subscription",value:function(t,n,i,r,s,o,a,c,l){return new lt["default"](t||e.randomString,n||e.randomString,i||e.randomString,r||ct.SubscriptionStatus.All[e.randomInt(0,ct.SubscriptionStatus.All.length-1)],s||e.randomString,o||!0,a||(new Date).toISOString(),c||(new Date).toISOString(),l||e.randomString,void 0)}},{key:"chatMessage",value:function(t,n,i,r,s,o){return new vt["default"](t||e.randomString,n||mt.ChatMessageTypes.MESSAGE,i||e.randomString,r||e.randomString,s||e.randomString,o||moment().toISOString())}},{key:"chatMessageRead",value:function(t,n,i){return new bt["default"](t||e.randomString,n||e.randomString,i||moment().toISOString())}},{key:"copyQuestionsRequest",value:function(t,n){return new wt["default"](t||e.randomString,n||[e.randomString])}},{key:"randomString",get:function(){return e.generateRandomString(12)}},{key:"UppercaseLetters",get:function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZ"}},{key:"LowercaseLetters",get:function(){return"abcdefghijklmnopqrstuvwxyz"}},{key:"Digits",get:function(){return"0123456789"}},{key:"mockServices",get:function(){return rn}},{key:"abTestSegment",get:function(){return new c([["ab-test","B"]])}}]);return e}();t["default"]=sn},function(e,t,n){e.exports={"default":n(658),__esModule:!0}},function(e,t,n){n(659);e.exports=n(26).Object.getOwnPropertyDescriptors},function(e,t,n){var i=n(24),r=n(660),s=n(63),o=n(66),a=n(126);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=s(e),i=o.f,c=r(n),l={},u=0;c.length>u;)a(l,t=c[u++],i(n,t));return l}})},function(e,t,n){var i=n(113),r=n(110),s=n(31),o=n(25).Reflect;e.exports=o&&o.ownKeys||function(e){var t=i.f(s(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(206)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i,o,a,c,l){r(this,e);this.$mdDialog=t;this._assignments=n.sort(this._sortFunc);this.searchTerm=null;this._filteredAssignments=null;this._selectedAssignmentIds=new s;this._cacheService=i;this._mixpanelService=o;this._staticContentService=c;this.$window=a;this.$q=l;this._loading=!1}e.$inject=["$mdDialog","assignments","CacheService","MixpanelService","$window","StaticContentService","$q"];i(e,[{key:"search",value:function(){var e=this;this.searchTerm&&this._assignments?!function(){var t=e.searchTerm.toLowerCase();e._filteredAssignments=e._assignments.filter(function(e){return e.name.toLowerCase().includes(t)})}():this._filteredAssignments=null}},{key:"toggleAssignment",value:function(e){this._selectedAssignmentIds.has(e.id)?this._selectedAssignmentIds["delete"](e.id):this._selectedAssignmentIds.add(e.id)}},{key:"export",value:function(){var e=this,t=this._assignments.filter(function(t){return e._selectedAssignmentIds.has(t.id)}).sort(this._sortFunc).map(function(e){return e.id});this._cleanAssignments();this.$mdDialog.hide(t)}},{key:"_cleanAssignments",value:function(){this._assignments.forEach(function(e){delete e.toggled})}},{key:"_sortFunc",value:function(e,t){var n=e.name.toUpperCase(),i=t.name.toUpperCase();return n.localeCompare(i)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"assignments",get:function(){return this._filteredAssignments||this._assignments}},{key:"loading",get:function(){return this._loading&&!this._assignments}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/assignment-selection-dialog/assignment-selection-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!0,locals:{assignments:n}})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(364),a=n(496),c=s(a),l=n(185),u=n(153),d=n(156),h=n(367),f=s(h),g=n(285),p=n(151),m=s(p),v=n(359),_=s(v),y=function(){function e(t,n,i,s,o,a,l,u,d,h,f,p,v,y,k){"ngInject";var b=this;r(this,e);this.$q=n;this.$stateParams=i;this.$state=s;this.$timeout=o;this.$mdDialog=a;this.$log=l;this._breadcrumbService=u;this._authService=d;this._cacheService=h;this._assignmentTrackingService=f;this._mixpanelService=p;this._toolbarService=v;this._assignmentWorkService=y;this._feedbackService=k;this.toolbarOptions=new g.AssignmentToolbarConfig;this.toolbarOptions.addSticker=!0;this.toolbarOptions.resolveHelp=!0;this.toolbarOptions.editScore=!0;this._savingIndicator=new c["default"](this.$timeout,this._assignmentTrackingService);this._assignmentWork=void 0;this._sessionData=void 0;this._assignmentQuestionConfig=void 0;this._helpDialog=_["default"].show;t.$on("$destroy",function(){return b._destroy()});this._firstFeedback=!0;this._handleTeacherActionDebounce=new m["default"](750,3e3,this._handleTeacherAction.bind(this),t);this._init()}e.$inject=["$scope","$q","$stateParams","$state","$timeout","$mdDialog","$log","BreadcrumbService","AuthService","CacheService","AssignmentTrackingService","MixpanelService","ToolbarService","AssignmentWorkService","FeedbackService"];i(e,[{key:"_init",value:function(){var e=this;this._cacheService.getSessionData(this.$stateParams.assignmentId,this.$stateParams.rosterId,!1,!0).then(function(t){e._sessionData=t;return e._getWork(e._sessionData.assignment,e.$stateParams.assignmentWorkId)}).then(function(t){e._assignmentWork=t;e._syncWorkQuestionScore();e._workQuestionSet=e.data.workQuestionSet(e.helpeeId);e._workQuestionSet.updated.subscribe(e._handleQuestionScoreUpdated,e);e._assignmentTrackingService.previewModified.subscribe(e._elementAddedOrUpdated,e);e._toolbarService.notification.subscribe(e._handleToolbarNotification,e);e._assignmentQuestionConfig=new o.AssignmentQuestionMetadata(e._assignmentWork,e.$stateParams.questionId,!1,!1,e.helperId,l.UserRoles.TEACHER,u.ElementIntents.FEEDBACK,void 0,e.data&&e.data.openHelpRequests,void 0,e.data.realOrAnonNameForStudent.bind(e.data))})["catch"](function(t){e.error=t})}},{key:"_getWork",value:function(e,t){var n=this;return this._cacheService.getAssignmentWork(e,t,!1).then(function(i){return e.questions.some(function(e){return!i.questionForId(e.id)})?n._cacheService.getAssignmentWork(e,t,!0):i})}},{key:"_syncWorkQuestionScore",value:function(){var e=this.data.workForStudent(this.helpeeId),t=e&&e.questionForId(this.$stateParams.questionId);t&&this._setScore(t.points)}},{key:"_handleQuestionScoreUpdated",value:function(){this._syncWorkQuestionScore()}},{key:"_handleToolbarNotification",value:function(e){var t=this;if(e.type===d.Notifications.UPDATE_SCORED_POINTS){this._savingIndicator.saveState=f["default"].UNSAVED;var n=this._setScore(e.data.newScore);this._assignmentWorkService.updateQuestion(this.$stateParams.assignmentId,this.assignmentWork.id,n).then(function(){t._savingIndicator.saveState=f["default"].SAVED;t._handleTeacherActionDebounce.tick()})["catch"](function(){t._savingIndicator.saveState=f["default"].SAVE_ERROR})}else e.type===d.Notifications.RESOLVE_REQUEST&&this._handleStatus()}},{key:"_setScore",value:function(e){var t=this.assignmentWork.questions.get(this.$stateParams.questionId);t.points=e;return t}},{key:"_elementAddedOrUpdated",value:function(e){this._isTeacherFeedback(e.element)&&this._handleTeacherActionDebounce.tick()}},{key:"_handleTeacherAction",value:function(){this._handleStatus();this._toolbarService.helpCenter.helpRequestManager.currentHelpRequest&&this._toolbarService.helpCenter.lowerHelpRequest()}},{key:"_handleStatus",value:function(){if(this._firstFeedback){this._cacheService.startHelping(this.assignmentWork.assignment,this.helperId,this.helper.name,l.UserRoles.TEACHER,this.helpeeId,this.$stateParams.assignmentId,this.$stateParams.questionId);this._firstFeedback=!1}this._feedbackService.give(this.helpeeId,this.assignmentWork,this.$stateParams.questionId,this.helperId,this.helper.name)}},{key:"_isTeacherFeedback",value:function(e){return e.metadata&&e.metadata.intent===u.ElementIntents.FEEDBACK&&e.metadata.role===l.UserRoles.TEACHER}},{key:"goBack",value:function(){this.error?this._breadcrumbService.goBack("root.account.home"):this._breadcrumbService.goBack(this.parentState,{assignmentId:this.assignmentWork.assignment.id,rosterId:this.assignmentWork.rosterId})}},{key:"onSelect",value:function(e){var t=this.data.workForStudent(e.helpeeId);this._breadcrumbService.go("^.feedback",{assignmentId:e.assignmentId,questionId:e.questionId,assignmentWorkId:t&&t.id})}},{key:"showHelp",value:function(){this._helpDialog(this.$mdDialog,v.ViewHelps.AssignmentTeacherFeedback)}},{key:"_destroy",value:function(){this._assignmentTrackingService&&this._assignmentTrackingService.previewModified.unsubscribe(this._elementAddedOrUpdated,this);this._toolbarService.notification&&this._toolbarService.notification.unsubscribe(this._handleToolbarNotification,this);this._workQuestionSet&&this._workQuestionSet.updated.unsubscribe(this._handleQuestionScoreUpdated,this);this._cacheService.stopHelping()}},{key:"saveState",get:function(){return this._savingIndicator&&this._savingIndicator.saveState}},{key:"data",get:function(){return this._sessionData}},{key:"assignmentWork",get:function(){return this._assignmentWork}},{key:"students",get:function(){return this.data&&this.data.sortedStudents}},{key:"helpInboxMetadata",get:function(){return this.data&&this.data.helpInboxMetadata}},{key:"helperId",get:function(){return this._authService.authData?this._authService.authData.id:""}},{key:"helper",get:function(){return this.data&&this.data.teacher}},{key:"helpeeId",get:function(){return this.assignmentWork&&this.assignmentWork.ownerId}},{key:"helpee",get:function(){var e=this;return this.helpeeId&&this.students&&this.students.find(function(t){return t.id===e.helpeeId})}},{key:"assignmentQuestionConfig",get:function(){return this._assignmentQuestionConfig}},{key:"teacherIsHelpingMessage",get:function(){if(this.helpee){var e=this.data.realOrAnonNameForStudent(this.helpee),t=this.assignmentWork.questionNumberForId(this.$stateParams.questionId);return"You are helping "+e+" on slide "+t}}},{key:"parentState",get:function(){try{return this.$state.$current.parent.self.name}catch(e){this.$log.error(e);return"root.account.home"}}}]);return e}();t["default"]=y;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(425)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(664),c=o(a),l=n(440),u=n(665),d=o(u),h=function(){function e(){r(this,e)}i(e,null,[{key:"NOTIFICATION_TEXT",get:function(){return"notification_text"}},{key:"RECEIVED",get:function(){return"received"}}]);return e}();t.UserNotificationsTableColumns=h;var f=function(){function e(t,n,i,s,o,a,c,l){"ngInject";var u=this;r(this,e);this.$scope=t;this.$state=i;this.$q=n;this._cacheService=a;this._assignmentService=c;this.$mdDialog=s;this.$mdSidenav=o;this._breadcrumbService=l;t.$on("$destroy",function(){return u._destroy()});this._loading=!0;this._error=void 0;this._list=[];this._messageSet=null;this._showNotificationTextColumn=!0;this._showReceivedColumn=!0;this._orderBy=h.RECEIVED;this._isAscending=!0;this.init()}e.$inject=["$scope","$q","$state","$mdDialog","$mdSidenav","CacheService","AssignmentService","BreadcrumbService"];i(e,[{key:"init",value:function(){var e=this;this._cacheService.getMessagesForUser().then(function(t){e._messageSet=t;e._messageSet.updated.subscribe(e._onMessagesUpdated,e);e._list=e._messageSet.messages.map(function(e){return new c["default"](e)});e._loading=!1})["catch"](function(t){e._error=t})}},{key:"removeUserNotificationListItem",value:function(e){this._messageSet["delete"](e.message.id)}},{key:"callToAction",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=s(e.message.actions);!(t=(r=o.next()).done);t=!0){var a=r.value;if(a[l.MessageActions.TYPE]===l.MessageActions.ACCEPT_ASSIGNMENT_SHARE){this.previewAssignment(a[l.MessageActions.ASSIGNMENT_ID]);return}}}catch(c){n=!0;i=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}}},{key:"previewAssignment",value:function(e){this._breadcrumbService.go("root.public-assignment",{assignmentId:e})}},{key:"showNotification",value:function(e){d["default"].show(this.$mdDialog,e,this);e.message.seenDate||this._messageSet.markAsSeen(e.message.id)}},{key:"setOrToggle",value:function(e,t){if(this._orderBy!==e){this._orderBy=e;this._isAscending=t}else this._isAscending=!this._isAscending}},{key:"orderBy",value:function(){var e=this;return function(t){return e._orderBy===h.NOTIFICATION_TEXT?t.message.text:e._orderBy===h.RECEIVED?t.message.createdDate.valueOf():void 0}}},{key:"setOrToggleNotificationText",value:function(){this.setOrToggle(h.NOTIFICATION_TEXT,!0)}},{key:"setOrToggleReceived",value:function(){this.setOrToggle(h.RECEIVED,!0)}},{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"_onMessagesUpdated",value:function(e){if(e.change===this._messageSet.ADD)this._list.push(new c["default"](e.message));else if(e.change===this._messageSet.DELETE){var t=this._list.findIndex(function(t){return t.message.id===e.message.id});this._list.splice(t,1)}}},{key:"_destroy",value:function(){this._messageSet.updated.unsubscribe(this._onMessagesUpdated,this)}},{key:"listIsEmpty",get:function(){return this._list?0===this._list.length:!0}},{key:"list",get:function(){return this._list}},{key:"loading",get:function(){return this._loading}},{key:"error",get:function(){return this._error}},{key:"showNotificationTextColumn",get:function(){return this._showNotificationTextColumn}},{key:"showReceivedColumn",get:function(){return this._showReceivedColumn}},{key:"showNotificationTextCarrot",get:function(){return this._orderBy===h.NOTIFICATION_TEXT}},{key:"showReceivedCarrot",get:function(){return this._orderBy===h.RECEIVED}},{key:"isAscending",get:function(){return this._isAscending}}]);return e}();t["default"]=f},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(425)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(440),a=function(){function e(t){r(this,e);this._message=t}i(e,[{key:"message",get:function(){return this._message}},{key:"callToActionTitle",get:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=s(this._message.actions);!(e=(i=r.next()).done);e=!0){var a=i.value;if(a[o.MessageActions.TYPE]===o.MessageActions.ACCEPT_ASSIGNMENT_SHARE)return"PREVIEW"}}catch(c){t=!0;n=c}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw n}}return"OK"}},{key:"deleteUserNotificationTitle",get:function(){return"DELETE"}}]);return e}();t["default"]=a;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});n(663);var s=function(){function e(t,n,i){"ngInject";r(this,e);this.$mdDialog=t;this.userNotificationListItem=n;this.parentController=i}e.$inject=["$mdDialog","userNotificationListItem","parentController"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"callToAction",value:function(){this.parentController.callToAction(this.userNotificationListItem);this.$mdDialog.hide()}},{key:"removeUserNotificationListItem",value:function(){this.parentController.removeUserNotificationListItem(this.userNotificationListItem);this.$mdDialog.hide()}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/components/user-notification-dialog/user-notification-dialog.html",controllerAs:"ctrl",locals:{userNotificationListItem:n,parentController:i},clickOutsideToClose:!0})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(286),a=s(o),c=n(501),l=s(c),u=n(274),d=s(u),h=n(214),f=s(h),g=n(656),p=s(g),m=function(){function e(t,n,i,s,o,c,l,u,h,g){"ngInject";var p=this;r(this,e);this.$scope=t;this.$state=n;this.$timeout=i;this.$mdSidenav=s;this.$mdDialog=o;this.$mdToast=c;this._authService=l;this._cacheService=u;this._userService=h;this._contractService=g;this.userId=null;this.userIdToDelete="";this._resetEmail="";this._resetNewEmail="";this._confirmDialog=a["default"].show;this._loadingDialog=d["default"].show;this._errorDialog=f["default"].show;angular.isDefined(this.$state.params.hideNavText)&&(this.hideNavText=this.$state.params.hideNavText);this._contracts=null;this._cacheService.getContracts().then(function(e){return p._contracts=e})}e.$inject=["$scope","$state","$timeout","$mdSidenav","$mdDialog","$mdToast","AuthService","CacheService","UserService","ContractService"];i(e,[{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"signInAsOther",value:function(){var e=this;if(this.userId){this.$scope.signInAsOtherForm.userId.$setValidity("fail",!0);this._authService.authAsOther(this.userId).then(function(){return e.reloadParent()})["catch"](function(){e.$scope.signInAsOtherForm.userId.$setValidity("fail",!1)})}}},{key:"signOutAsOther",value:function(){var e=this;return this._authService.unauthAsOther().then(function(){return e.reloadParent()})}},{key:"reloadParent",value:function(){return this.$state.go(this.$state.current,{hideNavText:this.hideNavText},{reload:"root.account.nav"})}},{key:"deleteUser",value:function(){var e=this;if(this.userIdToDelete){this.$scope.deleteUserForm.userIdToDelete.$setValidity("fail",!0);this.$scope.deleteUserForm.userIdToDelete.$setValidity("notfound",!0);this._userService.find(this.userIdToDelete).then(function(t){return e._confirmDialog(e.$mdDialog,"Anna, are you sure you wanna do this? &#x1F605;").then(function(){return t})}).then(function(t){var n=e._userService["delete"](t.id).then(function(){return t});e._loadingDialog(e.$mdDialog,n);return n}).then(function(t){var n=e.$mdToast.simple().textContent("Deleted "+t.name).position("bottom right");e.$mdToast.show(n)})["catch"](function(t){t&&t.code===l["default"].NOT_FOUND?e.$scope.deleteUserForm.userIdToDelete.$setValidity("notfound",!1):t&&e._errorDialog(e.$mdDialog,""+t.message)})}}},{key:"deleteContract",value:function(e){var t=this;this._confirmDialog(this.$mdDialog,"This will remove ALL teachers and students from "+e.name+" and delete the contract.\n\nIsla, are you sure you wanna do this? &#x1F605;").then(function(){t._authService.unauthAsOther()}).then(function(){return t._contractService.deleteContract(e.id)}).then(function(){return t.reloadParent()})["catch"](function(e){e&&e.code===l["default"].NOT_FOUND?t.$scope.deleteUserForm.userIdToDelete.$setValidity("notfound",!1):e&&t._errorDialog(t.$mdDialog,""+e.message)})}},{key:"resetUserPassword",value:function(){var e=this,t=p["default"].generateRandomString(6,""+p["default"].LowercaseLetters+p["default"].Digits),n=this._userService.changeAuthEmail(this._resetEmail.trim(),t,this._resetNewEmail.trim());this._loadingDialog(this.$mdDialog,n);n.then(function(){e._resetSuccess(e._resetEmail,t,e._resetNewEmail)})["catch"](function(n){var i=[{text:"Yes",action:f["default"].CONFIRM},{text:"No",action:f["default"].CANCEL}];e._errorDialog(e.$mdDialog,"Whoops, there was an error",n.message+". Would you like to reset their password anyway?",i).then(function(){e._userService.setPassword(e._resetEmail,t).then(function(){e._resetSuccess(e._resetEmail,t,e._resetNewEmail)})["catch"](function(t){e._errorDialog(e.$mdDialog,"Whoops, there was an error",""+t.message)})})})}},{key:"_resetSuccess",value:function(e,t,n){var i=n?e+"'s account email has been changed to "+n:e+"'s account has been updated",r="The new password is "+t;this._confirmDialog(this.$mdDialog,i,r,!0)}},{key:"adminUserId",get:function(){return this.signedInAsOther?this._authService.adminAuthData.email||this._authService.adminAuthData.username:this.currentUserId}},{key:"currentUserId",get:function(){return this._authService.authData&&(this._authService.authData.email||this._authService.authData.username);
}},{key:"signedInAsOther",get:function(){return!!this._authService.adminAuthData}},{key:"hideNavText",get:function(){return this.$scope.$parent.hideAdminTabText},set:function(e){this.$scope.$parent.hideAdminTabText=e}},{key:"contracts",get:function(){return this._contracts}},{key:"resetEmail",get:function(){return this._resetEmail},set:function(e){this._resetEmail=e}},{key:"resetNewEmail",get:function(){return this._resetNewEmail},set:function(e){this._resetNewEmail=e}}]);return e}();t["default"]=m;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(206)["default"],a=n(121)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(668),u=c(l),d=n(655),h=c(d),f=n(669),g=c(f),p=n(286),m=c(p),v=n(214),_=c(v),y=function(){function e(){r(this,e)}i(e,null,[{key:"FIRST_NAME",get:function(){return"first name"}},{key:"LAST_NAME",get:function(){return"last name"}},{key:"EMAIL",get:function(){return"email"}},{key:"ROLE",get:function(){return"role"}},{key:"VERIFIED",get:function(){return"verified"}}]);return e}();t.ContractUsersListColumns=y;var k=function(){function e(t,n,i,s,a,c,l,d,f,p,v,k,b){"ngInject";r(this,e);this.$q=t;this.$location=n;this.$state=i;this.$stateParams=s;this.$mdDialog=a;this.$mdSidenav=c;this.$log=l;this.$mdToast=d;this._authService=f;this._cacheService=p;this._contractService=v;this._breadcrumbService=k;this._organizationService=b;this._contractId=s.contractId;this._adminContracts=[];this._selectedContract=null;this._loading=!0;this._error=void 0;this._showFirstName=!0;this._showLastName=!0;this._showEmail=!0;this._showRole=!0;this._showVerified=!1;this._orderBy=y.LAST_NAME;this._isAscending=!0;this._inviteTeacherDialog=u["default"].show;this._createContractStudentsDialog=h["default"].show;this._verifyOrganizationMemberDialog=g["default"].show;this._confirmDialog=m["default"].show;this._errorDialog=_["default"].show;this._query="";this._roleFilter=void 0;this._rolesPresentInList=new o;this._verifyUserId=this.$stateParams.verifyUserId;this._init()}e.$inject=["$q","$location","$state","$stateParams","$mdDialog","$mdSidenav","$log","$mdToast","AuthService","CacheService","ContractService","BreadcrumbService","OrganizationService"];i(e,[{key:"_init",value:function(){var e=this;this._loading=!0;this._contractId?this.$q.all({userMap:this._cacheService.getUsersForContract(this._contractId,!0),schools:this._cacheService.getSchools(),contracts:this._cacheService.getContracts()}).then(function(t){var n=t.userMap,i=t.schools,r=t.contracts;if(!e._authService.authData.isContractAdmin(e._contractId))throw new Error(e.currentUserIsNotAdminError);e._adminContracts=r.filter(function(t){return t.isPro&&e._authService.authData.isContractAdmin(t.id)});e._selectedContract=r.find(function(t){return t.id===e._contractId});e._users=a(n.values());e._school=i.find(function(t){return t.contractId===e._contractId});e._showVerified=!!e._school;var s=e._users.find(function(t){return t.id===e._verifyUserId});e._verifyUserId&&!e._school?e._errorDialog(e.$mdDialog,"Uh oh! An error occurred trying to verify this user for your organization","Please try again and if you continue to see this issue reach out to support@classkick.com"):e._verifyUserId&&!s?e._errorDialog(e.$mdDialog,"Uh oh! It looks like the user your are trying to verify is no longer a member of this organization","If you have any questions, please reach out to support@classkick.com"):e._verifyUserId&&e._school.isVerifiedFor(s.id)?e._confirmDialog(e.$mdDialog,s.name+" has already been verified as a member of "+e._school.name,'If you would like to remove them from your organization, click the "more options" button next to their name and "remove from organization"',!0).then(function(){return e._clearQueryParams()}):e._verifyUserId&&e._verifyOrganizationMemberDialog(e.$mdDialog,s,e._school).then(function(t){e._clearQueryParams();t===!0?e._verifyMember(s):t===!1&&e._removeMemberFromOrganization(s)});e._loading=!1})["catch"](function(t){e.$log.error("#init",t);e._error=t;e._loading=!1}):this.$q.resolve(this._cacheService.getContracts()).then(function(t){e._adminContracts=t.filter(function(t){return t.isPro&&e._authService.authData.isContractAdmin(t.id)});if(!e._adminContracts.length)throw new Error(e.currentUserIsNotAdminError);e.selectContract(e._adminContracts[0])})["catch"](function(t){e.$log.error("#init",t);e._error=t;e._loading=!1})}},{key:"_clearQueryParams",value:function(){this.$location.search({});this._verifyUserId=void 0}},{key:"roleForUser",value:function(e){if(e.isStudent){var t="Student";this&&this._rolesPresentInList.add(t);return t}if(e.isTeacher){var n="Teacher";this&&this._rolesPresentInList.add(n);return n}return""}},{key:"showUserBasedOnRoleFilter",value:function(e){return this.roleFilter?this.roleForUser(e).toLowerCase()===this.roleFilter.toLowerCase():!0}},{key:"editUser",value:function(e){this._breadcrumbService.go("root.account.contract-user",{contractId:this.$stateParams.contractId,userId:e})}},{key:"searchFilter",value:function(){var e=this.query,t=this.roleForUser;return function(n){if(e.length>0){var i=void 0,r=void 0,s=void 0,o=void 0;n.firstName&&n.lastName&&(i=n.firstName.toLowerCase().indexOf(e.toLowerCase())>-1||n.lastName.toLowerCase().indexOf(e.toLowerCase())>-1);n.email&&(r=n.email.toLowerCase().indexOf(e.toLowerCase())>-1);n.username&&(s=n.username.toLowerCase().indexOf(e.toLowerCase())>-1);o=t(n).toLowerCase().indexOf(e.toLowerCase())>-1;return i||r||s||o}return!0}}},{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"setOrToggle",value:function(e,t){if(this._orderBy!==e){this._orderBy=e;this._isAscending=t}else this._isAscending=!this._isAscending}},{key:"setOrToggleFirstName",value:function(){this.setOrToggle(y.FIRST_NAME,!0)}},{key:"setOrToggleLastName",value:function(){this.setOrToggle(y.LAST_NAME,!0)}},{key:"setOrToggleEmail",value:function(){this.setOrToggle(y.EMAIL,!0)}},{key:"setOrToggleRole",value:function(){this.setOrToggle(y.ROLE,!0)}},{key:"setOrToggleVerified",value:function(){this.setOrToggle(y.VERIFIED,!0)}},{key:"orderBy",value:function t(){var t=this._orderBy,e=this.roleForUser,n=this.isUnverified.bind(this);return function(i){return y.FIRST_NAME===t?i.firstName?i.firstName.toLowerCase():"":y.LAST_NAME===t?i.lastName?i.lastName.toLowerCase():"":y.EMAIL===t?i.email?i.email.toLowerCase():i.username.toLowerCase():y.ROLE===t?e(i):y.VERIFIED===t?n(i):void 0}}},{key:"addTeacher",value:function(){this._inviteTeacherDialog(this.$mdDialog,this._contractId)}},{key:"addStudent",value:function(){var e=this;this._createContractStudentsDialog(this.$mdDialog,this._contractId).then(function(t){t&&e._init()})}},{key:"verify",value:function(e){var t=this;this._verifyOrganizationMemberDialog(this.$mdDialog,e,this._school).then(function(n){n===!0?t._verifyMember(e):n===!1&&t._removeMemberFromOrganization(e)})}},{key:"verifiedDisplay",value:function(e){return this.isUnverified(e)?"No":"Yes"}},{key:"isUnverified",value:function(e){return e.isStudent?!1:this._school?!this._school.isVerifiedFor(e.id):!1}},{key:"removeUserFromOrganization",value:function(e){var t=this;this._confirmDialog(this.$mdDialog,"Are you sure you want to remove "+e.name+" from this organization?","This account will still exist for individual use.").then(function(){t._school?t._removeMemberFromOrganization(e):t._removeMemberFromContract(e)})}},{key:"_removeMemberFromOrganization",value:function(e){var t=this;return this._organizationService.removeMember(this._school.id,e.id).then(function(){t._init();t._toast("Removed "+e.name)})}},{key:"_removeMemberFromContract",value:function(e){var t=this;this._contractService.removeUser(this._contractId,e.id).then(function(){t._init();t._toast("Removed "+e.name)})}},{key:"_verifyMember",value:function(e){var t=this;return this._organizationService.verifyMember(this._school.id,e.id,!0).then(function(){t._school.markVerifiedFor(e.id);t._toast("Verified "+e.name)})["catch"](function(){t._errorDialog(t.$mdDialog,"Uh oh! An error occurred trying to verify this user for your organization","Make sure this user is a member of "+t._school.name+" in "+t._school.displayLocation+". If you continue to see this issue reach out to support@classkick.com.")})}},{key:"_toast",value:function(e){var t=this.$mdToast.simple().textContent(e).position("bottom right");this.$mdToast.show(t)}},{key:"selectContract",value:function(e){e.id!==this._contractId&&this.$state.go("^.contract-users",{contractId:e.id})}},{key:"errorMessage",get:function(){return this._error&&this._error.message===this.currentUserIsNotAdminError?"In order to view/edit the pro users on a contract, you must be a contract admin.":"Sorry, there was a problem loading the users for this contract"}},{key:"currentUserIsNotAdminError",get:function(){return"currentUserIsNotAdminError"}},{key:"roles",get:function(){return[].concat(s(this._rolesPresentInList))}},{key:"roleFilter",get:function(){return this._roleFilter},set:function(e){this._roleFilter=e}},{key:"query",get:function(){return this._query},set:function(e){this._query=e}},{key:"showFirstName",get:function(){return this._showFirstName}},{key:"showLastName",get:function(){return this._showLastName}},{key:"showEmail",get:function(){return this._showEmail}},{key:"showRole",get:function(){return this._showRole}},{key:"showVerified",get:function(){return this._showVerified}},{key:"loading",get:function(){return this._loading}},{key:"error",get:function(){return this._error}},{key:"isAscending",get:function(){return this._isAscending}},{key:"showFirstNameCarrot",get:function(){return this._orderBy===y.FIRST_NAME}},{key:"showLastNameCarrot",get:function(){return this._orderBy===y.LAST_NAME}},{key:"showEmailCarrot",get:function(){return this._orderBy===y.EMAIL}},{key:"showRoleCarrot",get:function(){return this._orderBy===y.ROLE}},{key:"showVerifiedCarrot",get:function(){return this._orderBy===y.VERIFIED}},{key:"saveMessage",get:function(){return this._saveMessage}},{key:"USERS_HELPER_LIMIT",get:function(){return 10}},{key:"users",get:function(){return this._users}},{key:"currentUserId",get:function(){return this._authService&&this._authService.currentUserId}}]);return e}();t["default"]=k},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(404),a=s(o),c=function(){function e(t,n,i,s){r(this,e);this.$mdDialog=t;this._inviteCodeService=n;this._proInviteCode="";this._contractId=s;this._loading=!0;this._absBaseUrl=a["default"].absRootUrl(i)+"/#/account/login";this._currentBaseUrl=a["default"].displayUrl(this._absBaseUrl);this.init()}e.$inject=["$mdDialog","InviteCodeService","$location","contractId"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"init",value:function(){var e=this;this._inviteCodeService.createInviteCode(this._contractId).then(function(t){e._proInviteCode=t.code;e._loading=!1})}},{key:"loading",get:function(){return this._loading}},{key:"proInviteCode",get:function(){return this._proInviteCode}},{key:"currentBaseUrl",get:function(){return this._currentBaseUrl}},{key:"absBaseUrl",get:function(){return this._absBaseUrl}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/invite-teacher-dialog/invite-teacher-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!0,locals:{contractId:n}})}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){r(this,e);this.$mdDialog=t;this._member=n;this._organization=i}e.$inject=["$mdDialog","member","organization"];i(e,[{key:"verify",value:function(){this.$mdDialog.hide(!0)}},{key:"remove",value:function(){this.$mdDialog.hide(!1)}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"memberName",get:function(){return this._member&&this._member.name}},{key:"memberEmail",get:function(){return this._member&&this._member.email}},{key:"organizationName",get:function(){return this._organization&&this._organization.name}},{key:"organizationType",get:function(){return this._organization&&this._organization.type}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/components/verify-organization-member-dialog/verify-organization-member-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,locals:{member:n,organization:i}})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(214),a=s(o),c=n(522),l=(s(c),n(519)),u=(s(l),function(){function e(t,n,i,s,o,c,l,u,d,h,f){"ngInject";r(this,e);this.$q=t;this.$location=n;this.$state=s;this.$stateParams=i;this.$mdSidenav=o;this.$log=c;this._authService=l;this._cacheService=u;this._organizationService=f;this._contractService=d;this._breadcrumbService=h;this._organizationOverview=void 0;this._contractId=i.contractId;this._adminContracts=[];this._selectedContract=null;this._loading=!0;this._error=void 0;this._errorDialog=a["default"].show;this._init()}e.$inject=["$q","$location","$stateParams","$state","$mdSidenav","$log","AuthService","CacheService","ContractService","BreadcrumbService","OrganizationService"];i(e,[{key:"_init",value:function(){var e=this;this._loading=!0;this._contractId?this.$q.all({schools:this._cacheService.getSchools(),contracts:this._cacheService.getContracts()}).then(function(t){var n=t.schools,i=t.contracts;if(!e._authService.authData.isContractAdmin(e.$stateParams.contractId))throw new Error(e.currentUserIsNotAdminError);e._school=n.find(function(t){return t.contractId===e._contractId});e._adminContracts=i.filter(function(t){return t.isPro&&e._authService.authData.isContractAdmin(t.id)});e._selectedContract=i.find(function(t){return t.id===e._contractId});e._loading=!1;return e._school?e._organizationService.getOverview(e._school.id):void 0}).then(function(t){e._organizationOverview=t})["catch"](function(t){e.$log.error("#init",t);e._error=t;e._loading=!1}):this.$q.resolve(this._cacheService.getContracts()).then(function(t){e._adminContracts=t.filter(function(t){return t.isPro&&e._authService.authData.isContractAdmin(t.id)});if(!e._adminContracts.length)throw new Error(e.currentUserIsNotAdminError);e.selectContract(e._adminContracts[0])})["catch"](function(t){e.$log.error("#init",t);e._error=t;e._loading=!1})}},{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"selectContract",value:function(e){e.id!==this._contractId&&this.$state.go("^.metrics",{contractId:e.id})}},{key:"errorMessage",get:function(){return this._error&&this._error.message===this.currentUserIsNotAdminError?"In order to view the organization usage metrics on a contract, you must be a contract admin.":"Sorry, there was a problem loading the metrics for this contract"}},{key:"currentUserIsNotAdminError",get:function(){return"currentUserIsNotAdminError"}},{key:"organizationOverview",get:function(){return this._organizationOverview}},{key:"loading",get:function(){return this._loading}},{key:"error",get:function(){return this._error}},{key:"currentUserId",get:function(){return this._authService&&this._authService.currentUserId}}]);return e}());t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(672),c=o(a),l=n(151),u=o(l),d=n(274),h=o(d),f=n(214),g=o(f),p=n(673),m=o(p),v=n(674),_=function(){function e(t,n,i,s,o,a,c,l,d,f,p,_,y){"ngInject";var k=this;r(this,e);this.$q=t;this.$timeout=n;this.$state=i;this.$mdDialog=o;this.$mdPanel=a;this.$document=c;this.$mdSidenav=l;this._studentCacheService=d;this._storageService=f;this._assignmentWorkService=p;this._notificationService=_;this._feedbackService=y;this._loadingDialog=h["default"].show;this._errorDialog=g["default"].show;this._enterCodeDialog=m["default"].show;this._feedbackMenu=v.FeedbackMenuController.show;this._folders=null;this._filteredFolders=null;this.searchTerm=null;this._sort=null;this._error=null;this._measureDebouncer=new u["default"](100,5e3,function(){return k._measureSections()},s);this._anonOnAssignmentRosterUpdated=function(){return k._measureDebouncer.tick()};this._studentCacheService.userRosterUpdated.subscribe(this._onUserRosterUpdated,this);this.sort=this.SORT_NAME_ASC;s.$on("$destroy",function(){return k._destroy()});this.init()}e.$inject=["$q","$timeout","$state","$scope","$mdDialog","$mdPanel","$document","$mdSidenav","StudentCacheService","StorageService","AssignmentWorkService","NotificationService","FeedbackService"];i(e,[{key:"init",value:function(){var e=this,t=this._storageService.studentFolderStatus||{};return this.$q.all({rostersAndOwners:this._studentCacheService.getUserRostersAndOwners(),assignmentsAndWork:this._studentCacheService.getUserAssignmentsAndWorks()}).then(function(n){e._folders&&e._folders.forEach(function(e){e.assignments.forEach(function(e){e.stop()})});e._folders=[].concat(s(n.rostersAndOwners.rosters.values())).map(function(i){return c["default"].fromData(i,n.rostersAndOwners.rosterOwners,n.assignmentsAndWork.assignments,n.assignmentsAndWork.works,n.assignmentsAndWork.assignmentRosters,e._anonOnAssignmentRosterUpdated,angular.isUndefined(t[i.id])?!0:!!t[i.id],e._notificationService,e._assignmentWorkService,e._feedbackService)});e._folders.sort(function(e,t){return e.title.localeCompare(t.title)});var i=[].concat(s(n.assignmentsAndWork.works.values())).filter(function(e){var t=n.rostersAndOwners.rosters.has(e.rosterId),i=e.assignment.rosters.includes(e.rosterId),r=e.assignmentRoster&&e.assignmentRoster.hideStudentWork;return!(t&&i||r)});i.length>0&&e._folders.push(c["default"].orphaned(i,n.assignmentsAndWork.assignmentRosters,e._anonOnAssignmentRosterUpdated,t,e._notificationService,e._assignmentWorkService,e._feedbackService));e.sort=e.sort;e._measureDebouncer.tick()})["catch"](function(t){e._error=t})}},{key:"search",value:function(){var e=this;if(this.searchTerm){this._filteredFolders=this._folders.map(function(t){return t.filter(e.searchTerm)}).filter(function(e){return null!==e});this._measureDebouncer.tick()}else this._filteredFolders=null}},{key:"_measureSections",value:function(){this.folders.forEach(function(e){e.maxHeight=angular.element(".student-assignments-list .accordion."+e.id+" .body md-list").height()+"px"})}},{key:"goToWork",value:function(e,t,n){var i=this,r=this.$q.resolve(t.assignment);if(!t.isWork){r=this._studentCacheService.createWork(t.assignment,e.roster).then(function(e){t.assignment=e;return e});r=this._loadingDialog(this.$mdDialog,r,this.$document,".student-assignments-list md-content.body")}r.then(function(e){return i.$q.all({assignment:i._assignmentWorkService.getAssignment(e.id),work:e})}).then(function(e){var t=e.work;i.$state.go("root.account.student-assignment-work",{assignmentWorkId:t.id,questionId:n||t.assignment.questionIdForIndex(0)})})["catch"](function(){i._errorDialog(i.$mdDialog,"There was a problem opening your assignment","")})}},{key:"toggleFolder",value:function(e){var t=this;e.toggleOpen();this.searchTerm||!function(){var e={};t.folders.forEach(function(t){return e[t.id]=t.open});t._storageService.studentFolderStatus=e}()}},{key:"sortByName",value:function(){this.sort===this.SORT_NAME_ASC?this.sort=this.SORT_NAME_DESC:this.sort=this.SORT_NAME_ASC}},{key:"sortByScore",value:function(){this.sort===this.SORT_SCORE_ASC?this.sort=this.SORT_SCORE_DESC:this.sort=this.SORT_SCORE_ASC}},{key:"sortByFeedback",value:function(){this.sort===this.SORT_FEEDBACK_ASC?this.sort=this.SORT_FEEDBACK_DESC:this.sort=this.SORT_FEEDBACK_ASC}},{key:"_onUserRosterUpdated",value:function(){var e=this;this.init().then(function(){e.search()})}},{key:"_destroy",value:function(){this._studentCacheService.userRosterUpdated.unsubscribe(this._onUserRosterUpdated,this)}},{key:"openFeedbackMenu",value:function(e,t,n){var i=this;this._feedbackMenu(this.$mdPanel,this.$q,e,n.questionFeedbackList,n.assignment).then(function(e){var r=e.questionId;i.goToWork(t,n,r)})}},{key:"enterCode",value:function(){this._enterCodeDialog(this.$mdDialog)}},{key:"toggleSidenav",value:function(){this.$mdSidenav("nav").toggle()}},{key:"loading",get:function(){return!this.error&&null===this.folders}},{key:"error",get:function(){return!!this._error}},{key:"sort",get:function(){return this._sort},set:function(e){this._sort=e;this._folders&&this._folders.forEach(function(t){return t.sort(e)})}},{key:"folders",get:function(){return this.searchTerm?this._filteredFolders:this._folders}},{key:"SORT_NAME_ASC",get:function(){return c["default"].SORT_NAME_ASC}},{key:"SORT_NAME_DESC",get:function(){return c["default"].SORT_NAME_DESC}},{key:"SORT_SCORE_ASC",get:function(){return c["default"].SORT_SCORE_ASC}},{key:"SORT_SCORE_DESC",get:function(){return c["default"].SORT_SCORE_DESC}},{key:"SORT_FEEDBACK_ASC",get:function(){return c["default"].SORT_FEEDBACK_ASC}},{key:"SORT_FEEDBACK_DESC",get:function(){return c["default"].SORT_FEEDBACK_DESC}}]);return e}();t["default"]=_;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(172)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(186),l=a(c),u={};u.SORT_NAME_ASC=function(e,t){return l["default"].NAME_ASC(e.name,t.name)};u.SORT_NAME_DESC=function(e,t){return l["default"].NAME_DESC(e.name,t.name)};u.SORT_SCORE_ASC=function(e,t){var n=e.totalPercentage,i=t.totalPercentage;return l["default"].NUMERIC_UNDEFINED_ASC(n,i)};u.SORT_SCORE_DESC=function(e,t){var n=e.totalPercentage,i=t.totalPercentage;return l["default"].NUMERIC_UNDEFINED_DESC(n,i)};u.SORT_FEEDBACK_ASC=function(e,t){var n=e.feedbackCount,i=t.feedbackCount;return l["default"].NUMERIC_UNDEFINED_ASC(n,i)};u.SORT_FEEDBACK_DESC=function(e,t){var n=e.feedbackCount,i=t.feedbackCount;return l["default"].NUMERIC_UNDEFINED_DESC(n,i)};var d=function(){function e(t,n,i,s,o,a,c){r(this,e);this._assignment=t;this._roster=n;this._assignmentRoster=i;this._onAssignmentRosterUpdated=s;this._notificationService=o;this._assignmentWorkService=a;this._feedbackService=c;this._showStudentScores=this._assignmentRoster?this._assignmentRoster.showStudentScores:!1;this._hideStudentWork=this._assignmentRoster?this._assignmentRoster.hideStudentWork:!1;this._assignmentRosterNotification=this._notificationService.getAssignmentRosterNotification(this._assignment.isWork?this._assignment.assignment:this._assignment,this.rosterId,!1);this._assignmentRosterNotification.metadata.subscribe(this._handleAssignmentRosterMetadataUpdated,this);this._init()}i(e,[{key:"_init",value:function(){if(this.isWork){this._workQuestionSet=this._assignmentWorkService.getAssignmentWorkQuestionSet(this._assignment);this._questionFeedbackList=this._feedbackService.getQuestionFeedbackList(this._assignment.ownerId,this._assignment)}}},{key:"_handleAssignmentRosterMetadataUpdated",value:function(e){if(this.isWork){this._assignment.classCode.showStudentScores=e.showStudentScores;this._assignment.classCode.hideStudentWork=e.hideStudentWork}if(this._assignmentRoster){this._assignmentRoster.showStudentScores=e.showStudentScores;this._assignmentRoster.hideStudentWork=e.hideStudentWork}this._showStudentScores=e.showStudentScores;this._hideStudentWork=e.hideStudentWork;this._onAssignmentRosterUpdated()}},{key:"start",value:function(){this._assignmentRosterNotification.start();if(this.isWork){this._workQuestionSet.start();this._questionFeedbackList.start()}}},{key:"stop",value:function(){this._assignmentRosterNotification.stop();if(this.isWork){this._workQuestionSet.stop();this._questionFeedbackList.stop()}}},{key:"showStudentScores",get:function(){return this._showStudentScores}},{key:"hideStudentWork",get:function(){return this._hideStudentWork}},{key:"assignmentId",get:function(){return this.isWork?this._assignment.assignment.id:this._assignment.id}},{key:"rosterId",get:function(){return this._roster?this._roster.id:this.isWork?this._assignment.rosterId:""}},{key:"name",get:function(){return this.isWork?this._assignment.assignment.name:this._assignment.name}},{key:"isWork",get:function(){return this._assignment.isWork}},{key:"lastUpdated",get:function(){return this.isWork?this._assignment.assignment.lastModified:this._assignment.lastModified}},{key:"lastUpdatedDisplay",get:function(){return this.lastUpdated.fromNow()}},{key:"studentTotalScoreDisplay",get:function(){var e=this.studentTotalScore,t=this.totalPotentialPoints;return 0===e&&0===t?"":e+"/"+t+" Pts"}},{key:"studentTotalScore",get:function(){return this.isWork&&this._workQuestionSet?this._workQuestionSet.hasScore?this._workQuestionSet.totalPoints:"--":0}},{key:"totalPotentialPoints",get:function(){var e=this.isWork?this._assignment.assignment:this._assignment;return e.totalPotentialPoints()}},{key:"totalPercentage",get:function(){return this.isWork&&this.showStudentScores?this._workQuestionSet.totalPercentage:void 0}},{key:"assignment",get:function(){return this._assignment},set:function(e){this._assignment=e;this._init()}},{key:"questionFeedbackList",get:function(){return this._questionFeedbackList}},{key:"feedbackCount",get:function(){return this.questionFeedbackList&&this.questionFeedbackList.feedbacks.size}}]);return e}();t.StudentAssignmentItem=d;var h=function(){function e(t,n,i){var s=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];r(this,e);this._roster=t;this._rosterOwner=n;this._assignments=i;this._id=t?t.id:"orphaned";this._title=t?this._rosterOwner.name+" - "+this._roster.name:"Old Work";this.open=s;this._maxHeight="1000px"}i(e,[{key:"toggleOpen",value:function(){this.open=!this._open}},{key:"sort",value:function(e){this.assignments.sort(e)}},{key:"filter",value:function(t){var n=t.toLocaleLowerCase();if(this.title.toLocaleLowerCase().includes(n))return new e(this._roster,this._rosterOwner,this._assignments,!0);var i=this._assignments.filter(function(e){return e.name.toLocaleLowerCase().includes(n)});return i.length>0?new e(this._roster,this._rosterOwner,i,!0):null}},{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}},{key:"assignments",get:function(){return this._assignments}},{key:"visibleAssignments",get:function(){return this.assignments.filter(function(e){return!e.hideStudentWork})}},{key:"open",set:function(e){e?this.assignments.forEach(function(e){e.start()}):this.assignments.forEach(function(e){e.stop()});this._open=e},get:function(){return this._open}},{key:"closed",get:function(){return!this.open}},{key:"height",get:function(){return this.closed?"0":this._maxHeight}},{key:"maxHeight",set:function(e){this._maxHeight=e}},{key:"roster",get:function(){return this._roster}}],[{key:"fromData",value:function(t,n,i,r,a,c,l,u,h,f){void 0===l&&(l=!1);var g=new o([].concat(s(r.values())).filter(function(e){return e.rosterId===t.id&&e.assignment.rosters.includes(e.rosterId)}).map(function(e){var n=a.get(e.assignmentId+t.id);return[e.assignment.id,new d(e,t,n,c,u,h,f)]}));[].concat(s(i.values())).filter(function(e){return!g.has(e.id)&&e.rosters.includes(t.id)}).forEach(function(e){var n=a.get(e.id+t.id);g.set(e.id,new d(e,t,n,c,u,h,f))});return new e(t,n.get(t.ownerId),[].concat(s(g.values())),l)}},{key:"orphaned",value:function(t,n,i,r,s,o,a){void 0===r&&(r={});return new e(null,null,t.map(function(e){var t=n.get(e.assignmentId+e.rosterId);return new d(e,void 0,t,i,s,o,a)}),!!r.orphaned)}},{key:"SORT_NAME_ASC",get:function(){return u.SORT_NAME_ASC}},{key:"SORT_NAME_DESC",get:function(){return u.SORT_NAME_DESC}},{key:"SORT_SCORE_ASC",get:function(){return u.SORT_SCORE_ASC}},{key:"SORT_SCORE_DESC",get:function(){return u.SORT_SCORE_DESC}},{key:"SORT_FEEDBACK_ASC",get:function(){return u.SORT_FEEDBACK_ASC}},{key:"SORT_FEEDBACK_DESC",get:function(){return u.SORT_FEEDBACK_DESC}}]);return e}();t["default"]=h},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i,s,o,a,c,l){r(this,e);this.$q=t;this.$state=n;this.$mdDialog=i;this._classCodeService=s;this._studentCacheService=o;this._rosterService=a;this._assignmentWorkService=c;this._cacheService=l;this._classCodeData=void 0;this._classCode=void 0;this._code="";this._codeIsValid=!1;this._hasWork=!1;this._showError=!1}e.$inject=["$q","$state","$mdDialog","ClassCodeService","StudentCacheService","RosterService","AssignmentWorkService","CacheService"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"codeUpdated",value:function(e){this._reset(e);this.code=this.code.replace(/[\s]/g,"").slice(0,6).toUpperCase();6===this.code.length&&this.checkClassCode(e)}},{key:"_reset",value:function(e){e.enterCodeForm.codeInput.$setValidity("class-code",!0);e.enterCodeForm.codeInput.$setValidity("locked",!0);this._showError=!1;this._code=this._code.toUpperCase();this._codeIsValid=!1;this._classCodeData=void 0;this._classCode=void 0;this._user=void 0;this._work=void 0}},{key:"checkClassCode",value:function(e){var t=this;this.$q.all({classCodeData:this._classCodeService.getUsernames(this._code),classCode:this._classCodeService.get(this._code),user:this._cacheService.getUser(),assignmentsAndWorks:this._studentCacheService.getUserAssignmentsAndWorks()}).then(function(n){t._classCodeData=n.classCodeData;t._classCode=n.classCode;t._user=n.user;t._work=t.findWorkForClassCode(t._classCode,[].concat(s(n.assignmentsAndWorks.works.values())));t._hasWork=!!t._work;var i=t._classCodeData&&t._classCodeData.allowNewMembers,r=t._classCodeData&&t._user&&t._classCodeData.names.some(function(e){return e===t._user.name}),o=t._classCodeData&&t._classCodeData.hideStudentWork,a=i||r||t._hasWork;t._codeIsValid=a&&!o;e.enterCodeForm.codeInput.$setValidity("locked",t._codeIsValid);t._showError=!t._codeIsValid})["catch"](function(){e.enterCodeForm.codeInput.$setValidity("class-code",!1);t._showError=!0})}},{key:"submitCode",value:function(){this._hasWork?this.goToWork(this._work):this.startWork(this._classCode.assignmentId,this._classCode.rosterId)}},{key:"findWorkForClassCode",value:function(e,t){return t.find(function(t){return t.assignmentId===e.assignmentId&&t.rosterId===e.rosterId})}},{key:"startWork",value:function(e,t){var n=this;this._rosterService.addSelf(t).then(function(){return n._assignmentWorkService.getOrCreateForSelf(e,t)}).then(function(e){n.goToWork(e)})}},{key:"startAnonWork",value:function(e){var t=this;this._cacheService.getUser().then(function(n){t.navigate("root.anon-student-assignment-work",{classCode:e,name:n.name,question:1})})}},{key:"goToWork",value:function(e){this.navigate("root.account.student-assignment-work",{assignmentWorkId:e.id,questionId:e.assignment.questionIdForIndex(0)})}},{key:"navigate",value:function(e,t){this.$mdDialog.hide();this.$state.go(e,t)}},{key:"code",get:function(){return this._code},set:function(e){this._code=e}},{key:"codeIsValid",get:function(){return this._codeIsValid}},{key:"showError",get:function(){return this._showError}},{key:"lockedOrHiddenMessage",get:function(){return this._classCodeData&&this._classCodeData.hideStudentWork?"This assignment is hidden. Please ask your teacher to un-hide it so you can continue.":"The roster for this class code is locked. Please ask your teacher to unlock it so you can continue."}}],[{key:"show",value:function(t){return t.show({controller:e,templateUrl:"app/components/student-code-dialog/student-code-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0})}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o){r(this,e);this.$timeout=t;
this._mdPanelRef=n;this._deferred=i;this._feedbackList=s;this._assignmentWork=o;this._questionFeedbacks=[];this.init()}e.$inject=["$timeout","mdPanelRef","deferred","feedbackList","assignmentWork"];i(e,[{key:"init",value:function(){this._onUpdate();this._feedbackList.updated.subscribe(this._onUpdate,this)}},{key:"_onUpdate",value:function(){var e=this,t=this._feedbackList.validFeedbacks;if(this._questionFeedbacks.length!==t.length){this._questionFeedbacks=t.sort(function(t,n){return e._sortFeedbacksByQuestionNumber(t,n)});this.$timeout(function(){})}}},{key:"_sortFeedbacksByQuestionNumber",value:function(e,t){var n=this.questionNumber(e.id),i=this.questionNumber(t.id);return i>n?-1:n>i?1:0}},{key:"questionNumber",value:function(e){return this._assignmentWork.questionNumberForId(e)}},{key:"goToQuestion",value:function(e){this._deferred.resolve({questionId:e});this._mdPanelRef.hide()}},{key:"questionFeedbacks",get:function(){return this._questionFeedbacks}},{key:"hasFeedback",get:function(){return this.questionFeedbacks&&this.questionFeedbacks.length>0}}],[{key:"show",value:function(t,n,i,r,s){var o=t.newPanelPosition().relativeTo(i.currentTarget).addPanelPosition(t.xPosition.ALIGN_START,t.yPosition.ALIGN_BOTTOMS),a=t.newPanelAnimation().openFrom(i.currentTarget).duration(100).withAnimation(t.animation.SCALE),c=n.defer();t.open({position:o,animation:a,templateUrl:"app/components/feedback-menu/feedback-menu.html",controller:e,controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,panelClass:"feedback-menu md-whiteframe-2dp",locals:{deferred:c,feedbackList:r,assignmentWork:s},onRemoving:function(){c.reject()}});return c.promise}}]);return e}();t.FeedbackMenuController=s},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(151),a=s(o),c=n(367),l=s(c),u=n(274),d=s(u),h=n(676),f=s(h),g=n(286),p=s(g),m=n(390),v=s(m),_=n(501),y=s(_),k=n(292),b=function(){function e(t,n,i,s,o,a,c,l,u,h,g){"ngInject";var m=this;r(this,e);this.$q=t;this.$scope=n;this.$stateParams=i;this.$mdDialog=s;this.$window=o;this.$log=a;this._cacheService=c;this._authService=l;this._breadcrumbService=u;this._userService=h;this._contractService=g;this._loadingDialog=d["default"].show;this._contractUserResetPasswordDialog=f["default"].show;this._confirmDialog=p["default"].show;this.saveState=null;this.firstName=null;this.lastName=null;this.username=null;this.email=null;this.displayName=null;this._isUserContractAdmin=void 0;this._user=null;this.contractUserForm=null;n.$on("$destroy",function(){return m._destroy()});this.init()}e.$inject=["$q","$scope","$stateParams","$mdDialog","$window","$log","CacheService","AuthService","BreadcrumbService","UserService","ContractService"];i(e,[{key:"init",value:function(){var e=this;this._debouncer=new a["default"](3e3,5e3,function(){e._commit()},this.$scope,this.$window);this._contractAdminDebouncer=new a["default"](3e3,5e3,function(){e._updateContractUserAdmin()},this.$scope,this.$window);this.$q.all({contracts:this._cacheService.getContracts(),user:this._userService.getUserForContract(this.contractId,this.userId)}).then(function(t){e._contract=t.contracts.find(function(t){return t.id===e.contractId});e.user=t.user})["catch"](function(t){e.error=t})}},{key:"fieldUpdated",value:function(e,t,n){if(!n){e.$setTouched();e===t.username&&t.username.$setValidity("duplicate",!0);e===t.email&&t.email.$setValidity("duplicate",!0);this.email||this.username?t.username.$setValidity("id-required",!0):t.username.$setValidity("id-required",!1);var i=t.$valid;this._debouncer.valid=i;this._debouncer.tick();i?this.saveState=this.UNSAVED:this.saveState=this.SAVE_ERROR}}},{key:"_commit",value:function(){var e=this;this.user.displayName=this.displayName;this.user.firstName=this.firstName;this.user.lastName=this.lastName;this.user.username=this.username||null;this.user.email=this.email||null;return this._userService.updateContractUser(this.user,this.contractId).then(function(){e.saveState=e.SAVED})["catch"](function(t){t.data.code===y["default"].DUPLICATE_USERNAME||t.message.includes("user_ux_username")?e.contractUserForm.username.$setValidity("duplicate",!1):(t.data.code===y["default"].DUPLICATE_EMAIL||t.message.includes("user_ux_email"))&&e.contractUserForm.email.$setValidity("duplicate",!1);e.$log.error(t.message,Math.random());e.saveState=e.SAVE_ERROR})}},{key:"resetPassword",value:function(){this._contractUserResetPasswordDialog(this.$mdDialog,this.user,this.contractId)}},{key:"goBack",value:function(){this._authService.authData.isContractAdmin(this.contractId)?this._breadcrumbService.goBack("root.account.nav.contract-users",{contractId:this.contractId}):this._breadcrumbService.goBack("root.account.home")}},{key:"removeContractUser",value:function(){var e=this;this._confirmDialog(this.$mdDialog,"Are you sure you want to remove "+this.user.name+" from this organization?","This account will still exist for individual use.").then(function(){return e._contractService.removeUser(e.contractId,e.user.id)}).then(function(){e.goBack()})}},{key:"_updateContractUserAdmin",value:function(){var e=this;return this._contractService.makeUserContractAdmin(this.contractId,this.userId,this.isUserContractAdmin).then(function(){e.saveState=l["default"].SAVED})["catch"](function(t){e.saveState=l["default"].SAVE_ERROR;e.$log.error(t)})}},{key:"_destroy",value:function(){this._debouncer.destroy()}},{key:"user",get:function(){return this._user},set:function(e){var t=this;this.firstName=e.firstName;this.lastName=e.lastName;this.username=e.username;this.displayName=e.displayName;this.email=e.email;if(e.contractMembers){var n=e.contractMembers.find(function(e){return e.contractId===t.contractId});this._isUserContractAdmin=n?n.admin:!1}this._user=e}},{key:"userId",get:function(){return this.$stateParams.userId}},{key:"contractId",get:function(){return this.$stateParams.contractId}},{key:"contract",get:function(){return this._contract}},{key:"usernamePattern",get:function(){return v["default"].UsernamePattern}},{key:"emailPattern",get:function(){return v["default"].EmailPattern}},{key:"userHasGoogleAuth",get:function(){return this.user&&this.user.authTypes&&this.user.authTypes.includes(k.AuthType.GOOGLE)}},{key:"SAVED",get:function(){return l["default"].SAVED}},{key:"UNSAVED",get:function(){return l["default"].UNSAVED}},{key:"SAVE_ERROR",get:function(){return l["default"].SAVE_ERROR}},{key:"isTeacher",get:function(){return this.user.isTeacher}},{key:"isStudent",get:function(){return this.user.isStudent}},{key:"isCurrentUser",get:function(){return this.user.id===this._authService.authData.id}},{key:"role",get:function(){return this.user.isTeacher?"Teacher":this.user.isStudent?"Student":""}},{key:"isContractAdmin",get:function(){return this._authService.authData.isContractAdmin(this.contractId)}},{key:"isUserContractAdmin",get:function(){return this._isUserContractAdmin},set:function(e){this._contractAdminDebouncer.tick();this.saveState=this.UNSAVED;this._isUserContractAdmin=e}},{key:"loading",get:function(){return!this.user&&!this.error}}]);return e}();t["default"]=b;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(286),a=s(o),c=n(214),l=s(c),u=function(){function e(t,n,i,s,o,c){"ngInject";r(this,e);this.$timeout=t;this.$scope=n;this.$mdDialog=i;this._user=o;this._contractId=c;this._userService=s;this.newPassword=null;this.showPassword=null;this._confirmDialog=a["default"].show;this._errorDialog=l["default"].show}e.$inject=["$timeout","$scope","$mdDialog","UserService","user","contractId"];i(e,[{key:"resetStudentPassword",value:function(){var e=this;this._userService.updateContractUserPassword(this._user.id,this._contractId,this.newPassword).then(function(){e.$mdDialog.hide();e._confirmDialog(e.$mdDialog,e._user.name+"'s password was updated successfully","",!0)})["catch"](function(){e._errorDialog(e.$mdDialog,"Uh oh! There was a problem updating "+e._user.name+"'s password","")})}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"user",get:function(){return this._user}},{key:"inputType",get:function(){return this.showPassword?"text":"password"}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/components/contract-user-reset-password-dialog/contract-user-reset-password-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,escapeToClose:!0,locals:{user:n,contractId:i}})}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(297)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(149),c=o(a),l=n(390),u=o(l),d=n(274),h=o(d),f=n(299),g=n(211),p=o(g),m=n(501),v=o(m),_=n(214),y=o(_),k=n(291),b=function(){function e(t,n,i,s,o,a,c,l,d,g,m,v,_,k){r(this,e);this.$q=t;this.$log=n;this.$state=i;this.$stateParams=s;this.$timeout=o;this.$mdDialog=a;this.$mdToast=c;this._environment=l;this._breadcrumbService=d;this._cacheService=g;this._stripeService=m;this._subscriptionService=v;this._authService=_;this._mixpanelService=k;this._createdSubscription=new p["default"];this._errorDialog=y["default"].show;this._loadingDialog=h["default"].show;this._nameOnCard="";this._email="";this._postalCode="";this._cardInput=void 0;this._cardValue=void 0;this._subscriptionPlan=this.$stateParams.subscriptionPlan||f.SubscriptionPlans.NiagaraAnnualV4;this._isFocused=!1;this.emailPattern=u["default"].EmailPattern;this._error=void 0;this._loading=!0;this._disableAutocompleteString="disable-autocomplete-string-"+Math.random();this.createStripeCardElement();this.init()}e.$inject=["$q","$log","$state","$stateParams","$timeout","$mdDialog","$mdToast","environment","BreadcrumbService","CacheService","StripeService","SubscriptionService","AuthService","MixpanelService"];i(e,[{key:"init",value:function(){var e=this;this.$q.all({user:this._cacheService.getUser(),contracts:this._cacheService.getContracts(),subscriptions:this._cacheService.getSubscriptions()}).then(function(t){var n=t.user,i=t.contracts,r=t.subscriptions;e._user=n;e._contracts=i;e._subscriptions=r;e._nameOnCard=n.firstLastCombo;e._email=n.email;e._setDisplayText();e._checkShouldNavToUpdate();e._loading=!1;e._mixpanelService.subscriptionFunnel(k.SubscriptionFunnel.ENTER_PAYMENT)})["catch"](function(t){e._error=t;e._loading=!1})}},{key:"_setDisplayText",value:function(){this._isCreatePayment=this.$state.is("root.account.create-payment");this._title=this._isCreatePayment?"Upgrade to Pro Teacher":"Update Payment Information";this._planInfoDisplay=this._isCreatePayment?"":this._nameOnCard+" - Pro Teacher "+(f.SubscriptionIntervals.isMonthly(this._subscriptionPlan)?"Monthly":"Annual")}},{key:"_checkShouldNavToUpdate",value:function(){var e=this._subscriptions.find(function(e){return e.status===f.SubscriptionStatus.PastDue});!this.isAlternative&&e&&this._breadcrumbService.go("root.account.update-payment",{subscriptionPlan:e.subscriptionPlan},!0)}},{key:"createStripeCardElement",value:function(){var e=this,t=[{family:"GothamRoundedBook",src:"url('"+this._environment.webUrlBase+"/assets/fonts/GothamRnd-Book.otf') format('opentype')"}],n={hidePostalCode:!0,style:{base:{color:c["default"].CK_HEADER_GREY,lineHeight:"26px",fontFamily:"GothamRoundedBook",fontSmoothing:"antialiased",fontSize:"16px"},invalid:{color:c["default"].CK_WARN,iconColor:c["default"].CK_WARN}},classes:{focus:"ck-card-focused",empty:"ck-card-empty"}};this._cardInput=this._stripeService.stripe.elements({fonts:t}).create("card",n);this._cardInput.mount(".card-element");this._cardInput.on("focus",function(){e._isFocused=!0;e.$timeout(function(){},0)});this._cardInput.on("blur",function(){e._isFocused=!1;e.$timeout(function(){},0)});this._cardInput.on("change",function(t){e._cardValue=t;e.$timeout(function(){},0)})}},{key:"goBack",value:function(){this._breadcrumbService.goBack("root.account.home")}},{key:"onSubmit",value:function(){var e=this;if(angular.isUndefined(this._cardValue)||this._cardValue.empty){this._cardValue=this.emptyCardValue;this._cardInput.focus()}else if(this.cardIsComplete){var t=void 0;t=this._isCreatePayment?this._create(this._cardInput,this.nameOnCard,this.postalCode,this.email,this.subscriptionPlan,this.trialContractId):this._update(this._cardInput,this.nameOnCard,this.postalCode,this.email);this._loadingDialog(this.$mdDialog,t);t["catch"](function(t){e._handleServerError(t)})}}},{key:"_create",value:function(e,t,n,i,r,s){var o=this;return this.$q.all({token:this._createToken(e,t,n),subscription:this._createSubscription(r,s)}).then(function(e){var t=e.subscription,n=e.token;return o.$q.all({subscription:t,token:o._activate(t.id,i,n.id)})}).then(function(e){var t=e.subscription;o._breadcrumbService.go("root.account.payment-success",{subscriptionId:t.id},!0)})}},{key:"_createToken",value:function(e,t,n){return this._stripeService.createToken(e,{name:t,address_zip:n}).then(function(e){var t=e.token;return t})}},{key:"_createSubscription",value:function(e,t){var n=this;return this._createdSubscription.value(function(){return n._subscriptionService.create(e,t).then(function(e){var t=e.subscription;return t})["catch"](function(e){n._createdSubscription.clear();throw e})})}},{key:"_update",value:function(e,t,n,i){var r=this;return this.$q.all({subscription:this._getSubscription(),token:this._createToken(e,t,n)}).then(function(e){var t=e.subscription,n=e.token;return r._activate(t.id,i,n.id)}).then(function(){r.goBack();r.showToast("Payment info updated")})}},{key:"_handleServerError",value:function(e){e.code===v["default"].PAYMENT_FAILED?"incorrect_zip"===e.data.data.code?this.paymentForm.postalCodeInput.$setValidity("incorrect_zip",!1):this._cardValue={empty:!1,error:{code:e.data.data.code}}:this._errorDialog(this.$mdDialog,"There was an error updating your account, please try again.","")}},{key:"_activate",value:function(e,t,n){var i=this,r=arguments.length<=3||void 0===arguments[3]?3:arguments[3];return this._subscriptionService.activate(e,t,n).then(function(e){var t=e.token;if(t){i._cacheService.reset();return i._authService.processTokenResult(t,i._authService.rememberMe)}return i._authService.authData})["catch"](function(s){return s.code===v["default"].PAYMENT_FAILED?i.$q.reject(s):0>=r?i._errorDialog(i.$mdDialog,"There was a connection issue while processing your payment info.","Please check your connection and try again. If you continue to have problems, please contact support@classkick.com.",[{text:"Cancel",action:y["default"].CANCEL},{text:"Retry",action:y["default"].CONFIRM}]).then(function(){return i._activate(e,t,n,r-1)})["catch"](function(){return i.$q.reject(s)}):i.$timeout(function(){},1500,!1).then(function(){return i._activate(e,t,n,r-1)})})}},{key:"_getSubscription",value:function(){var e=this;return this._cacheService.getSubscriptions().then(function(t){return t.find(function(t){return t.subscriptionPlan===e.subscriptionPlan})})}},{key:"showToast",value:function(e){this.$mdToast.show(this.$mdToast.simple().textContent(e).position("bottom right"))}},{key:"isFloating",get:function(){return{"md-input-focused":this._isFocused||this.notEmpty}}},{key:"cardError",get:function(){return this._cardValue&&this._cardValue.error}},{key:"emptyCardValue",get:function(){return{empty:!0,error:{code:"required"}}}},{key:"formattedCardError",get:function(){return this.cardError?s({},this.cardError.code,!0):{}}},{key:"cardHasError",get:function(){return!!this.cardError}},{key:"cardIsComplete",get:function(){return this._cardValue&&this._cardValue.complete}},{key:"notEmpty",get:function(){return this._cardValue&&!this._cardValue.empty}},{key:"nameOnCard",get:function(){return this._nameOnCard},set:function(e){this._nameOnCard=e}},{key:"email",get:function(){return this._email},set:function(e){this._email=e}},{key:"postalCode",get:function(){return this._postalCode},set:function(e){this._postalCode=e;this.paymentForm.postalCodeInput.$setValidity("incorrect_zip",!0)}},{key:"isCreatePayment",get:function(){return this._isCreatePayment}},{key:"subscriptionPlan",get:function(){return this._subscriptionPlan},set:function(e){this._subscriptionPlan=e}},{key:"monthly",get:function(){return f.SubscriptionPlans.NiagaraMonthlyV4}},{key:"monthlyPriceBase",get:function(){return"$17.99"}},{key:"yearly",get:function(){return f.SubscriptionPlans.NiagaraAnnualV4}},{key:"yearlyPriceBase",get:function(){return"$156"}},{key:"title",get:function(){return this._title}},{key:"planInfoDisplay",get:function(){return this._planInfoDisplay}},{key:"submitButtonDisplay",get:function(){return this._isCreatePayment?"Submit Payment - "+(this.subscriptionPlan===this.monthly?this.monthlyPriceBase+"/month":this.yearlyPriceBase+"/year"):"Update"}},{key:"isAlternative",get:function(){return this._isCreatePayment&&(this._authService.authData.isStudent||this._authService.authData.isPro&&!this.isTrial)}},{key:"isTrial",get:function(){return!!this.activeTrialContract}},{key:"activeTrialContract",get:function(){return this._contracts&&this._contracts.find(function(e){return e.isTrial&&!e.isExpired})}},{key:"trialContract",get:function(){return this._contracts&&this._contracts.find(function(e){return e.isTrial})}},{key:"trialContractId",get:function(){var e=this.trialContract;return e&&e.id}},{key:"alternativeMessage",get:function(){return this._authService.authData.isStudent?"Sorry, students cannot upgrade to Pro accounts.":"Whoops, it looks like you already have a Pro account."}},{key:"disableAutocompleteString",get:function(){return this._disableAutocompleteString}},{key:"error",get:function(){return this._error}},{key:"loading",get:function(){return this._loading}}]);return e}();t["default"]=b;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(299),o=n(291),a=n(296),c=function(){function e(t,n,i,s,o,a,c){r(this,e);this.$log=t;this.$stateParams=i;this.$q=n;this._breadcrumbService=s;this._cacheService=o;this._staticContentService=a;this._mixpanelService=c;this._loading=!0;this._nextCharge=void 0;this.init()}e.$inject=["$log","$q","$stateParams","BreadcrumbService","CacheService","StaticContentService","MixpanelService"];i(e,[{key:"init",value:function(){var e=this;this._cacheService.getSubscriptions(!0).then(function(t){e._subscription=t.find(function(t){return t.id===e.subscriptionId});e._nextCharge=e.subscription.nextCharge;e._loading=!1;e._mixpanelService.subscriptionFunnel(o.SubscriptionFunnel.COMPLETE,e.subscriptionPlan,a.ContractPlans.PRO_CLASSROOM)})["catch"](function(t){e._error=t;e.$log.error(t.message)})}},{key:"goBack",value:function(){this._breadcrumbService.goBack("root.account.home")}},{key:"goHome",value:function(){this._breadcrumbService.go("root.account.home",{},!0)}},{key:"goToGettingStartedWithPro",value:function(){this._staticContentService.goToGettingStartedTutorialVideo()}},{key:"goToWatchTutorialVideo",value:function(){this._staticContentService.goToPortfolioStudentTutorialVideo()}},{key:"subscriptionId",get:function(){return this.$stateParams.subscriptionId}},{key:"subscription",get:function(){return this._subscription}},{key:"subscriptionPlan",get:function(){return this.subscription&&this.subscription.subscriptionPlan}},{key:"loading",get:function(){return this._loading}},{key:"error",get:function(){return this._error}},{key:"planPrice",get:function(){return"$"+(this.subscriptionPlan===s.SubscriptionPlans.NiagaraAnnualV4?"156":"17.99")}},{key:"annualOrMonthly",get:function(){return this.subscriptionPlan===s.SubscriptionPlans.NiagaraAnnualV4?"Annual":"Monthly"}},{key:"nextCharge",get:function(){return this._nextCharge}},{key:"planDiscount",get:function(){return this.coupon&&this.coupon===s.SubscriptionCoupons.NiagaraAnnualLegacyV1?"-$36":this.coupon&&this.coupon===s.SubscriptionCoupons.NiagaraMonthlyLegacyV1?"-$6":"--"}},{key:"coupon",get:function(){return this.subscription&&this.subscription.coupon}},{key:"planPriceDiscount",get:function(){return this.subscriptionPlan===s.SubscriptionPlans.NiagaraMonthlyV4?this.monthlyPriceDiscount:this.yearlyPriceDiscount}},{key:"monthlyPriceDiscount",get:function(){return"$4.99"}},{key:"yearlyPriceDiscount",get:function(){return"$60"}},{key:"totalPrice",get:function(){return this.coupon?this.planPriceDiscount:this.planPrice}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(623),o=n(291),a=function(){function e(t,n,i,o,a,c,l,u){"ngInject";r(this,e);this.$stateParams=n;this.$mdToast=i;this._mixpanelService=o;this._userService=a;this._breadcrumbService=c;this._authService=l;this._clipboard=u;this._orderBy=s.AssignmentsTableColumns.NAME;this._isAscending=!0;this._loading=!0;this._username=null;var d=t.protocol(),h=t.host(),f="";80!==t.port()&&443!==t.port()&&(f=":"+t.port());var g="/#/users/"+this.$stateParams.userId+"/shared";this._link=d+"://"+h+f+g;this.init()}e.$inject=["$location","$stateParams","$mdToast","MixpanelService","UserService","BreadcrumbService","AuthService","clipboard"];i(e,[{key:"init",value:function(){var e=this;this._userService.getProfileInfo(this.$stateParams.userId).then(function(t){var n=t.assignments,i=t.username;e._assignments=n;e._username=i;e._loading=!1;e._mixpanelService.profileViewFunnel(o.ProfileViewFunnel.VIEWED,e.$stateParams.userId,e._authService.currentUserId)})["catch"](function(t){e._error=t})}},{key:"setOrToggle",value:function(e,t){if(this._orderBy!==e){this._orderBy=e;this._isAscending=t}else this._isAscending=!this._isAscending}},{key:"setOrToggleName",value:function(){this.setOrToggle(s.AssignmentsTableColumns.NAME,!0)}},{key:"orderBy",value:function t(){var t=this._orderBy;return function(e){return s.AssignmentsTableColumns.NAME===t?e.name:void 0}}},{key:"goToAssignment",value:function(e){this._mixpanelService.profileViewFunnel(o.ProfileViewFunnel.CLICKED_ASSIGNMENT,this.$stateParams.userId,this._authService.currentUserId,e.name);this._breadcrumbService.go("root.public-assignment",{assignmentId:e.id})}},{key:"navToLogin",value:function(){this._authService.isLoggedIn&&this._authService.authData.isTeacher?this._breadcrumbService.go("root.account.home"):this._breadcrumbService.go("root.account-login")}},{key:"copy",value:function(){if(this._clipboard.supported){this._clipboard.copyText(this._link);this.$mdToast.show(this.$mdToast.simple().textContent("Link copied to clipboard").position("bottom right"))}}},{key:"isAuthenticated",get:function(){return this._authService.isLoggedIn}},{key:"clipboardIsSupported",get:function(){return this._clipboard&&this._clipboard.supported}},{key:"username",get:function(){return this._username}},{key:"assignments",get:function(){return this._assignments}},{key:"ASSIGNMENTS_HELP_MESSAGE_LIMIT",get:function(){return 3}},{key:"PUBLIC_ASSIGNMENTS_HELP_MESSAGE_LIMIT",get:function(){return 1}},{key:"loading",get:function(){return this._loading&&!this._error}},{key:"error",get:function(){return this._error}},{key:"isAscending",get:function(){return this._isAscending}},{key:"showNameCarrot",get:function(){return this._orderBy===s.AssignmentsTableColumns.NAME}}]);return e}();t["default"]=a;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=["$timeout","AuthService","BootstrapService","BreadcrumbService",function s(e,t,n,r){i(this,s);n.ready&&e().then(function(){t.isLoggedIn?r.go("root.account.home"):r.go("root.login")})}];t["default"]=r;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=["$timeout","$stateParams","AuthService","BootstrapService","BreadcrumbService","StudentCacheService","ClassCodeService",function s(e,t,n,r,o,a,c){i(this,s);r.ready&&n.isLoggedIn&&e().then(function(){n.authData.isTeacher?o.go("root.account.nav.assignments",{},!0):n.authData.isAnon||t.classCode?!n.authData.isAnon&&t.classCode?c.get(t.classCode).then(function(e){return a.getOrCreateWorkForSelf(e.assignmentId,e.rosterId)}).then(function(e){o.go("root.account.student-assignment-work",{assignmentWorkId:e.id,questionId:e.questionForIndex(0).id},!0)}):o.go("root.login",{},!0):o.go("root.account.nav.student-assignments-list",{},!0)})}];t["default"]=r;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(364),a=n(375),c=n(485),l=s(c),u=n(674),d=function(){function e(t,n,i,s,c,l,d,h,f,g){var p=this;r(this,e);this.$q=t;this.$state=i;this.$stateParams=s;this.$mdDialog=c;this.$mdPanel=l;this._breadcrumbService=d;this._authService=h;this._studentCacheService=f;this._studentAssignmentService=g;this._feedbackMenu=u.FeedbackMenuController.show;this._questionNumber=parseInt(this.$stateParams.question);this._model=this._studentAssignmentService.getStudentAssignmentWork(a.HelpInboxType.STUDENT,new o.PageTraverser(function(e){return{question:e.prevQuestionIndex+1}},function(e){return{question:e.nextQuestionIndex+1}},function(e){return{question:e.targetQuestionIndex+1}}));this._loading=!1;n.$on("$destroy",function(){return p._model.destroy()});this.init().then(function(){p._loading=!1})}e.$inject=["$q","$scope","$state","$stateParams","$mdDialog","$mdPanel","BreadcrumbService","AuthService","StudentCacheService","StudentAssignmentService"];i(e,[{key:"init",value:function(){var e=this;return this._authService.authAnonStudent(this.$stateParams.classCode,this.$stateParams.name).then(function(t){var n=t.classCode;return e._studentCacheService.getOrCreateWorkForSelf(n.assignmentId,n.rosterId)}).then(function(t){var n=e._questionNumber-1,i=t.questionIdForIndex(n);if(!i){e._questionNumber=1;n=e._questionNumber-1;i=t.questionIdForIndex(n)}return e._model.initCoreData(t,i)}).then(function(t){e._loading=!0;var n=e._questionNumber-1,i=t.questionIdForIndex(n);return e._model.initSubscriptionData(t,i)})["catch"](function(t){t.message===l["default"].singleDeviceLoginError?l["default"].launchSingleDeviceErrorDialog(e.$mdDialog,!1).then(function(){e.logOut()})["catch"](function(){e.$state.reload()}):t.message===l["default"].assignmentHiddenError&&l["default"].launchAssignmentHiddenErrorDialog(e.$mdDialog,!1).then(function(){e.logOut()})["catch"](function(){e.$state.reload()});e._error=t})}},{key:"reload",value:function(){this.$state.go("root.anon-student-assignment-work",{classCode:this.$stateParams.classCode,name:this.$stateParams.name,question:this._questionNumber},{reload:!0})}},{key:"goToQuestion",value:function(e){this._breadcrumbService.go("root.anon-student-assignment-work",{classCode:this.$stateParams.classCode,name:this.$stateParams.name,question:this.model.subscriptionData.assignmentWork.indexForQuestionId(e)+1},!0)}},{key:"goToOverview",value:function(){this._breadcrumbService.go("root.anon-student-assignment-overview",{classCode:this.$stateParams.classCode,name:this.$stateParams.name},!0)}},{key:"goToFeedback",value:function(e){this._breadcrumbService.go("^.anon-student-assignment-feedback",{classCode:this.$stateParams.classCode,name:this.$stateParams.name,request:e})}},{key:"logOut",value:function(){this._authService.signOut()}},{key:"openFeedbackMenu",value:function(e){var t=this;this._feedbackMenu(this.$mdPanel,this.$q,e,this.model.subscriptionData.questionFeedbackList,this.model.subscriptionData.assignmentWork).then(function(e){var n=e.questionId;t.goToQuestion(n)})}},{key:"model",get:function(){return this._model}},{key:"formattedClassCode",get:function(){return this.$stateParams.classCode.substr(0,3)+" "+this.$stateParams.classCode.substr(3)}},{key:"username",get:function(){return this.$stateParams.name}},{key:"loading",get:function(){return this._loading}},{key:"isStudentAuthed",get:function(){return this._authService.isLoggedIn}},{key:"hasExportStudentWork",get:function(){return this.isStudentAuthed&&this._authService.authData.isPro}}]);return e}();t["default"]=d;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(375),a=n(485),c=s(a),l=n(674),u=function(){function e(t,n,i,s,a,c,u,d,h,f,g){var p=this;r(this,e);this.$q=t;this.$state=i;this.$stateParams=s;this.$mdDialog=a;this.$mdPanel=c;this._cacheService=u;this._breadcrumbService=d;this._authService=h;this._studentCacheService=f;this._studentAssignmentService=g;this._feedbackMenu=l.FeedbackMenuController.show;this._model=this._studentAssignmentService.getStudentAssignmentOverview(o.HelpInboxType.STUDENT);n.$on("$destroy",function(){return p._model.destroy()});this.init()}e.$inject=["$q","$scope","$state","$stateParams","$mdDialog","$mdPanel","CacheService","BreadcrumbService","AuthService","StudentCacheService","StudentAssignmentService"];i(e,[{key:"init",value:function(){var e=this;this._authService.authAnonStudent(this.$stateParams.classCode,this.$stateParams.name).then(function(t){var n=t.classCode;return e._studentCacheService.getOrCreateWorkForSelf(n.assignmentId,n.rosterId)}).then(function(t){return e._model.init(t)})["catch"](function(t){t.message===c["default"].singleDeviceLoginError?c["default"].launchSingleDeviceErrorDialog(e.$mdDialog,!1).then(function(){e.goBack()})["catch"](function(){e.reload()}):t.message===c["default"].assignmentHiddenError&&c["default"].launchAssignmentHiddenErrorDialog(e.$mdDialog,!1).then(function(){e.goBack()})["catch"](function(){e.reload()});e._error=t})}},{key:"reload",value:function(){this.$state.go("root.anon-student-assignment-overview",{classCode:this.$stateParams.classCode,name:this.$stateParams.name},{reload:!0})}},{key:"goToQuestion",value:function(e){this._breadcrumbService.go("root.anon-student-assignment-work",{classCode:this.$stateParams.classCode,name:this.$stateParams.name,question:this.model.data.assignmentWork.indexForQuestionId(e)+1},!0)}},{key:"goToFeedback",value:function(e){this._breadcrumbService.go("^.anon-student-assignment-feedback",{classCode:this.$stateParams.classCode,name:this.$stateParams.name,request:e})}},{key:"goBack",value:function(){this._cacheService.clearUserStatusDetails();this._breadcrumbService.goBack("root.login")}},{key:"logOut",value:function(){this._authService.signOut()}},{key:"openFeedbackMenu",value:function(e){var t=this;this._feedbackMenu(this.$mdPanel,this.$q,e,this.model.data.questionFeedbackList,this.model.data.assignmentWork).then(function(e){var n=e.questionId;t.goToQuestion(n)})}},{key:"model",get:function(){return this._model}},{key:"formattedClassCode",get:function(){return this.$stateParams.classCode.substr(0,3)+" "+this.$stateParams.classCode.substr(3)}},{key:"username",get:function(){return this.$stateParams.name}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a,c){var l=this;r(this,e);this.$stateParams=n;this._authService=a;this._studentCacheService=i;this._storageService=o;this._breadcrumbService=s;this._studentAssignmentService=c;this._model=this._studentAssignmentService.getStudentAssignmentFeedback();t.$on("$destroy",function(){return l._model.destroy()});this.init()}e.$inject=["$scope","$stateParams","StudentCacheService","BreadcrumbService","StorageService","AuthService","StudentAssignmentService"];i(e,[{key:"init",value:function(){var e=this;this._authService.authAnonStudent(this.$stateParams.classCode,this.$stateParams.name).then(function(t){var n=t.classCode;return e._studentCacheService.getOrCreateWorkForSelf(n.assignmentId,n.rosterId)}).then(function(t){return e._model.init(t)})}},{key:"goBack",value:function(){this._storageService.feedbackHelpRequest=null;this._breadcrumbService.goBack("^.anon-student-assignment-work",{
classCode:this.$stateParams.classCode,name:this.$stateParams.name})}},{key:"model",get:function(){return this._model}},{key:"isStudentAuthed",get:function(){return this._authService.isLoggedIn}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(375),a=n(485),c=s(a),l=n(674),u=function(){function e(t,n,i,s,a,c,u,d,h,f){var g=this;r(this,e);this.$q=t;this.$state=i;this.$stateParams=s;this.$mdDialog=a;this.$mdPanel=c;this._breadcrumbService=d;this._cacheService=u;this._studentCacheService=h;this._studentAssignmentService=f;this._error=void 0;this._model=this._studentAssignmentService.getStudentAssignmentWork(o.HelpInboxType.STUDENT_ACCOUNT);this._loading=!1;this._feedbackMenu=l.FeedbackMenuController.show;n.$on("$destroy",function(){return g._model.destroy()});this.init().then(function(){g._loading=!1})}e.$inject=["$q","$scope","$state","$stateParams","$mdDialog","$mdPanel","CacheService","BreadcrumbService","StudentCacheService","StudentAssignmentService"];i(e,[{key:"init",value:function(){var t=this;return this._studentCacheService.getUserWork(this.$stateParams.assignmentWorkId,!1).then(function(e){return t._model.initCoreData(e,t.$stateParams.questionId)}).then(function(e){t._loading=!0;return t._model.initSubscriptionData(e,t.$stateParams.questionId)})["catch"](function(n){n.message===c["default"].singleDeviceLoginError?c["default"].launchSingleDeviceErrorDialog(t.$mdDialog,!0).then(function(){t.goBack()})["catch"](function(){t.$state.reload()}):n.message===c["default"].assignmentHiddenError&&c["default"].launchAssignmentHiddenErrorDialog(t.$mdDialog,!0).then(function(){t.goBack()})["catch"](function(){t.$state.reload()});n.message.includes(e.QUESTION_IS_NOT_ON_ASSIGNMENT_ERROR)&&t.$state.go(t.$state.current.name,{assignmentWorkId:t.$stateParams.assignmentWorkId,questionId:null});t._error=n})}},{key:"goToQuestion",value:function(e){this._breadcrumbService.go("root.account.student-assignment-work",{assignmentWorkId:this.model.assignmentWorkId,questionId:e},!0)}},{key:"goToOverview",value:function(){this._breadcrumbService.go("root.account.student-assignment-overview",{assignmentWorkId:this.model.assignmentWorkId},!0)}},{key:"goToFeedback",value:function(e){this._breadcrumbService.go("^.student-assignment-feedback",{assignmentWorkId:this.model.assignmentWorkId,request:e})}},{key:"goBack",value:function(){this._cacheService.clearUserStatusDetails();this._breadcrumbService.goBack("root.account.nav.student-assignments-list")}},{key:"openFeedbackMenu",value:function(e){var t=this;this._feedbackMenu(this.$mdPanel,this.$q,e,this.model.subscriptionData.questionFeedbackList,this.model.subscriptionData.assignmentWork).then(function(e){var n=e.questionId;t.goToQuestion(n)})}},{key:"model",get:function(){return this._model}},{key:"loading",get:function(){return this._loading}},{key:"name",get:function(){var e=this.model&&this.model.subscriptionData,t=e&&e.user;return t&&t.name}}],[{key:"QUESTION_IS_NOT_ON_ASSIGNMENT_ERROR",get:function(){return"is not in assignment"}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(375),a=n(485),c=s(a),l=n(674),u=function(){function e(t,n,i,s,a,c,u,d,h,f){var g=this;r(this,e);this.$q=t;this.$state=i;this.$stateParams=s;this.$mdDialog=a;this.$mdPanel=c;this._cacheService=u;this._breadcrumbService=d;this._studentCacheService=h;this._studentAssignmentService=f;this._error=void 0;this._model=this._studentAssignmentService.getStudentAssignmentOverview(o.HelpInboxType.STUDENT_ACCOUNT);this._feedbackMenu=l.FeedbackMenuController.show;n.$on("$destroy",function(){return g._model.destroy()});this.init()}e.$inject=["$q","$scope","$state","$stateParams","$mdDialog","$mdPanel","CacheService","BreadcrumbService","StudentCacheService","StudentAssignmentService"];i(e,[{key:"init",value:function(){var e=this;this._studentCacheService.getUserWork(this.$stateParams.assignmentWorkId,!1).then(function(t){return e._model.init(t)})["catch"](function(t){t.message===c["default"].singleDeviceLoginError?c["default"].launchSingleDeviceErrorDialog(e.$mdDialog,!0).then(function(){e.goBack()})["catch"](function(){e.reload()}):t.message===c["default"].assignmentHiddenError&&c["default"].launchAssignmentHiddenErrorDialog(e.$mdDialog,!0).then(function(){e.goBack()})["catch"](function(){e.$state.reload()});e._error=t})}},{key:"reload",value:function(){this.$state.go("root.account.student-assignment-overview",{assignmentWorkId:this.$stateParams.assignmentWorkId},{reload:!0})}},{key:"goToQuestion",value:function(e){this._breadcrumbService.go("root.account.student-assignment-work",{assignmentWorkId:this.$stateParams.assignmentWorkId,questionId:e},!0)}},{key:"goToFeedback",value:function(e){this._breadcrumbService.go("^.student-assignment-feedback",{assignmentWorkId:this.$stateParams.assignmentWorkId,request:e})}},{key:"goBack",value:function(){this._cacheService.clearUserStatusDetails();this._breadcrumbService.goBack("root.account.nav.student-assignments-list")}},{key:"openFeedbackMenu",value:function(e){var t=this;this._feedbackMenu(this.$mdPanel,this.$q,e,this.model.data.questionFeedbackList,this.model.data.assignmentWork).then(function(e){var n=e.questionId;t.goToQuestion(n)})}},{key:"error",get:function(){return this._error}},{key:"model",get:function(){return this._model}},{key:"name",get:function(){var e=this.model&&this.model.data,t=e&&e.user;return t&&t.name}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i,s,o,a){var c=this;r(this,e);this.$stateParams=n;this._storageService=s;this._breadcrumbService=i;this._studentCacheService=o;this._studentAssignmentService=a;this._model=this._studentAssignmentService.getStudentAssignmentFeedback();t.$on("$destroy",function(){return c._model.destroy()});this.init()}e.$inject=["$scope","$stateParams","BreadcrumbService","StorageService","StudentCacheService","StudentAssignmentService"];i(e,[{key:"init",value:function(){var e=this;this._studentCacheService.getUserWork(this.$stateParams.assignmentWorkId,!1).then(function(t){return e._model.init(t)})}},{key:"goBack",value:function(){this._storageService.feedbackHelpRequest=null;this._breadcrumbService.goBack("^.student-assignment-work",{assignmentWorkId:this.model.assignmentWorkId})}},{key:"model",get:function(){return this._model}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(605),c=n(291),l=n(445),u=o(l),d=n(357),h=o(d),f=function(){function e(t,n,i,s,o,a,c,l,u,h,f,g,p,m){"ngInject";r(this,e);this.$q=t;this.$timeout=n;this.$log=i;this._breadcrumbService=s;this._authService=o;this._mixpanelService=a;this._cacheService=c;this._storageService=l;this._notificationService=u;this._toolbarService=h;this._ipStackService=f;this._organizationService=g;this._googlePlacesService=p;this._environment=m;this._isLoading=!1;this._state=this.JoinSchool;this._schoolName="";this._school=void 0;this._newSchoolName="";this._newSchoolLocationDisplay="";this._newSchoolLocation=void 0;this._ckRedirect=this._storageService.ckRedirect;this._accountInitPromise=void 0;this._tokenDeferred=this.$q.defer();this._token=this._tokenDeferred.promise;this.organizationType=d.OrganizationTypes.UserDefinedOrganizationTypes[0];this._authService.isLoggedIn||this._breadcrumbService.goBack("root.signup-teacher")}e.$inject=["$q","$timeout","$log","BreadcrumbService","AuthService","MixpanelService","CacheService","StorageService","NotificationService","ToolbarService","IPStackService","OrganizationService","GooglePlacesService","environment"];i(e,[{key:"joinSchool",value:function(e){if(!e.joinSchoolForm.$invalid){this._isLoading=!0;this._joinSchool(this.school.id)}}},{key:"addSchool",value:function(e){var t=this;if(!e.enterSchoolDetailsForm.$invalid){this._isLoading=!0;this._createSchool(this.newSchoolLocation.placeId,this.newSchoolName).then(function(e){t._joinSchool(e.id)})}}},{key:"_joinSchool",value:function(e){var t=this;this._organizationService.addSelf(e).then(function(e){t._tokenDeferred.resolve(e);t._accountInitPromise=t.$timeout(function(){t.go()},t._environment.accountInitTimeout);t._accountNotification=t._notificationService.getAccountNotification(t._authService.currentUserId);t._accountNotification.accountInitialized.subscribe(t._onAccountInit,t);t._accountNotification.start();t._cacheService.reset();t._mixpanelService.createAccountProgress(c.AccountCreationStep.SCHOOL_NAME);t._mixpanelService.createAccountProgress(c.AccountCreationStep.COMPLETE)})["catch"](function(e){t._tokenDeferred.reject();t._accountInitPromise||t.go();t.$log.error(e)})}},{key:"_createSchool",value:function(e,t){var n=this;return this._googlePlacesService.getPlaceDetails(e).then(function(e){return n._organizationService.create(d.OrganizationTypes.School,t,e.lat,e.lng,e.zip,e.city,e.state,e.country,n.organizationType.value)})}},{key:"go",value:function(){var e=this;this._token.then(function(t){return e._authService.processTokenResult(t,e._authService.rememberMe)}).then(function(){e._onSuccess()})["catch"](function(){e._onSuccess()})}},{key:"_onSuccess",value:function(){this._toolbarService.reset();this._breadcrumbService.clear();if(this._ckRedirect){this._ckRedirect.redirect(this._breadcrumbService);this._storageService.ckRedirect=null}else this._breadcrumbService.go("root.account.nav.assignments",{source:a.LoginSources.SIGN_UP},!0)}},{key:"goBack",value:function(){this._breadcrumbService.goBack("root.signup-name")}},{key:"_destroy",value:function(){if(this._accountNotification){this._accountNotification.updated.unsubscribe(this._onAccountInit,this);this._accountNotification.stop()}}},{key:"autocompleteLocation",value:function(e){var t=this;if(!e||e.length<2)return[];this._loadingAutocompleteLocation=!0;return this._googlePlacesService.getPredictions(e).then(function(e){t._loadingAutocompleteLocation=!1;return e})}},{key:"autocompleteSchool",value:function(e){var t=this;this._loadingAutocompleteSchool=!0;return this._ipStackService.getLocation().then(function(n){return t._organizationService.search(d.OrganizationTypes.School,n.lat,n.lng,e)}).then(function(e){t._loadingAutocompleteSchool=!1;return[].concat(s(e),[{}])})}},{key:"isOrganization",value:function(e){return e instanceof h["default"]}},{key:"_onAccountInit",value:function(e){if(e.change===u["default"].ACCOUNT_INITIALIZED){this.$timeout.cancel(this._accountInitPromise);this._accountInitPromise=null;this.go()}}},{key:"organizationOptions",get:function(){return d.OrganizationTypes.UserDefinedOrganizationTypes}},{key:"isLoading",get:function(){return this._isLoading}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"JoinSchool",get:function(){return"join_school"}},{key:"AddSchool",get:function(){return"add_school"}},{key:"schoolName",get:function(){return this._schoolName},set:function(e){this._schoolName=e}},{key:"school",get:function(){return this._school},set:function(e){this._school=e}},{key:"newSchoolName",get:function(){return this._newSchoolName},set:function(e){this._newSchoolName=e}},{key:"newSchoolLocationDisplay",get:function(){return this._newSchoolLocationDisplay},set:function(e){this._newSchoolLocationDisplay=e}},{key:"newSchoolLocation",get:function(){return this._newSchoolLocation},set:function(e){this._newSchoolLocation=e}},{key:"loadingAutocompleteLocation",get:function(){return this._loadingAutocompleteLocation}},{key:"loadingAutocompleteSchool",get:function(){return this._loadingAutocompleteSchool}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(274),c=o(a),l=n(455),u=n(151),d=o(u),h=n(271),f=o(h),g=n(644),p=n(645),m=o(p),v=n(646),_=n(359),y=o(_),k=function(){function e(t,n,i,s,o){r(this,e);this._student=t;this._work=n;this._assignment=i;this._index=s;this._question=(n?n:i).questionForIndex(s);this._contentQuestion=i.questionForIndex(s);this._trackingId=""+t.id+s;this._handleScoreUpdated=o}i(e,[{key:"trackingId",get:function(){return this._trackingId}},{key:"isWork",get:function(){return!!this._work}},{key:"index",get:function(){return this._index}},{key:"student",get:function(){return this._student}},{key:"question",get:function(){return this._question}},{key:"points",get:function(){return this._contentQuestion.points},set:function(e){this._contentQuestion.points=e}},{key:"score",get:function(){return this.isWork?this._question.points:f["default"].UNGRADED},set:function(e){this._handleScoreUpdated(this._student.id,this._question.id,e)}}]);return e}(),b=function(){function e(t,n,i,s,o,a,l,u,h,f,p,_){"ngInject";var k=this;r(this,e);this.$q=t;this.$state=i;this.$stateParams=s;this.$document=o;this.$timeout=a;this.$mdDialog=l;this.$mdPanel=u;this._window=angular.element(h);this._cacheService=p;this._breadcrumbService=f;this._mixpanelService=_;this._assignmentId=s.assignmentId;this._rosterId=s.rosterId;this._error=null;this._sessionData=null;this._loadingDialog=c["default"].show;this._showPeerHelpInbox=g.PeerHelpInboxController.show;this._showStudentInfoMenu=v.StudentInfoMenuController.show;this._showStudentAccountHelpDialog=m["default"].show;this._helpDialog=y["default"].show;this._columnCount=3;this._resetLayoutDebounce=new d["default"](1e3,5e3,this._resetLayout.bind(this));this._sortAndResetLayoutDebounce=new d["default"](1e3,5e3,function(){k.data.sortStudents();k._resetLayout()});this._anonResetLayoutDebounce=function(){return k._resetLayoutDebounce.tick()};n.$on("$destroy",function(){return k._destroy()});this._init()}e.$inject=["$q","$scope","$state","$stateParams","$document","$timeout","$mdDialog","$mdPanel","$window","BreadcrumbService","CacheService","MixpanelService"];i(e,[{key:"_init",value:function(){var e=this;this._cacheService.getSessionData(this._assignmentId,this._rosterId,!1,!0).then(function(t){e._sessionData=t;if(!e.data.isComplete){if(e.data.hasRosters){e.goToNewRoster(e.data.assignmentRosters[0].id);return void 0}e._error=new Error("There are no rosters associated with this assignment.");e._error.noRosters=!0;return void 0}e.data.updated.subscribe(e._onSessionDataUpdated,e);e.data.start();e.data.configureSortFromStorage();e._initLayout();e._mixpanelService.sessionQuestionViewed(e.questionNumber)})["catch"](function(t){e._error=t;throw t})}},{key:"_initLayout",value:function(){var e=this;this._window.on("resize",this._anonResetLayoutDebounce);this.$timeout(function(){e._bodyContent=angular.element(".session-question .body-content");e._cellWidth=angular.element(".session-question .body-head .question-cell-header").outerWidth(!0);e._resetLayout()},0,!0)}},{key:"_resetLayout",value:function(){this._padding=15;this._bodyWidth=this._bodyContent.width()-this._padding;this._thumbnailWidth=this._bodyWidth/this._columnCount;this._thumbnailHeight=.85*this._thumbnailWidth;this._answerMaxWidth=this._thumbnailWidth-3*this._padding;this._thumbnails=this._filterForSelectedQuestion()}},{key:"_filterForSelectedQuestion",value:function(){var e=this;return this._sortStudents(this.data.sortedStudents.slice()).map(function(t){return new k(t,e.data.worksByStudent.get(t.id),e.data.assignment,e.$stateParams.questionNumber-1,e._handleScoreUpdated.bind(e))})}},{key:"_sortStudents",value:function(e){var t=this,n=this.data.studentSort;if(n.name===l.StudentSortOptions.GradesAsc){var i=function(){var n=t.questionIndex;return{v:e.sort(function(e,i){return t.studentQuestionScore(e.id,n)<t.studentQuestionScore(i.id,n)?-1:1})}}();if("object"==typeof i)return i.v}else{if(n.name!==l.StudentSortOptions.GradesDesc)return e;var r=function(){var n=t.questionIndex;return{v:e.sort(function(e,i){return t.studentQuestionScore(e.id,n)<t.studentQuestionScore(i.id,n)?1:-1})}}();if("object"==typeof r)return r.v}}},{key:"studentQuestionScore",value:function(e,t){var n=this.data.worksByStudent.get(e),i=n?n.questionForIndex(t):void 0;return i&&angular.isNumber(i.points)?i.points:-1}},{key:"_debounceApply",value:function(){this._debounceApplyPromise&&this.$timeout.cancel(this._debounceApplyPromise);this._debounceApplyPromise=this.$timeout(function(){},200)}},{key:"_destroy",value:function(){this._window.off("resize",this._anonResetLayoutDebounce);this.data.updated.unsubscribe(this._onSessionDataUpdated,this)}},{key:"_onSessionDataUpdated",value:function(e){var t=e.code,n=e.userIsNowOnline,i=e.userIsLoggingOnForFirstTime;t===l.SessionDataCodes.ROSTER_MEMBER?this._sortAndResetLayoutDebounce.tick():t===l.SessionDataCodes.STUDENT_SORT||t===l.SessionDataCodes.STUDENT_HIDE_OFFLINE||t===l.SessionDataCodes.STUDENT_HIDE_UNSTARTED?this._resetLayoutDebounce.tick():t===l.SessionDataCodes.STUDENT_STATUS&&(n||i)&&this._sortAndResetLayoutDebounce.tick();this._debounceApply()}},{key:"assignmentSheetConfig",value:function(e,t){return this.loaded?this.data.assignmentSheetConfig(e,t):null}},{key:"goToViewAllQuestions",value:function(){this.data.sessionQuestionNumber=this.data.ViewAllSlides;this.goToSessionWork()}},{key:"goToSessionWork",value:function(){this._breadcrumbService.go("root.account.session.work",s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:this._rosterId}),!0)}},{key:"goToNewRoster",value:function(e){this._breadcrumbService.go(this.$state.current.name,s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:e}),!0)}},{key:"navToFeedbackQuestion",value:function(e,t){this._breadcrumbService.go("root.account.session.question.feedback",{assignmentId:this._assignmentId,questionId:t,assignmentWorkId:this.data.workForStudent(e).id})}},{key:"openPeerHelpInbox",value:function(e,t){var n=this,i=this.data.studentHelpHistorySortedChronologically(t.id),r=this.data.studentActiveHelpers(t.id);this._showPeerHelpInbox(this.$mdPanel,this.$q,e,t,i,r,this.data.students,this.data.assignment).then(function(e){var t=e.userId,i=e.questionId,r=e.event;n.navToFeedbackQuestion(t,i,r)})}},{key:"showHiddenStudents",value:function(){this.data.showHiddenStudents();this._resetLayout()}},{key:"handleGradeKeydown",value:function(e,t){if(9===e.which){var n=this._thumbnails[t+1]||this._thumbnails[0];e.shiftKey&&(n=this._thumbnails[t-1]||this._thumbnails[this._thumbnails.length-1]);this.focusGradeInput(n.student.id,!0);e.preventDefault()}}},{key:"focusGradeInput",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=angular.element("#"+e+" grade-input form input");n.focus();t&&n.select()}},{key:"_handleScoreUpdated",value:function(e,t,n){var i=this;this.getOrCreateWork(e).then(function(r){i.focusGradeInput(e);return i.data.updateScore(r,e,t,n)})}},{key:"handleThumbnailClicked",value:function(e,t,n){var i=this;n.stopPropagation();this.getOrCreateWork(e).then(function(n){i.data.placingSticker?i.data.placeSticker(n,e,t,i.data.placingSticker):i.navToFeedbackQuestion(e,t)})}},{key:"getOrCreateWork",value:function(e){var t=this.data.workForStudent(e);return t?this.$q.resolve(t):this.fetchDataForStudent(e)}},{key:"fetchDataForStudent",value:function(e){var t=this,n=this.data.fetchDataForStudent(e).then(function(){t._resetLayout();return t.data.workForStudent(e)});this._loadingDialog(this.$mdDialog,n,this.$document,".session-question .body-content");return n}},{key:"showStudentInfoMenu",value:function(e,t){this._showStudentInfoMenu(this.$mdPanel,this.$q,e,t,this.data.studentLastSeen(t.id),this.data.pro)}},{key:"openStudentAccountHelpDialog",value:function(){this._showStudentAccountHelpDialog(this.$mdDialog,this.data.pro)}},{key:"openGivingFeedbackHelp",value:function(){this._helpDialog(this.$mdDialog,_.ViewHelps.GivingFeedback)}},{key:"questionNumber",get:function(){return this.$stateParams.questionNumber}},{key:"questionIndex",get:function(){return this.questionNumber-1}},{key:"thumbnails",get:function(){return this._thumbnails}},{key:"thumbnailStyle",get:function(){return{height:this._thumbnailHeight,paddingBottom:2*this._padding}}},{key:"answerStyle",get:function(){return{maxWidth:this._answerMaxWidth}}},{key:"data",get:function(){return this._sessionData}},{key:"error",get:function(){return this._error}},{key:"loaded",get:function(){return!this.error&&!this.loading}},{key:"loading",get:function(){return!this.data&&!this.error}}]);return e}();t["default"]=b;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(185),a=n(291),c=n(501),l=s(c),u=function(){function e(t,n,i,s,o,a,c,l,u){"ngInject";r(this,e);this._authService=n;this._toolbarService=i;this._breadcrumbService=s;this._storageService=o;this._mixpanelService=a;this._cleverService=c;this._classCodeService=l;this._rosterService=u;this._error=void 0;this._ckRedirect=this._storageService.ckRedirect;var d=t.state,h=t.token,f=d&&angular.fromJson(d);f&&(this._classCode=f.classCode);h&&this._init(h)}e.$inject=["$stateParams","AuthService","ToolbarService","BreadcrumbService","StorageService","MixpanelService","CleverService","ClassCodeService","RosterService"];i(e,[{key:"_init",value:function(e){var t=this;this._cleverService.getInfo(e).then(function(e){return e.exists?t._loginUser(e):t._signupUser(e)})["catch"](function(e){e.code===l["default"].INVITE_CODE_OR_CLASS_CODE_REQUIRED?t.goToLogin():e.data.code===l["default"].CLEVER_EMAIL_NOT_SET?t._error="Uh oh! There doesn't appear to be an email associated with the requested Clever account.":t._cleverService.goToLogin()})}},{key:"_loginUser",value:function(e){var t=this;return this._authService.authUserWithClever(e).then(function(){return t._addStudentToRoster()}).then(function(){t._loginSuccess()})}},{key:"_addStudentToRoster",value:function(){var e=this;return this._classCode?this._classCodeService.get(this._classCode).then(function(t){return e._rosterService.addSelf(t.rosterId)}):void 0}},{key:"_loginSuccess",value:function(){this._toolbarService.reset();this._breadcrumbService.clear();if(this._ckRedirect){this._ckRedirect.redirect(this._breadcrumbService);this._storageService.ckRedirect=null}else this._breadcrumbService.go("root.account.home",{},!0)}},{key:"_signupUser",value:function(e){var t=this;return this._authService.signUpWithClever(e,this._classCode).then(function(){t._mixpanelService.createAccountProgress(a.AccountCreationStep.STARTED);t._breadcrumbService.go(e.userType===o.UserRoles.STUDENT?"root.signup-student-name":"root.signup-teacher-name",{firstName:e.firstName,lastName:e.lastName},!0)})}},{key:"goToLogin",value:function(){this._breadcrumbService.go("root.login",{},!0)}},{key:"error",get:function(){return this._error}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(172)["default"],a=n(206)["default"],c=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(407),u=c(l),d=function(){function e(t,n){r(this,e);this.name=t;this.range=n}i(e,[{key:"within",value:function(e){return this.range.some(function(t){return t===e})}}]);return e}(),h=[new d("PreK-2nd",l.GradeRanges.PreKThroughSecondGrade),new d("3rd-5th",l.GradeRanges.ThirdThroughFifth),new d("6th-8th",l.GradeRanges.SixthThroughEighth),new d("9th-12th",l.GradeRanges.NinthThroughTwelfth),new d("College",l.GradeRanges.College)],f=function(){function e(t,n,i,s,a,c,l){"ngInject";r(this,e);this.$q=t;this.$mdDialog=n;this._userService=i;this._breadcrumbService=s;this._authService=a;this._mixpanelService=c;this._environment=l;this._loading=!0;this._assignmentSheetConfigMap=new o;this._displayAssignments=[];this._subject=void 0;this._subjectOptions=u["default"].Subjects;this._gradeRange=void 0;this._query="";this._mixpanelService.assignmentLibraryOpened();this.init()}e.$inject=["$q","$mdDialog","UserService","BreadcrumbService","AuthService","MixpanelService","environment"];i(e,[{key:"init",value:function(){var e=this;this.$q.all({currentUser:this.isAuthenticated&&this._userService.getUser(),info:this._userService.getProfileInfo(this._environment.assignmentLibraryAccount)}).then(function(t){var n=t.currentUser,i=t.info;e._currentUser=n;e._assignments=i.assignments;e._loading=!1;e._subjectOptions=[].concat(s(new a(e._assignments.map(function(e){return e.subjects}).flat().sort())));e.resetDisplayAssignments()})["catch"](function(t){e._error=t})}},{key:"resetDisplayAssignments",value:function(){var e=this;this._displayAssignments=this._assignments.filter(function(t){return e.checkSubject(e.subject,t)&&e.checkGrade(e._gradeRange,t)&&e.checkQuery(e.query,t)}).sort(function(e,t){var n=e.name.toLowerCase(),i=t.name.toLowerCase();return n>i?1:i>n?-1:0})}},{key:"checkSubject",value:function(e,t){return!e||e===this.ALL_SUBJECTS||t.subjects.some(function(t){return t===e})}},{key:"checkGrade",value:function(e,t){return!e||e===this.ALL_GRADES||t.grades.some(function(t){return e.within(t)})}},{key:"checkQuery",value:function(e,t){if(e.length>0){var n=e.toLowerCase(),i=""+t.name+t.brief;return i.toLowerCase().indexOf(n)>-1}return!0}},{key:"goToAssignment",value:function(e){this._breadcrumbService.go("root.public-assignment",{assignmentId:e.id})}},{key:"goHome",value:function(){this._breadcrumbService.goBack("root.account.home",{},!0)}},{key:"goToLogin",value:function(){this._breadcrumbService.go("root.account-login")}},{key:"assignmentSheetConfigForAssignment",value:function(e){this._assignmentSheetConfigMap.has(e.id)||this._assignmentSheetConfigMap.set(e.id,{readonly:!0,thumbnail:!0,index:0,target:e});return this._assignmentSheetConfigMap.get(e.id)}},{key:"currentUser",get:function(){return this._currentUser}},{key:"currentUsername",get:function(){return this.currentUser&&this.currentUser.name}},{key:"isAuthenticated",get:function(){return this._authService.isLoggedIn}},{key:"username",get:function(){return this.currentUser&&this.currentUser.name}},{key:"assignments",get:function(){return this._assignments}},{key:"displayAssignments",get:function(){return this._displayAssignments}},{key:"gradeRangeOptions",get:function(){return h}},{key:"subjectOptions",get:function(){return this._subjectOptions}},{key:"subject",get:function(){return this._subject},set:function(e){this._subject=e}},{key:"ALL_SUBJECTS",get:function(){return"all_subjects"}},{key:"gradeRange",get:function(){return this._gradeRange},set:function(e){this._gradeRange=e}},{key:"ALL_GRADES",get:function(){return"all_grades"}},{key:"query",get:function(){return this._query},set:function(e){this._query=e}},{key:"loading",get:function(){return this._loading&&!this._error}},{key:"error",get:function(){return this._error}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(157)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(291),c=n(274),l=o(c),u=n(693),d=o(u),h=n(455),f=n(694),g=n(695),p=o(g),m=n(359),v=o(m),_=n(286),y=o(_),k=n(630),b=o(k),S=function(){function e(t,n,i,s,o,a,c,u,h,g,m,_,k,S,w,C){r(this,e);this.$q=t;this.$mdDialog=n;this.$mdPanel=i;this.$mdToast=s;this.$state=o;this.$stateParams=a;this.$document=c;this._cacheService=u;this._mixpanelService=h;this._answerExportService=g;this._gradeExportService=m;this._exportService=_;this._breadcrumbService=k;this._assignmentService=S;this._rosterService=w;this._storageService=C;this._assignmentManager=new b["default"](this.$q,this.$mdDialog,this.$mdToast,this._cacheService,this._assignmentService,this._breadcrumbService,this._gradeExportService,this._answerExportService,this._mixpanelService,this._exportService);this._assignmentId=this.$stateParams.assignmentId;this._rosterId=this.$stateParams.rosterId;this._error=null;this._sessionData=null;this._shareWithStudentDialog=p["default"].show;this._loadingDialog=l["default"].show;this._chooseRosterDialog=d["default"].show;this._selectStickerMenu=f.SelectStickerMenuController.show;this._helpDialog=v["default"].show;this._confirmDialog=y["default"].show;this._init()}e.$inject=["$q","$mdDialog","$mdPanel","$mdToast","$state","$stateParams","$document","CacheService","MixpanelService","AnswerExportService","GradeExportService","ExportService","BreadcrumbService","AssignmentService","RosterService","StorageService"];i(e,[{key:"_init",value:function(){var e=this;this._cacheService.getSessionData(this._assignmentId,this._rosterId).then(function(t){e._sessionData=t;if(!e.data.isComplete){if(e.data.hasRosters){e.goToNewRoster(e.data.assignmentRosters[0].id);return void 0}e._error=new Error("There are no rosters associated with this assignment.");e._error.noRosters=!0;return void 0}e.data.sessionQuestionNumber=angular.isNumber(e.$state.params.questionNumber)?e.$state.params.questionNumber:e.data.ViewAllSlides;e.data.updated.subscribe(e._onSessionDataUpdated,e);if(e.data.teacher.showSessionRefactorHelpDialog){e.showSessionHelp();e.data.teacher.showSessionRefactorHelpDialog=!1;e._cacheService.updateUser(e.data.teacher)}})["catch"](function(t){e._error=t;throw t})}},{key:"_onSessionDataUpdated",value:function(e){e&&e.code===h.SessionDataCodes.STUDENT_SORT&&(this._storageService.sessionSort=this.data.studentSort.name)}},{key:"exportContentToPDF",value:function(){this._assignmentManager.exportContentToPDF(this.data.assignment)}},{key:"exportWorkToPDF",value:function(){this._assignmentManager.exportWorkToPDF(this.data.worksByStudent,this.data.sortedAndUnfilteredStudents,this.data.classCode,this.data.assignment,this.pro)}},{key:"exportGrades",value:function(){this._assignmentManager.exportGrades(this.data.assignment,this.data.assignmentRosters,this.pro)}},{key:"exportAnswers",value:function(){this._assignmentManager.exportAnswers(this.data.assignment,this.data.assignmentRosters,this.pro)}},{key:"goHome",value:function(){this._breadcrumbService.goBack("root.account.home",{},!0)}},{key:"goEdit",value:function(){this._breadcrumbService.go("root.account.assignment",{assignmentId:this._assignmentId,lastRosterId:this._rosterId},!0)}},{key:"goToAssignmentRosters",value:function(){this._breadcrumbService.go("root.account.assignment-rosters",{assignmentId:this._assignmentId,lastRosterId:this._rosterId},!0)}},{key:"goToWatchView",value:function(){this._breadcrumbService.go("root.account.session.watch",s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:this._rosterId}),!0)}},{key:"goToWorkView",value:function(){this._breadcrumbService.go("root.account.session.work",s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:this._rosterId}),!0)}},{key:"goToRosterEdit",value:function(){this._breadcrumbService.go("root.account.roster",{rosterId:this._rosterId})}},{key:"goToQuestionView",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this._breadcrumbService.go("root.account.session.question",s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:this._rosterId,questionNumber:e}),!0)}},{key:"chooseAddRoster",value:function(){var e=this;this._chooseRosterDialog(this.$mdDialog,this.$q,this.data.userRosters,this.data.assignment,this.data.pro).then(function(t){e._addRoster(t.id)})}},{key:"_addRoster",value:function(e){var t=this,n=this._assignmentService.addOrUpdateRoster(this.data.assignment.id,e,!1).then(function(){t._cacheService.reset()});this._loadingDialog(this.$mdDialog,n,this.$document);n.then(function(){t.goToNewRoster(e)})}},{key:"goToNewRoster",value:function(e){this._breadcrumbService.go(this.$state.current.name,s({},this.$stateParams,{assignmentId:this._assignmentId,rosterId:e}),!0)}},{key:"goToFeedbackQuestion",
value:function(e,t){this._breadcrumbService.go(this.$state.current.name+".feedback",{assignmentId:this._assignmentId,questionId:t,assignmentWorkId:this.data.workForStudent(e).id})}},{key:"share",value:function(){this._assignmentManager.share(this.data.assignment)}},{key:"shareWithStudentDialog",value:function(){this._shareWithStudentDialog(this.$mdDialog,this.data.assignment,this.data.roster,this.data.classCode,this.data.pro)}},{key:"moveAssignmentToFolder",value:function(){this._assignmentManager.moveAssignmentToFolder(this.data.assignment)}},{key:"duplicate",value:function(){var e=this;this._assignmentManager.checkAssignmentLimit(this.pro,function(){e._assignmentManager.duplicate(e.data.assignment.id,e.data.assignment.name)})}},{key:"delete",value:function(){var e=this;this._assignmentManager["delete"](this.data.assignment).then(function(){e.goHome()})}},{key:"openStickerMenu",value:function(e){var t=this;this._checkIfHelpViewed(m.ViewHelps.PlaceStickerWand,function(){if(t.isSessionWatch){var n='The Sticker Wand does not work when "Shrink thumbnails" is enabled.<br>Toggle off "Shrink thumbnails" to use the Sticker Wand.';t._confirmDialog(t.$mdDialog,n,void 0,!0,!0)}else t._selectStickerMenu(t.$mdPanel,t.$q,e,t.data.stickers).then(function(e){t.data.placingSticker=e})})}},{key:"_checkIfHelpViewed",value:function(e,t){var n=this,i=this.$q.resolve();this.data&&this.data.teacher&&!this.data.teacher.getHelpDialogViewed(e)&&(i=this._helpDialog(this.$mdDialog,e)["catch"](function(){n.data.teacher.setHelpDialogViewed(e,!0);n._cacheService.updateUser(n.data.teacher)}));i["finally"](t)}},{key:"stopPlacingSticker",value:function(){this.data.placingSticker=void 0}},{key:"showSessionHelp",value:function(){this.isSessionQuestion?this.showSessionQuestionHelp():this.isSessionWork?this.showSessionWorkHelp():this.isSessionWatch&&this.showSessionWatchHelp()}},{key:"showSessionWorkHelp",value:function(){return this._showHelp(m.ViewHelps.SessionWork)}},{key:"showSessionWatchHelp",value:function(){return this._showHelp(m.ViewHelps.SessionWatch)}},{key:"showSessionQuestionHelp",value:function(){return this._showHelp(m.ViewHelps.SessionQuestion)}},{key:"showHideStudentNamesHelp",value:function(){return this._showHelp(m.ViewHelps.HideStudentNames)}},{key:"showAllowPeerHelpersHelp",value:function(){return this._showHelp(m.ViewHelps.AllowPeerHelpers)}},{key:"showShowStudentScoresHelp",value:function(){return this._showHelp(m.ViewHelps.ShowStudentScores)}},{key:"showLockAssignmentHelp",value:function(){return this._showHelp(m.ViewHelps.LockAssignment)}},{key:"showHideAssignmentHelp",value:function(){return this._showHelp(m.ViewHelps.HideAssignment)}},{key:"_showHelp",value:function(e){this._helpDialog(this.$mdDialog,e)}},{key:"data",get:function(){return this._sessionData}},{key:"pro",get:function(){return this.data&&this.data.pro}},{key:"hasExportStudentWork",get:function(){return this.pro&&this.pro.hasExportStudentWork}},{key:"hasGradeExport",get:function(){return this.pro&&this.pro.hasGradeExport}},{key:"hasFoldersFeature",get:function(){return this.pro&&this.pro.hasFoldersFeature}},{key:"assignmentName",get:function(){return this.data?this.data.assignment.name:"Loading..."}},{key:"error",get:function(){return this._error}},{key:"loaded",get:function(){return!this.error&&!this.loading}},{key:"loading",get:function(){return!this.data&&!this.error}},{key:"roster",get:function(){return this.data&&this.data.roster},set:function(e){e&&this.goToNewRoster(e.id)}},{key:"showWork",get:function(){return!this.data.teacher.sessionViewShowWork},set:function(e){this.data.teacher.sessionViewShowWork=!e;this._cacheService.updateUser(this.data.teacher);this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.ShowWork,e);this.data.teacher.sessionViewShowWork?this.goToWorkView():this.goToWatchView()}},{key:"hideUnstartedThumbnails",get:function(){return this.data.hideUnstartedThumbnails},set:function(e){this.data.hideUnstartedThumbnails=e;this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.HideUnstartedThumbnails,e)}},{key:"hideOfflineStudents",get:function(){return this.data.hideOfflineStudents},set:function(e){this.data.hideOfflineStudents=e;this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.HideOfflineStudents,e)}},{key:"hideUnstartedAssignmentWorks",get:function(){return this.data.hideUnstartedAssignmentWorks},set:function(e){this.data.hideUnstartedAssignmentWorks=e;this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.HideUnstartedAssignmentWorks,e)}},{key:"hideStudentNames",get:function(){return this.data.hideStudentNames},set:function(e){this.data.hideStudentNames=e;this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.HideStudentNames,e)}},{key:"studentHelpers",get:function(){return this.data.roster.allowPeerHelp},set:function(e){this.data.roster.allowPeerHelp=e;this._rosterService.update(this.data.roster);this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.ShowStudentHelpers,e)}},{key:"showStudentScores",get:function(){return this.data.showStudentScores},set:function(e){this.data.showStudentScores=e;this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.ShowStudentScores,e)}},{key:"lockStudentWork",get:function(){return this.data.lockStudentWork},set:function(e){this.data.lockStudentWork=e;this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.LockStudentWork,e)}},{key:"hideStudentWork",get:function(){return this.data.hideStudentWork},set:function(e){this.data.hideStudentWork=e;this._mixpanelService.sessionSettingToggled(a.SessionSettingTypes.HideStudentWork,e)}},{key:"sessionQuestionNumber",get:function(){return this.data&&this.data.sessionQuestionNumber},set:function(e){if(this.data){this.data.sessionQuestionNumber=e;angular.isNumber(e)?this.goToQuestionView(e):this.goToWorkView()}}},{key:"isSessionQuestion",get:function(){return this.$state.is("root.account.session.question")}},{key:"isSessionWork",get:function(){return this.$state.is("root.account.session.work")}},{key:"isSessionWatch",get:function(){return this.$state.is("root.account.session.watch")}}]);return e}();t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(119)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(423),c=(o(a),n(651)),l=o(c),u=n(162),d=n(291),h=n(286),f=o(h),g=n(634),p=o(g),m=n(274),v=o(m),_=n(636),y=o(_),k=n(214),b=o(k),S=n(635),w=function(){function e(t,n,i,o,a,c,d,h,g,m,_,k,w,C,E,T,I){"ngInject";var A=this;r(this,e);this.$scope=o;this.$mdMedia=i;this.$mdDialog=t;this.$mdToast=n;this.$q=a;this.$mdPanel=c;this.$log=d;this._rosterService=g;this._mixpanelService=h;this._authService=m;this._googleClassroomService=_;this._cacheService=k;this._assignment=C;this._rosters=w;this._pro=E;this._isNew=T;this._deferred=I;this.mode=this.MODE_CHOOSE;this.availableRosters=[].concat(s(w.values())).filter(function(e){return!A._assignment.rosters.find(function(t){return t===e.id})});this.rosterName=null;this.rosterColor=u.Colors.ROSTER_COLORS[Math.floor(12*Math.random())].hex;this._colorMenu=l["default"].show;this._confirmDialog=f["default"].show;this._proInfoDialog=p["default"].show;this._loadingDialog=v["default"].show;this._importGoogleRostersDialog=y["default"].show;this._errorDialog=b["default"].show;this._googleClassroom=new S.GoogleClassroom(this.$q,this.$mdDialog,this.$mdToast,this._authService,this._googleClassroomService)}e.$inject=["$mdDialog","$mdToast","$mdMedia","$scope","$q","$mdPanel","$log","MixpanelService","RosterService","AuthService","GoogleClassroomService","CacheService","rosters","assignment","pro","isNew","deferred"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"confirm",value:function(e){this.$mdDialog.hide();this._deferred.resolve({id:e,isNew:this._isNew})}},{key:"toggleMode",value:function(){this.mode===this.MODE_CHOOSE?this.mode=this.MODE_NEW:this.mode=this.MODE_CHOOSE}},{key:"fieldUpdated",value:function(e){e.$touched=!0}},{key:"newRoster",value:function(){var e=this;this._rosterService.create({name:this.rosterName,color:this.rosterColor,allowPeerHelp:!1,allowNewMembers:!0,allowMultiLogin:!0}).then(function(t){e._isNew=!0;e.confirm(t.id)});this._mixpanelService.rosterCreatedFrom(d.Locations.ASSIGNMENT_EDIT)}},{key:"showColorMenu",value:function(){var e=this;this._colorMenu(this.$q,this.$mdPanel,this.$mdMedia,".choose-roster-dialog .roster-color span").then(function(t){e.rosterColor=t.hex})}},{key:"importFromGoogleClassroom",value:function(){var t=this;this.pro.hasStudentAccounts?this._googleClassroom.isGoogleAuthed?this._googleClassroom.getCourses().then(function(e){return t._googleClassroom.selectCourses(e)}).then(function(e){var n=t._googleClassroom.importCourses(e).then(function(){return t._cacheService.getRostersForUser(!0)});t._loadingDialog(t.$mdDialog,n);return n}).then(function(n){return e.show(t.$mdDialog,t.$q,n,t._assignment,t._pro,!0,t._deferred)})["catch"](function(){t._showGoogleImportError()}):this._googleClassroom.showNoGoogleAuthError():this._proInfoDialog(this.$mdDialog,d.PaywallSources.IMPORT_GOOGLE_ROSTERS)}},{key:"_showGoogleImportError",value:function(){this._errorDialog(this.$mdDialog,"Whoops! There was an error importing your students from Google Classroom","Please try again and if the issue persists send us a message at support@classkick.com")}},{key:"pro",get:function(){return this._pro},set:function(e){this._pro=e}},{key:"MODE_CHOOSE",get:function(){return"choose"}},{key:"MODE_NEW",get:function(){return"new"}}],[{key:"show",value:function(t,n,i,r,s,o,a){a||(a=n.defer());t.show({controller:e,templateUrl:"app/controllers/assignment-rosters/choose-roster-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{rosters:i,assignment:r,pro:s,isNew:o,deferred:a}});return a.promise}}]);return e}();t["default"]=w;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(250),a=s(o),c=n(291),l=n(359),u=s(l),d=function(){function e(t,n,i,s,o,a){r(this,e);this.$mdDialog=t;this._mixpanelService=n;this._mdPanelRef=i;this._deferred=s;this._stickers=o;this._helpDialog=u["default"].show;this._mixpanelService.stickerSidenavOpened(a)}e.$inject=["$mdDialog","MixpanelService","mdPanelRef","deferred","stickers","source"];i(e,[{key:"stickerScoreClass",value:function(e){return{zero:0===e}}},{key:"select",value:function(e,t){this._deferred.resolve(e);this._mdPanelRef.hide()}},{key:"showStickerWandHelp",value:function(){this.cancel();this._helpDialog(this.$mdDialog,l.ViewHelps.PlaceStickerWand)}},{key:"cancel",value:function(){this._deferred.reject();this._mdPanelRef.hide()}},{key:"defaultStickerImageUrl",get:function(){return a["default"].BLANK_STICKER_URL}},{key:"stickers",get:function(){return this._stickers},set:function(e){this._stickers=e}}],[{key:"show",value:function(t,n,i,r){var s=arguments.length<=4||void 0===arguments[4]?c.StickerSources.SESSION_QUESTION:arguments[4],o=t.newPanelPosition().relativeTo(i.currentTarget).addPanelPosition(t.xPosition.ALIGN_START,t.yPosition.ALIGN_TOPS),a=n.defer();t.open({position:o,animation:t.newPanelAnimation().openFrom(i.currentTarget).duration(100).withAnimation(t.animation.SCALE),templateUrl:"app/components/select-sticker-menu/select-sticker-menu.html",controller:e,controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,panelClass:"select-sticker-menu",locals:{deferred:a,stickers:r,source:s},onRemoving:function(){a.reject()}});return a.promise}}]);return e}();t.SelectStickerMenuController=d},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(645),a=s(o),c=function(){function e(t,n,i,s,o,c,l,u,d){"ngInject";r(this,e);this.$mdDialog=t;this.$location=n;this.$mdToast=i;this._clipboard=s;this._mixpanelService=o;this.assignment=c;this.roster=l;this.classCode=u;this.studentLink=u.studentUrl(n);this.pro=d;this._showStudentAccountHelpDialog=a["default"].show}e.$inject=["$mdDialog","$location","$mdToast","clipboard","MixpanelService","assignment","roster","classCode","pro"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"copy",value:function(){this._clipboard.copyText(this.studentLink);angular.element("#link-input").select();this.$mdToast.show(this.$mdToast.simple().textContent("Link copied to clipboard").position("bottom right"));this._mixpanelService.classCodeLinkCopied(this.roster.id,this.assignment.id)}},{key:"openStudentAccountHelpDialog",value:function(){this._showStudentAccountHelpDialog(this.$mdDialog,this.pro)}}],[{key:"show",value:function(t,n,i,r,s){return t.show({controller:e,templateUrl:"app/components/share-with-student-dialog/share-with-student-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{assignment:n,roster:i,classCode:r,pro:s},focusOnOpen:!1})}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(39)["default"],r=n(19)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=(n(359),n(286)),a=s(o),c=n(291),l=n(361),u=s(l),d=n(697),h=s(d),f=(n(300),n(620)),g=n(504),p=(s(g),n(292)),m=(s(p),[{text:"Rosters per teacher",standard:"Unlimited",pro:"Unlimited"},{text:"Assignments per teacher",standard:"20",pro:"Unlimited"},{text:"Pen Tool",standard:!0,pro:!0},{text:"Highlighter Tool",standard:!0,pro:!0,url:"https://storage.googleapis.com/view-helps/highlighter-paywall.gif"},{text:"Text Boxes",standard:!0,pro:!0,url:"https://storage.googleapis.com/view-helps/place-textbox.gif"},{text:"Audio Clips",standard:!0,pro:!0},{text:"PDF and Image Import",standard:!0,pro:!0},{text:"Manipulatives",standard:!0,pro:!0,url:"./assets/gifs/student-manipulatives-example.gif"},{text:"Multiple Choice",standard:!0,pro:!0,url:"https://storage.googleapis.com/view-helps/multiple-choice-paywall.gif"},{text:"Fill-in-the-blank",standard:!0,pro:!0,url:"./assets/gifs/student-enter-answer-fitb.gif"},{text:"Stickers",standard:!0,pro:!0,url:"https://storage.googleapis.com/view-helps/give-quick-feedback.gif"},{text:"Grades",standard:!0,pro:!0},{text:"Whole Class View",standard:!0,pro:!0,url:"https://storage.googleapis.com/view-helps/wcv-hide-unstarted-thumbnails.gif"},{text:"Peer Helpers",standard:!0,pro:!0,url:"https://storage.googleapis.com/view-helps/allow-peer-helpers.gif"},{text:"Student Portfolios",standard:!1,pro:!0,url:"https://storage.googleapis.com/view-helps/portfolio-student-login-full.gif"},{text:"Google Classroom and Clever Integration",standard:!1,pro:!0},{text:"Folders",standard:!1,pro:!0,url:"https://storage.googleapis.com/view-helps/folders-paywall.gif"},{text:"Export Grades",standard:!1,pro:!0,url:"https://storage.googleapis.com/view-helps/export-grades-paywall.gif"},{text:"Export Answers",standard:!1,pro:!0,url:"https://storage.googleapis.com/view-helps/export-answers-paywall.gif"},{text:"Export Student Work to PDF",standard:!1,pro:!0}]),v=function(){function e(t,n,r,s,o,l,u,d,g,p,v,_,y,k){i(this,e);this.$q=t;this.$location=n;this.$mdDialog=r;this.$window=s;this.$state=o;this.$stateParams=l;this._breadcrumbService=u;this._authService=d;this._cacheService=g;this._mixpanelService=p;this._logRocketService=v;this._staticContentService=_;this._orderService=y;this._state=this.$stateParams.tab||e.SchoolTab;this._user=void 0;this._school=void 0;this._orders=void 0;this._schoolsInDistrict=2;this._features=m;this._userDataLoaded=!1;this._priceMap={5:200,6:200,7:250,8:300,9:350,10:400,11:400,12:400,1:400,2:400,3:400,4:400};this._currentMonth=moment().month().toString();this._firstYearPrice=this._priceMap[this._currentMonth];this._confirmDialog=a["default"].show;this._featureDialog=h["default"].show;this._orderManager=new f.OrderManager(t,r,n,y,k,u);this._mixpanelService.subscriptionFunnel(c.SubscriptionFunnel.ORDER_PRO);if(this.isLoggedIn){this._logRocketService.identify(this.userInfo.id,this.userInfo.name,this.userInfo.email,this.userInfo.username,this.userInfo.isPro);this.init()}else this._logRocketService.identify("","","","","",!0)}e.$inject=["$q","$location","$mdDialog","$window","$state","$stateParams","BreadcrumbService","AuthService","CacheService","MixpanelService","LogRocketService","StaticContentService","OrderService","OrganizationService"];r(e,[{key:"init",value:function(){var e=this;return this.$q.all({user:this._cacheService.getUser(!0),schools:this._cacheService.getSchools(!0)}).then(function(t){var n=t.user,i=t.schools;e._user=n;e._school=i[0];return e._school?e._orderService.getForOrganization(e._school.id):[]}).then(function(t){e._orders=t;e._userDataLoaded=!0})}},{key:"goToTeacherTab",value:function(){this.$state.go(this.$state.current.name,{tab:e.TeacherTab});this._state=e.TeacherTab}},{key:"goToSchoolTab",value:function(){this.$state.go(this.$state.current.name,{tab:e.SchoolTab});this._state=e.SchoolTab}},{key:"goToDistrictTab",value:function(){this.$state.go(this.$state.current.name,{tab:e.DistrictTab});this._state=e.DistrictTab}},{key:"goToOtherOrgTypeURL",value:function(){this.$window.open("https://classkick.typeform.com/to/loi4iF")}},{key:"goToFaq",value:function(){this.$window.open("https://classkick.zendesk.com/hc/en-us/categories/360005756031-Billing-and-Payments")}},{key:"goToHomepage",value:function(){this._staticContentService.goToHomePage()}},{key:"goToLogin",value:function(){this._breadcrumbService.go("root.account-login",{})}},{key:"goToProTeacherPayment",value:function(){var e=this,t=this.$q.resolve();this.isLoggedIn||(t=this._confirmDialog(this.$mdDialog,"You must be logged in to your account to pay for Pro Teacher","Would you like to log in now?",!1));t.then(function(){e._breadcrumbService.go("root.account.create-payment")})}},{key:"openTeacherPO",value:function(){this._staticContentService.goToTeacherPO()}},{key:"goToTeacherHelpCenter",value:function(){this._staticContentService.goToTeacherHelpCenter(!1)}},{key:"openPricingFAQs",value:function(){this.$window.open("https://classkick.zendesk.com/hc/en-us/articles/360058606251-School-and-District-Pricing-FAQs","_blank")}},{key:"shareSchoolOrder",value:function(){this._orderManager.shareSchoolOrder(this._user,this._school,this._orders)}},{key:"startSchoolOrder",value:function(){this._orderManager.startSchoolOrder(this._user,this._school,this._orders)}},{key:"startDistrictOrder",value:function(){this._orderManager.startDistrictOrder(this._user,this._schoolsInDistrict)}},{key:"incrementSchoolsInDistrict",value:function(){this.schoolsInDistrict=this._schoolsInDistrict+1}},{key:"decrementSchoolsInDistrict",value:function(){this.schoolsInDistrict=this._schoolsInDistrict-1}},{key:"scrollToFeatures",value:function(){(0,u["default"])(angular.element(".order .features")[0],{behavior:"smooth",block:"nearest",inline:"nearest"})}},{key:"showCheckForPlanValue",value:function(e){return"boolean"==typeof e&&e}},{key:"showTextForPlanValue",value:function(e){return angular.isString(e)}},{key:"openFeatureDialog",value:function(e,t){this._featureDialog(this.$mdDialog,t.text,t.url)}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"viewingTeacherTab",get:function(){return this._state===e.TeacherTab}},{key:"viewingSchoolTab",get:function(){return this._state===e.SchoolTab}},{key:"viewingDistrictTab",get:function(){return this._state===e.DistrictTab}},{key:"isLoggedIn",get:function(){return this._authService.isLoggedIn}},{key:"loggedInAndLoadingData",get:function(){return this.isLoggedIn&&!this._userDataLoaded}},{key:"userInfo",get:function(){return this._authService.authData}},{key:"firstYearPrice",get:function(){return this._firstYearPrice}},{key:"schoolsInDistrict",get:function(){return this._schoolsInDistrict},set:function(e){(null===e||angular.isUndefined(e))&&(e="");this._schoolsInDistrict=angular.isNumber(e)?Math.abs(parseInt(e)):e}},{key:"districtPrice",get:function(){return angular.isNumber(this._schoolsInDistrict)&&this._schoolsInDistrict>0?this._firstYearPrice*this._schoolsInDistrict:"--"}},{key:"retailDistrictPrice",get:function(){return angular.isNumber(this._schoolsInDistrict)&&this._schoolsInDistrict>0?700*this._schoolsInDistrict:"--"}},{key:"features",get:function(){return this._features}}],[{key:"TeacherTab",get:function(){return"teacher"}},{key:"SchoolTab",get:function(){return"school"}},{key:"DistrictTab",get:function(){return"district"}}]);return e}();t["default"]=v;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,i){"ngInject";r(this,e);this.$mdDialog=t;this._title=n;this._url=i}e.$inject=["$mdDialog","title","url"];i(e,[{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"title",get:function(){return this._title}},{key:"url",get:function(){return this._url}}],[{key:"show",value:function(t,n,i){return t.show({clickOutsideToClose:!0,escapeToClose:!0,templateUrl:"app/components/feature-dialog/feature-dialog.html",controller:e,controllerAs:"ctrl",locals:{title:n,url:i}})}}]);return e}();t["default"]=s;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(121)["default"],o=n(206)["default"],a=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var c=n(479),l=n(149),u=a(l),d=n(404),h=a(d),f=n(18),g=a(f),p=n(527),m=n(274),v=a(m),_=n(214),y=a(_),k=n(699),b=a(k),S=n(361),w=a(S),C=n(456),E=a(C),T=n(620),I=n(700),A=a(I),x=n(286),O=a(x),P=16,R=11,D=9.5,M=8.5,N=u["default"].CK_ELEMENT_BLACK,L=u["default"].CK_HEADER_GREY,F="#d9d9d9",U=function(){function e(t,n,i,s,o,a,c,l,u,d,f,g,p,m,_,k,S,w,C,E){var I=this;r(this,e);this.$q=t;this.$scope=n;this.$document=i;this.$state=s;this.$stateParams=o;this.$timeout=a;this.$filter=c;this.$location=l;this.$mdDialog=u;this.$window=d;this._window=angular.element(d);this._hotkeys=f;this._orderService=p;this._organizationService=m;this._imageEditService=_;this._httpService=k;this._breadcrumbService=S;this._staticService=w;this._authService=C;this._staticContentService=E;this._state=this.Loading;this._errorMessage=this.DefaultErrorMessage;this._order=void 0;this._organization=void 0;this._gothamRoundedBook=void 0;this._gothamRoundedMedium=void 0;this._logo=void 0;this._w9=void 0;this._pdf=void 0;this._faqsSpacingY=void 0;this._orderPageLink=h["default"].absRootUrl(this.$location)+"/#/order/"+this.orderId;this._w9Link="https://classkick.com/w9";this._termsOfServiceLink="https://classkick.com/terms-of-service/";this._faqsLink="https://classkick.zendesk.com/hc/en-us/categories/360005756031-Billing-and-Payments";this._orderManager=new T.OrderManager(t,u,l,p,m,S);this._anonOnResize=this._onResize.bind(this);this._window.on("resize",this._anonOnResize);this.$scope.$on("$destroy",function(){return I._destroy()});this._loadingDialog=v["default"].show;this._errorDialog=y["default"].show;this._selectPurchasePeriodDialog=b["default"].show;this._financialAidDialog=A["default"].show;this._confirmDialog=O["default"].show;this._initHotkeys(this.$scope,f);this._init()}e.$inject=["$q","$scope","$document","$state","$stateParams","$timeout","$filter","$location","$mdDialog","$window","hotkeys","CacheService","OrderService","OrganizationService","ImageEditService","HttpService","BreadcrumbService","StaticService","AuthService","StaticContentService"];i(e,[{key:"_initHotkeys",value:function(e,t){var n=this,i=g["default"].get.isMac?"command+p":"ctrl+p";t.bindTo(e).add({combo:i,description:"Print",callback:function(e){e.preventDefault();n.exportAsPDF()}})}},{key:"_onResize",value:function(){this.$timeout(function(){})}},{key:"_destroy",value:function(){this._window.off("resize",this._anonOnResize)}},{key:"_init",value:function(){var e=this;if(this.orderId)return this._orderService.get(this.orderId).then(function(t){e._order=t;return e.$q.all({organization:e._organizationService.get(e._order.organizationId),loadPDFData:e._loadPDFData()})}).then(function(t){var n=t.organization;e._organization=n;var i=e._order.couponIds.findIndex(function(e){return e.includes("financial-aid")});e._finAidCouponId=e._order.couponIds[i];return e._createPDF(e._order,n)}).then(function(t){e._pdf=t;if(e._order.status===p.OrderStatus.Created)return e._renderPDF(t);e._order.status===p.OrderStatus.Invoiced?e._state=e.ViewInvoiced:e._order.status===p.OrderStatus.Paid?e._state=e.ViewPaid:e._order.status===p.OrderStatus.PastDue?e._state=e.ViewPastDue:e._order.status===p.OrderStatus.Canceled&&(e._state=e.ViewCancelled);return void 0})["catch"](function(){e._state=e.Error});this._state=this.Error;return void 0}},{key:"_loadPDFData",value:function(){var e=this;return this.$q.all({pdfkit:this._loadScript("app/pdfkit.js"),blobStream:this._loadScript("app/blob-stream-v0.1.3.js"),gothamRoundedBook:this._getAsBuffer("./assets/fonts/GothamRnd-Book.otf"),gothamRoundedMedium:this._getAsBuffer("./assets/fonts/GothamRnd-Medium.otf"),logo:this._getAsBuffer("./assets/images/brand/logo-full-final.png"),W9:this._getAsBuffer("./assets/images/order/w9-2021.png")}).then(function(t){var n=t.gothamRoundedBook,i=t.gothamRoundedMedium,r=t.logo,s=t.W9;e._gothamRoundedBook=n;e._gothamRoundedMedium=i;e._logo=r;e._W9=s})}},{key:"_createPDF",value:function(e,t){var n=this;if(!(this.order.total<=0)){if(this._staticService.isSafari||this._staticService.isEdge){this._errorMessage="Classkick is not supported in "+platform.name+", please view this quote in Chrome or Firefox";return this.$q.reject()}var i=e.plan,r=e.coupons.filter(function(e){return"free-trial-for-v5-plans"!==e.id||"free-trial-for-v6-plans"!==e.id});e.duration>=2&&(r=e.coupons.filter(function(e){return"free-trial-for-v5-plans"!==e.id||"free-trial-for-v6-plans"!==e.id}));var a=s(new o(r)),c=this.$q.defer(),l=new PDFDocument,d=l.pipe(blobStream());l.registerFont("GothamRoundedBook",this._gothamRoundedBook);l.registerFont("GothamRoundedMedium",this._gothamRoundedMedium);var h=612,f=60,g=60,p=h-2*f;l.image(this._logo,f,g-10,{fit:[100,25]});l.font("GothamRoundedMedium").fontSize(36).fillColor(F).text("QUOTE",f+360,g-20,{width:200});var m=g+35;l.font("GothamRoundedMedium").fontSize(M).fillColor(L).text("Vendor",f,m);l.font("GothamRoundedBook").fontSize(M).fillColor(L).text("CLASSWORK CO DBA Classkick",f,m+15).text("Phone: 312.798.9620; Fax: 415.363.4321").text("Email: pro@classkick.com");l.font("GothamRoundedMedium").fontSize(M).fillColor(L).text(""+t.type.slice(0,1).toUpperCase()+t.type.slice(1),f+190,m);l.font("GothamRoundedBook").fontSize(M).fillColor(L).text(t.name,f+190,m+15,{width:166}).text(t.street||"",{width:166}).text(t.displayLocation,{width:166});l.font("GothamRoundedMedium").fontSize(M).fillColor(L).text("Quote #"+e.quote,f+361,m);l.font("GothamRoundedBook").fontSize(M).fillColor(L).text("Quote Issued: "+e.createdAsDate,f+361,m+15).text("Quote Expires: "+e.expiresAsDate);var v=g+140;l.font("GothamRoundedMedium").fontSize(P).fillColor(N).text("Quote Order Details",f,v);l.font("GothamRoundedBook").fontSize(D).fillColor(L).text(i.description+" Memberships are active upon purchase and end June 30th after the school year designated below. A "+t.type+" membership includes unlimited teachers and up to 1,500 students within each school.",f,v+30);l.font("GothamRoundedBook").fontSize(D).fillColor(L).text("In order to take advantage of any promotional discounts, this quote must be paid before the quote expiration date shown above.",f,v+75);var _=v+115;this.showFinancialAidLink&&(_+=15);this._createDetailsTable(l,f,_,p,e,i,a);l.moveTo(f,g+460).lineTo(f+492,g+460).dash(10,{space:10}).stroke();l.font("GothamRoundedMedium").fontSize(P).fillColor(N).text("1. Submit a purchase order",-70,g+480);l.font("GothamRoundedBook").fontSize(R).fillColor(u["default"].CK_GREEN).undash().text(this._orderPageLink,f,g+505,{link:this._orderPageLink,underline:!0});l.font("GothamRoundedMedium").fontSize(P).fillColor(N).text("2. Then mail check if not paying by credit card",f+p/2,g+480);l.rect(f+p/2,g+505,p/2,75).lineWidth(1);l.font("GothamRoundedBook").fontSize(R).fillColor(L).text("CLASSWORK CO DBA Classkick",f+p/2,g+520).text("PO Box 772728").text("Area "+this.order.quote).text("Detroit, MI 48277-2728");l.font("GothamRoundedBook").fontSize(R).fillColor(L).text("In the check memo please include the Area number: "+this.order.quote,f+p/2,g+580);l.font("GothamRoundedBook").fontSize(M).fillColor(L).text("Our W-9 below (page 2 of this quote) or you can download it at here: ",f,v+481,{width:p,continued:!0}).fillColor(u["default"].CK_GREEN).text("classkick.com/w9",{link:this._w9Link,underline:!0});this._renewalPolicy(l,f,v+498,p);l.addPage();l.image(this._W9,50,0,{scale:.4});l.end();d.on("finish",function(){var e=d.toBlob("application/pdf"),t=new File([e],n.fileName);c.resolve(t)});return c.promise}this._errorDialog(this.$mdDialog,"Sorry, there was a problem creating your quote.","Please email pro@classkick.com")}},{key:"_createDetailsTable",value:function(e,t,n,i,r,s,o){e.rect(t,n,i,25).lineWidth(1).fillAndStroke(F);e.font("GothamRoundedMedium").fontSize(R).fillColor(L).text("Description",t+7,n+7);e.font("GothamRoundedMedium").fontSize(R).fillColor(L).text("# of School Years",t+205,n+7);e.font("GothamRoundedMedium").fontSize(R).fillColor(L).text("Qty",t+367,n+7);e.font("GothamRoundedMedium").fontSize(R).fillColor(L).text("Quote Price",t+414,n+7,{width:70,align:"right"});var a=45;e.rect(t,n+25,360,a).lineWidth(1).stroke(F);e.font("GothamRoundedBook").fontSize(D).text(s.description,t+7,n+37);e.rect(t+198,n+25,162,a).lineWidth(1).stroke(F);var c=r.duration+" school year"+(r.duration>1?"s":""),l="Today";r.start.isAfter(moment())&&(l="July 1, "+r.start.year());e.font("GothamRoundedBook").fontSize(D).text(c,t+205,n+32).text("Start: "+l).text("End: June 30, "+r.end.year());e.rect(t+360,n+25,50,a).lineWidth(1).stroke(F);e.font("GothamRoundedBook").fontSize(D).text(r.quantity,t+367,n+37);e.rect(t+410,n+25,82,a).lineWidth(1).stroke(F);e.font("GothamRoundedBook").fontSize(D).text(this.currency(r.totalPrice),t+414,n+37,{width:70,align:"right"});var d=0,h=n+a+25;if(o.length>0){d=40+9*(o.length-1);this._createPromotionRow(e,t,h,d,r,o)}var f=h+d;e.rect(t,f,492,30).lineWidth(1).fillAndStroke(F);e.font("GothamRoundedMedium").fontSize(R).fill(L).text("Total",t+7,f+10);e.font("GothamRoundedMedium").fontSize(R).fill(L).text(this.currency(r.total),t+414,f+10,{width:70,align:"right"});e.font("GothamRoundedBook").fontSize(M).fillColor(L).text("Visit our ",t,f+45,{width:i,continued:!0}).fillColor(u["default"].CK_GREEN).text("FAQs",{link:this._faqsLink,underline:!0,continued:!0}).fillColor(L).text(" for more details",{underline:!1,continued:!0});this._faqsSpacingY=f+280}},{key:"_createPromotionRow",value:function(e,t,n,i,r,s){e.rect(t,n,492,i).lineWidth(1).stroke(F);s.forEach(function(i,r){e.font("GothamRoundedBook").fontSize(D).text(""+i.description,t+7,n+11+12*r)});e.font("GothamRoundedBook").fontSize(D).text(this.currency(-1*r.totalDiscount),t+414,n+11,{width:70,align:"right"})}},{key:"_renewalPolicy",value:function(e,t,n,i){e.font("GothamRoundedBook").fontSize(M).fillColor(L).text("By submitting a payment or purchase order, you are agreeing to the Classkick Terms of Service found at ",t,n,{width:i,continued:!0}).fillColor(u["default"].CK_GREEN).text("classkick.com/terms",{link:this._termsOfServiceLink,underline:!0,continued:!0}).fillColor(L).text(", the terms and conditions of which are hereby expressly incorporated herein by reference.",{underline:!1,continued:!0})}},{key:"_renderPDF",value:function(e){var t=this;this._imageEditService.pdfFromFile(e).then(function(e){e.getPage(1).then(function(e){var n=e.getViewport(1.5),i=angular.element(".order-canvas")[0],r=i.getContext("2d");i.height=n.height;i.width=n.width;e.render({canvasContext:r,viewport:n}).promise.then(function(){t._renderOverlay();t._state=t.ViewQuote;t.$timeout(function(){}).then(function(){return t.$timeout(function(){});
})})});e.getPage(2).then(function(e){var t=e.getViewport(1.5),n=angular.element(".w9-canvas")[0],i=n.getContext("2d");n.height=t.height;n.width=t.width;e.render({canvasContext:i,viewport:t}).promise.then(function(){})})})}},{key:"_renderOverlay",value:function(){var e=this,t=angular.element(".order-overlay svg")[0],n=new Snap(t),i=n.select(".root");i.clear();i.text(632,208,"Cancel this quote").attr({fill:u["default"].CK_GREEN,fontFamily:"GothamRoundedMedium",fontSize:"12px",textDecoration:"underline"});i.rect(629,192,120,22).attr({fill:"transparent",cursor:"pointer"}).click(function(){return e.cancelOrder()});i.text(505,this.showFinancialAidLink?550:530,"Change this").attr({fill:u["default"].CK_GREEN,fontFamily:"GothamRoundedMedium",fontSize:"14px",textDecoration:"underline"});i.rect(395,520,220,45).attr({fill:"transparent",cursor:"pointer"}).click(function(){return e.updatePurchasePeriod()});if(this.showFinancialAidLink){i.text(90,472,"View Financial Aid Application").attr({fill:u["default"].CK_GREEN,fontFamily:"GothamRoundedMedium",fontSize:"14px",textDecoration:"underline"});i.rect(90,455,215,25).attr({fill:"transparent",cursor:"pointer"}).click(function(){return e.openFinancialAidApplication()})}i.rect(90,840,330,35).attr({fill:"transparent",cursor:"pointer"}).click(function(){return e.highlightSubmitButtons()});i.rect(530,1018,120,20).attr({fill:"transparent",cursor:"pointer"}).click(function(){return e.goToW9()});i.rect(90,1060,135,20).attr({fill:"transparent",cursor:"pointer"}).click(function(){return e.goToTOS()});i.rect(90,this._faqsSpacingY,200,20).attr({fill:"transparent",cursor:"pointer"}).click(function(){return e.goToFAQs()})}},{key:"currency",value:function(e){return this.$filter("currency")(e,"$",0)}},{key:"orderByCreditCard",value:function(){this._breadcrumbService.go("root.payment-order",{orderId:this.orderId})}},{key:"orderByPurchaseOrder",value:function(){this._breadcrumbService.go("root.purchase-order",{orderId:this.orderId})}},{key:"cancelOrder",value:function(){var e=this,t=this._orderService.cancel(this.orderId);this._loadingDialog(this.$mdDialog,t);t.then(function(){e._state=e.ViewCancelled})}},{key:"openFinancialAidApplication",value:function(){var e=this;this._financialAidDialog(this.$mdDialog,this._order).then(function(t){var n=t.name,i=t.email,r=t.role;e._submitFinancialAidApplication(n,i,r)})}},{key:"_submitFinancialAidApplication",value:function(e,t,n){var i=this,r=this.$q.all([this._updateOrder(this._order.start,this._order.end,!0),this._organizationService.addAdmin(this._organization.id,e,t,n)]);this._loadingDialog(this.$mdDialog,r);r.then(function(){var e=i._order._activeCoupons.find(function(e){return e.id===i._finAidCouponId});i._confirmDialog(i.$mdDialog,"Congratulations! We have approved your "+i._organization.type+"'s financial aid application","We removed $"+e.discount+" per school per year from your current order",!0)})}},{key:"updatePurchasePeriod",value:function(){var e=this;this._selectPurchasePeriodDialog(this.$mdDialog,this.organization,this.order).then(function(t){var n=t.start,i=t.end,r=e._updateOrder(n,i,e.order.financialAid);e._loadingDialog(e.$mdDialog,r)})}},{key:"_updateOrder",value:function(e,t,n){var i=this;return this._orderService.getCouponIds(this.organization.type,this.order.renewal,n,this._organization.virtual,e,t,this.order.created).then(function(r){i.order.start=e;i.order.end=t;i.order.financialAid=n;i.order.couponIds=r;return i._orderService.update(i.order)}).then(function(){return i._init()})}},{key:"highlightSubmitButtons",value:function(){var e=angular.element(".action-container .left")[0];if(e){(0,w["default"])(e,!1);E["default"].makeElementPulse(".action-container .left .md-button")}}},{key:"goToW9",value:function(){this.$window.open(this._w9Link,"_blank")}},{key:"goToTOS",value:function(){this.$window.open(this._termsOfServiceLink,"_blank")}},{key:"goToFAQs",value:function(){this.$window.open(this._faqsLink,"_blank")}},{key:"goToTeacherResourcesPage",value:function(){this._staticContentService.goToTeacherResourcesPage(!1)}},{key:"goToOrderPro",value:function(){this._breadcrumbService.go("root.order",{})}},{key:"goToLogin",value:function(){this._breadcrumbService.go("root.account-login",{})}},{key:"shareOrder",value:function(){this._orderManager.shareOrder(this._order)}},{key:"exportAsPDF",value:function(){this._pdf?saveAs(this._pdf,this._pdf.name):this._errorDialog(this.$mdDialog,"Whoops, there was a problem exporting the .PDF of your quote","If  you continue to have issues, please email support@classkick.com")}},{key:"_loadScript",value:function(e){var t=this.$q.defer(),n=this.$document[0].createElement("script");n.setAttribute("src",e);n.onload=function(){return t.resolve()};n.onerror=function(){return t.reject()};var i=angular.element(".order-detail")[0];i?i.appendChild(n):t.reject();return t.promise}},{key:"_getAsBuffer",value:function(e){return this._httpService.get(e,{responseType:"arraybuffer"})}},{key:"state",get:function(){return this._state}},{key:"Loading",get:function(){return"loading"}},{key:"Error",get:function(){return"error"}},{key:"ViewQuote",get:function(){return"view_quote"}},{key:"ViewInvoiced",get:function(){return"view_invoiced"}},{key:"ViewPaid",get:function(){return"view_paid"}},{key:"ViewPastDue",get:function(){return"view_past_due"}},{key:"ViewCancelled",get:function(){return"view_cancelled"}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"DefaultErrorMessage",get:function(){return"Sorry, there was a problem loading your quote"}},{key:"overlayStyle",get:function(){return{width:this.canvasContainer.width(),height:this.canvasContainer.height()}}},{key:"canvasContainer",get:function(){this._canvasContainer||(this._canvasContainer=angular.element(".canvas-container"));return this._canvasContainer}},{key:"orderId",get:function(){return this.$stateParams.orderId}},{key:"order",get:function(){return this._order}},{key:"organization",get:function(){return this._organization}},{key:"isLoggedIn",get:function(){return this._authService.isLoggedIn}},{key:"orderPlan",get:function(){return this._order&&this._order.plan}},{key:"orderPlanName",get:function(){return this.orderPlan&&this.orderPlan.description}},{key:"showFinancialAidLink",get:function(){return this._order&&this._order.renewal&&!this._order.financialAid}},{key:"fileName",get:function(){return c.FileUtil.removeForbiddenCharacters("order-"+this.orderId+".pdf")}}]);return e}();t["default"]=U;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(527),a=s(o),c=function(){function e(t,n,i,s,o){var c=this;r(this,e);this.$q=t;this.$mdDialog=n;this._orderService=i;this._selectedStart=o.start;this._selectedEnd=o.end;this._orgType=s.orgType;this._quantity=o.quantity||1;this._prices=void 0;this._hideThisYear=!1;this._isRenewal=o.renewal;this.$q.all({prices:this._orderService.getPrices(s.orgType,o.renewal,s.virtual,o.created),orders:this._orderService.getForOrganization(s.id)}).then(function(e){var t=e.prices,n=e.orders;c._prices=t;c._hideThisYear=a["default"].hasAlreadyPurchasedThisYear(n);c._isRenewal=a["default"].hasAlreadyPurchasedThisYear(n)||o.renewal})}e.$inject=["$q","$mdDialog","OrderService","organization","order"];i(e,[{key:"selectPurchasePeriod",value:function(e){e.selectPurchasePeriodForm.$invalid||(this.isValidPurchasePeriod?this.$mdDialog.hide({start:this._selectedStart,end:this._selectedEnd}):this._errorMessage="Invalid purchase period. Please select one or more consecutive years.")}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"prices",get:function(){return this._prices}},{key:"hideThisYear",get:function(){return this._hideThisYear}},{key:"isRenewal",get:function(){return this._isRenewal}},{key:"selectedStart",get:function(){return this._selectedStart},set:function(e){this._selectedStart=e}},{key:"selectedEnd",get:function(){return this._selectedEnd},set:function(e){this._selectedEnd=e}},{key:"orgType",get:function(){return this._orgType}},{key:"quantity",get:function(){return this._quantity},set:function(e){this._quantity=e}},{key:"isValidPurchasePeriod",get:function(){return this._isValidPurchasePeriod},set:function(e){this._errorMessage="";this._isValidPurchasePeriod=e}},{key:"errorMessage",get:function(){return this._errorMessage}}],[{key:"show",value:function(t,n,i){return t.show({controller:e,templateUrl:"app/components/select-purchase-period-dialog/select-purchase-period-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!1,locals:{organization:n,order:i}})}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(149),a=s(o),c=function(){function e(t,n,i){r(this,e);this.$mdDialog=t;this.$filter=n;this._order=i;this._name="";this._email="";this._role="";this._confirmation=!1;this._signature="";this._state=this.Application}e.$inject=["$mdDialog","$filter","order"];i(e,[{key:"currency",value:function(e){return this.$filter("currency")(e,"$",0)}},{key:"submit",value:function(){this._confirmation?this.$mdDialog.hide({name:this._name,email:this._email,role:this._role,signature:this._signature}):this._confirmationStyle={color:a["default"].CK_WARN}}},{key:"cancel",value:function(){this.$mdDialog.cancel()}},{key:"state",get:function(){return this._state}},{key:"Application",get:function(){return"application"}},{key:"Loading",get:function(){return"loading"}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"email",get:function(){return this._email},set:function(e){this._email=e}},{key:"role",get:function(){return this._role},set:function(e){this._role=e}},{key:"confirmation",get:function(){return this._confirmation},set:function(e){this._confirmation=e}},{key:"signature",get:function(){return this._signature},set:function(e){this._signature=e}},{key:"purchasePeriod",get:function(){return this._order&&this._order.start.year()+"-"+this._order.end.year()}},{key:"confirmationStyle",get:function(){return this._confirmationStyle}},{key:"perYearTotal",get:function(){return this._order.planPrice-this._order.unitDiscount}},{key:"quoteTotal",get:function(){return this._order.total}}],[{key:"show",value:function(t,n){return t.show({controller:e,templateUrl:"app/components/financial-aid-dialog/financial-aid-dialog.html",controllerAs:"ctrl",clickOutsideToClose:!0,escapeToClose:!0,locals:{order:n}})}}]);return e}();t["default"]=c;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(297)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(149),c=o(a),l=n(185),u=n(527),d=n(501),h=o(d),f=n(390),g=o(f),p=function(){function e(t,n,i,s,o,a,c,u,d,h){r(this,e);this.$q=t;this.$stateParams=n;this.$timeout=i;this.$scope=s;this.$filter=o;this._orderService=a;this._organizationService=c;this._stripeService=u;this._breadcrumbService=d;this._environment=h;this._order=void 0;this._organization=void 0;this._isLoading=!0;this._emailPattern=g["default"].EmailPattern;this._billingName="";this._billingEmail="";this._pointPersonEmail="";this._organizationName="";this._street="";this._city="";this._state="";this._stateOptions=l.UserProperties.STATE_OPTIONS;this._country="";this._countryOptions=l.UserProperties.COUNTRY_OPTIONS;this._purchaseOrder="";this._isFocused=!1;this._cardValue=void 0;this._cardInput=void 0;this._cardName="";this._cardZip="";this.isPayment&&this._createStripeCardElement();this._init()}e.$inject=["$q","$stateParams","$timeout","$scope","$filter","OrderService","OrganizationService","StripeService","BreadcrumbService","environment"];i(e,[{key:"_init",value:function(){var e=this;this.orderId||(this._error=new Error("Must include order id to submit order"));this._orderService.get(this.orderId).then(function(t){e._validate(t);e._order=t;e._billingEmail=e._order.billingEmail;return e._organizationService.get(t.organizationId)}).then(function(t){e._organization=t;e._organizationName=t.name;e._city=t.city;e._state=t.state;e._country=t.country;e._isLoading=!1})["catch"](function(t){e._error=t})}},{key:"_validate",value:function(e){e.status!==u.OrderStatus.Created&&this.goToOrderDetail()}},{key:"goToOrderDetail",value:function(){this._breadcrumbService.goBack("root.order-detail",{orderId:this.orderId})}},{key:"autocompleteFilter",value:function(e,t){return e?t.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())}):t}},{key:"_createStripeCardElement",value:function(){var e=this,t=[{family:"GothamRoundedBook",src:"url('"+this._environment.webUrlBase+"/assets/fonts/GothamRnd-Book.otf') format('opentype')"}],n={hidePostalCode:!0,style:{base:{color:c["default"].CK_HEADER_GREY,lineHeight:"26px",fontFamily:"GothamRoundedBook",fontSmoothing:"antialiased",fontSize:"16px"},invalid:{color:c["default"].CK_WARN,iconColor:c["default"].CK_WARN}},classes:{focus:"ck-card-focused",empty:"ck-card-empty"}};this._cardInput=this._stripeService.stripe.elements({fonts:t}).create("card",n);this._cardInput.mount(".card-element");this._cardInput.on("focus",function(){e._isFocused=!0;e.$timeout(function(){},0)});this._cardInput.on("blur",function(){e._isFocused=!1;e.$timeout(function(){},0)});this._cardInput.on("change",function(t){e._cardValue=t;e.$timeout(function(){},0)})}},{key:"submit",value:function(){var e=this;if(this.isPayment&&(angular.isUndefined(this._cardValue)||this._cardValue.empty)){this._cardValue=this.emptyCardValue;this._cardInput.focus()}else if(!this.isPayment||this.cardIsComplete){this._isLoading=!0;this.$q.all({updates:this._saveOrganizationUpdates(),token:this.isPayment?this._createToken(this._cardInput,this._cardName,this._cardZip):null}).then(function(t){var n=t.token;e._order.billingName=e._billingName;e._order.billingEmail=e._billingEmail;e._order.pointEmail=e._pointPersonEmail;e._order.purchaseOrder=e._purchaseOrder;return e._orderService.submit(e._order,n&&n.id)}).then(function(){e.goToOrderDetail()})["catch"](function(t){if(t.code===h["default"].INVALID_POINT_EMAIL){e.invalidPointEmailValidity=!1;e._isLoading=!1}else e._error=t})}}},{key:"_saveOrganizationUpdates",value:function(){this._organization.street=this._street;this._organization.city=this._city;this._organization.state=this._state;this._organization.country=this._country;return this._organizationService.update(this._organization)}},{key:"_createToken",value:function(e,t,n){return this._stripeService.createToken(e,{name:t,address_zip:n}).then(function(e){var t=e.token;return t})}},{key:"_currency",value:function(e){return this.$filter("currency")(e,"$",0)}},{key:"orderId",get:function(){return this.$stateParams.orderId}},{key:"isLoading",get:function(){return this._isLoading}},{key:"emailPattern",get:function(){return this._emailPattern}},{key:"error",get:function(){return this._error}},{key:"isPayment",get:function(){return this.$stateParams.isPayment}},{key:"orgType",get:function(){return this._organization&&this._organization.type}},{key:"billingName",get:function(){return this._billingName},set:function(e){this._billingName=e}},{key:"billingEmail",get:function(){return this._billingEmail},set:function(e){this._billingEmail=e}},{key:"pointPersonEmail",get:function(){return this._pointPersonEmail},set:function(e){this._pointPersonEmail=e}},{key:"organizationName",get:function(){return this._organizationName},set:function(e){this._organizationName=e}},{key:"city",get:function(){return this._city},set:function(e){this._city=e}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"stateOptions",get:function(){return this._stateOptions}},{key:"country",get:function(){return this._country},set:function(e){this._country=e}},{key:"countryOptions",get:function(){return this._countryOptions}},{key:"cardName",get:function(){return this._cardName},set:function(e){this._cardName=e}},{key:"cardZip",get:function(){return this._cardZip},set:function(e){this._cardZip=e}},{key:"keepEmpty",get:function(){},set:function(e){}},{key:"startYear",get:function(){return this._order&&this._order.start.year()}},{key:"endDate",get:function(){return this._order&&this._order.end.format("LL")}},{key:"endYear",get:function(){return this._order&&this._order.end.year()}},{key:"plan",get:function(){return this._order&&this._order.plan}},{key:"planDescription",get:function(){return this.plan&&this.plan.description}},{key:"quantity",get:function(){return this._order&&this._order.quantity}},{key:"total",get:function(){return this._order&&this._currency(this._order.total)}},{key:"purchaseOrder",get:function(){return this._purchaseOrder},set:function(e){this._purchaseOrder=e}},{key:"isFloating",get:function(){return{"md-input-focused":this._isFocused||this.notEmpty}}},{key:"cardIsComplete",get:function(){return this._cardValue&&this._cardValue.complete}},{key:"notEmpty",get:function(){return this._cardValue&&!this._cardValue.empty}},{key:"cardHasError",get:function(){return!!this.cardError}},{key:"cardError",get:function(){return this._cardValue&&this._cardValue.error}},{key:"formattedCardError",get:function(){return this.cardError?s({},this.cardError.code,!0):{}}},{key:"emptyCardValue",get:function(){return{empty:!0,error:{code:"required"}}}},{key:"invalidPointEmailValidity",set:function(e){this.$scope.submitOrderForm.pointPersonEmailInput.$setValidity("invalid-point-email",e)}}]);return e}();t["default"]=p;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(172)["default"],o=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(291),c=n(693),l=o(c),u=n(274),d=o(u),h=n(695),f=o(h),g=n(703),p=o(g),m=n(359),v=o(m),_=n(630),y=o(_),k=n(456),b=o(k),S=function(){function e(t,n,i,s,o,a,c,u,h,g,p,m,_,k,b,S,w){var C=this;r(this,e);this.$q=t;this.$log=n;this.$stateParams=i;this.$mdDialog=s;this.$mdToast=a;this._cacheService=c;this._helpRequestService=u;this._breadcrumbService=h;this._assignmentService=g;this._mixpanelService=p;this._rosterService=m;this._answerExportService=_;this._gradeExportService=k;this._exportService=b;this._platformHeaderService=S;this._authService=w;this._assignmentManager=new y["default"](this.$q,this.$mdDialog,this.$mdToast,this._cacheService,this._assignmentService,this._breadcrumbService,this._gradeExportService,this._answerExportService,this._mixpanelService,this._exportService);this._rosters=void 0;this._assignment=void 0;this._classCodes=void 0;this._assignmentId=i.assignmentId;this._lastRosterId=i.lastRosterId;this._platformHeaderService.setAssignmentId(this._assignmentId);this._chooseRosterDialog=l["default"].show;this._loadingDialog=d["default"].show;this._shareWithStudentDialog=f["default"].show;this._helpDialog=v["default"].show;o.$on("$destroy",function(){return C._destroy()});this._init()}e.$inject=["$q","$log","$stateParams","$mdDialog","$scope","$mdToast","CacheService","HelpRequestService","BreadcrumbService","AssignmentService","MixpanelService","RosterService","AnswerExportService","GradeExportService","ExportService","PlatformHeaderService","AuthService"];i(e,[{key:"_init",value:function(){var e=this;this.$q.all({user:this._cacheService.getUser(),assignment:this._cacheService.getAssignmentForUser(this._assignmentId),rosters:this._cacheService.getRostersForUser(),classCodes:this._cacheService.getClassCodesForUserAssignment(this._assignmentId),helpRequests:this._helpRequestService.getHelpRequestSetForAssignment(this._authService.currentUserId,this._assignmentId),proInfo:this._cacheService.getProInfo()}).then(function(t){e._initData(t.assignment,t.classCodes,t.rosters,t.helpRequests);e._user=t.user;e._proInfo=t.proInfo})["catch"](function(t){e._error=t;e.$log.error("error",t);return e.$q.reject(t)})}},{key:"_initData",value:function(e,t,n,i){var r=this;t&&(this._classCodes=t);n&&(this._rosterMap=n);if(i){if(i!==this._helpRequests){this._helpRequests&&this._helpRequests.stop();i.start()}this._helpRequests=i}this._assignment=e;this.name=this._assignment.name;this._rosters=this._assignment.rosters.map(function(e){return r._rosterMap.get(e)}).filter(function(e){return angular.isDefined(e)});this._rosterItems=this._rosters.map(function(e){return new p["default"](e,r.classCodeForRoster(e.id),r._handleRosterUpdated.bind(r),r._handleClassCodeUpdated.bind(r),r._mixpanelService)});this._rosterHelpRequests=new s(this._rosters.map(function(e){return[e.id,r._helpRequests.createChild(function(t){return t.rosterId===e.id})]}))}},{key:"_destroy",value:function(){this._platformHeaderService.setAssignmentId(void 0)}},{key:"goHome",value:function(){this._breadcrumbService.goBack("root.account.home",{},!0)}},{key:"goEdit",value:function(){this._breadcrumbService.go("root.account.assignment",{assignmentId:this._assignmentId,lastRosterId:this._lastRosterId},!0)}},{key:"goToWork",value:function(e){e||(e=this._lastRosterId||this.defaultRosterId);this._breadcrumbService.go("root.account.session.work",{assignmentId:this._assignmentId,rosterId:e},!0);e?this._mixpanelService.tappedViewStudentWork(this._assignmentId,a.Locations.ASSIGNMENT_EDIT_ROSTER):this._mixpanelService.tappedViewStudentWork(this._assignmentId,a.Locations.ASSIGNMENT_EDIT_TOP)}},{key:"chooseAddRoster",value:function(){var e=this;this._chooseRosterDialog(this.$mdDialog,this.$q,this._rosterMap,this.assignment,this.pro).then(function(t){e.addRoster(t.id,t.isNew)})}},{key:"addRoster",value:function(e,t){var n=this;this._loadingDialog(this.$mdDialog,this._modify(function(){return n._assignmentService.addOrUpdateRoster(n.assignment.id,e,!1)},!0,t))}},{key:"classCodeForRoster",value:function(e){return this._classCodes.find(function(t){return t.rosterId===e})}},{key:"shareWithStudentDialog",value:function(e){var t=this.classCodeForRoster(e.id);this._shareWithStudentDialog(this.$mdDialog,this.assignment,e,t,this.pro);this._mixpanelService.classCodeDialogOpened(e.id,this._assignmentId,a.Locations.ASSIGNMENT_EDIT)}},{key:"helpRequestsForRoster",value:function(e){return this._rosterHelpRequests&&this._rosterHelpRequests.get(e)}},{key:"removeRoster",value:function(e){var t=this;e===this._lastRosterId&&(this._lastRosterId="");this._loadingDialog(this.$mdDialog,this._modify(function(){return t._assignmentService.removeRoster(t.assignment.id,e)},!0,!1))}},{key:"_handleClassCodeUpdated",value:function(e){var t=this;this._assignmentService.addOrUpdateRoster(this._assignment.id,e.id,e.classCode.showStudentScores,e.classCode.lockStudentWork,e.classCode.hideStudentWork)["catch"](function(e){t.$log.error(e)})}},{key:"_handleRosterUpdated",value:function(e){var t=this;this._rosterService.update(e)["catch"](function(e){t.$log.error(e)})}},{key:"_modify",value:function(e,t,n){var i=this,r=e();r&&angular.isFunction(r.then)||(r=this.$q.resolve());return r.then(function(){return i.$q.all({assignment:i._cacheService.getAssignmentForUser(i._assignmentId,!0),classCodes:t?i._cacheService.getClassCodesForUserAssignment(i._assignmentId,!0):!1,rosters:n?i._cacheService.getRostersForUser(!0):!1})}).then(function(e){i._initData(e.assignment,e.classCodes,e.rosters)})["catch"](function(e){throw e})}},{key:"share",value:function(){this._assignmentManager.share(this.assignment)}},{key:"exportContentToPDF",value:function(){this._assignmentManager.exportContentToPDF(this.assignment)}},{key:"moveAssignmentToFolder",value:function(){this._assignmentManager.moveAssignmentToFolder(this.assignment)}},{key:"duplicate",value:function(){var e=this;this._assignmentManager.checkAssignmentLimit(this.pro,function(){e._assignmentManager.duplicate(e.assignment.id,e.assignment.name)})}},{key:"delete",value:function(){var e=this;this._assignmentManager["delete"](this.assignment).then(function(){e._breadcrumbService.goBack("root.account.home",{},!0)})}},{key:"exportGrades",value:function(){this._assignmentManager.exportGrades(this.assignment,this._rosters,this.pro)}},{key:"exportAnswers",value:function(){this._assignmentManager.exportAnswers(this.assignment,this._rosters,this.pro)}},{key:"makeFirstRosterPulse",value:function(){b["default"].makeElementPulse(".assignment-rosters .list-item:not(.list-button)")}},{key:"showHelp",value:function(){return this._showHelp(m.ViewHelps.AssignmentRosters)}},{key:"showAllowPeerHelpersHelp",value:function(){return this._showHelp(m.ViewHelps.AllowPeerHelpers)}},{key:"showShowStudentScoresHelp",value:function(){return this._showHelp(m.ViewHelps.ShowStudentScores)}},{key:"showLockAssignmentHelp",value:function(){return this._showHelp(m.ViewHelps.LockAssignment)}},{key:"showHideAssignmentHelp",value:function(){return this._showHelp(m.ViewHelps.HideAssignment)}},{key:"_showHelp",value:function(e){this._helpDialog(this.$mdDialog,e)}},{key:"error",get:function(){return this._error}},{key:"loading",get:function(){return!this.assignment&&!this.error}},{key:"assignment",get:function(){return this._assignment}},{key:"rosters",get:function(){return this._rosters}},{key:"rosterItems",get:function(){return this._rosterItems}},{key:"pro",get:function(){return this._proInfo}},{key:"showHelpMessage",get:function(){return this._rosters&&1===this._rosters.length&&this.isNewUser}},{key:"isNewUser",get:function(){this._isNewUser||(this._isNewUser=this._user&&this._user.isNewUser);return this._isNewUser}},{key:"hasGradeExport",get:function(){return this.pro&&this.pro.hasGradeExport}},{key:"hasFoldersFeature",get:function(){return this.pro&&this.pro.hasFoldersFeature}},{key:"defaultRosterId",get:function(){return this.rosters&&this.rosters[0]&&this.rosters[0].id}}]);return e}();t["default"]=S;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(291),o=function(){function e(t,n,i,s,o){r(this,e);this._roster=t;this._classCode=n;this._onRosterUpdated=i;this._onClassCodeUpdated=s;this._mixpanelService=o}i(e,[{key:"id",get:function(){return this._roster.id}},{key:"name",get:function(){return this._roster.name}},{key:"color",get:function(){return this._roster.color}},{key:"classCode",get:function(){return this._classCode}},{key:"showGrades",get:function(){return this.classCode&&this.classCode.showStudentScores},set:function(e){this.classCode.showStudentScores=e;this._onClassCodeUpdated(this);this._mixpanelService.sessionSettingToggled(s.SessionSettingTypes.ShowStudentScores,e)}},{key:"peerHelpers",get:function(){return this._roster.allowPeerHelp},set:function(e){this._roster.allowPeerHelp=e;this._onRosterUpdated(this._roster);this._mixpanelService.sessionSettingToggled(s.SessionSettingTypes.ShowStudentHelpers,e)}},{key:"lockStudentWork",get:function(){return this.classCode&&this.classCode.lockStudentWork},set:function(e){this.classCode.lockStudentWork=e;this._onClassCodeUpdated(this);this._mixpanelService.sessionSettingToggled(s.SessionSettingTypes.LockStudentWork,e)}},{key:"hideStudentWork",get:function(){return this.classCode&&this.classCode.hideStudentWork},set:function(e){this.classCode.hideStudentWork=e;this._onClassCodeUpdated(this);this._mixpanelService.sessionSettingToggled(s.SessionSettingTypes.HideStudentWork,e)}}]);return e}();t["default"]=o;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(536),o=(n(359),n(291)),a=function(){function e(t,n,i,s,a,c,l,u,d,h){r(this,e);this.$q=t;this.$state=n;this.$mdDialog=i;this._cacheService=c;this._authService=l;this._breadcrumbService=u;this._helpArticleService=d;this._mixpanelService=h;this._displayingInIpadApp=a.isClasskickIPadApp;this._userEmail=s.userEmail;this._cacheService.getArticles(!1);this._mixpanelService.teacherHelpCenter(o.TeacherHelpCenterViews.Main)}e.$inject=["$q","$state","$mdDialog","$stateParams","StaticService","CacheService","AuthService","BreadcrumbService","HelpArticleService","MixpanelService"];i(e,[{key:"returnToClasskick",value:function(){this.$state.go("root.account.home")}},{key:"goTo",value:function(e){this._breadcrumbService.go("root.help-category",{categoryId:e})}},{key:"goToSection",value:function(e){this.$state.go("root.help-section",{sectionId:e})}},{key:"goToArticle",value:function(e){this.$state.go("root.help-article",{articleId:e})}},{key:"goToHowToGenerateAClassCode",value:function(){var e=this;this._helpArticleService.search("How to generate a class code?").then(function(t){var n=t[0]&&t[0].id;e.goToArticle(n)})}},{key:"WhatIsClasskick",get:function(){return s.HelpArticleCategories.WhatIsClasskick}},{key:"GettingStarted",get:function(){return s.HelpArticleCategories.GettingStarted}},{key:"BeyondTheBasics",get:function(){return s.HelpArticleCategories.BeyondTheBasics}},{key:"BeyondTheBasics_Collaboration",get:function(){return s.HelpArticleSections.BeyondTheBasics_Collaboration}},{key:"Troubleshooting",get:function(){return s.HelpArticleCategories.Troubleshooting}},{key:"ConnectWithTeacher",get:function(){return s.HelpArticleCategories.ConnectWithTeacher}},{key:"ProfessionalDevelopment",get:function(){return s.HelpArticleCategories.ProfessionalDevelopment}},{key:"LearnAboutFeatures",get:function(){return s.HelpArticleCategories.LearnAboutFeatures}},{key:"ClasskickProUsers",get:function(){return s.HelpArticleCategories.ClasskickProUsers}},{key:"hidePro",get:function(){return this._displayingInIpadApp}},{key:"hideOutsideLinks",get:function(){return this._displayingInIpadApp}}]);return e}();t["default"]=a;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(536),a=n(291),c=n(186),l=s(c),u=function(){function e(t,n,i,s,o,a,c){r(this,e);this.$state=t;this.$stateParams=n;this._cacheService=s;this._authService=o;this._breadcrumbService=a;this._mixpanelService=c;this._displayingInIpadApp=i.isClasskickIPadApp;this._categoryId=this.$stateParams.categoryId;this._articles=[];this.init()}e.$inject=["$state","$stateParams","StaticService","CacheService","AuthService","BreadcrumbService","MixpanelService"];i(e,[{key:"init",value:function(){var e=this;this._categoryId&&o.HelpArticleCategories.isValid(this._categoryId)||this.$state.go("root.help");this._cacheService.getArticles(!1).then(function(t){e._articles=t.sort(function(e,t){return l["default"].NUMERIC_UNDEFINED_ASC(e.priority,t.priority)});e._mixpanelService.teacherHelpCenter(a.TeacherHelpCenterViews.Category,e._categoryId)})}},{key:"createNewArticle",value:function(e,t){var n=this;this._authService.authData&&this._authService.authData.isAdmin&&this._cacheService.createArticle(e,t).then(function(e){n.$state.go("root.help-article",{articleId:e.id})})}},{key:"filterBySection",value:function(e){return function(t){return t.sectionId===e}}},{key:"goToSection",value:function(e){this.$state.go("root.help-section",{sectionId:e})}},{key:"goToArticle",value:function(e){this.$state.go("root.help-article",{articleId:e})}},{key:"goToHelpCenter",value:function(){this.$state.go("root.help")}},{key:"goToCoaches",value:function(e){this.$state.go("root.help-coaches",{sectionId:e})}},{key:"returnToClasskick",value:function(){this.$state.go("root.account.home")}},{key:"categoryId",get:function(){return this._categoryId}},{key:"articles",get:function(){return this._articles}},{key:"categoryDisplay",get:function(){return this._categoryId&&o.HelpArticleCategoriesDisplayMap[this._categoryId]}},{key:"WhatIsClasskick",get:function(){return o.HelpArticleCategories.WhatIsClasskick}},{key:"WhatIsClasskick_Default",get:function(){return o.HelpArticleSections.WhatIsClasskick_Default}},{key:"WhatIsClasskick_Secondary",get:function(){return o.HelpArticleSections.WhatIsClasskick_Secondary}},{key:"GettingStarted",get:function(){return o.HelpArticleCategories.GettingStarted}},{key:"GettingStarted_Edit",get:function(){return o.HelpArticleSections.GettingStarted_Edit}},{key:"GettingStarted_Assign",get:function(){
return o.HelpArticleSections.GettingStarted_Assign}},{key:"GettingStarted_View",get:function(){return o.HelpArticleSections.GettingStarted_View}},{key:"BeyondTheBasics",get:function(){return o.HelpArticleCategories.BeyondTheBasics}},{key:"BeyondTheBasics_DeeperFeedback",get:function(){return o.HelpArticleSections.BeyondTheBasics_DeeperFeedback}},{key:"BeyondTheBasics_MeaningfulAssignments",get:function(){return o.HelpArticleSections.BeyondTheBasics_MeaningfulAssignments}},{key:"BeyondTheBasics_AnalyzeData",get:function(){return o.HelpArticleSections.BeyondTheBasics_AnalyzeData}},{key:"BeyondTheBasics_Collaboration",get:function(){return o.HelpArticleSections.BeyondTheBasics_Collaboration}},{key:"BeyondTheBasics_Grading",get:function(){return o.HelpArticleSections.BeyondTheBasics_Grading}},{key:"Troubleshooting",get:function(){return o.HelpArticleCategories.Troubleshooting}},{key:"Troubleshooting_Default",get:function(){return o.HelpArticleSections.Troubleshooting_Default}},{key:"Troubleshooting_Secondary",get:function(){return o.HelpArticleSections.Troubleshooting_Secondary}},{key:"ConnectWithTeacher",get:function(){return o.HelpArticleCategories.ConnectWithTeacher}},{key:"ConnectWithTeacher_K_2",get:function(){return o.HelpArticleSections.ConnectWithTeacher_K_2}},{key:"ConnectWithTeacher_3_5",get:function(){return o.HelpArticleSections.ConnectWithTeacher_3_5}},{key:"ConnectWithTeacher_6_8",get:function(){return o.HelpArticleSections.ConnectWithTeacher_6_8}},{key:"ConnectWithTeacher_9_12",get:function(){return o.HelpArticleSections.ConnectWithTeacher_9_12}},{key:"ProfessionalDevelopment",get:function(){return o.HelpArticleCategories.ProfessionalDevelopment}},{key:"ProfessionalDevelopment_PresentationMaterials",get:function(){return o.HelpArticleSections.ProfessionalDevelopment_PresentationMaterials}},{key:"ProfessionalDevelopment_BrandAssets",get:function(){return o.HelpArticleSections.ProfessionalDevelopment_BrandAssets}},{key:"LearnAboutFeatures",get:function(){return o.HelpArticleCategories.LearnAboutFeatures}},{key:"LearnAboutFeatures_Toolbar",get:function(){return o.HelpArticleSections.LearnAboutFeatures_Toolbar}},{key:"LearnAboutFeatures_GradingAndFeedback",get:function(){return o.HelpArticleSections.LearnAboutFeatures_GradingAndFeedback}},{key:"LearnAboutFeatures_Filters",get:function(){return o.HelpArticleSections.LearnAboutFeatures_Filters}},{key:"LearnAboutFeatures_Export",get:function(){return o.HelpArticleSections.LearnAboutFeatures_Export}},{key:"LearnAboutFeatures_More",get:function(){return o.HelpArticleSections.LearnAboutFeatures_More}},{key:"ClasskickProUsers",get:function(){return o.HelpArticleCategories.ClasskickProUsers}},{key:"ClasskickProUsers_WhatIsPro",get:function(){return o.HelpArticleSections.ClasskickProUsers_WhatIsPro}},{key:"ClasskickProUsers_Admins",get:function(){return o.HelpArticleSections.ClasskickProUsers_Admins}},{key:"ClasskickProUsers_Teachers",get:function(){return o.HelpArticleSections.ClasskickProUsers_Teachers}},{key:"ClasskickProUsers_Students",get:function(){return o.HelpArticleSections.ClasskickProUsers_Students}},{key:"hideOutsideLinks",get:function(){return this._displayingInIpadApp}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(534),a=(s(o),n(536)),c=n(286),l=s(c),u=n(186),d=s(u),h=n(291),f=function(){function e(t,n,i,s,o,a,c,u,d,h,f){r(this,e);this.$scope=t;this.$state=n;this.$stateParams=i;this.$mdDialog=s;this._hotkeys=o;this._cacheService=c;this._authService=u;this._helpArticleService=d;this._breadcrumbService=h;this._mixpanelService=f;this._staticService=a;this._displayingInIpadApp=this._staticService.isClasskickIPadApp;this._error=void 0;this._mode=this.ViewMode;this._articleId=this.$stateParams.articleId;this._article=void 0;this._articleTitle="";this._articleBody="";this._articlePriority=0;this._sectionArticles=[];this._nextArticle=void 0;this._confirmDialog=l["default"].show;this._authService.authData&&this._authService.authData.isAdmin&&this._initHotkeys(this.$scope,this._hotkeys);this.init()}e.$inject=["$scope","$state","$stateParams","$mdDialog","hotkeys","StaticService","CacheService","AuthService","HelpArticleService","BreadcrumbService","MixpanelService"];i(e,[{key:"init",value:function(){var e=this;this._articleId?this._cacheService.getArticle(this._articleId).then(function(t){e._article=t;e._articleTitle=e._article.title;e._articleBody=e._article.body;e._articlePriority=e._article.priority;return e._cacheService.getArticles()}).then(function(t){var n=t.filter(function(t){return t.sectionId===e._article.sectionId}).sort(function(e,t){return d["default"].NUMERIC_UNDEFINED_ASC(e.priority,t.priority)}),i=n.findIndex(function(t){return t.id===e._article.id});e._sectionArticles=n.filter(function(t){return t.id!==e._article.id});e._nextArticle=e._sectionArticles[i]||e._sectionArticles[0];e._mixpanelService.teacherHelpCenter(h.TeacherHelpCenterViews.Article,e._articleId)}):this._error=new Error("Article id is not defined")}},{key:"_initHotkeys",value:function(e,t){var n=this,i=this._staticService.isMac?"command+e":"ctrl+e";t.bindTo(e).add({combo:i,description:"Edit article",callback:function(){n.mode===n.ViewMode?n.mode=n.EditMode:n.saveArticle()}}).add({combo:"backspace",description:"Delete",callback:function(){n._article&&n._confirmDialog(n.$mdDialog,"Are you sure you want to delete this article?","").then(function(){return n._helpArticleService["delete"](n._article.id)}).then(function(){n.goToHelpCenter()})}})}},{key:"saveArticle",value:function(){var e=this;this._article.title=this._articleTitle;this._article.body=this._articleBody;this._article.priority=this._articlePriority;this._helpArticleService.update(this._article).then(function(){e.mode=e.ViewMode})}},{key:"goToHelpCenter",value:function(){this.$state.go("root.help")}},{key:"returnToClasskick",value:function(){this.$state.go("root.account.home")}},{key:"goToCategory",value:function(){this.$state.go("root.help-category",{categoryId:this._article.categoryId})}},{key:"goToSection",value:function(){this.$state.go("root.help-section",{sectionId:this._article.sectionId})}},{key:"goToArticle",value:function(e){this.$state.go("root.help-article",{articleId:e})}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e}},{key:"EditMode",get:function(){return"edit_mode"}},{key:"ViewMode",get:function(){return"view_mode"}},{key:"loading",get:function(){return!this.error&&!this.article}},{key:"error",get:function(){return this._error}},{key:"article",get:function(){return this._article}},{key:"articleTitle",get:function(){return this._articleTitle},set:function(e){this._articleTitle=e}},{key:"articleBody",get:function(){return this._articleBody},set:function(e){this._articleBody=e}},{key:"articlePriority",get:function(){return this._articlePriority},set:function(e){this._articlePriority=e}},{key:"categoryDisplay",get:function(){return this._article&&a.HelpArticleCategoriesDisplayMap[this._article.categoryId]}},{key:"sectionDisplay",get:function(){return this._article&&a.HelpArticleSectionsDisplayMap[this._article.sectionId]}},{key:"sectionArticles",get:function(){return this._sectionArticles}},{key:"nextArticle",get:function(){return this._nextArticle}},{key:"hideOutsideLinks",get:function(){return this._displayingInIpadApp}}]);return e}();t["default"]=f;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(536),a=n(186),c=s(a),l=n(291),u=function(){function e(t,n,i,s,o,a,c,l){r(this,e);this.$state=t;this.$stateParams=n;this._cacheService=s;this._helpArticleService=o;this._authService=a;this._breadcrumbService=c;this._mixpanelService=l;this._displayingInIpadApp=i.isClasskickIPadApp;this._sectionId=this.$stateParams.sectionId;this._articles=[];this.init()}e.$inject=["$state","$stateParams","StaticService","CacheService","HelpArticleService","AuthService","BreadcrumbService","MixpanelService"];i(e,[{key:"init",value:function(){var e=this;this._sectionId&&o.HelpArticleSections.isValid(this._sectionId)||this.$state.go("root.help");this._cacheService.getArticles().then(function(t){e._articles=t.filter(function(t){return t.sectionId===e._sectionId}).sort(function(e,t){return c["default"].NUMERIC_UNDEFINED_ASC(e.priority,t.priority)});e._categoryId=e._articles[0]&&e._articles[0].categoryId;e._mixpanelService.teacherHelpCenter(l.TeacherHelpCenterViews.Section,e._sectionId)})}},{key:"createNewArticle",value:function(e,t){var n=this;this._authService.authData&&this._authService.authData.isAdmin&&this._helpArticleService.create(e,t).then(function(e){n.$state.go("root.help-article",{articleId:e.id})})}},{key:"filterBySection",value:function(e){return function(t){return t.sectionId===e}}},{key:"goToCategory",value:function(){this.$state.go("root.help-category",{categoryId:this._categoryId})}},{key:"goToArticle",value:function(e){this.$state.go("root.help-article",{articleId:e})}},{key:"goToHelpCenter",value:function(){this.$state.go("root.help")}},{key:"returnToClasskick",value:function(){this.$state.go("root.account.home")}},{key:"sectionId",get:function(){return this._sectionId}},{key:"articles",get:function(){return this._articles}},{key:"categoryId",get:function(){return this._categoryId}},{key:"categoryDisplay",get:function(){return this._categoryId&&o.HelpArticleCategoriesDisplayMap[this._categoryId]}},{key:"sectionDisplay",get:function(){return this._sectionId&&o.HelpArticleSectionsDisplayMap[this._sectionId]}},{key:"WhatIsClasskick",get:function(){return o.HelpArticleCategories.WhatIsClasskick}},{key:"WhatIsClasskick_Default",get:function(){return o.HelpArticleSections.WhatIsClasskick_Default}},{key:"WhatIsClasskick_Secondary",get:function(){return o.HelpArticleSections.WhatIsClasskick_Secondary}},{key:"GettingStarted",get:function(){return o.HelpArticleCategories.GettingStarted}},{key:"GettingStarted_Edit",get:function(){return o.HelpArticleSections.GettingStarted_Edit}},{key:"GettingStarted_Assign",get:function(){return o.HelpArticleSections.GettingStarted_Assign}},{key:"GettingStarted_View",get:function(){return o.HelpArticleSections.GettingStarted_View}},{key:"BeyondTheBasics",get:function(){return o.HelpArticleCategories.BeyondTheBasics}},{key:"BeyondTheBasics_DeeperFeedback",get:function(){return o.HelpArticleSections.BeyondTheBasics_DeeperFeedback}},{key:"BeyondTheBasics_MeaningfulAssignments",get:function(){return o.HelpArticleSections.BeyondTheBasics_MeaningfulAssignments}},{key:"BeyondTheBasics_AnalyzeData",get:function(){return o.HelpArticleSections.BeyondTheBasics_AnalyzeData}},{key:"BeyondTheBasics_Collaboration",get:function(){return o.HelpArticleSections.BeyondTheBasics_Collaboration}},{key:"BeyondTheBasics_Grading",get:function(){return o.HelpArticleSections.BeyondTheBasics_Grading}},{key:"hideOutsideLinks",get:function(){return this._displayingInIpadApp}}]);return e}();t["default"]=u;e.exports=t["default"]},function(e,t,n){"use strict";var i=n(19)["default"],r=n(39)["default"],s=n(3)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(536),a=n(404),c=s(a),l=n(291),u=function(){function e(t,n,i,s,a,c,l,u,d){var h=this;r(this,e);this.$state=t;this.$stateParams=n;this.$window=i;this.$location=s;this._cacheService=c;this._authService=l;this._breadcrumbService=u;this._mixpanelService=d;this._displayingInIpadApp=a.isClasskickIPadApp;this._sectionId=this.$stateParams.sectionId;this._coaches=[{name:"Emily Dixon",description:"5th Grade, ELA",email:"edixon@bryan.k12.ga.us",twitter:"mrsemilydixon",instagram:"thecrazycatcuslady",url:"https://storage.googleapis.com/classkick-coaches/Emily_Dixon.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Doug Ragan",description:"Chemistry",email:"dragan@hpseagles.net",twitter:"dragan39",instagram:"draganchem",url:"https://storage.googleapis.com/classkick-coaches/Douglas_Ragan.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Heidi Samuelson",description:"4th Grade, Math and Science",email:"hsamuelson2013@gmail.com",twitter:"swampfrogfirst",instagram:"swampfrogs",url:"https://storage.googleapis.com/classkick-coaches/Heidi_Samuelson.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Jaime Lemon",description:"Math Coach",email:"jlemon@cbsd.org",twitter:"CBjlemon",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/jamie_lemon.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Christina Mazza",description:"7th grade, Math",email:"cmazza@skokie68.org",twitter:"msmazzamath",instagram:"christinamazza16",url:"https://storage.googleapis.com/classkick-coaches/christina_mazza.png",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Amber Henry",description:"2nd Grade, Spanish",email:"amhenry@rochester.k12.mn.us",twitter:"srtaamberhenry",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Amber_Henry.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Shelly Stanton",description:"Tech Coach",email:"stantons@billingsschools.org",twitter:"StantonShelly",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Shelly_Stanton.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Melina Rosales",description:"2nd Grade",email:"mrosales@incaschool.org",twitter:"",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Melina_Rosales.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Gabriel Bailly-Bailliere",description:"4th Grade, Spanish and Science",email:"gbailly@lasfuentes-alcaste.com",twitter:"gbailly",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Gabriel_Bailly_Bailliere.png",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Debbie Kryspin",description:"Tech Coach",email:"kryspind@flaglerschools.com",twitter:"debbiekryspin",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Debra_Guerin_Kryspin.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Brittany Wilson",description:"STEM, Instructional Coach",email:"bwilson@cbsd.org",twitter:"cb_MrsWilson",instagram:"StemTechular",url:"https://storage.googleapis.com/classkick-coaches/Brittany_Wilson.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Cathy Hink",description:"K-1, Tech Coach",email:"chink@apps.nsd.org",twitter:"mshinksclass",instagram:"cathyhink",url:"https://storage.googleapis.com/classkick-coaches/Cathy_Hink.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Katie Powell",description:"6th Grade, ELA",email:"katie.powell@southmont.k12.in.us",twitter:"beyond_the_desk",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Katie_Powell.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Stacy Hodges-Darrow",description:"Literacy Coach",email:"darrows@freelandschools.net",twitter:"10minteachers",instagram:"10minteachers",url:"https://storage.googleapis.com/classkick-coaches/Stacy_Hodges_Darrow.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Johanna Dreyer",description:"Kindergarten",email:"dreyerj@freelandschools.net",twitter:"10minteachers",instagram:"10minteachers",url:"https://storage.googleapis.com/classkick-coaches/Johanna_Dreyer.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Laura Hill",description:"7th and 8th Grade, Algebra",email:"laura.hill@durantisd.org",twitter:"",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Laura_Hill.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Amber Robichaud",description:"3rd Grade",email:"ar3916@fmcsd.ab.ca",twitter:"",instagram:"learn.grow.blossom",url:"https://storage.googleapis.com/classkick-coaches/Amber_Robichaud.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"LoriAnn Martin",description:"ELL Coach",email:"loriann.martin@warren.kyschools.us",twitter:"wcpsELcoach",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/LoriAnn_Martin.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Stephanie Etchison",description:"2nd Grade",email:"stephanie_etchison@nobl.k12.in.us",twitter:"stephetch_2nd",instagram:"etched_in_elementary",url:"https://storage.googleapis.com/classkick-coaches/Stephanie_Etchison.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Paige Smith",description:"2nd Grade, Math Coach",email:"paige.teach@gmail.com",twitter:"",instagram:"apaperlessclassroom",url:"https://storage.googleapis.com/classkick-coaches/Page_Smith.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Francesca Doran",description:"2nd Grade",email:"Fcdoran310@gmail.com",twitter:"",instagram:"kickingitpaperless",url:"https://storage.googleapis.com/classkick-coaches/Francesca_Doran.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Heather Van Osten",description:"3rd Grade",email:"vanosthe@collierschools.com",twitter:"VanOstenVME",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Heather_Van_Osten.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Tyffany Alexander",description:"Technology Teacher",email:"tyffany_alexander@abss.k12.nc.us",twitter:"tnalexander14",instagram:"tnykole77",url:"https://storage.googleapis.com/classkick-coaches/Tyffany_Alexander.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Mykel Salazar",description:"4th Grade",email:"Mykel.Salazar@k12.sd.us",twitter:"mwsalazar",instagram:"1andonlysupersalazar",url:"https://storage.googleapis.com/classkick-coaches/Mykel_Salazar.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Marie Liu",description:"Tech Coach",email:"lium@pearlandisd.org",twitter:"LittlesLiu",instagram:"pearlandlittles",url:"https://storage.googleapis.com/classkick-coaches/Marie_Fang.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Michelle Hicks",description:"Tech Coach",email:"hicksm@pearlandisd.org",twitter:"littleshicks",instagram:"mhicks009",url:"https://storage.googleapis.com/classkick-coaches/Michelle_Hicks.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Tevia Q Strand",description:"4th Grade",email:"tevia.strand@myprowler.org",twitter:"learninginC106",instagram:"teviaqstrand",url:"https://storage.googleapis.com/classkick-coaches/Tevia_Strand.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Elisabet Falcon",description:"6th Grade, Math",email:"elisabet.falcon@stpaul.k12.mn.us",twitter:"math6falcon",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Elisabet_Falcon.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Michelle Leggett",description:"Digital Media Specialist",email:"leggettm@pearlandisd.org",twitter:"mleggett",instagram:"mleggett1",url:"https://storage.googleapis.com/classkick-coaches/Michelle_Leggett.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Tangila Webb",description:"Tech Coach",email:"webbt@pearlandisd.org",twitter:"tw33terw",instagram:"minitan95",url:"https://storage.googleapis.com/classkick-coaches/Tangila_Webb.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Alicia Bubb",description:"7th Grade, Social Studies",email:"abubb@elmiracityschools.com",twitter:"",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Alicia_Bubb.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Julie M Richardson",description:"2nd Grade",email:"jrichardson7@wcpss.net",twitter:"super2ndgraders",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Julie_Richardson.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Melissa Molteni",description:"2nd Grade",email:"crmolten@smsd.org",twitter:"MoltenisMarvels",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Melissa_Molteni.png",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Bailey Mumm",description:"2nd Grade",email:"bmumm@ccsd1schools.net",twitter:"",instagram:"secondgradeserenity",url:"https://storage.googleapis.com/classkick-coaches/Bailey_Mumm.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Leslie Jones",description:"First Grade",email:"ldjones3212@gmail.com",twitter:"jonesjungleidea",instagram:"jonesjungleidea",url:"https://storage.googleapis.com/classkick-coaches/Leslie_Jones.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Chris Reger",description:"Lead Teacher",email:"cjreger@gmail.com",twitter:"",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Chris_Reger.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Slveig Zophonasdttir",description:"Assistant Professor",email:"sz@unak.is",twitter:"SolveigZ",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Solveig_Zophoniasdottir.jpeg",sections:[o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Jessica Cline",description:"ELL Coach",email:"jessica.cline@warren.kyschools.us",twitter:"WCPS_ELConsult",instagram:"wcps_elconsultant",url:"https://storage.googleapis.com/classkick-coaches/Jessica_Cline.JPG",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Sara Burris",description:"Tech Coach",email:"sara.burris@rollinghills.k12.oh.us",twitter:"teaching2tech",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Sara_Burris.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Barry Hoffman",description:"6th Grade, Math",email:"hoffmath@gmail.com",twitter:"hoffkids",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Barry_Hoffman.png",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Kami Butterfield",description:"3rd Grade",email:"butterk@usd508.org",twitter:"kamibutterfield",instagram:"teachingwithappitude",url:"https://storage.googleapis.com/classkick-coaches/Kami_Butterfield.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Kurt Knueve",description:"5th Grade",email:"krknueve@madison.k12.wi.us",twitter:"",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Kurt_Knueve.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Becky Meyer",description:"Instructional Coach",email:"rebeccameyer@sd54.org",twitter:"D54DLcoach",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Becky_Meyer.png",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Sara Criger",description:"Kindergarten",email:"scriger@wolves.k12.mo.us ",twitter:"Scriger",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Sara_Criger.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Traci Piltz",description:"Tech Coach",email:"piltzt@billingsschools.org",twitter:"",instagram:"traci.p",url:"https://storage.googleapis.com/classkick-coaches/Traci_Piltz.png",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Kimberly Abdul",description:"High School, Math",email:"atinukeabdul@gmail.com",twitter:"kimberly_abdul",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/coach_missing.png",sections:[o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Cynthia Ramirez",description:"Tech Coach",email:"cramirez@dpisd.org",twitter:"cynthia_edtech",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Cynthia_Ramirez.png",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Jessica Prado",description:"5th Grade, Bilingual/ELA",email:"jprado1@kleinisd.net",twitter:"jmanzano100",instagram:"bilingualbuho",url:"https://storage.googleapis.com/classkick-coaches/Jessica_Prado.png",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Jessica Brown",description:"8th Grade, ELA",email:"jessica.brown@lubbockisd.org",twitter:"mrsjabrown",instagram:"brown134preap",url:"https://storage.googleapis.com/classkick-coaches/Jessica_Brown.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Erica Rimbert",description:"2nd Grade",email:"rimbee@collierschools.com",twitter:"rimbert_erica",instagram:"mrsrimbert",url:"https://storage.googleapis.com/classkick-coaches/Erica_Rimbert.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Valerie Portante",description:"8th Grade, ELA",email:"ValeriePortante@sd54.org",twitter:"IKEMsPortante",instagram:"MsPortante_IKE",url:"https://storage.googleapis.com/classkick-coaches/Valerie_Portante.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Megan Troyer",description:"High School, Math",email:"megan.troyer@chsd117.org",twitter:"",instagram:"pinkthrulife",url:"https://storage.googleapis.com/classkick-coaches/Megan_Troyer.png",sections:[o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Chad Hoffman",description:"6th Grade, Science",email:"hoffman_c2@ccsdistrict.org",twitter:"Chad_W_Hoffman",instagram:"hoffa72002",url:"https://storage.googleapis.com/classkick-coaches/Chad_Hoffman.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Stacy Bigham",description:"Literacy Coach",email:"sbigham@wcpss.net",twitter:"stacy_bigham",instagram:"sbigham3",url:"https://storage.googleapis.com/classkick-coaches/Stacy_Bigham.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Wendy Liao",description:"Tech Coach",email:"liao.wendy@gmail.com",twitter:"WLIAO",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/coach_missing.png",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8,o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"T'helah Ben-Dan",description:"K-12, Hebrew",email:"thelah@thekefar.com",twitter:"",instagram:"thekefar",url:"https://storage.googleapis.com/classkick-coaches/T'helah_Ben-Dan.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8,o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Melissa Abraham",description:"7th-12 Grade, Math",email:"abrahamsanwom@isdedu.de",twitter:"paceprotagonist",instagram:"Melissa Abraham",url:"https://storage.googleapis.com/classkick-coaches/Melissa_Abraham-Sanwo.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8,o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Cami Finley",description:"Tech Coach",email:"cami_finley@usd465.com",twitter:"",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/coach_missing.png",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2,o.HelpArticleSections.ConnectWithTeacher_3_5,o.HelpArticleSections.ConnectWithTeacher_6_8,o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Sara Mulligan",description:"High School, Science",email:"secheramie@lpssonline.com",twitter:"",instagram:"scmulligan",url:"https://storage.googleapis.com/classkick-coaches/Sara_Mulligan.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Stacy Thibodeaux",description:"High School, Science",email:"svthibodeaux@lpssonline.com",twitter:"stacythib",instagram:"mrsthib",url:"https://storage.googleapis.com/classkick-coaches/Stacy_Thibodeaux.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_9_12]},{name:"Shayline Stanley",description:"2nd Grade",email:"sstanley@frontierschools.org",twitter:"",instagram:"shayline.o",url:"https://storage.googleapis.com/classkick-coaches/Shayline_Stanley.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_K_2]},{name:"Ria Kirby",description:"6th Grade, Math",email:"rkirby@k12.com",twitter:"",instagram:"",url:"https://storage.googleapis.com/classkick-coaches/Ria_Kirby.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Kristi Oliva",description:"6th Grade, Math",email:"kristi.oliva@ucps.org",twitter:"",instagram:"kristi.m.oliva",url:"https://storage.googleapis.com/classkick-coaches/Kristi_Oliva.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Kari Hires",description:"8th Grade, Math",email:"khires@hillsboroschools.net",twitter:"",instagram:"kabby15",url:"https://storage.googleapis.com/classkick-coaches/Kari_Hires.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_6_8]},{name:"Noelia Garza",description:"4th Grade",email:"noelia.garza@hcisd.org",twitter:"neya78",instagram:"bilingual4ever",url:"https://storage.googleapis.com/classkick-coaches/Noelia_Garza.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]},{name:"Gerri Flint",description:"5th Grade, Math & Science",email:"gerriflint@nixaschools.net",twitter:"techmcteach",instagram:"techmcteach",url:"https://storage.googleapis.com/classkick-coaches/Gerri_Flint.jpg",sections:[o.HelpArticleSections.ConnectWithTeacher_3_5]}].filter(function(e){return e.sections.some(function(e){return e===h._sectionId})});this.init()}e.$inject=["$state","$stateParams","$window","$location","StaticService","CacheService","AuthService","BreadcrumbService","MixpanelService"];i(e,[{key:"init",value:function(){this._sectionId&&o.HelpArticleSections.isValid(this._sectionId)||this.$state.go("root.help");this._mixpanelService.teacherHelpCenter(l.TeacherHelpCenterViews.Coaches,this._sectionId)}},{key:"filterBySection",value:function(e){return function(t){return t.sectionId===e}}},{key:"goToSection",value:function(e){this.$state.go("root.help-section",{sectionId:e})}},{key:"goToArticle",value:function(e){this.$state.go("root.help-article",{articleId:e})}},{key:"goToHelpCenter",value:function(){this.$state.go("root.help")}},{key:"goToCategory",value:function(e){this.$state.go("root.help-category",{categoryId:e})}},{key:"goToCoaches",value:function(e){this.$state.go("root.help-coaches",{sectionId:e})}},{key:"returnToClasskick",value:function(){this.$state.go("root.account.home")}},{key:"goToTwitterProfile",value:function(e){this.$window.open("https://twitter.com/"+e,"_blank")}},{key:"goToInstagramProfile",value:function(e){this.$window.open("https://www.instagram.com/"+e,"_blank")}},{key:"openPublicAssignmentPage",value:function(e){this.$window.open(c["default"].absRootUrl(this.$location)+"/#/users/"+e+"/shared","_blank")}},{key:"sectionId",get:function(){return this._sectionId}},{key:"sectionDisplay",get:function(){return this._sectionId&&o.HelpArticleSectionsDisplayMap[this._sectionId];
}},{key:"coaches",get:function(){return this._coaches}},{key:"ConnectWithTeacher",get:function(){return o.HelpArticleCategories.ConnectWithTeacher}},{key:"hideOutsideLinks",get:function(){return this._displayingInIpadApp}}]);return e}();t["default"]=u;e.exports=t["default"]}]);angular.module("classkickApp").run(["$templateCache",function(e){e.put("app/controllers/account/account.html",'<div ui-view=""></div>');e.put("app/controllers/account-clever/account-clever.html",'<div class="account-clever"><div class="root-content-parent enter-fade" ng-hide="ctrl.error"><div><div><i class="fa ck ck-loading ck-green fa-spin fa-5x"></i></div>Setting up Clever</div></div><div class="root-content-parent enter-fade" ng-show="ctrl.error"><div><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><div>{{ctrl.error}}</div><md-button ng-click="ctrl.goToLogin()">Log in Again</md-button></div></div></div>');e.put("app/controllers/account-login/account-login.html",'<div class="vertical-scroll-container"><div class="account-login" layout="column" layout-align="start center"><div flex="none" class="major-header"><a href="http://www.classkick.com"><img src="../assets/images/brand/classkick-logo-white.png"></a></div><form flex="none" name="accountLoginForm" class="body" ng-hide="ctrl.isLoading" layout="column" layout-align="start stretch" ng-submit="ctrl.loginToAccount()"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"><md-button class="bar-item" ng-click="ctrl.goBack()" aria-label="Go to login with Class Codes"><i class="fa ck ck-back ck-green"></i></md-button></div><div class="classkick-header" flex="none" layout="" layout-align="center center">Account Login</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start stretch"><p class="error-message" ng-show="!!ctrl.errorMessage">{{ctrl.errorMessage}}</p><md-button class="ck-secondary google-sign-in" ng-click="ctrl.googleSignIn()"><span layout="row" layout-align="center center"><span class="alignment-container" layout="row" layout-align="start center"><span class="img-container" layout="row" layout-align="center center"><img ng-src="../assets/images/google-icon.svg"></span> <span>Continue with Google</span></span></span></md-button><md-button class="ck-secondary clever-sign-in" ng-click="ctrl.linkToCleverAuth()"><span layout="row" layout-align="center center"><span class="alignment-container" layout="row" layout-align="start center"><span class="img-container" layout="row" layout-align="center center"><img ng-src="../assets/images/clever-logo.svg"></span> <span>Continue with Clever</span></span></span></md-button><md-input-container class="email-or-username"><span class="label">Email or Username</span> <input name="emailOrUsername" type="text" ng-model="ctrl.emailOrUsername" required="" aria-label="Enter email or username here" md-no-asterisk=""><div class="error-messages" ng-messages="accountLoginForm.emailOrUsername.$error"><div ng-message="required">Please enter email or username</div></div></md-input-container><md-input-container class="password"><span class="label">Password</span> <input name="password" type="password" ng-model="ctrl.password" md-no-asterisk="" aria-label="Enter password here" required=""><div class="error-messages" ng-messages="accountLoginForm.password.$error"><div ng-message="required">Please enter password</div></div></md-input-container><div><md-checkbox class="md-primary" ng-model="ctrl.rememberMe"><div class="contents">Remember Me</div></md-checkbox></div><md-button class="ck-primary" type="submit" aria-label="Log in to account">Log In</md-button><a class="forgot-password-button" ng-click="ctrl.goToResetPassword()" aria-label="Go to reset password view">Forgot Password?</a><div class="separator"></div><md-button class="signup-button ck-secondary" ng-click="ctrl.goToCreateAccountChoice()">Sign Up</md-button></div></form><div class="loading" ng-if="ctrl.isLoading" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div><div class="hidden"><div class="md-dialog-container no-account"><md-dialog><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.$mdDialog.hide()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Account Not Found</div><div class="ck-dialog-body"><div>Sorry, but we couldn\'t find an account matching "{{ctrl.notFoundLoginId}}".</div><div>You may create a new account by clicking the button below.</div></div><div class="ck-dialog-actions" layout="row" layout-align="end center"><md-button class="ck-primary" ng-click="ctrl.goToCreateAccountChoice()">Create New Account</md-button></div></md-dialog></div></div></div></div>');e.put("app/controllers/admin/admin.html",'<div class="admin" layout="column"><div class="header" flex="none"><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Add assignment"><i class="ck fa ck-menu"></i></md-button><div flex="" layout-align="center center" layout="row"><span class="classkick-header">Superuser</span></div></div><div class="content" flex="grow"><div class="section">Superuser: <strong>{{ctrl.adminUserId}}</strong></div><div class="section" ng-if="ctrl.signedInAsOther"><div>Signed in as: <strong>{{ctrl.currentUserId}}</strong></div><div><md-button ng-click="ctrl.signOutAsOther()">sign out</md-button></div></div><form name="signInAsOtherForm" class="section" ng-submit="ctrl.signInAsOther()"><div>Sign In as another user:</div><div layout="row" layout-align="start end"><md-input-container class="user-id"><span class="label">User ID (email or username)</span> <input name="userId" ng-model="ctrl.userId" aria-label="Enter the email or username of the account to super-use into"><div ng-messages="signInAsOtherForm.userId.$error"><div ng-message="fail">failed to log in</div></div></md-input-container><md-button type="submit" ng-disabled="!ctrl.userId.length">sign in</md-button></div></form><hr><form name="resetForm" class="section" ng-submit="ctrl.resetUserPassword()"><div>Reset User Account:</div><div layout="column" layout-align="start start"><md-input-container class="reset-email"><span class="label">Email</span> <input type="text" name="resetEmailInput" ng-model="ctrl.resetEmail" required="" aria-label="Enter the email of the account to reset"></md-input-container><md-input-container class="reset-new-email"><span class="label">New Email (optional)</span> <input type="text" name="resetNewEmailInput" ng-model="ctrl.resetNewEmail" aria-label="Enter the new email of the account to reset"></md-input-container><md-button type="submit" ng-disabled="!ctrl.resetEmail">Reset</md-button></div></form><hr><form name="deleteUserForm" class="section" ng-submit="ctrl.deleteUser()"><div>Delete user:</div><div layout="row" layout-align="start end"><md-input-container class="user-id"><span class="label">User ID (email or username)</span> <input name="userIdToDelete" ng-model="ctrl.userIdToDelete" aria-label="Enter the email or username of the account to delete"><div ng-messages="deleteUserForm.userIdToDelete.$error"><div ng-message="notfound">could not find user</div></div></md-input-container><md-button type="submit" ng-disabled="!ctrl.userIdToDelete.length">delete user</md-button></div></form><div class="section">User contracts:<div ng-if="!!ctrl.contracts == false || ctrl.contracts.length == 0">This user is not on any contracts</div><div class="contract" ng-repeat="contract in ctrl.contracts"><div>Name: {{contract.name}}</div><div>Plan: {{contract.planType}}</div><div>Expires: {{contract.expiresDisplay}}</div><div>Created: {{contract.createdDisplay}}</div><div>Trial: {{contract.isTrial}}</div><div>Id: {{contract.id}}</div><md-button ng-click="ctrl.deleteContract(contract)" class="contract-delete">DELETE</md-button></div></div><div class="section"><md-checkbox class="md-primary" ng-model="ctrl.hideNavText">Hide Superuser Tab Text</md-checkbox></div></div></div>');e.put("app/controllers/anon-student-assignment-feedback/anon-student-assignment-feedback.html",'<div class="anon-student-assignment-feedback" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" layout="row" layout-align="start center" flex=""><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="go back to assignment edit"><div class="contents"><i class="ck fa ck-back"></i></div></md-button><saving-indicator save-state="ctrl.model.saveState"></saving-indicator></div><div layout="row" layout-align="center center" flex="40"><span class="classkick-header truncate">{{ctrl.model.title}}</span></div><div hide-xs="" class="spacer" flex=""></div></div><assignment-toolbar ng-if="!ctrl.model.error && ctrl.isStudentAuthed" flex="" layout="column" layout-align="start start" options="ctrl.model.toolbarOptions" locked="ctrl.model.lockStudentWork"><assignment-question flex="" config="ctrl.model.assignmentQuestionConfig"></assignment-question></assignment-toolbar><div flex="grow" class="error" ng-if="ctrl.model.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/anon-student-assignment-overview/anon-student-assignment-overview.html",'<div class="anon-student-assignment-overview" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" flex="33" layout="row" layout-align="start stretch"><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open()" aria-label="account"><div class="contents"><i class="ck fa ck-profile"></i></div></md-button><md-menu-content class="anon-student-profile-menu" width="3"><md-menu-item><div class="username">Hello {{ctrl.username}}</div></md-menu-item><md-menu-item><md-button ng-disabled="ctrl.model.lockStudentWork" area-label="export to PDF" ng-click="ctrl.model.exportToPDF()">Export to PDF</md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-click="ctrl.logOut()" aria-label="log out">Log Out</md-button></md-menu-item></md-menu-content></md-menu><div class="class-code-link">{{:: ctrl.formattedClassCode}}</div></div><div layout="row" layout-align="center center" flex="33"><span class="classkick-header truncate">{{ctrl.model.assignmentTitle}}</span></div><div flex="33" layout="row" layout-align="end center"><help-inbox ng-if="ctrl.model.allowPeerHelp" help-inbox-metadata="ctrl.model.helpInboxMetadata" on-select="ctrl.goToFeedback(request)"></help-inbox><md-button ng-if="!!ctrl.model.data" class="feedback-inbox-button" ng-click="ctrl.openFeedbackMenu($event)" aria-label="Click here to view your feedback on this assignment"><div class="contents"><feedback-indicator feedback-list="ctrl.model.data.questionFeedbackList" show-icon="true"></feedback-indicator><md-tooltip md-delay="1500">New Feedback</md-tooltip></div></md-button></div></div><div flex="" ng-if="!ctrl.error && !ctrl.model.loading" class="content" layout="row" layout-align="center start" layout-wrap=""><div class="work" flex="none" ng-repeat="thumbnail in ctrl.model.thumbnails track by thumbnail.question.id" ng-click="ctrl.goToQuestion(thumbnail.question.id)"><div class="anchor"><div class="question-overlay" layout="column" layout-align="end stretch"><div class="question-overlay-bottom" layout="" layout-align="space-between center"><div class="question-number" layout="" layout-align="center center">{{$index + 1}}</div><div class="question-score" layout="" layout-align="center center"><grade-input ng-if="ctrl.model.data.showStudentScore(thumbnail.question.id)" ng-model="thumbnail.currentPoints" potential-score="thumbnail.potentialScore" readonly="true"></grade-input></div></div></div></div><assignment-sheet config="ctrl.model.assignmentSheetConfig(thumbnail.question.id)" class="small-canvas" flex="none"></assignment-sheet></div></div><div flex="grow" ng-if="ctrl.loading" layout="column" layout-align="start center"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p>Loading Assignment...</p></div><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/anon-student-assignment-work/anon-student-assignment-work.html",'<div class="anon-student-assignment-work" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" flex="33" layout="row" layout-align="start stretch"><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open()" aria-label="account"><div class="contents"><i class="ck fa ck-profile"></i></div></md-button><md-menu-content class="anon-student-profile-menu" width="3"><md-menu-item><div class="username">Hello {{ctrl.username}}</div></md-menu-item><md-menu-item ng-if="ctrl.hasExportStudentWork"><md-button ng-disabled="ctrl.model.lockStudentWork" area-label="export to PDF" ng-click="ctrl.model.exportToPDF()">Export to PDF</md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-click="ctrl.logOut()" aria-label="log out">Log Out</md-button></md-menu-item></md-menu-content></md-menu><md-button ng-click="ctrl.goToOverview()" class="bar-item back" aria-label="go to assignment overview"><div class="contents"><i class="ck fa ck-grid"></i><md-tooltip md-delay="1000" md-direction="bottom">Assignment Overview</md-tooltip></div></md-button><div class="class-code-link">{{:: ctrl.formattedClassCode}}</div><saving-indicator save-state="ctrl.model.saveState"></saving-indicator></div><div layout="row" layout-align="center center" flex="33"><span class="classkick-header truncate">{{ctrl.model.assignmentTitle}}</span></div><div flex="33" layout="row" layout-align="end center"><help-inbox ng-if="ctrl.model.allowPeerHelp" help-inbox-metadata="ctrl.model.helpInboxMetadata" on-select="ctrl.goToFeedback(request)"></help-inbox><md-button ng-if="!!ctrl.model.subscriptionData" class="feedback-inbox-button" ng-click="ctrl.openFeedbackMenu($event)" aria-label="Click here to view your feedback on this assignment"><div class="contents"><feedback-indicator feedback-list="ctrl.model.subscriptionData.questionFeedbackList" show-icon="true"></feedback-indicator><md-tooltip md-delay="1500">New Feedback</md-tooltip></div></md-button></div></div><assignment-toolbar ng-if="!ctrl.error && ctrl.isStudentAuthed" flex="" layout="column" layout-align="start start" options="ctrl.model.toolbarOptions" show-grade-input="ctrl.model.showStudentScore" locked="ctrl.model.lockStudentWork"><assignment-question flex="" config="ctrl.model.assignmentQuestionConfig"></assignment-question></assignment-toolbar><div class="loading" ng-if="ctrl.loading" layout="column" layout-align="center center"><i class="fa ck ck-loading ck-green fa-spin fa-5x"></i></div><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/assignment-edit/assignment-edit.html",'<div class="assignment-edit" layout="column" layout-align="start stretch"><div flex="none" class="header" layout="row" layout-align="start stretch"><div class="full-height" layout="row" layout-align="start stretch" flex=""><div flex="none"><md-button ng-click="ctrl.navigate(\'root.account.home\', { source: \'\'}, true)" class="bar-item back" aria-label="back"><div class="contents"><i class="ck fa ck-home"></i></div><md-tooltip md-delay="1500">Go home</md-tooltip></md-button></div><div class="assignment-name truncate">{{ctrl.name}}</div><saving-indicator flex="none" save-state="ctrl.saveState"></saving-indicator></div><section flex="none" class="nav-toggle" layout="row" layout-align="center center"><div class="background-border"></div><md-button class="left" disabled="">Edit</md-button><md-button class="middle" ng-click="ctrl.navToAssignmentRosters()">Assign</md-button><md-button class="right" ng-click="ctrl.navToSessionWork()">View Work</md-button></section><div class="full-height" layout="row" layout-align="end center" flex=""><md-button class="bar-item contextual-help" ng-click="ctrl.showHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i><md-tooltip md-delay="1500">Get Help</md-tooltip></md-button><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open($event)" aria-label="more options"><div class="contents"><i class="ck fa ck-moreoptions"></i></div></md-button><md-menu-content class="assignment-more-options-menu" width="4"><md-menu-item><md-button aria-label="Share assignment with students and colleagues" ng-click="ctrl.share()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-share"></i></span> <span>Share</span></div></md-button></md-menu-item><md-menu-item><md-button aria-label="Export slides to PDF" ng-click="ctrl.exportContentToPDF()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-export"></i></span> <span>Export Slides to PDF</span></div></md-button></md-menu-item><md-menu-item ng-if="ctrl.hasFoldersFeature"><md-button ng-click="ctrl.moveAssignmentToFolder()" aria-label="Move assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-move"></i></span> Move</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.duplicate()" aria-label="Duplicate assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-duplicate"></i></span> Duplicate</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.delete()" aria-label="Delete assignment {{:: ctrl.assignment.name}}"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-trash"></i></span> Delete</div></md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.exportGrades()" aria-label="Export current assignment\\\'s grades to .csv"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Grades</span><div class="anchor" ng-show="!ctrl.hasGradeExport || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.exportAnswers()" aria-label="Export current assignment\\\'s multiple choice and fill in the blank answers to .csv"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Answers</span><div class="anchor" ng-show="!ctrl.hasGradeExport || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item></md-menu-content></md-menu></div></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Assignment...</p></div><div flex="" class="body" ng-show="ctrl.assignment"><div ng-form="metadataForm" class="metadata"><div layout="column" layout-align="start stretch"><div layout="" layout-align="start start"><md-input-container flex="" md-no-float=""><span class="label">Name</span> <input md-no-asterisk="" name="name" ng-change="ctrl.fieldUpdated(metadataForm.name)" ng-model="ctrl.name" ng-required="true" ng-maxlength="80" ck-autofocus="ctrl.focusName" placeholder="Enter assignment name"><div class="error-messages" ng-messages="metadataForm.name.$error"><div ng-message="required">name is required</div><div ng-message="maxlength">name is too long</div></div></md-input-container><md-input-container class="subject-option" flex="none" md-no-float=""><span class="label">Subjects</span><md-select ck-select="" md-container-class="ck-select-menu" name="subjects" md-on-close="ctrl.fieldUpdated(metadataForm.grades)" ng-model="ctrl.subjects" aria-label="Select the subjects this assignment is related to" placeholder="--" multiple=""><md-optgroup><md-option ng-value="subject" ng-repeat="subject in ctrl.subjectOptions">{{::subject}}</md-option></md-optgroup></md-select></md-input-container><md-input-container class="grade-option" flex="none" md-no-float=""><span class="label">Grades</span><md-select ck-select="" md-container-class="ck-select-menu" name="grades" md-on-close="ctrl.fieldUpdated(metadataForm.grades)" ng-model="ctrl.grades" aria-label="Select the grades that this assignment is appropriate for" placeholder="--" multiple=""><md-optgroup><md-option ng-value="grade" ng-repeat="grade in ctrl.gradeOptions">{{::grade}}</md-option></md-optgroup></md-select></md-input-container><md-input-container class="access-option" flex="none" md-no-float=""><span class="label">Access</span><md-select ck-select="" md-container-class="ck-select-menu" name="access" ng-model="ctrl.access" ng-change="ctrl.warnPrivateAccess(metadataForm.access)" aria-label="Select the sharing setting for this assignment"><md-option ng-value="access" ng-repeat="access in ctrl.accessOptions">{{:: access.option}}</md-option></md-select></md-input-container></div><div layout="" layout-align="start start"><md-input-container class="md-block" flex="" md-no-float=""><span class="label">Description</span> <textarea name="description" ng-change="ctrl.fieldUpdated(metadataForm.description)" ng-maxlength="1000" ng-model="ctrl.description" aria-label="Description of the assignment"></textarea><div class="error-messages" ng-messages="metadataForm.description.$error"><div ng-message="maxlength">description may not exceed 1000 characters</div></div></md-input-container></div></div></div><md-content class="questions"><div class="slides-header"><div>Slides</div></div><ng-form name="questionScores"><div class="questions-container" layout="row" layout-align="start center" layout-wrap=""><div class="question-shell" id="{{::q.id}}" ck-draggable="" ck-dragstart="ctrl.moveQuestionManager.onDragStart(event, q.id)" ck-dragover="ctrl.moveQuestionManager.onDragOver(event, q.id)" ck-dragleave="ctrl.moveQuestionManager.onDragLeave(event, q.id)" ck-drop="ctrl.moveQuestionManager.onDrop(event, q)" ng-repeat="q in ctrl.assignment.questions track by q.id"><div class="question" ng-click="ctrl.navToEditQuestion(q.id)"><assignment-sheet config="ctrl.assignmentSheetConfigForIndex($index)"></assignment-sheet><div class="move-question-bar"></div><div class="question-mask" layout="row" layout-align="space-between"><div class="page-number" layout="row" layout-align="center center"><div>{{$index + 1}}</div></div><div layout="row" layout-align="end center"><grade-input ng-click="$event.stopPropagation()" ng-model="q.points" ng-change="ctrl.fieldUpdated()"></grade-input><div class="menu-button"><md-menu md-position-mode="target-right target"><md-button ng-click="$mdMenu.open($event)" aria-label="more options for assignment"><i class="ck ck-moreoptions"></i></md-button><md-menu-content width="2"><md-menu-item><md-button ng-click="ctrl.chooseMoveQuestion(q)" aria-label="Copy question"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-reorder"></i></span> Reorder</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.chooseCopyQuestion(q)" aria-label="Copy question"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-copy"></i></span> Copy</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.chooseCopyAllQuestions()" aria-label="Copy all questions"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-copyall"></i></span> Copy All</div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': !ctrl.hasCopiedQuestions}" ng-click="ctrl.choosePasteAllQuestions()" aria-label="Paste all questions"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-paste"></i></span> Paste</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.duplicateQuestion(q)" aria-label="Duplicate question"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-duplicate"></i></span> Duplicate</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.deleteQuestion(q)" aria-label="Delete assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-trash"></i></span> Delete</div></md-button></md-menu-item></md-menu-content></md-menu></div></div></div></div></div><div class="question-shell"><md-button class="add-question" ng-click="ctrl.addQuestion()" aria-label="add slide"><md-tooltip md-delay="500" md-direction="bottom">Create a new slide</md-tooltip><i class="ck ck-plus"></i></md-button></div></div></ng-form><div ng-if="ctrl.showHelpMessage" class="tip" layout="column" layout-align="center center"><span><a ng-click="ctrl.makeAddSlidePulse()">Add</a> or <a ng-click="ctrl.makeEditSlidePulse()">edit</a> slides, then <a ng-click="ctrl.makeAssignRosterPulse()">assign</a> a roster</span></div></md-content></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading this assignment</p></div></div>');e.put("app/controllers/assignment-edit/move-question-dialog.html",'<md-dialog class="move-question-dialog"><div class="dialog-nav" layout="row" layout-align="space-between"><div class="spacer"></div><div><md-button class="bar-item ck-green" ng-click="ctrl.cancel()" aria-label="cancel"><i class="ck ck-close"></i></md-button></div></div><div class="dialog-header"><div class="classkick-header">Move Question Sheet {{::ctrl.currentPosition}} to position:</div></div><md-dialog-content class="md-dialog-content"><md-list><md-list-item ng-repeat="pos in ctrl.positions" ng-click="ctrl.confirm(pos)" layout="row"><div flex=""></div><div flex="none">{{:: pos}}</div><div flex=""></div></md-list-item></md-list></md-dialog-content><md-dialog-actions layout="row" layout-align="end end"><md-button ng-click="ctrl.cancel()" aria-label="cancel">Cancel</md-button></md-dialog-actions></md-dialog>');e.put("app/controllers/assignment-edit-question/assignment-edit-question.html",'<div class="assignment-edit-question" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" layout="row" layout-align="start center" flex=""><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="go back to assignment edit"><div class="contents"><i class="ck fa ck-back"></i></div></md-button><saving-indicator save-state="ctrl.saveState"></saving-indicator></div><div layout="row" layout-align="center center" flex="33"><span class="classkick-header truncate">Edit Assignment: {{:: ctrl.assignmentName}}</span></div><div class="spacer" flex="33"></div></div><assignment-toolbar ng-if="!ctrl.error" flex="" layout="column" layout-align="start start" options="ctrl.toolbarOptions"><assignment-question flex="" config="ctrl.assignmentQuestionConfig"></assignment-question></assignment-toolbar><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/assignment-library/assignment-library.html",'<div class="assignment-library" layout="column" layout-align="start stretch"><div flex="none" class="header" layout="" layout-align="start center"><div flex="33" class="left" layout="" layout-align="start stretch"><md-button ng-if="ctrl.isAuthenticated" class="bar-item" ng-click="ctrl.goHome()" aria-label="back"><div class="contents" layout="" layout-align="start start"><i class="ck fa ck-home"></i> <span layout="" layout-align="start center">{{::ctrl.currentUsername}}</span><md-tooltip md-delay="1500">Go Home</md-tooltip></div></md-button><div layout="" layout-align="start center"><img class="logo" ng-if="!ctrl.isAuthenticated" ng-click="ctrl.goToLogin()" src="../assets/images/brand/logo-full-green.png"></div></div><div flex="33" layout="" layout-align="center center"><div class="classkick-header">Assignment Library</div></div><div flex="33"></div></div><div flex="" class="body" ng-if="!ctrl.loading && !ctrl.error" layout="column" layout-align="start stretch"><div flex="none" class="user-info" layout="column" layout-align="start stretch"><div class="classkick-header" layout="" layout-align="center center">Find teacher-created tips, assignment templates, and lesson plans to use in Classkick</div><div class="search-tools" layout="" layout-align="start center"><md-input-container class="subject-option" flex="none" md-no-float=""><md-select ck-select="" placeholder="Subject" md-container-class="ck-select-menu" name="subject" ng-model="ctrl.subject" ng-change="ctrl.resetDisplayAssignments()"><md-option ng-value="ctrl.ALL_SUBJECTS">All Subjects</md-option><md-option ng-value="subject" ng-repeat="subject in ctrl.subjectOptions">{{:: subject}}</md-option></md-select></md-input-container><md-input-container class="grade-option" flex="none" md-no-float=""><md-select ck-select="" placeholder="Grade" md-container-class="ck-select-menu" name="grade" ng-model="ctrl.gradeRange" ng-change="ctrl.resetDisplayAssignments()"><md-option ng-value="ctrl.ALL_GRADES">All Grades</md-option><md-option ng-value="range" ng-repeat="range in ctrl.gradeRangeOptions">{{:: range.name}}</md-option></md-select></md-input-container><div class="search-input" flex="" layout=""><div class="anchor"><i class="ck fa ck-search"></i></div><md-input-container flex="" md-no-float=""><input type="text" ng-model="ctrl.query" placeholder="Search by title and description..." ng-change="ctrl.resetDisplayAssignments()"></md-input-container></div></div></div><md-list flex=""><md-list-item class="assignment-preview-list-item" layout="row" layout-align="start stretch" layout-nowrap="" ng-repeat="assignment in ctrl.displayAssignments track by assignment.id"><span flex="none" class="assignment-sheet-container"><assignment-sheet ng-click="ctrl.goToAssignment(assignment)" config="ctrl.assignmentSheetConfigForAssignment(assignment)"></assignment-sheet></span> <span flex="" class="assignment-info" layout="column" layout-align="start stretch"><div ng-click="ctrl.goToAssignment(assignment)" class="assignment-title" flex="none">{{assignment.name}}</div><div class="assignment-description" ng-bind-html="assignment.brief | linky:\'_blank\'"></div><div class="assignment-tags" flex="none" layout="" layout-align="start center"><div class="subject">Subject: {{assignment.displaySubjects}}</div><div class="grade">Grade: {{assignment.displayGrades}}</div></div></span></md-list-item><div class="list-helper" ng-if="ctrl.displayAssignments.length === 0">We\'re sorry we can\'t find what you\'re looking for! Our library is mostly made up of assignments created by awesome teachers like yourself.<br>We encourage you to <a href="https://classkick.com/coaches">connect with a Classkick Coach</a> so they can help you brainstorm and create some of these assignments.<br><br>We are working on adding more to our assignment library. Have an idea or assignment template to share? Email us at hi@classkick.com!</div></md-list></div><div class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Assignment Library...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading the assignment library</p></div></div>');
e.put("app/controllers/assignment-rosters/assignment-rosters.html",'<div class="assignment-rosters" layout="column" layout-align="start stretch"><div flex="none" class="header" layout="row" layout-align="start stretch"><div class="full-height" layout="row" layout-align="start stretch" flex=""><div flex="none"><md-button ng-click="ctrl.goHome()" class="bar-item back" aria-label="back"><div class="contents"><i class="ck fa ck-home"></i></div><md-tooltip md-delay="1500">Go home</md-tooltip></md-button></div><div flex="" layout="" layout-align="start center"><div class="assignment-name truncate">{{ctrl.name}}</div></div></div><section flex="none" class="nav-toggle" layout="row" layout-align="center center"><div class="background-border"></div><md-button class="left" ng-click="ctrl.goEdit()">Edit</md-button><md-button class="middle" disabled="">Assign</md-button><md-button class="right" ng-click="ctrl.goToWork()">View Work</md-button></section><div class="full-height" layout="row" layout-align="end center" flex=""><md-button class="bar-item contextual-help" ng-click="ctrl.showHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i><md-tooltip md-delay="1500">Get Help</md-tooltip></md-button><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open($event)" aria-label="more options"><div class="contents"><i class="ck fa ck-moreoptions"></i></div></md-button><md-menu-content class="assignment-more-options-menu" width="4"><md-menu-item><md-button aria-label="Share assignment with students and colleagues" ng-click="ctrl.share()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-share"></i></span> <span>Share</span></div></md-button></md-menu-item><md-menu-item><md-button aria-label="Export slides to PDF" ng-click="ctrl.exportContentToPDF()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-export"></i></span> <span>Export Slides to PDF</span></div></md-button></md-menu-item><md-menu-item ng-if="ctrl.hasFoldersFeature"><md-button ng-click="ctrl.moveAssignmentToFolder()" aria-label="Move assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-move"></i></span> Move</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.duplicate()" aria-label="Duplicate assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-duplicate"></i></span> Duplicate</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.delete()" aria-label="Delete assignment {{:: ctrl.assignment.name}}"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-trash"></i></span> Delete</div></md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.exportGrades()" aria-label="Export current assignment\\\'s grades to .csv"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Grades</span><div class="anchor" ng-show="!ctrl.hasGradeExport || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.exportAnswers()" aria-label="Export current assignment\\\'s multiple choice and fill in the blank answers to .csv"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Answers</span><div class="anchor" ng-show="!ctrl.hasGradeExport || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item></md-menu-content></md-menu></div></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Assignment\'s Rosters...</p></div><div flex="" class="body" ng-show="ctrl.assignment && !ctrl.error" layout="column" layout-align="start stretch"><md-content flex="" class="rosters" layout="column" layout-align="start stretch"><div flex="none" class="list-header" layout="row" layout-nowrap=""><div class="col roster-name" flex="">Rosters</div><div class="col helps" flex="none"><div flex=""></div><div><i class="ck fa ck-hand"></i></div><div flex=""></div></div><div flex="none" class="col show-grades" layout="" layout-align="center center" ng-click="ctrl.showShowStudentScoresHelp()" aria-label="hide assignment on student dashboard table column"><div>Grades</div><div class="anchor"><md-button md-ink-ripple="false" class="contextual-help" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></div></div><div flex="none" class="col peer-helpers" layout="" layout-align="center center" ng-click="ctrl.showAllowPeerHelpersHelp()" aria-label="hide assignment on student dashboard table column"><div>Helpers</div><div class="anchor"><md-button md-ink-ripple="false" class="contextual-help" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></div></div><div flex="none" class="col hide-assignment" layout="" layout-align="center center" ng-click="ctrl.showHideAssignmentHelp()" aria-label="hide assignment on student dashboard so students can\'t see it"><div>Hide</div><div class="anchor"><md-button md-ink-ripple="false" class="contextual-help" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></div></div><div flex="none" class="col lock-assignment" layout="" layout-align="center center" ng-click="ctrl.showLockAssignmentHelp()" aria-label="lock assignment so students can\'t do further work"><div>Lock</div><div class="anchor"><md-button md-ink-ripple="false" class="contextual-help" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></div></div><div class="col wide" flex="none"><div flex=""></div><div>Class Code</div><div flex=""></div></div><div class="col roster-remove" flex="none"></div></div><md-list flex=""><md-list-item class="list-item list-button" layout="row" ng-click="ctrl.chooseAddRoster()" layout-nowrap=""><div class="col roster-name" flex="" layout="row" layout-align="start center">+ Assign a Roster</div></md-list-item><md-list-item ng-repeat="roster in ctrl.rosterItems" class="list-item" layout="row" layout-nowrap="" ng-click="ctrl.goToWork(roster.id)"><div class="col roster-name" flex="" layout="row" layout-align="start center"><span class="roster-circle" ng-style="{\'background-color\': roster.color}"></span> {{:: roster.name}}</div><div class="col helps" flex="none"><help-request-indicator help-requests="ctrl.helpRequestsForRoster(roster.id)"></help-request-indicator></div><div flex="none" class="col show-grades md-secondary"><ck-switch active="roster.showGrades"></ck-switch></div><div flex="none" class="col peer-helpers md-secondary"><ck-switch active="roster.peerHelpers"></ck-switch></div><div flex="none" class="col hide-assignment md-secondary"><ck-switch active="roster.hideStudentWork"></ck-switch></div><div flex="none" class="col lock-assignment md-secondary"><ck-switch active="roster.lockStudentWork"></ck-switch></div><div class="col wide md-secondary" flex="none"><md-button ng-click="ctrl.shareWithStudentDialog(roster)" class="bar-item wide md-button-text" aria-label="open share with student dialog"><div class="contents"><span>{{:: ctrl.classCodeForRoster(roster.id).format()}}</span> <i class="ck ck-link"></i></div></md-button></div><div class="col roster-remove md-secondary" flex="none"><md-button class="bar-item" ng-click="ctrl.removeRoster(roster.id)"><md-tooltip md-delay="1000" md-direction="top">Remove roster from Assignment</md-tooltip><i class="ck ck-close"></i></md-button></div></md-list-item><div ng-show="ctrl.showHelpMessage" class="tip">Click the <a ng-click="ctrl.makeFirstRosterPulse()">roster</a> to view students working</div></md-list></md-content></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading this assignment</p></div></div>');e.put("app/controllers/assignment-rosters/choose-roster-dialog.html",'<md-dialog class="choose-roster-dialog"><div class="dialog-nav" layout="row" layout-align="space-between"><div><md-button ng-show="ctrl.mode === ctrl.MODE_NEW" class="bar-item ck-green" ng-click="ctrl.toggleMode()" aria-label="cancel"><i class="ck ck-back"></i></md-button></div><div class="spacer"></div><div><md-button class="bar-item ck-green" ng-click="ctrl.cancel()" aria-label="cancel"><i class="ck ck-close"></i></md-button></div></div><md-dialog-content md-dynamic-height="" layout="column" layout-align="start stretch"><div class="choose-roster" flex="" ng-show="ctrl.mode === ctrl.MODE_CHOOSE" layout="column"><div flex="none" class="dialog-header"><div class="classkick-header">Assign a Roster</div></div><md-list flex=""><md-list-item class="list-button" ng-click="ctrl.toggleMode()">+ Create A New Roster</md-list-item><md-list-item class="roster" ng-repeat="roster in ctrl.availableRosters" ng-click="ctrl.confirm(roster.id)"><div layout="row" layout-align="start center"><span class="roster-circle" ng-style="{\'background-color\': roster.color}"></span> {{:: roster.name}}</div></md-list-item></md-list><md-dialog-actions layout="row" layout-align="end end"><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.importFromGoogleClassroom()" aria-label="Import from Google Classroom">Import from Google Classroom</md-button><div class="anchor" ng-hide="ctrl.pro.hasStudentAccounts && !ctrl.pro.isTrial"><span class="pro-tag">PRO</span></div></md-dialog-actions></div><div class="new-roster" ng-show="ctrl.mode === ctrl.MODE_NEW"><div class="dialog-header"><div class="classkick-header">Create a Roster</div></div><div class="new-roster-form" ng-form="newRosterForm" layout="column" layout-align="start stretch"><md-input-container class="roster-name" flex=""><label>Roster Name</label> <input name="name" ng-change="ctrl.fieldUpdated(newRosterForm.name)" ng-model="ctrl.rosterName" ng-required="true" ng-maxlength="36" md-autofocus=""><div ng-messages="newRosterForm.name.$error"><div ng-message="required">name is required</div><div ng-message="maxlength">name is too long</div></div></md-input-container><md-button class="roster-color" name="color" ng-click="ctrl.showColorMenu()" aria-label="change roster color"><div layout="row" layout-align="center center"><span class="roster-circle" ng-style="{\'background-color\': ctrl.rosterColor}"></span> Roster Color</div></md-button></div><md-dialog-actions><md-button ng-click="ctrl.cancel()" aria-label="cancel">Cancel</md-button><md-button ng-disabled="!newRosterForm.$valid" class="ck-primary" ng-click="ctrl.newRoster()" aria-label="cancel">Ok</md-button></md-dialog-actions></div></md-dialog-content></md-dialog>');e.put("app/controllers/assignment-teacher-feedback/assignment-teacher-feedback.html",'<div class="assignment-teacher-feedback-question" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" layout="row" layout-align="start stretch" flex=""><div flex="none" layout="" layout-align="start stretch"><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="go back to assignment watch"><div class="contents"><i class="ck fa ck-back"></i></div></md-button></div><saving-indicator save-state="ctrl.saveState"></saving-indicator></div><div layout="column" layout-align="center center" flex="50"><span class="truncate title">{{:: ctrl.teacherIsHelpingMessage}}</span></div><div flex="" layout="" layout-align="end stretch"><md-button class="bar-item contextual-help" ng-click="ctrl.showHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button><help-inbox ng-if="!!ctrl.helpInboxMetadata" help-inbox-metadata="ctrl.helpInboxMetadata" on-select="ctrl.onSelect(request)"></help-inbox></div></div><assignment-toolbar flex="" layout="column" layout-align="start start" ng-if="!ctrl.error" options="ctrl.toolbarOptions"><assignment-question flex="" config="ctrl.assignmentQuestionConfig" students="ctrl.students"></assignment-question></assignment-toolbar><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/assignments-list/assignments-list.html",'<div class="assignments-list" layout="column" layout-align="start stretch"><div flex="none" class="header"><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Open menu"><i class="ck fa ck-menu"></i></md-button><span class="assignments-list-title" layout="column" layout-align="center center"><span layout="" layout-align="center center">{{ctrl.assignmentsListTitle}}<md-button ng-if="!ctrl.showAssignmentLimit" class="contextual-help" ng-click="ctrl.showHelp()" aria-label="help" layout="row" layout-align="center center"><i class="fa ck ck-contextualhelp"></i></md-button></span> <span ng-if="ctrl.showAssignmentLimit" class="assignment-limit-anchor"><a class="assignment-limit" ng-click="ctrl.openAssignmentLimitPaywall(ctrl.assignmentsUsedCount, ctrl.assignmentsLimit)">{{ctrl.assignmentLimitCopy}}</a></span></span><div hide-xs="" class="search-input"><div class="anchor"><i class="ck fa ck-search"></i></div><md-input-container md-no-float=""><input type="text" ng-model="ctrl.query" placeholder="Search"></md-input-container></div><md-menu md-position-mode="target-right target"><md-button class="md-fab" ng-click="$mdMenu.open($event)" aria-label="Add assignment"><div class="inner"><i class="ck fa ck-plus"></i><md-tooltip md-delay="1000">Create Assignment</md-tooltip></div></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="ctrl.create()" aria-label="New Blank Assignment"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-assignment"></i></span> <span>New Blank Assignment</span></div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.createFromFile()" aria-label="Create From File"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-createfromfile"></i></span> <span>Create From File</span></div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.goToPremade()" aria-label="Browse Sample Assignments"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-assignmentmarketplace"></i></span> <span>Browse Assignment Library</span></div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.createFolder()" aria-label="Create new folder"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-folder"></i></span> <span>Create Folder</span><div class="anchor" ng-show="!ctrl.hasFoldersFeature || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item></md-menu-content></md-menu></div><div flex="" ng-hide="ctrl.loading || ctrl.error"><div class="breadcrumbs" ng-if="ctrl.showBreadcrumbs" layout="" layout-align="start center"><md-button ui-sref="root.account.nav.assignments" layout="" layout-align="center center" ck-draggable="" ck-drop="ctrl.onDropMyAssignments(event)">My Assignments</md-button><div ng-repeat="folder in ctrl.breadcrumbs" layout="" layout-align="start center"><i class="ck fa ck-pagernext"></i><md-button ng-hide="$last" ng-click="ctrl.goToFolder(folder)"><div class="breadcrumb">{{folder.name}}</div></md-button><div ng-if="$last" class="breadcrumb">{{folder.name}}</div></div></div><div class="list-header" layout="row" layout-nowrap=""><div flex=""><md-button class="col name" ng-class="{\'hide\': !ctrl.showName }" ng-click="ctrl.setOrToggleName()" aria-label="name table header"><div>Name <i ng-if="ctrl.showNameCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button class="col modified" ng-class="{\'hide\': !ctrl.showLastModified }" ng-click="ctrl.setOrToggleModified()" aria-label="last modified table header"><div>Last Modified <i ng-if="ctrl.showModifiedCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button class="col helps" ng-class="{\'hide\': !ctrl.showHelps}" ng-click="ctrl.setOrToggleHelps()" aria-label="help requests table header"><md-tooltip md-delay="1000" md-direction="top">Help requests</md-tooltip><div class="helps"><span class="request-carrot"></span> <span><i class="ck fa ck-hand"></i></span> <span class="request-carrot"><i ng-show="ctrl.showHelpsCarrot" class="ck fa ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></span></div></md-button></div><div flex="none"><md-button md-no-ink="" class="col tools" aria-label="tools table header"></md-button></div></div><md-list ng-class="{\'with-breadcrumbs\': ctrl.showBreadcrumbs}"><md-list-item id="{{::item.folder.id}}" ng-if="ctrl.hasFoldersFeature" class="list-item folder-item" ng-click="ctrl.goToFolder(item.folder)" ck-draggable="" ck-dragover="ctrl.onDragOver(event)" ck-dragleave="ctrl.onDragLeave(event)" ck-drop="ctrl.onDrop(event)" ng-repeat="item in ctrl.folders | orderBy: [ctrl.orderBy(), -\'folder.name\'] : !ctrl.isAscending | filter: ctrl.searchFilter()"><span flex="" class="col name {{::ctrl.showName ? \'\' : \'hide\'}}" layout="row" layout-align="start center"><i class="ck fa ck-icon-grey ck-folder"></i><div class="truncate">{{item.folder.name}}</div></span> <span flex="none" class="col modified {{::ctrl.showLastModified ? \'\' : \'hide\'}}"><div>{{item.folder.lastModifiedAsDate}}</div></span> <span flex="none" class="col helps {{ctrl.showHelps ? \'\' : \'hide\'}}"><help-request-indicator help-requests="item.helpRequests"></help-request-indicator></span> <span flex="none" class="col tools"><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%; margin-left: 60px;"><md-button class="bar-item" ng-click="$mdMenu.open($event)" aria-label="more options for folder"><div class="contents"><i class="ck fa ck-moreoptions"></i></div></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="ctrl.renameFolder(item.folder)" aria-label="Rename folder"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-rename"></i></span> Rename</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.moveAssignmentToFolder(item.folder)" aria-label="Move folder"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-move"></i></span> Move</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.deleteFolder(item.folder.id)" aria-label="Delete folder"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-trash"></i></span> Delete</div></md-button></md-menu-item></md-menu-content></md-menu></span></md-list-item><md-list-item id="{{::item.assignment.id}}" class="list-item" layout="row" layout-nowrap="" ck-draggable="" ck-dragstart="ctrl.onDragStart(event, item.assignment.id)" ck-dragend="ctrl.onDragEnd(event, item.assignment.id)" ng-click="ctrl.goToAssignment(item.assignment.id, false)" ng-class="{\'newly-copied-list-item\': item.newlyCopied}" ng-repeat="item in ctrl.assignmentListItems | orderBy: [ctrl.orderBy(), -\'assignment.name\'] : !ctrl.isAscending | filter: ctrl.searchFilter()"><span flex="" class="col name {{::ctrl.showName ? \'\' : \'hide\'}}" layout="row" layout-align="start center"><i class="ck fa ck-icon-grey ck-assignment"></i><div class="truncate">{{item.assignment.name}}</div></span> <span flex="none" class="col modified {{::ctrl.showLastModified ? \'\' : \'hide\'}}"><div>{{item.assignment.lastModifiedAsDate}}</div></span> <span flex="none" class="col helps {{ctrl.showHelps ? \'\' : \'hide\'}}"><help-request-indicator help-requests="item.helpRequests"></help-request-indicator></span> <span flex="none" class="col tools"><md-button class="bar-item" ng-click="ctrl.share(item.assignment)" aria-label="share assignment"><i class="ck fa ck-share"></i></md-button><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open($event)" aria-label="more options for assignment"><div class="contents"><i class="ck fa ck-moreoptions"></i></div></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="ctrl.watchAssignment(item.assignment.id)" aria-label="Edit assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-view"></i></span> View</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.goToAssignment(item.assignment.id, true)" aria-label="Assign roster to assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-assign"></i></span> Assign</div></md-button></md-menu-item><md-menu-item ng-if="ctrl.hasFoldersFeature"><md-button ng-click="ctrl.moveAssignmentToFolder(item.assignment)" aria-label="Move assignment into folder"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-move"></i></span> Move</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.duplicate(item.assignment.id, item.assignment.name)" aria-label="Duplicate assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-duplicate"></i></span> Duplicate</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.delete(item.assignment)" aria-label="Delete assignment {{:: item.assignment.name}}"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-trash"></i></span> Delete</div></md-button></md-menu-item></md-menu-content></md-menu></span></md-list-item><div ng-if="ctrl.showHelperMessage" class="list-helper">Learn how to <a ng-click="ctrl.showFirstSuccessHelp()">import your existing lessons</a> into Classkick</div></md-list></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Assignments...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading your assignments</p></div></div>');e.put("app/controllers/contract-user-edit/contract-user-edit.html",'<div class="contract-user-edit" layout="column" layout-align="start stretch" layout-nowrap=""><div class="header" flex="none" layout="row" layout-align="start stretch"><div flex="33" layout="row" layout-align="start stretch" class="left-side"><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="back"><div class="contents"><i class="ck fa ck-back"></i></div></md-button><saving-indicator save-state="ctrl.saveState"></saving-indicator></div><div class="classkick-header" flex="34">Edit User</div><div class="spacer" flex="33"></div></div><div ng-if="ctrl.user" class="body"><div ng-form="ctrl.contractUserForm" layout="row" layout-align="space-around start" layout-wrap=""><div layout="column" class="edit-profile-column" flex=""><md-input-container><label>First Name</label> <input name="firstName" ng-model="ctrl.firstName" ng-disabled="ctrl.isTeacher && !ctrl.isCurrentUser" ng-change="ctrl.fieldUpdated(ctrl.contractUserForm.firstName, ctrl.contractUserForm)" md-no-asterisk=""><div ng-messages="ctrl.contractUserForm.firstName.$error"><div ng-message="required">You must provide a first name</div></div></md-input-container><md-input-container><label>Last Name</label> <input name="lastName" ng-model="ctrl.lastName" ng-disabled="ctrl.isTeacher && !ctrl.isCurrentUser" ng-change="ctrl.fieldUpdated(ctrl.contractUserForm.lastName, ctrl.contractUserForm)" md-no-asterisk=""><div ng-messages="ctrl.contractUserForm.lastName.$error"><div ng-message="required">You must provide a last name</div></div></md-input-container></div><div layout="column" layout-align="space-between end" class="edit-profile-column" flex=""><md-input-container><label>Username</label> <input name="username" ng-model="ctrl.username" ng-disabled="ctrl.isTeacher && !ctrl.isCurrentUser" ng-change="ctrl.fieldUpdated(ctrl.contractUserForm.username, ctrl.contractUserForm)" pattern="{{::ctrl.usernamePattern}}" autocomplete="false"><div ng-messages="ctrl.contractUserForm.username.$error" role="alert"><div ng-message="pattern">please enter a valid username</div><div ng-message="id-required">a user must have either a username or an email</div><div ng-message="duplicate">This username is already in use by another user</div></div></md-input-container><md-input-container><label>Email</label> <input name="email" ng-model="ctrl.email" ng-disabled="ctrl.userHasGoogleAuth || (ctrl.isTeacher && !ctrl.isCurrentUser)" ng-change="ctrl.fieldUpdated(ctrl.contractUserForm.email, ctrl.contractUserForm)" pattern="{{::ctrl.emailPattern}}" autocomplete="false"><div ng-messages="ctrl.contractUserForm.email.$error" role="alert"><div ng-message="pattern">please enter a valid email</div><div ng-message="duplicate">This email is already in use by another user</div></div></md-input-container><md-button ng-if="ctrl.isStudent" ng-click="ctrl.resetPassword()">Reset Password</md-button></div></div><div class="user-organization" layout="row" flex="100" ng-if="ctrl.isContractAdmin"><div class="edit-profile-column" layout="column" layout-align="space-between start" layout-nowrap="" flex="50"><md-input-container><label>Role</label> <input name="role" ng-model="ctrl.role" disabled=""></md-input-container><md-checkbox ng-model="ctrl.isUserContractAdmin" ng-if="ctrl.isTeacher" class="md-primary" ng-disabled="ctrl.isCurrentUser">Organization Admin</md-checkbox></div><div class="edit-profile-column" layout="column" layout-align="space-between end" layout-nowrap="" flex="50"><md-input-container><label>Organization</label> <input name="organization" ng-model="ctrl.contract.name" disabled=""></md-input-container><md-button ng-click="ctrl.removeContractUser()" ng-hide="ctrl.isCurrentUser">Remove From Organization</md-button></div></div></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading User...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading this user</p></div></div>');e.put("app/controllers/contract-users-list/contract-users-list.html",'<div class="contract-users-list" layout="column" layout-align="start stretch"><div flex="none" class="header"><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Open menu"><i class="ck fa ck-menu"></i></md-button><span class="classkick-header" layout="row" layout-align="center center"><span>Manage Users</span></span><md-menu md-position-mode="target-right target"><md-button class="md-fab" ng-click="$mdMenu.open($event)" aria-label="Add contract user"><div class="inner"><i class="ck fa ck-plus"></i></div></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="ctrl.addTeacher()" aria-label="New Teachers">New Teachers</md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.addStudent()" aria-label="New Students">New Students</md-button></md-menu-item></md-menu-content></md-menu></div><div ng-hide="!ctrl._adminContracts.length" class="contract-options" layout="row"><md-input-container class="contract-organization"><md-select ck-select="" md-container-class="ck-select-menu" ng-model="ctrl._selectedContract" ng-change="ctrl.selectContract(ctrl._selectedContract)" ng-model-options="{ trackBy: \'$value.id\' }" aria-label="Contract"><md-option ng-value="contract" ng-repeat="contract in ctrl._adminContracts">{{contract.name}}</md-option></md-select></md-input-container><div ng-hide="!ctrl._adminContracts.length" layout="row"><md-input-container class="role-filter" md-no-float=""><md-select ck-select="" md-container-class="ck-select-menu" ng-model="ctrl.roleFilter" placeholder="Filter by Role" aria-label="Filter by type"><md-option ng-value="">All</md-option><md-option ng-repeat="role in ctrl.roles" ng-value="role">{{role}}</md-option></md-select></md-input-container><div hide-xs="" class="search-input"><div class="anchor"><i class="ck fa ck-search"></i></div><md-input-container md-no-float=""><input type="text" ng-model="ctrl.query" placeholder="Search"></md-input-container></div></div></div><div flex="" ng-hide="ctrl.loading || ctrl.error"><div class="list-header" layout="row" layout-nowrap=""><div flex="none"><md-button class="col first-name" ng-class="{\'hide\': !ctrl.showFirstName}" ng-click="ctrl.setOrToggleFirstName()" aria-label="first name table header"><div class="first-name">First Name <i ng-if="ctrl.showFirstNameCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button class="col last-name" ng-class="{\'hide\': !ctrl.showLastName}" ng-click="ctrl.setOrToggleLastName()" aria-label="last name table header"><div class="last-name">Last Name <i ng-if="ctrl.showLastNameCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex=""><md-button class="col email" ng-class="{\'hide\': !ctrl.showEmail}" ng-click="ctrl.setOrToggleEmail()" aria-label="email table header"><div class="email">Email or Username <i ng-if="ctrl.showEmailCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button class="col role" ng-class="{\'hide\': !ctrl.showRole}" ng-click="ctrl.setOrToggleRole()" aria-label="type table header"><div class="role">Type <i ng-if="ctrl.showRoleCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button class="col verified" ng-class="{\'hide\': !ctrl.showVerified}" ng-click="ctrl.setOrToggleVerified()" aria-label="type table header"><div class="verified">Verified <i ng-if="ctrl.showVerifiedCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button md-no-ink="" class="col tools" aria-label="tools table header"></md-button></div></div><md-list><div ng-repeat="user in ctrl.users | orderObjectBy: ctrl.orderBy() : !ctrl.isAscending | filter: ctrl.searchFilter()"><md-list-item id="{{::user.id}}" class="list-item" ng-click="ctrl.editUser(user.id)" ng-show="ctrl.showUserBasedOnRoleFilter(user)"><div flex="none" class="col first-name {{::ctrl.showFirstName ? \'\' : \'hide\'}}">{{::user.firstName}}</div><div flex="none" class="col last-name {{::ctrl.showLastName ? \'\' : \'hide\'}}">{{::user.lastName}}</div><div flex="" class="col email {{::ctrl.showEmail ? \'\' : \'hide\'}}">{{::user.email || user.username}}</div><div flex="none" class="col role {{::ctrl.showRole ? \'\' : \'hide\'}}">{{::ctrl.roleForUser(user)}}</div><div flex="none" class="col verified {{::ctrl.showVerified ? \'\' : \'hide\'}}">{{ctrl.verifiedDisplay(user)}}</div><div flex="none" class="col tools"><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%;"><md-button class="bar-item" ng-click="$mdMenu.open($event)" aria-label="More options for contract users"><div class="contents"><i class="ck fa ck-moreoptions"></i></div></md-button><md-menu-content width="3"><md-menu-item ng-if="ctrl.isUnverified(user)"><md-button ng-click="ctrl.verify(user)" aria-label="Rename folder"><div class="menu-item-content" layout="row" layout-align="start center">Verify membership</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.removeUserFromOrganization(user)" ng-disabled="ctrl.currentUserId === user.id" aria-label="Delete folder"><div class="menu-item-content" layout="row" layout-align="start center">Remove from organization</div></md-button></md-menu-item></md-menu-content></md-menu></div></md-list-item></div><div ng-if="ctrl.list.length < ctrl.USERS_HELPER_LIMIT" class="list-helper">Add a new user by pressing the "+" button above</div></md-list></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Users...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">{{ctrl.errorMessage}}</p></div></div>');
e.put("app/controllers/error/404.html",'<div class="error-page" layout="column"><div flex="none" class="header" layout="" layout-align="start center"><img class="logo" ui-sref="root.login" src="../assets/images/brand/logo-full-green.png"></div><div flex="" class="body" layout="column" layout-align="center center"><img class="bee" src="../assets/images/404.png"><div>{{ctrl.$stateParams.errorMessage ? ctrl.$stateParams.errorMessage : "Sorry, we couldn\'t find that page."}}</div><br><div>Please double check your url, or try to <a ui-sref="root.login">log in</a>.</div></div></div>');e.put("app/controllers/forgot-password/forgot-password.html",'<div class="forgot-password" layout="column" layout-align="start center"><div flex="none" class="major-header"><a href="http://www.classkick.com"><img src="../assets/images/brand/classkick-logo-white.png"></a></div><form flex="none" class="body" ng-hide="ctrl.isLoading" name="resetPasswordForm" layout="column" layout-align="start stretch" ng-submit="ctrl.resetPassword()"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="none" class="end"><md-button class="bar-item" ng-click="ctrl.goBack()" aria-label="Go back to account login"><i class="fa ck ck-back ck-green"></i></md-button></div><div class="classkick-header" flex="none" layout="" layout-align="center center">Reset Password</div><div flex="none" class="end"></div></div><div class="body-content" layout="column" layout-align="start stretch"><p ng-show="ctrl.isPasswordResetStart"><span>Students:</span><br><span class="direction">Please ask your teacher to reset your password.</span><br><br><span>Teachers:</span><br><span class="direction">Please enter your email address and we will send a link to reset your password.</span></p><md-input-container ng-show="ctrl.isPasswordResetStart" class="reset-password-email"><span class="label" ng-show="ctrl.isPasswordResetStart">Teacher\'s Email</span> <input name="emailInput" type="email" pattern="{{::ctrl.emailPattern}}" ng-model="ctrl.email" aria-label="Enter email of account to reset password for" required="" md-no-asterisk=""><div class="error-messages" ng-messages="resetPasswordForm.emailInput.$error"><div ng-message="required">Please enter an email address</div><div ng-message="pattern">Please enter a valid email address</div><div ng-message="error">{{ctrl.errorMessage}}</div></div></md-input-container><md-button ng-show="ctrl.isPasswordResetStart" class="reset-password-button ck-primary" type="submit" aria-label="Reset password">Submit</md-button><div class="success-message" ng-show="ctrl.isPasswordResetSuccess" layout="column" layout-align="space-around center"><i class="fa ck ck-check ck-green fa-3x"></i><p layout="" layout-align="center center">Email sent! Please check your email to reset your password!</p></div></div></form><div class="loading" ng-if="ctrl.isLoading" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div>');e.put("app/controllers/help/help.html",'<meta http-equiv="refresh" content="2;url=http://classkick.com/help"><div class="help-view"><div class="header" layout="" layout-align="start center"><div><img class="logo" src="../assets/images/brand/logo-full-white.svg"></div><div class="title">Help Center</div><div flex=""></div><a ng-hide="ctrl.hideOutsideLinks" ng-click="ctrl.returnToClasskick()">Return to Classkick</a></div><div class="body layout-align-start-center layout-column"><div class="contents"><div class="body-title" layout="" layout-align="center center">This page has moved.</div><div layout="" layout-align="center center"><p>Click <a href="http://classkick.com/help">here</a> if you are not automatically redirected.</p></div></div></div></div>');e.put("app/controllers/help-article/help-article.html",'<div class="help-article" layout="column" layout-align="start stretch"><div class="help-article-container" ng-hide="ctrl.loading || ctrl.error"><div class="header" layout="" layout-align="start center"><div><img class="logo" src="../assets/images/brand/logo-full-white.svg"></div><div class="title">Help Center</div><div flex=""></div><a ng-hide="ctrl.hideOutsideLinks" ng-click="ctrl.returnToClasskick()">Return to Classkick</a></div><div class="body" layout="column" layout-align="start center"><div class="body-container" layout="column" layout-align="start stretch"><div layout="" layout-align="space-between center"><div class="breadcrumbs" layout="" layout-align="start center"><a ng-click="ctrl.goToHelpCenter()">Help Center</a> <i class="ck fa ck-pagernext"></i> <a ng-click="ctrl.goToCategory()">{{ctrl.categoryDisplay}}</a> <i ng-if="ctrl.sectionDisplay" class="ck fa ck-pagernext"></i> <a ng-click="ctrl.goToSection()">{{ctrl.sectionDisplay}}</a></div><div class="search" layout="" layout-align="start center"><article-autocomplete></article-autocomplete></div></div><div class="divider"></div><div layout="" layout-align="start start"><div ng-if="ctrl.mode === ctrl.ViewMode" flex="" class="article-content"><div class="article-title">{{ctrl.articleTitle}}</div><div class="article-body" markdown-to-html="ctrl.articleBody"></div></div><div ng-if="ctrl.mode === ctrl.EditMode" ng-form="articleForm" flex="" class="article-content" layout="column" layout-align="start stretch"><md-input-container flex="" md-no-float=""><span class="label">Title</span> <input md-no-asterisk="" name="titleInput" ng-model="ctrl.articleTitle" ng-required="true" ng-maxlength="140" aria-label="Edit the title of the current article"><div class="error-messages" ng-messages="articleForm.titleInput.$error"><div ng-message="required">A title is required</div><div ng-message="maxlength">This title is too long</div></div></md-input-container><md-input-container class="md-block" flex="" md-no-float=""><span class="label">Body</span> <textarea name="bodyInput" ng-maxlength="2000" ng-model="ctrl.articleBody" aria-label="Edit the body of current article"></textarea><div class="error-messages" ng-messages="articleForm.bodyInput.$error"><div ng-message="maxlength">Body may not exceed 2000 characters</div></div></md-input-container><md-input-container flex="" md-no-float=""><span class="label">Priority</span> <input md-no-asterisk="" type="number" name="priorityInput" ng-model="ctrl.articlePriority" ng-required="true" aria-label="Edit the priority of the current article"><div class="error-messages" ng-messages="articleForm.priorityInput.$error"><div ng-message="required">A priority is required</div></div></md-input-container></div><div flex="none" class="section-articles" layout="column" layout-align="start start"><div>Articles in this Section</div><a ng-repeat="article in ctrl.sectionArticles" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a></div></div><div class="divider"></div><div ng-if="ctrl.nextArticle" class="next-article" layout="column" layout-align="start start"><div>Next Article</div><a ng-click="ctrl.goToArticle(ctrl.nextArticle.id)">{{ctrl.nextArticle.title}}</a></div></div></div></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Article...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading this article</p></div></div>');e.put("app/controllers/help-category/help-category.html",'<div class="help-category"><div class="header" layout="" layout-align="start center"><div><img class="logo" src="../assets/images/brand/logo-full-white.svg"></div><div class="title">Help Center</div><div flex=""></div><a ng-hide="ctrl.hideOutsideLinks" ng-click="ctrl.returnToClasskick()">Return to Classkick</a></div><div class="body-top" layout="column" layout-align="start center"><div class="body-top-container" layout="column" layout-align="start stretch"><div layout="" layout-align="space-between center"><div class="breadcrumbs" layout="" layout-align="start center"><a ng-click="ctrl.goToHelpCenter()">Help Center</a> <i class="ck fa ck-pagernext"></i> <span>{{ctrl.categoryDisplay}}</span></div><div class="search" layout="" layout-align="start center"><article-autocomplete></article-autocomplete></div></div><div class="divider"></div></div></div><div class="what-is-classkick" ng-if="ctrl.categoryId === ctrl.WhatIsClasskick" layout="column" layout-align="start center"><div class="category-title-container" layout="column" layout-align="start stretch"><div class="category-title">What is Classkick?</div></div><div class="video-container" layout="" layout-align="center center"><iframe width="560" height="315" src="https://www.youtube.com/embed/BwnwaLkQgmg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><div class="articles-container"><div class="articles" layout="" layout-align="start start"><div class="article" flex="33" layout="column" layout-align="start start"><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.WhatIsClasskick_Default)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.WhatIsClasskick, ctrl.WhatIsClasskick_Default)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.WhatIsClasskick_Secondary)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.WhatIsClasskick, ctrl.WhatIsClasskick_Secondary)"></div></div></div></div></div><div class="getting-started" ng-if="ctrl.categoryId === ctrl.GettingStarted" layout="column" layout-align="start center"><div class="category-title-container" layout="column" layout-align="start stretch"><div class="category-title">Getting Started</div></div><div class="video-container" layout="" layout-align="center center"><iframe width="560" height="315" src="https://www.youtube.com/embed/W3qtvE42O8k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><div class="articles-container"><div class="articles" layout="" layout-align="start start"><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.GettingStarted_Edit)">Create and edit your Assignment</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.GettingStarted_Edit)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.GettingStarted, ctrl.GettingStarted_Edit)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.GettingStarted_Assign)">Assign a roster to get your students working</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.GettingStarted_Assign)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.GettingStarted, ctrl.GettingStarted_Assign)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.GettingStarted_View)">See students work & provide real-time feedback</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.GettingStarted_View)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.GettingStarted, ctrl.GettingStarted_View)"></div></div></div></div></div><div class="beyond-the-basics" ng-if="ctrl.categoryId === ctrl.BeyondTheBasics" layout="column" layout-align="start center"><div class="category-title-container" layout="column" layout-align="start stretch"><div class="category-title">Beyond The Basics</div></div><div class="video-container" layout="" layout-align="center center"><iframe width="560" height="315" src="https://www.youtube.com/embed/OnQSI4Yf_wg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><div class="articles-container"><div class="articles" layout="" layout-align="start start"><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.BeyondTheBasics_DeeperFeedback)">Deeper Feedback</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.BeyondTheBasics_DeeperFeedback)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.BeyondTheBasics, ctrl.BeyondTheBasics_DeeperFeedback)"></div><div class="section-title" ng-click="ctrl.goToSection(ctrl.BeyondTheBasics_MeaningfulAssignments)">Create more meaningful assignments</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.BeyondTheBasics_MeaningfulAssignments)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.BeyondTheBasics, ctrl.BeyondTheBasics_MeaningfulAssignments)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.BeyondTheBasics_AnalyzeData)">Analyze data in-the-moment</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.BeyondTheBasics_AnalyzeData)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.BeyondTheBasics, ctrl.BeyondTheBasics_AnalyzeData)"></div><div class="section-title" ng-click="ctrl.goToSection(ctrl.BeyondTheBasics_Collaboration)">Collaboration</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.BeyondTheBasics_Collaboration)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.BeyondTheBasics, ctrl.BeyondTheBasics_Collaboration)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.BeyondTheBasics_Grading)">Grade Faster</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.BeyondTheBasics_Grading)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.BeyondTheBasics, ctrl.BeyondTheBasics_Grading)"></div></div></div></div></div><div class="troubleshooting" ng-if="ctrl.categoryId === ctrl.Troubleshooting" layout="column" layout-align="start center"><div class="category-title-container" layout="column" layout-align="start stretch"><div class="category-title">Troubleshooting</div></div><div class="articles-container"><div class="articles" layout="" layout-align="start start"><div class="article" flex="33" layout="column" layout-align="start start"><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.Troubleshooting_Default)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.Troubleshooting, ctrl.Troubleshooting_Default)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.Troubleshooting_Secondary)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.Troubleshooting, ctrl.Troubleshooting_Secondary)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"></div></div></div></div><div class="connect-with-teacher" ng-if="ctrl.categoryId === ctrl.ConnectWithTeacher" layout="column" layout-align="start center"><div class="connect-with-teacher-container"><div class="category-title">Connect with a Teacher</div><p>Click on your grade level and see a list of Classkick Coaches. You can connect directly with any of them!</p><div class="sections-container" layout="" layout-align="start start" layout-wrap=""><div class="section" ng-click="ctrl.goToCoaches(ctrl.ConnectWithTeacher_K_2)" layout="row" layout-align="center center"><div class="circle" layout="" layout-align="center center"><div>K-2</div></div></div><div class="section" ng-click="ctrl.goToCoaches(ctrl.ConnectWithTeacher_3_5)" layout="row" layout-align="center center"><div class="circle" layout="" layout-align="center center"><div>3-5</div></div></div><div class="section" ng-click="ctrl.goToCoaches(ctrl.ConnectWithTeacher_6_8)" layout="row" layout-align="center center"><div class="circle" layout="" layout-align="center center"><div>6-8</div></div></div><div class="section" ng-click="ctrl.goToCoaches(ctrl.ConnectWithTeacher_9_12)" layout="row" layout-align="center center"><div class="circle" layout="" layout-align="center center"><div>9-12</div></div></div></div></div></div><div class="professional-development" ng-if="ctrl.categoryId === ctrl.ProfessionalDevelopment" layout="column" layout-align="start center"><div class="category-title-container" layout="column" layout-align="start stretch"><div class="category-title">Professional Development Resources</div><p>Looking to share the joy of Classkick? Check out the resources below!</p></div><div class="articles-container"><div class="articles" layout="" layout-align="start start"><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.ProfessionalDevelopment_PresentationMaterials)">Presentation Materials</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.ProfessionalDevelopment_PresentationMaterials)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.ProfessionalDevelopment, ctrl.ProfessionalDevelopment_PresentationMaterials)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.ProfessionalDevelopment_BrandAssets)">Brand Assets</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.ProfessionalDevelopment_BrandAssets)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.ProfessionalDevelopment, ctrl.ProfessionalDevelopment_BrandAssets)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"></div></div></div></div><div class="learn-about-features" ng-if="ctrl.categoryId === ctrl.LearnAboutFeatures" layout="column" layout-align="start center"><div class="category-title-container" layout="column" layout-align="start stretch"><div class="category-title">Learn about Features</div></div><div class="stretch-image-container" layout="" layout-align="center center"><img src="../assets/images/help-center/banner-learn-about-features.png"></div><div class="articles-container"><div class="articles" layout="" layout-align="start start"><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.LearnAboutFeatures_Toolbar)">Toolbar</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.LearnAboutFeatures_Toolbar)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.LearnAboutFeatures, ctrl.LearnAboutFeatures_Toolbar)"></div><div class="section-title" ng-click="ctrl.goToSection(ctrl.LearnAboutFeatures_More)">More Features</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.LearnAboutFeatures_More)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.LearnAboutFeatures, ctrl.LearnAboutFeatures_More)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.LearnAboutFeatures_GradingAndFeedback)">Grading & Feedback Tools</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.LearnAboutFeatures_GradingAndFeedback)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.LearnAboutFeatures, ctrl.LearnAboutFeatures_GradingAndFeedback)"></div><div class="section-title" ng-click="ctrl.goToSection(ctrl.LearnAboutFeatures_Filters)">Filters</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.LearnAboutFeatures_Filters)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.LearnAboutFeatures, ctrl.LearnAboutFeatures_Filters)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.LearnAboutFeatures_Export)">Export Tools</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.LearnAboutFeatures_Export)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.LearnAboutFeatures, ctrl.LearnAboutFeatures_Export)"></div></div></div></div></div><div class="learn-about-features" ng-if="ctrl.categoryId === ctrl.ClasskickProUsers" layout="column" layout-align="start center"><div class="category-title-container" layout="column" layout-align="start stretch"><div class="category-title">Classkick Pro</div></div><div class="stretch-image-container" layout="" layout-align="center center"><img src="../assets/images/help-center/banner-classkick-pro-users.png"></div><div class="articles-container"><div class="articles" layout="" layout-align="start start"><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.ClasskickProUsers_WhatIsPro)">What is Pro?</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.ClasskickProUsers_WhatIsPro)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.ClasskickProUsers, ctrl.ClasskickProUsers_WhatIsPro)"></div><div class="section-title" ng-click="ctrl.goToSection(ctrl.ClasskickProUsers_Admins)">School and District Admin</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.ClasskickProUsers_Admins)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.ClasskickProUsers, ctrl.ClasskickProUsers_Admins)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.ClasskickProUsers_Teachers)">Teachers</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.ClasskickProUsers_Teachers)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.ClasskickProUsers, ctrl.ClasskickProUsers_Teachers)"></div></div><div class="article" flex="33" layout="column" layout-align="start start"><div class="section-title" ng-click="ctrl.goToSection(ctrl.ClasskickProUsers_Students)">Students</div><a ng-repeat="article in ctrl.articles | filter: ctrl.filterBySection(ctrl.ClasskickProUsers_Students)" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a><div class="invisible-button" ng-dblclick="ctrl.createNewArticle(ctrl.ClasskickProUsers, ctrl.ClasskickProUsers_Students)"></div></div></div></div></div></div>');e.put("app/controllers/help-coaches/help-coaches.html",'<div class="help-coaches"><div class="header" layout="" layout-align="start center"><div><img class="logo" src="../assets/images/brand/logo-full-white.svg"></div><div class="title">Help Center</div><div flex=""></div><a ng-hide="ctrl.hideOutsideLinks" ng-click="ctrl.returnToClasskick()">Return to Classkick</a></div><div class="body-top" layout="column" layout-align="start center"><div class="body-top-container" layout="column" layout-align="start stretch"><div layout="" layout-align="space-between center"><div class="breadcrumbs" layout="" layout-align="start center"><a ng-click="ctrl.goToHelpCenter()">Help Center</a> <i class="ck fa ck-pagernext"></i> <a ng-click="ctrl.goToCategory(ctrl.ConnectWithTeacher)">Connect with a Classkick Teacher</a> <i class="ck fa ck-pagernext"></i> <span>{{ctrl.sectionDisplay}}</span></div><div class="search" layout="" layout-align="start center"><article-autocomplete></article-autocomplete></div></div><div class="divider"></div></div></div><div class="connect-with-teacher" layout="column" layout-align="start center"><div class="connect-with-teacher-container"><div class="category-title">{{ctrl.sectionDisplay}} Coaches</div><p>Reach out directly to any of our coaches for support, questions, and ideas for how to use Classkick in your classroom.</p><md-grid-list md-cols-xs="1" md-cols-sm="3" md-cols-md="4" md-cols-gt-md="4" md-row-height-gt-md="1:1.5" md-row-height="1:1.5" md-gutter="32px" md-gutter-gt-sm="62px"><md-grid-tile ng-repeat="coach in ctrl.coaches | orderBy: \'-name\':true"><div class="coach" layout="column" layout-align="start center"><div class="image-container" layout="" layout-align="center center"><img ng-src="{{coach.url}}" alt="classkick coach"></div><div class="name">{{coach.name}}</div><div class="details">{{coach.description}}</div><div class="handle">Twitter: <span class="link" ng-if="coach.twitter" ng-click="ctrl.goToTwitterProfile(coach.twitter)">{{"@" + coach.twitter}}</span> <span ng-if="!coach.twitter">--</span></div><div class="handle">Instagram: <span class="link" ng-if="coach.instagram" ng-click="ctrl.goToInstagramProfile(coach.instagram)">{{"@" + coach.instagram}}</span> <span ng-if="!coach.instagram">--</span></div><a class="public-assignments-link" ng-hide="ctrl.hideOutsideLinks" ng-click="ctrl.openPublicAssignmentPage(coach.email)">View Public Assignments</a></div></md-grid-tile></md-grid-list></div></div></div>');e.put("app/controllers/help-section/help-section.html",'<div class="help-section"><div class="header" layout="" layout-align="start center"><div><img class="logo" src="../assets/images/brand/logo-full-white.svg"></div><div class="title">Help Center</div><div flex=""></div><a ng-hide="ctrl.hideOutsideLinks" ng-click="ctrl.returnToClasskick()">Return to Classkick</a></div><div class="body" layout="column" layout-align="start center"><div class="body-container" layout="column" layout-align="start stretch"><div layout="" layout-align="space-between center"><div class="breadcrumbs" layout="" layout-align="start center"><a ng-click="ctrl.goToHelpCenter()">Help Center</a> <i class="ck fa ck-pagernext"></i> <a ng-click="ctrl.goToCategory(ctrl.categoryId)">{{ctrl.categoryDisplay}}</a> <i ng-if="ctrl.sectionDisplay" class="ck fa ck-pagernext"></i> <span>{{ctrl.sectionDisplay}}</span></div><div class="search" layout="" layout-align="start center"><article-autocomplete></article-autocomplete></div></div><div class="divider"></div><div class="section-title">{{ctrl.sectionDisplay}}</div><div class="articles" layout="column" layout-align="start start"><a ng-repeat="article in ctrl.articles" ng-click="ctrl.goToArticle(article.id)">{{article.title}}</a></div></div></div></div>');e.put("app/controllers/login/login.html",'<div class="vertical-scroll-container"><div class="login" layout="column" layout-align="start center"><div flex="none" class="major-header"><a href="http://www.classkick.com"><img src="../assets/images/brand/classkick-logo-white.png"></a></div><form flex="none" name="anonStudentLoginForm" ng-hide="ctrl.isLoading" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.login()"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"><md-button ng-if="ctrl.classCodeValid" class="bar-item" ng-click="ctrl.goBack()" aria-label="Go back"><i class="fa ck ck-back ck-green"></i></md-button></div><div class="classkick-header" flex="none" layout="" layout-align="center center">{{ctrl.title}}</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start stretch"><p class="error-message" ng-show="!!ctrl.errorMessage">{{ctrl.errorMessage}}</p><md-input-container class="class-code"><span class="label">Class Code</span> <input name="classCode" class="class-code" type="text" ng-change="ctrl.classCodeUpdated()" ng-model="ctrl.classCode" ck-autofocus="ctrl.focusClassCode" ng-blur="ctrl.focusClassCode = false" minlength="{{ctrl.classCodeMinLength}}" autocomplete="off" aria-label="Class code input"><div class="error-messages" ng-messages="anonStudentLoginForm.classCode.$error"><div ng-message="pattern">contains invalid characters</div><div ng-message="minlength">class codes are 6 characters</div><div ng-message="bad-ccode">class code was not found</div></div></md-input-container><div class="hide-student-work-message" ng-if="ctrl.hideStudentWork && ctrl.classCodeValid" layout="column" layout-align="start stretch">This assignment is hidden. Please ask your teacher to un-hide it so you can continue.</div><div class="anon-classcode" ng-show="ctrl.classCodeValid && !ctrl.hideStudentWork" layout="column" layout-align="start stretch"><md-input-container class="name"><span class="label">Name</span> <input name="name" type="text" ng-model="ctrl.name" ng-change="ctrl.nameUpdated()" ck-autofocus="ctrl.focusName" ng-blur="ctrl.focusName = false" autocomplete="off" aria-label="Name input"><div class="error-messages" ng-messages="anonStudentLoginForm.name.$error"><div ng-message="no-student">student is not on roster</div></div></md-input-container><md-button class="ck-primary" type="submit" ng-disabled="!ctrl.canStart" aria-label="Log in with class code">{{ctrl.anonStudentLoginButtonMessage}}</md-button></div><div class="what-is-classcode" ng-if="!ctrl.classCodeValid" layout="column" layout-align="start center"><a class="anchor-button" ng-click="ctrl.showClassCodeModal($event)" aria-label="What is a class code?">what\'s a class code?</a></div><div class="login-signup" ng-if="(ctrl.classCodeValid && ctrl.showPro) || !ctrl.classCodeValid" layout="column" layout-align="start stretch"><div class="separator"></div><div class="message" ng-if="ctrl.showPro" layout="" layout-align="center center">Continue with Portfolio</div><div layout="" layout-align="start start"><div flex="" layout="" layout-align="center center"><md-button class="login-button ck-secondary" ng-click="ctrl.goToAccountLogin()">log in</md-button></div><div flex="" layout="" layout-align="center center"><md-button class="signup-button ck-secondary" ng-click="ctrl.classCodeValid ? ctrl.goToCreateStudentAccount() : ctrl.goToCreateAccountChoice()">sign up</md-button></div></div></div></div></form><div class="loading" ng-if="ctrl.isLoading" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div><div style="visibility: hidden"><div class="md-dialog-container" id="{{::ctrl.whatIsAClassCodeModalId}}"><md-dialog><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.$mdDialog.hide()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><md-dialog-content layout="column" layout-align="start stretch"><div class="primary-message">Class codes come from an assignment in the Classkick app.</div><div class="secondary-message">Ask your teacher for a class code!</div></md-dialog-content><md-dialog-actions><md-button class="ck-primary" aria-label="Got it!" ng-click="ctrl.$mdDialog.hide()">Got it!</md-button></md-dialog-actions></md-dialog></div></div></div></div>');
e.put("app/controllers/metric-list/metric-list.html",'<div class="metric-list" layout="column" layout-align="start stretch"><div flex="none" class="header"><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Open menu"><i class="ck fa ck-menu"></i></md-button><span class="classkick-header" layout="row" layout-align="center center"><span>Metrics</span></span></div><div ng-hide="!ctrl._adminContracts.length" class="contract-options" layout="row"><md-input-container class="contract-organization"><md-select ck-select="" md-container-class="ck-select-menu" ng-model="ctrl._selectedContract" ng-change="ctrl.selectContract(ctrl._selectedContract)" ng-model-options="{ trackBy: \'$value.id\' }" aria-label="Contract"><md-option ng-value="contract" ng-repeat="contract in ctrl._adminContracts">{{contract.name}}</md-option></md-select></md-input-container></div><div class="contract-overview" ng-hide="ctrl.loading || ctrl.error"><h3 class="contract-overview-header">{{ctrl._selectedContract.name}} Overview</h3><ul class="contract-overview-list"><li>Assignments created: {{ctrl.organizationOverview.assignmentCount}}</li><li>Assignments worked on by students: {{ctrl.organizationOverview.assignmentWorkCount}}</li><li>Total teacher accounts: {{ctrl.organizationOverview.teacherCount}}</li><li>Total student accounts: {{ctrl.organizationOverview.studentCount}}</li></ul></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Metrics...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">{{ctrl.errorMessage}}</p></div></div>');e.put("app/controllers/nav/nav.html",'<div class="nav" layout="" layout-align="start start"><md-sidenav md-component-id="nav" md-is-locked-open="$mdMedia(\'gt-sm\')" layout="column" layout-align="start stretch"><div class="header" flex="none"><img class="logo" src="../assets/images/brand/logo-full-green.png"></div><div class="profile" flex="none" layout="column" layout-align="start start"><div class="greeting" layout="" layout-align="start center">{{ctrl.greeting}}</div><div layout="" layout-align="start center"><a ng-if="ctrl.isTeacher && !ctrl.isProUser" ng-click="ctrl.goToOrderPage()"><div class="user-banner" layout="" layout-align="center center">Basic</div></a> <a ng-if="ctrl.isTeacher && ctrl.isProUser && ctrl.isProClassroom" ng-click="ctrl.goToOrderPage()"><div class="user-banner pro" layout="" layout-align="center center">Pro {{ctrl.proUserType}}</div></a><div ng-if="ctrl.isTeacher && ctrl.isProUser && !ctrl.isProClassroom" class="user-banner pro" layout="" layout-align="center center">Pro {{ctrl.proUserType}}</div></div></div><div class="tabs" flex="" layout="column" layout-align="start stretch"><md-button ng-if="ctrl.isStudent" flex="none" class="tab" ng-class="{active: ctrl.viewingStudentAssignments}" ng-click="ctrl.goToStudentAssignments()"><div layout="" layout-align="start center"><i class="fa ck ck-assignment"></i> <span>Assignments</span></div></md-button><div ng-if="ctrl.isTeacher" flex="none"><md-button class="tab" ng-class="{active: ctrl.viewingAssignments}" ng-click="ctrl.goToAssignments()"><div layout="" layout-align="start center"><i class="fa ck ck-assignment"></i> <span>Assignments</span></div></md-button></div><div ng-if="ctrl.isTeacher" flex="none"><md-button class="tab" ng-class="{active: ctrl.viewingRosters}" ng-click="ctrl.goToRosters()"><div layout="" layout-align="start center"><i class="fa ck ck-roster"></i> <span>Rosters</span></div></md-button></div><div ng-if="ctrl.isTeacher" flex="none"><md-button class="tab" ng-class="{active: ctrl.viewingNotifications}" ng-click="ctrl.goToNotifications()"><div layout="" layout-align="start center"><i class="fa ck ck-notifications"></i> <span>Notifications</span><div layout="row" layout-align="center center"><div ng-if="ctrl.unseenNotifications" class="indicator-circle"></div></div></div></md-button></div><div flex="none"><md-button class="tab" ng-class="{active: ctrl.viewingProfile}" ng-click="ctrl.goToProfile()"><div layout="" layout-align="start center"><i class="fa ck ck-profile"></i> <span>Profile</span></div></md-button></div><div ng-if="ctrl.isTeacher" flex="none"><md-button class="tab" ng-click="ctrl.openLatestFeaturesDialog()"><div layout="" layout-align="start center"><i class="fa ck ck-megaphone"></i> <span>Latest Features</span><div layout="row" layout-align="center center"><div ng-if="ctrl.unseenLatestFeatures" class="indicator-circle"></div></div></div></md-button></div><div ng-if="ctrl.isTeacher" flex="none"><md-button class="tab" ng-click="ctrl.goToTeacherHelpCenter()"><div layout="" layout-align="start center"><i class="fa ck ck-help"></i> <span>Help & Resources</span></div></md-button></div><div flex="none" ng-if="ctrl.userIsAdmin"><md-button class="tab" ng-class="{active: ctrl.viewingAdmin}" ng-click="ctrl.goToAdmin()"><div ng-hide="hideAdminTabText" layout="" layout-align="start center"><i class="fa ck ck-admin"></i> <span>Superuser</span></div></md-button></div><div ng-hide="!ctrl.isAdmin" class="contract-admin" layout="column" flex="none"><div class="tab-header">Admin Dashboard</div><md-button class="tab" ng-click="ctrl.goToContractUsers(ctrl.adminContracts[0].id)" ng-class="{active: ctrl.viewingContractUsers(ctrl.adminContracts[0].id)}"><div layout="" layout-align="start center"><i class="fa ck ck-pro"></i> <span>Manage Users</span></div></md-button><md-button class="tab" ng-click="ctrl.goToMetrics(ctrl.adminContracts[0].id)" ng-class="{active: ctrl.viewingMetrics(ctrl.adminContracts[0].id)}"><div layout="" layout-align="start center"><i class="fa ck ck-metric"></i> <span>Metrics</span></div></md-button></div><div flex="none"><md-button class="tab signout" ng-click="ctrl.signOut()"><div layout="" layout-align="start center"><i class="fa ck ck-signout"></i> <span>Sign Out</span></div></md-button></div></div><div flex="none" class="pro-cta" ng-if="ctrl.isTeacher && (ctrl.isFreeUser || ctrl.isProClassroom)"><md-button class="pro-school" ng-click="ctrl.goToOrderPage()"><div><i class="fa ck ck-pro"></i> <span class="pro-school-text">How can my school get Pro?</span></div></md-button></div><div flex="none" class="pro-cta" ng-if="ctrl.isTeacher && ctrl.isProSchool && ctrl.isExpiringThisYear && ctrl.isRenewalTime && ctrl.isContractAdmin && !ctrl.isSchoolClosed"><md-button class="pro-school" ng-click="ctrl.getOrCreateRenewalOrder()"><div><i class="fa ck ck-pro"></i> <span class="pro-school-text">Renew Pro School for next year?</span></div></md-button><div class="promotion-is-ending">{{ctrl.renewalPromotionCopy}}</div></div></md-sidenav><div class="main"><div ui-view=""></div></div></div>');e.put("app/controllers/order/order.html",'<div class="order" layout="column" layout-align="start stretch"><div flex="none" class="header" layout="" layout-align="start stretch"><div class="left" flex="" layout="" layout-align="start stretch"><img class="logo" ng-click="ctrl.goToHomepage()" src="../assets/images/brand/logo-full-final.png"></div><div hide-xs="" flex="" layout="" layout-align="end center"><div class="teacher-resources" ng-click="ctrl.goToTeacherHelpCenter()">TEACHER RESOURCES</div><div class="order-pro">GET PRO</div><div class="order-login" ng-click="ctrl.goToLogin()">LOG IN</div></div><div hide-gt-xs="" flex="" layout="" layout-align="end center"><md-menu md-position-mode="target-right target"><md-button ng-click="$mdMenu.open()" aria-label="Open menu"><i class="ck fa ck-menu"></i></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="ctrl.goToTeacherHelpCenter()" aria-label="Go to teacher resources"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>TEACHER RESOURCES</span></div></md-button></md-menu-item><md-menu-item><md-button ng-click="" aria-label="Go to order pro"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>ORDER PRO</span></div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.goToLogin()" aria-label="Go to log in page"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>LOG IN</span></div></md-button></md-menu-item></md-menu-content></md-menu></div></div><div flex="" class="body" layout="column" layout-align="start stretch"><div flex="none" class="body-title">Order Classkick Pro</div><div flex="none" class="forward-info" layout="column" layout-align="start center"><md-button class="ck-primary" ng-click="ctrl.shareSchoolOrder()"><span><i class="fa ck ck-email"></i></span> Forward this info</md-button><div class="message">Teachers, send this information to the relevant person: a principal, instructional<br>coach, tech coordinator, or any school purchasing agent.</div></div><div flex="none" layout="column" layout-align="start center"><div flex="none" class="tabs" layout="" layout-align="start stretch"><div class="tab" ng-class="{active: ctrl.viewingTeacherTab}" ng-click="ctrl.goToTeacherTab()" layout="" layout-align="center center">Teacher</div><div class="tab" ng-class="{active: ctrl.viewingSchoolTab}" ng-click="ctrl.goToSchoolTab()" layout="" layout-align="center center">School</div><div class="tab" ng-class="{active: ctrl.viewingDistrictTab}" ng-click="ctrl.goToDistrictTab()" layout="" layout-align="center center">District</div><div class="tab" ng-click="ctrl.goToOtherOrgTypeURL()" layout="" layout-align="center center">Other</div></div></div><div flex="none" class="products-container" layout="column" layout-align="start center"><div class="product teacher" ng-if="ctrl.viewingTeacherTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">$12.99</div><div class="product-price-info">per mo, billed annually</div><div class="product-price-subtext">or $17.99/mo, billed monthly</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.goToProTeacherPayment()">Buy w/ Credit Card</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.openTeacherPO()">Buy w/ P.O.</md-button></div><div class="product-asterisk"><span>*P.O. has an extra processing fee</span> <span><i class="fa ck ck-contextualhelp"></i><md-tooltip md-delay="200" md-direction="top"><div class="body"><div>To complete your order quickly, processing</div><div>Purchase Orders (POs) requires significant</div><div>extra staffing. So we have to include a large</div><div>processing fee for teacher POs.</div><br><div>POs for school and district orders do NOT</div><div>require a PO processing fee.</div></div></md-tooltip></span></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Low cost and transparent pricing</div><div class="product-info-body"><br>1 teacher, up to 160 students,<br>unlimited assignments & more (see below)<br><br>Receive automatic notifications for annual renewal (no gotchyas!). Receive full year refund when your school upgrades.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch="ctrl._currentMonth"><div ng-switch-when="5" class="product school" ng-if="ctrl.viewingSchoolTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl._firstYearPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 60% off through Jul 31</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startSchoolOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="6" class="product school" ng-if="ctrl.viewingSchoolTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl._firstYearPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 60% off through Jul 31</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startSchoolOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="7" class="product school" ng-if="ctrl.viewingSchoolTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl._firstYearPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 50% off through Aug 31</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startSchoolOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="8" class="product school" ng-if="ctrl.viewingSchoolTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl._firstYearPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 40% off through Sep 30</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startSchoolOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="9" class="product school" ng-if="ctrl.viewingSchoolTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl._firstYearPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 30% off through Oct 31</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startSchoolOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-default="" class="product school" ng-if="ctrl.viewingSchoolTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl._firstYearPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 20% off through Dec 31</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startSchoolOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startSchoolOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div></div><div ng-switch="ctrl._currentMonth"><div ng-switch-when="5" class="product district" ng-if="ctrl.viewingDistrictTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl.districtPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 60% off through Jul 31</div><div class="product-price-config" layout="" layout-align="center center">Quote for<md-input-container flex="none" class="md-icon-float md-icon-right md-block"><input ng-model="ctrl.schoolsInDistrict" type="number" step="1" aria-label="enter the number of schools in your district to see how much it will cost to purchase for your whole district"></md-input-container><div class="stepper" layout="column" layout-align="center center"><div flex="none" class="increment" ng-click="ctrl.incrementSchoolsInDistrict()"><i class="ck fa ck-carrot-up"></i></div><div flex="none" class="decrement" ng-click="ctrl.decrementSchoolsInDistrict()"><i class="ck fa ck-carrot"></i></div></div>schools</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startDistrictOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="6" class="product district" ng-if="ctrl.viewingDistrictTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl.districtPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 60% off through Jul 31</div><div class="product-price-config" layout="" layout-align="center center">Quote for<md-input-container flex="none" class="md-icon-float md-icon-right md-block"><input ng-model="ctrl.schoolsInDistrict" type="number" step="1" aria-label="enter the number of schools in your district to see how much it will cost to purchase for your whole district"></md-input-container><div class="stepper" layout="column" layout-align="center center"><div flex="none" class="increment" ng-click="ctrl.incrementSchoolsInDistrict()"><i class="ck fa ck-carrot-up"></i></div><div flex="none" class="decrement" ng-click="ctrl.decrementSchoolsInDistrict()"><i class="ck fa ck-carrot"></i></div></div>schools</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startDistrictOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="7" class="product district" ng-if="ctrl.viewingDistrictTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl.districtPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 50% off through Aug 31</div><div class="product-price-config" layout="" layout-align="center center">Quote for<md-input-container flex="none" class="md-icon-float md-icon-right md-block"><input ng-model="ctrl.schoolsInDistrict" type="number" step="1" aria-label="enter the number of schools in your district to see how much it will cost to purchase for your whole district"></md-input-container><div class="stepper" layout="column" layout-align="center center"><div flex="none" class="increment" ng-click="ctrl.incrementSchoolsInDistrict()"><i class="ck fa ck-carrot-up"></i></div><div flex="none" class="decrement" ng-click="ctrl.decrementSchoolsInDistrict()"><i class="ck fa ck-carrot"></i></div></div>schools</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startDistrictOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="8" class="product district" ng-if="ctrl.viewingDistrictTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl.districtPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 40% off through Sep 30</div><div class="product-price-config" layout="" layout-align="center center">Quote for<md-input-container flex="none" class="md-icon-float md-icon-right md-block"><input ng-model="ctrl.schoolsInDistrict" type="number" step="1" aria-label="enter the number of schools in your district to see how much it will cost to purchase for your whole district"></md-input-container><div class="stepper" layout="column" layout-align="center center"><div flex="none" class="increment" ng-click="ctrl.incrementSchoolsInDistrict()"><i class="ck fa ck-carrot-up"></i></div><div flex="none" class="decrement" ng-click="ctrl.decrementSchoolsInDistrict()"><i class="ck fa ck-carrot"></i></div></div>schools</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startDistrictOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-when="9" class="product district" ng-if="ctrl.viewingDistrictTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl.districtPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 30% off through Oct 31</div><div class="product-price-config" layout="" layout-align="center center">Quote for<md-input-container flex="none" class="md-icon-float md-icon-right md-block"><input ng-model="ctrl.schoolsInDistrict" type="number" step="1" aria-label="enter the number of schools in your district to see how much it will cost to purchase for your whole district"></md-input-container><div class="stepper" layout="column" layout-align="center center"><div flex="none" class="increment" ng-click="ctrl.incrementSchoolsInDistrict()"><i class="ck fa ck-carrot-up"></i></div><div flex="none" class="decrement" ng-click="ctrl.decrementSchoolsInDistrict()"><i class="ck fa ck-carrot"></i></div></div>schools</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startDistrictOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div><div ng-switch-default="" class="product district" ng-if="ctrl.viewingDistrictTab" layout="" layout-align="start start"><div flex="" class="product-main" layout="column" layout-align="start center"><div class="product-price">${{ctrl.districtPrice}}/mo</div><div class="product-price-subtext">billed annually</div><div class="product-price-subtext"><span class="product-price-info-strikethrough">$500/mo</span> 20% off through Dec 31</div><div class="product-price-config" layout="" layout-align="center center">Quote for<md-input-container flex="none" class="md-icon-float md-icon-right md-block"><input ng-model="ctrl.schoolsInDistrict" type="number" step="1" aria-label="enter the number of schools in your district to see how much it will cost to purchase for your whole district"></md-input-container><div class="stepper" layout="column" layout-align="center center"><div flex="none" class="increment" ng-click="ctrl.incrementSchoolsInDistrict()"><i class="ck fa ck-carrot-up"></i></div><div flex="none" class="decrement" ng-click="ctrl.decrementSchoolsInDistrict()"><i class="ck fa ck-carrot"></i></div></div>schools</div><div class="product-actions" layout="" layout-align="start start"><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Buy Now</md-button><md-button class="ck-secondary" ng-if="!ctrl.loggedInAndLoadingData" ng-click="ctrl.startDistrictOrder()">Get Instant Quote</md-button></div></div><div class="spacer"></div><div flex="" class="product-info"><div class="product-info-title">Simple and transparent pricing</div><div class="product-info-body"><br>Unlimited teachers and assignments, up to 1,500 students per school. Learn more below.<br><br>Buy your annual renewal <a ng-click="ctrl.startDistrictOrder()">here</a>.<br><br>View <a ng-click="ctrl.goToFaq()">FAQs</a></div></div></div></div></div><div flex="none" class="learn-more" layout="" layout-align="center center"><a ng-click="ctrl.scrollToFeatures()"><div>Learn More</div><div><i class="fa ck ck-next ck-green fa-rotate-90"></i></div></a></div><div flex="none" class="features" layout="column" layout-align="start center"><div flex="none" class="features-title">Compare Versions</div><div class="features-container"><table><tr><th class="feature"></th><th class="standard">Basic</th><th class="pro">Pro</th></tr><tr ng-repeat="feature in ctrl.features"><td class="feature">{{::feature.text}} <span class="help" ng-if="feature.url" ng-click="ctrl.openFeatureDialog($event, feature)"><i class="fa ck ck-contextualhelp"></i><md-tooltip md-delay="1000">View a GIF of this feature</md-tooltip></span></td><td class="standard"><i ng-show="ctrl.showCheckForPlanValue(feature.standard)" class="ck fa ck-check"></i><div ng-show="ctrl.showTextForPlanValue(feature.standard)">{{::feature.standard}}</div></td><td class="pro"><i ng-show="ctrl.showCheckForPlanValue(feature.pro)" class="ck fa ck-check"></i><div ng-show="ctrl.showTextForPlanValue(feature.pro)">{{::feature.pro}}</div><md-tooltip md-delay="500" md-direction="right">Included in classroom, school, and district plans</md-tooltip></td></tr></table></div></div><div class="ask-anything">Have questions? <a ng-click="ctrl.openPricingFAQs()">Check out our pricing FAQs here</a> or shoot us an email at pro@classkick.com</div></div></div>');e.put("app/controllers/order-detail/order-detail.html",'<div class="order-detail" layout="column" layout-align="start stretch"><div flex="" ng-show="ctrl.state === ctrl.ViewQuote" class="view-quote" layout="column" layout-align="start stretch"><div flex="none" class="header" layout="" layout-align="start stretch"><div class="left" flex="" layout="" layout-align="start stretch"><img class="logo" ng-click="ctrl.goToHomepage()" src="../assets/images/brand/logo-full-final.png"></div><div hide-xs="" flex="" layout="" layout-align="end center"><div class="teacher-resources" ng-click="ctrl.goToTeacherResourcesPage()">TEACHER RESOURCES</div><div class="order-pro" ng-click="ctrl.goToOrderPro()">GET PRO</div><div class="order-login" ng-click="ctrl.goToLogin()">LOG IN</div></div><div hide-gt-xs="" flex="" layout="" layout-align="end center"><md-menu md-position-mode="target-right target"><md-button ng-click="$mdMenu.open()" aria-label="Open menu"><i class="ck fa ck-menu"></i></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="ctrl.goToTeacherResourcesPage()" aria-label="Go to teacher resources"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>TEACHER RESOURCES</span></div></md-button></md-menu-item><md-menu-item><md-button ng-click="" aria-label="Go to order pro"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>ORDER PRO</span></div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.goToLogin()" aria-label="Go to log in page"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>LOG IN</span></div></md-button></md-menu-item></md-menu-content></md-menu></div></div><div class="action-bar" flex="none" layout="column" layout-align="start space-between"><div flex="" class="action-container" layout="" layout-align="start space-between"><div class="left" layout="" layout-align="start center"><md-button class="credit-card" ng-click="ctrl.orderByCreditCard()">Pay with Credit Card</md-button><md-button class="purchase-order" ng-click="ctrl.orderByPurchaseOrder()">Submit a Purchase Order</md-button></div><div flex="" class="right" layout="" layout-align="end center"><md-button class="ck-secondary" ng-click="ctrl.shareOrder()">Email</md-button><md-button class="ck-secondary" ng-click="ctrl.exportAsPDF()">Print</md-button></div></div></div><div class="view-quote-body" flex="" layout="column" layout-align="start center"><div class="canvas-container" layout="column" layout-align="start center"><div class="anchor"><div class="order-overlay" ng-style="ctrl.overlayStyle"><svg viewbox="0 0 918 1188"><g class="root"></g></svg></div></div><canvas class="order-canvas"></canvas></div><div class="w9-container" layout="column" layout-align="start center"><canvas class="w9-canvas"></canvas></div></div></div><div flex="" class="view-invoiced" ng-if="ctrl.state === ctrl.ViewInvoiced || ctrl.state === ctrl.ViewPaid || ctrl.state === ctrl.ViewPastDue" layout="column" layout-align="center center"><div class="body"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"></div><div class="classkick-header" flex="none" layout="" layout-align="center center">{{ctrl.organization.name}} Has Successfully {{ctrl.state === ctrl.ViewInvoiced ? \'Ordered\' : \'Purchased\'}}<br>{{ctrl.orderPlanName}}</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start center"><i class="ck-green ck fa ck-check fa-5x"></i><div class="instruction" ng-if="ctrl.state === ctrl.ViewInvoiced">We will send instructions on how to pay to</div><div class="instruction" ng-if="ctrl.state === ctrl.ViewPaid || ctrl.state === ctrl.ViewPastDue">We sent receipt for your payment to</div><div>{{::ctrl.order.billingEmail}}</div><div class="instruction started">We will send instructions on how to get started to</div><div>{{::ctrl.order.pointEmail}}</div></div><div class="order-details"><div layout="row" class="order-line-items"><div class="order-line-items-left"><div class="order-line-item">Total price:</div><div class="order-line-item">Status:</div><div class="order-line-item">Type:</div><div class="order-line-item">Student limit:</div></div><div class="order-line-items-right"><div>{{ctrl.currency(ctrl.order.total)}}</div><div class="order-status">{{ctrl.order.status}}</div><div class="order-type">{{ctrl.organization.type}}</div><div>1500</div></div></div><div class="mail-check">Mail a check to:<br><br>CLASSWORK CO DBA Classkick<br>PO Box 772728<br>Area {{ctrl.order.quote}}<br>Detroit, MI 48277-2728</div></div><div class="body-content" layout="column" layout-align="start center"><a ui-sref="root.account.home" ng-if="ctrl.isLoggedIn">Go back to your account</a> <a ui-sref="root.account-login" ng-if="!ctrl.isLoggedIn">Login to your account</a></div></div></div><div flex="" class="view-canceled" ng-if="ctrl.state === ctrl.ViewCancelled" layout="column" layout-align="center center"><div class="body"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"></div><div class="classkick-header" flex="none" layout="" layout-align="center center">{{ctrl.organization.name}}\'s Order has been canceled</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start center"><i class="ck fa ck-warn ck-alert fa-5x"></i><div class="instruction">Return to the <a ui-sref="root.order">order page</a> to create a new quote</div></div></div></div><div flex="" class="loading" ng-show="ctrl.state === ctrl.Loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Order...</p></div><div class="error" ng-show="ctrl.state === ctrl.Error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">{{ctrl.errorMessage}}</p></div></div>');
e.put("app/controllers/password-reset/password-reset.html",'<div class="password-reset" layout="column" layout-align="center center"><div flex="none" class="body" layout="column" layout-align="center center"><div class="classkick-header">Reset Password</div><div class="content-parent" layout="column" layout-align="center center"><div ng-if="ctrl.isError" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>{{ctrl.errorMessage}}</p><div ng-show="ctrl.hasInfo" layout="column" layout-align="center center"><p>You can send yourself a new reset email by pressing the button below</p><md-button ng-click="ctrl.sendEmail()" class="ck-primary">send new reset email</md-button></div></div><div ng-if="ctrl.isLoading" layout="column" layout-align="center center"><div><i class="fa ck ck-loading ck-green fa-spin fa-5x"></i></div><p>{{ctrl.loadingMessage}}</p></div><div ng-if="ctrl.isFinished" layout="column" layout-align="center center"><div><i class="fa ck ck-check ck-green fa-5x"></i></div><p>{{ctrl.finishedMessage}}</p><md-button class="ck-primary" ng-click="ctrl.goToLogin()"><div>login</div></md-button></div><form ng-show="ctrl.isForm" name="resetForm" class="password-reset-form" ng-submit="ctrl.submit()" layout="column" layout-align="start stretch"><p>Hi {{ctrl.username}}, please enter and confirm your new password below:</p><md-input-container><label>new password</label> <input name="password" type="password" ng-model="ctrl.password" required="" md-no-asterisk=""><div ng-messages="resetForm.password.$error"><div ng-message="required">password is required</div></div></md-input-container><md-input-container><label>confirm password</label> <input name="confirmPassword" type="password" ng-model="ctrl.confirmPassword" pattern="{{ctrl.passwordRegex}}" required="" md-no-asterisk=""><div ng-messages="resetForm.confirmPassword.$error"><div ng-message="required">password confirmation is required</div><div ng-message="pattern">does not match the password above</div></div></md-input-container><md-button ng-if="ctrl.isForm" type="submit" class="ck-primary">reset password</md-button></form></div></div></div>');e.put("app/controllers/payment/payment.html",'<div class="payment" layout="column"><div flex="none" class="header" layout="row" layout-align="start stretch"><md-button class="bar-item" ng-click="ctrl.goBack()" aria-label="back"><div class="contents"><i class="ck fa ck-back ck-green"></i></div></md-button></div><div class="body" ng-hide="ctrl.isAlternative || ctrl.loading || ctrl.error" flex="" layout="column" layout-align="center center"><div flex="none" class="headers" layout="column" layout-align="space-around center"><div class="classkick-header">{{ctrl.title}}</div><div ng-show="ctrl.planInfoDisplay" class="section-header">{{ctrl.planInfoDisplay}}</div></div><form flex="" name="ctrl.paymentForm" layout="column" ng-submit="ctrl.onSubmit()"><md-input-container class="name-on-card"><spec class="label">Name on Card</spec><input name="nameInput" type="text" ng-model="ctrl.nameOnCard" required="" md-no-asterisk="" aria-label="Enter the name on your card here"><div class="error-messages" ng-messages="ctrl.paymentForm.nameInput.$error"><div ng-message="required">Please enter the name on your card</div></div></md-input-container><md-input-container class="email"><spec class="label">Billing Email</spec><input name="emailInput" pattern="{{::ctrl.emailPattern}}" type="email" ng-model="ctrl.email" required="" autocomplete="false" md-no-asterisk="" aria-label="Enter email here"><div class="error-messages" ng-messages="ctrl.paymentForm.emailInput.$error"><div ng-message="pattern">Email addresses must match the format _@_._</div><div ng-message="required">Please enter an email</div></div></md-input-container><md-input-container class="postal-code"><spec class="label">Billing Postal Code</spec><input name="postalCodeInput" type="text" ng-model="ctrl.postalCode" maxlength="29" required="" md-no-asterisk="" aria-label="Enter zip code"><div class="error-messages" ng-messages="ctrl.paymentForm.postalCodeInput.$error"><div ng-message="required">Please enter a postal code</div><div ng-message="incorrect_zip">The card\'s postal code failed validation</div></div></md-input-container><div class="card-container" layout="column"><md-input-container class="card" ng-class="ctrl.isFloating" md-is-error="ctrl.cardHasError"><spec class="label">Card</spec><input autocomplete="{{ctrl.disableAutocompleteString}}" class="display-input" name="cardInput" type="text" tabindex="-1" aria-label="hidden input"><div class="error-messages" ng-messages="ctrl.formattedCardError"><div ng-message="required">Please enter your card information</div><div ng-message="incomplete_number">Your card number is incomplete</div><div ng-message="invalid_number">Your card number is invalid.</div><div ng-message="invalid_expiry_year">Your card\'s expiration year is invalid</div><div ng-message="incomplete_expiry">Your card\'s expiration date is incomplete</div><div ng-message="incomplete_cvc">Your card\'s security code is incomplete</div><div ng-message="invalid_expiry_year_past">Your card\'s expiration year is in the past</div><div ng-message="invalid_expiry_month">The card\'s expiration month is invalid</div><div ng-message="invalid_expiry_year">The card\'s expiration year is invalid</div><div ng-message="invalid_cvc">The card\'s security code is invalid</div><div ng-message="incorrect_number">The card number is incorrect</div><div ng-message="expired_card">The card has expired</div><div ng-message="incorrect_cvc">The card\'s security code is incorrect</div><div ng-message="card_declined">The card was declined</div><div ng-message="missing">There is no card on a customer that is being charged</div><div ng-message="processing_error">An error occurred while processing the card</div></div></md-input-container><div class="card-element"></div></div><div class="plan" ng-if="ctrl.isCreatePayment"><label>Plan</label><md-radio-group class="duration" ng-model="ctrl.subscriptionPlan"><md-radio-button ng-value="ctrl.monthly" class="md-primary"><span>Monthly</span> <span class="base-price">{{ctrl.monthlyPriceBase}}/mo</span></md-radio-button><md-radio-button ng-value="ctrl.yearly" class="md-primary"><span>Yearly</span> <span class="base-price">{{ctrl.yearlyPriceBase}}/yr (save 28%)</span></md-radio-button></md-radio-group></div><md-button class="ck-primary" type="submit">{{ctrl.submitButtonDisplay}}</md-button></form></div><div class="alternative" ng-if="ctrl.isAlternative && !ctrl.error && !ctrl.loading" flex="" layout="column" layout-align="center center"><div>{{ctrl.alternativeMessage}}</div><br><md-button class="ck-primary" ng-click="ctrl.goBack()">Go Home</md-button></div><div class="loading" ng-if="ctrl.loading" flex=""><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading your receipt. Please check your inbox or email pro@classkick.com to confirm your subscription.</p></div></div>');e.put("app/controllers/payment-success/payment-success.html",'<div class="payment-success" layout="column"><div flex="none" class="header" layout="row" layout-align="start stretch"><md-button class="bar-item" ng-click="ctrl.goBack()" aria-label="back"><div class="contents"><i class="ck fa ck-back ck-green"></i></div></md-button></div><div ng-show="!ctrl.loading" flex="" layout="column" layout-align="start center"><div flex="none" class="body-header" layout="column" layout-align="space-around center"><div class="classkick-header">Thanks for Upgrading!</div></div><div class="body" layout="column" layout-align="start stretch"><div class="date-created">{{::ctrl.subscription.created.format(\'MMMM Do YYYY h:mm a\')}}</div><div class="line-item" layout="" layout-align="start center">Classkick Pro Classroom {{ctrl.annualOrMonthly}} Subscription:<div flex=""></div>{{ctrl.planPrice}}</div><div class="line-item" layout="" layout-align="start center">Discount:<div flex=""></div>{{ctrl.planDiscount}}</div><div class="total" layout="" layout-align="start center">Total:<div flex=""></div>{{ctrl.totalPrice}}</div><div class="line"></div><div class="order-details"><div>Your card will be charged next on <span>{{ctrl.nextCharge}}</span>.</div><div>Your order ID is: <span>{{ctrl.subscription.id}}</span>.</div></div><div class="print">Please print this screen for your records.</div><div class="resources" layout="" layout-xs="column" layout-align="center center"><div flex="none"><md-button class="resource" layout="column" layout-align="center center" ng-click="ctrl.goToGettingStartedWithPro()"><img src="../assets/images/getting_started_assignment.png"><div>Getting Started</div></md-button></div><div flex=""></div><div flex="none"><md-button class="resource" layout="column" layout-align="center center" ng-click="ctrl.goToWatchTutorialVideo()"><img src="../assets/images/student_portfolio.png"><div>Setting Up Student Accounts</div></md-button></div></div><div class="actions" layout="column" layout-align="start stretch"><md-button class="ck-primary" ng-click="ctrl.goHome()">Back to Classkick</md-button></div></div></div><div ng-show="ctrl.loading && !ctrl.error" flex="" layout="" layout-align="center center"><div><i class="fa ck ck-loading ck-green fa-spin fa-5x"></i></div></div><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading your receipt</p></div></div>');e.put("app/controllers/public-assignment/public-assignment.html",'<div class="assignment" layout="column" layout-align="start stretch"><div flex="none" class="header" layout="row" layout-align="center stretch"><md-button ng-if="ctrl.canGoBack" ng-click="ctrl.goBack()" class="bar-item back" flex="none" aria-label="back"><div class="contents"><i class="ck fa ck-back"></i></div></md-button><md-button class="bar-item" ng-if="ctrl.showAccountButton && !ctrl.canGoBack" ng-click="ctrl.navigate(\'root.account.nav.assignments\')" layout="row"><i class="ck fa ck-home"></i>{{ctrl.userName}}</md-button><img class="logo" ng-if="!ctrl.showAccountButton && !ctrl.canGoBack" ng-click="ctrl.navToLogin()" src="../assets/images/brand/logo-full-green.png"><div flex=""></div><div layout="row" ng-if="!ctrl.error"><md-button ng-if="!ctrl.showAccountButton" ng-click="ctrl.whatIsClasskick()"><i class="ck fa ck-youtube"></i>What is Classkick?</md-button><md-button class="share" ng-click="ctrl.showShareDialog()" aria-label="Share assignment with colleagues" layout="row" layout-align="center center"><i class="ck fa ck-share"></i><md-tooltip md-delay="1500">Share assignment with colleagues</md-tooltip></md-button><md-button class="ck-primary" ng-click="ctrl.copyAssignment()">Copy Assignment</md-button></div></div><div flex="" class="assignment-container" ng-show="ctrl.assignment && !ctrl.error" layout="column"><div class="assignment-metadata"><div class="name-container"><div class="assignment-name-title">Assignment Name</div><div class="assignment-name">{{ctrl.name}}</div></div><hr><div class="description-container" ng-if="ctrl.description"><div class="assignment-description-title">Description</div><div class="assignment-description" ng-bind-html="(ctrl.description || \'This assignment has no description.\')| linky:\'_blank\'"></div><div class="assignment-tags" flex="none" layout="" layout-align="start center"><div class="subject">Subject: <span>{{ctrl.assignment.displaySubjects}}</span></div><div class="grade">Grade: <span>{{ctrl.assignment.displayGrades}}</span></div></div></div></div><div class="questions"><div class="section-header"><div>Slides (try clicking one!)</div></div><div class="questions-container"><div ng-click="ctrl.navToQuestion(q.id)" class="question" ng-repeat="q in ctrl.assignment.questions track by $index"><assignment-sheet config="ctrl.assignmentSheetConfig($index)"></assignment-sheet><div class="question-mask"><div class="page-number">{{:: $index + 1}}</div></div></div></div></div></div><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Assignment...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading this assignment. It might be set to private.</p></div></div>');e.put("app/controllers/public-assignment-question/public-assignment-question.html",'<div class="public-assignment-question" layout="column"><div flex="none" class="assignment-question-header" layout="row"><div class="assignment-question-header-left" flex="33"><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="go back to assignment edit"><div class="contents"><i class="ck fa ck-back"></i></div></md-button></div><div layout="row" layout-align="center center" flex=""><span class="classkick-header truncate">{{:: ctrl.assignmentName}}</span></div><div ng-if="!ctrl.error" layout="row" layout-align="end center" flex=""><md-button class="what-is-classkick" ng-if="!ctrl.isLoggedIn" hide-xs="" hide-sm="" ng-click="ctrl.whatIsClasskick()"><div class="content" layout="row" layout-align="center center"><i class="ck fa ck-youtube"></i>What is Classkick?</div></md-button><md-button ng-if="!ctrl.isLoggedIn" class="md-icon-button" hide-md="" hide-lg="" hide-xl="" ng-click="ctrl.whatIsClasskick()" layout="row" layout-align="center center"><div class="content" layout="row" layout-align="center center"><i class="ck fa ck-help ck-grey"></i></div></md-button><md-button class="ck-primary" ng-click="ctrl.copyAssignment()"><div class="contents" layout="" layout-align="center center"><span>Copy</span> <span hide-xs="" hide-sm="" hide-md="" class="use-assignment">Assignment</span></div></md-button></div></div><div flex="" layout="column" ng-show="ctrl.assignmentQuestionConfig"><assignment-question flex="" config="ctrl.assignmentQuestionConfig"></assignment-question></div><div flex="grow" class="error" ng-if="ctrl.error"><p>Sorry, there was a problem loading this assignment. It might be set to private.</p></div></div>');e.put("app/controllers/public-assignments-list/public-assignments-list.html",'<div class="public-assignments-list" layout="column" layout-align="start stretch"><div flex="none" class="header" layout="" layout-align="start center"><img class="logo" ng-click="ctrl.navToLogin()" src="../assets/images/brand/logo-full-green.png"></div><div flex="" class="body" ng-if="!ctrl.loading && !ctrl.error" layout="column" layout-align="start stretch"><div flex="none" class="user-info" layout="row" layout-align="start center"><div flex="" class="classkick-header">{{ctrl.username}}\'s Public Assignments</div><div ng-if="ctrl.isAuthenticated && ctrl.clipboardIsSupported" class="link-input" layout="row" layout-align="start center"><md-button ng-click="ctrl.copy()" class="ck-primary submit-button">Copy Link to Share</md-button></div></div><div flex="" class="list-container" layout="column" layout-align="start stretch"><div flex="none" class="list-header" layout="row" layout-nowrap=""><div flex=""><md-button class="col name" ng-click="ctrl.setOrToggleName()" aria-label="name table header"><div>Name <i ng-if="ctrl.showNameCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button md-no-ink="" class="col tools" aria-label="tools table header"></md-button></div></div><md-list flex=""><md-list-item ng-click="ctrl.goToAssignment(assignment)" class="list-item" layout="row" layout-nowrap="" ng-repeat="assignment in ctrl.assignments | orderBy: ctrl.orderBy() : !ctrl.isAscending"><span flex="" class="col name" layout="row" layout-align="start center"><i class="ck fa ck-icon-grey ck-assignment"></i><div class="truncate">{{assignment.name}}</div></span> <span flex="none" class="col tools"></span></md-list-item><div ng-if="ctrl.assignments.length < ctrl.PUBLIC_ASSIGNMENTS_HELP_MESSAGE_LIMIT" class="list-helper">{{ctrl.username}} doesn\'t have any public assignments.</div></md-list></div></div><div class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Assignments...</p></div><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading this user\'s profile info</p></div></div>');e.put("app/controllers/root/root.html",'<div class="root-div"><div class="root-content-parent enter-fade" ng-show="ctrl.state === \'loading\'"><div><div><i class="fa ck ck-loading ck-green fa-spin fa-5x"></i></div>Loading Classkick</div></div><div class="root-content-parent enter-fade" ng-show="ctrl.state === \'error\'"><div><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><div>We\'re having some trouble loading Classkick</div><div>Please try again in a little bit</div></div></div><div class="root-content-parent enter-fade" ng-show="ctrl.state === \'maintenance\'"><div><div><i class="fa ck ck-megaphone fa-5x"></i></div><div>Classkick is down for scheduled maintenance.</div><br><br><div>This maintenance is part of Classkicks ongoing effort to meet the needs of teachers</div><div>and students as more and more schools are relying on tools like Classkick</div><div>to support virtual learning. We apologize for any inconvenience this may cause.</div><br><br><a href="https://classkick.com/status">status page</a></div></div><div class="app-content enter-fade" ng-if="ctrl.state === \'ready\'"><div ui-view=""></div></div></div>');e.put("app/controllers/roster-edit/roster-edit.html",'<div class="roster-edit" layout="column"><div class="header" flex="none"><div flex="" class="back-button" layout="row" layout-align="start center"><md-button class="bar-item back" ng-click="ctrl.goBack()" aria-label="Go back to rosters"><div class="contents"><i class="ck fa ck-back"></i></div></md-button><saving-indicator save-state="ctrl.saveMessage"></saving-indicator></div><span flex="none" class="classkick-header">Edit Roster</span><div flex="" class="options-menu-button" layout="row" layout-align="end center"><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open($event)" aria-label="more options for roster"><div class="contents"><i class="ck fa ck-moreoptions"></i></div></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="ctrl.showLockMenu()" aria-label="Lock Options"><div class="menu-item-content" layout="row" layout-align="start center">Lock Options</div></md-button></md-menu-item><md-menu-item><md-button md-prevent-menu-close="md-prevent-menu-close" ng-click="ctrl.togglePeerHelp()" aria-label="Toggle Peer Helpers"><div class="menu-item-content" layout="row" layout-align="start center">{{ctrl.roster.allowPeerHelp ? \'Disallow\' : \'Allow\'}} Peer Help</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.deleteRoster()" aria-label="Delete Roster"><div class="menu-item-content" layout="row" layout-align="start center">Delete Roster</div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.exportGrades()" aria-label="Export Grades"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Grades</span><div class="anchor" ng-show="!ctrl.hasGradeExport || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item></md-menu-content></md-menu></div></div><div ng-hide="ctrl.loading || ctrl.errorMessage" flex="" layout="column"><div class="metadata" layout="column" layout-align="start" flex="none"><div class="name-and-color" layout="row" layout-align="start stretch"><div class="name"><ng-form name="rosterNameForm"><md-input-container><span class="label">Name</span> <input name="rosterNameInput" ng-model="ctrl.roster.name" ng-change="ctrl.save(rosterNameForm.rosterNameInput)" aria-label="edit roster name" required="" maxlength="35" ck-autofocus="ctrl.focusName" md-no-asterisk=""><div ng-messages="rosterNameForm.rosterNameInput.$error"><div ng-message="required">You need a roster name</div><div ng-message="maxlength">Roster Name is too long</div></div></md-input-container></ng-form></div><div class="color"><div class="title">Color</div><md-button ng-click="ctrl.showColorMenu()" aria-label="change roster color"><span class="action-item"><div id="ck-color-menu" class="circle" ng-style="{\'background-color\': ctrl.roster.color}"></div></span></md-button></div></div></div><div flex="none" class="list-header" layout="row" layout-nowrap=""><md-button flex="50" class="col name" ng-click="ctrl.setOrToggleName()" aria-label="name table header"><div class="name">Student Name <i ng-if="ctrl.showNameCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button><md-button flex="none" class="col account-type" ng-click="ctrl.setOrToggleAccountType()" aria-label="account type table header"><div class="account-type">Account Type <i ng-if="ctrl.showAccountTypeCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': !ctrl.isAscending}"></i></div></md-button><md-button flex="50" class="col email" ng-click="ctrl.setOrToggleEmail()" aria-label="email table header"><div class="email">Email or Username <i ng-if="ctrl.showEmailCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button><md-button flex="grow" class="col status" ng-click="ctrl.setOrToggleStatus()" aria-label="status table header"><div class="status">Active on Assignment <i ng-if="ctrl.showStatusCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button><md-button flex="none" class="col helps" ng-click="ctrl.setOrToggleHelps()" aria-label="help requests table header"><md-tooltip md-delay="1000" md-direction="top">Help requests</md-tooltip><div class="helps"><span class="request-carrot"></span> <span><i class="ck fa ck-hand"></i></span> <span class="request-carrot"><i ng-show="ctrl.showHelpsCarrot" class="ck fa ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></span></div></md-button><span class="col edit" flex="none"></span><div flex="none" class="col tools" aria-label="tools table header"></div></div><md-list class="roster-edit-list" flex=""><md-list-item class="list-button" ng-click="ctrl.addNewStudent()"><span>+ ADD STUDENTS</span></md-list-item><div ng-repeat="(id, item) in ctrl.list | orderObjectBy: ctrl.orderBy() : !ctrl.isAscending"><md-list-item id="{{::item.user.id}}" class="list-item" ng-if="!ctrl.userIsAnonymous(item.user.username)" ng-click="ctrl.editUser(item.user.id)"><span flex="50" class="col name">{{item.user.name}}</span> <span flex="none" class="col account-type">Portfolio</span> <span flex="50" class="col email">{{item.user.email || item.user.username}}</span> <span flex="grow" class="col status">{{item.displayStatus}}</span> <span flex="none" class="col helps"><help-request-indicator help-requests="item.helpRequests"></help-request-indicator></span> <span flex="none" class="col tools"><md-button class="bar-item" ng-click="ctrl.editUser(item.user.id)" aria-label="edit user"><md-tooltip md-direction="bottom" md-delay="1000">Edit student</md-tooltip><i class="ck fa ck-edit"></i></md-button></span> <span flex="none" class="col tools"><md-button class="bar-item" ng-click="ctrl.removeMember(item.user)" aria-label="Remove student from roster"><md-tooltip md-direction="bottom" md-delay="1000">Remove student from roster</md-tooltip><i class="ck fa ck-icon-grey ck-close"></i></md-button></span></md-list-item><md-list-item id="{{::item.userId}}" class="list-item" ng-if="ctrl.userIsAnonymous(item.user.username)"><span flex="50" class="col name"><ng-form name="nameForm"><md-input-container md-no-float=""><input name="nameInput" type="text" ng-model="item.user.displayName" ng-change="ctrl.saveName(item.user, nameForm.nameInput)" aria-label="edit student name" required=""><div class="error-messages" ng-messages="nameForm.nameInput.$error"><div ng-message="required">You need a name</div></div></md-input-container></ng-form></span> <span flex="none" class="col account-type">Basic</span> <span flex="50" class="col email anon-user">--</span> <span flex="grow" class="col status">{{item.displayStatus}}</span> <span flex="none" class="col helps"><help-request-indicator help-requests="item.helpRequests"></help-request-indicator></span> <span class="col edit" flex="none" layout="row" layout-align="center center"></span> <span flex="none" class="col tools"><md-button class="bar-item" ng-click="ctrl.removeMember(item.user)" aria-label="Remove student from roster"><md-tooltip md-direction="bottom" md-delay="1000">Remove student from roster</md-tooltip><i class="ck fa ck-icon-grey ck-close"></i></md-button></span></md-list-item></div></md-list></div><div flex="" class="loading" ng-if="ctrl.loading && !ctrl.errorMessage"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Roster...</p></div><div class="error" ng-if="ctrl.errorMessage" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">{{ctrl.errorMessage}}</p></div></div>');e.put("app/controllers/rosters-list/rosters-list.html",'<div class="teacher-rosters" layout="column" layout-align="start stretch"><div flex="none" class="header"><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Open menu"><i class="ck fa ck-menu"></i></md-button><span class="classkick-header" layout="row" layout-align="center center"><span>Rosters</span><md-button class="contextual-help" ng-click="ctrl.showHelp()" aria-label="help" layout="row" layout-align="center center"><i class="fa ck ck-contextualhelp"></i></md-button></span><div hide-xs="" class="search-input"><div class="anchor"><i class="ck fa ck-search"></i></div><md-input-container md-no-float=""><input type="text" ng-model="ctrl.query" placeholder="Search"></md-input-container></div><md-menu md-position-mode="target-right target"><md-button class="md-fab" ng-click="$mdMenu.open($event)" aria-label="Add assignment"><div class="inner"><i class="ck fa ck-plus"></i><md-tooltip md-delay="1000">Create or Import Roster</md-tooltip></div></md-button><md-menu-content width="4"><md-menu-item><md-button ng-click="ctrl.create()" aria-label="New Blank Assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="start center"><i class="ck fa ck-roster"></i></span> <span>New Roster</span></div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.importFromGoogleClassroom()" aria-label="Import From Google"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><img class="google-classroom-icon" src="../assets/images/google_classroom_icon.png"></span> <span>Import from Google</span><div class="anchor" ng-show="!ctrl.hasStudentAccounts || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item></md-menu-content></md-menu></div><div ng-hide="ctrl.loading" class="list-header" flex="none" layout="row" layout-nowrap=""><div flex="grow"><md-button class="col name" ng-class="{\'hide\': !ctrl.showName}" ng-click="ctrl.setOrToggleName()" aria-label="name table header"><div class="name">Roster Name <i ng-if="ctrl.showNameCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="none"><md-button class="col helps" ng-class="{\'hide\': !ctrl.showHelps}" ng-click="ctrl.setOrToggleHelps()" aria-label="help requests table header"><md-tooltip md-delay="1000" md-direction="top">Help requests</md-tooltip><div class="helps"><span class="request-carrot"></span> <span><i class="ck fa ck-hand"></i></span> <span class="request-carrot"><i ng-show="ctrl.showHelpsCarrot" class="ck fa ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></span></div></md-button></div><div flex="none" class="col tools" aria-label="tools table header"></div></div><md-list flex="" ng-hide="ctrl.loading" layout="column" layout-align="start stretch"><md-list-item ng-click="ctrl.goToRoster(item)" class="list-item" ng-repeat="item in ctrl.list | orderBy: ctrl.orderBy() : !ctrl.isAscending | filter: ctrl.searchFilter()"><span flex="grow" class="col name {{::ctrl.showName ? \'\' : \'hide\'}}"><span class="circle" ng-style="{\'background-color\': item.roster.color}"></span> {{item.roster.name}}</span> <span flex="none" class="col tools"><md-button class="bar-item" ng-show="item.roster.isGoogleRoster" ng-click="ctrl.syncGoogleRoster(item.roster)"><md-tooltip md-delay="1000" md-direction="top">Sync with Google Classroom</md-tooltip><i class="ck fa ck-icon-grey ck-sync"></i></md-button></span> <span flex="none" class="col helps {{ctrl.showHelps ? \'\' : \'hide\'}}"><help-request-indicator help-requests="item.helpRequests"></help-request-indicator></span> <span flex="none" class="col tools"><md-button class="bar-item" ng-click="ctrl.delete(item.roster.id, item.roster.name)" aria-label="delete roster"><md-tooltip md-delay="1000" md-direction="top">Delete roster</md-tooltip><i class="ck fa ck-icon-grey ck-trash"></i></md-button></span></md-list-item></md-list><div flex="" class="loading" ng-if="ctrl.loading && !ctrl.error"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Rosters...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading your rosters</p></div></div>');e.put("app/controllers/session/session.html",'<div class="session" layout="column"><div class="header" flex="none" layout="row" layout-align="start stretch"><div class="full-height" layout="row" layout-align="start center" flex=""><md-button class="home" ng-click="ctrl.goHome()" aria-label="back"><div class="contents"><i class="ck fa ck-home"></i></div><md-tooltip md-delay="1500">Go Home</md-tooltip></md-button><div flex="" layout="" layout-align="start center"><div class="assignment-name truncate">{{ctrl.assignmentName}}</div></div></div><section flex="none" class="nav-toggle" layout="row" layout-align="center center"><div class="background-border"></div><md-button class="left" ng-click="ctrl.goEdit()">Edit</md-button><md-button class="middle" ng-click="ctrl.goToAssignmentRosters()">Assign</md-button><md-button class="right" disabled="">View Work</md-button></section><div class="full-height" layout="row" layout-align="end center" flex=""><div ng-if="ctrl.loaded && ctrl.data.hasRosters && ctrl.data.roster" layout="row" layout-align="end center" layout-fill=""><md-button class="bar-item contextual-help" ng-click="ctrl.showSessionHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i><md-tooltip md-delay="1500">Get Help</md-tooltip></md-button><help-inbox ng-if="ctrl.loaded" help-inbox-metadata="ctrl.data.helpInboxMetadata" on-select="ctrl.goToFeedbackQuestion(request.helpeeId, request.questionId)"></help-inbox><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open($event)" aria-label="more options"><div class="contents"><i class="ck fa ck-moreoptions"></i></div><md-tooltip md-delay="1000" md-direction="bottom">More Options</md-tooltip></md-button><md-menu-content class="assignment-more-options-menu" width="4"><md-menu-item><md-button aria-label="Share assignment with students and colleagues" ng-click="ctrl.share()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-share"></i></span> <span>Share</span></div></md-button></md-menu-item><md-menu-item><md-button aria-label="Export slides to PDF" ng-click="ctrl.exportContentToPDF()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-export"></i></span> <span>Export Slides to PDF</span></div></md-button></md-menu-item><md-menu-item ng-if="ctrl.hasFoldersFeature"><md-button ng-click="ctrl.moveAssignmentToFolder()" aria-label="Move assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-move"></i></span> Move</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.duplicate()" aria-label="Duplicate assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-duplicate"></i></span> Duplicate</div></md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.delete()" aria-label="Delete assignment"><div class="menu-item-content" layout="row" layout-align="start center"><span layout="row" layout-align="center"><i class="ck fa ck-options-trash"></i></span> Delete</div></md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button aria-label="Manage current roster" ng-click="ctrl.goToRosterEdit()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-roster"></i></span> <span>Manage Roster</span></div></md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree && !ctrl.hasExportStudentWork}" ng-click="ctrl.exportWorkToPDF()" ng-disabled="ctrl.data.rosterIsEmpty" aria-label="Export student work to PDF"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Student Work to PDF</span><div class="anchor" ng-show="!ctrl.hasExportStudentWork || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.exportGrades()" aria-label="Export current assignment\\\'s grades to .csv"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Grades</span><div class="anchor" ng-show="!ctrl.hasGradeExport || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item><md-menu-item><md-button ng-class="{\'disabled\': ctrl.pro.isFree}" ng-click="ctrl.exportAnswers()" aria-label="Export current assignment\\\'s multiple choice and fill in the blank answers to .csv"><div class="menu-item-content" layout="row" layout-align="start stretch"><span>Export Answers</span><div class="anchor" ng-show="!ctrl.hasGradeExport || ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></div></md-button></md-menu-item></md-menu-content></md-menu></div></div></div><div class="config-bar" ng-if="ctrl.loaded && ctrl.data.hasRosters && ctrl.data.roster" layout="" layout-align="start center" ng-class="{\'shadow\': ctrl.isSessionQuestion}"><md-input-container class="option" md-no-float=""><md-select ck-select="" md-container-class="ck-select-menu" name="access" ng-model="ctrl.roster" placeholder="Roster"><md-option ng-value="roster" ng-repeat="roster in ctrl.data.assignmentRosters" layout="column" layout-align="center stretch"><div layout="row" layout-align="space-between center" style="width: 100%"><div layout="row" layout-align="start center"><span class="roster-circle" ng-style="{\'background-color\': roster.color}"></span><div layout="">{{:: roster.name}}</div></div><div class="help-request-indicator" ng-show="ctrl.data.roster !== roster"><help-request-indicator help-requests="ctrl.data.assignmentHelpRequestsForRoster(roster.id)" show-hand="true"></help-request-indicator></div></div></md-option><div class="divider"></div><md-option class="secondary-action" ng-value="" ng-click="ctrl.chooseAddRoster()">+ Assign Roster</md-option></md-select><md-tooltip md-delay="1000">Select Existing or Create New Roster</md-tooltip></md-input-container><md-button class="class-code" ng-click="ctrl.shareWithStudentDialog()" aria-label="Class Code {{:: ctrl.data.classCode.format()}}"><div layout="row" layout-align="center center"><span>{{:: ctrl.data.classCode.format()}}</span> <i class="ck ck-link"></i></div><md-tooltip md-delay="1000">Class Code</md-tooltip></md-button><div class="divider"></div><md-input-container class="option" md-no-float=""><md-select ck-select="" md-container-class="session-question-selector-menu" ng-model="ctrl.sessionQuestionNumber" aria-label="View by Slide"><md-option ng-value="ctrl.data.ViewAllSlides">View All Slides</md-option><md-option ng-value="q.number" ng-repeat="q in ctrl.data.questions">Slide #{{::q.number}}</md-option></md-select><md-tooltip md-delay="1000">View by Slide</md-tooltip></md-input-container><md-input-container class="option" md-no-float=""><md-select ck-select="" md-container-class="ck-select-menu" ng-model="ctrl.data.studentSort" placeholder="Sort"><md-option ng-value="sort" ng-repeat="sort in ctrl.data.studentSortOptions">{{::sort.name}}</md-option></md-select><md-tooltip md-delay="1000">Sort Students</md-tooltip></md-input-container><md-menu md-position-mode="target target" style="padding: 0; height: 100%"><md-button class="bar-item filters" ng-click="$mdMenu.open($event)" aria-label="Filter Students and Configure Assignment Settings"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-filters"></i> <span flex="" hide-sm="" layout="" layout-align="start center">Filters</span><md-tooltip md-delay="1000" md-direction="bottom">Filter Students and Configure Assignment Settings</md-tooltip></div></md-button><md-menu-content class="filters-menu" width="3"><md-list-item class="filters-title"><div class="contents" layout="" layout-align="start center">Filters</div></md-list-item><md-menu-item layout="" layout-align="start center"><ck-switch active="ctrl.showWork" ng-class="{disabled: ctrl.isSessionQuestion}">Shrink thumbnails</ck-switch></md-menu-item><md-menu-item layout="" layout-align="start center"><ck-switch active="ctrl.hideUnstartedThumbnails">Hide unstarted thumbnails</ck-switch></md-menu-item><md-menu-item layout="" layout-align="start center"><ck-switch active="ctrl.hideOfflineStudents">Hide offline students</ck-switch></md-menu-item><md-menu-item layout="" layout-align="start center"><ck-switch active="ctrl.hideUnstartedAssignmentWorks">Hide students who haven\'t started this assignment</ck-switch></md-menu-item><md-menu-item layout="" layout-align="start center"><span layout="" layout-align="start center"><ck-switch active="ctrl.hideStudentNames">Hide student names</ck-switch><md-button class="contextual-help" ng-click="ctrl.showHideStudentNamesHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></span></md-menu-item><md-list-item class="settings-title"><div class="contents" layout="" layout-align="start center">Settings</div></md-list-item><md-menu-item layout="" layout-align="start center"><span layout="" layout-align="start center"><ck-switch active="ctrl.studentHelpers">Allow peer helpers</ck-switch><md-button class="contextual-help" ng-click="ctrl.showAllowPeerHelpersHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></span></md-menu-item><md-menu-item layout="" layout-align="start center"><span layout="" layout-align="start center"><ck-switch active="ctrl.showStudentScores">Show students their grades</ck-switch><md-button class="contextual-help" ng-click="ctrl.showShowStudentScoresHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></span></md-menu-item><md-menu-item layout="" layout-align="start center"><span layout="" layout-align="start center"><ck-switch active="ctrl.hideStudentWork">Hide assignment on student dashboard</ck-switch><md-button class="contextual-help" ng-click="ctrl.showHideAssignmentHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></span></md-menu-item><md-menu-item layout="" layout-align="start center"><span layout="" layout-align="start center"><ck-switch active="ctrl.lockStudentWork">Lock assignment</ck-switch><md-button class="contextual-help" ng-click="ctrl.showLockAssignmentHelp()" aria-label="help" layout="row" layout-align="center center"><i class="ck fa ck-contextualhelp"></i></md-button></span></md-menu-item></md-menu-content></md-menu><div flex=""></div><md-button class="bar-item placing-sticker" ng-show="!ctrl.isSessionWatch && ctrl.data.placingSticker" ng-click="ctrl.stopPlacingSticker()" aria-label="Give stickers"><div class="contents" layout="" layout-align="center center"><div flex="none" class="image-container" layout="" layout-align="center center"><img ng-src="{{ctrl.data.placingSticker.imageUrl ? ctrl.data.placingSticker.imageUrl : ctrl.data.placingSticker.BlankStickerUrl}}"></div><span class="text" flex="" hide-sm="" layout="" layout-align="start center">{{ctrl.data.placingSticker.partialText}}</span><div flex="none"><i class="ck fa ck-close"></i></div><md-tooltip md-delay="1000" md-direction="bottom">Close Sticker Wand</md-tooltip></div></md-button><md-button class="bar-item stickers" ng-hide="ctrl.data.placingSticker" ng-click="ctrl.openStickerMenu($event)" aria-label="Give stickers"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-quickfeedback"></i> <span flex="" hide-sm="" layout="" layout-align="start center">Stickers</span><md-tooltip md-delay="1000" md-direction="bottom">Give Stickers</md-tooltip></div></md-button></div><div ng-if="ctrl.loading" class="config-bar" layout="" layout-align="start center"></div><div class="config-bar" ng-if="ctrl.error" layout="" layout-align="start center"><md-input-container class="select-roster option" md-no-float=""><md-select ck-select="" md-container-class="ck-select-menu" name="access" ng-model="ctrl.roster" placeholder="Assign Roster"><md-option ng-value="roster" ng-repeat="roster in ctrl.data.assignmentRosters" layout="column" layout-align="center stretch"><div layout="row" layout-align="space-between center" style="width: 100%"><div layout="row" layout-align="start center"><span class="roster-circle" ng-style="{\'background-color\': roster.color}"></span><div layout="">{{:: roster.name}}</div></div><div class="help-request-indicator" ng-show="ctrl.data.roster !== roster"><help-request-indicator help-requests="ctrl.data.assignmentHelpRequestsForRoster(roster.id)" show-hand="true"></help-request-indicator></div></div></md-option><md-option disabled="">No Rosters</md-option><div class="divider"></div><md-option class="secondary-action" ng-value="" ng-click="ctrl.chooseAddRoster()">+ Assign Roster</md-option></md-select><md-tooltip md-delay="1000">Select Existing or Create New Roster</md-tooltip></md-input-container><md-button disabled="" class="class-code" aria-label="Class Code will display here once you add a roster to this assignment"><div class="contents" layout="" layout-align="start start"><span layout="" layout-align="start center">Class Code</span><md-tooltip md-delay="1000">Class Code</md-tooltip></div></md-button><div class="divider"></div><md-button disabled="" class="disabled-session-question" aria-label="View by Slide"><div layout="" layout-align="start start"><span flex="">View All Slides</span> <i class="ck fa ck-carrot"></i><md-tooltip md-delay="1000">View by Slide</md-tooltip></div></md-button><md-button disabled="" class="disabled-sort" aria-label="Sort Students"><div layout="" layout-align="start start"><span flex="">Students A-Z</span> <i class="ck fa ck-carrot"></i><md-tooltip md-delay="1000">Sort Students</md-tooltip></div></md-button><md-button class="bar-item" disabled="" aria-label="Filter Students and Configure Assignment Settings"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-filters"></i> <span hide-sm="" layout="" layout-align="start center">Filters</span><md-tooltip md-delay="1000" md-direction="bottom">Filter Students and Configure Assignment Settings</md-tooltip></div></md-button><div flex=""></div><md-button class="bar-item stickers" disabled="" aria-label="Give stickers to students by clicking on thumbnails"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-quickfeedback"></i> <span hide-sm="" layout="" layout-align="start center">Stickers</span><md-tooltip md-delay="1000" md-direction="bottom">Give Stickers</md-tooltip></div></md-button></div><div layout="column" flex="" ui-view=""></div></div>');
e.put("app/controllers/session-question/session-question.html",'<div class="session-question" layout="column" flex=""><div class="loading full-height" ng-if="ctrl.loading" flex=""><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Student Work...</p></div><div flex="" class="body full-height" ng-show="ctrl.loaded" layout="column" layout-align="start stretch"><div class="body-content" ng-class="{\'placing-sticker\': ctrl.data.placingSticker}" flex=""><div class="view-all-questions" layout="" layout-align="start center"><a ng-click="ctrl.goToViewAllQuestions()"><div layout="" layout-align="start center"><i class="ck fa ck-pagerback"></i> Back to View All Slides</div></a></div><div class="thumbnail-container" layout="row" layout-align="start start" layout-wrap=""><div id="{{thumbnail.student.id}}" class="thumbnail" flex="33" ng-style="ctrl.thumbnailStyle" ng-class="{\'offline\': !ctrl.data.studentIsOnline(thumbnail.student.id)}" ng-repeat="thumbnail in ctrl.thumbnails track by thumbnail.trackingId"><div class="student-info" layout="" layout-align="start stretch"><div flex="nogrow" class="name truncate" ng-click="ctrl.showStudentInfoMenu($event, thumbnail.student)">{{ctrl.data.realOrAnonNameForStudent(thumbnail.student)}}</div><div flex="none"><md-button class="peer-help-inbox-btn" ng-class="{\'active\': ctrl.data.studentIsHelpingPeer(thumbnail.student.id)}" ng-click="ctrl.openPeerHelpInbox($event, thumbnail.student)"><div layout="" layout-align="center"><i class="ck ck-studenthelpers"></i> <span>{{ctrl.data.studentActiveHelpOrHistoryCount(thumbnail.student.id)}}</span><md-tooltip md-delay="1000" md-direction="bottom">Click to view this student\'s help history</md-tooltip></div></md-button></div><div flex="none" ng-if="thumbnail.student.displayName" layout="" layout-align="start center"><div class="anon-tag" ng-click="ctrl.openStudentAccountHelpDialog()">BASIC</div></div><div flex=""></div></div><md-button class="work {{ctrl.assignmentSheetConfig(thumbnail.student.id, thumbnail.question.id) ? \'started\' : \'\'}}" layout="column" layout-align="start stretch" ng-click="ctrl.handleThumbnailClicked(thumbnail.student.id, thumbnail.question.id, $event)"><assignment-sheet config="ctrl.assignmentSheetConfig(thumbnail.student.id, thumbnail.question.id)"></assignment-sheet><div class="question-work-content" layout="column" layout-align="end start" flex="100"><div><div class="question-answer" ng-style="ctrl.answerStyle" layout="row" layout-align="start center" ng-class="ctrl.data.studentQuestionAnswerClass(thumbnail.student.id, thumbnail.question.id)"><span flex="">{{ctrl.data.studentQuestionAnswerValue(thumbnail.student.id, thumbnail.question.id)}}</span></div></div><div class="anchor"><div class="question-score" flex="none" layout="row" layout-align="center center"><grade-input ng-click="$event.stopPropagation()" flex="none" ng-model="thumbnail.score" potential-score="thumbnail.points" ng-keydown="ctrl.handleGradeKeydown($event, $index)"></grade-input></div><md-button class="enter-up" ng-if="ctrl.data.hasOpenHelpRequestOrHelpers(thumbnail.student.id, thumbnail.question.id)" ng-class="ctrl.data.findOpenHelpRequestType(thumbnail.student.id, thumbnail.question.id)" ng-click="ctrl.handleThumbnailClicked(thumbnail.student.id, thumbnail.question.id, $event)" aria-label="give feedback"><div layout="row" layout-align="center center"><i class="ck ck-hand"></i></div></md-button></div></div><div ng-if="ctrl.data.studentIsCurrentLocation(thumbnail.student.id, thumbnail.question.id)" class="current enter-fade"></div></md-button></div></div><div ng-if="ctrl.loaded" class="tip" layout="column" layout-align="center center"><div ng-if="ctrl.data.showClassCodeHelpText" layout="" layout-align="center center"><div>Have students log in with Class Code:</div><a class="class-code" ng-click="ctrl.data.makeClassCodePulse()" ng-style="{\'color\': \'{{::ctrl.data.roster.color}}\'}">{{:: ctrl.data.classCode.format()}}</a></div><div ng-if="ctrl.data.showFeedbackHelpText" layout="" layout-align="center center"><div>Learn about all the ways to <a ng-click="ctrl.openGivingFeedbackHelp()">give feedback</a> in Classkick</div></div><div ng-if="ctrl.data.showStudentsAreHiddenHelpText" layout="" layout-align="center center"><div>{{ctrl.data.filteredStudentsCount}} students are currently hidden.</div><a class="show-students" ng-click="ctrl.showHiddenStudents()" ng-style="{\'color\': \'{{::ctrl.data.roster.color}}\'}">Show All Students</a></div></div></div></div><div class="error-container" ng-if="ctrl.error" flex="" layout="column" layout-align="start stretch"><div class="no-roster" ng-if="ctrl.error.noRosters">Select a <a ng-click="ctrl.data.makeRosterSelectPulse()">roster</a> to get started</div><div class="error" ng-if="!ctrl.error.noRosters" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">{{ctrl.error.message}}</p></div></div></div><div class="blank-slate"><div ui-view=""></div></div>');e.put("app/controllers/session-watch/session-watch.html",'<div class="session-watch" layout="column" flex=""><div class="loading full-height" ng-if="ctrl.loading" flex=""><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Student Work...</p></div><div class="body full-height" ng-show="ctrl.loaded" layout="column" flex=""><div class="body-head" layout="row" layout-nowrap="" flex="none" layout-align="start stretch"><div class="student-info" flex="none" layout="column" layout-align="start stretch"></div><div class="horizontal-scroll-button back" layout="" layout-align="start center"><md-button ng-disabled="ctrl.cannotScrollLeft" aria-label="scroll left" ng-click="ctrl.scrollLeft()"><i class="ck ck-pagerback"></i></md-button></div><div class="horizontal-scroll-container" flex=""><div class="horizontal-scroll" flex=""><div class="horizontal-scroll-content" layout="row" layout-nowrap=""><div class="column" ng-repeat="q in ctrl.data.questions track by q.question.id"><div class="question-cell-header" layout="column" layout-align="center center"><md-button class="number" ng-click="ctrl.goToEditQuestion(q.question, $event)"><div layout="row" layout-align="space-between center"><span>{{::q.number}}</span> <i class="ck fa ck-edit"></i> <span class="value" layout="row" layout-align="center center"><ng-pluralize count="q.question.points" when="{\'one\': \'{} pt\', \'other\': \'{} pts\'}"></ng-pluralize></span></div><md-tooltip md-delay="1500">Edit Slide #{{::q.number}}</md-tooltip></md-button></div></div></div></div></div><div class="horizontal-scroll-button next" layout="" layout-align="start center"><md-button ng-disabled="ctrl.cannotScrollRight" aria-label="scroll right" ng-click="ctrl.scrollRight()"><i class="ck ck-pagernext"></i></md-button></div><div class="horizontal-scroll-end-spacer"></div></div><md-content class="body-content" flex="" layout="row"><div class="student-info" flex="none" ng-style="{\'height\': ctrl.studentInfoHeight}"><div class="info row" ng-class="{\'online\': ctrl.data.studentIsOnline(user.id)}" ng-repeat="user in ctrl.data.sortedStudents track by user.id" layout="column" layout-align="start stretch" layout-nowrap=""><div class="student-info-top" layout="" layout-align="space-between start"><div class="name truncate" ng-click="ctrl.showStudentInfoMenu($event, user)">{{ctrl.data.realOrAnonNameForStudent(user)}}</div><div flex="none" ng-if="user.displayName" layout="" layout-align="start center"><div class="anon-tag" ng-click="ctrl.openStudentAccountHelpDialog()">BASIC</div></div><div flex=""></div><div flex="none" class="total-score">{{ctrl.data.studentTotalScoreDisplay(user.id)}}</div></div><div class="student-info-bottom" layout="" layout-align="space-between center"><div class="date">{{ctrl.data.studentLastSeen(user.id)}}</div><div flex="none"><md-button class="peer-help-inbox-btn" ng-class="{\'active\': ctrl.data.studentIsHelpingPeer(user.id)}" ng-click="ctrl.openPeerHelpInbox($event, user)"><div layout="" layout-align="center"><i class="ck ck-studenthelpers"></i> <span>{{ctrl.data.studentActiveHelpOrHistoryCount(user.id)}}</span></div><md-tooltip md-delay="1000" md-direction="bottom">Click to view this student\'s help history</md-tooltip></md-button></div></div></div></div><div ng-style="{\'height\': ctrl.studentContentHeight}" flex=""><div class="horizontal-scroll" flex=""><div class="horizontal-scroll-content" layout="row" layout-nowrap=""><div class="column" layout="column" layout-align="start start" ng-repeat="q in ctrl.data.questions track by q.question.id"><div class="row" layout="row" ng-repeat="user in ctrl.data.sortedStudents track by user.id"><div class="question-cell"><md-button aria-label="view student work" ng-click="ctrl.goToFeedbackQuestion(user.id, q.question.id, $event)"><div class="question-work-content" ng-class="ctrl.data.studentQuestionScoreClass(user.id, q.question.id)" layout="row" layout-align="space-between center"><div class="question-score">{{ctrl.data.studentQuestionScoreDisplay(user.id, q.question.id)}}</div><div flex="" class="question-answer" layout="row" layout-align="center center"><span>{{ctrl.data.studentQuestionAnswerValue(user.id, q.question.id)}}</span></div></div><div class="anchor"><md-button class="enter-up" ng-if="ctrl.data.hasOpenHelpRequestOrHelpers(user.id, q.question.id)" ng-class="ctrl.data.findOpenHelpRequestType(user.id, q.question.id)" ng-click="ctrl.goToFeedbackQuestion(user.id, q.question.id, $event)" aria-label="give feedback"><i class="ck ck-hand"></i></md-button></div><div ng-if="ctrl.data.studentIsCurrentLocation(user.id, q.question.id)" class="current enter-fade"></div><md-tooltip md-delay="1000" md-direction="top">Click to view this student\'s work</md-tooltip></md-button></div></div></div></div></div><div ng-if="ctrl.loaded" class="tip" layout="column" layout-align="center center"><div ng-if="ctrl.data.showClassCodeHelpText" layout="" layout-align="center center"><div>Have students log in with Class Code:</div><a class="class-code" ng-click="ctrl.data.makeClassCodePulse()" ng-style="{\'color\': \'{{::ctrl.data.roster.color}}\'}">{{:: ctrl.data.classCode.format()}}</a></div><div ng-if="ctrl.data.showFeedbackHelpText" layout="" layout-align="center center"><div>Learn about all the ways to <a ng-click="ctrl.openGivingFeedbackHelp()">give feedback</a> in Classkick</div></div><div ng-if="ctrl.data.showStudentsAreHiddenHelpText" layout="" layout-align="center center"><div>{{ctrl.data.filteredStudentsCount}} students are currently hidden.</div><a class="show-students" ng-click="ctrl.data.showHiddenStudents()" ng-style="{\'color\': \'{{::ctrl.data.roster.color}}\'}">Show All Students</a></div></div></div><div class="horizontal-scroll-spacer" flex="none" ng-style="{\'width\': ctrl.scrollSpacerWidth}"></div></md-content></div><div class="error-container" ng-if="ctrl.error" flex="" layout="column" layout-align="start stretch"><div class="no-roster" ng-if="ctrl.error.noRosters">Select a <a ng-click="ctrl.data.makeRosterSelectPulse()">roster</a> to get started</div><div class="error" ng-if="!ctrl.error.noRosters" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">{{ctrl.error.message}}</p></div></div></div><div class="blank-slate"><div ui-view=""></div></div>');e.put("app/controllers/session-work/session-work.html",'<div class="session-work" layout="column" flex=""><div class="loading full-height" ng-if="ctrl.loading" flex=""><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Student Work...</p></div><div class="body full-height" ng-show="ctrl.loaded" layout="column" flex=""><div class="body-head" layout="row" layout-nowrap="" flex="none" layout-align="start stretch"><div class="horizontal-scroll-button back" layout="" layout-align="start center"><md-button ng-disabled="ctrl.cannotScrollLeft" aria-label="scroll left" ng-click="ctrl.scrollLeft()"><i class="ck ck-pagerback"></i></md-button></div><div class="horizontal-scroll-container" flex=""><div class="horizontal-scroll"><div class="horizontal-scroll-content" layout="row" layout-nowrap=""><div class="column" ng-repeat="q in ctrl.data.questions track by q.question.id"><div class="question-cell-header" layout="column" layout-align="center center"><md-button class="number" ng-click="ctrl.goToEditQuestion(q.question, $event)"><div layout="row" layout-align="space-between center"><span>{{::q.number}}</span> <i class="ck fa ck-edit"></i> <span class="value" layout="row" layout-align="center center"><ng-pluralize count="q.question.points" when="{\'one\': \'{} pt\', \'other\': \'{} pts\'}"></ng-pluralize></span></div><md-tooltip md-delay="1500">Edit Slide #{{::q.number}}</md-tooltip></md-button></div></div></div></div></div><div class="horizontal-scroll-button next" layout="" layout-align="start center"><md-button ng-disabled="ctrl.cannotScrollRight" aria-label="scroll right" ng-click="ctrl.scrollRight()"><i class="ck ck-pagernext"></i></md-button></div></div><md-content class="body-content" ng-class="{\'placing-sticker\': ctrl.data.placingSticker}" flex=""><div class="hidden"><div class="student-info-container"><div class="student-info"><div class="info" ng-class="{\'online\': ctrl.data.studentIsOnline(user.id)}" ng-repeat="user in ctrl.data.sortedStudents track by user.id" layout="" layout-align="start stretch"><div flex="none" class="name" ng-click="ctrl.showStudentInfoMenu($event, user)"><span>{{ctrl.data.realOrAnonNameForStudent(user)}}</span></div><div flex="none" class="total-score">{{ctrl.data.studentTotalScoreDisplay(user.id)}}</div><div flex="none"><md-button class="peer-help-inbox-btn" ng-class="{\'active\': ctrl.data.studentIsHelpingPeer(user.id)}" ng-click="ctrl.openPeerHelpInbox($event, user)"><div layout="" layout-align="center"><i class="ck ck-studenthelpers"></i> <span>{{ctrl.data.studentActiveHelpOrHistoryCount(user.id)}}</span></div></md-button></div><div ng-if="user.displayName" flex="none" class="account-type"><div class="anon-tag" ng-click="ctrl.openStudentAccountHelpDialog()">BASIC</div></div></div><div ng-if="ctrl.loaded" class="tip" layout="column" layout-align="center center"><div ng-if="ctrl.data.showClassCodeHelpText" layout="" layout-align="center center"><div>Have students log in with Class Code:</div><a class="class-code" ng-click="ctrl.data.makeClassCodePulse()" ng-style="{\'color\': \'{{::ctrl.data.roster.color}}\'}">{{:: ctrl.data.classCode.format()}}</a></div><div ng-if="ctrl.data.showFeedbackHelpText" layout="" layout-align="center center"><div>Learn about all the ways to <a ng-click="ctrl.openGivingFeedbackHelp()">give feedback</a> in Classkick</div></div><div ng-if="ctrl.data.showStudentsAreHiddenHelpText" layout="" layout-align="center center"><div>{{ctrl.data.filteredStudentsCount}} students are currently hidden.</div><a class="show-students" ng-click="ctrl.data.showHiddenStudents()" ng-style="{\'color\': \'{{::ctrl.data.roster.color}}\'}">Show All Students</a></div></div></div></div></div><div class="flex-break"><md-virtual-repeat-container class="virtual-container"><div class="horizontal-scroll"><div class="horizontal-scroll-content" md-virtual-repeat="user in ctrl.data.virtualRepeatSortedStudents" md-on-demand=""><div class="row" layout="row"><div class="question-cell" layout="column" ng-repeat="q in ctrl.data.questions track by q.question.id"><div class="question-button" ng-click="ctrl.handleThumbnailClicked(user.id, q.question.id, $event)"><assignment-thumbnail config="ctrl.assignmentThumbnailConfig(user.id, q.question.id)"></assignment-thumbnail><assignment-thumbnail class="work" config="ctrl.assignmentWorkThumbnailConfig(user.id, q.question.id)"></assignment-thumbnail><div class="question-work-content" layout="column" layout-align="end start"><div><div class="question-answer" ng-class="ctrl.data.studentQuestionAnswerClass(user.id, q.question.id)" layout="row" layout-align="start center"><span flex="">{{ctrl.data.studentQuestionAnswerValue(user.id, q.question.id)}}</span></div><div class="question-score" flex="none" ng-style="{\'background-color\': ctrl.data.studentQuestionScoreColor(user.id, q.question.id)}" layout="row" layout-align="center center">{{ctrl.data.studentQuestionScoreDisplay(user.id, q.question.id)}}</div></div><div class="anchor"><div class="question-status-indicator enter-up" ng-if="ctrl.data.hasOpenHelpRequestOrHelpers(user.id, q.question.id)" ng-class="ctrl.data.findOpenHelpRequestType(user.id, q.question.id)" layout="row" layout-align="center center"><i class="ck ck-hand"></i></div></div></div><div ng-if="ctrl.data.hideUnstartedThumbnails && !ctrl.data.studentHasStartedQuestion(user.id, q.question.id)" class="unstarted"></div><div ng-if="ctrl.data.studentIsCurrentLocation(user.id, q.question.id)" class="current"></div></div></div></div></div></div></md-virtual-repeat-container></div></md-content></div><div class="error-container" ng-if="ctrl.error" flex="" layout="column" layout-align="start stretch"><div class="no-roster" ng-if="ctrl.error.noRosters">Select a <a ng-click="ctrl.data.makeRosterSelectPulse()">roster</a> to get started</div><div class="error" ng-if="!ctrl.error.noRosters" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">{{ctrl.error.message}}</p></div></div></div><div class="blank-slate"><div ui-view=""></div></div>');e.put("app/controllers/signup/signup.html",'<div class="vertical-scroll-container"><div class="signup" layout="column" layout-align="start center"><div flex="none" class="major-header"><a href="http://www.classkick.com"><img src="../assets/images/brand/classkick-logo-white.png"></a></div><form flex="none" name="createAccountForm" ng-hide="ctrl.isLoading" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.createAccount()"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"><md-button class="bar-item" ng-click="ctrl.goBack()" aria-label="Go back to previous view"><i class="fa ck ck-back ck-green"></i></md-button></div><div class="classkick-header" flex="none" layout="" layout-align="center center">{{ctrl.isTeacher ? "Teacher" : "Student"}} Sign Up</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start stretch"><p class="error-message" ng-show="!!ctrl.errorMessage">{{ctrl.errorMessage}}</p><div ng-if="ctrl.isStudent && ctrl.isChoice" layout="column" layout-align="start stretch"><md-input-container class="class-code" md-is-error="ctrl.showClassCodeError"><span class="label">Class Code</span> <input name="classCodeInput" pattern="{{::ctrl.classCodePattern}}" type="text" ng-change="ctrl.classCodeUpdated()" ng-model="ctrl.classCodeText" autocomplete="off" md-no-asterisk="" aria-label="Enter class code here"><div class="error-messages" ng-messages="createAccountForm.classCodeInput.$error"><div ng-message="pattern">Contains invalid characters</div><div ng-message="npro">Not a pro class code. Your teacher must be on a pro contract for you to create an account.</div><div ng-message="nccode">Class code was not found</div><div ng-message="locked">The roster associated with this Classcode is locked. Ask your teacher to unlock this roster or give you a different class code to sign up.</div><div ng-message="services-error">{{ctrl.servicesErrorMessage}}</div></div></md-input-container></div><div class="auth-choice" ng-if="ctrl.isChoice" layout="column" layout-align="start stretch"><md-button class="ck-secondary google-sign-in" ng-disabled="ctrl.disabled" ng-click="ctrl.googleSignUp()"><span layout="row" layout-align="center center"><span class="alignment-container" layout="row" layout-align="start center"><span class="img-container" layout="row" layout-align="center center"><img ng-src="../assets/images/google-icon.svg"></span> <span>Sign Up with Google</span></span></span></md-button><md-button class="ck-secondary clever-sign-in" ng-disabled="ctrl.disabled" ng-click="ctrl.linkToCleverAuth()"><span layout="row" layout-align="center center"><span class="alignment-container" layout="row" layout-align="start center"><span class="img-container" layout="row" layout-align="center center"><img ng-src="../assets/images/clever-logo.svg"></span> <span>Sign Up with Clever</span></span></span></md-button><md-button class="ck-secondary email-or-username-sign-in" ng-disabled="ctrl.disabled" ng-click="ctrl.state = ctrl.Password" aria-label="Create account with email or username">Sign Up With {{ctrl.isStudent ? \'Username/\' : \'\'}}Email</md-button><div class="separator"></div><div class="agreement" layout="column" layout-align="start center"><div>By signing up you are agreeing to our<br><a ng-click="ctrl.goToTermsOfServicePage()" aria-label="View our Terms of Service">Terms of Service</a> and <a ng-click="ctrl.goToPrivacyPolicyPage()" aria-label="View our Privacy Policy">Privacy Policy</a></div></div></div><div class="auth-password" ng-show="ctrl.isPassword" layout="column" layout-align="start stretch"><md-input-container ng-if="ctrl.isTeacher" class="email"><span class="label">Email</span> <input name="emailInput" pattern="{{::ctrl.emailPattern}}" type="email" ng-model="ctrl.email" autocomplete="false" required="" md-no-asterisk="" aria-label="Enter email here"><div class="error-messages" ng-messages="createAccountForm.emailInput.$error"><div ng-message="pattern">Email addresses must match the format _@_._</div><div ng-message="required">please enter an email</div><div ng-message="services-error">{{ctrl.servicesErrorMessage}}</div></div></md-input-container><md-input-container ng-if="ctrl.isStudent" class="email-or-username"><span class="label">Email or Username</span> <input name="emailOrUsernameInput" type="text" ng-model="ctrl.emailOrUsername" required="" aria-label="Enter email or username here" md-no-asterisk="" ng-change="ctrl.emailOrUsernameUpdated()"><div class="error-messages" ng-messages="createAccountForm.emailOrUsernameInput.$error"><div ng-message="required">Please enter email or username</div><div ng-message="email-format">Email addresses must match the format _@_._</div><div ng-message="username-format">Usernames must start with a letter</div><div ng-message="email-length">Email addresses must be 190 characters or less</div><div ng-message="username-length">Usernames must be between 2 and 35 characters</div><div ng-message="services-error">{{ctrl.servicesErrorMessage}}</div></div></md-input-container><md-input-container class="password"><span class="label">Password</span> <input name="passwordInput" type="{{ctrl.showPassword ? \'text\' : \'password\'}}" ng-model="ctrl.password" autocomplete="new-password" aria-label="Enter password here" required="" md-no-asterisk=""><div class="error-messages" ng-messages="createAccountForm.passwordInput.$error"><div ng-message="required">please enter a password</div></div></md-input-container><div class="checkboxes" layout="" layout-align="start center"><md-checkbox flex="" class="md-primary" ng-model="ctrl.rememberMe">Remember Me</md-checkbox><md-checkbox flex="" class="md-primary" ng-model="ctrl.showPassword">Show Password</md-checkbox></div><md-button class="ck-primary" type="submit" aria-label="Create account">Sign Up</md-button></div></div></form><div class="loading" ng-if="ctrl.isLoading" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></div>');e.put("app/controllers/signup-choice/signup-choice.html",'<div class="vertical-scroll-container"><div class="signup-choice" layout="column" layout-align="start center"><div flex="none" class="major-header"><a href="http://www.classkick.com"><img src="../assets/images/brand/classkick-logo-white.png"></a></div><div class="body" ng-hide="ctrl.isLoading"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"><md-button class="bar-item" ng-click="ctrl.goBack()" aria-label="Go back to Login with Class Code"><i class="fa ck ck-back ck-green"></i></md-button></div><div class="classkick-header" flex="none" layout="" layout-align="center center">I am a</div><div flex="" class="end"></div></div><div class="body-content" layout="" layout-xs="column"><div flex="" layout="column" layout-align="start stretch"><md-button class="student" layout="column" layout-align="center center" ng-click="ctrl.goToProInviteStudent()"><img src="assets/images/i_am_student.png"><div class="classkick-header">Student</div></md-button></div><div flex="" layout="column" layout-align="start stretch"><md-button class="teacher" layout="column" layout-align="center center" ng-click="ctrl.goToCreateTeacherAccount()"><img src="assets/images/i_am_teacher.png"><div class="classkick-header">Teacher</div></md-button></div></div></div><div class="loading" ng-if="ctrl.isLoading" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></div>');e.put("app/controllers/signup-name/signup-name.html",'<div class="vertical-scroll-container"><div class="signup-name" layout="column" layout-align="start center"><div flex="none" class="major-header"><img src="../assets/images/brand/classkick-logo-white.png"></div><form name="createTeacherAccountNameForm" ng-hide="ctrl.isLoading" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.saveName()"><div class="body-header" layout="" layout-align="center stretch"><div class="classkick-header" flex="none" layout="" layout-align="center center">Welcome to Classkick!</div></div><div class="body-content" layout="column" layout-align="start stretch"><div class="prefix" ng-hide="ctrl.isStudent"><md-autocomplete flex="" md-input-name="prefix" md-min-length="0" md-input-maxlength="40" md-search-text="ctrl.prefix" md-items="item in ctrl.autocompleteFilter(ctrl.prefix, ctrl.prefixOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-floating-label="Prefix" md-menu-container-class="ck-autocomplete-container" md-autofocus="true"><span class="label">Prefix</span><md-item-template><span md-highlight-text="ctrl.prefix">{{item}}</span></md-item-template></md-autocomplete><md-tooltip class="ck-autocomplete-tooltip" md-direction="right" md-delay="100">This is used to show your name to students</md-tooltip></div><md-input-container class="first-name"><span class="label">First Name</span> <input namg="firstNameInput" type="text" ng-model="ctrl.firstName" required="" md-no-asterisk="" aria-label="Enter your first name"></md-input-container><md-input-container class="last-name"><span class="label">Last Name</span> <input namg="lastNameInput" type="text" ng-model="ctrl.lastName" required="" md-no-asterisk="" aria-label="Enter your last name"></md-input-container><md-button class="ck-primary" type="submit" aria-label="Save prefix, first and last name">{{::ctrl.isStudent ? \'Get Started\' : \'Next\'}}</md-button></div></form><div class="loading" ng-if="ctrl.isLoading" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></div>');e.put("app/controllers/signup-school/signup-school.html",'<div class="vertical-scroll-container"><div class="signup-school" layout="column" layout-align="start center"><div flex="none" class="major-header"><img src="../assets/images/brand/classkick-logo-white.png"></div><form name="joinSchoolForm" ng-if="!ctrl.isLoading && ctrl.state === ctrl.JoinSchool" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.joinSchool(this)"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"><md-button class="bar-item" ng-click="ctrl.goBack()" aria-label="Go back to previous view"><i class="fa ck ck-back ck-green"></i></md-button></div><div class="classkick-header" flex="none" layout="" layout-align="center center">Find Your Organization</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start stretch"><md-autocomplete flex="" md-input-name="schoolNameInput" md-min-length="1" md-input-maxlength="60" md-search-text="ctrl.schoolName" md-selected-item="ctrl.school" md-item-text="item.name" md-mode="standard" md-items="item in ctrl.autocompleteSchool(ctrl.schoolName)" md-match-case-insensitive="true" md-menu-container-class="ck-join-organization-autocomplete-container" md-floating-label="Organization Name" required="" md-no-asterisk="" md-require-match="true"><span class="label">Organization Name</span><md-item-template><div ng-if="ctrl.isOrganization(item)" class="organization-content" layout="column" layout-align="center space-between"><span layout="row" layout-align="space-between start"><span class="organization-name">{{item.name}}</span> <span class="organization-members">{{item.memberCount || 0}} Teachers</span></span> <span class="organization-location">{{item.displayLocation}}</span></div><div ng-if="!ctrl.isOrganization(item)" class="add-organization" ng-click="ctrl.state = ctrl.AddSchool" layout="" layout-align="space-between"><span>My organization isn\'t listed</span> <span class="ck-green">Add organization</span></div></md-item-template><md-not-found><div class="add-organization" ng-click="ctrl.state = ctrl.AddSchool" layout="" layout-align="space-between"><span>My organization isn\'t listed</span> <span class="ck-green">Add organization</span></div></md-not-found><div class="error-messages" ng-messages="joinSchoolForm.schoolNameInput.$error"><div ng-message="required">Please select an organization from the list</div><div ng-message="md-require-match">Please select an organization from the list</div></div><div class="loading-spinner enter-fade" ng-if="ctrl.loadingAutocompleteSchool"><i class="fa ck ck-loading ck-green fa-spin"></i></div></md-autocomplete><md-button class="ck-primary" type="submit" aria-label="Join your organization">Join Organization</md-button></div></form><form name="enterSchoolDetailsForm" ng-if="!ctrl.isLoading && ctrl.state === ctrl.AddSchool" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.addSchool(this)"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"><md-button class="bar-item" ng-click="ctrl.state = ctrl.JoinSchool;" aria-label="Go back to find organization view"><i class="fa ck ck-back ck-green"></i></md-button></div><div class="classkick-header" flex="none" layout="" layout-align="center center">Add Organization</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start stretch"><md-input-container class="org-options" flex="none" md-no-float=""><span class="label">Organization Type</span><md-select ck-select="" md-container-class="ck-select-menu" name="org-options" ng-model="ctrl.organizationType" aria-label="Select your organization type"><md-option ng-value="organizationType" ng-repeat="organizationType in ctrl.organizationOptions">{{:: organizationType.option}}</md-option></md-select></md-input-container><md-input-container flex="" class="school-name"><span class="label">Your Organization Name</span> <input name="newSchoolNameInput" type="text" ng-model="ctrl.newSchoolName" required="" md-no-asterisk="" aria-label="Enter your school\'s name"></md-input-container><md-autocomplete flex="" md-input-name="schoolLocationInput" md-min-length="0" md-input-maxlength="60" md-search-text="ctrl.newSchoolLocationDisplay" md-selected-item="ctrl.newSchoolLocation" md-item-text="item.description" md-mode="standard" md-items="item in ctrl.autocompleteLocation(ctrl.newSchoolLocationDisplay)" md-delay="200" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="City or town" required="" md-no-asterisk="" md-require-match="true"><span class="label">City or town</span><md-item-template><span>{{item.description}}</span></md-item-template><div class="error-messages" ng-messages="enterSchoolDetailsForm.schoolLocationInput.$error"><div ng-message="required">Please select a city or town from the list</div><div ng-message="md-require-match">Please select a city or town from the list</div></div><div class="loading-spinner enter-fade" ng-if="ctrl.loadingAutocompleteLocation"><i class="fa ck ck-loading ck-green fa-spin"></i></div></md-autocomplete><md-button class="ck-primary" type="submit" aria-label="Save organization name, city and state">Add Organization</md-button></div></form><div class="loading" ng-if="ctrl.isLoading" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></div>');
e.put("app/controllers/student-account-assignment-feedback/student-account-assignment-feedback.html",'<div class="student-account-assignment-feedback" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" layout="row" layout-align="start center" flex=""><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="go back to assignment edit"><div class="contents"><i class="ck fa ck-back"></i></div></md-button><saving-indicator save-state="ctrl.model.saveState"></saving-indicator></div><div layout="row" layout-align="center center" flex="40"><span class="classkick-header truncate">{{ctrl.model.title}}</span></div><div hide-xs="" class="spacer" flex=""></div></div><assignment-toolbar ng-if="!ctrl.model.error" flex="" layout="column" layout-align="start start" options="ctrl.model.toolbarOptions" locked="ctrl.model.lockStudentWork"><assignment-question flex="" config="ctrl.model.assignmentQuestionConfig"></assignment-question></assignment-toolbar><div flex="grow" class="error" ng-if="ctrl.model.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/student-account-assignment-overview/student-account-assignment-overview.html",'<div class="student-account-assignment-overview" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" flex="33" layout="row" layout-align="start stretch"><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="go back to assignments list"><div class="contents"><i class="ck fa ck-home"></i><md-tooltip md-delay="1000" md-direction="bottom">Go Home</md-tooltip></div></md-button><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open()" aria-label="account"><div class="contents"><i class="ck fa ck-profile"></i></div></md-button><md-menu-content class="anon-student-profile-menu" width="3"><md-menu-item><div class="username">Hello {{ctrl.name}}</div></md-menu-item><md-menu-item><md-button ng-disabled="ctrl.model.lockStudentWork" area-label="export to PDF" ng-click="ctrl.model.exportToPDF()">Export to PDF</md-button></md-menu-item></md-menu-content></md-menu></div><div layout="row" layout-align="center center" flex="33"><span class="classkick-header truncate">{{ctrl.model.assignmentTitle}}</span></div><div flex="33" layout="row" layout-align="end center"><help-inbox ng-if="ctrl.model.allowPeerHelp" help-inbox-metadata="ctrl.model.helpInboxMetadata" on-select="ctrl.goToFeedback(request)"></help-inbox><md-button ng-if="!!ctrl.model.data" class="feedback-inbox-button" ng-click="ctrl.openFeedbackMenu($event)" aria-label="Click here to view your feedback on this assignment"><div class="contents"><feedback-indicator feedback-list="ctrl.model.data.questionFeedbackList" show-icon="true"></feedback-indicator><md-tooltip md-delay="1500">New Feedback</md-tooltip></div></md-button></div></div><div flex="" ng-if="!ctrl.error && !ctrl.model.loading" class="content" layout="row" layout-align="center start" layout-wrap=""><div class="work" flex="none" ng-repeat="thumbnail in ctrl.model.thumbnails track by thumbnail.question.id" ng-click="ctrl.goToQuestion(thumbnail.question.id)"><div class="anchor"><div class="question-overlay" layout="column" layout-align="end stretch"><div class="question-overlay-bottom" layout="" layout-align="space-between center"><div class="question-number" layout="" layout-align="center center">{{$index + 1}}</div><div class="question-score" layout="" layout-align="center center"><grade-input ng-if="ctrl.model.data.showStudentScore(thumbnail.question.id)" ng-model="thumbnail.currentPoints" potential-score="thumbnail.potentialScore" readonly="true"></grade-input></div></div></div></div><assignment-sheet config="ctrl.model.assignmentSheetConfig(thumbnail.question.id)" class="small-canvas" flex="none"></assignment-sheet></div></div><div flex="grow" ng-if="ctrl.loading" layout="column" layout-align="start center"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p>Loading Assignment...</p></div><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/student-account-assignment-work/student-account-assignment-work.html",'<div class="student-account-assignment-work" layout="column"><div class="assignment-question-header" flex="none" layout="row"><div class="assignment-question-header-left" flex="33" layout="row" layout-align="start stretch"><md-button ng-click="ctrl.goBack()" class="bar-item back" aria-label="go back to assignments list"><div class="contents"><i class="ck fa ck-home"></i><md-tooltip md-delay="1000" md-direction="bottom">Go Home</md-tooltip></div></md-button><md-menu md-position-mode="target-right target" style="padding: 0; height: 100%"><md-button class="bar-item" ng-click="$mdMenu.open()" aria-label="account"><div class="contents"><i class="ck fa ck-profile"></i></div></md-button><md-menu-content class="anon-student-profile-menu" width="3"><md-menu-item><div class="username">Hello {{ctrl.name}}</div></md-menu-item><md-menu-item><md-button ng-disabled="ctrl.model.disablePDFExport" area-label="export to PDF" ng-click="ctrl.model.exportToPDF()">Export to PDF</md-button></md-menu-item></md-menu-content></md-menu><md-button ng-click="ctrl.goToOverview()" class="bar-item back" aria-label="go to assignment overview"><div class="contents"><i class="ck fa ck-grid"></i><md-tooltip md-delay="1000" md-direction="bottom">Assignment Overview</md-tooltip></div></md-button><saving-indicator save-state="ctrl.model.saveState"></saving-indicator></div><div layout="row" layout-align="center center" flex="33"><span class="classkick-header truncate">{{ctrl.model.assignmentTitle}}</span></div><div flex="33" layout="row" layout-align="end center"><help-inbox ng-if="ctrl.model.allowPeerHelp" help-inbox-metadata="ctrl.model.helpInboxMetadata" on-select="ctrl.goToFeedback(request)"></help-inbox><md-button ng-if="!!ctrl.model.subscriptionData" class="feedback-inbox-button" ng-click="ctrl.openFeedbackMenu($event)" aria-label="Click here to view your feedback on this assignment"><div class="contents"><feedback-indicator feedback-list="ctrl.model.subscriptionData.questionFeedbackList" show-icon="true"></feedback-indicator><md-tooltip md-delay="1500">New Feedback</md-tooltip></div></md-button></div></div><assignment-toolbar ng-if="!ctrl.error" flex="" layout="column" layout-align="start start" options="ctrl.model.toolbarOptions" show-grade-input="ctrl.model.showStudentScore" locked="ctrl.model.lockStudentWork"><assignment-question flex="" config="ctrl.model.assignmentQuestionConfig"></assignment-question></assignment-toolbar><div class="loading" ng-if="ctrl.loading" layout="column" layout-align="center center"><i class="fa ck ck-loading ck-green fa-spin fa-5x"></i></div><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>Sorry, there was a problem loading this assignment.</p></div></div>');e.put("app/controllers/student-assignments-list/student-assignments-list.html",'<div class="student-assignments-list" layout="column"><div class="header" flex="none"><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Add assignment"><i class="ck fa ck-menu"></i></md-button><span class="classkick-header" layout="row" layout-align="center center"><span>Assignments</span></span><div hide-xs="" class="search-input"><div class="anchor"><i class="ck fa ck-search"></i></div><md-input-container md-no-float=""><input type="text" ng-model="ctrl.searchTerm" ng-change="ctrl.search()" placeholder="Search"></md-input-container></div><md-button class="md-fab" ng-click="ctrl.enterCode()" aria-label="Enter Code"><div class="inner"><i class="ck fa ck-plus"></i></div></md-button></div><md-content class="body" ng-hide="ctrl.loading || ctrl.error" layout="column" flex=""><div class="list-header" layout="row" layout-nowrap="" flex="none"><div flex=""><md-button class="col name" ng-click="ctrl.sortByName()" aria-label="name table header"><div>Assignment Name <i class="ck fa ck-icon-grey ck-carrot" ng-class="{show: ctrl.sort === ctrl.SORT_NAME_ASC || ctrl.sort === ctrl.SORT_NAME_DESC, flip: ctrl.sort === ctrl.SORT_NAME_DESC}"></i></div></md-button></div><div flex="none"><md-button class="col total-score" ng-click="ctrl.sortByFeedback()" aria-label="score table header"><div>Feedback <i class="ck fa ck-icon-grey ck-carrot" ng-class="{show: ctrl.sort === ctrl.SORT_FEEDBACK_ASC || ctrl.sort === ctrl.SORT_FEEDBACK_DESC, flip: ctrl.sort === ctrl.SORT_FEEDBACK_DESC}"></i></div></md-button></div><div flex="none"><md-button class="col total-score" ng-click="ctrl.sortByScore()" aria-label="score table header"><div>Grade <i class="ck fa ck-icon-grey ck-carrot" ng-class="{show: ctrl.sort === ctrl.SORT_SCORE_ASC || ctrl.sort === ctrl.SORT_SCORE_DESC, flip: ctrl.sort === ctrl.SORT_SCORE_DESC}"></i></div></md-button></div></div><div class="content" layout="column" flex=""><div class="accordion" ng-class="folder.id" ng-repeat="folder in ctrl.folders track by folder.id"><md-list-item class="square top" ng-click="ctrl.toggleFolder(folder)"><div layout="row" layout-align="start stretch"><i class="fa ck ck-pagerback" ng-class="{closed: folder.closed}" flex="none"></i> <i class="fa ck ck-folder gray" flex="none"></i> <span class="text" flex=""><span>{{folder.title}}</span></span></div></md-list-item><div class="body" ng-style="{\'max-height\': folder.height}"><md-list><md-list-item ng-hide="assignment.hideStudentWork" ng-click="ctrl.goToWork(folder, assignment)" ng-repeat="assignment in folder.assignments track by assignment.assignment.id"><i flex="none"></i> <i flex="none" layout="row" layout-align="center center"><span ng-if="!assignment.isWork" flex="none" class="indicator-circle"></span></i> <span flex="none" layout="" layout-align="center center"><i class="fa ck ck-assignment gray"></i></span> <span flex="" class="text" layout="" layout-align="start center"><span>{{assignment.name}}</span></span> <span ng-if="assignment.isWork" flex="none" class="total-feedback"><md-button class="bar-item" ng-click="ctrl.openFeedbackMenu($event, folder, assignment)" aria-label="Click here to view your feedback on this assignment"><feedback-indicator feedback-list="assignment.questionFeedbackList"></feedback-indicator></md-button></span> <span flex="none" class="total-score" layout="" layout-align="start center"><span ng-if="assignment.showStudentScores && assignment.isWork">{{assignment.studentTotalScoreDisplay}}</span></span></md-list-item><md-list-item class="empty-folder-message" ng-if="folder.visibleAssignments.length === 0"><i flex="none"></i> <i flex="none"></i> <i flex="none"></i> <span class="gray" flex="">When your teacher assigns you work, it will show up here!</span></md-list-item></md-list></div></div><div class="empty-message" ng-if="ctrl.folders.length === 0 && !ctrl.searchTerm">When your teacher assigns you work, it will show up here!</div><div class="empty-message" ng-if="ctrl.folders.length === 0 && ctrl.searchTerm">Nothing here matches your search for "{{ctrl.searchTerm}}"</div></div></md-content><div flex="" class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Assignments...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading your assignments</p></div></div>');e.put("app/controllers/submit-order/submit-order.html",'<div class="vertical-scroll-container"><div class="submit-order" layout="column" layout-align="start center"><form flex="none" name="submitOrderForm" class="body" ng-hide="ctrl.isLoading || ctrl.error" layout="column" layout-align="start stretch" ng-submit="ctrl.submit()"><div class="body-header" layout="" layout-align="space-between stretch"><div flex="" class="end"></div><div class="classkick-header" flex="none" layout="" layout-align="center center">Order Classkick Pro</div><div flex="" class="end"></div></div><div class="body-content" layout="column" layout-align="start stretch"><md-input-container class="billing-name"><span class="label">Purchasing Agent Name <span class="anchor"><i class="fa ck ck-contextualhelp"></i><md-tooltip md-direction="right" md-delay="500">The person or department who will most likely make payment</md-tooltip></span></span> <input name="billingNameInput" type="text" ng-model="ctrl.billingName" required="" aria-label="Enter the name of the person who will paying for your membership" md-no-asterisk=""><div class="error-messages" ng-messages="submitOrderForm.billingNameInput.$error"><div ng-message="required">Please enter the name of the person who will paying for your membership</div></div></md-input-container><md-input-container class="billing-email"><span class="label">Purchasing Agent Email</span> <input name="billingEmailInput" pattern="{{::ctrl.emailPattern}}" type="email" ng-model="ctrl.billingEmail" required="" aria-label="Enter the email of the person who will paying for your membership" md-no-asterisk=""><div class="error-messages" ng-messages="submitOrderForm.billingEmailInput.$error"><div ng-message="required">Please enter the email of the person who will be paying for your membership</div><div ng-message="pattern">Invalid email</div></div></md-input-container><md-input-container class="point-person"><span class="label">{{::ctrl.orgType}} Admin Point Person Email for Classkick Pro Membership <span class="anchor"><i class="fa ck ck-contextualhelp"></i><md-tooltip md-delay="200" md-direction="top"><div class="body"><div>This must be the email of a staff member who has a Classkick account.</div><div>This person will serve as the admin to your organization on Classkick.</div><div>If you are not aware of such an email, please make a Teacher account</div><div>linked to your organization and include the email address tied to this</div><div>account here.</div><br><div>You can always change or add admins to your organization in the future.</div></div></md-tooltip></span></span> <input name="pointPersonEmailInput" pattern="{{::ctrl.emailPattern}}" type="email" ng-model="ctrl.pointPersonEmail" required="" aria-label="Enter the Classkick user\'s email who will be implementing at your school or district" md-no-asterisk="" ng-change="ctrl.invalidPointEmailValidity = true"><div class="error-messages" ng-messages="submitOrderForm.pointPersonEmailInput.$error"><div ng-message="required">Please enter a {{::ctrl.orgType}} admin point person email</div><div ng-message="invalid-point-email">This person does not have a Classkick account. Please make a teacher account for the appropriate person at classkick.com</div><div ng-message="pattern">Invalid email</div></div></md-input-container><md-input-container class="organization-name"><span class="label">{{::ctrl.orgType}} Name</span> <input name="organizationNameInput" type="text" ng-model="ctrl.organizationName" required="" aria-label="Enter your school or district name" md-no-asterisk="" disabled=""></md-input-container><div class="address-details" layout="row" layout-align="start start"><md-input-container flex="45" class="city"><span class="label">City</span> <input name="cityInput" type="text" ng-model="ctrl.city" required="" md-no-asterisk="" aria-label="Enter your {{:: ctrl.orgType}}\'s city"></md-input-container><md-autocomplete flex="20" class="state" md-input-name="stateInput" md-min-length="0" md-input-maxlength="40" md-search-text="ctrl.state" md-items="item in ctrl.autocompleteFilter(ctrl.state, ctrl.stateOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="State" md-autofocus="true"><span class="label">State</span><md-item-template><span md-highlight-text="ctrl.state">{{item}}</span></md-item-template><div class="error-messages" ng-messages="submitOrderForm.stateInput.$error"><div ng-message="required">Please enter your {{::ctrl.orgType}}\'s state or region</div></div></md-autocomplete><md-autocomplete flex="" class="country" md-input-name="countryInput" md-min-length="0" md-input-maxlength="40" md-search-text="ctrl.country" md-items="item in ctrl.autocompleteFilter(ctrl.country, ctrl.countryOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="Country" md-autofocus="true"><span class="label">Country</span><md-item-template><span md-highlight-text="ctrl.country">{{item}}</span></md-item-template><div class="error-messages" ng-messages="submitOrderForm.stateInput.$error"><div ng-message="required">Please enter your {{::ctrl.orgType}}\'s country</div></div></md-autocomplete></div><md-input-container class="name-on-card" ng-if="ctrl.isPayment"><span class="label">Name on Card</span> <input name="cardNameInput" type="text" ng-model="ctrl.cardName" required="" md-no-asterisk="" aria-label="Enter the name on your card here"><div class="error-messages" ng-messages="submitOrderForm.cardNameInput.$error"><div ng-message="required">Please enter the name on your card</div></div></md-input-container><md-input-container class="zip" ng-if="ctrl.isPayment"><span class="label">Zip Code</span> <input name="cardZipInput" type="text" ng-model="ctrl.cardZip" maxlength="29" required="" md-no-asterisk="" aria-label="zip code"><div class="error-messages" ng-messages="submitOrderForm.cardZipInput.$error"><div ng-message="required">Please enter a postal code</div><div ng-message="incorrect_zip">The card\'s postal code failed validation</div></div></md-input-container><div class="card-container" layout="column" ng-show="ctrl.isPayment"><md-input-container class="card" ng-class="ctrl.isFloating" md-is-error="ctrl.cardHasError"><span class="label">Card</span><input class="display-input" name="cardInput" type="text" ng-model="ctrl.keepEmpty" tabindex="-1" aria-label="credit card input"><div class="error-messages" ng-messages="ctrl.formattedCardError"><div ng-message="required">Please enter your card information</div><div ng-message="incomplete_number">Your card number is incomplete</div><div ng-message="invalid_number">Your card number is invalid.</div><div ng-message="invalid_expiry_year">Your card\'s expiration year is invalid</div><div ng-message="incomplete_expiry">Your card\'s expiration date is incomplete</div><div ng-message="incomplete_cvc">Your card\'s security code is incomplete</div><div ng-message="invalid_expiry_year_past">Your card\'s expiration year is in the past</div><div ng-message="invalid_expiry_month">The card\'s expiration month is invalid</div><div ng-message="invalid_expiry_year">The card\'s expiration year is invalid</div><div ng-message="invalid_cvc">The card\'s security code is invalid</div><div ng-message="incorrect_number">The card number is incorrect</div><div ng-message="expired_card">The card has expired</div><div ng-message="incorrect_cvc">The card\'s security code is incorrect</div><div ng-message="card_declined">The card was declined</div><div ng-message="missing">There is no card on a customer that is being charged</div><div ng-message="processing_error">An error occurred while processing the card</div></div></md-input-container><div class="card-element"></div></div><md-input-container class="purchase-order" ng-hide="ctrl.isPayment"><span class="label">PO Number (optional, if you have one)</span> <input name="purchaseOrderInput" type="text" ng-model="ctrl.purchaseOrder" aria-label="Enter a purchase order number if needed" md-no-asterisk="" autocomplete="off"></md-input-container><div class="separator"></div><div class="payment-details"><div class="duration">Membership active today through {{ctrl.endDate}}</div><div layout="" layout-align="start start" layout-wrap=""><span>{{ctrl.planDescription}} {{ctrl.startYear}}-{{ctrl.endYear}} x {{ctrl.quantity}} Schools</span> <span flex=""></span> <span class="total">{{ctrl.total}}</span></div></div><md-button class="ck-primary" type="submit" aria-label="Submit your order for Classkick Pro">Submit {{ctrl.isPayment ? \'Payment - \' + ctrl.total : \'\'}}</md-button></div></form><div class="loading" ng-if="ctrl.isLoading && !ctrl.error" layout="" layout-align="center center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div><div class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem submitting your order. Please email pro@classkick.com</p></div></div></div>');e.put("app/controllers/user-notifications-list/user-notifications-list.html",'<div class="user-notifications-list" layout="column" layout-align="start stretch"><div flex="none" class="header"><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Add assignment"><i class="ck fa ck-menu"></i></md-button><div flex="" layout-align="center center" layout="row"><span class="classkick-header">Notifications</span></div></div><div flex="none" ng-hide="ctrl.loading || ctrl.error" class="list-header" layout="row" layout-nowrap=""><div flex="80"><md-button class="col notification-text" ng-class="{\'hide\': !ctrl.showNotificationTextColumn}" ng-click="ctrl.setOrToggleNotificationText()" aria-label="name table header"><div class="notification-text">Notification <i ng-if="ctrl.showNotificationTextCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div><div flex="noshrink"><md-button class="col received" ng-class="{\'hide\': !ctrl.showReceivedColumn}" ng-click="ctrl.setOrToggleReceived()" aria-label="name table header"><div class="received">Received <i ng-if="ctrl.showReceivedCarrot" class="ck fa ck-icon-grey ck-carrot" ng-class="{\'fa-rotate-180\': ctrl.isAscending}"></i></div></md-button></div></div><md-list flex="" ng-hide="ctrl.loading || ctrl.error"><div ng-if="ctrl.listIsEmpty" flex="" layout="row" layout-align="center start" class="list-helper">You\'re all caught up on notifications.</div><md-list-item ng-click="ctrl.showNotification(item)" class="list-item" ng-repeat="item in ctrl.list | orderBy: ctrl.orderBy() : !ctrl.isAscending | filter: ctrl.searchFilter()"><div class="anchor"><div class="indicator-circle" ng-class="{\'seen\' : !!item.message.seenDate}"></div></div><span flex="80" class="col notification-text"><div class="truncate">{{item.message.text}}</div></span> <span flex="noshrink" layout-align="center" class="col received"><div>{{item.message.createdDateFromNow}}</div></span></md-list-item></md-list><div flex="" class="loading" ng-if="ctrl.loading && !ctrl.error"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Notifications...</p></div><div class="error" ng-if="ctrl.error" flex="" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading your notifications</p></div></div>');e.put("app/controllers/user-profile/user-profile.html",'<div class="user-profile" layout="column" layout-align="start stretch" layout-nowrap=""><div class="header" flex="none" layout="row" layout-align="start stretch"><div class="left" layout="row" layout-align="start" flex=""><md-button hide-gt-sm="" class="bar-item" ng-click="ctrl.toggleSidenav()" aria-label="Add assignment"><i class="ck fa ck-menu"></i></md-button><saving-indicator save-state="ctrl.saveState"></saving-indicator></div><div class="classkick-header" flex="none" layout="" layout-align="center center">Profile</div><div class="spacer" flex=""></div></div><div class="loading" ng-if="!ctrl.user && !ctrl.error"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Your Profile Info...</p></div><div ng-if="ctrl.user && !ctrl.error" flex="none" class="tabs" layout="" layout-align="start stretch" ng-hide="ctrl.isStudent"><div class="tab" ng-class="{active: ctrl.viewingInfo}" ng-click="ctrl.goToProfileInfo()" layout="" layout-align="center center">Information</div><div class="tab" ng-class="{active: ctrl.viewingSchool}" ng-click="ctrl.goToProfileSchool()" layout="" layout-align="center center">Organization</div><div class="tab" ng-class="{active: ctrl.viewingPlan}" ng-click="ctrl.goToProfilePlan()" layout="" layout-align="center center">Plan</div></div><div ng-if="ctrl.user && !ctrl.error" class="body"><div class="edit-profile" layout="column" layout-align="start stretch" layout-nowrap=""><div ng-if="ctrl.viewingInfo" layout="column" layout-align="start stretch"><div layout="row" layout-align="start center"><h4>Basic Information</h4></div><div ng-form="userProfileForm" layout="row" layout-align="start stretch" layout-wrap=""><div layout="column" layout-align="start stretch" class="edit-profile-column" flex=""><md-autocomplete flex="" class="prefix" ng-if="ctrl.isTeacher" md-search-text-change="ctrl.fieldUpdated(userProfileForm.prefix, userProfileForm)" md-selected-item-change="ctrl.fieldUpdated(userProfileForm.prefix, userProfileForm)" md-input-name="prefix" md-min-length="0" md-input-maxlength="40" md-search-text="ctrl.prefix" md-items="item in ctrl.autocompleteFilter(ctrl.prefix, ctrl.prefixOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="Prefix"><span class="label">Prefix</span><md-item-template><span md-highlight-text="ctrl.prefix">{{item}}</span></md-item-template></md-autocomplete><md-input-container md-no-float="" class="first-name"><span class="label">First Name</span> <input name="firstName" ng-model="ctrl.firstName" ng-disabled="ctrl.isStudent && !ctrl.isTeacher" ng-change="ctrl.fieldUpdated(userProfileForm.firstName, userProfileForm)" required="" md-no-asterisk="" aria-label="First name"><div class="error-messages" ng-messages="userProfileForm.firstName.$error"><div ng-message="required">You must provide a first name</div></div></md-input-container><md-input-container class="last-name"><span class="label">Last Name</span> <input name="lastName" ng-model="ctrl.lastName" ng-disabled="ctrl.isStudent && !ctrl.isTeacher" ng-change="ctrl.fieldUpdated(userProfileForm.lastName, userProfileForm)" required="" md-no-asterisk="" aria-label="Last name"><div class="error-messages" ng-messages="userProfileForm.lastName.$error"><div ng-message="required">You must provide a last name</div></div></md-input-container><md-input-container md-is-error="ctrl.emailError" class="email"><span class="label">Email</span> <input name="email" ng-model="ctrl.email" ng-disabled="ctrl.isStudent || ctrl.isGoogleAuthed || ctrl.isCleverAuthed" ng-change="ctrl.fieldUpdated(userProfileForm.email, userProfileForm)" required="" md-no-asterisk="" aria-label="Email"><div class="error-messages" ng-messages="userProfileForm.email.$error || ctrl.emailError" role="alert"><div class="md-input-message-animation" ng-if="ctrl.emailError">{{ctrl.emailError}}</div></div></md-input-container><md-input-container ng-if="ctrl.isStudent" md-is-error="ctrl.usernameError" class="username"><span class="label">Username</span> <input name="username" ng-model="ctrl.username" ng-disabled="ctrl.isStudent && !ctrl.isTeacher" ng-change="ctrl.fieldUpdated(userProfileForm.username, userProfileForm)" required="" md-no-asterisk="" aria-label="Username"><div class="error-messages" ng-messages="userProfileForm.username.$error || ctrl.usernameError" role="alert"><div class="md-input-message-animation" ng-if="ctrl.usernameError">{{ctrl.usernameError}}</div></div></md-input-container></div><div ng-if="ctrl.isTeacher" layout="column" class="edit-profile-column" flex=""><md-autocomplete ng-if="ctrl.isTeacher" class="role" flex="" md-search-text-change="ctrl.fieldUpdated(userProfileForm.jobTitle, userProfileForm)" md-selected-item-change="ctrl.fieldUpdated(userProfileForm.jobTitle, userProfileForm)" md-input-name="jobTitle" md-min-length="0" md-input-maxlength="40" md-search-text="ctrl.jobTitle" md-items="item in ctrl.autocompleteFilter(ctrl.jobTitle, ctrl.jobTitleOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="Role"><span class="label">Role</span><md-item-template><span md-highlight-text="ctrl.jobTitle">{{item}}</span></md-item-template></md-autocomplete><md-autocomplete ng-if="ctrl.isTeacher" flex="" md-search-text-change="ctrl.fieldUpdated(userProfileForm.referral, userProfileForm)" md-selected-item-change="ctrl.fieldUpdated(userProfileForm.referral, userProfileForm)" md-input-name="referral" md-min-length="0" md-input-maxlength="40" md-search-text="ctrl.referral" md-items="item in ctrl.autocompleteFilter(ctrl.referral, ctrl.referralOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="I heard about Classkick from..."><span class="label">Referral</span><md-item-template><span md-highlight-text="ctrl.referral">{{item}}</span></md-item-template></md-autocomplete><md-autocomplete flex="" md-search-text-change="ctrl.fieldUpdated(userProfileForm.subject, userProfileForm)" md-selected-item-change="ctrl.fieldUpdated(userProfileForm.subject, userProfileForm)" md-input-name="subject" md-min-length="0" md-input-maxlength="40" md-search-text="ctrl.subject" md-items="item in ctrl.autocompleteFilter(ctrl.subject, ctrl.subjectOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="I teach..."><span class="label">Subject</span><md-item-template><span md-highlight-text="ctrl.subject">{{item}}</span></md-item-template></md-autocomplete><md-input-container class="student-age"><span class="label">My students\' ages are...</span><md-select ck-select="" md-container-class="ck-select-menu" name="studentAge" ng-model="ctrl.studentAge" ng-change="ctrl.fieldUpdated(userProfileForm.studentAge, userProfileForm)" aria-label="Students age"><md-option ng-value="age" ng-repeat="age in ctrl.studentAgeOptions">{{age}}</md-option></md-select></md-input-container></div></div><div flex="" class="separator" ng-if="ctrl.isPasswordAuthed"></div><md-content class="update-password-form" layout="column" layout-align="start start" ng-if="ctrl.isPasswordAuthed"><form name="updatePasswordForm" layout="column" layout-align="start stretch" flex="" class="edit-profile-column change-password-form" ng-submit="ctrl.changePassword(updatePasswordForm)"><div layout="row" layout-align="start center"><h4>Update Password</h4></div><input style="display:none;" type="text"> <input style="display:none;" type="password"><md-input-container><span class="label">Current Password</span> <input md-no-asterisk="" autocomplete="false" type="password" name="oldPassword" ng-model="ctrl.oldPassword" ng-change="ctrl.oldPasswordUpdated(updatePasswordForm)" required="" aria-label="Old password"><div class="error-messages" ng-messages="updatePasswordForm.oldPassword.$error"><div ng-message="required">You must provide your current password</div><div ng-message="invalid-password">Your password is incorrect</div></div></md-input-container><md-input-container><span class="label">New Password</span> <input md-no-asterisk="" autocomplete="new-password" type="{{ctrl.showNewPassword ? \'text\' : \'password\'}}" name="newPassword" ng-model="ctrl.newPassword" required="" aria-label="New password"><div class="error-messages" ng-messages="updatePasswordForm.newPassword.$error"><div ng-message="required">You must enter a new password</div></div></md-input-container><md-checkbox class="md-primary show-new-password" ng-model="ctrl.showNewPassword">Show New Password</md-checkbox><div layout="row" layout-align="start"><md-button class="ck-primary" type="submit" ng-disabled="!ctrl.oldPassword || !ctrl.newPassword">Change Password</md-button><md-button ng-click="ctrl.resetUpdatePasswordForm(updatePasswordForm)">Clear</md-button></div></form></md-content><div flex="" class="separator"></div><md-content class="delete-account" layout="column" layout-align="start start"><md-button ng-click="ctrl.deleteAccountDialog()">DELETE ACCOUNT</md-button></md-content></div><div ng-if="ctrl.viewingSchool" class="schools" layout="column" layout-align="start stretch"><div class="schools" layout="column" layout-align="start stretch" ng-if="ctrl.isTeacher && ctrl.hasSchool"><div layout="row" layout-align="start center"><h4>Organization{{ctrl.hasSchools ? \'s\' : \'\'}}</h4></div><div layout="row" layout-align="start start"><div layout="column" layout-align="start stretch"><div class="school" ng-repeat="school in ctrl.schools" layout="row" layout-align="space-between center"><div flex="" layout="column" layout-align="start start"><div class="school-name">{{school.name}}</div><div>{{school.city}}, {{school.state}}, {{school.country}}</div><a ng-if="!school.admin" ng-click="ctrl.changeSchool(school)">Change Organization</a></div></div></div></div></div></div><div ng-if="ctrl.viewingPlan" layout="column" layout-align="start stretch"><div class="basic-plan" ng-if="!ctrl.hasContracts && !ctrl.hasContract"><h4>Plan: Basic</h4><div class="plan" ng-repeat="contract in ctrl.expiredContracts" layout="row" layout-align="space-between center"><div flex="" layout="column" layout-align="start start"><div class="contract-name">{{contract.name}}</div><div>{{contract.planType}} - {{contract.activeDisplay}}</div><div>{{ctrl.recurringStatusDisplay(contract)}}</div><div ng-if="ctrl.contractHasSubscription(contract.id)"><a ng-click="ctrl.updatePaymentInfo(contract)">Update Payment Info</a> | <a ng-click="ctrl.cancelSubscription(contract)">Cancel Pro</a></div></div></div><div class="assignments-used-visual"><div class="total"></div><div class="used" ng-style="{width: ctrl.assignmentsUsedWidth}"></div></div><div class="assignments-used-text">{{ctrl.assignmentsUsedCount}} of {{ctrl.assignmentsLimit}} Assignments Used</div><div class="upgrade-to-pro"><md-button class="ck-primary" ng-click="ctrl.openAssignmentsLimitPaywallDialog()">Upgrade</md-button></div></div><div class="pro-plans" layout="column" layout-align="start stretch" ng-if="ctrl.hasContract || ctrl.hasContracts"><div layout="row" layout-align="start center"><h4>Plan: Pro</h4></div><div layout="row" layout-align="start start"><div layout="column" layout-align="start stretch"><div class="plan" ng-repeat="contract in ctrl.activeContracts" layout="row" layout-align="space-between center"><div flex="" layout="column" layout-align="start start"><div class="contract-name">{{contract.name}}</div><div>{{contract.planType}} - {{contract.activeDisplay}}</div><div>{{ctrl.recurringStatusDisplay(contract)}}</div><div ng-if="ctrl.contractHasSubscription(contract.id)"><a ng-click="ctrl.updatePaymentInfo(contract)">Update Payment Info</a> | <a ng-click="ctrl.cancelSubscription(contract)">Cancel Pro</a></div><div class="unlimited-assignments">Unlimited Assignments</div></div></div></div><div class="expiration-explainer" ng-if="ctrl.showTrialExplanationText" flex="" layout-align="start start"><div>After expiration, you can still use the free version of Classkick and you will not lose any of your assignments, student work, or data. <a href="http://app.classkick.com/#/order" target="_blank">Learn More</a> | <a href="https://goo.gl/forms/Y8BUDKLc2Yk1yJqD2" target="_blank">End Trial</a></div></div></div></div><div flex="" class="separator"></div><md-content class="pro-invite-form" layout="column" layout-align="start start"><form name="proInviteForm" layout="column" layout-align="start stretch" flex="" class="edit-profile-column pro-invite-form" ng-submit="ctrl.enterProInvite(proInviteForm)"><div layout="row" layout-align="start center"><h4>Enter Pro Invite Code</h4></div><md-input-container md-is-error="ctrl.inviteCodeError"><span class="label">Invite Code</span> <input md-no-asterisk="" type="text" name="inviteCode" ng-model="ctrl.inviteCode" ng-change="ctrl.inviteCodeUpdated(proInviteForm)" aria-label="Invite code"><div class="error-messages" ng-messages="proInviteForm.inviteCode.$error"><div ng-message="invalid-code">That Pro invite code is invalid</div><div ng-message="too-long">Pro invite codes are 5 characters long</div></div></md-input-container><div layout="row" layout-align="start"><md-button class="ck-primary" type="submit" ng-disabled="!ctrl.inviteCode || ctrl.inviteCode.length < 5">Submit Code</md-button></div></form></md-content></div></div></div><div flex="grow" class="error" ng-if="ctrl.error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem loading your info</p></div></div>');
e.put("app/components/add-anon-student-dialog/add-anon-student-dialog.html",'<md-dialog class="add-anon-student-dialog" aria-label="add student to roster dialog"><div class="ck-dialog-header" flex="none" layout="row" layout-align="space-between stretch"><md-button class="bar-item" ng-click="ctrl.goBackToSelection()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-back ck-green"></i></div></md-button><md-button class="bar-item" ng-click="ctrl.$mdDialog.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Add Basic Students to {{::ctrl.rosterName}}</div><p>Enter student names in comma separated list</p><form class="add-student-content" name="addNewStudentForm" layout="column" layout-align="start stretch" ng-submit="ctrl.submit()"><md-input-container aria-label="new student name input"><span class="label">Names</span> <textarea name="newName" ng-model="ctrl.names" aria-label="Add students to roster" md-autofocus="" rows="3"></textarea></md-input-container><div class="actions" flex="none" layout="" layout-align="end center"><md-button ng-disabled="!ctrl.names" class="ck-primary" type="submit">Add</md-button></div></form></md-dialog>');e.put("app/components/add-manipulative-image-dialog/add-manipulative-image-dialog.html",'<md-dialog class="add-manipulative-image-dialog" aria-label="Add a manipulative image"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">Add images that students can move and rotate</div><img src="./assets/gifs/student-manipulatives-example.gif" alt="Example of manipulative GIFs"><div class="description">(Example of a student using a manipulative. <a target="_blank" href="https://blog.classkick.com/using-manipulatives-digitally-53984223df33">Learn More.</a>)</div></div><div class="ck-dialog-actions" layout="" layout-align="end center"><md-button class="ck-primary" ng-click="ctrl.selectFile()" aria-label="Select file to upload as manipulative image">Select File</md-button></div></md-dialog>');e.put("app/components/add-pro-students-dialog/add-pro-students-dialog.html",'<md-dialog deferred="ctrl.deferred" class="add-pro-student-dialog" aria-label="add students to roster"><div class="ck-dialog-header" flex="none" layout="row" layout-align="space-between stretch"><md-button class="bar-item" ng-click="ctrl.goBackToSelection()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-back ck-green"></i></div></md-button><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Add Portfolio Students to {{ctrl.rosterName}}</div><md-content layout="column"><md-list-item class="list-header" layout="row" flex="none"><div flex="">Name</div><div class="search" layout="row" layout-align="start center" flex="none"><i class="ck fa ck-search"></i><md-input-container md-no-float=""><input type="text" ng-model="ctrl.searchTerm" ng-change="ctrl.search()" placeholder="Search"></md-input-container></div></md-list-item><div class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear></div><md-virtual-repeat-container><div class="empty-message" ng-if="ctrl.listMessage">{{ctrl.listMessage}}</div><md-list ng-hide="ctrl.listMessage"><md-list-item md-virtual-repeat="student in ctrl.students" layout="row" layout-nowrap=""><md-checkbox class="md-primary" ng-model="student.toggled" ng-change="ctrl.toggleStudent(student)" aria-label="toggle student" flex="none"></md-checkbox><div flex="" class="name-col"><div class="truncate">{{student.name}}</div></div><div flex="none" class="login-col truncate">{{student.login}}</div></md-list-item></md-list></md-virtual-repeat-container><div class="actions" layout="row" layout-align="end" flex="none"><md-button ng-click="ctrl.createStudentAccounts()" ng-disabled="ctrl.cantViewStudents">Create New Portfolio Students</md-button><md-button class="ck-primary" ng-click="ctrl.complete()" ng-disabled="ctrl.cantViewStudents">Add Selected</md-button></div></md-content></md-dialog>');e.put("app/components/article-autocomplete/article-autocomplete.component.html",'<div class="article-autocomplete" layout=""><div class="anchor"><i class="ck fa ck-search"></i></div><md-autocomplete flex="" md-min-length="1" md-input-maxlength="60" md-search-text="ctrl.query" md-selected-item="ctrl.article" md-item-text="article.title" md-mode="standard" md-items="article in ctrl.autocompleteHelpArticles(ctrl.query)" md-match-case-insensitive="true" md-menu-container-class="ck-search-articles-autocomplete-container" md-floating-label="Search"><md-item-template><div class="article-content" layout="row" layout-align="space-between center"><span class="article-name">{{article.title}}</span> <span class="article-members">{{article.categoryDisplay}}</span></div></md-item-template><md-not-found><div class="ask-anything" layout="" layout-align="start center"><span>It doesn\'t look like we have any articles that match your search</span></div></md-not-found><div class="loading-spinner enter-fade" ng-if="ctrl.loadingAutocompleteHelpArticles"><i class="fa ck ck-loading ck-green fa-spin"></i></div></md-autocomplete></div>');e.put("app/components/assignment-export-dialog/assignment-export-dialog.html",'<md-dialog class="assignment-export-dialog" aria-label="export assignments to pdf" layout="column" layout-align="start center"><div flex="" ng-if="ctrl.state === ctrl.CONFIG" class="main" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><div flex="" ng-if="!ctrl.skipSelect" class="back-button" layout="row" layout-align="start center"><md-button class="bar-item" ng-click="ctrl.configureSelect()" aria-label="back dialog"><div class="contents"><i class="fa ck ck-back"></i></div></md-button></div><md-button class="bar-item" ng-click="ctrl.cancelExport()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="ck-dialog-title">Configure Export</div><div class="include-metadata" layout="row" layout-align="start center" flex="none"><md-checkbox flex="" class="md-primary" ng-model="ctrl.showMetadata">{{ctrl.configMessage}}</md-checkbox></div></div><div class="ck-dialog-footer" layout="column" layout-align="start stretch"><div layout="row" layout-align="end stretch" flex="none"><md-button class="ck-primary" ng-click="ctrl.performExport()">export</md-button></div></div></div><div flex="" ng-if="ctrl.state === ctrl.SELECT" class="main" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="stretch"><div flex="" class="back-button" layout="row" layout-align="end center"><md-button class="bar-item" ng-click="ctrl.cancelExport()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div></div><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="ck-dialog-title">Export Student Work as PDF</div><div class="export-individually" flex="none">Export individually</div><md-list flex=""><md-list-item ng-repeat="assignmentExport in ctrl.assignmentExports" ng-click="ctrl.selectStudent(assignmentExport)"><div class="item-content" flex="" layout="row" layout-align="start center"><span flex="">{{assignmentExport.user.name}}</span> <i class="ck fa ck-pagernext"></i></div></md-list-item></md-list><div class="export-all" layout="column" layout-align="start center" flex="none"><div class="export-all-description">Or export all (Grouped together as .zip)</div><md-button class="ck-primary" ng-click="ctrl.selectAll()">Export All</md-button></div></div></div><div ng-if="ctrl.state === ctrl.LOADING" class="loading" layout="" layout-align="center center"><div flex="none"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div><div ng-if="ctrl.state === ctrl.EXPORTING" class="exporting" layout="column" layout-align="center stretch"><div class="ck-dialog-header" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancelExport()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="exporting-message">{{ctrl.exportingMessage}}</div><div class="exporting-count">{{ctrl.exportingCountMessage}}</div><div class="exporting-spinner" flex="none" layout="" layout-align="center"><i class="ck ck-loading fa fa-spin fa-5x ck-green"></i></div><div layout="" layout-align="end center"><md-button ng-click="ctrl.cancelExport()">cancel</md-button></div></div></div></md-dialog><div class="assignment-export-hidden"><assignment-sheet config="ctrl.currentConfig"></assignment-sheet></div>');e.put("app/components/assignment-question/assignment-question.html",'<div class="assignment-question" layout="column" layout-align="start stretch"><div class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear><p class="loading-text">Loading Slide...</p></div><div class="floating-toolbar-container" ng-class="{ bottom: ctrl.isMobile }" ng-if="!ctrl.loading"><div class="floating-toolbar" layout="row" layout-align="center center"><div layout="column" layout-align="center start" class="helper-banner"><div ng-if="ctrl.studentHelpeeName" class="teacher enter-fade" layout=""><span class="truncate">{{::ctrl.studentHelpeeName}}</span><div flex="none">is currently here</div></div><div ng-if="ctrl.teacherIsHelping" class="teacher enter-fade" layout=""><span class="truncate">Teacher</span><div flex="none">is helping</div></div><div ng-if="ctrl.studentHelperMessage" class="student enter-fade" layout=""><span class="truncate">{{ctrl.studentHelperMessage}}</span><div flex="none">{{ctrl.studentMessageConjugation}}</div></div><div class="feedback enter-fade" layout="" ng-repeat="feedback in ctrl.feedbackNotifications"><span class="icon"><i class="ck fa ck-notifications"></i></span> <span>{{feedback.formatNames}} gave feedback on slide #{{ctrl.questionNumber(feedback.id)}}</span></div></div><div flex="grow" class="hide-xs {{ctrl.showStudentPaginator ? \'\' : \'hide\'}}"></div><div class="pager {{:: ctrl.showPaginator ? \'\' : \'hide\'}}" layout="" layout-align="center stretch"><md-button class="change-question-btn" ng-click="ctrl.goToPrevQuestion()" ng-disabled="!ctrl.hasPrevQuestion" aria-label="previous page"><div layout="row" layout-align="center center"><i class="ck fa ck-pagerback"></i></div></md-button><div flex="" layout="" layout-align="center center"><md-input-container class="option" md-no-float="" flex=""><md-select ck-select="" md-container-class="slide-pager-select-menu" md-selected-html="ctrl.currentPagerDisplay" name="questionPager" ng-model="ctrl.currentQuestion" md-on-close="ctrl.onQuestionPagerClose()" aria-label="select student"><md-option ng-value="question" ng-repeat="question in ctrl.questions" layout="row" layout-align="center center"><div layout="row" layout-align="center center">Slide {{:: $index + 1}}</div></md-option></md-select></md-input-container></div><md-button class="change-question-btn" ng-click="ctrl.goToNextQuestion()" ng-disabled="!ctrl.hasNextQuestion" aria-label="next page"><div layout="row" layout-align="center center"><i class="ck fa ck-pagernext"></i></div></md-button></div><div flex="grow" layout="" layout-align="start center" class="{{ctrl.showStudentPaginator ? \'\' : \'hide\'}}"><div flex="none" class="student-pager" layout="" layout-align="space-between center"><md-button class="change-question-btn" ng-click="ctrl.goToNextStudent()" ng-disabled="!ctrl.hasNextStudent" aria-label="go to next student"><div layout="row" layout-align="center center"><i class="ck fa ck-pagerdown"></i></div></md-button><div flex="" layout="" layout-align="center center"><md-input-container class="option" md-no-float="" flex=""><md-select ck-select="" md-container-class="student-pager-select-menu" name="studentPager" ng-model="ctrl.currentStudent" md-on-close="ctrl.onStudentPagerClose()" aria-label="select student"><md-option ck-indicator-circle="ctrl.hasRequest(student)" ng-value="student" ng-repeat="student in ctrl.students"><div layout="row" layout-align="start center"><div>{{:: ctrl.realOrAnonNameForStudent(student)}}</div></div></md-option></md-select></md-input-container></div><md-button class="change-question-btn" ng-click="ctrl.goToPrevStudent()" ng-disabled="!ctrl.hasPrevStudent" aria-label="go to previous student"><div layout="row" layout-align="center center"><i class="ck fa ck-pagerup"></i></div></md-button></div></div></div></div><div class="content enter-fade" ng-if="!ctrl.loading"><div class="spacer-top" ng-if="!ctrl.isMobile"></div><div class="assignment-sheet-ctn"><assignment-sheet config="ctrl.config" class="large-canvas"></assignment-sheet></div><div class="spacer-bottom" ng-if="ctrl.isMobile"></div></div></div>');e.put("app/components/assignment-selection-dialog/assignment-selection-dialog.html",'<md-dialog class="assignment-selection-dialog" aria-label="select an assignment from the following list"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">Select Assignment Grades to Export</div><md-content layout="column"><md-list-item class="list-header" layout="row" flex="none"><div flex="">Name</div><div class="search" layout="row" layout-align="start center" flex="none"><i class="ck fa ck-search"></i><md-input-container md-no-float=""><input type="text" ng-model="ctrl.searchTerm" ng-change="ctrl.search()" placeholder="Search"></md-input-container></div></md-list-item><div class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear></div><md-virtual-repeat-container><md-list><md-list-item md-virtual-repeat="assignment in ctrl.assignments" layout="row" layout-nowrap=""><md-checkbox class="md-primary" ng-model="assignment.toggled" ng-change="ctrl.toggleAssignment(assignment)" aria-label="toggle assignment" flex="none"></md-checkbox><div flex="" class="name-col"><div class="truncate">{{assignment.name}}</div></div><div flex="none" class="login-col truncate">{{assignment.totalPotentialPoints()}} Pts</div></md-list-item><div class="empty-message" ng-if="!ctrl.loading && ctrl.assignments.length === 0 && !ctrl.searchTerm">There are no assignments available.</div><div class="empty-message" ng-if="!ctrl.loading && ctrl.assignments.length === 0 && ctrl.searchTerm">No assignments match the search term \'{{ctrl.searchTerm}}\'</div></md-list></md-virtual-repeat-container><div class="buttons" layout="row" layout-align="end" flex="none"><md-button class="ck-primary" ng-click="ctrl.export()">export</md-button></div></md-content></div></md-dialog>');e.put("app/components/assignment-sheet/assignment-sheet.html",'<svg viewbox="0 0 1004 2008"><g class="root"><g class="background"></g><g class="content"></g><g class="work"></g><g class="sticker"></g><g class="lineCapture"><g class="newLine"></g></g><g class="panCapture"></g><g class="placementCapture"></g></g></svg><textarea class="hidden-text-input" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>');e.put("app/components/assignment-toolbar/assignment-toolbar-item.html",'<md-button ng-if="ctrl.toolbarModel.isButton(item)" class="tool-button" ng-style="{width: item.width, display: (item.visible ? \'\' : \'none\')}" ng-class="{toggled: item.toggled}" ng-disabled="item.disabled" ng-click="item.click($event)" ng-mouseenter="item.mouseEnter($event)" ng-mouseleave="item.mouseLeave($event)" aria-label="{{::item.tooltip}}"><div ng-if="item.type === ctrl.toolbarModel.TYPES.ICON_BUTTON" layout="row" layout-align="center center"><i class="fa ck" ng-class="item.icon"></i><div ng-if="item.subIcon" class="sub-icon"><i class="ck fa" ng-class="item.subIcon"></i></div></div><div ng-if="item.type === ctrl.toolbarModel.TYPES.TEXT_BUTTON" layout="row" layout-align="center center"><span>{{::item.text}}</span><div ng-if="item.subIcon" class="text-sub-icon"><i class="ck fa" ng-class="item.subIcon"></i></div></div><div ng-if="item.type === ctrl.toolbarModel.TYPES.RENDERED_BUTTON" layout="row" layout-align="center center"><clone selector="item.selector" layout="row" layout-align="center center"></clone></div><md-tooltip ng-if="item.tooltip" md-delay="1000" md-direction="bottom">{{item.tooltip}}</md-tooltip></md-button><div ng-if="item.type === ctrl.toolbarModel.TYPES.DIVIDER" class="assignment-toolbar-separator" flex="none"></div><div ng-if="item.type === ctrl.toolbarModel.TYPES.FLEX_SPACE" flex="grow"></div><grade-input ng-if="item.type === ctrl.toolbarModel.TYPES.POINTS && item.visible" flex="none" ng-class="ctrl.gradeInputClass" ng-model="ctrl.currentPoints" potential-score="ctrl.potentialScore" readonly="ctrl.isGradeInputReadonly"></grade-input><md-input-container ng-if="item.type === ctrl.toolbarModel.TYPES.SELECT" md-no-float="" flex="" class="tool-select"><md-select ck-select="" ng-model="item.currentValue" aria-label="{{::item.tooltip}}" md-container-class="{{::item.containerClass}}"><md-option ng-value="value" ng-repeat="value in item.values"><div layout="row" layout-align="center center"><i class="ck fa" ng-class="value.icon"></i></div></md-option></md-select></md-input-container>');e.put("app/components/assignment-toolbar/assignment-toolbar.html",'<div layout="row" layout-align="start stretch" flex="none" class="assignment-toolbar" ng-if="!ctrl.options.readonly"><div class="rendered-panels hidden"><div class="more" layout="column" layout-align="start stretch"><div ng-repeat="section in ctrl.toolbarModel.sections" layout="row" flex="initial" ng-class="{ \'collapsed-button-bar\': section.hasVisibleCollapsedItems }"><div ng-repeat="item in section.collapsedItems" layout="row" flex="initial"><assignment-toolbar-item layout="row" flex="initial"></assignment-toolbar-item></div></div></div></div><div class="rendered-buttons hidden"><div class="straight-line-color" layout="column" layout-align="center center"><i class="fa ck ck-linetool"></i><div class="anchor"><div class="color-bar" ng-style="{ \'background-color\': ctrl.straightLineColor }"></div></div></div><div class="pen-color" layout="column" layout-align="center center"><i class="fa ck ck-pen"></i><div class="anchor"><div class="color-bar" ng-style="{ \'background-color\': ctrl.penColor }"></div></div></div><div class="highlighter-color" layout="column" layout-align="center center"><i class="fa ck ck-highlighter"></i><div class="anchor"><div class="color-bar" ng-style="{ \'background-color\': ctrl.highlighterColor }"></div></div></div><div class="text-color" layout="column" layout-align="center center"><i class="fa ck ck-text"></i><div class="anchor"><div class="color-bar" ng-style="{ \'background-color\': ctrl.textColor }"></div></div></div><div class="text-background-color" layout="column" layout-align="center center"><i class="fa ck ck-backgroundcolor"></i><div class="anchor"><div class="color-bar" ng-style="{ \'background-color\': ctrl.textboxBackgroundColor }"></div></div></div><div class="text-border-color" layout="column" layout-align="center center"><i class="fa ck ck-bordercolor"></i><div class="anchor"><div class="color-bar" ng-style="{ \'background-color\': ctrl.textboxBorderColor }"></div></div></div><div class="toggle-feedback" ng-class="{ \'feedback-notification\': ctrl.isFeedbackNotification }" layout="row" layout-align="center center"><i class="ck fa ck-feedback"></i><div class="notification-circle"></div><md-tooltip md-delay="1000" md-direction="bottom">{{ctrl.toggleFeedbackTooltipMessage}}</md-tooltip></div><div class="request-help tool-button" layout="row" layout-align="center center" ng-class="ctrl.helpRequestButtonClass"><i class="ck fa" ng-class="{ \'ck-hand\': !ctrl.helpCenter.helpRequestManager.isHelpRequestLoading, \'ck-loading fa-spin\': ctrl.helpCenter.helpRequestManager.isHelpRequestLoading }"></i><div ng-show="ctrl.helpCenter.hasUnreadMessages" class="notification-circle"></div></div></div><div class="button-bar" layout="row" layout-align="start-stretch" flex="grow" layout-nowrap=""><div ng-repeat="item in ctrl.toolbarModel.displayItems" layout="row" ng-class="item.flexClass" ng-click="ctrl.preventElementBlur($event, item.disabled)"><assignment-toolbar-item layout="row" ng-class="item.flexClass"></assignment-toolbar-item></div></div></div><div class="body" flex="" layout="row"><ng-transclude flex="" layout="column" layout-align="start start"></ng-transclude><md-sidenav md-is-locked-open="ctrl.sidenav.isOpen" layout="row"><div flex="100" ng-if="ctrl.showPlaceStickers" class="place-stickers" layout="column" layout-align="start start"><div class="sidenav-header" layout="row" layout-align="start center" flex="none"><div flex="none">Stickers</div><md-button class="contextual-help" ng-click="ctrl.openHelpInfoDialogForCustomStickers()" aria-label="help" layout="row" layout-align="center center"><i class="fa ck ck-contextualhelp"></i></md-button><div flex=""></div><md-button class="sidenav-header-close" ng-click="ctrl.cancelSidenav()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><md-content flex=""><md-list ui-sortable="ctrl.stickerSortOptions" ng-model="ctrl.stickers" ng-style="ctrl.stickerListStyle"><md-list-item class="sticker list-button" ng-click="ctrl.createSticker()" layout="row">+ Add New Sticker</md-list-item><md-list-item id="{{::sticker.id}}" class="sticker" layout="row" ng-class="ctrl.stickerClass(sticker.id)" ng-repeat="sticker in ctrl.stickers" ng-click="ctrl.addSticker(sticker)" ng-dblclick="ctrl.addStickerWithoutPlacement(sticker, $event)"><div class="sticker-item-content" layout="" layout-align="start center" ng-click="$event.stopPropagation(); ctrl.addSticker(sticker)" ng-dblclick="$event.stopPropagation(); ctrl.addStickerWithoutPlacement(sticker, $event)"><div class="img-container" layout="" layout-align="center center"><img ng-src="{{sticker.imageUrl || ctrl.defaultStickerImageUrl}}"></div><div class="text truncate" flex="">{{sticker.text}}<md-tooltip ng-if="sticker.text.length > 20" md-delay="1000">{{sticker.text}}</md-tooltip></div><div class="score" ng-class="ctrl.stickerScoreClass(sticker.displayScore)">+{{sticker.displayScore}}</div></div><div class="assignment-toolbar-separator"></div><div class="edit"><md-button class="bar-item" ng-click="ctrl.goToEditSticker(sticker)" aria-label="edit sticker"><i class="ck fa ck-edit"></i><md-tooltip md-delay="1000" md-direction="bottom">Edit sticker</md-tooltip></md-button></div></md-list-item></md-list></md-content></div><div flex="100" ng-if="ctrl.showEditSticker" class="edit-sticker" layout="column" layout-align="start start"><div class="sidenav-header" layout="row" layout-align="start center"><div flex="">Edit Sticker</div><md-button class="sidenav-header-close" ng-click="ctrl.cancelSidenav()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><md-content><div class="change-image" layout="column" layout-align="start center"><md-button ng-click="ctrl.selectImage()"><div class="contents" layout="column" layout-align="center center"><img ng-src="{{ctrl.selectedStickerImageUrl || ctrl.defaultStickerImageUrl}}"><div>{{ctrl.selectImageText}}</div></div></md-button></div><div class="change-text" layout="row" layout-align="start center"><md-input-container flex="" md-no-float=""><span class="label">Sticker Text</span> <textarea name="stickerText" ng-model="ctrl.selectedStickerText" ng-maxlength="140" aria-label="Input sticker text"></textarea></md-input-container></div><div class="change-points" layout="row" layout-align="center center"><md-button ng-click="ctrl.stickerScoreMinus()" aria-label="subtract point from sticker\\\'s score"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-grademinus"></i></div></md-button><md-input-container md-no-float=""><span class="label">Points</span> <input name="stickerScore" type="number" ng-model="ctrl.selectedStickerScore" placeholder="0"></md-input-container><md-button ng-click="ctrl.stickerScorePlus()" aria-label="add point to sticker\\\'s score"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-gradeplus"></i></div></md-button></div><div class="actions" layout="column" layout-align="start center"><md-button class="save ck-primary" ng-click="ctrl.saveSticker()">Save</md-button><md-button class="cancel" ng-click="ctrl.goToPlaceStickers()">Cancel</md-button><md-button ng-if="ctrl.showDelete" class="delete md-warn" ng-click="ctrl.deleteSticker()">Delete</md-button></div></md-content></div><div flex="100" ng-if="ctrl.showEditMultipleChoice" class="edit-multiple-choice" layout="column" layout-align="start stretch"><div ng-if="!ctrl.multipleChoiceManager.showHelp" flex="100" layout="column" layout-align="start stretch"><div class="sidenav-header" layout="row" layout-align="start center"><div flex="none">New Multiple Choice</div><md-button class="contextual-help" ng-click="ctrl.multipleChoiceManager.showHelp = true;" aria-label="help" layout="row" layout-align="center center"><i class="fa ck ck-contextualhelp"></i><md-tooltip md-delay="1000" md-direction="bottom">Multiple choice help</md-tooltip></md-button><div flex=""></div><md-button class="sidenav-header-close" ng-click="ctrl.cancelSidenav()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><md-content layout="column" layout-align="center center"><h4>Select Correct Answer</h4><div layout="row" layout-align="center center"><md-button class="ck-round-button ck-secondary" ng-repeat="option in ctrl.multipleChoiceManager.options" ng-click="ctrl.multipleChoiceManager.selectAnswer(option)" ng-class="{ \'correct-answer\': ctrl.multipleChoiceManager.selected === option}">{{option.answer}}</md-button></div><md-button class="cancel" ng-click="ctrl.multipleChoiceManager.removeCorrectAnswer()">No Correct Answer</md-button><div class="change-points" layout="row" layout-align="center center"><md-button ng-click="ctrl.multipleChoiceManager.multipleChoiceScoreMinus()" aria-label="subtract point from sticker\\\'s score" ng-disabled="!ctrl.multipleChoiceManager.isSelected"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-grademinus"></i></div></md-button><md-input-container md-no-float=""><span class="label">Points</span> <input name="multipleChoiceScore" type="number" ng-model="ctrl.multipleChoiceManager.selectedPoints" ng-disabled="!ctrl.multipleChoiceManager.isSelected" placeholder="--"></md-input-container><md-button ng-click="ctrl.multipleChoiceManager.multipleChoiceScorePlus()" aria-label="add point to sticker\\\'s score" ng-disabled="!ctrl.multipleChoiceManager.isSelected"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-gradeplus"></i></div></md-button></div><div class="actions" layout="column" layout-align="start center"><md-button class="save ck-primary" ng-click="ctrl.saveMultipleChoice()">Save</md-button></div></md-content></div><div ng-if="ctrl.multipleChoiceManager.showHelp" flex="100" class="onboarding" layout="column" layout-align="start center"><div class="section-header">How do I use a multiple choice element?</div><p>1.) Select the correct letter and assign points:</p><img class="enter-answer-and-score-mc" src="./assets/gifs/enter-answer-and-score-mc.gif" alt="A mouse clicks a button to add a response. The text is modified to the correct answer to the math question."><p>2.) Place element next to content that can be answered with an a, b, c, d, e:</p><img class="move-mc" src="./assets/gifs/move-mc.gif" alt="A green box is created and a mouse drags the green box to a place in the middle of a math question."><p>3.) When grading is on, students\' entered responses get immediate feedback:</p><img class="student-enter-answer-mc" src="./assets/gifs/student-enter-answer-mc.gif" alt="A textbox is filled in with the correct answer to the math problem. The box changes to green."><div flex="none"><md-button class="ck-primary" ng-click="ctrl.multipleChoiceManager.showHelp = false;">Get Started</md-button></div></div></div><div flex="100" ng-if="ctrl.showSlideBackground" class="slide-background" layout="column" layout-align="start stretch"><div class="sidenav-header" layout="row" layout-align="start center"><div flex="none">Edit Background</div><div flex=""></div><md-button class="sidenav-header-close" ng-click="ctrl.cancelSidenav($event, false)" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="no-background" layout="column" layout-align="center center"><md-button ng-click="ctrl.backgroundManager.removeBackground()">no background</md-button></div><div class="background-colors" layout="column" layout-align="start center"><div class="palette-container" layout="row" layout-wrap=""><md-button class="color-button" ng-repeat="color in ctrl.elementColors" ng-click="ctrl.backgroundManager.selectColor(color)" aria-label="{{::color.name}}"><div layout="row" layout-align="center center"><div class="circle" ng-style="{ \'background-color\': color.hex, border: ctrl.backgroundManager.borderColor(color) }" flex="none"></div></div></md-button></div></div><md-content flex="" layout="column" layout-align="start stretch"><div flex="none" layout="column" layout-align="start stretch"><md-button class="slide-background-item" ng-click="ctrl.backgroundManager.selectCustomBackgroundItem(item)" ng-repeat="item in ctrl.backgroundManager.backgroundItems track by item.id" aria-label="add this slide background image to the canvas" layout="row" layout-align="center center"><div class="image-container"><img ng-src="{{::item.url}}"></div><div ng-if="item.isCustom" ng-click="ctrl.backgroundManager.delete(item, $event)" class="trash" layout="" layout-align="center center"><i class="ck fa ck-trash"></i></div></md-button></div></md-content><div class="add-image-background" layout="column" layout-align="start stretch"><div flex="" layout="" layout-align="center center"><md-button ng-click="ctrl.backgroundManager.addCustomBackground()">import background</md-button></div></div></div><help-center flex="100" ng-if="ctrl.showHelpCenter" options="ctrl.options"></help-center><div flex="100" ng-if="ctrl.showCaptureAudio" class="capture-audio" layout="column" layout-align="start stretch"><div class="sidenav-header" layout="row" layout-align="start center"><div flex="">Record Audio</div><md-button class="sidenav-header-close" ng-click="ctrl.cancelSidenav()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><audio-capture ng-model="ctrl.capturedAudioBlob" ng-change="ctrl.addAudio()"></audio-capture></div><div flex="100" ng-if="ctrl.showEditFillInTheBlank" class="edit-fill-in-the-blank" ng-click="ctrl.preventElementBlur($event, true)" layout="column" layout-align="start stretch"><div ng-if="!ctrl.fillInTheBlankManager.showHelp" flex="100" layout="column" layout-align="start stretch"><div class="sidenav-header" layout="row" layout-align="start center"><div flex="none">Edit Fill In The Blank</div><md-button class="contextual-help" ng-click="ctrl.fillInTheBlankManager.showHelp = true;" aria-label="help" layout="row" layout-align="center center"><i class="fa ck ck-contextualhelp"></i><md-tooltip md-delay="1000" md-direction="bottom">Fill in the blank help</md-tooltip></md-button><div flex=""></div><md-button class="sidenav-header-close" ng-click="ctrl.cancelSidenav($event, false)" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><md-content flex=""><md-list><md-list-item class="answer" ng-repeat="answer in ctrl.fillInTheBlankManager.selectedAnswers"><input flex="" type="text" ng-model="answer.answer" ng-trim="false" ck-autofocus="answer.selected" ng-focus="answer.selected = true;" ng-blur="ctrl.fillInTheBlankManager.saveAnswers(); answer.selected = false;" ng-enter="ctrl.handleEnter($index)" aria-label="edit acceptable answer"><div class="trash"><md-button class="bar-item" ng-click="ctrl.fillInTheBlankManager.deleteAnswer(answer)" aria-label="delete answer"><i class="ck fa ck-trash"></i><md-tooltip md-delay="1000" md-direction="bottom">Delete Answer</md-tooltip></md-button></div></md-list-item><md-list-item class="answer list-button" ng-click="ctrl.addFillInTheBlankAnswer()" layout="row">+ Add Acceptable Answer</md-list-item></md-list></md-content><div class="change-points" layout="row" layout-align="center center"><md-button ng-click="ctrl.fillInTheBlankManager.decrementPoints()" aria-label="subtract point from fill in the blank\\\'s value" ng-disabled="!ctrl.fillInTheBlankManager.hasSelectedAnswers"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-grademinus"></i></div></md-button><md-input-container md-no-float=""><span class="label">Set Points</span> <input name="fillInTheBlankScore" type="number" ng-model="ctrl.fillInTheBlankManager.selectedPoints" ng-disabled="!ctrl.fillInTheBlankManager.hasSelectedAnswers" placeholder="--"></md-input-container><md-button ng-click="ctrl.fillInTheBlankManager.incrementPoints()" aria-label="add point to fill in the blank\\\'s score" ng-disabled="!ctrl.fillInTheBlankManager.hasSelectedAnswers"><div class="contents" layout="" layout-align="center center"><i class="ck fa ck-gradeplus"></i></div></md-button></div></div><div ng-if="ctrl.fillInTheBlankManager.showHelp" flex="100" class="onboarding" layout="column" layout-align="start center"><div class="section-header">How do I use a fill in the blank?</div><p>1.) Place the element where you want your students to answer:</p><img src="./assets/gifs/move-and-resize-fitb.gif" alt="A green box is created and a mouse drags the green box to a place in the middle of a math question."><p>2.) Add an acceptable answer and points:</p><img src="./assets/gifs/enter-answer-fitb.gif" alt="A mouse clicks a button to add a response. The text is modified to the correct answer to the math question."><p>3.) When grading is on, students\' entered responses get immediate feedback:</p><img src="./assets/gifs/student-enter-answer-fitb.gif" alt="A textbox is filled in with the correct answer to the math problem. The box changes to green."><md-button class="ck-primary" ng-click="ctrl.fillInTheBlankManager.showHelp = false;">Get Started</md-button></div></div><div flex="100" ng-if="ctrl.sidenav.isLoading" class="loading" layout="" layout-align="center center"><div><i class="fa ck ck-loading ck-green fa-spin fa-5x"></i></div></div><div flex="100" ng-if="ctrl.sidenav.isError" class="error" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p>{{ctrl.sidenav.errorMessage}}</p><br><md-button class="ck-primary" ng-click="ctrl.goToPlaceStickers()">Ok</md-button></div></md-sidenav></div>');
e.put("app/components/assignment-toolbar/toolbar-color-menu.component.html",'<div layout="row" layout-wrap=""><md-button class="tool-button" ng-repeat="color in ctrl.colors" ng-click="ctrl.select(color)" aria-label="{{::color.name}}"><div layout="row" layout-align="center center"><div class="circle" ng-style="{ \'background-color\': color.hex, border: ctrl.borderColor(color) }" flex="none"></div></div></md-button></div><div class="transparent-button" ng-if="ctrl.transparentButtonText" layout="row" layout-align="center center"><a ng-click="ctrl.makeTransparent()" aria-label="{{::ctrl.transparentButtonText}}">{{::ctrl.transparentButtonText}}</a></div>');e.put("app/components/assignment-thumbnail/assignment-thumbnail.html",'<svg viewbox="0 0 1004 2008"><g class="root"><g class="background"></g><g class="content"></g><g class="work"></g><g class="sticker"></g></g></svg>');e.put("app/components/assignments-limit-paywall-dialog/assignments-limit-paywall-dialog.html",'<md-dialog class="assignments-limit-paywall-dialog" aria-label="select an assignment from the following list"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">{{ctrl.title}}</div><md-content layout="column" layout-align="start stretch"><div class="top-message">{{ctrl.topMessage}}</div><img ng-src="../assets/images/assignments-limit/limit_{{::ctrl.percentageToNearest5}}.svg" alt="Assignments illustration"><div class="bottom-message">{{ctrl.bottomMessage}}</div><div class="actions" layout="" layout-align="space-around center"><div class="action" layout="column" layout-align="start center"><md-button class="ck-primary" ng-click="ctrl.goToOrderPage()" aria-label="View plans for Classkick Pro">View Plans</md-button></div></div></md-content></div></md-dialog>');e.put("app/components/audio-capture-directive/audio-capture.html",'<div class="audio-capture" flex="" layout="column" layout-align="center center"><div ng-if="ctrl.currentState === ctrl.START" class="start enter-fade" layout="column" layout-align="center center"><div class="message" flex=""></div><md-button ng-click="ctrl.start()" class="recording-icon" layout="" layout-align="center center" aria-label="start recording"><i class="ck fa ck-icon-grey ck-audio"></i></md-button><div flex="" layout="column" layout-align="center center"><md-button ng-if="ctrl.currentState === ctrl.START" class="ck-primary enter-fade" ng-click="ctrl.start()">Start Recording</md-button><div>or</div><form name="importAudioForm" class="import-audio-form" layout="column" layout-align="start center"><md-button ng-click="ctrl.openFileSelect()" aria-label="select file">select file</md-button><input file-input="" name="input" class="import-audio-input" type="file" accept="{{::ctrl.supportedMimeTypes}}" ng-hide="true" ng-model="ctrl.capturedAudioFile" ng-change="ctrl.audioFileChanged()"></form></div></div><div ng-if="ctrl.currentState === ctrl.RECORDING" class="recording enter-fade" layout="column" layout-align="center center"><div class="message" flex="" layout="column" layout-align="end center"><span>Recording audio</span> <span>{{ctrl.time}}</span></div><md-button ng-click="ctrl.save()" class="recording-icon" layout="" layout-align="center center" aria-label="stop and save"><i class="ck fa ck-green ck-audio"></i></md-button><div flex="" layout="" layout-align="center start"><md-button ng-if="ctrl.currentState === ctrl.RECORDING" class="ck-primary enter-fade" type="submit" ng-click="ctrl.save()">Stop and Save</md-button></div></div><div ng-if="ctrl.currentState === ctrl.SAVING" class="audio-loading" layout="" layout-align="center center"><i class="fa ck ck-loading ck-green fa-spin fa-4x"></i></div><div ng-if="ctrl.currentState === ctrl.NOT_SUPPORTED" class="audio-message" layout="column" layout-align="center center"><p><i class="ck fa ck-audio fa-3x"></i></p><p>This browser does not support recording audio</p><p>Classkick works best on<br><a href="https://www.google.com/chrome/browser/desktop">Chrome</a></p></div><div ng-if="ctrl.currentState === ctrl.FILE_TOO_LARGE" class="audio-message" layout="column" layout-align="center center"><p><i class="ck fa ck-audio fa-3x"></i></p><p>You can only upload files under 10MB.</p><md-button class="ck-primary" ng-click="ctrl.currentState = ctrl.START">Ok</md-button></div><div ng-if="ctrl.currentState === ctrl.BLOCKED" class="audio-message" layout="column" layout-align="center center"><p><i class="ck fa ck-audio fa-3x"></i></p><p>You have blocked access to the microphone</p><p>Please enable access to the microphone to record audio</p></div></div>');e.put("app/components/camera-dialog/camera-dialog.html",'<md-dialog class="camera-dialog" ng-style="{width: ctrl.width}" layout="column" layout-align="start stretch" aria-label="Help Dialog"><div ng-show="ctrl.state === ctrl.Active"><div flex="none" class="camera-dialog-header" layout="row" layout-align="start start" layout-nowrap=""><div flex=""></div><div flex="none" class="bar-item" layout="row"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div></div><div ng-style="{ height: ctrl.height }"><div class="snap" flex="none" layout="column" layout-align="start stretch"><video id="player" autoplay=""></video><div ng-hide="true"><canvas id="canvas"></canvas></div></div></div><div flex="none" class="camera-dialog-footer" layout="" layout-align="end center"><md-button class="ck-primary" ng-click="ctrl.takePicture()" aria-label="Capture">Capture</md-button></div></div><div ng-show="ctrl.state === ctrl.Unsupported" class="unsupported" layout="column" layout-align="start stretch"><div flex="none" class="camera-dialog-header" layout="row" layout-align="start start" layout-nowrap=""><div flex=""></div><div flex="none" class="bar-item" layout="row"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div></div><div layout="column" layout-align="center center"><p><i class="ck fa ck-camera fa-3x"></i></p><p>This browser does not support taking pictures with a camera</p><p>Classkick works best on <a href="https://www.google.com/chrome/browser/desktop">Chrome</a></p></div></div><div ng-if="ctrl.state === ctrl.Blocked" class="blocked" layout="column" layout-align="start stretch"><div flex="none" class="camera-dialog-header" layout="row" layout-align="start start" layout-nowrap=""><div flex=""></div><div flex="none" class="bar-item" layout="row"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div></div><div layout="column" layout-align="center center"><p><i class="ck fa ck-camera fa-3x"></i></p><p>You have blocked access to the camera</p><p>Please enable access to the camera to take a picture</p></div></div><div ng-show="ctrl.state === ctrl.Loading" class="loading" layout="column" layout-align="center stretch"><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="spinner" flex="none" layout="" layout-align="center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></div></md-dialog>');e.put("app/components/canvas-context-menu/canvas-context-menu.html",'<md-menu-content class="canvas-context-menu" width="3"><md-menu-item><md-button aria-label="Edit this element" ng-click="ctrl.edit()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-edit"></i></span> <span>Edit</span></div></md-button></md-menu-item><md-menu-item><md-button aria-label="Edit this element" ng-click="ctrl.delete()"><div class="menu-item-content" layout="row" layout-align="start stretch"><span layout="row" layout-align="start center"><i class="ck fa ck-trash"></i></span> <span>Delete</span></div></md-button></md-menu-item></md-menu-content>');e.put("app/components/cancel-subscription-dialog/cancel-subscription-dialog.html",'<md-dialog class="cancel-subscription-dialog"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Confirm Cancel Subscription</div><div class="content" layout="column" layout-align="center stretch"><div layout="column" layout-align="center start"><p>Are you sure you want to cancel your subscription?</p><p>Your Pro membership will expire {{ctrl.contract.expiresDisplay}} and will<br>not be charged again.</p></div><div class="cancel-request" layout="column" layout-align="center stretch"><div>Please tell us why you\'re canceling:</div><md-autocomplete flex="" md-input-name="cancelReason" md-min-length="0" md-input-maxlength="100" md-search-text="ctrl.cancelReason" md-items="item in ctrl.autocompleteFilter(ctrl.cancelReason, ctrl.cancelOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-dropdown-items="3" md-menu-container-class="ck-autocomplete-container" md-floating-label="Select Option..."><md-item-template><span md-highlight-text="ctrl.cancelReason">{{item}}</span></md-item-template></md-autocomplete></div><div layout="" layout-align="center center"><md-button ng-click="ctrl.cancelSubscription()">Cancel Subscription</md-button></div></div></md-dialog>');e.put("app/components/chat-message/chat-message.component.html",'<div ng-if="!!ctrl.config" class="chat-message" ng-class="{\'previous-from-other\': ctrl.previousMessageIsFromDifferentUser }" layout="column" layout-align="start stretch"><div class="user-info" ng-if="ctrl.showName" layout=""><div class="name">{{ctrl.formatName}}</div><div class="time">{{ctrl.current.timestamp.fromNow()}}</div></div><div class="chat-text" ng-class="ctrl.messageClass" layout="" layout-align="start center"><i ng-if="ctrl.showHand" class="ck fa ck-hand"></i><div flex="" class="text" ng-bind-html="ctrl.formatMessage | linky:\'_blank\'"></div></div></div>');e.put("app/components/ck-switch/ck-switch.component.html",'<div class="ck-switch-ctn" layout="" layout-align="start stretch" ng-click="ctrl.active = !ctrl.active" md-prevent-menu-close=""><label class="switch"><input ng-model="ctrl.active" type="checkbox"> <span class="slider"></span></label><div class="noselect" ng-transclude="" layout="" layout-align="start end"></div></div>');e.put("app/components/color-menu/color-menu.html",'<md-button class="color-item" ng-click="ctrl.select(item)" ng-repeat="item in ctrl.colors" aria-label="color {{item.name}}"><div class="contents"><div class="circle" ng-style="ctrl.style(item)"></div></div></md-button>');e.put("app/components/confirm-dialog/confirm-dialog.html",'<md-dialog class="confirm-dialog"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body"><div ng-if="ctrl.message" class="primary-message" compile="ctrl.message"></div><div ng-if="ctrl.secondaryMessage" class="secondary-message" compile="ctrl.secondaryMessage"></div></div><md-dialog-actions ng-if="!ctrl.isAlert"><md-button ng-click="ctrl.cancel()" class="md-primary" aria-label="cancel">No</md-button><md-button ng-click="ctrl.confirm()" class="ck-primary" aria-label="confirm">Yes</md-button></md-dialog-actions><md-dialog-actions ng-if="ctrl.isAlert"><md-button ng-click="ctrl.confirm()" class="ck-primary" aria-label="confirm">Got it!</md-button></md-dialog-actions></md-dialog>');e.put("app/components/contextual-paywall-dialog/contextual-paywall-dialog.html",'<md-dialog class="contextual-paywall-dialog"><div ng-hide="ctrl.loading" class="contextual-paywall"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">{{ctrl.currentTitle}}</div><div class="ck-dialog-body" layout="column" layout-align="start center"><div class="image-container"><div class="images" ng-style="ctrl.imagesStyle"><img ng-src="{{::paywall.url}}" ng-repeat="paywall in ctrl.paywalls"></div></div><div flex="none" class="nav-buttons" layout="row" layout-align="center center"><md-button class="prev" aria-label="go to previous help slide" ng-click="ctrl.prev()"><div layout="" layout-align="center center"><i class="ck ck-back"></i></div></md-button><div class="dot-container" layout="" layout-align="center center"><div class="dot-button" ng-repeat="paywall in ctrl.paywalls" ng-click="ctrl.goTo(paywall)"><div class="dot" ng-class="{\'active\': paywall.text === ctrl.currentTitle}"></div></div></div><md-button class="next" aria-label="scroll right" ng-click="ctrl.next()"><div layout="" layout-align="center center"><i class="ck ck-next"></i></div></md-button></div><div class="actions" layout="" layout-align="space-around center"><div class="action" layout="column" layout-align="start center"><md-button class="ck-primary" ng-click="ctrl.goToOrderPage()" aria-label="View plans for Classkick Pro">View Plans</md-button></div></div></div></div><div class="loading" ng-show="ctrl.loading" layout="" layout-align="center center"><div><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></md-dialog>');e.put("app/components/contract-user-reset-password-dialog/contract-user-reset-password-dialog.html",'<md-dialog class="contract-user-reset-password-dialog" aria-label="reset password of this contract user"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Update Password for {{ctrl.user.name}}</div><div class="body" layout="column" layout-align="center center"><div flex="90" layout-align="center center" layout="column"><md-input-container><span class="label">New Password</span> <input ng-model="ctrl.newPassword" type="{{ctrl.inputType}}" name="password" md-autofocus="" autocomplete="new-password" aria-label="Reset password for student"></md-input-container><div class="checkbox-container" layout="row" layout-align="start center"><md-checkbox ng-model="ctrl.showPassword" class="md-primary">Show Password</md-checkbox></div></div><div class="reset-password-buttons" layout="row" layout-align="end end"><md-button class="ck-primary" ng-click="ctrl.resetStudentPassword()" ng-disabled="!ctrl.newPassword">update password</md-button></div></div></md-dialog>');e.put("app/components/create-contract-students-dialog/create-contract-students-dialog.html",'<md-dialog class="create-contract-students-dialog" aria-label="Create new student accounts"><div ng-show="ctrl.state !== ctrl.Loading" class="ck-dialog-header" flex="none" layout="row" layout-align="start stretch"><md-button ng-show="ctrl.state !== ctrl.Created" ng-click="ctrl.goBack()" class="bar-item" aria-label="Go back to add students dialog"><div class="contents"><i class="ck fa ck-back"></i></div></md-button><div flex=""></div><md-button class="bar-item" ng-click="ctrl.$mdDialog.hide()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="select" ng-show="ctrl.state === ctrl.Select"><div class="ck-dialog-title">Create Portfolio Student Accounts</div><form name="selectForm" layout="column" layout-align="start stretch"><div class="select-contract" layout="column" layout-align="center center" ng-if="ctrl.showContractSelector"><div class="select-contract-directions">Select organization to add students to:</div><md-input-container class="option" md-is-error="ctrl.selectIsError" md-no-float=""><md-select ck-select="" md-container-class="ck-select-menu" name="contracts" ng-model="ctrl.contract" aria-label="select the organization you want to add students to" md-on-close="ctrl.resetSelectForm(this)" placeholder="Select a Contract"><md-option ng-value="contract" ng-repeat="contract in ctrl.contracts" layout="column" layout-align="center stretch"><div>{{:: contract.name}}</div></md-option></md-select><div class="error-messages" ng-messages="selectForm.contracts.$error"><div ng-message="required">Please select an organization to add students</div></div></md-input-container></div><p class="directions">Choose an option to create student accounts:</p><div layout="" layout-align="center center"><div class="create-options" ng-click="ctrl.goToImport(this)"><div flex="" class="image-container" layout="row" layout-align="center center"><img src="../assets/images/import_csv.png"></div><div flex="none"><div class="message" layout="row" layout-align="center start">Import from CSV</div></div></div><div class="create-options" ng-click="ctrl.goToManualAdd(this)"><div flex="" class="image-container" layout="row" layout-align="center center"><img src="../assets/images/add_manually.png"></div><div flex="none"><div class="message" layout="row" layout-align="center start">Add Manually</div></div></div></div><p class="disclaimer">By selecting an option and creating student accounts, you assert that you have parental consent/notice for these students to use Classkick, and agree to the <a ng-click="ctrl.goToTermsOfServicePage()">Terms of Service</a> and <a ng-click="ctrl.goToPrivacyPolicyPage()">Privacy Policy</a>.</p></form></div><div class="add-or-edit-user" ng-show="ctrl.state === ctrl.ManualAdd || ctrl.state === ctrl.ManualEdit"><div class="ck-dialog-title">{{ctrl.state === ctrl.ManualAdd ? \'Add Student Account\' : \'Edit Student Account\'}}</div><form name="manualForm" layout="column" layout-align="start stretch"><md-input-container md-is-error="ctrl.emailOrUsernameInputError"><label>Email or Username</label> <input name="emailOrUsernameInput" type="text" ng-model="ctrl.newContractStudent.id" md-no-asterisk="" required="" ng-change="ctrl.emailOrUsernameUpdated(this)"><div class="error-messages" ng-messages="manualForm.emailOrUsernameInput.$error"><div ng-message="required">Please enter an email or username</div><div ng-message="taken">Username/email is taken, please enter another</div><div ng-message="email-format">Email addresses must match the format _@_._</div><div ng-message="email-length">Email addresses must be 190 characters or less</div><div ng-message="username-format">Usernames must start with a letter</div><div ng-message="username-length">Usernames must be between 2 and 35 characters</div></div></md-input-container><md-input-container md-is-error="!ctrl.newContractStudent.isFirstNameValid"><label>First Name</label> <input name="firstNameInput" type="text" ng-model="ctrl.newContractStudent.firstName" ng-maxlength="ctrl.UserFirstNameMaxSize"><div class="error-messages" ng-messages="manualForm.firstNameInput.$error"><div ng-message="maxlength">first name is too long</div></div></md-input-container><md-input-container md-is-error="!ctrl.newContractStudent.isLastNameValid"><label>Last Name</label> <input name="lastNameInput" type="text" ng-model="ctrl.newContractStudent.lastName" ng-maxlength="ctrl.UserLastNameMaxSize"><div class="error-messages" ng-messages="manualForm.lastNameInput.$error"><div ng-message="maxlength">last name is too long</div></div></md-input-container><md-input-container><label>Password</label> <input name="passwordInput" type="text" ng-model="ctrl.newContractStudent.password" md-no-asterisk="" required=""><div class="error-messages" ng-messages="manualForm.passwordInput.$error"><div ng-message="required">Please enter a password</div></div></md-input-container><div class="actions" layout="" layout-align="end end"><md-button class="ck-primary" ng-click="ctrl.saveStudent(this)" ng-disabled="!ctrl.newContractStudent.id || !ctrl.newContractStudent.password" aria-label="Add student"><div ng-show="ctrl.state === ctrl.ManualAdd">add student</div><div ng-show="ctrl.state === ctrl.ManualEdit">save changes</div></md-button></div></form></div><div class="import-csv" ng-show="ctrl.state === ctrl.ImportCsv"><div class="ck-dialog-title">Import Students from CSV</div><form layout="column" layout-align="start stretch"><p>You may create multiple student accounts at once by choosing a CSV file with the appropriate student information.</p><p>You must include a unique email or username for each student in a column named "<span>id</span>". You may also provide columns for the students\' "<span>first_name</span>", "<span>last_name</span>", and/or the "<span>password</span>" which they will use to log in.</p><p class="sample">Sample File: <a href="./assets/sample-students.csv">Download Sample CSV</a></p><div class="actions" layout="" layout-align="end"><md-button class="ck-primary" ng-click="ctrl.chooseFile()">choose file</md-button></div><input file-input="" name="input" class="csv-input" type="file" accept="{{::ctrl.TextCsv}}" ng-hide="true" ng-model="ctrl.originalFile" ng-change="ctrl.fileChanged()"></form></div><div class="remove-duplicates" ng-show="ctrl.state === ctrl.RemovedDuplicates"><div class="ck-dialog-title">Duplicates Found</div><md-content layout="column"><p>{{ctrl.duplicateCount}} rows in your CSV match students that are part of your organization.</p><p>The duplicate records will not be imported and will not modify the existing students.</p><div class="actions" layout="row" layout-align="end" flex="none"><md-button class="ck-primary" ng-click="ctrl.go(ctrl.Review)">OK</md-button></div></md-content></div><div class="review" ng-show="ctrl.state === ctrl.Review"><div class="ck-dialog-title">Review Student Accounts</div><md-content><md-list-item class="list-header" layout="row" flex="none"><div flex="grow">First Name</div><div flex="grow">Last Name</div><div flex="grow">Email or Username</div><div flex="grow">Password</div><div flex="none" class="remove-col"></div></md-list-item><md-virtual-repeat-container><md-list><md-list-item class="list-item" layout="row" layout-nowrap="" ng-click="ctrl.editAccount(student)" md-virtual-repeat="student in ctrl.newStudents"><div ng-hide="student.valid" class="anchor"><div class="list-item-error-message">{{student.errorMessage}}</div></div><div layout="column" layout-align="center" layout-fill=""><div layout="row"><div flex="grow" class="first-name-col" layout="" layout-align="start center"><div class="truncate">{{student.firstName}}</div></div><div flex="grow" class="last-name-col" layout="" layout-align="start center"><div class="truncate">{{student.lastName}}</div></div><div flex="grow" class="id-col" layout="" layout-align="start center"><div class="truncate">{{student.id}}</div></div><div flex="grow" class="password-col" layout="" layout-align="start center"><div class="truncate">{{student.password}}</div></div><div flex="none" class="remove-col"><md-button class="bar-item" ng-click="ctrl.removeStudent(student)" aria-label="Remove student from list of students to be created"><i class="ck fa ck-icon-grey ck-close"></i></md-button></div></div></div></md-list-item><div class="empty-message" ng-if="ctrl.newStudents.length === 0" layout="row" layout-align="center center">There are no students available.</div></md-list></md-virtual-repeat-container><div class="actions" layout="row" layout-align="end" flex="none"><md-button ng-show="ctrl.studentsAreInvalid" ng-click="ctrl.downloadErrorCsv()">CSV of accounts that won\'t be created<md-tooltip md-delay="200" md-direction="top">Download this CSV to fix reasons why these accounts won\'t be created,<br>or to share with an admin or Classkick support to get assistance.</md-tooltip></md-button><md-button ng-click="ctrl.go(ctrl.ManualAdd)">Add Account</md-button><md-button class="ck-primary" ng-click="ctrl.create()">Continue</md-button></div></md-content></div><div class="created" ng-show="ctrl.state === ctrl.Created"><div class="ck-dialog-title">Student Accounts Created</div><md-content><md-list-item class="list-header" layout="row" flex="none"><div flex="">First Name</div><div flex="">Last Name</div><div flex="">Email or Username</div><div flex="">Password</div></md-list-item><md-virtual-repeat-container><md-list><md-list-item class="list-item" md-virtual-repeat="student in ctrl.validStudents" layout="row" layout-nowrap=""><div flex="" class="name-col"><div class="truncate">{{student.firstName}}</div></div><div flex="" class="name-col"><div class="truncate">{{student.lastName}}</div></div><div flex="" class="name-col"><div class="truncate">{{student.id}}</div></div><div flex="" class="name-col"><div class="truncate">{{student.password}}</div></div></md-list-item><div class="empty-message" ng-if="ctrl.newStudents.length === 0">There are no students available.</div></md-list></md-virtual-repeat-container><div flex="" class="message" layout="" layout-align="center center">Please save this information for your records. The students\' passwords are not shown in Classkick once you close this window.</div><div class="actions" layout="column" layout-align="center stretch" flex="none"><div layout="" layout-align="end"><md-button ng-click="ctrl.downloadCsv()">Save as .CSV</md-button><md-button class="ck-primary" ng-click="ctrl.close()">Close</md-button></div></div></md-content></div><div class="error-container" ng-show="ctrl.state === ctrl.Error" layout="column" layout-align="start stretch"><div layout="" layout-align="center center" layout-padding=""><i class="fa ck ck-alert ck-warn fa-5x"></i></div><div layout-padding=""><p>{{ctrl.errorMessage}}</p></div><div class="actions" layout="" layout-align="end center"><md-button class="ck-primary" ng-click="ctrl.goBack()">Ok</md-button></div></div><div ng-show="ctrl.state === ctrl.Loading" class="loading" layout="column" layout-align="center stretch"><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="spinner" flex="none" layout="" layout-align="center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></div></md-dialog>');e.put("app/components/create-order-dialog/create-order-dialog.html",'<md-dialog class="create-order-dialog" aria-label="Input information to create a quote for Classkick Pro"><div ng-if="ctrl.state === ctrl.IdentifyOrganization" class="identify-organization"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">Order Classkick Pro {{::ctrl.orgType}}</div><p>We\'re so excited you\'re taking the first steps to going pro with Classkick! To get you set up, please enter the name of your {{ctrl.orgType}}:</p><form name="identifyOrganizationForm" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.identifyOrganization(this)"><div class="body-content" layout="column" layout-align="start stretch"><md-autocomplete flex="" md-input-name="organizationNameInput" md-min-length="1" md-input-maxlength="60" md-search-text="ctrl.organizationName" md-selected-item="ctrl.organization" md-item-text="item.name" md-mode="standard" md-items="item in ctrl.autocompleteOrganization(ctrl.organizationName)" md-match-case-insensitive="true" md-menu-container-class="ck-join-organization-autocomplete-container" md-floating-label="Your {{ctrl.orgType}}" required="" md-no-asterisk="" md-require-match="true"><span class="label">Your {{ctrl.orgType}}</span><md-item-template><div ng-if="ctrl.isOrganization(item)" class="organization-content" layout="column" layout-align="center space-between"><span layout="row" layout-align="space-between start"><span class="organization-name">{{item.name}}</span> <span class="organization-members">{{item.memberCount || 0}} Teachers</span></span> <span class="organization-location">{{item.displayLocation}}</span></div><div ng-if="!ctrl.isOrganization(item)" class="add-organization" ng-click="ctrl.state = ctrl.AddOrganization" layout="" layout-align="space-between"><span>My {{::ctrl.orgType}} isn\'t listed</span> <span class="ck-green">Add new {{::ctrl.orgType}}</span></div></md-item-template><md-not-found><div class="add-organization" ng-click="ctrl.state = ctrl.AddOrganization" layout="" layout-align="space-between"><span>My {{::ctrl.orgType}} isn\'t listed</span> <span class="ck-green">Add new {{::ctrl.orgType}}</span></div></md-not-found><div class="error-messages" ng-messages="identifyOrganizationForm.organizationNameInput.$error"><div ng-message="required">Please select a {{::ctrl.orgType}} from the list</div><div ng-message="md-require-match">Please select a {{::ctrl.orgType}} from the list</div></div><div class="loading-spinner enter-fade" ng-if="ctrl.loadingAutocompleteOrganization"><i class="fa ck ck-loading ck-green fa-spin"></i></div></md-autocomplete><md-button class="ck-primary" type="submit" aria-label="Join your school">Next</md-button></div></form></div></div><div ng-if="ctrl.state === ctrl.AddOrganization" class="add-organization"><div class="ck-dialog-header" flex="none" layout="row" layout-align="space-between stretch"><md-button class="bar-item" ng-click="ctrl.state = ctrl.IdentifyOrganization" aria-label="Go back to previous view"><i class="fa ck ck-back ck-green"></i></md-button><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">Add {{::ctrl.orgType}}</div><p>Please add your {{::ctrl.orgType}}\'s name and location so we can include the right information in your quote</p><form name="enterOrganizationDetailsForm" ng-if="ctrl.state === ctrl.AddOrganization" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.addOrganization(this)"><div class="body-content" layout="column" layout-align="start stretch"><md-input-container flex="" class="organization-name"><span class="label">{{::ctrl.orgType}} Name</span> <input name="newOrganizationNameInput" type="text" ng-model="ctrl.newOrganizationName" required="" md-no-asterisk="" aria-label="Enter your {{::ctrl.orgType}}\'s name"></md-input-container><md-autocomplete flex="" md-input-name="organizationLocationInput" md-min-length="0" md-input-maxlength="60" md-search-text="ctrl.newOrganizationLocationDisplay" md-selected-item="ctrl.newOrganizationLocation" md-item-text="item.description" md-mode="standard" md-items="item in ctrl.autocompleteLocation(ctrl.newOrganizationLocationDisplay)" md-delay="200" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="School Location" required="" md-no-asterisk="" md-require-match="true"><span class="label">{{ctrl.orgType}} Location</span><md-item-template><span>{{item.description}}</span></md-item-template><div class="error-messages" ng-messages="enterOrganizationDetailsForm.organizationLocationInput.$error"><div ng-message="required">Please select a city or town from the list</div><div ng-message="md-require-match">Please select a city or town from the list</div></div><div class="loading-spinner enter-fade" ng-if="ctrl.loadingAutocompleteLocation"><i class="fa ck ck-loading ck-green fa-spin"></i></div></md-autocomplete><md-button class="ck-primary" type="submit" aria-label="Add your school or district">Add {{::ctrl.orgType}}</md-button></div></form></div></div><div ng-if="ctrl.state === ctrl.IdentifyPerson" class="identify-person"><div class="ck-dialog-header" flex="none" layout="row" layout-align="space-between stretch"><md-button class="bar-item" ng-click="ctrl.state = ctrl.IdentifyOrganization" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-back"></i></div></md-button><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">Order Classkick Pro {{ctrl.orgType}}</div><form name="identifyPersonForm" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.identifyPerson(this)"><div class="body-content" layout="column" layout-align="start stretch"><md-input-container flex="" class="name"><span class="label">Your Name</span> <input name="nameInput" type="text" ng-model="ctrl.name" required="" md-no-asterisk="" aria-label="Enter your name"></md-input-container><md-input-container flex="" class="email"><span class="label">Your Email</span> <input name="emailInput" type="email" ng-pattern="ctrl.emailPattern" ng-model="ctrl.email" required="" md-no-asterisk="" aria-label="Enter your email"><div class="error-messages" ng-messages="identifyPersonForm.emailInput.$error"><div ng-message="required">Please enter an email address</div><div ng-message="pattern">Please enter a valid email address</div></div></md-input-container><md-checkbox flex="" ng-hide="ctrl.hideFirstYearCheckbox" class="md-primary renewal" ng-model="ctrl.firstYear">This is the first year {{::ctrl.organizationName}} is buying Classkick Pro</md-checkbox><md-checkbox flex="" class="md-primary virtual" ng-model="ctrl.virtual">{{::ctrl.organizationName}} is a virtual {{::ctrl.orgType}}</md-checkbox><md-button class="ck-primary" type="submit" aria-label="Join your school">Next</md-button></div></form></div></div><div ng-if="ctrl.state === ctrl.IdentifyPurchasePeriod" class="identify-purchase-period"><div class="ck-dialog-header" flex="none" layout="row" layout-align="space-between stretch"><md-button class="bar-item" ng-click="ctrl.state = ctrl.IdentifyPerson" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-back"></i></div></md-button><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">Order Classkick Pro {{::ctrl.orgType}}</div><form name="selectPurchasePeriodForm" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.submitPurchasePeriod(this)"><div class="body-content" layout="column" layout-align="start stretch"><div ng-if="ctrl.orgType === ctrl.District" class="quantity" layout="column" layout-align="start start"><span class="label">Number of Schools?</span><div layout="" layout-align="start center"><md-input-container flex=""><input name="numberOfSchoolsInput" type="number" ng-model="ctrl.quantity" required="" md-no-asterisk="" aria-label="Enter the number of schools in your district" ng-pattern="ctrl.positiveIntegerRegEx" autocomplete="off"></md-input-container><div class="stepper" layout="column" layout-align="center center"><div flex="none" class="increment" ng-click="ctrl.incrementQuantity()"><i class="ck fa ck-carrot-up"></i></div><div flex="none" class="decrement" ng-click="ctrl.decrementQuantity()"><i class="ck fa ck-carrot"></i></div></div></div></div><div class="purchase-period" layout="column" layout-align="start stretch"><div class="label">What time period? (You can adjust this later)</div><select-purchase-period selected-start="ctrl.selectedStart" selected-end="ctrl.selectedEnd" quantity="ctrl.quantity" prices="ctrl.prices" valid="ctrl.isValidPurchasePeriod" hide-this-year="ctrl.hideThisYear" is-renewal="ctrl.isRenewal"></select-purchase-period></div><md-button class="ck-primary" type="submit" aria-label="Create quote">Next</md-button><div ng-if="!ctrl.isValidPurchasePeriod && ctrl.errorMessage" class="error-message enter-fade">{{ctrl.errorMessage}}</div></div></form></div></div><div class="loading" ng-show="ctrl.state === ctrl.Loading" layout="" layout-align="center center"><div><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></md-dialog>');
e.put("app/components/delete-account-dialog/delete-account-dialog.html",'<md-dialog class="delete-account-dialog"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Confirm Account Delete</div><div class="content" layout="column" layout-align="center center"><div>Deleting your account cannot be reversed. All of your data will be deleted.</div><div>Are you sure you want to continue?</div><div class="delete-request"><div>Please tell us why you\'re deleting your account:</div><md-autocomplete flex="" md-input-name="deleteReason" md-min-length="0" md-input-maxlength="100" md-search-text="ctrl.deleteReason" md-items="item in ctrl.autocompleteFilter(ctrl.deleteReason, ctrl.deleteOptions)" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-dropdown-items="3" md-menu-container-class="ck-autocomplete-container" md-floating-label="Select Option..."><md-item-template><span md-highlight-text="ctrl.subject">{{item}}</span></md-item-template></md-autocomplete></div><div layout="row" layout-align="center center"><md-button class="delete-button" ng-click="ctrl.deleteAccount()">DELETE ACCOUNT</md-button></div></div></md-dialog>');e.put("app/components/feature-dialog/feature-dialog.html",'<md-dialog class="feature-dialog" layout="column" layout-align="start stretch" aria-label="Help Dialog"><div><div flex="none" class="feature-dialog-header" layout="row" layout-align="start start" layout-nowrap=""><div flex=""></div><div flex="none" class="bar-item" layout="row"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div></div><div flex="none" class="feature-dialog-title" layout="row" layout-align="center center">{{::ctrl.title}}</div><div class="feature-dialog-image-container"><div class="feature-dialog-image"><img ng-src="{{::ctrl.url}}"></div></div><div flex="none" class="feature-dialog-footer" layout="" layout-align="end center"></div></div></md-dialog>');e.put("app/components/error-dialog/error-dialog.html",'<md-dialog class="error-dialog" aria-label="Error Dialog" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"></div><div class="ck-dialog-body" flex="" layout="column"><div class="icon-body"><i class="fa ck ck-alert ck-warn fa-5x"></i></div><div ng-if="ctrl.primaryMessage" class="primary-message" compile="ctrl.primaryMessage"></div><div ng-if="ctrl.secondaryMessage" class="secondary-message" compile="ctrl.secondaryMessage"></div><div class="actions" layout="row" layout-align="end center"><md-button ng-repeat="buttonConfig in ctrl.buttons track by $index" ng-click="ctrl.handleClick(buttonConfig)" ng-class="ctrl.buttonClass(buttonConfig.action)">{{buttonConfig.text}}</md-button></div></div></md-dialog>');e.put("app/components/feedback-indicator/feedback-indicator.component.html",'<div class="feedback-indicator" ng-class="{\'active\': ctrl.countDisplay > 0}" layout="row" layout-align="center center"><div ng-if="ctrl.showIcon" flex="none" layout="" layout-align="center center"><i class="fa ck ck-notifications"></i><span></span></div><div class="count" flex="none">{{ctrl.countDisplay}}</div></div>');e.put("app/components/feedback-menu/feedback-menu.html",'<md-list><md-list-item class="empty-message" ng-hide="ctrl.hasFeedback" layout="" layout-align="center center">You have no new feedback</md-list-item><md-list-item class="title" ng-show="ctrl.hasFeedback"><div class="contents" layout="" layout-align="start center">New Feedback</div></md-list-item><md-list-item class="feedback-item" ng-repeat="questionFeedback in ctrl.questionFeedbacks track by questionFeedback.id" ng-click="ctrl.goToQuestion(questionFeedback.id)"><div class="contents" layout-fill="" layout="" layout-align="start center"><div flex="" layout="column" layout-align="start start"><span flex="shrink" class="message" layout="" layout-align="start center">{{questionFeedback.formatNames}} on slide #{{ctrl.questionNumber(questionFeedback.id)}}</span> <span flex="" class="time" layout="" layout-align="start center">{{questionFeedback.mostRecentDisplay}}</span></div><i class="ck fa ck-next"></i></div></md-list-item></md-list>');e.put("app/components/financial-aid-dialog/financial-aid-dialog.html",'<md-dialog class="financial-aid-dialog" aria-label="Input information to apply for financial aid for your school or district"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">School Financial Aid Application</div><p>If your school cannot afford the renewal price of {{::ctrl.currency(ctrl.quoteTotal)}}, we have need-based financial aid. Please only apply if you\'ve pursued all other funding optionsyou may be taking away aid from a school in need.</p><form name="financialAidApplicationForm" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.submit()"><div class="body-content" layout="column" layout-align="start stretch"><md-input-container flex="" class="name"><span class="label">Name</span> <input name="nameInput" type="text" ng-model="ctrl.name" required="" md-no-asterisk="" aria-label="Enter your name"></md-input-container><md-input-container flex="" class="email"><span class="label">Email</span> <input name="emailInput" type="text" ng-model="ctrl.email" required="" md-no-asterisk="" aria-label="Enter your email"></md-input-container><md-input-container flex="" class="role"><span class="label">Role</span> <input name="roleInput" type="text" ng-model="ctrl.role" required="" md-no-asterisk="" aria-label="Enter your role"></md-input-container><md-checkbox flex="" class="md-primary confirmation" ng-style="ctrl.confirmationStyle" ng-model="ctrl.confirmation" name="confirmationInput" ng-true-value="\'true\'" ng-false-value="\'false\'" ng-required="true">I certify that I am an administrator and that our school does not have the financial means to purchase a School Membership at the {{::ctrl.currency(ctrl.quoteTotal)}} renewal rate for the {{ctrl.purchasePeriod}} school year.</md-checkbox><md-input-container flex="" class="signature"><span class="label">Signature</span> <input name="signatureInput" type="text" ng-model="ctrl.signature" required="" md-no-asterisk="" aria-label="Enter your signature"></md-input-container><md-button class="ck-primary" type="submit" aria-label="Enter financial aid application">Submit</md-button></div></form></div></md-dialog>');e.put("app/components/folder-name-dialog/folder-name-dialog.html",'<md-dialog class="folder-name-dialog" aria-label="Enter the name of the folder you want to create"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">{{ctrl.title}}</div><div class="body" layout="column" layout-align="center stretch"><form flex="none" name="enterNameForm" layout="column" layout-align="start stretch" ng-submit="ctrl.submitName(this)"><div layout="" layout-align="center center"><md-input-container><span class="label">Folder Name</span> <input name="nameInput" type="text" ng-model="ctrl.name" autocomplete="off" aria-label="enter folder name" md-autofocus="" md-no-asterisk="" ng-maxlength="80"><div class="error-messages" ng-messages="enterNameForm.nameInput.$error"><div ng-message="maxlength">folder name is too long</div></div></md-input-container></div><div class="actions" layout=""><div flex=""></div><md-button class="ck-primary" type="submit" aria-label="Submit your new folder name" ng-disabled="!ctrl.name">Done</md-button></div></form></div></md-dialog>');e.put("app/components/grade-input/grade-input.html",'<form class="grade" ng-style="ctrl.styles" ng-click="ctrl.focusInput($event)" ng-submit="ctrl.onUpdated(true)" layout="" layout-align="center center"><input class="grade-input {{:: ctrl.readonly ? \'nofocus\' : \'\'}}" ng-readonly="ctrl.readonly" type="text" min="0" step="any" ng-model="ctrl.grade" ng-blur="ctrl.refreshBorderColor()" placeholder="{{ctrl.placeholder}}"> <span>{{ctrl.potentialScoreDisplay}} Pts</span> <span class="hidden-grade-span"></span><md-tooltip md-delay="1000" md-direction="bottom">{{ctrl.tooltipMessage}}</md-tooltip></form>');e.put("app/components/help-center/help-center.component.html",'<div ng-hide="ctrl.loading" class="help-center" layout="column" layout-align="start stretch"><div class="sidenav-header" layout="row" layout-align="start center"><div flex="">Help Center</div><md-button class="sidenav-header-close" ng-click="ctrl.cancelSidenav()" aria-label="cancel dialog"><div class="contents"><i class="ck fa ck-close"></i></div></md-button></div><div class="hand" layout="column" layout-align="center stretch"><div class="loading" ng-if="ctrl.showHandLoading" layout="column" layout-align="center center"><i class="fa ck ck-loading fa-spin fa-2x" ng-class="{\'ck-green\': ctrl.helpCenter.helpRequestManager.isLoadingForCheck, \'ck-yellow\': ctrl.helpCenter.helpRequestManager.isLoadingForHelp }"></i></div><div class="raise" ng-if="ctrl.showRaiseHand" layout="column" layout-align="center center"><md-button class="help ck-secondary" ng-click="ctrl.helpCenter.newHelpRequest_Help()"><div class="contents" layout="" layout-align="start center"><i class="ck fa ck-hand"></i><div>please help</div></div></md-button><md-button class="check ck-secondary" ng-click="ctrl.helpCenter.newHelpRequest_Check()"><div layout="" layout-align="start center"><i class="ck fa ck-hand"></i><div>please check</div></div></md-button></div><div class="lower" ng-if="ctrl.showLowerHand" layout="column" layout-align="start center"><md-button ng-click="ctrl.helpCenter.lowerHelpRequest()" ng-class="{\'help\': ctrl.helpCenter.helpRequestManager.isHelpRequestHelp, \'check\': ctrl.helpCenter.helpRequestManager.isHelpRequestCheck}"><div layout="column" layout-align="center center"><div class="circle" layout="" layout-align="center center"><i class="ck fa ck-hand"></i></div>put hand down</div></md-button></div><div class="info" ng-if="ctrl.showHandInfo" layout="column" layout-align="start center"><div class="circle" layout="" layout-align="center center" ng-class="{\'help\': ctrl.helpCenter.helpRequestManager.isHelpRequestHelp, \'check\': ctrl.helpCenter.helpRequestManager.isHelpRequestCheck}"><i class="ck fa ck-hand"></i></div><div class="message">{{ctrl.handInfoMessage}}</div></div></div><md-content class="messages" flex="" layout="column" layout-align="start stretch" scroll-glue=""><div class="no-messages" ng-if="!ctrl.helpCenter.chatMessageManager.hasChatMessages" layout="column" layout-align="center center">{{ctrl.noChatsMessage}}</div><chat-message id="{{::message.id}}" config="ctrl.chatMessageConfig(message)" prev="ctrl.helpCenter.chatMessageManager.messages[$index - 1]" next="ctrl.helpCenter.chatMessageManager.messages[$index + 1]" ng-repeat="message in ctrl.helpCenter.chatMessageManager.messages"></chat-message></md-content><form name="chatMessageForm" class="message-input" layout="column" layout-align="center stretch"><md-input-container md-no-float=""><textarea name="chatMessageInput" ng-enter="ctrl.sendMessage()" ng-maxlength="{{::ctrl.chatMessageMaxSize}}" ng-model="ctrl.newMessageText" placeholder="Type message here..." md-no-resize="" layout="row"></textarea></md-input-container><div class="error-messages" ng-messages="chatMessageForm.chatMessageInput.$error"><div ng-message="maxlength">Message too long, must be less than 2000 characters.</div></div></form></div>');e.put("app/components/help-inbox/help-inbox.html",'<md-menu class="help-inbox full-height" md-position-mode="target target"><md-button class="bar-item full-height" ng-click="$mdMenu.open($event)" aria-label="student helpers"><div flex="none" class="contents"><help-request-indicator help-requests="ctrl._unresolvedRequestSet" show-hand="true"></help-request-indicator><md-tooltip md-delay="1000">Help Inbox</md-tooltip></div></md-button><md-menu-content class="help-inbox-menu" width="5"><md-menu-item class="explanation" layout="" layout-align="space-between center"><span>{{ctrl.explanation}}</span> <a ng-if="ctrl.isTeacher && ctrl.hasUnresolvedRequests" ng-click="ctrl.clearHands()">CLEAR HANDS</a></md-menu-item><md-menu-item class="help-subtitle"><div class="contents" layout="" layout-align="start center"><span flex="">Please Help</span> <i class="ck fa ck-yellow ck-hand"></i> <span class="help-requests-count">{{ctrl.unresolvedHelpRequestsCount}}</span></div></md-menu-item><md-menu-item class="request" ng-repeat="request in ctrl.unresolvedHelpRequests"><md-button aria-label="give feedback" ng-click="ctrl.giveFeedbackTo(request)"><div class="contents" layout-fill="" layout="" layout-align="space-between center"><div ng-if="ctrl.isStudentHelpInbox" layout="" layout-align="start center"><img ng-src="../assets/images/animals/{{request.anonAnimalFileName}}.svg"> <span>{{request.anonAnimalNameForHelpee}} on #{{ctrl.getQuestionNumber(request)}}</span></div><div ng-if="ctrl.isTeacherHelpInbox"><span flex="">{{ctrl.studentNameForStudentId(request.helpeeId)}} on #{{ctrl.getQuestionNumber(request)}}</span></div><i class="ck fa ck-next"></i></div></md-button></md-menu-item><md-menu-item class="no-requests" ng-if="!ctrl.hasUnresolvedHelpRequests" layout="" layout-align="center center">All helps answered!</md-menu-item><md-menu-item class="check-subtitle"><div class="contents" layout="" layout-align="start center"><span flex="">Please Check</span> <i class="ck fa ck-green ck-hand"></i> <span class="check-requests-count">{{ctrl.unresolvedCheckRequestsCount}}</span></div></md-menu-item><md-menu-item class="request" ng-repeat="request in ctrl.unresolvedCheckRequests"><md-button aria-label="give feedback" ng-click="ctrl.giveFeedbackTo(request)"><div class="contents" layout-fill="" layout="" layout-align="space-between center"><div ng-if="ctrl.isStudentHelpInbox" layout="" layout-align="start center"><img ng-src="../assets/images/animals/{{request.anonAnimalFileName}}.svg"> <span flex="">{{request.anonAnimalNameForHelpee}} on #{{ctrl.getQuestionNumber(request)}}</span></div><div ng-if="ctrl.isTeacherHelpInbox"><span flex="">{{ctrl.studentNameForStudentId(request.helpeeId)}} on #{{ctrl.getQuestionNumber(request)}}</span></div><i class="ck fa ck-next"></i></div></md-button></md-menu-item><md-menu-item class="no-requests" ng-if="!ctrl.hasUnresolvedCheckRequests" layout="" layout-align="center center">All checks answered!</md-menu-item><md-menu-item class="chat-subtitle" ng-if="ctrl.shouldShowChat"><div class="contents" layout="" layout-align="start center"><span flex="">Chats</span> <i class="ck fa ck-header-grey ck-chat"></i> <span class="chat-requests-count">{{ctrl.unresolvedChatRequestsCount}}</span></div></md-menu-item><md-menu-item class="request" ng-if="ctrl.shouldShowChat" ng-repeat="request in ctrl.unresolvedChatRequests"><md-button aria-label="give feedback" ng-click="ctrl.giveFeedbackTo(request)"><div class="contents" layout-fill="" layout="" layout-align="space-between center"><div ng-if="ctrl.isStudentHelpInbox" layout="" layout-align="start center"><img ng-src="../assets/images/animals/{{request.anonAnimalFileName}}.svg"> <span flex="">{{request.anonAnimalNameForHelpee}} on #{{ctrl.getQuestionNumber(request)}}</span></div><div ng-if="ctrl.isTeacherHelpInbox"><span flex="">{{ctrl.studentNameForStudentId(request.helpeeId)}} on #{{ctrl.getQuestionNumber(request)}}</span></div><i class="ck fa ck-next"></i></div></md-button></md-menu-item><md-menu-item class="no-requests" ng-if="!ctrl.hasUnresolvedChatRequests && ctrl.shouldShowChat" layout="" layout-align="center center">All chats answered!</md-menu-item></md-menu-content></md-menu>');e.put("app/components/help-request-indicator/help-request-indicator.html",'<div class="help-request-indicator" ng-class="{\'active\': ctrl.count > 0}" layout="row"><div ng-if="ctrl.showHand" flex="none" layout="" layout-align="center center"><i class="fa ck ck-hand"></i><span></span></div><div class="count" flex="none">{{ctrl.count}}</div></div>');e.put("app/components/image-cropper/image-cropper.html",'<svg class="image-cropper"><g class="image"></g><g class="crop"></g></svg>');e.put("app/components/image-picker-dialog/image-picker-dialog.html",'<md-dialog class="image-picker-dialog" aria-label="select image for sticker"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.$mdDialog.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Select Image</div><div layout="column" layout-align="center center"><md-content layout="" layout-wrap=""><md-button class="sticker" ck-autofocus="ctrl.isActive(sticker)" ng-click="ctrl.selectSticker(sticker.url)" ng-repeat="sticker in ctrl.defaultUserStickers" aria-label="{{::sticker.name}}"><div class="contents" layout="" layout-align="center center"><img ng-src="{{sticker.url}}"></div></md-button></md-content><div class="actions" layout="" layout-align="end end"><md-button ng-click="ctrl.selectSticker()">Remove Image</md-button><div layout="row" layout-align="center center"><md-button ng-click="ctrl.selectCustomSticker()">Import Custom Image</md-button></div></div></div></md-dialog>');e.put("app/components/import-google-rosters-dialog/import-google-rosters-dialog.html",'<md-dialog class="import-google-rosters-dialog" aria-label="import rosters from Google Classroom dialog"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Import Google Classroom Rosters</div><div><md-list ng-show="ctrl.rosters"><md-list-item class="list-item" ng-click="ctrl.importRosters([roster])" ng-repeat="roster in ctrl.rosters track by roster.id">{{roster.name}}</md-list-item></md-list><div class="no-rosters-message" ng-hide="ctrl.rosters">There are no courses associated with that Google Classroom account.</div><div class="actions" layout="" layout-align="end center"><md-button ng-click="ctrl.cancel()">Cancel</md-button><md-button class="ck-primary" ng-disabled="!ctrl.rosters" ng-click="ctrl.importRosters(ctrl.rosters)">Import All</md-button></div></div></md-dialog>');e.put("app/components/invite-teacher-dialog/invite-teacher-dialog.html",'<md-dialog class="invite-teacher-dialog" aria-label="Invite a teacher to this contract with the following code {{ctrl.proInviteCode}}"><div ng-if="ctrl.loading" class="loading" layout="column" layout-align="center stretch"><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="spinner" flex="none" layout="" layout-align="center"><i class="ck ck-loading fa fa-spin fa-5x ck-green"></i></div></div></div><div class="invite" ng-hide="ctrl.loading" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Invite teachers using this Pro Invite Code:</div><div class="invite-code" layout="" layout-align="center center">{{ctrl.proInviteCode}}</div><div class="hint" layout="" layout-align="center center">This code expires after 100 uses or 5 days</div><div class="instructions"><div class="situation">Teacher Instruction:</div><div class="step">1. Create or sign in to your Teacher Account in the Classkick app or at <a ng-href="{{:: ctrl.absBaseUrl}}" target="_blank">{{:: ctrl.currentBaseUrl}}</a></div><div class="step">2. Go to your Dashboard view</div><div class="step">3. Go to your "Profile" view</div><div class="step">4. Find the section labeled "Pro Invite Code" and enter: <span>{{ctrl.proInviteCode}}</span></div></div></div></md-dialog>');e.put("app/components/import-image-dialog/import-image-dialog.html",'<md-dialog class="import-image-dialog" aria-label="import image" layout="column"><md-dialog-content><div class="dialog-header" layout="row" layout-align="end" flex="none" ng-hide="ctrl.state === ctrl.LOAD_PDF"><md-button class="close-dialog" ng-click="ctrl.cancel(ctrl.state === ctrl.CANCEL_CHECK)" aria-label="close"><div layout="row" layout-align="center center"><i class="ck fa ck-close"></i></div></md-button></div><div class="crop" ng-show="ctrl.state === ctrl.CROP" flex="none" layout="column" layout-align="start stretch"><div class="content" layout="column"><span class="directions" layout="row" layout-align="center center">Drag to select, or click to <a ng-click="ctrl.cropSelectAll()" aria-label="select all">select all</a></span><div class="image-container" layout="row" layout-align="center center"><div ng-hide="ctrl.hasCropSource"><i class="ck fa ck-loading fa-5x fa-spin"></i></div><image-cropper class="cropper" source="ctrl.cropSource" ng-model="ctrl.cropResult" select-all="ctrl.selectAllTrigger" ng-show="ctrl.hasCropSource"></image-cropper></div></div><div layout="row" layout-align="center center" ng-show="ctrl.isPdf"><md-button class="crop-page-btn" ng-click="ctrl.crop_prev()" ng-disabled="!ctrl.crop_hasPrev()" aria-label="previous page"><div layout="row" layout-align="center center"><i class="ck fa ck-pageback"></i></div></md-button><div class="crop-question">{{ctrl.currentPage}}/{{ctrl.numPages}}</div><md-button class="crop-page-btn" ng-click="ctrl.crop_next()" ng-disabled="!ctrl.crop_hasNext()" aria-label="next page"><div layout="row" layout-align="center center"><i class="ck fa ck-pagenext"></i></div></md-button></div><div class="actions" layout="row" layout-align="end center"><md-button ng-click="ctrl.to(ctrl.REVIEW)" aria-label="back" ng-show="ctrl.hasWork">back</md-button><md-button ng-click="ctrl.importWholePdf()" aria-label="back" ng-show="ctrl.canImportWholePdf">Import All Pages</md-button><md-button class="ck-primary" ng-click="ctrl.to(ctrl.CHOOSE_DESTINATIONS)" ng-disabled="!ctrl.cropResult" aria-label="next">next</md-button></div></div><div class="choose-destinations" ng-show="ctrl.state === ctrl.CHOOSE_DESTINATIONS" layout="column" flex="none"><div class="content" layout="column" layout-align="start stretch"><div class="scroll-container" layout="column" layout-align="center center" flex="none"><div class="title">{{ctrl.isManipulative ? \'Manipulative \' : \'\'}}Image Preview</div><img class="cropped-preview" ng-src="{{ctrl.croppedImageSrc}}" ng-show="ctrl.croppedImageSrc"><div class="directions">Choose where to add this image</div><div class="dest-select" layout="row" layout-align="center center"><md-input-container flex=""><span class="label">Add to Question(s):</span><md-select ck-select="" md-container-class="dest-select-menu" ng-model="ctrl.currentSelection._destinations" multiple="" aria-label="Select the slides you would like to add this image to"><md-option ng-value="opt" ng-repeat="opt in ctrl.availableDestinations">{{opt.name}}</md-option></md-select></md-input-container></div></div></div><div class="actions" layout="row" layout-align="end center" flex="none"><md-button ng-hide="ctrl.isGif" ng-click="ctrl.to(ctrl.CROP)" aria-label="back">back</md-button><md-button class="ck-primary" ng-click="ctrl.to(ctrl.REVIEW)" ng-disabled="ctrl.currentSelection.destinations.length < 1" aria-label="next">next</md-button></div></div><div class="review" ng-show="ctrl.state === ctrl.REVIEW" flex="none"><div class="content" layout="column"><div class="title">Selected {{ctrl.isManipulative ? \'Manipulative\' : \'\'}} Images</div><md-list><md-list-item ng-repeat="import in ctrl.selectedImports" ng-click="ctrl.editSelection(import)"><div class="selection" layout="row" layout-align="space-between stretch"><div flex="grow" layout="row" layout-align="start center"><div flex="none" class="img-container" layout="row" layout-align="center center"><img ng-src="{{import.imageSrc}}"></div><div class="selection-list" flex="grow" layout="column" layout-align="start stretch"><div>Add To Question(s):</div><div>{{import.destinationNames}}</div></div></div><div flex="none"><md-button class="bar-item" ng-click="ctrl.removeSelection(import)" aria-label="remove selection"><div layout="row" layout-align="center center"><i class="ck fa ck-trash"></i></div></md-button></div></div></md-list-item></md-list></div><div class="actions" layout="row" layout-align="end center"><md-button ng-click="ctrl.cancel()" aria-label="cancel">Cancel</md-button><md-button ng-click="ctrl.to(ctrl.isGif ? ctrl.CHOOSE_DESTINATIONS : ctrl.CROP)" aria-label="add another">Add Another</md-button><md-button ng-click="ctrl.finish()" class="ck-primary" aria-label="finish" ng-disabled="ctrl.selectedImports.length < 1">Finish</md-button></div></div><div class="load-pdf" ng-show="ctrl.state === ctrl.LOAD_PDF" flex="none"><div class="content" layout="column" layout-align="center center"><p>Importing PDF</p><div><i class="ck fa ck-loading ck-green fa-spin fa-5x"></i></div><p>Progress: {{ctrl.currentPage}} / {{ctrl.numPages}}</p></div></div><div class="cancel-check" ng-show="ctrl.state === ctrl.CANCEL_CHECK" flex="none"><div class="content" layout="column"><div class="primary-message">You have unsaved images which will be lost if you exit this view.</div><div class="secondary-message">Are you sure you want to discard these images?</div></div><div class="actions" layout="row" layout-align="end center"><md-button ng-click="ctrl.resume()" aria-label="resume">No, Resume Working</md-button><md-button ng-click="ctrl.cancel(true)" aria-label="discard">Yes, Discard Images</md-button></div></div></md-dialog-content></md-dialog>');e.put("app/components/link-dialog/link-dialog.html",'<md-dialog class="link-dialog" aria-label="add link to canvas"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Add a URL or a YouTube/Vimeo Link</div><form name="addLinkForm" ng-submit="ctrl.submit(this)" layout="column" layout-align="center stretch"><md-input-container md-no-float=""><span class="label">Title</span> <input md-no-asterisk="" name="title" ng-model="ctrl.linkTitle" md-autofocus=""><div ng-messages="addLinkForm.title.$error"><div ng-message="required">Please enter a title</div></div></md-input-container><md-input-container md-no-float=""><span class="label">URL</span> <input name="link" ng-model="ctrl.linkUrl"><div ng-messages="addLinkForm.link.$error"><div ng-message="url">Invalid Link</div></div></md-input-container><div class="actions" layout="" layout-align="end center"><md-button class="ck-primary" name="submit" type="submit" ng-disabled="!ctrl.isUrlValid || !ctrl.isTitleValid">Save</md-button></div></form></md-dialog>');e.put("app/components/loading-dialog/loading-dialog.html",'<md-dialog class="loading-dialog" aria-label="loading"><md-dialog-content layout="column" layout-align="center center"><div><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></md-dialog-content></md-dialog>');e.put("app/components/move-assignment-dialog/move-assignment-dialog.html",'<md-dialog class="move-assignment-dialog" aria-label="Select folder to move assignment into"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button ng-hide="!ctrl.inFolder" class="bar-item" ng-click="ctrl.prev()" "="" aria-label="back a folder"><div class="contents"><i class="fa ck ck-back"></i></div></md-button><div flex=""></div><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Move "{{ctrl.assignmentToMoveName}}"</div><div class="body" layout="column" layout-align="start center"><div ng-if="ctrl.hasFolders" class="body-header" layout="" layout-align="center"><div class="folder">{{ctrl.currentFolderName}}</div></div><md-list ng-if="ctrl.hasFolders"><md-list-item ng-click="ctrl.selectFolder(folder)" ng-repeat="folder in ctrl.folders| orderBy: name : ctrl.isAscending"><div flex="none"><i class="ck fa ck-icon-grey ck-folder"></i></div><span flex="">{{folder.name}}</span></md-list-item></md-list><p ng-if="!ctrl.hasFolders">You do not have any folders.<br>Create a new folder by pressing the "+" button above.</p><div layout="" layout-margin=""><md-button ng-click="ctrl.$mdDialog.cancel()">cancel</md-button><md-button class="ck-primary" ng-click="ctrl.submit()" ng-disabled="!ctrl.allowMoveHere">Move here</md-button></div></div></md-dialog>');e.put("app/components/peer-help-inbox/peer-help-inbox.html",'<md-list><md-list-item class="empty-message" ng-hide="ctrl.hasHelpers || ctrl.hasHelpHistory" layout="" layout-align="center center">{{ctrl.user.name}} has no help history</md-list-item><md-list-item class="current-helpers" ng-show="ctrl.hasHelpers"><div class="contents" layout="" layout-align="start center">Right Now</div></md-list-item><div ng-repeat="(questionId, helpers) in ctrl.helpers track by questionId"><md-list-item class="current-helpers-item" ng-repeat="helper in helpers.list track by helper.id" ng-click="ctrl.goToFeedbackQuestion(helper.helpeeId, questionId, $event)"><div class="contents" layout-fill="" layout="" layout-align="start center"><span flex="" class="message" layout="" layout-align="start center">{{::helper.name}} is helping {{::ctrl.peer(helper.helpeeId).name}} on #{{::ctrl.questionNumber(questionId)}}</span> <i class="ck fa ck-next"></i></div></md-list-item></div><md-list-item ng-show="ctrl.hasHelpHistory" class="helper-history"><div class="contents" layout="" layout-align="start center">Helper History</div></md-list-item><md-list-item class="helper-history-item" ng-repeat="request in ctrl.helpHistory track by request.id" ng-click="ctrl.goToFeedbackQuestion(request.helpeeId, request.questionId, $event)"><div class="contents" layout-fill="" layout="" layout-align="start center"><div flex="" layout="column" layout-align="start start"><span flex="shrink" class="message" layout="" layout-align="start center">{{::ctrl.formatHelpHistoryItem(request)}}</span> <span flex="" class="time" layout="" layout-align="start center">{{::ctrl.formatTime(request.resolved)}}</span></div><i class="ck fa ck-next"></i></div></md-list-item></md-list>');e.put("app/components/pro-info-dialog/pro-info-dialog.html",'<md-dialog class="pro-info-dialog" aria-label="pro info dialog"><div ng-show="ctrl.loading" class="loading" layout="column" layout-align="center stretch"><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="spinner" flex="none" layout="" layout-align="center"><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></div><div ng-hide="ctrl.loading"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Upgrade to Classkick Pro</div><div class="features-list" layout="column" layout-align="start stretch"><div layout="row" layout-align="stretch center"><div class="feature" layout="row" layout-align="start center"><div flex="none" layout="" layout-align="center center"><img src="../assets/images/features/assignments.png" alt="Grade in an Instant"></div><div flex="" class="feature-description"><div class="feature-name">Unlimited Assignments</div><p>Take your classroom paperless with unlimited Classkick assignments.</p></div></div></div><div layout="row" layout-align="stretch center"><div class="feature" layout="row" layout-align="start center"><div flex="none" layout="" layout-align="center center"><img src="../assets/images/features/student-portfolios.png" alt="Build Student Portfolios"></div><div class="feature-description"><div layout="" layout-align="start center"><div class="feature-name">Build Student Portfolios</div></div><p>Have students log in to dedicated accounts to access all of their assignments.</p></div></div></div><div layout="row" layout-align="stretch center"><div class="feature" layout="row" layout-align="start center"><div flex="none" layout="" layout-align="center center"><img src="../assets/images/features/folders.png" alt="Stay Organized with Folders"></div><div class="feature-description"><div class="feature-name">Stay Organized</div><p>Create folders to store and organize all your Classkick assignments.</p></div></div></div><div layout="row" layout-align="stretch center"><div class="feature" layout="row" layout-align="start center"><div flex="none" layout="" layout-align="center center"><img src="../assets/images/features/exportdata.png" alt="Annotate Assignments"></div><div class="feature-description"><div class="feature-name">Export Student Data</div><p>Download grades, answers, and PDFs of student work.</p></div></div></div><div class="actions" layout="" layout-align="space-around center"><div class="action" layout="column" layout-align="start center"><md-button class="ck-primary" ng-click="ctrl.goToOrderPage()" aria-label="View plans for Classkick Pro">View Plans</md-button></div></div></div></div></md-dialog>');
e.put("app/components/roster-lock-dialog/roster-lock-dialog.html",'<md-dialog class="roster-lock-dialog" aria-label="roster locking options"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Lock Options</div><div class="lock-menu-body"><div class="lock-menu-inner"><ul class="lock-list"><li class="lock-list-item"><md-checkbox class="md-primary md-align-top-left" ng-model="ctrl.roster.isRosterLocked" aria-label="click to lock roster"><div class="lock-title">Lock this Roster</div><p class="body-subtext">{{ctrl.lockRosterExplanation}}</p></md-checkbox></li><li class="lock-list-item"><md-checkbox class="md-primary md-align-top-left" ng-model="ctrl.roster.disallowMultiLogin" aria-label="click to lock devices"><div class="lock-title">Single Device Login</div><p class="body-subtext">{{ctrl.lockDeviceExplanation}}</p></md-checkbox></li></ul></div></div></md-dialog>');e.put("app/components/roster-selection-dialog/roster-selection-dialog.html",'<md-dialog class="roster-selection-dialog" aria-label="select a roster from the following list"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">{{ctrl.title}}</div><md-content layout="column"><md-list-item class="list-header" layout="row" flex="none"><div flex="">Name</div><div class="search" layout="row" layout-align="start center" flex="none"><i class="ck fa ck-search"></i><md-input-container md-no-float=""><input type="text" ng-model="ctrl.searchTerm" ng-change="ctrl.search()" placeholder="Search"></md-input-container></div></md-list-item><div class="loading" ng-if="ctrl.loading"><md-progress-linear md-mode="indeterminate"></md-progress-linear></div><md-virtual-repeat-container><md-list><md-list-item md-virtual-repeat="roster in ctrl.rosters" layout="row" layout-nowrap=""><md-checkbox class="md-primary" ng-model="roster.toggled" ng-change="ctrl.toggleRoster(roster)" aria-label="toggle roster" flex="none"></md-checkbox><div flex="" class="name-col"><div class="truncate">{{roster.name}}</div></div></md-list-item><div class="empty-message" ng-if="!ctrl.loading && ctrl.rosters.length === 0 && !ctrl.searchTerm">There are no rosters available.</div><div class="empty-message" ng-if="!ctrl.loading && ctrl.rosters.length === 0 && ctrl.searchTerm">No rosters match the search term \'{{ctrl.searchTerm}}\'</div></md-list></md-virtual-repeat-container><div class="buttons" layout="row" layout-align="end" flex="none"><md-button class="ck-primary" ng-click="ctrl.export()">export</md-button></div></md-content></div></md-dialog>');e.put("app/components/saving-indicator/saving-indicator.html",'<div class="saving-indicator" layout="" layout-align="center center"><div ng-if="ctrl.saveState" class="saving-message enter-fade" ng-class="{\'ck-warn\': ctrl.saveState === ctrl.SAVE_ERROR}">{{ctrl.saveMessage}}</div></div>');e.put("app/components/select-purchase-period/select-purchase-period.component.html",'<div class="select-purchase-period" ng-if="ctrl.prices"><div class="yearly-price" layout="" layout-align="space-between start" ng-class="{active: ctrl.thisYearSelected}"><md-checkbox class="md-primary" ng-model="ctrl.thisYearSelected" name="thisYearSelectedInput" ng-disabled="ctrl.thisYearIsFree"><div class="contents">This Year</div></md-checkbox><div class="purchase-period">Today - Jun 30, {{::ctrl.thisYearEndYear}}</div><div flex=""></div><div class="original-price">{{ctrl.currency(ctrl.planPrice)}}</div><div class="discounted-price">{{ctrl.thisYearTotal ? ctrl.currency(ctrl.thisYearTotal) : \'Free\'}}</div></div><div class="yearly-price" layout="" layout-align="space-between start" ng-class="{active: ctrl.nextYearSelected}"><md-checkbox class="md-primary" ng-model="ctrl.nextYearSelected" name="nextYearSelectedInput"><div class="contents">Next Year</div></md-checkbox><div class="purchase-period">Jul 1, {{::ctrl.nextYearStartYear}} - Jun 30, {{::ctrl.nextYearEndYear}}</div><div flex=""></div><div class="original-price">{{ctrl.currency(ctrl.planPrice)}}</div><div class="discounted-price">{{ctrl.currency(ctrl.nextYearTotal)}}</div></div><div class="yearly-price" layout="" layout-align="space-between start" ng-class="{active: ctrl.inTwoYearsSelected}"><md-checkbox class="md-primary" ng-model="ctrl.inTwoYearsSelected" name="inTwoYearsSelectedInput"><div class="contents">In 2 Years</div></md-checkbox><div class="purchase-period">Jul 1, {{::ctrl.inTwoYearsStartYear}} - Jun 30, {{::ctrl.inTwoYearsEndYear}}</div><div flex=""></div><div flex="none" class="original-price">{{ctrl.currency(ctrl.planPrice)}}</div><div flex="none" class="discounted-price">{{ctrl.currency(ctrl.inTwoYearsTotal)}}</div></div><div class="total" layout="" layout-align="space-between start"><div>Total Due:</div><div class="price">{{ctrl.currency(ctrl.totalPrice)}}</div></div></div>');e.put("app/components/select-purchase-period-dialog/select-purchase-period-dialog.html",'<md-dialog class="select-purchase-period-dialog" aria-label="Select the purchase period for your quote"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">Update Purchase Period</div><form name="selectPurchasePeriodForm" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.selectPurchasePeriod(this)"><div class="body-content" layout="column" layout-align="start stretch"><select-purchase-period selected-start="ctrl.selectedStart" selected-end="ctrl.selectedEnd" quantity="ctrl.quantity" valid="ctrl.isValidPurchasePeriod" prices="ctrl.prices" hide-this-year="ctrl.hideThisYear" is-renewal="ctrl.isRenewal"></select-purchase-period><md-button class="ck-primary" type="submit" aria-label="Join your school">Save</md-button><div ng-if="!ctrl.isValidPurchasePeriod && ctrl.errorMessage" class="error-message enter-fade">{{ctrl.errorMessage}}</div></div></form></div></md-dialog>');e.put("app/components/select-sticker-menu/select-sticker-menu.html",'<div class="select-sticker-header" layout="" layout-align="start center"><div flex="none">Stickers</div><md-button class="contextual-help" ng-click="ctrl.showStickerWandHelp()" aria-label="help" layout="row" layout-align="center center"><i class="fa ck ck-contextualhelp"></i><md-tooltip md-delay="1000" md-direction="bottom">Get Help</md-tooltip></md-button><div flex=""></div></div><md-list><md-list-item class="sticker" layout="row" ng-repeat="sticker in ctrl.stickers track by sticker.id" ng-click="ctrl.select(sticker, $event)"><div class="img-container" layout="" layout-align="center center"><img ng-src="{{sticker.imageUrl || ctrl.defaultStickerImageUrl}}"></div><div class="text truncate" flex="" ng-click="$event.stopPropagation(); ctrl.select(sticker, $event)">{{sticker.text}}<md-tooltip ng-if="sticker.text.length > 20" md-delay="1000">{{sticker.text}}</md-tooltip></div><div class="score" ng-class="ctrl.stickerScoreClass(sticker.displayScore)">+{{sticker.displayScore}}</div></md-list-item><md-list-item class="empty-message" ng-if="ctrl.stickers.length === 0" layout="" layout-align="center center">You do not have any stickers.</md-list-item></md-list>');e.put("app/components/share-dialog/share-dialog.html",'<md-dialog class="share-dialog" aria-label="share assignment" layout="column" layout-align="start stretch"><div ng-if="ctrl.isTeacherOrStudent" class="select-share-recipient" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Share Assignment "{{ctrl.assignment.name}}"</div><div layout="column" layout-align="center stretch" layout-gt-sm="row" layout-align-gt-sm="center center" class="share-options"><div flex="" class="share-option-row" ng-click="ctrl.chooseTeacher()" layout="column" layout-align="center center"><img src="assets/images/i_am_teacher.png"><div class="share-option-title"><div class="title">Share a Copy with Colleagues</div></div></div><div ng-if="ctrl.currentUserIsAssignmentOwner" flex="none" class="spacer"></div><div ng-if="ctrl.currentUserIsAssignmentOwner" flex="" class="share-option-row" ng-click="ctrl.chooseStudent()" layout="column" layout-align="center center"><img src="assets/images/i_am_student.png"><div class="share-option-title"><div class="title">Assign to Students Using Class Code</div></div></div><div ng-if="ctrl.currentUserIsAssignmentOwner" flex="none" class="spacer"></div><div ng-if="ctrl.currentUserIsAssignmentOwner" flex="" class="share-option-row" ng-click="ctrl.addToSharedAssignmentsPage()" layout="column" layout-align="center center"><img src="assets/images/allassignments.png"><div class="share-option-title"><div class="title">Add to My Shared Assignments Page</div></div></div></div></div><div ng-if="ctrl.isTeacher" class="share-with-teacher" layout="column"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Share Assignment "{{ctrl.assignment.name}}"</div><md-tabs md-stretch-tabs="always" md-center-tabs="true" flex=""><md-tab ng-if="ctrl._authService.isLoggedIn" md-on-select="ctrl.addSocialMediaButtons()"><md-tab-label><span class="tab-label">Email</span></md-tab-label><md-tab-body class="tab-content" layout="column"><div class="share-preview" layout="row" layout-align="center start"><div class="preview-button" flex="40" layout="column" layout-align="start center"><img ng-click="ctrl.preview()" src="assets/images/share/share_preview.png"><md-button ng-click="ctrl.preview()">Preview Here</md-button></div></div><div class="label">Share with a colleague using email:</div><form name="emailShareForm" ng-submit="ctrl.sendEmails()" class="email-input" layout="row" layout-align="start start"><md-input-container aria-label="List of Emails" class="email-input-field" md-no-float="" flex=""><input ng-focus="emailShareForm.emails.$touched = true" name="emails" ng-model="ctrl.emails" ng-blur="ctrl.setEmailValidity(this)" aria-label="emails of people you want to share assignment with" placeholder="Emails (i.e. mycoteacher@school.edu, gradelevelteam@school.edu)"><div class="error-messages" ng-messages="emailShareForm.emails.$error"><div ng-message="pattern">Please enter up to 10 valid emails, separated by commas.</div></div></md-input-container><md-button type="submit" class="ck-primary submit-button" ng-disabled="!ctrl.emails">Send</md-button></form><div class="label">Or share on social media:</div><div class="social-media" layout="row" layout-align="start center">social</div></md-tab-body></md-tab><md-tab><md-tab-label><span class="tab-label">Link</span></md-tab-label><md-tab-body class="tab-content"><div class="share-preview" layout="row" layout-align="center start"><div class="preview-button" layout="column" layout-align="start center"><img ng-click="ctrl.preview()" src="assets/images/share/share_preview.png"><md-button ng-click="ctrl.preview()">Preview Here</md-button></div></div><div class="link-input" layout="row" layout-align="start start"><md-input-container aria-label="copy link" ng-click="ctrl.copy()" md-no-float="" flex=""><input id="link-input" class="readonly-link" ng-model="ctrl.link" readonly="" aria-label="copy link to assignment"></md-input-container><md-button ng-click="ctrl.copy()" class="ck-primary submit-button">Copy Link</md-button></div></md-tab-body></md-tab></md-tabs></div><div ng-if="ctrl.isEmailSuccess" class="email-success" layout="column" layout-align="center stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Share Assignment "{{ctrl.assignment.name}}"</div><div layout="column" layout-align="start center"><i class="ck-green ck fa ck-check fa-4x"></i><div class="email-success-message">Great! The assignment has been shared to:<br>{{ctrl.emails}}</div><a ng-click="ctrl.preview()">View it Here</a></div></div><div ng-if="ctrl.isLoading" class="loading" layout="column" layout-align="center stretch"><div class="ck-dialog-body" layout="column" layout-align="start stretch"><div class="spinner" flex="none" layout="" layout-align="center"><i class="ck ck-loading fa fa-spin fa-5x ck-green"></i></div><div class="message">Sharing assignment...</div></div></div></md-dialog>');e.put("app/components/share-order-dialog/share-order-dialog.html",'<md-dialog class="share-order-dialog" layout="column" layout-align="start stretch" aria-label="Input information to create a quote for Classkick Pro"><div ng-if="ctrl.state === ctrl.DraftEmail" class="share-order" flex="" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" flex="" layout="column"><form name="shareOrderForm" class="body" flex="" layout="column" layout-align="start stretch" ng-submit="ctrl.shareOrder(this)"><div class="body-content" flex="" layout="column" layout-align="start stretch"><md-input-container flex="none" class="from"><span class="label">From</span> <input name="fromInput" type="email" ng-model="ctrl.from" required="" md-no-asterisk="" aria-label="Enter the email to send an email"></md-input-container><md-input-container flex="none" class="to"><span class="label">To</span> <input name="toInput" ng-model="ctrl.to" ng-change="ctrl.setEmailValidity(this)" aria-label="Emails of people you want to share this order info with"><div class="error-messages" ng-messages="shareOrderForm.toInput.$error"><div ng-message="pattern">Please enter up to 10 valid emails, separated by commas.</div></div></md-input-container><md-input-container flex="none" class="subject"><span class="label">Subject</span> <input name="subjectInput" type="text" ng-model="ctrl.subject" required="" md-no-asterisk="" aria-label="Enter the subject line of the email"></md-input-container><md-input-container flex="" class="body" layout="column"><span class="label">Body</span> <textarea name="bodyInput" ng-maxlength="1000" ng-model="ctrl.body" required="" md-no-resize="" md-no-asterisk="" aria-label="Email body"></textarea><div class="error-messages" ng-messages="shareOrderForm.bodyInput.$error"><div ng-message="maxlength">body may not exceed 1000 characters</div></div></md-input-container><div layout="row" layout-align="end center"><md-button class="ck-primary" type="submit" aria-label="Send email">Send</md-button></div></div></form></div></div><div ng-if="ctrl.state === ctrl.EmailSent" class="email-sent"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column" layout-align="center center"><p>Message Sent!</p><i class="ck-green ck fa ck-check fa-5x"></i></div></div><div class="loading" ng-if="ctrl.state === ctrl.Loading"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column" layout-align="center center"><p>Sending Message...</p><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div><div class="error" ng-if="ctrl.state === ctrl.EmailError"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column" layout-align="center center"><div><i class="fa ck ck-alert ck-warn fa-5x"></i></div><p class="error-text">Sorry, there was a problem sharing your order</p></div></div></md-dialog>');e.put("app/components/share-with-student-dialog/share-with-student-dialog.html",'<script src="https://apis.google.com/js/platform.js" async="" defer=""></script><md-dialog class="share-with-student-dialog" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div flex="" class="content" layout="column" layout-align="center center"><div class="dialog-title">Share {{::ctrl.assignment.name}} with {{::ctrl.roster.name}}</div><div class="login-directions"><a class="account-type" ng-click="ctrl.openStudentAccountHelpDialog()">Basic</a> and <a class="account-type" ng-click="ctrl.openStudentAccountHelpDialog()">Portfolio</a> students log in with this class code:</div><div class="class-code" ng-style="{color: ctrl.roster.color}">{{::ctrl.classCode.format()}}</div><div class="share-link-directions">You can also share this link to help students log in faster:</div><div class="link-input" layout="row" layout-align="start start"><md-input-container aria-label="copy link" ng-click="ctrl.copy()" md-no-float="" flex=""><input id="link-input" class="readonly-link" ng-model="ctrl.studentLink" readonly="" aria-label="copy link to assignment"></md-input-container><md-button ng-click="ctrl.copy()" class="ck-primary submit-button">Copy Link</md-button><div class="share-to-classroom"><md-tooltip md-direction="bottom">Share to Google Classroom</md-tooltip><div class="g-sharetoclassroom" data-size="32" data-url="{{::ctrl.studentLink}}" data-title="{{::ctrl.assignment.name}}" data-body="{{::ctrl.assignment.brief}}"></div></div></div></div></md-dialog>');e.put("app/components/signup-dialog/signup-dialog.html",'<md-dialog class="signup-dialog" aria-label="Log In or Sign Up to Copy this Assignment"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Copy and Use Assignment</div><div class="content" layout="column" layout-align="start stretch"><p>To copy this asssignment into your account,<br>please log in to or sign up with Classkick.</p><div class="actions" layout="" layout-align="center center"><md-button class="login-button ck-primary" ng-click="ctrl.goToLogin()">Log in</md-button><md-button class="signup-button ck-secondary" ng-click="ctrl.goToSignup()">Sign up</md-button></div><div layout="" layout-align="center center"><a class="what-is-classkick" ng-click="ctrl.whatIsClasskick()" layout="" layout-align="center"><i class="ck fa ck-youtube"></i> What is Classkick?</a></div></div></md-dialog>');e.put("app/components/snackbar/snackbar.html",'<md-toast class="ck-snackbar" layout="row" flex=""><div class="md-toast-content" flex=""><div ng-bind-html="ctrl.message" flex=""></div><md-button ng-show="ctrl.action" class="ck-snackbar-button" ng-click="ctrl.dismiss()" aria-label="Dismiss internet connection toast"><div ng-bind-html="ctrl.action"></div></md-button></div></md-toast>');e.put("app/components/spinner-dialog/spinner-dialog.html",'<md-dialog class="spinner-dialog" aria-label="Spinner Dialog"><div class="md-dialog-content" layout="column"><div class="spinner-dialog-message">{{ctrl.message}}</div><div class="spinner"><i class="fa ck ck-loading ck-green fa-spin fa-3x"></i></div></div></md-dialog>');e.put("app/components/student-account-choice-dialog/student-account-choice-dialog.html",'<md-dialog class="student-account-choice-dialog" layout="column" layout-align="start stretch"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div flex="" class="content" layout="column" layout-align="start stretch"><div class="dialog-title">What type of student would you like to add?</div><div class="options" layout="" layout-xs="column"><div class="anon" flex="" layout="column" layout-align="start stretch"><md-button layout="column" layout-align="center center" ng-click="ctrl.selectBasic()"><img src="assets/images/student_basic.png"><div class="classkick-header">Basic</div></md-button><div class="details"><ul><li>Log in with name and class code</li><li>Can only view current assignment</li><li>Available in Classkick Free and Pro</li></ul></div></div><div class="portfolio" flex="" layout="column" layout-align="start stretch"><md-button layout="column" layout-align="center center" ng-click="ctrl.selectPortfolio()"><img src="assets/images/student_portfolio.png"> <span class="classkick-header">Portfolio</span><div class="anchor" ng-hide="ctrl.pro.hasStudentAccounts && !ctrl.pro.isTrial"><div class="pro-tag">PRO</div></div></md-button><div class="details"><ul><li>Log in with Google, Clever, or password</li><li>Can view all past assignments in one place</li><li>Only available in Classkick Pro</li></ul></div></div></div><div layout="" layout-align="end start"><md-checkbox ng-model="ctrl.rememberSelection" class="md-primary">Remember my selection for this roster</md-checkbox></div></div></md-dialog>');e.put("app/components/student-account-help-dialog/student-account-help-dialog.html",'<md-dialog class="student-account-help-dialog" layout="column" layout-align="start stretch" aria-label="Explains the different type of student accounts in Classkick"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div flex="" class="content" layout="column" layout-align="start stretch"><div class="dialog-title">Student Account Types</div><div class="options" layout="" layout-align="start start"><div flex="" class="option" layout="column" layout-align="start center"><div class="option-name">Basic</div><img class="option-gif" src="assets/images/student_basic.png"><div class="option-details"><ul><li>Log in with name and class code</li><li>Can only view current assignment</li><li>Available in Classkick Free and Pro</li></ul></div><div class="option-action"><md-button ng-click="ctrl.learnMoreBasic()">LEARN MORE</md-button></div></div><div class="spacer"></div><div flex="" class="option" layout="column" layout-align="start center"><div class="option-name"><span>Portfolio</span><div class="anchor" ng-hide="ctrl.pro.hasStudentAccounts && !ctrl.pro.isTrial"><span class="pro-tag">PRO</span></div></div><img class="option-gif" src="assets/images/student_portfolio.png"><div class="option-details"><ul><li>Log in with Google, Clever, or password</li><li>Can view all past assignments in one place</li><li>Only available in Classkick Pro</li></ul></div><div class="option-action" layout="column" layout-align="start center"><md-button ng-click="ctrl.learnMorePortfolio()">LEARN MORE</md-button></div></div></div></div></md-dialog>');e.put("app/components/student-code-dialog/student-code-dialog.html",'<md-dialog class="student-code-dialog" aria-label="Here are some items to help get started with Classkick!"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">Enter a class code</div><div class="body" layout="column" layout-align="center stretch"><form flex="none" name="enterCodeForm" layout="column" layout-align="start stretch" ng-submit="ctrl.submitCode()"><div layout="" layout-align="center center"><md-input-container md-is-error="ctrl.showError"><span class="label">Code</span> <input name="codeInput" type="text" ng-model="ctrl.code" ng-change="ctrl.codeUpdated(this)" autocomplete="off" aria-label="enter class code here" md-autofocus=""><div class="error-messages" ng-messages="enterCodeForm.codeInput.$error"><div ng-message="class-code">This class code is not valid</div><div ng-message="locked">{{ctrl.lockedOrHiddenMessage}}</div></div></md-input-container></div><div class="actions" layout="" layout-align="end center"><md-button class="ck-primary" type="submit" aria-label="Submit your class code" ng-disabled="!ctrl.codeIsValid">Submit</md-button></div></form></div></md-dialog>');e.put("app/components/student-info-menu/student-info-menu.html",'<div class="student-info-menu-header" layout="" layout-align="start center"><div flex="none">Student Info</div><div flex=""></div></div><div class="student-info-menu-body" layout="column" layout-align="start stretch"><div class="info-item">Name: {{::ctrl.user.name}}</div><div class="info-item" ng-hide="ctrl.isBasic || !ctrl.user.username">Username: {{::ctrl.user.username}}</div><div class="info-item" ng-hide="ctrl.isBasic || !ctrl.user.email">Email: {{::ctrl.user.email}}</div><div class="info-item" layout="" layout-align="start start">Account Type: {{::ctrl.isBasic ? \'Basic\' : \'Portfolio\'}} <span class="account-help" ng-click="ctrl.showAccountTypeHelp()"><i class="fa ck ck-contextualhelp"></i></span></div><div class="info-item" ng-if="ctrl.lastSeenDisplay">{{ctrl.lastSeenDisplay}}</div></div>');e.put("app/components/update-user-school-dialog/update-user-school-dialog.html",'<md-dialog class="update-user-school-dialog" aria-label="join a new/different school using the search input below"><div ng-hide="ctrl.loading" class="update-user-school"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button ng-hide="ctrl.state === ctrl.JoinSchool" class="bar-item" ng-click="ctrl.state = ctrl.JoinSchool" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-back"></i></div></md-button><div flex=""></div><md-button ng-hide="ctrl.preventClose" class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body" layout="column"><div class="ck-dialog-title">{{ctrl.title}}</div><p ng-if="ctrl.explanation">{{ctrl.explanation}}</p><form name="joinSchoolForm" ng-if="!ctrl.isLoading && ctrl.state === ctrl.JoinSchool" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.joinSchool(this)"><div class="body-content" layout="column" layout-align="start stretch"><md-autocomplete flex="" md-input-name="schoolNameInput" md-min-length="1" md-input-maxlength="60" md-search-text="ctrl.schoolName" md-selected-item="ctrl.school" md-item-text="item.name" md-mode="standard" md-items="item in ctrl.autocompleteSchool(ctrl.schoolName)" md-match-case-insensitive="true" md-menu-container-class="ck-join-organization-autocomplete-container" md-floating-label="Organization Name" required="" md-no-asterisk="" md-require-match="true"><span class="label">Organization Name</span><md-item-template><div ng-if="ctrl.isOrganization(item)" class="organization-content" layout="column" layout-align="center space-between"><span layout="row" layout-align="space-between start"><span class="organization-name">{{item.name}}</span> <span class="organization-members">{{item.memberCount || 0}} Teachers</span></span> <span class="organization-location">{{item.displayLocation}}</span></div><div ng-if="!ctrl.isOrganization(item)" class="add-organization" ng-click="ctrl.state = ctrl.AddSchool" layout="" layout-align="space-between"><span>My organization isn\'t listed</span> <span class="ck-green">Add organization</span></div></md-item-template><md-not-found><div class="add-organization" ng-click="ctrl.state = ctrl.AddSchool" layout="" layout-align="space-between"><span>My organization isn\'t listed</span> <span class="ck-green">Add organization</span></div></md-not-found><div class="error-messages" ng-messages="joinSchoolForm.schoolNameInput.$error"><div ng-message="required">Please select an organization from the list</div><div ng-message="md-require-match">Please select an organization from the list</div></div><div class="loading-spinner enter-fade" ng-if="ctrl.loadingAutocompleteSchool"><i class="fa ck ck-loading ck-green fa-spin"></i></div></md-autocomplete><md-button class="ck-primary" type="submit" aria-label="Join your school">Join Organization</md-button></div></form><form name="enterSchoolDetailsForm" ng-if="ctrl.state === ctrl.AddSchool" class="body" layout="column" layout-align="start stretch" ng-submit="ctrl.addSchool(this)"><div class="body-content" layout="column" layout-align="start stretch"><md-input-container class="org-options" flex="none" md-no-float=""><span class="label">Organization Type</span><md-select ck-select="" md-container-class="ck-select-menu" name="org-options" ng-model="ctrl.organizationType" aria-label="Select your organization type"><md-option ng-value="organizationType" ng-repeat="organizationType in ctrl.organizationOptions">{{:: organizationType.option}}</md-option></md-select></md-input-container><md-input-container flex="" class="school-name"><span class="label">Your Organization Name</span> <input name="newSchoolNameInput" type="text" ng-model="ctrl.newSchoolName" required="" md-no-asterisk="" aria-label="Enter your organization\'s name"></md-input-container><md-autocomplete flex="" md-input-name="schoolLocationInput" md-min-length="0" md-input-maxlength="60" md-search-text="ctrl.newSchoolLocationDisplay" md-selected-item="ctrl.newSchoolLocation" md-item-text="item.description" md-mode="standard" md-items="item in ctrl.autocompleteLocation(ctrl.newSchoolLocationDisplay)" md-delay="200" md-select-on-focus="true" md-select-on-match="true" md-match-case-insensitive="true" md-menu-container-class="ck-autocomplete-container" md-floating-label="City or town" required="" md-no-asterisk="" md-require-match="true"><span class="label">City or town</span><md-item-template><span>{{item.description}}</span></md-item-template><div class="error-messages" ng-messages="enterSchoolDetailsForm.schoolLocationInput.$error"><div ng-message="required">Please select a city or town from the list</div><div ng-message="md-require-match">Please select a city or town from the list</div></div><div class="loading-spinner enter-fade" ng-if="ctrl.loadingAutocompleteLocation"><i class="fa ck ck-loading ck-green fa-spin"></i></div></md-autocomplete><md-button class="ck-primary" type="submit" aria-label="Save organization name, city and state">Add Organization</md-button></div></form></div></div><div class="loading" ng-show="ctrl.loading" layout="" layout-align="center center"><div><i class="ck ck-loading fa fa-spin fa-4x ck-green"></i></div></div></md-dialog>');e.put("app/components/user-notification-dialog/user-notification-dialog.html",'<md-dialog class="user-notification-dialog"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-title">You received a new notification!</div><div layout="column" layout-align="center stretch"><div class="user-notification-text">{{:: ctrl.userNotificationListItem.message.text}}</div><div class="actions" layout="" layout-align="end end"><md-button ng-click="ctrl.removeUserNotificationListItem()">Delete</md-button><md-button ng-click="ctrl.callToAction()" class="ck-primary">Preview</md-button></div></div></md-dialog>');
e.put("app/components/video-player-dialog/video-player-dialog.html",'<md-dialog class="video-player-dialog" ng-style="{ width: ctrl.width }" layout="column" layout-align="start stretch" aria-label="Help Dialog"><div flex="none" class="video-player-dialog-header" layout="row" layout-align="start start" layout-nowrap=""><div flex=""></div><div flex="none" class="bar-item" layout="row"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div></div><div ng-style="{ height: ctrl.height }"><div id="player"></div></div><div flex="none" class="video-player-dialog-footer" layout="" layout-align="end center"><md-button ng-click="ctrl.openInNewTab()">Watch in new browser tab</md-button></div></md-dialog>');e.put("app/components/verify-organization-member-dialog/verify-organization-member-dialog.html",'<md-dialog class="verify-organization-member-dialog" aria-label="Verify that user is a member of your organization"><div class="ck-dialog-header" flex="none" layout="row" layout-align="end stretch"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div><div class="ck-dialog-body"><div class="primary-message">Is {{ctrl.memberName}} ({{ctrl.memberEmail}}) a member of {{ctrl.organizationName}}?</div><div class="secondary-message">Once verified, they will be able to view sensitive data (e.g. student names and emails)</div></div><md-dialog-actions><md-button ng-click="ctrl.remove()" class="md-primary" aria-label="cancel">No, remove from {{ctrl.organizationType}}</md-button><md-button ng-click="ctrl.verify()" class="ck-primary" aria-label="confirm">Yes, allow them to view students</md-button></md-dialog-actions></md-dialog>');e.put("app/components/view-help-dialog/view-help-dialog.html",'<md-dialog class="view-help-dialog" layout="column" layout-align="start stretch" aria-label="Help Dialog"><div><div flex="none" class="view-help-dialog-header" layout="row" layout-align="start start" layout-nowrap=""><div flex=""></div><div flex="none" class="bar-item" layout="row"><md-button class="bar-item" ng-click="ctrl.cancel()" aria-label="cancel dialog"><div class="contents"><i class="fa ck ck-close"></i></div></md-button></div></div><div flex="none" class="view-help-dialog-title" layout="row" layout-align="center center">{{::ctrl.title}}</div><div class="view-help-dialog-image-container"><div ng-show="ctrl.helps && ctrl.helps.length === 1" class="view-help-dialog-image"><img ng-hide="ctrl.currentImageIsYoutube" ng-src="{{ctrl.currentImageSanitizedUrl}}"><iframe ng-show="ctrl.currentImageIsYoutube" width="560" height="315" ng-src="{{ctrl.currentImageSanitizedUrl}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><div ng-show="ctrl.helps && ctrl.helps.length > 1" class="view-help-dialog-images"><div ng-style="ctrl.imagesStyle"><img ng-src="{{::help.sanitizedUrl}}" ng-repeat="help in ctrl.helps"></div></div></div><div flex="none" class="view-help-dialog-text" layout="column" layout-align="start center"><div class="sub-title">{{ctrl.currentTitle}}</div><div class="text">{{ctrl.currentDescription}}</div></div><div ng-hide="ctrl.hideNavButtons" flex="none" class="nav-buttons" layout="row" layout-align="center center"><md-button class="prev" ng-disabled="ctrl.onFirst" aria-label="go to previous help slide" ng-click="ctrl.prev()"><div layout="" layout-align="center center"><i class="ck ck-back"></i></div></md-button><div class="dot-container" layout="" layout-align="center center"><div class="dot-button" ng-repeat="help in ctrl.helps" ng-click="ctrl.goTo(help)"><div class="dot" ng-class="{\'active\': help.title === ctrl.currentTitle}"></div></div></div><md-button class="next" ng-disabled="ctrl.onLast" aria-label="scroll right" ng-click="ctrl.next()"><div layout="" layout-align="center center"><i class="ck ck-next"></i></div></md-button></div><div flex="none" class="view-help-dialog-footer" layout="" layout-align="end center"><md-button ng-if="ctrl.showHelp" ng-click="ctrl.openHelpCenter()">Need Help?</md-button></div></div></md-dialog>');e.put("app/components/assignment-toolbar/panels/highlighter-color.html",'<toolbar-color-menu colors="parent.elementColors" on-select="parent.updateHighlighterColor(color)"></toolbar-color-menu>');e.put("app/components/assignment-toolbar/panels/highlighter-width.html",'<div layout="column"><md-button class="tool-button" ng-class="{\'toggled\': parent.highlighterWidth === width}" ng-repeat="width in parent.highlighterWidths" ng-click="parent.updateHighlighterWidth(width)" aria-label="The width for the highlighter tool is {{::width}} pixels"><div layout="row" layout-align="center center"><span class="line-choice" ng-style="{\'height\': width * .5 }"></span></div></md-button></div>');e.put("app/components/assignment-toolbar/panels/image-menu.html",'<div layout="column"><md-button class="tool-button" ng-click="parent.createImageFromFile($event)" aria-label="Create an image by uploading a file"><div layout="row" layout-align="start center">Upload from computer</div></md-button><md-button class="tool-button" ng-click="parent.createImageFromCamera($event)" aria-label="Create an image by taking a picture"><div layout="row" layout-align="start center">Camera</div></md-button></div>');e.put("app/components/assignment-toolbar/panels/pen-color.html",'<toolbar-color-menu colors="parent.elementColors" on-select="parent.updatePenColor(color)"></toolbar-color-menu>');e.put("app/components/assignment-toolbar/panels/pen-width.html",'<div layout="column"><md-button class="tool-button" ng-class="{\'toggled\': parent.penWidth === width}" ng-repeat="width in parent.penWidths" ng-click="parent.updatePenWidth(width)" aria-label="The width for the pen tool is {{::width}} pixels"><div layout="row" layout-align="center center"><span class="line-choice" ng-style="{\'height\': width}"></span></div></md-button></div>');e.put("app/components/assignment-toolbar/panels/straight-line-color.html",'<toolbar-color-menu colors="parent.elementColors" on-select="parent.updateStraightLineColor(color)"></toolbar-color-menu>');e.put("app/components/assignment-toolbar/panels/straight-line-width.html",'<div layout="column"><md-button class="tool-button" ng-class="{\'md-focused\': parent.straightLineWidth === width}" ng-repeat="width in parent.straightLineWidths" ng-click="parent.updateStraightLineWidth(width)" aria-label="The width for the straight line tool is {{::width}} pixels"><div layout="row" layout-align="center center">{{width}} px</div></md-button></div>');e.put("app/components/assignment-toolbar/panels/text-background-color.html",'<toolbar-color-menu colors="parent.elementColors" on-select="parent.updateTextboxBackgroundColor(color)" transparent-button-text="No Background"></toolbar-color-menu>');e.put("app/components/assignment-toolbar/panels/text-border-color.html",'<toolbar-color-menu colors="parent.elementColors" on-select="parent.updateTextboxBorderColor(color)" transparent-button-text="No Border"></toolbar-color-menu>');e.put("app/components/assignment-toolbar/panels/text-color.html",'<toolbar-color-menu colors="parent.elementColors" on-select="parent.updateTextboxColor(color)"></toolbar-color-menu>')}]);
//# sourceMappingURL=../maps/scripts/app-961876ab96.js.map
